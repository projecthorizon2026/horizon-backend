(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function Rf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c0={exports:{}},yl={},p0={exports:{}},st={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var us=Symbol.for("react.element"),If=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),Lf=Symbol.for("react.strict_mode"),Bf=Symbol.for("react.profiler"),Mf=Symbol.for("react.provider"),Of=Symbol.for("react.context"),Af=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),Ff=Symbol.for("react.memo"),Wf=Symbol.for("react.lazy"),qd=Symbol.iterator;function Nf(e){return e===null||typeof e!="object"?null:(e=qd&&e[qd]||e["@@iterator"],typeof e=="function"?e:null)}var f0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u0=Object.assign,h0={};function bo(e,n,r){this.props=e,this.context=n,this.refs=h0,this.updater=r||f0}bo.prototype.isReactComponent={};bo.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};bo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function g0(){}g0.prototype=bo.prototype;function nd(e,n,r){this.props=e,this.context=n,this.refs=h0,this.updater=r||f0}var rd=nd.prototype=new g0;rd.constructor=nd;u0(rd,bo.prototype);rd.isPureReactComponent=!0;var ec=Array.isArray,x0=Object.prototype.hasOwnProperty,id={current:null},y0={key:!0,ref:!0,__self:!0,__source:!0};function m0(e,n,r){var i,o={},s=null,l=null;if(n!=null)for(i in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(s=""+n.key),n)x0.call(n,i)&&!y0.hasOwnProperty(i)&&(o[i]=n[i]);var d=arguments.length-2;if(d===1)o.children=r;else if(1<d){for(var c=Array(d),p=0;p<d;p++)c[p]=arguments[p+2];o.children=c}if(e&&e.defaultProps)for(i in d=e.defaultProps,d)o[i]===void 0&&(o[i]=d[i]);return{$$typeof:us,type:e,key:s,ref:l,props:o,_owner:id.current}}function Df(e,n){return{$$typeof:us,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function od(e){return typeof e=="object"&&e!==null&&e.$$typeof===us}function Hf(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return n[r]})}var tc=/\/+/g;function Ml(e,n){return typeof e=="object"&&e!==null&&e.key!=null?Hf(""+e.key):n.toString(36)}function Os(e,n,r,i,o){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case us:case If:l=!0}}if(l)return l=e,o=o(l),e=i===""?"."+Ml(l,0):i,ec(o)?(r="",e!=null&&(r=e.replace(tc,"$&/")+"/"),Os(o,n,r,"",function(p){return p})):o!=null&&(od(o)&&(o=Df(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(tc,"$&/")+"/")+e)),n.push(o)),1;if(l=0,i=i===""?".":i+":",ec(e))for(var d=0;d<e.length;d++){s=e[d];var c=i+Ml(s,d);l+=Os(s,n,r,c,o)}else if(c=Nf(e),typeof c=="function")for(e=c.call(e),d=0;!(s=e.next()).done;)s=s.value,c=i+Ml(s,d++),l+=Os(s,n,r,c,o);else if(s==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function ms(e,n,r){if(e==null)return e;var i=[],o=0;return Os(e,i,"","",function(s){return n.call(r,s,o++)}),i}function $f(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var rr={current:null},As={transition:null},Vf={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:As,ReactCurrentOwner:id};function b0(){throw Error("act(...) is not supported in production builds of React.")}st.Children={map:ms,forEach:function(e,n,r){ms(e,function(){n.apply(this,arguments)},r)},count:function(e){var n=0;return ms(e,function(){n++}),n},toArray:function(e){return ms(e,function(n){return n})||[]},only:function(e){if(!od(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};st.Component=bo;st.Fragment=Ef;st.Profiler=Bf;st.PureComponent=nd;st.StrictMode=Lf;st.Suspense=Pf;st.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vf;st.act=b0;st.cloneElement=function(e,n,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=u0({},e.props),o=e.key,s=e.ref,l=e._owner;if(n!=null){if(n.ref!==void 0&&(s=n.ref,l=id.current),n.key!==void 0&&(o=""+n.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(c in n)x0.call(n,c)&&!y0.hasOwnProperty(c)&&(i[c]=n[c]===void 0&&d!==void 0?d[c]:n[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){d=Array(c);for(var p=0;p<c;p++)d[p]=arguments[p+2];i.children=d}return{$$typeof:us,type:e.type,key:o,ref:s,props:i,_owner:l}};st.createContext=function(e){return e={$$typeof:Of,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mf,_context:e},e.Consumer=e};st.createElement=m0;st.createFactory=function(e){var n=m0.bind(null,e);return n.type=e,n};st.createRef=function(){return{current:null}};st.forwardRef=function(e){return{$$typeof:Af,render:e}};st.isValidElement=od;st.lazy=function(e){return{$$typeof:Wf,_payload:{_status:-1,_result:e},_init:$f}};st.memo=function(e,n){return{$$typeof:Ff,type:e,compare:n===void 0?null:n}};st.startTransition=function(e){var n=As.transition;As.transition={};try{e()}finally{As.transition=n}};st.unstable_act=b0;st.useCallback=function(e,n){return rr.current.useCallback(e,n)};st.useContext=function(e){return rr.current.useContext(e)};st.useDebugValue=function(){};st.useDeferredValue=function(e){return rr.current.useDeferredValue(e)};st.useEffect=function(e,n){return rr.current.useEffect(e,n)};st.useId=function(){return rr.current.useId()};st.useImperativeHandle=function(e,n,r){return rr.current.useImperativeHandle(e,n,r)};st.useInsertionEffect=function(e,n){return rr.current.useInsertionEffect(e,n)};st.useLayoutEffect=function(e,n){return rr.current.useLayoutEffect(e,n)};st.useMemo=function(e,n){return rr.current.useMemo(e,n)};st.useReducer=function(e,n,r){return rr.current.useReducer(e,n,r)};st.useRef=function(e){return rr.current.useRef(e)};st.useState=function(e){return rr.current.useState(e)};st.useSyncExternalStore=function(e,n,r){return rr.current.useSyncExternalStore(e,n,r)};st.useTransition=function(){return rr.current.useTransition()};st.version="18.3.1";p0.exports=st;var A=p0.exports;const Wr=Rf(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf=A,Gf=Symbol.for("react.element"),Yf=Symbol.for("react.fragment"),Xf=Object.prototype.hasOwnProperty,Kf=Uf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jf={key:!0,ref:!0,__self:!0,__source:!0};function v0(e,n,r){var i,o={},s=null,l=null;r!==void 0&&(s=""+r),n.key!==void 0&&(s=""+n.key),n.ref!==void 0&&(l=n.ref);for(i in n)Xf.call(n,i)&&!Jf.hasOwnProperty(i)&&(o[i]=n[i]);if(e&&e.defaultProps)for(i in n=e.defaultProps,n)o[i]===void 0&&(o[i]=n[i]);return{$$typeof:Gf,type:e,key:s,ref:l,props:o,_owner:Kf.current}}yl.Fragment=Yf;yl.jsx=v0;yl.jsxs=v0;c0.exports=yl;var t=c0.exports,aa={},j0={exports:{}},jr={},S0={exports:{}},w0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(se,me){var w=se.length;se.push(me);e:for(;0<w;){var x=w-1>>>1,R=se[x];if(0<o(R,me))se[x]=me,se[w]=R,w=x;else break e}}function r(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var me=se[0],w=se.pop();if(w!==me){se[0]=w;e:for(var x=0,R=se.length,M=R>>>1;x<M;){var ie=2*(x+1)-1,ae=se[ie],Se=ie+1,Ce=se[Se];if(0>o(ae,w))Se<R&&0>o(Ce,ae)?(se[x]=Ce,se[Se]=w,x=Se):(se[x]=ae,se[ie]=w,x=ie);else if(Se<R&&0>o(Ce,w))se[x]=Ce,se[Se]=w,x=Se;else break e}}return me}function o(se,me){var w=se.sortIndex-me.sortIndex;return w!==0?w:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var c=[],p=[],h=1,m=null,u=3,z=!1,S=!1,k=!1,y=typeof setTimeout=="function"?setTimeout:null,a=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(se){for(var me=r(p);me!==null;){if(me.callback===null)i(p);else if(me.startTime<=se)i(p),me.sortIndex=me.expirationTime,n(c,me);else break;me=r(p)}}function f(se){if(k=!1,v(se),!S)if(r(c)!==null)S=!0,ze(T);else{var me=r(p);me!==null&&tt(f,me.startTime-se)}}function T(se,me){S=!1,k&&(k=!1,a(O),O=-1),z=!0;var w=u;try{for(v(me),m=r(c);m!==null&&(!(m.expirationTime>me)||se&&!W());){var x=m.callback;if(typeof x=="function"){m.callback=null,u=m.priorityLevel;var R=x(m.expirationTime<=me);me=e.unstable_now(),typeof R=="function"?m.callback=R:m===r(c)&&i(c),v(me)}else i(c);m=r(c)}if(m!==null)var M=!0;else{var ie=r(p);ie!==null&&tt(f,ie.startTime-me),M=!1}return M}finally{m=null,u=w,z=!1}}var j=!1,b=null,O=-1,_=5,D=-1;function W(){return!(e.unstable_now()-D<_)}function G(){if(b!==null){var se=e.unstable_now();D=se;var me=!0;try{me=b(!0,se)}finally{me?_e():(j=!1,b=null)}}else j=!1}var _e;if(typeof g=="function")_e=function(){g(G)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,I=Fe.port2;Fe.port1.onmessage=G,_e=function(){I.postMessage(null)}}else _e=function(){y(G,0)};function ze(se){b=se,j||(j=!0,_e())}function tt(se,me){O=y(function(){se(e.unstable_now())},me)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(se){se.callback=null},e.unstable_continueExecution=function(){S||z||(S=!0,ze(T))},e.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<se?Math.floor(1e3/se):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(se){switch(u){case 1:case 2:case 3:var me=3;break;default:me=u}var w=u;u=me;try{return se()}finally{u=w}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var w=u;u=se;try{return me()}finally{u=w}},e.unstable_scheduleCallback=function(se,me,w){var x=e.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?x+w:x):w=x,se){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=w+R,se={id:h++,callback:me,priorityLevel:se,startTime:w,expirationTime:R,sortIndex:-1},w>x?(se.sortIndex=w,n(p,se),r(c)===null&&se===r(p)&&(k?(a(O),O=-1):k=!0,tt(f,w-x))):(se.sortIndex=R,n(c,se),S||z||(S=!0,ze(T))),se},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(se){var me=u;return function(){var w=u;u=me;try{return se.apply(this,arguments)}finally{u=w}}}})(w0);S0.exports=w0;var Qf=S0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf=A,vr=Qf;function ne(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k0=new Set,Jo={};function Di(e,n){fo(e,n),fo(e+"Capture",n)}function fo(e,n){for(Jo[e]=n,e=0;e<n.length;e++)k0.add(n[e])}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),da=Object.prototype.hasOwnProperty,qf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nc={},rc={};function eu(e){return da.call(rc,e)?!0:da.call(nc,e)?!1:qf.test(e)?rc[e]=!0:(nc[e]=!0,!1)}function tu(e,n,r,i){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nu(e,n,r,i){if(n===null||typeof n>"u"||tu(e,n,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ir(e,n,r,i,o,s,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=n,this.sanitizeURL=s,this.removeEmptyString=l}var Nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Nn[e]=new ir(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Nn[n]=new ir(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Nn[e]=new ir(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Nn[e]=new ir(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Nn[e]=new ir(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Nn[e]=new ir(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Nn[e]=new ir(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Nn[e]=new ir(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Nn[e]=new ir(e,5,!1,e.toLowerCase(),null,!1,!1)});var sd=/[\-:]([a-z])/g;function ld(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(sd,ld);Nn[n]=new ir(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(sd,ld);Nn[n]=new ir(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(sd,ld);Nn[n]=new ir(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Nn[e]=new ir(e,1,!1,e.toLowerCase(),null,!1,!1)});Nn.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Nn[e]=new ir(e,1,!1,e.toLowerCase(),null,!0,!0)});function ad(e,n,r,i){var o=Nn.hasOwnProperty(n)?Nn[n]:null;(o!==null?o.type!==0:i||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(nu(n,r,o,i)&&(r=null),i||o===null?eu(n)&&(r===null?e.removeAttribute(n):e.setAttribute(n,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(n=o.attributeName,i=o.attributeNamespace,r===null?e.removeAttribute(n):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?e.setAttributeNS(i,n,r):e.setAttribute(n,r))))}var ri=Zf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bs=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),dd=Symbol.for("react.strict_mode"),ca=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),T0=Symbol.for("react.context"),cd=Symbol.for("react.forward_ref"),pa=Symbol.for("react.suspense"),fa=Symbol.for("react.suspense_list"),pd=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),_0=Symbol.for("react.offscreen"),ic=Symbol.iterator;function zo(e){return e===null||typeof e!="object"?null:(e=ic&&e[ic]||e["@@iterator"],typeof e=="function"?e:null)}var an=Object.assign,Ol;function Po(e){if(Ol===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Ol=n&&n[1]||""}return`
`+Ol+e}var Al=!1;function Pl(e,n){if(!e||Al)return"";Al=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(p){var i=p}Reflect.construct(e,[],n)}else{try{n.call()}catch(p){i=p}e.call(n.prototype)}else{try{throw Error()}catch(p){i=p}e()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),s=i.stack.split(`
`),l=o.length-1,d=s.length-1;1<=l&&0<=d&&o[l]!==s[d];)d--;for(;1<=l&&0<=d;l--,d--)if(o[l]!==s[d]){if(l!==1||d!==1)do if(l--,d--,0>d||o[l]!==s[d]){var c=`
`+o[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=d);break}}}finally{Al=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Po(e):""}function ru(e){switch(e.tag){case 5:return Po(e.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return e=Pl(e.type,!1),e;case 11:return e=Pl(e.type.render,!1),e;case 1:return e=Pl(e.type,!0),e;default:return""}}function ua(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xi:return"Fragment";case Yi:return"Portal";case ca:return"Profiler";case dd:return"StrictMode";case pa:return"Suspense";case fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case T0:return(e.displayName||"Context")+".Consumer";case C0:return(e._context.displayName||"Context")+".Provider";case cd:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pd:return n=e.displayName||null,n!==null?n:ua(e.type)||"Memo";case ai:n=e._payload,e=e._init;try{return ua(e(n))}catch{}}return null}function iu(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ua(n);case 8:return n===dd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Si(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z0(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ou(e){var n=z0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),i=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return o.call(this)},set:function(l){i=""+l,s.call(this,l)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function vs(e){e._valueTracker||(e._valueTracker=ou(e))}function R0(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),i="";return e&&(i=z0(e)?e.checked?"true":"false":e.value),e=i,e!==r?(n.setValue(e),!0):!1}function Ys(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ha(e,n){var r=n.checked;return an({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function oc(e,n){var r=n.defaultValue==null?"":n.defaultValue,i=n.checked!=null?n.checked:n.defaultChecked;r=Si(n.value!=null?n.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function I0(e,n){n=n.checked,n!=null&&ad(e,"checked",n,!1)}function ga(e,n){I0(e,n);var r=Si(n.value),i=n.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?xa(e,n.type,r):n.hasOwnProperty("defaultValue")&&xa(e,n.type,Si(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function sc(e,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var i=n.type;if(!(i!=="submit"&&i!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,r||n===e.value||(e.value=n),e.defaultValue=n}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xa(e,n,r){(n!=="number"||Ys(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fo=Array.isArray;function oo(e,n,r,i){if(e=e.options,n){n={};for(var o=0;o<r.length;o++)n["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=n.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Si(r),n=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}n!==null||e[o].disabled||(n=e[o])}n!==null&&(n.selected=!0)}}function ya(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(ne(91));return an({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lc(e,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(ne(92));if(Fo(r)){if(1<r.length)throw Error(ne(93));r=r[0]}n=r}n==null&&(n=""),r=n}e._wrapperState={initialValue:Si(r)}}function E0(e,n){var r=Si(n.value),i=Si(n.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),n.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function ac(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function L0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ma(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?L0(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var js,B0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,i,o){MSApp.execUnsafeLocalFunction(function(){return e(n,r,i,o)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=js.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Qo(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},su=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(e){su.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Do[n]=Do[e]})});function M0(e,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||Do.hasOwnProperty(e)&&Do[e]?(""+n).trim():n+"px"}function O0(e,n){e=e.style;for(var r in n)if(n.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=M0(r,n[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,o):e[r]=o}}var lu=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ba(e,n){if(n){if(lu[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(ne(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(ne(61))}if(n.style!=null&&typeof n.style!="object")throw Error(ne(62))}}function va(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ja=null;function fd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sa=null,so=null,lo=null;function dc(e){if(e=xs(e)){if(typeof Sa!="function")throw Error(ne(280));var n=e.stateNode;n&&(n=Sl(n),Sa(e.stateNode,e.type,n))}}function A0(e){so?lo?lo.push(e):lo=[e]:so=e}function P0(){if(so){var e=so,n=lo;if(lo=so=null,dc(e),n)for(e=0;e<n.length;e++)dc(n[e])}}function F0(e,n){return e(n)}function W0(){}var Fl=!1;function N0(e,n,r){if(Fl)return e(n,r);Fl=!0;try{return F0(e,n,r)}finally{Fl=!1,(so!==null||lo!==null)&&(W0(),P0())}}function Zo(e,n){var r=e.stateNode;if(r===null)return null;var i=Sl(r);if(i===null)return null;r=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,n,typeof r));return r}var wa=!1;if(qr)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){wa=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{wa=!1}function au(e,n,r,i,o,s,l,d,c){var p=Array.prototype.slice.call(arguments,3);try{n.apply(r,p)}catch(h){this.onError(h)}}var Ho=!1,Xs=null,Ks=!1,ka=null,du={onError:function(e){Ho=!0,Xs=e}};function cu(e,n,r,i,o,s,l,d,c){Ho=!1,Xs=null,au.apply(du,arguments)}function pu(e,n,r,i,o,s,l,d,c){if(cu.apply(this,arguments),Ho){if(Ho){var p=Xs;Ho=!1,Xs=null}else throw Error(ne(198));Ks||(Ks=!0,ka=p)}}function Hi(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function D0(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function cc(e){if(Hi(e)!==e)throw Error(ne(188))}function fu(e){var n=e.alternate;if(!n){if(n=Hi(e),n===null)throw Error(ne(188));return n!==e?null:e}for(var r=e,i=n;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return cc(o),e;if(s===i)return cc(o),n;s=s.sibling}throw Error(ne(188))}if(r.return!==i.return)r=o,i=s;else{for(var l=!1,d=o.child;d;){if(d===r){l=!0,r=o,i=s;break}if(d===i){l=!0,i=o,r=s;break}d=d.sibling}if(!l){for(d=s.child;d;){if(d===r){l=!0,r=s,i=o;break}if(d===i){l=!0,i=s,r=o;break}d=d.sibling}if(!l)throw Error(ne(189))}}if(r.alternate!==i)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:n}function H0(e){return e=fu(e),e!==null?$0(e):null}function $0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=$0(e);if(n!==null)return n;e=e.sibling}return null}var V0=vr.unstable_scheduleCallback,pc=vr.unstable_cancelCallback,uu=vr.unstable_shouldYield,hu=vr.unstable_requestPaint,xn=vr.unstable_now,gu=vr.unstable_getCurrentPriorityLevel,ud=vr.unstable_ImmediatePriority,U0=vr.unstable_UserBlockingPriority,Js=vr.unstable_NormalPriority,xu=vr.unstable_LowPriority,G0=vr.unstable_IdlePriority,ml=null,Hr=null;function yu(e){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(ml,e,void 0,(e.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:vu,mu=Math.log,bu=Math.LN2;function vu(e){return e>>>=0,e===0?32:31-(mu(e)/bu|0)|0}var Ss=64,ws=4194304;function Wo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qs(e,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,o=e.suspendedLanes,s=e.pingedLanes,l=r&268435455;if(l!==0){var d=l&~o;d!==0?i=Wo(d):(s&=l,s!==0&&(i=Wo(s)))}else l=r&~o,l!==0?i=Wo(l):s!==0&&(i=Wo(s));if(i===0)return 0;if(n!==0&&n!==i&&!(n&o)&&(o=i&-i,s=n&-n,o>=s||o===16&&(s&4194240)!==0))return n;if(i&4&&(i|=r&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=i;0<n;)r=31-Mr(n),o=1<<r,i|=e[r],n&=~o;return i}function ju(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Su(e,n){for(var r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Mr(s),d=1<<l,c=o[l];c===-1?(!(d&r)||d&i)&&(o[l]=ju(d,n)):c<=n&&(e.expiredLanes|=d),s&=~d}}function Ca(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Y0(){var e=Ss;return Ss<<=1,!(Ss&4194240)&&(Ss=64),e}function Wl(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function hs(e,n,r){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Mr(n),e[n]=r}function wu(e,n){var r=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Mr(r),s=1<<o;n[o]=0,i[o]=-1,e[o]=-1,r&=~s}}function hd(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var i=31-Mr(r),o=1<<i;o&n|e[i]&n&&(e[i]|=n),r&=~o}}var Et=0;function X0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var K0,gd,J0,Q0,Z0,Ta=!1,ks=[],hi=null,gi=null,xi=null,qo=new Map,es=new Map,ci=[],ku="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(e,n){switch(e){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":xi=null;break;case"pointerover":case"pointerout":qo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":es.delete(n.pointerId)}}function Io(e,n,r,i,o,s){return e===null||e.nativeEvent!==s?(e={blockedOn:n,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},n!==null&&(n=xs(n),n!==null&&gd(n)),e):(e.eventSystemFlags|=i,n=e.targetContainers,o!==null&&n.indexOf(o)===-1&&n.push(o),e)}function Cu(e,n,r,i,o){switch(n){case"focusin":return hi=Io(hi,e,n,r,i,o),!0;case"dragenter":return gi=Io(gi,e,n,r,i,o),!0;case"mouseover":return xi=Io(xi,e,n,r,i,o),!0;case"pointerover":var s=o.pointerId;return qo.set(s,Io(qo.get(s)||null,e,n,r,i,o)),!0;case"gotpointercapture":return s=o.pointerId,es.set(s,Io(es.get(s)||null,e,n,r,i,o)),!0}return!1}function q0(e){var n=Ei(e.target);if(n!==null){var r=Hi(n);if(r!==null){if(n=r.tag,n===13){if(n=D0(r),n!==null){e.blockedOn=n,Z0(e.priority,function(){J0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ps(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=_a(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);ja=i,r.target.dispatchEvent(i),ja=null}else return n=xs(r),n!==null&&gd(n),e.blockedOn=r,!1;n.shift()}return!0}function uc(e,n,r){Ps(e)&&r.delete(n)}function Tu(){Ta=!1,hi!==null&&Ps(hi)&&(hi=null),gi!==null&&Ps(gi)&&(gi=null),xi!==null&&Ps(xi)&&(xi=null),qo.forEach(uc),es.forEach(uc)}function Eo(e,n){e.blockedOn===n&&(e.blockedOn=null,Ta||(Ta=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,Tu)))}function ts(e){function n(o){return Eo(o,e)}if(0<ks.length){Eo(ks[0],e);for(var r=1;r<ks.length;r++){var i=ks[r];i.blockedOn===e&&(i.blockedOn=null)}}for(hi!==null&&Eo(hi,e),gi!==null&&Eo(gi,e),xi!==null&&Eo(xi,e),qo.forEach(n),es.forEach(n),r=0;r<ci.length;r++)i=ci[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<ci.length&&(r=ci[0],r.blockedOn===null);)q0(r),r.blockedOn===null&&ci.shift()}var ao=ri.ReactCurrentBatchConfig,Zs=!0;function _u(e,n,r,i){var o=Et,s=ao.transition;ao.transition=null;try{Et=1,xd(e,n,r,i)}finally{Et=o,ao.transition=s}}function zu(e,n,r,i){var o=Et,s=ao.transition;ao.transition=null;try{Et=4,xd(e,n,r,i)}finally{Et=o,ao.transition=s}}function xd(e,n,r,i){if(Zs){var o=_a(e,n,r,i);if(o===null)Kl(e,n,i,qs,r),fc(e,i);else if(Cu(o,e,n,r,i))i.stopPropagation();else if(fc(e,i),n&4&&-1<ku.indexOf(e)){for(;o!==null;){var s=xs(o);if(s!==null&&K0(s),s=_a(e,n,r,i),s===null&&Kl(e,n,i,qs,r),s===o)break;o=s}o!==null&&i.stopPropagation()}else Kl(e,n,i,null,r)}}var qs=null;function _a(e,n,r,i){if(qs=null,e=fd(i),e=Ei(e),e!==null)if(n=Hi(e),n===null)e=null;else if(r=n.tag,r===13){if(e=D0(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return qs=e,null}function ep(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gu()){case ud:return 1;case U0:return 4;case Js:case xu:return 16;case G0:return 536870912;default:return 16}default:return 16}}var fi=null,yd=null,Fs=null;function tp(){if(Fs)return Fs;var e,n=yd,r=n.length,i,o="value"in fi?fi.value:fi.textContent,s=o.length;for(e=0;e<r&&n[e]===o[e];e++);var l=r-e;for(i=1;i<=l&&n[r-i]===o[s-i];i++);return Fs=o.slice(e,1<i?1-i:void 0)}function Ws(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Cs(){return!0}function hc(){return!1}function Sr(e){function n(r,i,o,s,l){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(s):s[d]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cs:hc,this.isPropagationStopped=hc,this}return an(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),n}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},md=Sr(vo),gs=an({},vo,{view:0,detail:0}),Ru=Sr(gs),Nl,Dl,Lo,bl=an({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lo&&(Lo&&e.type==="mousemove"?(Nl=e.screenX-Lo.screenX,Dl=e.screenY-Lo.screenY):Dl=Nl=0,Lo=e),Nl)},movementY:function(e){return"movementY"in e?e.movementY:Dl}}),gc=Sr(bl),Iu=an({},bl,{dataTransfer:0}),Eu=Sr(Iu),Lu=an({},gs,{relatedTarget:0}),Hl=Sr(Lu),Bu=an({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),Mu=Sr(Bu),Ou=an({},vo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Au=Sr(Ou),Pu=an({},vo,{data:0}),xc=Sr(Pu),Fu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Du(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Nu[e])?!!n[e]:!1}function bd(){return Du}var Hu=an({},gs,{key:function(e){if(e.key){var n=Fu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bd,charCode:function(e){return e.type==="keypress"?Ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$u=Sr(Hu),Vu=an({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yc=Sr(Vu),Uu=an({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bd}),Gu=Sr(Uu),Yu=an({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xu=Sr(Yu),Ku=an({},bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ju=Sr(Ku),Qu=[9,13,27,32],vd=qr&&"CompositionEvent"in window,$o=null;qr&&"documentMode"in document&&($o=document.documentMode);var Zu=qr&&"TextEvent"in window&&!$o,np=qr&&(!vd||$o&&8<$o&&11>=$o),mc=" ",bc=!1;function rp(e,n){switch(e){case"keyup":return Qu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ip(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ki=!1;function qu(e,n){switch(e){case"compositionend":return ip(n);case"keypress":return n.which!==32?null:(bc=!0,mc);case"textInput":return e=n.data,e===mc&&bc?null:e;default:return null}}function eh(e,n){if(Ki)return e==="compositionend"||!vd&&rp(e,n)?(e=tp(),Fs=yd=fi=null,Ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return np&&n.locale!=="ko"?null:n.data;default:return null}}var th={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!th[e.type]:n==="textarea"}function op(e,n,r,i){A0(i),n=el(n,"onChange"),0<n.length&&(r=new md("onChange","change",null,r,i),e.push({event:r,listeners:n}))}var Vo=null,ns=null;function nh(e){xp(e,0)}function vl(e){var n=Zi(e);if(R0(n))return e}function rh(e,n){if(e==="change")return n}var sp=!1;if(qr){var $l;if(qr){var Vl="oninput"in document;if(!Vl){var jc=document.createElement("div");jc.setAttribute("oninput","return;"),Vl=typeof jc.oninput=="function"}$l=Vl}else $l=!1;sp=$l&&(!document.documentMode||9<document.documentMode)}function Sc(){Vo&&(Vo.detachEvent("onpropertychange",lp),ns=Vo=null)}function lp(e){if(e.propertyName==="value"&&vl(ns)){var n=[];op(n,ns,e,fd(e)),N0(nh,n)}}function ih(e,n,r){e==="focusin"?(Sc(),Vo=n,ns=r,Vo.attachEvent("onpropertychange",lp)):e==="focusout"&&Sc()}function oh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vl(ns)}function sh(e,n){if(e==="click")return vl(n)}function lh(e,n){if(e==="input"||e==="change")return vl(n)}function ah(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ar=typeof Object.is=="function"?Object.is:ah;function rs(e,n){if(Ar(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),i=Object.keys(n);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!da.call(n,o)||!Ar(e[o],n[o]))return!1}return!0}function wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kc(e,n){var r=wc(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=n&&i>=n)return{node:r,offset:n-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wc(r)}}function ap(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ap(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function dp(){for(var e=window,n=Ys();n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Ys(e.document)}return n}function jd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function dh(e){var n=dp(),r=e.focusedElem,i=e.selectionRange;if(n!==r&&r&&r.ownerDocument&&ap(r.ownerDocument.documentElement,r)){if(i!==null&&jd(r)){if(n=i.start,e=i.end,e===void 0&&(e=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(e,r.value.length);else if(e=(n=r.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!e.extend&&s>i&&(o=i,i=s,s=o),o=kc(r,s);var l=kc(r,i);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(o.node,o.offset),e.removeAllRanges(),s>i?(e.addRange(n),e.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),e.addRange(n)))}}for(n=[],e=r;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)e=n[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ch=qr&&"documentMode"in document&&11>=document.documentMode,Ji=null,za=null,Uo=null,Ra=!1;function Cc(e,n,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ra||Ji==null||Ji!==Ys(i)||(i=Ji,"selectionStart"in i&&jd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Uo&&rs(Uo,i)||(Uo=i,i=el(za,"onSelect"),0<i.length&&(n=new md("onSelect","select",null,n,r),e.push({event:n,listeners:i}),n.target=Ji)))}function Ts(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Qi={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},Ul={},cp={};qr&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function jl(e){if(Ul[e])return Ul[e];if(!Qi[e])return e;var n=Qi[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in cp)return Ul[e]=n[r];return e}var pp=jl("animationend"),fp=jl("animationiteration"),up=jl("animationstart"),hp=jl("transitionend"),gp=new Map,Tc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(e,n){gp.set(e,n),Di(n,[e])}for(var Gl=0;Gl<Tc.length;Gl++){var Yl=Tc[Gl],ph=Yl.toLowerCase(),fh=Yl[0].toUpperCase()+Yl.slice(1);ki(ph,"on"+fh)}ki(pp,"onAnimationEnd");ki(fp,"onAnimationIteration");ki(up,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(hp,"onTransitionEnd");fo("onMouseEnter",["mouseout","mouseover"]);fo("onMouseLeave",["mouseout","mouseover"]);fo("onPointerEnter",["pointerout","pointerover"]);fo("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uh=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function _c(e,n,r){var i=e.type||"unknown-event";e.currentTarget=r,pu(i,n,void 0,e),e.currentTarget=null}function xp(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],o=i.event;i=i.listeners;e:{var s=void 0;if(n)for(var l=i.length-1;0<=l;l--){var d=i[l],c=d.instance,p=d.currentTarget;if(d=d.listener,c!==s&&o.isPropagationStopped())break e;_c(o,d,p),s=c}else for(l=0;l<i.length;l++){if(d=i[l],c=d.instance,p=d.currentTarget,d=d.listener,c!==s&&o.isPropagationStopped())break e;_c(o,d,p),s=c}}}if(Ks)throw e=ka,Ks=!1,ka=null,e}function Kt(e,n){var r=n[Ma];r===void 0&&(r=n[Ma]=new Set);var i=e+"__bubble";r.has(i)||(yp(n,e,2,!1),r.add(i))}function Xl(e,n,r){var i=0;n&&(i|=4),yp(r,e,i,n)}var _s="_reactListening"+Math.random().toString(36).slice(2);function is(e){if(!e[_s]){e[_s]=!0,k0.forEach(function(r){r!=="selectionchange"&&(uh.has(r)||Xl(r,!1,e),Xl(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[_s]||(n[_s]=!0,Xl("selectionchange",!1,n))}}function yp(e,n,r,i){switch(ep(n)){case 1:var o=_u;break;case 4:o=zu;break;default:o=xd}r=o.bind(null,n,r,e),o=void 0,!wa||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(n,r,{capture:!0,passive:o}):e.addEventListener(n,r,!0):o!==void 0?e.addEventListener(n,r,{passive:o}):e.addEventListener(n,r,!1)}function Kl(e,n,r,i,o){var s=i;if(!(n&1)&&!(n&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var d=i.stateNode.containerInfo;if(d===o||d.nodeType===8&&d.parentNode===o)break;if(l===4)for(l=i.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;l=l.return}for(;d!==null;){if(l=Ei(d),l===null)return;if(c=l.tag,c===5||c===6){i=s=l;continue e}d=d.parentNode}}i=i.return}N0(function(){var p=s,h=fd(r),m=[];e:{var u=gp.get(e);if(u!==void 0){var z=md,S=e;switch(e){case"keypress":if(Ws(r)===0)break e;case"keydown":case"keyup":z=$u;break;case"focusin":S="focus",z=Hl;break;case"focusout":S="blur",z=Hl;break;case"beforeblur":case"afterblur":z=Hl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=gc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Gu;break;case pp:case fp:case up:z=Mu;break;case hp:z=Xu;break;case"scroll":z=Ru;break;case"wheel":z=Ju;break;case"copy":case"cut":case"paste":z=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=yc}var k=(n&4)!==0,y=!k&&e==="scroll",a=k?u!==null?u+"Capture":null:u;k=[];for(var g=p,v;g!==null;){v=g;var f=v.stateNode;if(v.tag===5&&f!==null&&(v=f,a!==null&&(f=Zo(g,a),f!=null&&k.push(os(g,f,v)))),y)break;g=g.return}0<k.length&&(u=new z(u,S,null,r,h),m.push({event:u,listeners:k}))}}if(!(n&7)){e:{if(u=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",u&&r!==ja&&(S=r.relatedTarget||r.fromElement)&&(Ei(S)||S[ei]))break e;if((z||u)&&(u=h.window===h?h:(u=h.ownerDocument)?u.defaultView||u.parentWindow:window,z?(S=r.relatedTarget||r.toElement,z=p,S=S?Ei(S):null,S!==null&&(y=Hi(S),S!==y||S.tag!==5&&S.tag!==6)&&(S=null)):(z=null,S=p),z!==S)){if(k=gc,f="onMouseLeave",a="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(k=yc,f="onPointerLeave",a="onPointerEnter",g="pointer"),y=z==null?u:Zi(z),v=S==null?u:Zi(S),u=new k(f,g+"leave",z,r,h),u.target=y,u.relatedTarget=v,f=null,Ei(h)===p&&(k=new k(a,g+"enter",S,r,h),k.target=v,k.relatedTarget=y,f=k),y=f,z&&S)t:{for(k=z,a=S,g=0,v=k;v;v=Ui(v))g++;for(v=0,f=a;f;f=Ui(f))v++;for(;0<g-v;)k=Ui(k),g--;for(;0<v-g;)a=Ui(a),v--;for(;g--;){if(k===a||a!==null&&k===a.alternate)break t;k=Ui(k),a=Ui(a)}k=null}else k=null;z!==null&&zc(m,u,z,k,!1),S!==null&&y!==null&&zc(m,y,S,k,!0)}}e:{if(u=p?Zi(p):window,z=u.nodeName&&u.nodeName.toLowerCase(),z==="select"||z==="input"&&u.type==="file")var T=rh;else if(vc(u))if(sp)T=lh;else{T=oh;var j=ih}else(z=u.nodeName)&&z.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(T=sh);if(T&&(T=T(e,p))){op(m,T,r,h);break e}j&&j(e,u,p),e==="focusout"&&(j=u._wrapperState)&&j.controlled&&u.type==="number"&&xa(u,"number",u.value)}switch(j=p?Zi(p):window,e){case"focusin":(vc(j)||j.contentEditable==="true")&&(Ji=j,za=p,Uo=null);break;case"focusout":Uo=za=Ji=null;break;case"mousedown":Ra=!0;break;case"contextmenu":case"mouseup":case"dragend":Ra=!1,Cc(m,r,h);break;case"selectionchange":if(ch)break;case"keydown":case"keyup":Cc(m,r,h)}var b;if(vd)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Ki?rp(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(np&&r.locale!=="ko"&&(Ki||O!=="onCompositionStart"?O==="onCompositionEnd"&&Ki&&(b=tp()):(fi=h,yd="value"in fi?fi.value:fi.textContent,Ki=!0)),j=el(p,O),0<j.length&&(O=new xc(O,e,null,r,h),m.push({event:O,listeners:j}),b?O.data=b:(b=ip(r),b!==null&&(O.data=b)))),(b=Zu?qu(e,r):eh(e,r))&&(p=el(p,"onBeforeInput"),0<p.length&&(h=new xc("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:p}),h.data=b))}xp(m,n)})}function os(e,n,r){return{instance:e,listener:n,currentTarget:r}}function el(e,n){for(var r=n+"Capture",i=[];e!==null;){var o=e,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Zo(e,r),s!=null&&i.unshift(os(e,s,o)),s=Zo(e,n),s!=null&&i.push(os(e,s,o))),e=e.return}return i}function Ui(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zc(e,n,r,i,o){for(var s=n._reactName,l=[];r!==null&&r!==i;){var d=r,c=d.alternate,p=d.stateNode;if(c!==null&&c===i)break;d.tag===5&&p!==null&&(d=p,o?(c=Zo(r,s),c!=null&&l.unshift(os(r,c,d))):o||(c=Zo(r,s),c!=null&&l.push(os(r,c,d)))),r=r.return}l.length!==0&&e.push({event:n,listeners:l})}var hh=/\r\n?/g,gh=/\u0000|\uFFFD/g;function Rc(e){return(typeof e=="string"?e:""+e).replace(hh,`
`).replace(gh,"")}function zs(e,n,r){if(n=Rc(n),Rc(e)!==n&&r)throw Error(ne(425))}function tl(){}var Ia=null,Ea=null;function La(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ba=typeof setTimeout=="function"?setTimeout:void 0,xh=typeof clearTimeout=="function"?clearTimeout:void 0,Ic=typeof Promise=="function"?Promise:void 0,yh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ic<"u"?function(e){return Ic.resolve(null).then(e).catch(mh)}:Ba;function mh(e){setTimeout(function(){throw e})}function Jl(e,n){var r=n,i=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){e.removeChild(o),ts(n);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);ts(n)}function yi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Ec(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Dr="__reactFiber$"+jo,ss="__reactProps$"+jo,ei="__reactContainer$"+jo,Ma="__reactEvents$"+jo,bh="__reactListeners$"+jo,vh="__reactHandles$"+jo;function Ei(e){var n=e[Dr];if(n)return n;for(var r=e.parentNode;r;){if(n=r[ei]||r[Dr]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=Ec(e);e!==null;){if(r=e[Dr])return r;e=Ec(e)}return n}e=r,r=e.parentNode}return null}function xs(e){return e=e[Dr]||e[ei],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Sl(e){return e[ss]||null}var Oa=[],qi=-1;function Ci(e){return{current:e}}function Jt(e){0>qi||(e.current=Oa[qi],Oa[qi]=null,qi--)}function $t(e,n){qi++,Oa[qi]=e.current,e.current=n}var wi={},Xn=Ci(wi),fr=Ci(!1),Ai=wi;function uo(e,n){var r=e.type.contextTypes;if(!r)return wi;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=n[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),o}function ur(e){return e=e.childContextTypes,e!=null}function nl(){Jt(fr),Jt(Xn)}function Lc(e,n,r){if(Xn.current!==wi)throw Error(ne(168));$t(Xn,n),$t(fr,r)}function mp(e,n,r){var i=e.stateNode;if(n=n.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in n))throw Error(ne(108,iu(e)||"Unknown",o));return an({},r,i)}function rl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wi,Ai=Xn.current,$t(Xn,e),$t(fr,fr.current),!0}function Bc(e,n,r){var i=e.stateNode;if(!i)throw Error(ne(169));r?(e=mp(e,n,Ai),i.__reactInternalMemoizedMergedChildContext=e,Jt(fr),Jt(Xn),$t(Xn,e)):Jt(fr),$t(fr,r)}var Kr=null,wl=!1,Ql=!1;function bp(e){Kr===null?Kr=[e]:Kr.push(e)}function jh(e){wl=!0,bp(e)}function Ti(){if(!Ql&&Kr!==null){Ql=!0;var e=0,n=Et;try{var r=Kr;for(Et=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Kr=null,wl=!1}catch(o){throw Kr!==null&&(Kr=Kr.slice(e+1)),V0(ud,Ti),o}finally{Et=n,Ql=!1}}return null}var eo=[],to=0,il=null,ol=0,kr=[],Cr=0,Pi=null,Jr=1,Qr="";function Ri(e,n){eo[to++]=ol,eo[to++]=il,il=e,ol=n}function vp(e,n,r){kr[Cr++]=Jr,kr[Cr++]=Qr,kr[Cr++]=Pi,Pi=e;var i=Jr;e=Qr;var o=32-Mr(i)-1;i&=~(1<<o),r+=1;var s=32-Mr(n)+o;if(30<s){var l=o-o%5;s=(i&(1<<l)-1).toString(32),i>>=l,o-=l,Jr=1<<32-Mr(n)+o|r<<o|i,Qr=s+e}else Jr=1<<s|r<<o|i,Qr=e}function Sd(e){e.return!==null&&(Ri(e,1),vp(e,1,0))}function wd(e){for(;e===il;)il=eo[--to],eo[to]=null,ol=eo[--to],eo[to]=null;for(;e===Pi;)Pi=kr[--Cr],kr[Cr]=null,Qr=kr[--Cr],kr[Cr]=null,Jr=kr[--Cr],kr[Cr]=null}var br=null,mr=null,tn=!1,Br=null;function jp(e,n){var r=Tr(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=e,n=e.deletions,n===null?(e.deletions=[r],e.flags|=16):n.push(r)}function Mc(e,n){switch(e.tag){case 5:var r=e.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,br=e,mr=yi(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,br=e,mr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=Pi!==null?{id:Jr,overflow:Qr}:null,e.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=Tr(18,null,null,0),r.stateNode=n,r.return=e,e.child=r,br=e,mr=null,!0):!1;default:return!1}}function Aa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Pa(e){if(tn){var n=mr;if(n){var r=n;if(!Mc(e,n)){if(Aa(e))throw Error(ne(418));n=yi(r.nextSibling);var i=br;n&&Mc(e,n)?jp(i,r):(e.flags=e.flags&-4097|2,tn=!1,br=e)}}else{if(Aa(e))throw Error(ne(418));e.flags=e.flags&-4097|2,tn=!1,br=e}}}function Oc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;br=e}function Rs(e){if(e!==br)return!1;if(!tn)return Oc(e),tn=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!La(e.type,e.memoizedProps)),n&&(n=mr)){if(Aa(e))throw Sp(),Error(ne(418));for(;n;)jp(e,n),n=yi(n.nextSibling)}if(Oc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(n===0){mr=yi(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}e=e.nextSibling}mr=null}}else mr=br?yi(e.stateNode.nextSibling):null;return!0}function Sp(){for(var e=mr;e;)e=yi(e.nextSibling)}function ho(){mr=br=null,tn=!1}function kd(e){Br===null?Br=[e]:Br.push(e)}var Sh=ri.ReactCurrentBatchConfig;function Bo(e,n,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var i=r.stateNode}if(!i)throw Error(ne(147,e));var o=i,s=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===s?n.ref:(n=function(l){var d=o.refs;l===null?delete d[s]:d[s]=l},n._stringRef=s,n)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function Is(e,n){throw e=Object.prototype.toString.call(n),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Ac(e){var n=e._init;return n(e._payload)}function wp(e){function n(a,g){if(e){var v=a.deletions;v===null?(a.deletions=[g],a.flags|=16):v.push(g)}}function r(a,g){if(!e)return null;for(;g!==null;)n(a,g),g=g.sibling;return null}function i(a,g){for(a=new Map;g!==null;)g.key!==null?a.set(g.key,g):a.set(g.index,g),g=g.sibling;return a}function o(a,g){return a=ji(a,g),a.index=0,a.sibling=null,a}function s(a,g,v){return a.index=v,e?(v=a.alternate,v!==null?(v=v.index,v<g?(a.flags|=2,g):v):(a.flags|=2,g)):(a.flags|=1048576,g)}function l(a){return e&&a.alternate===null&&(a.flags|=2),a}function d(a,g,v,f){return g===null||g.tag!==6?(g=ia(v,a.mode,f),g.return=a,g):(g=o(g,v),g.return=a,g)}function c(a,g,v,f){var T=v.type;return T===Xi?h(a,g,v.props.children,f,v.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ai&&Ac(T)===g.type)?(f=o(g,v.props),f.ref=Bo(a,g,v),f.return=a,f):(f=Gs(v.type,v.key,v.props,null,a.mode,f),f.ref=Bo(a,g,v),f.return=a,f)}function p(a,g,v,f){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=oa(v,a.mode,f),g.return=a,g):(g=o(g,v.children||[]),g.return=a,g)}function h(a,g,v,f,T){return g===null||g.tag!==7?(g=Oi(v,a.mode,f,T),g.return=a,g):(g=o(g,v),g.return=a,g)}function m(a,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=ia(""+g,a.mode,v),g.return=a,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case bs:return v=Gs(g.type,g.key,g.props,null,a.mode,v),v.ref=Bo(a,null,g),v.return=a,v;case Yi:return g=oa(g,a.mode,v),g.return=a,g;case ai:var f=g._init;return m(a,f(g._payload),v)}if(Fo(g)||zo(g))return g=Oi(g,a.mode,v,null),g.return=a,g;Is(a,g)}return null}function u(a,g,v,f){var T=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:d(a,g,""+v,f);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bs:return v.key===T?c(a,g,v,f):null;case Yi:return v.key===T?p(a,g,v,f):null;case ai:return T=v._init,u(a,g,T(v._payload),f)}if(Fo(v)||zo(v))return T!==null?null:h(a,g,v,f,null);Is(a,v)}return null}function z(a,g,v,f,T){if(typeof f=="string"&&f!==""||typeof f=="number")return a=a.get(v)||null,d(g,a,""+f,T);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case bs:return a=a.get(f.key===null?v:f.key)||null,c(g,a,f,T);case Yi:return a=a.get(f.key===null?v:f.key)||null,p(g,a,f,T);case ai:var j=f._init;return z(a,g,v,j(f._payload),T)}if(Fo(f)||zo(f))return a=a.get(v)||null,h(g,a,f,T,null);Is(g,f)}return null}function S(a,g,v,f){for(var T=null,j=null,b=g,O=g=0,_=null;b!==null&&O<v.length;O++){b.index>O?(_=b,b=null):_=b.sibling;var D=u(a,b,v[O],f);if(D===null){b===null&&(b=_);break}e&&b&&D.alternate===null&&n(a,b),g=s(D,g,O),j===null?T=D:j.sibling=D,j=D,b=_}if(O===v.length)return r(a,b),tn&&Ri(a,O),T;if(b===null){for(;O<v.length;O++)b=m(a,v[O],f),b!==null&&(g=s(b,g,O),j===null?T=b:j.sibling=b,j=b);return tn&&Ri(a,O),T}for(b=i(a,b);O<v.length;O++)_=z(b,a,O,v[O],f),_!==null&&(e&&_.alternate!==null&&b.delete(_.key===null?O:_.key),g=s(_,g,O),j===null?T=_:j.sibling=_,j=_);return e&&b.forEach(function(W){return n(a,W)}),tn&&Ri(a,O),T}function k(a,g,v,f){var T=zo(v);if(typeof T!="function")throw Error(ne(150));if(v=T.call(v),v==null)throw Error(ne(151));for(var j=T=null,b=g,O=g=0,_=null,D=v.next();b!==null&&!D.done;O++,D=v.next()){b.index>O?(_=b,b=null):_=b.sibling;var W=u(a,b,D.value,f);if(W===null){b===null&&(b=_);break}e&&b&&W.alternate===null&&n(a,b),g=s(W,g,O),j===null?T=W:j.sibling=W,j=W,b=_}if(D.done)return r(a,b),tn&&Ri(a,O),T;if(b===null){for(;!D.done;O++,D=v.next())D=m(a,D.value,f),D!==null&&(g=s(D,g,O),j===null?T=D:j.sibling=D,j=D);return tn&&Ri(a,O),T}for(b=i(a,b);!D.done;O++,D=v.next())D=z(b,a,O,D.value,f),D!==null&&(e&&D.alternate!==null&&b.delete(D.key===null?O:D.key),g=s(D,g,O),j===null?T=D:j.sibling=D,j=D);return e&&b.forEach(function(G){return n(a,G)}),tn&&Ri(a,O),T}function y(a,g,v,f){if(typeof v=="object"&&v!==null&&v.type===Xi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case bs:e:{for(var T=v.key,j=g;j!==null;){if(j.key===T){if(T=v.type,T===Xi){if(j.tag===7){r(a,j.sibling),g=o(j,v.props.children),g.return=a,a=g;break e}}else if(j.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ai&&Ac(T)===j.type){r(a,j.sibling),g=o(j,v.props),g.ref=Bo(a,j,v),g.return=a,a=g;break e}r(a,j);break}else n(a,j);j=j.sibling}v.type===Xi?(g=Oi(v.props.children,a.mode,f,v.key),g.return=a,a=g):(f=Gs(v.type,v.key,v.props,null,a.mode,f),f.ref=Bo(a,g,v),f.return=a,a=f)}return l(a);case Yi:e:{for(j=v.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){r(a,g.sibling),g=o(g,v.children||[]),g.return=a,a=g;break e}else{r(a,g);break}else n(a,g);g=g.sibling}g=oa(v,a.mode,f),g.return=a,a=g}return l(a);case ai:return j=v._init,y(a,g,j(v._payload),f)}if(Fo(v))return S(a,g,v,f);if(zo(v))return k(a,g,v,f);Is(a,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(r(a,g.sibling),g=o(g,v),g.return=a,a=g):(r(a,g),g=ia(v,a.mode,f),g.return=a,a=g),l(a)):r(a,g)}return y}var go=wp(!0),kp=wp(!1),sl=Ci(null),ll=null,no=null,Cd=null;function Td(){Cd=no=ll=null}function _d(e){var n=sl.current;Jt(sl),e._currentValue=n}function Fa(e,n,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),e===r)break;e=e.return}}function co(e,n){ll=e,Cd=no=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(pr=!0),e.firstContext=null)}function zr(e){var n=e._currentValue;if(Cd!==e)if(e={context:e,memoizedValue:n,next:null},no===null){if(ll===null)throw Error(ne(308));no=e,ll.dependencies={lanes:0,firstContext:e}}else no=no.next=e;return n}var Li=null;function zd(e){Li===null?Li=[e]:Li.push(e)}function Cp(e,n,r,i){var o=n.interleaved;return o===null?(r.next=r,zd(n)):(r.next=o.next,o.next=r),n.interleaved=r,ti(e,i)}function ti(e,n){e.lanes|=n;var r=e.alternate;for(r!==null&&(r.lanes|=n),r=e,e=e.return;e!==null;)e.childLanes|=n,r=e.alternate,r!==null&&(r.childLanes|=n),r=e,e=e.return;return r.tag===3?r.stateNode:null}var di=!1;function Rd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tp(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zr(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function mi(e,n,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var o=i.pending;return o===null?n.next=n:(n.next=o.next,o.next=n),i.pending=n,ti(e,r)}return o=i.interleaved,o===null?(n.next=n,zd(i)):(n.next=o.next,o.next=n),i.interleaved=n,ti(e,r)}function Ns(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var i=n.lanes;i&=e.pendingLanes,r|=i,n.lanes=r,hd(e,r)}}function Pc(e,n){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=l:s=s.next=l,r=r.next}while(r!==null);s===null?o=s=n:s=s.next=n}else o=s=n;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}function al(e,n,r,i){var o=e.updateQueue;di=!1;var s=o.firstBaseUpdate,l=o.lastBaseUpdate,d=o.shared.pending;if(d!==null){o.shared.pending=null;var c=d,p=c.next;c.next=null,l===null?s=p:l.next=p,l=c;var h=e.alternate;h!==null&&(h=h.updateQueue,d=h.lastBaseUpdate,d!==l&&(d===null?h.firstBaseUpdate=p:d.next=p,h.lastBaseUpdate=c))}if(s!==null){var m=o.baseState;l=0,h=p=c=null,d=s;do{var u=d.lane,z=d.eventTime;if((i&u)===u){h!==null&&(h=h.next={eventTime:z,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var S=e,k=d;switch(u=n,z=r,k.tag){case 1:if(S=k.payload,typeof S=="function"){m=S.call(z,m,u);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,u=typeof S=="function"?S.call(z,m,u):S,u==null)break e;m=an({},m,u);break e;case 2:di=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,u=o.effects,u===null?o.effects=[d]:u.push(d))}else z={eventTime:z,lane:u,tag:d.tag,payload:d.payload,callback:d.callback,next:null},h===null?(p=h=z,c=m):h=h.next=z,l|=u;if(d=d.next,d===null){if(d=o.shared.pending,d===null)break;u=d,d=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}while(!0);if(h===null&&(c=m),o.baseState=c,o.firstBaseUpdate=p,o.lastBaseUpdate=h,n=o.shared.interleaved,n!==null){o=n;do l|=o.lane,o=o.next;while(o!==n)}else s===null&&(o.shared.lanes=0);Wi|=l,e.lanes=l,e.memoizedState=m}}function Fc(e,n,r){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var i=e[n],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(ne(191,o));o.call(i)}}}var ys={},$r=Ci(ys),ls=Ci(ys),as=Ci(ys);function Bi(e){if(e===ys)throw Error(ne(174));return e}function Id(e,n){switch($t(as,n),$t(ls,e),$t($r,ys),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ma(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=ma(n,e)}Jt($r),$t($r,n)}function xo(){Jt($r),Jt(ls),Jt(as)}function _p(e){Bi(as.current);var n=Bi($r.current),r=ma(n,e.type);n!==r&&($t(ls,e),$t($r,r))}function Ed(e){ls.current===e&&(Jt($r),Jt(ls))}var sn=Ci(0);function dl(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Zl=[];function Ld(){for(var e=0;e<Zl.length;e++)Zl[e]._workInProgressVersionPrimary=null;Zl.length=0}var Ds=ri.ReactCurrentDispatcher,ql=ri.ReactCurrentBatchConfig,Fi=0,ln=null,Tn=null,En=null,cl=!1,Go=!1,ds=0,wh=0;function Un(){throw Error(ne(321))}function Bd(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Ar(e[r],n[r]))return!1;return!0}function Md(e,n,r,i,o,s){if(Fi=s,ln=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ds.current=e===null||e.memoizedState===null?_h:zh,e=r(i,o),Go){s=0;do{if(Go=!1,ds=0,25<=s)throw Error(ne(301));s+=1,En=Tn=null,n.updateQueue=null,Ds.current=Rh,e=r(i,o)}while(Go)}if(Ds.current=pl,n=Tn!==null&&Tn.next!==null,Fi=0,En=Tn=ln=null,cl=!1,n)throw Error(ne(300));return e}function Od(){var e=ds!==0;return ds=0,e}function Nr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?ln.memoizedState=En=e:En=En.next=e,En}function Rr(){if(Tn===null){var e=ln.alternate;e=e!==null?e.memoizedState:null}else e=Tn.next;var n=En===null?ln.memoizedState:En.next;if(n!==null)En=n,Tn=e;else{if(e===null)throw Error(ne(310));Tn=e,e={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},En===null?ln.memoizedState=En=e:En=En.next=e}return En}function cs(e,n){return typeof n=="function"?n(e):n}function ea(e){var n=Rr(),r=n.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var i=Tn,o=i.baseQueue,s=r.pending;if(s!==null){if(o!==null){var l=o.next;o.next=s.next,s.next=l}i.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,i=i.baseState;var d=l=null,c=null,p=s;do{var h=p.lane;if((Fi&h)===h)c!==null&&(c=c.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:e(i,p.action);else{var m={lane:h,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};c===null?(d=c=m,l=i):c=c.next=m,ln.lanes|=h,Wi|=h}p=p.next}while(p!==null&&p!==s);c===null?l=i:c.next=d,Ar(i,n.memoizedState)||(pr=!0),n.memoizedState=i,n.baseState=l,n.baseQueue=c,r.lastRenderedState=i}if(e=r.interleaved,e!==null){o=e;do s=o.lane,ln.lanes|=s,Wi|=s,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function ta(e){var n=Rr(),r=n.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var i=r.dispatch,o=r.pending,s=n.memoizedState;if(o!==null){r.pending=null;var l=o=o.next;do s=e(s,l.action),l=l.next;while(l!==o);Ar(s,n.memoizedState)||(pr=!0),n.memoizedState=s,n.baseQueue===null&&(n.baseState=s),r.lastRenderedState=s}return[s,i]}function zp(){}function Rp(e,n){var r=ln,i=Rr(),o=n(),s=!Ar(i.memoizedState,o);if(s&&(i.memoizedState=o,pr=!0),i=i.queue,Ad(Lp.bind(null,r,i,e),[e]),i.getSnapshot!==n||s||En!==null&&En.memoizedState.tag&1){if(r.flags|=2048,ps(9,Ep.bind(null,r,i,o,n),void 0,null),Ln===null)throw Error(ne(349));Fi&30||Ip(r,n,o)}return o}function Ip(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=ln.updateQueue,n===null?(n={lastEffect:null,stores:null},ln.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function Ep(e,n,r,i){n.value=r,n.getSnapshot=i,Bp(n)&&Mp(e)}function Lp(e,n,r){return r(function(){Bp(n)&&Mp(e)})}function Bp(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Ar(e,r)}catch{return!0}}function Mp(e){var n=ti(e,1);n!==null&&Or(n,e,1,-1)}function Wc(e){var n=Nr();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:e},n.queue=e,e=e.dispatch=Th.bind(null,ln,e),[n.memoizedState,e]}function ps(e,n,r,i){return e={tag:e,create:n,destroy:r,deps:i,next:null},n=ln.updateQueue,n===null?(n={lastEffect:null,stores:null},ln.updateQueue=n,n.lastEffect=e.next=e):(r=n.lastEffect,r===null?n.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,n.lastEffect=e)),e}function Op(){return Rr().memoizedState}function Hs(e,n,r,i){var o=Nr();ln.flags|=e,o.memoizedState=ps(1|n,r,void 0,i===void 0?null:i)}function kl(e,n,r,i){var o=Rr();i=i===void 0?null:i;var s=void 0;if(Tn!==null){var l=Tn.memoizedState;if(s=l.destroy,i!==null&&Bd(i,l.deps)){o.memoizedState=ps(n,r,s,i);return}}ln.flags|=e,o.memoizedState=ps(1|n,r,s,i)}function Nc(e,n){return Hs(8390656,8,e,n)}function Ad(e,n){return kl(2048,8,e,n)}function Ap(e,n){return kl(4,2,e,n)}function Pp(e,n){return kl(4,4,e,n)}function Fp(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Wp(e,n,r){return r=r!=null?r.concat([e]):null,kl(4,4,Fp.bind(null,n,e),r)}function Pd(){}function Np(e,n){var r=Rr();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&Bd(n,i[1])?i[0]:(r.memoizedState=[e,n],e)}function Dp(e,n){var r=Rr();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&Bd(n,i[1])?i[0]:(e=e(),r.memoizedState=[e,n],e)}function Hp(e,n,r){return Fi&21?(Ar(r,n)||(r=Y0(),ln.lanes|=r,Wi|=r,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,pr=!0),e.memoizedState=r)}function kh(e,n){var r=Et;Et=r!==0&&4>r?r:4,e(!0);var i=ql.transition;ql.transition={};try{e(!1),n()}finally{Et=r,ql.transition=i}}function $p(){return Rr().memoizedState}function Ch(e,n,r){var i=vi(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Vp(e))Up(n,r);else if(r=Cp(e,n,r,i),r!==null){var o=nr();Or(r,e,i,o),Gp(r,n,i)}}function Th(e,n,r){var i=vi(e),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vp(e))Up(n,o);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=n.lastRenderedReducer,s!==null))try{var l=n.lastRenderedState,d=s(l,r);if(o.hasEagerState=!0,o.eagerState=d,Ar(d,l)){var c=n.interleaved;c===null?(o.next=o,zd(n)):(o.next=c.next,c.next=o),n.interleaved=o;return}}catch{}finally{}r=Cp(e,n,o,i),r!==null&&(o=nr(),Or(r,e,i,o),Gp(r,n,i))}}function Vp(e){var n=e.alternate;return e===ln||n!==null&&n===ln}function Up(e,n){Go=cl=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function Gp(e,n,r){if(r&4194240){var i=n.lanes;i&=e.pendingLanes,r|=i,n.lanes=r,hd(e,r)}}var pl={readContext:zr,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},_h={readContext:zr,useCallback:function(e,n){return Nr().memoizedState=[e,n===void 0?null:n],e},useContext:zr,useEffect:Nc,useImperativeHandle:function(e,n,r){return r=r!=null?r.concat([e]):null,Hs(4194308,4,Fp.bind(null,n,e),r)},useLayoutEffect:function(e,n){return Hs(4194308,4,e,n)},useInsertionEffect:function(e,n){return Hs(4,2,e,n)},useMemo:function(e,n){var r=Nr();return n=n===void 0?null:n,e=e(),r.memoizedState=[e,n],e},useReducer:function(e,n,r){var i=Nr();return n=r!==void 0?r(n):n,i.memoizedState=i.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},i.queue=e,e=e.dispatch=Ch.bind(null,ln,e),[i.memoizedState,e]},useRef:function(e){var n=Nr();return e={current:e},n.memoizedState=e},useState:Wc,useDebugValue:Pd,useDeferredValue:function(e){return Nr().memoizedState=e},useTransition:function(){var e=Wc(!1),n=e[0];return e=kh.bind(null,e[1]),Nr().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var i=ln,o=Nr();if(tn){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=n(),Ln===null)throw Error(ne(349));Fi&30||Ip(i,n,r)}o.memoizedState=r;var s={value:r,getSnapshot:n};return o.queue=s,Nc(Lp.bind(null,i,s,e),[e]),i.flags|=2048,ps(9,Ep.bind(null,i,s,r,n),void 0,null),r},useId:function(){var e=Nr(),n=Ln.identifierPrefix;if(tn){var r=Qr,i=Jr;r=(i&~(1<<32-Mr(i)-1)).toString(32)+r,n=":"+n+"R"+r,r=ds++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=wh++,n=":"+n+"r"+r.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},zh={readContext:zr,useCallback:Np,useContext:zr,useEffect:Ad,useImperativeHandle:Wp,useInsertionEffect:Ap,useLayoutEffect:Pp,useMemo:Dp,useReducer:ea,useRef:Op,useState:function(){return ea(cs)},useDebugValue:Pd,useDeferredValue:function(e){var n=Rr();return Hp(n,Tn.memoizedState,e)},useTransition:function(){var e=ea(cs)[0],n=Rr().memoizedState;return[e,n]},useMutableSource:zp,useSyncExternalStore:Rp,useId:$p,unstable_isNewReconciler:!1},Rh={readContext:zr,useCallback:Np,useContext:zr,useEffect:Ad,useImperativeHandle:Wp,useInsertionEffect:Ap,useLayoutEffect:Pp,useMemo:Dp,useReducer:ta,useRef:Op,useState:function(){return ta(cs)},useDebugValue:Pd,useDeferredValue:function(e){var n=Rr();return Tn===null?n.memoizedState=e:Hp(n,Tn.memoizedState,e)},useTransition:function(){var e=ta(cs)[0],n=Rr().memoizedState;return[e,n]},useMutableSource:zp,useSyncExternalStore:Rp,useId:$p,unstable_isNewReconciler:!1};function Er(e,n){if(e&&e.defaultProps){n=an({},n),e=e.defaultProps;for(var r in e)n[r]===void 0&&(n[r]=e[r]);return n}return n}function Wa(e,n,r,i){n=e.memoizedState,r=r(i,n),r=r==null?n:an({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Cl={isMounted:function(e){return(e=e._reactInternals)?Hi(e)===e:!1},enqueueSetState:function(e,n,r){e=e._reactInternals;var i=nr(),o=vi(e),s=Zr(i,o);s.payload=n,r!=null&&(s.callback=r),n=mi(e,s,o),n!==null&&(Or(n,e,o,i),Ns(n,e,o))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var i=nr(),o=vi(e),s=Zr(i,o);s.tag=1,s.payload=n,r!=null&&(s.callback=r),n=mi(e,s,o),n!==null&&(Or(n,e,o,i),Ns(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=nr(),i=vi(e),o=Zr(r,i);o.tag=2,n!=null&&(o.callback=n),n=mi(e,o,i),n!==null&&(Or(n,e,i,r),Ns(n,e,i))}};function Dc(e,n,r,i,o,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,l):n.prototype&&n.prototype.isPureReactComponent?!rs(r,i)||!rs(o,s):!0}function Yp(e,n,r){var i=!1,o=wi,s=n.contextType;return typeof s=="object"&&s!==null?s=zr(s):(o=ur(n)?Ai:Xn.current,i=n.contextTypes,s=(i=i!=null)?uo(e,o):wi),n=new n(r,s),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Cl,e.stateNode=n,n._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),n}function Hc(e,n,r,i){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,i),n.state!==e&&Cl.enqueueReplaceState(n,n.state,null)}function Na(e,n,r,i){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Rd(e);var s=n.contextType;typeof s=="object"&&s!==null?o.context=zr(s):(s=ur(n)?Ai:Xn.current,o.context=uo(e,s)),o.state=e.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Wa(e,n,s,r),o.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(n=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),n!==o.state&&Cl.enqueueReplaceState(o,o.state,null),al(e,r,o,i),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function yo(e,n){try{var r="",i=n;do r+=ru(i),i=i.return;while(i);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:n,stack:o,digest:null}}function na(e,n,r){return{value:e,source:null,stack:r??null,digest:n??null}}function Da(e,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var Ih=typeof WeakMap=="function"?WeakMap:Map;function Xp(e,n,r){r=Zr(-1,r),r.tag=3,r.payload={element:null};var i=n.value;return r.callback=function(){ul||(ul=!0,Qa=i),Da(e,n)},r}function Kp(e,n,r){r=Zr(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var o=n.value;r.payload=function(){return i(o)},r.callback=function(){Da(e,n)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Da(e,n),typeof i!="function"&&(bi===null?bi=new Set([this]):bi.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),r}function $c(e,n,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Ih;var o=new Set;i.set(n,o)}else o=i.get(n),o===void 0&&(o=new Set,i.set(n,o));o.has(r)||(o.add(r),e=Vh.bind(null,e,n,r),n.then(e,e))}function Vc(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Uc(e,n,r,i,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===n?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=Zr(-1,1),n.tag=2,mi(r,n,1))),r.lanes|=1),e)}var Eh=ri.ReactCurrentOwner,pr=!1;function tr(e,n,r,i){n.child=e===null?kp(n,null,r,i):go(n,e.child,r,i)}function Gc(e,n,r,i,o){r=r.render;var s=n.ref;return co(n,o),i=Md(e,n,r,i,s,o),r=Od(),e!==null&&!pr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o,ni(e,n,o)):(tn&&r&&Sd(n),n.flags|=1,tr(e,n,i,o),n.child)}function Yc(e,n,r,i,o){if(e===null){var s=r.type;return typeof s=="function"&&!Ud(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=s,Jp(e,n,s,i,o)):(e=Gs(r.type,null,i,n,n.mode,o),e.ref=n.ref,e.return=n,n.child=e)}if(s=e.child,!(e.lanes&o)){var l=s.memoizedProps;if(r=r.compare,r=r!==null?r:rs,r(l,i)&&e.ref===n.ref)return ni(e,n,o)}return n.flags|=1,e=ji(s,i),e.ref=n.ref,e.return=n,n.child=e}function Jp(e,n,r,i,o){if(e!==null){var s=e.memoizedProps;if(rs(s,i)&&e.ref===n.ref)if(pr=!1,n.pendingProps=i=s,(e.lanes&o)!==0)e.flags&131072&&(pr=!0);else return n.lanes=e.lanes,ni(e,n,o)}return Ha(e,n,r,i,o)}function Qp(e,n,r){var i=n.pendingProps,o=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(io,yr),yr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,$t(io,yr),yr|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,$t(io,yr),yr|=i}else s!==null?(i=s.baseLanes|r,n.memoizedState=null):i=r,$t(io,yr),yr|=i;return tr(e,n,o,r),n.child}function Zp(e,n){var r=n.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function Ha(e,n,r,i,o){var s=ur(r)?Ai:Xn.current;return s=uo(n,s),co(n,o),r=Md(e,n,r,i,s,o),i=Od(),e!==null&&!pr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o,ni(e,n,o)):(tn&&i&&Sd(n),n.flags|=1,tr(e,n,r,o),n.child)}function Xc(e,n,r,i,o){if(ur(r)){var s=!0;rl(n)}else s=!1;if(co(n,o),n.stateNode===null)$s(e,n),Yp(n,r,i),Na(n,r,i,o),i=!0;else if(e===null){var l=n.stateNode,d=n.memoizedProps;l.props=d;var c=l.context,p=r.contextType;typeof p=="object"&&p!==null?p=zr(p):(p=ur(r)?Ai:Xn.current,p=uo(n,p));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==i||c!==p)&&Hc(n,l,i,p),di=!1;var u=n.memoizedState;l.state=u,al(n,i,l,o),c=n.memoizedState,d!==i||u!==c||fr.current||di?(typeof h=="function"&&(Wa(n,r,h,i),c=n.memoizedState),(d=di||Dc(n,r,d,i,u,c,p))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=c),l.props=i,l.state=c,l.context=p,i=d):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{l=n.stateNode,Tp(e,n),d=n.memoizedProps,p=n.type===n.elementType?d:Er(n.type,d),l.props=p,m=n.pendingProps,u=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=zr(c):(c=ur(r)?Ai:Xn.current,c=uo(n,c));var z=r.getDerivedStateFromProps;(h=typeof z=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==m||u!==c)&&Hc(n,l,i,c),di=!1,u=n.memoizedState,l.state=u,al(n,i,l,o);var S=n.memoizedState;d!==m||u!==S||fr.current||di?(typeof z=="function"&&(Wa(n,r,z,i),S=n.memoizedState),(p=di||Dc(n,r,p,i,u,S,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,S,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,S,c)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&u===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&u===e.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=S),l.props=i,l.state=S,l.context=c,i=p):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&u===e.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&u===e.memoizedState||(n.flags|=1024),i=!1)}return $a(e,n,r,i,s,o)}function $a(e,n,r,i,o,s){Zp(e,n);var l=(n.flags&128)!==0;if(!i&&!l)return o&&Bc(n,r,!1),ni(e,n,s);i=n.stateNode,Eh.current=n;var d=l&&typeof r.getDerivedStateFromError!="function"?null:i.render();return n.flags|=1,e!==null&&l?(n.child=go(n,e.child,null,s),n.child=go(n,null,d,s)):tr(e,n,d,s),n.memoizedState=i.state,o&&Bc(n,r,!0),n.child}function qp(e){var n=e.stateNode;n.pendingContext?Lc(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Lc(e,n.context,!1),Id(e,n.containerInfo)}function Kc(e,n,r,i,o){return ho(),kd(o),n.flags|=256,tr(e,n,r,i),n.child}var Va={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function ef(e,n,r){var i=n.pendingProps,o=sn.current,s=!1,l=(n.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(o&2)!==0),d?(s=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),$t(sn,o&1),e===null)return Pa(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=i.children,e=i.fallback,s?(i=n.mode,s=n.child,l={mode:"hidden",children:l},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=zl(l,i,0,null),e=Oi(e,i,r,null),s.return=n,e.return=n,s.sibling=e,n.child=s,n.child.memoizedState=Ua(r),n.memoizedState=Va,e):Fd(n,l));if(o=e.memoizedState,o!==null&&(d=o.dehydrated,d!==null))return Lh(e,n,l,i,d,o,r);if(s){s=i.fallback,l=n.mode,o=e.child,d=o.sibling;var c={mode:"hidden",children:i.children};return!(l&1)&&n.child!==o?(i=n.child,i.childLanes=0,i.pendingProps=c,n.deletions=null):(i=ji(o,c),i.subtreeFlags=o.subtreeFlags&14680064),d!==null?s=ji(d,s):(s=Oi(s,l,r,null),s.flags|=2),s.return=n,i.return=n,i.sibling=s,n.child=i,i=s,s=n.child,l=e.child.memoizedState,l=l===null?Ua(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,n.memoizedState=Va,i}return s=e.child,e=s.sibling,i=ji(s,{mode:"visible",children:i.children}),!(n.mode&1)&&(i.lanes=r),i.return=n,i.sibling=null,e!==null&&(r=n.deletions,r===null?(n.deletions=[e],n.flags|=16):r.push(e)),n.child=i,n.memoizedState=null,i}function Fd(e,n){return n=zl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Es(e,n,r,i){return i!==null&&kd(i),go(n,e.child,null,r),e=Fd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Lh(e,n,r,i,o,s,l){if(r)return n.flags&256?(n.flags&=-257,i=na(Error(ne(422))),Es(e,n,l,i)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(s=i.fallback,o=n.mode,i=zl({mode:"visible",children:i.children},o,0,null),s=Oi(s,o,l,null),s.flags|=2,i.return=n,s.return=n,i.sibling=s,n.child=i,n.mode&1&&go(n,e.child,null,l),n.child.memoizedState=Ua(l),n.memoizedState=Va,s);if(!(n.mode&1))return Es(e,n,l,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var d=i.dgst;return i=d,s=Error(ne(419)),i=na(s,i,void 0),Es(e,n,l,i)}if(d=(l&e.childLanes)!==0,pr||d){if(i=Ln,i!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|l)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ti(e,o),Or(i,e,o,-1))}return Vd(),i=na(Error(ne(421))),Es(e,n,l,i)}return o.data==="$?"?(n.flags|=128,n.child=e.child,n=Uh.bind(null,e),o._reactRetry=n,null):(e=s.treeContext,mr=yi(o.nextSibling),br=n,tn=!0,Br=null,e!==null&&(kr[Cr++]=Jr,kr[Cr++]=Qr,kr[Cr++]=Pi,Jr=e.id,Qr=e.overflow,Pi=n),n=Fd(n,i.children),n.flags|=4096,n)}function Jc(e,n,r){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n),Fa(e.return,n,r)}function ra(e,n,r,i,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=o)}function tf(e,n,r){var i=n.pendingProps,o=i.revealOrder,s=i.tail;if(tr(e,n,i.children,r),i=sn.current,i&2)i=i&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jc(e,r,n);else if(e.tag===19)Jc(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if($t(sn,i),!(n.mode&1))n.memoizedState=null;else switch(o){case"forwards":for(r=n.child,o=null;r!==null;)e=r.alternate,e!==null&&dl(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=n.child,n.child=null):(o=r.sibling,r.sibling=null),ra(n,!1,o,r,s);break;case"backwards":for(r=null,o=n.child,n.child=null;o!==null;){if(e=o.alternate,e!==null&&dl(e)===null){n.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}ra(n,!0,r,null,s);break;case"together":ra(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function $s(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function ni(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Wi|=n.lanes,!(r&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(ne(153));if(n.child!==null){for(e=n.child,r=ji(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=ji(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function Bh(e,n,r){switch(n.tag){case 3:qp(n),ho();break;case 5:_p(n);break;case 1:ur(n.type)&&rl(n);break;case 4:Id(n,n.stateNode.containerInfo);break;case 10:var i=n.type._context,o=n.memoizedProps.value;$t(sl,i._currentValue),i._currentValue=o;break;case 13:if(i=n.memoizedState,i!==null)return i.dehydrated!==null?($t(sn,sn.current&1),n.flags|=128,null):r&n.child.childLanes?ef(e,n,r):($t(sn,sn.current&1),e=ni(e,n,r),e!==null?e.sibling:null);$t(sn,sn.current&1);break;case 19:if(i=(r&n.childLanes)!==0,e.flags&128){if(i)return tf(e,n,r);n.flags|=128}if(o=n.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),$t(sn,sn.current),i)break;return null;case 22:case 23:return n.lanes=0,Qp(e,n,r)}return ni(e,n,r)}var nf,Ga,rf,of;nf=function(e,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ga=function(){};rf=function(e,n,r,i){var o=e.memoizedProps;if(o!==i){e=n.stateNode,Bi($r.current);var s=null;switch(r){case"input":o=ha(e,o),i=ha(e,i),s=[];break;case"select":o=an({},o,{value:void 0}),i=an({},i,{value:void 0}),s=[];break;case"textarea":o=ya(e,o),i=ya(e,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=tl)}ba(r,i);var l;r=null;for(p in o)if(!i.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var d=o[p];for(l in d)d.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Jo.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in i){var c=i[p];if(d=o!=null?o[p]:void 0,i.hasOwnProperty(p)&&c!==d&&(c!=null||d!=null))if(p==="style")if(d){for(l in d)!d.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&d[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(s||(s=[]),s.push(p,r)),r=c;else p==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(s=s||[]).push(p,c)):p==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(p,""+c):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Jo.hasOwnProperty(p)?(c!=null&&p==="onScroll"&&Kt("scroll",e),s||d===c||(s=[])):(s=s||[]).push(p,c))}r&&(s=s||[]).push("style",r);var p=s;(n.updateQueue=p)&&(n.flags|=4)}};of=function(e,n,r,i){r!==i&&(n.flags|=4)};function Mo(e,n){if(!tn)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Gn(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(n)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=r,n}function Mh(e,n,r){var i=n.pendingProps;switch(wd(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(n),null;case 1:return ur(n.type)&&nl(),Gn(n),null;case 3:return i=n.stateNode,xo(),Jt(fr),Jt(Xn),Ld(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Rs(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Br!==null&&(ed(Br),Br=null))),Ga(e,n),Gn(n),null;case 5:Ed(n);var o=Bi(as.current);if(r=n.type,e!==null&&n.stateNode!=null)rf(e,n,r,i,o),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!i){if(n.stateNode===null)throw Error(ne(166));return Gn(n),null}if(e=Bi($r.current),Rs(n)){i=n.stateNode,r=n.type;var s=n.memoizedProps;switch(i[Dr]=n,i[ss]=s,e=(n.mode&1)!==0,r){case"dialog":Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":case"embed":Kt("load",i);break;case"video":case"audio":for(o=0;o<No.length;o++)Kt(No[o],i);break;case"source":Kt("error",i);break;case"img":case"image":case"link":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"input":oc(i,s),Kt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",i);break;case"textarea":lc(i,s),Kt("invalid",i)}ba(r,s),o=null;for(var l in s)if(s.hasOwnProperty(l)){var d=s[l];l==="children"?typeof d=="string"?i.textContent!==d&&(s.suppressHydrationWarning!==!0&&zs(i.textContent,d,e),o=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(s.suppressHydrationWarning!==!0&&zs(i.textContent,d,e),o=["children",""+d]):Jo.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&Kt("scroll",i)}switch(r){case"input":vs(i),sc(i,s,!0);break;case"textarea":vs(i),ac(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=tl)}i=o,n.updateQueue=i,i!==null&&(n.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=L0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=l.createElement(r,{is:i.is}):(e=l.createElement(r),r==="select"&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,r),e[Dr]=n,e[ss]=i,nf(e,n,!1,!1),n.stateNode=e;e:{switch(l=va(r,i),r){case"dialog":Kt("cancel",e),Kt("close",e),o=i;break;case"iframe":case"object":case"embed":Kt("load",e),o=i;break;case"video":case"audio":for(o=0;o<No.length;o++)Kt(No[o],e);o=i;break;case"source":Kt("error",e),o=i;break;case"img":case"image":case"link":Kt("error",e),Kt("load",e),o=i;break;case"details":Kt("toggle",e),o=i;break;case"input":oc(e,i),o=ha(e,i),Kt("invalid",e);break;case"option":o=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},o=an({},i,{value:void 0}),Kt("invalid",e);break;case"textarea":lc(e,i),o=ya(e,i),Kt("invalid",e);break;default:o=i}ba(r,o),d=o;for(s in d)if(d.hasOwnProperty(s)){var c=d[s];s==="style"?O0(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&B0(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Qo(e,c):typeof c=="number"&&Qo(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Kt("scroll",e):c!=null&&ad(e,s,c,l))}switch(r){case"input":vs(e),sc(e,i,!1);break;case"textarea":vs(e),ac(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Si(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?oo(e,!!i.multiple,s,!1):i.defaultValue!=null&&oo(e,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=tl)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Gn(n),null;case 6:if(e&&n.stateNode!=null)of(e,n,e.memoizedProps,i);else{if(typeof i!="string"&&n.stateNode===null)throw Error(ne(166));if(r=Bi(as.current),Bi($r.current),Rs(n)){if(i=n.stateNode,r=n.memoizedProps,i[Dr]=n,(s=i.nodeValue!==r)&&(e=br,e!==null))switch(e.tag){case 3:zs(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zs(i.nodeValue,r,(e.mode&1)!==0)}s&&(n.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Dr]=n,n.stateNode=i}return Gn(n),null;case 13:if(Jt(sn),i=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&mr!==null&&n.mode&1&&!(n.flags&128))Sp(),ho(),n.flags|=98560,s=!1;else if(s=Rs(n),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(ne(318));if(s=n.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ne(317));s[Dr]=n}else ho(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Gn(n),s=!1}else Br!==null&&(ed(Br),Br=null),s=!0;if(!s)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(n.child.flags|=8192,n.mode&1&&(e===null||sn.current&1?_n===0&&(_n=3):Vd())),n.updateQueue!==null&&(n.flags|=4),Gn(n),null);case 4:return xo(),Ga(e,n),e===null&&is(n.stateNode.containerInfo),Gn(n),null;case 10:return _d(n.type._context),Gn(n),null;case 17:return ur(n.type)&&nl(),Gn(n),null;case 19:if(Jt(sn),s=n.memoizedState,s===null)return Gn(n),null;if(i=(n.flags&128)!==0,l=s.rendering,l===null)if(i)Mo(s,!1);else{if(_n!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(l=dl(e),l!==null){for(n.flags|=128,Mo(s,!1),i=l.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),n.subtreeFlags=0,i=r,r=n.child;r!==null;)s=r,e=i,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $t(sn,sn.current&1|2),n.child}e=e.sibling}s.tail!==null&&xn()>mo&&(n.flags|=128,i=!0,Mo(s,!1),n.lanes=4194304)}else{if(!i)if(e=dl(l),e!==null){if(n.flags|=128,i=!0,r=e.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),Mo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!tn)return Gn(n),null}else 2*xn()-s.renderingStartTime>mo&&r!==1073741824&&(n.flags|=128,i=!0,Mo(s,!1),n.lanes=4194304);s.isBackwards?(l.sibling=n.child,n.child=l):(r=s.last,r!==null?r.sibling=l:n.child=l,s.last=l)}return s.tail!==null?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.renderingStartTime=xn(),n.sibling=null,r=sn.current,$t(sn,i?r&1|2:r&1),n):(Gn(n),null);case 22:case 23:return $d(),i=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(n.flags|=8192),i&&n.mode&1?yr&1073741824&&(Gn(n),n.subtreeFlags&6&&(n.flags|=8192)):Gn(n),null;case 24:return null;case 25:return null}throw Error(ne(156,n.tag))}function Oh(e,n){switch(wd(n),n.tag){case 1:return ur(n.type)&&nl(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return xo(),Jt(fr),Jt(Xn),Ld(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Ed(n),null;case 13:if(Jt(sn),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(ne(340));ho()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Jt(sn),null;case 4:return xo(),null;case 10:return _d(n.type._context),null;case 22:case 23:return $d(),null;case 24:return null;default:return null}}var Ls=!1,Yn=!1,Ah=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ro(e,n){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){fn(e,n,i)}else r.current=null}function Ya(e,n,r){try{r()}catch(i){fn(e,n,i)}}var Qc=!1;function Ph(e,n){if(Ia=Zs,e=dp(),jd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var l=0,d=-1,c=-1,p=0,h=0,m=e,u=null;t:for(;;){for(var z;m!==r||o!==0&&m.nodeType!==3||(d=l+o),m!==s||i!==0&&m.nodeType!==3||(c=l+i),m.nodeType===3&&(l+=m.nodeValue.length),(z=m.firstChild)!==null;)u=m,m=z;for(;;){if(m===e)break t;if(u===r&&++p===o&&(d=l),u===s&&++h===i&&(c=l),(z=m.nextSibling)!==null)break;m=u,u=m.parentNode}m=z}r=d===-1||c===-1?null:{start:d,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ea={focusedElem:e,selectionRange:r},Zs=!1,Te=n;Te!==null;)if(n=Te,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Te=e;else for(;Te!==null;){n=Te;try{var S=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,y=S.memoizedState,a=n.stateNode,g=a.getSnapshotBeforeUpdate(n.elementType===n.type?k:Er(n.type,k),y);a.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=n.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(f){fn(n,n.return,f)}if(e=n.sibling,e!==null){e.return=n.return,Te=e;break}Te=n.return}return S=Qc,Qc=!1,S}function Yo(e,n,r){var i=n.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&Ya(n,r,s)}o=o.next}while(o!==i)}}function Tl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==n)}}function Xa(e){var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof n=="function"?n(e):n.current=e}}function sf(e){var n=e.alternate;n!==null&&(e.alternate=null,sf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Dr],delete n[ss],delete n[Ma],delete n[bh],delete n[vh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lf(e){return e.tag===5||e.tag===3||e.tag===4}function Zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ka(e,n,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(e,r)):(n=r,n.appendChild(e)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=tl));else if(i!==4&&(e=e.child,e!==null))for(Ka(e,n,r),e=e.sibling;e!==null;)Ka(e,n,r),e=e.sibling}function Ja(e,n,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ja(e,n,r),e=e.sibling;e!==null;)Ja(e,n,r),e=e.sibling}var Fn=null,Lr=!1;function li(e,n,r){for(r=r.child;r!==null;)af(e,n,r),r=r.sibling}function af(e,n,r){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(ml,r)}catch{}switch(r.tag){case 5:Yn||ro(r,n);case 6:var i=Fn,o=Lr;Fn=null,li(e,n,r),Fn=i,Lr=o,Fn!==null&&(Lr?(e=Fn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fn.removeChild(r.stateNode));break;case 18:Fn!==null&&(Lr?(e=Fn,r=r.stateNode,e.nodeType===8?Jl(e.parentNode,r):e.nodeType===1&&Jl(e,r),ts(e)):Jl(Fn,r.stateNode));break;case 4:i=Fn,o=Lr,Fn=r.stateNode.containerInfo,Lr=!0,li(e,n,r),Fn=i,Lr=o;break;case 0:case 11:case 14:case 15:if(!Yn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Ya(r,n,l),o=o.next}while(o!==i)}li(e,n,r);break;case 1:if(!Yn&&(ro(r,n),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(d){fn(r,n,d)}li(e,n,r);break;case 21:li(e,n,r);break;case 22:r.mode&1?(Yn=(i=Yn)||r.memoizedState!==null,li(e,n,r),Yn=i):li(e,n,r);break;default:li(e,n,r)}}function qc(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ah),n.forEach(function(i){var o=Gh.bind(null,e,i);r.has(i)||(r.add(i),i.then(o,o))})}}function Ir(e,n){var r=n.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var s=e,l=n,d=l;e:for(;d!==null;){switch(d.tag){case 5:Fn=d.stateNode,Lr=!1;break e;case 3:Fn=d.stateNode.containerInfo,Lr=!0;break e;case 4:Fn=d.stateNode.containerInfo,Lr=!0;break e}d=d.return}if(Fn===null)throw Error(ne(160));af(s,l,o),Fn=null,Lr=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(p){fn(o,n,p)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)df(n,e),n=n.sibling}function df(e,n){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ir(n,e),Fr(e),i&4){try{Yo(3,e,e.return),Tl(3,e)}catch(k){fn(e,e.return,k)}try{Yo(5,e,e.return)}catch(k){fn(e,e.return,k)}}break;case 1:Ir(n,e),Fr(e),i&512&&r!==null&&ro(r,r.return);break;case 5:if(Ir(n,e),Fr(e),i&512&&r!==null&&ro(r,r.return),e.flags&32){var o=e.stateNode;try{Qo(o,"")}catch(k){fn(e,e.return,k)}}if(i&4&&(o=e.stateNode,o!=null)){var s=e.memoizedProps,l=r!==null?r.memoizedProps:s,d=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{d==="input"&&s.type==="radio"&&s.name!=null&&I0(o,s),va(d,l);var p=va(d,s);for(l=0;l<c.length;l+=2){var h=c[l],m=c[l+1];h==="style"?O0(o,m):h==="dangerouslySetInnerHTML"?B0(o,m):h==="children"?Qo(o,m):ad(o,h,m,p)}switch(d){case"input":ga(o,s);break;case"textarea":E0(o,s);break;case"select":var u=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var z=s.value;z!=null?oo(o,!!s.multiple,z,!1):u!==!!s.multiple&&(s.defaultValue!=null?oo(o,!!s.multiple,s.defaultValue,!0):oo(o,!!s.multiple,s.multiple?[]:"",!1))}o[ss]=s}catch(k){fn(e,e.return,k)}}break;case 6:if(Ir(n,e),Fr(e),i&4){if(e.stateNode===null)throw Error(ne(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(k){fn(e,e.return,k)}}break;case 3:if(Ir(n,e),Fr(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{ts(n.containerInfo)}catch(k){fn(e,e.return,k)}break;case 4:Ir(n,e),Fr(e);break;case 13:Ir(n,e),Fr(e),o=e.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Dd=xn())),i&4&&qc(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Yn=(p=Yn)||h,Ir(n,e),Yn=p):Ir(n,e),Fr(e),i&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!h&&e.mode&1)for(Te=e,h=e.child;h!==null;){for(m=Te=h;Te!==null;){switch(u=Te,z=u.child,u.tag){case 0:case 11:case 14:case 15:Yo(4,u,u.return);break;case 1:ro(u,u.return);var S=u.stateNode;if(typeof S.componentWillUnmount=="function"){i=u,r=u.return;try{n=i,S.props=n.memoizedProps,S.state=n.memoizedState,S.componentWillUnmount()}catch(k){fn(i,r,k)}}break;case 5:ro(u,u.return);break;case 22:if(u.memoizedState!==null){t0(m);continue}}z!==null?(z.return=u,Te=z):t0(m)}h=h.sibling}e:for(h=null,m=e;;){if(m.tag===5){if(h===null){h=m;try{o=m.stateNode,p?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(d=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=M0("display",l))}catch(k){fn(e,e.return,k)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=p?"":m.memoizedProps}catch(k){fn(e,e.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ir(n,e),Fr(e),i&4&&qc(e);break;case 21:break;default:Ir(n,e),Fr(e)}}function Fr(e){var n=e.flags;if(n&2){try{e:{for(var r=e.return;r!==null;){if(lf(r)){var i=r;break e}r=r.return}throw Error(ne(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Qo(o,""),i.flags&=-33);var s=Zc(e);Ja(e,s,o);break;case 3:case 4:var l=i.stateNode.containerInfo,d=Zc(e);Ka(e,d,l);break;default:throw Error(ne(161))}}catch(c){fn(e,e.return,c)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Fh(e,n,r){Te=e,cf(e)}function cf(e,n,r){for(var i=(e.mode&1)!==0;Te!==null;){var o=Te,s=o.child;if(o.tag===22&&i){var l=o.memoizedState!==null||Ls;if(!l){var d=o.alternate,c=d!==null&&d.memoizedState!==null||Yn;d=Ls;var p=Yn;if(Ls=l,(Yn=c)&&!p)for(Te=o;Te!==null;)l=Te,c=l.child,l.tag===22&&l.memoizedState!==null?n0(o):c!==null?(c.return=l,Te=c):n0(o);for(;s!==null;)Te=s,cf(s),s=s.sibling;Te=o,Ls=d,Yn=p}e0(e)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Te=s):e0(e)}}function e0(e){for(;Te!==null;){var n=Te;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Yn||Tl(5,n);break;case 1:var i=n.stateNode;if(n.flags&4&&!Yn)if(r===null)i.componentDidMount();else{var o=n.elementType===n.type?r.memoizedProps:Er(n.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=n.updateQueue;s!==null&&Fc(n,s,i);break;case 3:var l=n.updateQueue;if(l!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}Fc(n,l,r)}break;case 5:var d=n.stateNode;if(r===null&&n.flags&4){r=d;var c=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var p=n.alternate;if(p!==null){var h=p.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&ts(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Yn||n.flags&512&&Xa(n)}catch(u){fn(n,n.return,u)}}if(n===e){Te=null;break}if(r=n.sibling,r!==null){r.return=n.return,Te=r;break}Te=n.return}}function t0(e){for(;Te!==null;){var n=Te;if(n===e){Te=null;break}var r=n.sibling;if(r!==null){r.return=n.return,Te=r;break}Te=n.return}}function n0(e){for(;Te!==null;){var n=Te;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{Tl(4,n)}catch(c){fn(n,r,c)}break;case 1:var i=n.stateNode;if(typeof i.componentDidMount=="function"){var o=n.return;try{i.componentDidMount()}catch(c){fn(n,o,c)}}var s=n.return;try{Xa(n)}catch(c){fn(n,s,c)}break;case 5:var l=n.return;try{Xa(n)}catch(c){fn(n,l,c)}}}catch(c){fn(n,n.return,c)}if(n===e){Te=null;break}var d=n.sibling;if(d!==null){d.return=n.return,Te=d;break}Te=n.return}}var Wh=Math.ceil,fl=ri.ReactCurrentDispatcher,Wd=ri.ReactCurrentOwner,_r=ri.ReactCurrentBatchConfig,mt=0,Ln=null,jn=null,Wn=0,yr=0,io=Ci(0),_n=0,fs=null,Wi=0,_l=0,Nd=0,Xo=null,cr=null,Dd=0,mo=1/0,Xr=null,ul=!1,Qa=null,bi=null,Bs=!1,ui=null,hl=0,Ko=0,Za=null,Vs=-1,Us=0;function nr(){return mt&6?xn():Vs!==-1?Vs:Vs=xn()}function vi(e){return e.mode&1?mt&2&&Wn!==0?Wn&-Wn:Sh.transition!==null?(Us===0&&(Us=Y0()),Us):(e=Et,e!==0||(e=window.event,e=e===void 0?16:ep(e.type)),e):1}function Or(e,n,r,i){if(50<Ko)throw Ko=0,Za=null,Error(ne(185));hs(e,r,i),(!(mt&2)||e!==Ln)&&(e===Ln&&(!(mt&2)&&(_l|=r),_n===4&&pi(e,Wn)),hr(e,i),r===1&&mt===0&&!(n.mode&1)&&(mo=xn()+500,wl&&Ti()))}function hr(e,n){var r=e.callbackNode;Su(e,n);var i=Qs(e,e===Ln?Wn:0);if(i===0)r!==null&&pc(r),e.callbackNode=null,e.callbackPriority=0;else if(n=i&-i,e.callbackPriority!==n){if(r!=null&&pc(r),n===1)e.tag===0?jh(r0.bind(null,e)):bp(r0.bind(null,e)),yh(function(){!(mt&6)&&Ti()}),r=null;else{switch(X0(i)){case 1:r=ud;break;case 4:r=U0;break;case 16:r=Js;break;case 536870912:r=G0;break;default:r=Js}r=mf(r,pf.bind(null,e))}e.callbackPriority=n,e.callbackNode=r}}function pf(e,n){if(Vs=-1,Us=0,mt&6)throw Error(ne(327));var r=e.callbackNode;if(po()&&e.callbackNode!==r)return null;var i=Qs(e,e===Ln?Wn:0);if(i===0)return null;if(i&30||i&e.expiredLanes||n)n=gl(e,i);else{n=i;var o=mt;mt|=2;var s=uf();(Ln!==e||Wn!==n)&&(Xr=null,mo=xn()+500,Mi(e,n));do try{Hh();break}catch(d){ff(e,d)}while(!0);Td(),fl.current=s,mt=o,jn!==null?n=0:(Ln=null,Wn=0,n=_n)}if(n!==0){if(n===2&&(o=Ca(e),o!==0&&(i=o,n=qa(e,o))),n===1)throw r=fs,Mi(e,0),pi(e,i),hr(e,xn()),r;if(n===6)pi(e,i);else{if(o=e.current.alternate,!(i&30)&&!Nh(o)&&(n=gl(e,i),n===2&&(s=Ca(e),s!==0&&(i=s,n=qa(e,s))),n===1))throw r=fs,Mi(e,0),pi(e,i),hr(e,xn()),r;switch(e.finishedWork=o,e.finishedLanes=i,n){case 0:case 1:throw Error(ne(345));case 2:Ii(e,cr,Xr);break;case 3:if(pi(e,i),(i&130023424)===i&&(n=Dd+500-xn(),10<n)){if(Qs(e,0)!==0)break;if(o=e.suspendedLanes,(o&i)!==i){nr(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ba(Ii.bind(null,e,cr,Xr),n);break}Ii(e,cr,Xr);break;case 4:if(pi(e,i),(i&4194240)===i)break;for(n=e.eventTimes,o=-1;0<i;){var l=31-Mr(i);s=1<<l,l=n[l],l>o&&(o=l),i&=~s}if(i=o,i=xn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Wh(i/1960))-i,10<i){e.timeoutHandle=Ba(Ii.bind(null,e,cr,Xr),i);break}Ii(e,cr,Xr);break;case 5:Ii(e,cr,Xr);break;default:throw Error(ne(329))}}}return hr(e,xn()),e.callbackNode===r?pf.bind(null,e):null}function qa(e,n){var r=Xo;return e.current.memoizedState.isDehydrated&&(Mi(e,n).flags|=256),e=gl(e,n),e!==2&&(n=cr,cr=r,n!==null&&ed(n)),e}function ed(e){cr===null?cr=e:cr.push.apply(cr,e)}function Nh(e){for(var n=e;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],s=o.getSnapshot;o=o.value;try{if(!Ar(s(),o))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function pi(e,n){for(n&=~Nd,n&=~_l,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var r=31-Mr(n),i=1<<r;e[r]=-1,n&=~i}}function r0(e){if(mt&6)throw Error(ne(327));po();var n=Qs(e,0);if(!(n&1))return hr(e,xn()),null;var r=gl(e,n);if(e.tag!==0&&r===2){var i=Ca(e);i!==0&&(n=i,r=qa(e,i))}if(r===1)throw r=fs,Mi(e,0),pi(e,n),hr(e,xn()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Ii(e,cr,Xr),hr(e,xn()),null}function Hd(e,n){var r=mt;mt|=1;try{return e(n)}finally{mt=r,mt===0&&(mo=xn()+500,wl&&Ti())}}function Ni(e){ui!==null&&ui.tag===0&&!(mt&6)&&po();var n=mt;mt|=1;var r=_r.transition,i=Et;try{if(_r.transition=null,Et=1,e)return e()}finally{Et=i,_r.transition=r,mt=n,!(mt&6)&&Ti()}}function $d(){yr=io.current,Jt(io)}function Mi(e,n){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,xh(r)),jn!==null)for(r=jn.return;r!==null;){var i=r;switch(wd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nl();break;case 3:xo(),Jt(fr),Jt(Xn),Ld();break;case 5:Ed(i);break;case 4:xo();break;case 13:Jt(sn);break;case 19:Jt(sn);break;case 10:_d(i.type._context);break;case 22:case 23:$d()}r=r.return}if(Ln=e,jn=e=ji(e.current,null),Wn=yr=n,_n=0,fs=null,Nd=_l=Wi=0,cr=Xo=null,Li!==null){for(n=0;n<Li.length;n++)if(r=Li[n],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,s=r.pending;if(s!==null){var l=s.next;s.next=o,i.next=l}r.pending=i}Li=null}return e}function ff(e,n){do{var r=jn;try{if(Td(),Ds.current=pl,cl){for(var i=ln.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}cl=!1}if(Fi=0,En=Tn=ln=null,Go=!1,ds=0,Wd.current=null,r===null||r.return===null){_n=1,fs=n,jn=null;break}e:{var s=e,l=r.return,d=r,c=n;if(n=Wn,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var p=c,h=d,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var u=h.alternate;u?(h.updateQueue=u.updateQueue,h.memoizedState=u.memoizedState,h.lanes=u.lanes):(h.updateQueue=null,h.memoizedState=null)}var z=Vc(l);if(z!==null){z.flags&=-257,Uc(z,l,d,s,n),z.mode&1&&$c(s,p,n),n=z,c=p;var S=n.updateQueue;if(S===null){var k=new Set;k.add(c),n.updateQueue=k}else S.add(c);break e}else{if(!(n&1)){$c(s,p,n),Vd();break e}c=Error(ne(426))}}else if(tn&&d.mode&1){var y=Vc(l);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Uc(y,l,d,s,n),kd(yo(c,d));break e}}s=c=yo(c,d),_n!==4&&(_n=2),Xo===null?Xo=[s]:Xo.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,n&=-n,s.lanes|=n;var a=Xp(s,c,n);Pc(s,a);break e;case 1:d=c;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bi===null||!bi.has(v)))){s.flags|=65536,n&=-n,s.lanes|=n;var f=Kp(s,d,n);Pc(s,f);break e}}s=s.return}while(s!==null)}gf(r)}catch(T){n=T,jn===r&&r!==null&&(jn=r=r.return);continue}break}while(!0)}function uf(){var e=fl.current;return fl.current=pl,e===null?pl:e}function Vd(){(_n===0||_n===3||_n===2)&&(_n=4),Ln===null||!(Wi&268435455)&&!(_l&268435455)||pi(Ln,Wn)}function gl(e,n){var r=mt;mt|=2;var i=uf();(Ln!==e||Wn!==n)&&(Xr=null,Mi(e,n));do try{Dh();break}catch(o){ff(e,o)}while(!0);if(Td(),mt=r,fl.current=i,jn!==null)throw Error(ne(261));return Ln=null,Wn=0,_n}function Dh(){for(;jn!==null;)hf(jn)}function Hh(){for(;jn!==null&&!uu();)hf(jn)}function hf(e){var n=yf(e.alternate,e,yr);e.memoizedProps=e.pendingProps,n===null?gf(e):jn=n,Wd.current=null}function gf(e){var n=e;do{var r=n.alternate;if(e=n.return,n.flags&32768){if(r=Oh(r,n),r!==null){r.flags&=32767,jn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_n=6,jn=null;return}}else if(r=Mh(r,n,yr),r!==null){jn=r;return}if(n=n.sibling,n!==null){jn=n;return}jn=n=e}while(n!==null);_n===0&&(_n=5)}function Ii(e,n,r){var i=Et,o=_r.transition;try{_r.transition=null,Et=1,$h(e,n,r,i)}finally{_r.transition=o,Et=i}return null}function $h(e,n,r,i){do po();while(ui!==null);if(mt&6)throw Error(ne(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(wu(e,s),e===Ln&&(jn=Ln=null,Wn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Bs||(Bs=!0,mf(Js,function(){return po(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=_r.transition,_r.transition=null;var l=Et;Et=1;var d=mt;mt|=4,Wd.current=null,Ph(e,r),df(r,e),dh(Ea),Zs=!!Ia,Ea=Ia=null,e.current=r,Fh(r),hu(),mt=d,Et=l,_r.transition=s}else e.current=r;if(Bs&&(Bs=!1,ui=e,hl=o),s=e.pendingLanes,s===0&&(bi=null),yu(r.stateNode),hr(e,xn()),n!==null)for(i=e.onRecoverableError,r=0;r<n.length;r++)o=n[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(ul)throw ul=!1,e=Qa,Qa=null,e;return hl&1&&e.tag!==0&&po(),s=e.pendingLanes,s&1?e===Za?Ko++:(Ko=0,Za=e):Ko=0,Ti(),null}function po(){if(ui!==null){var e=X0(hl),n=_r.transition,r=Et;try{if(_r.transition=null,Et=16>e?16:e,ui===null)var i=!1;else{if(e=ui,ui=null,hl=0,mt&6)throw Error(ne(331));var o=mt;for(mt|=4,Te=e.current;Te!==null;){var s=Te,l=s.child;if(Te.flags&16){var d=s.deletions;if(d!==null){for(var c=0;c<d.length;c++){var p=d[c];for(Te=p;Te!==null;){var h=Te;switch(h.tag){case 0:case 11:case 15:Yo(8,h,s)}var m=h.child;if(m!==null)m.return=h,Te=m;else for(;Te!==null;){h=Te;var u=h.sibling,z=h.return;if(sf(h),h===p){Te=null;break}if(u!==null){u.return=z,Te=u;break}Te=z}}}var S=s.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var y=k.sibling;k.sibling=null,k=y}while(k!==null)}}Te=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,Te=l;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yo(9,s,s.return)}var a=s.sibling;if(a!==null){a.return=s.return,Te=a;break e}Te=s.return}}var g=e.current;for(Te=g;Te!==null;){l=Te;var v=l.child;if(l.subtreeFlags&2064&&v!==null)v.return=l,Te=v;else e:for(l=g;Te!==null;){if(d=Te,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Tl(9,d)}}catch(T){fn(d,d.return,T)}if(d===l){Te=null;break e}var f=d.sibling;if(f!==null){f.return=d.return,Te=f;break e}Te=d.return}}if(mt=o,Ti(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(ml,e)}catch{}i=!0}return i}finally{Et=r,_r.transition=n}}return!1}function i0(e,n,r){n=yo(r,n),n=Xp(e,n,1),e=mi(e,n,1),n=nr(),e!==null&&(hs(e,1,n),hr(e,n))}function fn(e,n,r){if(e.tag===3)i0(e,e,r);else for(;n!==null;){if(n.tag===3){i0(n,e,r);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bi===null||!bi.has(i))){e=yo(r,e),e=Kp(n,e,1),n=mi(n,e,1),e=nr(),n!==null&&(hs(n,1,e),hr(n,e));break}}n=n.return}}function Vh(e,n,r){var i=e.pingCache;i!==null&&i.delete(n),n=nr(),e.pingedLanes|=e.suspendedLanes&r,Ln===e&&(Wn&r)===r&&(_n===4||_n===3&&(Wn&130023424)===Wn&&500>xn()-Dd?Mi(e,0):Nd|=r),hr(e,n)}function xf(e,n){n===0&&(e.mode&1?(n=ws,ws<<=1,!(ws&130023424)&&(ws=4194304)):n=1);var r=nr();e=ti(e,n),e!==null&&(hs(e,n,r),hr(e,r))}function Uh(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),xf(e,r)}function Gh(e,n){var r=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ne(314))}i!==null&&i.delete(n),xf(e,r)}var yf;yf=function(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps||fr.current)pr=!0;else{if(!(e.lanes&r)&&!(n.flags&128))return pr=!1,Bh(e,n,r);pr=!!(e.flags&131072)}else pr=!1,tn&&n.flags&1048576&&vp(n,ol,n.index);switch(n.lanes=0,n.tag){case 2:var i=n.type;$s(e,n),e=n.pendingProps;var o=uo(n,Xn.current);co(n,r),o=Md(null,n,i,e,o,r);var s=Od();return n.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,ur(i)?(s=!0,rl(n)):s=!1,n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Rd(n),o.updater=Cl,n.stateNode=o,o._reactInternals=n,Na(n,i,e,r),n=$a(null,n,i,!0,s,r)):(n.tag=0,tn&&s&&Sd(n),tr(null,n,o,r),n=n.child),n;case 16:i=n.elementType;e:{switch($s(e,n),e=n.pendingProps,o=i._init,i=o(i._payload),n.type=i,o=n.tag=Xh(i),e=Er(i,e),o){case 0:n=Ha(null,n,i,e,r);break e;case 1:n=Xc(null,n,i,e,r);break e;case 11:n=Gc(null,n,i,e,r);break e;case 14:n=Yc(null,n,i,Er(i.type,e),r);break e}throw Error(ne(306,i,""))}return n;case 0:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Er(i,o),Ha(e,n,i,o,r);case 1:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Er(i,o),Xc(e,n,i,o,r);case 3:e:{if(qp(n),e===null)throw Error(ne(387));i=n.pendingProps,s=n.memoizedState,o=s.element,Tp(e,n),al(n,i,null,r);var l=n.memoizedState;if(i=l.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=s,n.memoizedState=s,n.flags&256){o=yo(Error(ne(423)),n),n=Kc(e,n,i,r,o);break e}else if(i!==o){o=yo(Error(ne(424)),n),n=Kc(e,n,i,r,o);break e}else for(mr=yi(n.stateNode.containerInfo.firstChild),br=n,tn=!0,Br=null,r=kp(n,null,i,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ho(),i===o){n=ni(e,n,r);break e}tr(e,n,i,r)}n=n.child}return n;case 5:return _p(n),e===null&&Pa(n),i=n.type,o=n.pendingProps,s=e!==null?e.memoizedProps:null,l=o.children,La(i,o)?l=null:s!==null&&La(i,s)&&(n.flags|=32),Zp(e,n),tr(e,n,l,r),n.child;case 6:return e===null&&Pa(n),null;case 13:return ef(e,n,r);case 4:return Id(n,n.stateNode.containerInfo),i=n.pendingProps,e===null?n.child=go(n,null,i,r):tr(e,n,i,r),n.child;case 11:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Er(i,o),Gc(e,n,i,o,r);case 7:return tr(e,n,n.pendingProps,r),n.child;case 8:return tr(e,n,n.pendingProps.children,r),n.child;case 12:return tr(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(i=n.type._context,o=n.pendingProps,s=n.memoizedProps,l=o.value,$t(sl,i._currentValue),i._currentValue=l,s!==null)if(Ar(s.value,l)){if(s.children===o.children&&!fr.current){n=ni(e,n,r);break e}}else for(s=n.child,s!==null&&(s.return=n);s!==null;){var d=s.dependencies;if(d!==null){l=s.child;for(var c=d.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Zr(-1,r&-r),c.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var h=p.pending;h===null?c.next=c:(c.next=h.next,h.next=c),p.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Fa(s.return,r,n),d.lanes|=r;break}c=c.next}}else if(s.tag===10)l=s.type===n.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(ne(341));l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Fa(l,r,n),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===n){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}tr(e,n,o.children,r),n=n.child}return n;case 9:return o=n.type,i=n.pendingProps.children,co(n,r),o=zr(o),i=i(o),n.flags|=1,tr(e,n,i,r),n.child;case 14:return i=n.type,o=Er(i,n.pendingProps),o=Er(i.type,o),Yc(e,n,i,o,r);case 15:return Jp(e,n,n.type,n.pendingProps,r);case 17:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Er(i,o),$s(e,n),n.tag=1,ur(i)?(e=!0,rl(n)):e=!1,co(n,r),Yp(n,i,o),Na(n,i,o,r),$a(null,n,i,!0,e,r);case 19:return tf(e,n,r);case 22:return Qp(e,n,r)}throw Error(ne(156,n.tag))};function mf(e,n){return V0(e,n)}function Yh(e,n,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(e,n,r,i){return new Yh(e,n,r,i)}function Ud(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xh(e){if(typeof e=="function")return Ud(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cd)return 11;if(e===pd)return 14}return 2}function ji(e,n){var r=e.alternate;return r===null?(r=Tr(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Gs(e,n,r,i,o,s){var l=2;if(i=e,typeof e=="function")Ud(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Xi:return Oi(r.children,o,s,n);case dd:l=8,o|=8;break;case ca:return e=Tr(12,r,n,o|2),e.elementType=ca,e.lanes=s,e;case pa:return e=Tr(13,r,n,o),e.elementType=pa,e.lanes=s,e;case fa:return e=Tr(19,r,n,o),e.elementType=fa,e.lanes=s,e;case _0:return zl(r,o,s,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C0:l=10;break e;case T0:l=9;break e;case cd:l=11;break e;case pd:l=14;break e;case ai:l=16,i=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return n=Tr(l,r,n,o),n.elementType=e,n.type=i,n.lanes=s,n}function Oi(e,n,r,i){return e=Tr(7,e,i,n),e.lanes=r,e}function zl(e,n,r,i){return e=Tr(22,e,i,n),e.elementType=_0,e.lanes=r,e.stateNode={isHidden:!1},e}function ia(e,n,r){return e=Tr(6,e,null,n),e.lanes=r,e}function oa(e,n,r){return n=Tr(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Kh(e,n,r,i,o){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wl(0),this.expirationTimes=Wl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wl(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Gd(e,n,r,i,o,s,l,d,c){return e=new Kh(e,n,r,d,c),n===1?(n=1,s===!0&&(n|=8)):n=0,s=Tr(3,null,null,n),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rd(s),e}function Jh(e,n,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:i==null?null:""+i,children:e,containerInfo:n,implementation:r}}function bf(e){if(!e)return wi;e=e._reactInternals;e:{if(Hi(e)!==e||e.tag!==1)throw Error(ne(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(ur(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(ur(r))return mp(e,r,n)}return n}function vf(e,n,r,i,o,s,l,d,c){return e=Gd(r,i,!0,e,o,s,l,d,c),e.context=bf(null),r=e.current,i=nr(),o=vi(r),s=Zr(i,o),s.callback=n??null,mi(r,s,o),e.current.lanes=o,hs(e,o,i),hr(e,i),e}function Rl(e,n,r,i){var o=n.current,s=nr(),l=vi(o);return r=bf(r),n.context===null?n.context=r:n.pendingContext=r,n=Zr(s,l),n.payload={element:e},i=i===void 0?null:i,i!==null&&(n.callback=i),e=mi(o,n,l),e!==null&&(Or(e,o,l,s),Ns(e,o,l)),l}function xl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function o0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Yd(e,n){o0(e,n),(e=e.alternate)&&o0(e,n)}function Qh(){return null}var jf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xd(e){this._internalRoot=e}Il.prototype.render=Xd.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(ne(409));Rl(e,n,null,null)};Il.prototype.unmount=Xd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ni(function(){Rl(null,e,null,null)}),n[ei]=null}};function Il(e){this._internalRoot=e}Il.prototype.unstable_scheduleHydration=function(e){if(e){var n=Q0();e={blockedOn:null,target:e,priority:n};for(var r=0;r<ci.length&&n!==0&&n<ci[r].priority;r++);ci.splice(r,0,e),r===0&&q0(e)}};function Kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function El(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function s0(){}function Zh(e,n,r,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var p=xl(l);s.call(p)}}var l=vf(n,i,e,0,null,!1,!1,"",s0);return e._reactRootContainer=l,e[ei]=l.current,is(e.nodeType===8?e.parentNode:e),Ni(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof i=="function"){var d=i;i=function(){var p=xl(c);d.call(p)}}var c=Gd(e,0,!1,null,null,!1,!1,"",s0);return e._reactRootContainer=c,e[ei]=c.current,is(e.nodeType===8?e.parentNode:e),Ni(function(){Rl(n,c,r,i)}),c}function Ll(e,n,r,i,o){var s=r._reactRootContainer;if(s){var l=s;if(typeof o=="function"){var d=o;o=function(){var c=xl(l);d.call(c)}}Rl(n,l,e,o)}else l=Zh(r,n,e,o,i);return xl(l)}K0=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var r=Wo(n.pendingLanes);r!==0&&(hd(n,r|1),hr(n,xn()),!(mt&6)&&(mo=xn()+500,Ti()))}break;case 13:Ni(function(){var i=ti(e,1);if(i!==null){var o=nr();Or(i,e,1,o)}}),Yd(e,1)}};gd=function(e){if(e.tag===13){var n=ti(e,134217728);if(n!==null){var r=nr();Or(n,e,134217728,r)}Yd(e,134217728)}};J0=function(e){if(e.tag===13){var n=vi(e),r=ti(e,n);if(r!==null){var i=nr();Or(r,e,n,i)}Yd(e,n)}};Q0=function(){return Et};Z0=function(e,n){var r=Et;try{return Et=e,n()}finally{Et=r}};Sa=function(e,n,r){switch(n){case"input":if(ga(e,r),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var i=r[n];if(i!==e&&i.form===e.form){var o=Sl(i);if(!o)throw Error(ne(90));R0(i),ga(i,o)}}}break;case"textarea":E0(e,r);break;case"select":n=r.value,n!=null&&oo(e,!!r.multiple,n,!1)}};F0=Hd;W0=Ni;var qh={usingClientEntryPoint:!1,Events:[xs,Zi,Sl,A0,P0,Hd]},Oo={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eg={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=H0(e),e===null?null:e.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Qh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{ml=Ms.inject(eg),Hr=Ms}catch{}}jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qh;jr.createPortal=function(e,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kd(n))throw Error(ne(200));return Jh(e,n,null,r)};jr.createRoot=function(e,n){if(!Kd(e))throw Error(ne(299));var r=!1,i="",o=jf;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),n=Gd(e,1,!1,null,null,r,!1,i,o),e[ei]=n.current,is(e.nodeType===8?e.parentNode:e),new Xd(n)};jr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=H0(n),e=e===null?null:e.stateNode,e};jr.flushSync=function(e){return Ni(e)};jr.hydrate=function(e,n,r){if(!El(n))throw Error(ne(200));return Ll(null,e,n,!0,r)};jr.hydrateRoot=function(e,n,r){if(!Kd(e))throw Error(ne(405));var i=r!=null&&r.hydratedSources||null,o=!1,s="",l=jf;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),n=vf(n,null,e,1,r??null,o,!1,s,l),e[ei]=n.current,is(e),i)for(e=0;e<i.length;e++)r=i[e],o=r._getVersion,o=o(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,o]:n.mutableSourceEagerHydrationData.push(r,o);return new Il(n)};jr.render=function(e,n,r){if(!El(n))throw Error(ne(200));return Ll(null,e,n,!1,r)};jr.unmountComponentAtNode=function(e){if(!El(e))throw Error(ne(40));return e._reactRootContainer?(Ni(function(){Ll(null,null,e,!1,function(){e._reactRootContainer=null,e[ei]=null})}),!0):!1};jr.unstable_batchedUpdates=Hd;jr.unstable_renderSubtreeIntoContainer=function(e,n,r,i){if(!El(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return Ll(e,n,r,!1,i)};jr.version="18.3.1-next-f1338f8080-20240426";function Sf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sf)}catch(e){console.error(e)}}Sf(),j0.exports=jr;var tg=j0.exports,l0=tg;aa.createRoot=l0.createRoot,aa.hydrateRoot=l0.hydrateRoot;var a0={},ng="@vercel/speed-insights",rg="1.3.1",ig=()=>{window.si||(window.si=function(...n){(window.siq=window.siq||[]).push(n)})};function og(){return typeof window<"u"}function sg(){try{const e="production"}catch{}return"production"}function wf(){return sg()==="development"}function lg(e){return e.scriptSrc?e.scriptSrc:wf()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function ag(e={}){var n;if(!og()||e.route===null)return null;ig();const r=lg(e);if(document.head.querySelector(`script[src*="${r}"]`))return null;e.beforeSend&&((n=window.si)==null||n.call(window,"beforeSend",e.beforeSend));const i=document.createElement("script");return i.src=r,i.defer=!0,i.dataset.sdkn=ng+(e.framework?`/${e.framework}`:""),i.dataset.sdkv=rg,e.sampleRate&&(i.dataset.sampleRate=e.sampleRate.toString()),e.route&&(i.dataset.route=e.route),e.endpoint?i.dataset.endpoint=e.endpoint:e.basePath&&(i.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(i.dataset.dsn=e.dsn),wf()&&e.debug===!1&&(i.dataset.debug="false"),i.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${r}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(i),{setRoute:o=>{i.dataset.route=o??void 0}}}function dg(){if(!(typeof process>"u"||typeof a0>"u"))return a0.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function cg(e){A.useEffect(()=>{var r;e.beforeSend&&((r=window.si)==null||r.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]);const n=A.useRef(null);return A.useEffect(()=>{if(n.current)e.route&&n.current(e.route);else{const r=ag({framework:e.framework??"react",basePath:e.basePath??dg(),...e});r&&(n.current=r.setRoute)}},[e.route]),null}const pg=({gexData:e,currentPrice:n})=>{const[r,i]=A.useState("table"),[o,s]=A.useState(10),[l,d]=A.useState(null),[c,p]=A.useState(null),h=(e==null?void 0:e.gex_profile)||[];e!=null&&e.gex_levels;const m=(e==null?void 0:e.gamma_regime)||"UNKNOWN",u=(e==null?void 0:e.total_gex)||0,z=(e==null?void 0:e.zero_gamma)||(e==null?void 0:e.gamma_flip)||0,S=(e==null?void 0:e.max_pain)||0;e!=null&&e.call_wall,e!=null&&e.put_wall,e!=null&&e.hvl;const k=h.filter(w=>Math.abs(w.gex)>.1).sort((w,x)=>x.strike-w.strike).slice(0,o).map(w=>{const x=w.gex<0,R=n?Math.round(w.strike-n):0,M=Math.round(50+Math.abs(w.gex)*10),ie=100-M;return{strike:w.strike,gex:w.gex,type:x?"CALL":"PUT",wallType:Math.abs(w.gex)>.5?"WALL":"LEVEL",role:x?w.strike>n?"POT. RESISTANCE":"POT. RESISTANCE (EX-SUPP)":(w.strike<n,"POT. SUPPORT"),distance:R,holdPct:Math.min(M,85),breakPct:Math.max(ie,15),callPct:x?70+Math.random()*20:10+Math.random()*20,putPct:x?30-Math.random()*20:80+Math.random()*10,mass:Math.abs(w.gex).toFixed(1),effective:Math.abs(w.gex*.9).toFixed(1),integrity:Math.round(85+Math.random()*15),fieldHigh:w.strike+8,fieldLow:w.strike-8,influence:Math.round(15+Math.random()*10)}}),y=n?n*1.015:0,a=n?n*.985:0,g=n?n*1.012:0,v=n?n*.988:0,f={cyan:"#22d3ee",green:"#22c55e",red:"#ef4444",amber:"#f59e0b",purple:"#a855f7",magenta:"#ec4899",border:"rgba(34, 211, 238, 0.2)",text:"#f4f4f5",textMuted:"#71717a"},T=w=>{const x=k.findIndex(ie=>ie.strike===w.strike),R=k[x+1],M=k[x-1];return{nextLevel:R,prevLevel:M}},j=({level:w,onClose:x})=>{if(!w)return null;const{nextLevel:R,prevLevel:M}=T(w),ie=z?Math.round(w.strike-z):0,ae=w.gex<0,Se=ae?w.strike>n?"Continuation Short":"Reversal Long":w.strike<n?"Continuation Long":"Reversal Short";return t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:x,children:t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20, 22, 35, 0.98) 0%, rgba(15, 17, 28, 0.99) 100%)",borderRadius:16,width:560,maxWidth:"90vw",maxHeight:"85vh",overflow:"auto",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},onClick:Ce=>Ce.stopPropagation(),children:[t.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[t.jsx("span",{style:{fontSize:32,fontWeight:700,color:w.type==="PUT"?f.cyan:f.magenta,fontFamily:"'JetBrains Mono', monospace"},children:w.strike}),t.jsxs("span",{style:{fontSize:14,fontWeight:600,color:w.type==="PUT"?f.cyan:f.magenta},children:[w.type," ",w.wallType]}),t.jsx("span",{style:{padding:"4px 10px",background:w.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${w.role.includes("SUPPORT")?f.green:f.red}`,borderRadius:4,fontSize:10,fontWeight:600,color:w.role.includes("SUPPORT")?f.green:f.red},children:w.role.includes("SUPPORT")?"POTENTIAL SUPPORT":"POTENTIAL RESISTANCE"})]}),t.jsxs("div",{style:{fontSize:11,color:f.textMuted},children:[t.jsx("span",{style:{color:ae?f.red:f.green},children:ae?"NEGATIVE GAMMA":"POSITIVE GAMMA"}),t.jsx("span",{style:{margin:"0 8px"},children:"|"}),"ZG Dist: ",ie>0?"+":"",ie]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"DISTANCE FROM SPOT"}),t.jsxs("div",{style:{fontSize:28,fontWeight:600,color:w.distance>0?f.green:f.red},children:[w.distance>0?"+":"",w.distance,t.jsx("span",{style:{fontSize:14,color:f.textMuted,marginLeft:4},children:"pts"})]}),t.jsx("button",{onClick:x,style:{position:"absolute",top:16,right:16,background:"transparent",border:"none",color:f.textMuted,fontSize:24,cursor:"pointer",padding:4},children:""})]})]}),t.jsxs("div",{style:{padding:24},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[t.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:4},children:" REGIME EXPECTED REACTION"}),t.jsx("div",{style:{fontSize:24,fontWeight:600,color:Se.includes("Long")?f.cyan:f.magenta,fontFamily:"'JetBrains Mono', monospace"},children:Se})]}),t.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("div",{style:{fontSize:10,color:f.cyan,letterSpacing:"0.1em",textAlign:"center",marginBottom:16},children:"DEALER POSITIONING & GREEKS"}),t.jsxs("div",{style:{marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[t.jsx("span",{style:{fontSize:11,color:f.textMuted},children:"TOT GEX PROFILE"}),t.jsxs("span",{style:{fontSize:13,fontWeight:600,color:w.gex<0?f.magenta:f.cyan},children:[(w.gex*1e3).toFixed(1),"M"]})]}),t.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:t.jsx("div",{style:{width:`${Math.min(Math.abs(w.gex)*100,90)}%`,height:"100%",background:w.gex<0?"linear-gradient(90deg, rgba(236,72,153,0.8), rgba(236,72,153,0.4))":"linear-gradient(90deg, rgba(34,211,238,0.8), rgba(34,211,238,0.4))",borderRadius:4}})})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:16},children:[t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"SPEED"}),t.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.text},children:[(Math.abs(w.gex)*60).toFixed(1),"K"]})]}),t.jsxs("div",{style:{textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"VANNA"}),t.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.cyan},children:[(Math.abs(w.gex)*25).toFixed(1),"M"]})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"CHARM"}),t.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.magenta},children:[(w.gex*-500).toFixed(1),"M"]})]})]})]}),t.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",textAlign:"center",marginBottom:12},children:"HOLD / BREAK PROBABILITIES"}),t.jsxs("div",{style:{display:"flex",height:28,borderRadius:6,overflow:"hidden",fontSize:11,fontWeight:600},children:[t.jsxs("div",{style:{width:`${w.holdPct}%`,background:f.green,display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:["Hold ",w.holdPct,"%"]}),t.jsxs("div",{style:{width:`${w.breakPct}%`,background:f.red,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:["Break ",w.breakPct,"%"]})]}),t.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,borderLeft:`3px solid ${f.amber}`},children:[t.jsxs("div",{style:{fontSize:12,color:f.text,marginBottom:8},children:[t.jsx("strong",{children:"High Sensitivity."})," Dealer hedging activity increases rapidly here, creating potential for sharp reactions or rejection."]}),t.jsx("span",{style:{padding:"4px 8px",background:"rgba(245,158,11,0.2)",border:`1px solid ${f.amber}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.amber},children:"REACTIVE ZONE"})]})]}),t.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:16},children:"STRUCTURAL CONTEXT"}),R&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[t.jsx("span",{style:{padding:"4px 8px",background:"rgba(239,68,68,0.2)",border:`1px solid ${f.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.red},children:"IF BREAK"}),t.jsxs("span",{style:{fontSize:12,color:f.text},children:["Next: ",R.type," ",R.wallType," (@ ",R.strike,")"]})]}),M&&t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.green},children:"IF HOLD"}),t.jsxs("span",{style:{fontSize:12,color:f.text},children:["Target: ",M.type," ",M.wallType," (@ ",M.strike,")"]})]})]})]})]})})},b=({label:w,value:x,color:R=f.textMuted})=>t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 16px",background:"rgba(40, 40, 50, 0.4)",borderRadius:6,marginBottom:8},children:t.jsxs("span",{style:{fontSize:12,color:R,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.1em"},children:[" ",w,": ",x," "]})}),O=()=>t.jsxs("div",{style:{background:"linear-gradient(90deg, rgba(34,211,238,0.1) 0%, rgba(34,211,238,0.2) 50%, rgba(34,211,238,0.1) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",border:"1px solid rgba(34,211,238,0.3)"},children:[t.jsxs("span",{style:{fontSize:14,fontWeight:600,color:f.cyan,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" ZERO GAMMA FLIP: ",z.toFixed(2)," "]}),t.jsx("div",{style:{marginTop:4},children:t.jsxs("span",{style:{fontSize:10,color:f.textMuted},children:["Above: Dealers dampen volatility (",t.jsx("span",{style:{color:f.cyan},children:"Reversal Playbook"}),")"]})}),t.jsx("div",{style:{marginTop:2},children:t.jsxs("span",{style:{fontSize:10,color:f.textMuted},children:["Below: Dealers amplify volatility (",t.jsx("span",{style:{color:f.amber},children:"Trend/Breakout Playbook"}),")"]})})]}),_=()=>t.jsx("div",{style:{background:"linear-gradient(90deg, rgba(234,179,8,0.2) 0%, rgba(234,179,8,0.4) 50%, rgba(234,179,8,0.2) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",boxShadow:"0 0 20px rgba(234,179,8,0.3)"},children:t.jsxs("span",{style:{fontSize:16,fontWeight:700,color:"#eab308",fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" CURRENT SPOT: ",(n==null?void 0:n.toFixed(2))||""," "]})}),D=({pts:w})=>t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"8px 16px",background:"rgba(0,0,0,0.4)",borderRadius:6,margin:"8px 0"},children:[t.jsx("span",{style:{fontSize:14,color:f.textMuted,letterSpacing:"0.15em"},children:"LOW DENSITY"}),t.jsx("span",{style:{width:60,height:1,background:f.textMuted}}),t.jsxs("span",{style:{fontSize:12,color:f.textMuted},children:[w," PTS"]}),t.jsx("span",{style:{fontSize:12,color:f.amber,fontWeight:600},children:"FAST LANE"})]}),W=({holdPct:w,breakPct:x,size:R="normal"})=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsxs("span",{style:{fontSize:R==="small"?9:11,color:f.green},children:["H:",w,"%"]}),t.jsx("div",{style:{flex:1,height:R==="small"?4:6,background:f.red,borderRadius:3,overflow:"hidden",display:"flex"},children:t.jsx("div",{style:{width:`${w}%`,height:"100%",background:f.green}})}),t.jsxs("span",{style:{fontSize:R==="small"?9:11,color:f.red},children:["B:",x,"%"]})]}),G=({value:w,maxVal:x=1e3})=>{const R=Math.min(Math.abs(w)/x*100,100),M=w>0;return t.jsx("div",{style:{width:"100%",height:6,background:"rgba(255,255,255,0.1)",borderRadius:3,overflow:"hidden"},children:t.jsx("div",{style:{width:`${R}%`,height:"100%",background:M?"linear-gradient(90deg, #22c55e, #4ade80)":"linear-gradient(90deg, #22d3ee, #67e8f9)",borderRadius:3}})})},_e=()=>t.jsxs("div",{style:{overflowX:"auto"},children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:8},children:["LEVEL","TOT. GEX PROFILE","ROLE","CONFLUENCES","WARNING","HOLD / BREAK PROB."].map(w=>t.jsx("span",{style:{fontSize:10,color:f.textMuted,fontWeight:600,letterSpacing:"0.05em"},children:w},w))}),t.jsx(b,{label:"EM HIGH",value:y.toFixed(2)}),t.jsx(b,{label:"VOL BAND HIGH",value:g.toFixed(2)}),k.filter(w=>w.strike>n).map((w,x)=>{const R=l===`above-${x}`;return t.jsxs("div",{onMouseEnter:()=>d(`above-${x}`),onMouseLeave:()=>d(null),onClick:()=>p(w),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:R?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${w.type==="CALL"?f.green:f.magenta}`,transform:R?"translateX(4px)":"none",boxShadow:R?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[R&&t.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:f.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:18,fontWeight:700,color:w.type==="CALL"?f.green:f.magenta},children:w.strike}),t.jsxs("div",{style:{fontSize:10,color:w.type==="CALL"?f.green:f.magenta},children:[w.type," WALL"]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:f.cyan,marginBottom:4},children:"DIRECTIONAL"}),t.jsxs("div",{style:{fontSize:12,color:f.text,marginBottom:4},children:[(w.gex*1e3).toFixed(1),"M"]}),t.jsx(G,{value:w.gex*100})]}),t.jsx("div",{children:t.jsx("span",{style:{padding:"4px 8px",background:w.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${w.role.includes("SUPPORT")?f.green:f.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:w.role.includes("SUPPORT")?f.green:f.red},children:w.role})}),t.jsx("div",{style:{fontSize:10,color:f.textMuted},children:""}),t.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${f.amber}40`,borderRadius:4,color:f.amber,width:"fit-content"},children:"HIGH VOL"}),t.jsx(W,{holdPct:w.holdPct,breakPct:w.breakPct})]},x)}),t.jsx(O,{}),t.jsx(b,{label:"VOL BAND LOW",value:v.toFixed(2)}),t.jsx(b,{label:"MAX PAIN",value:S.toFixed(2)}),k.filter(w=>w.strike<=n).slice(0,3).map((w,x)=>{const R=l===`below-${x}`;return t.jsxs("div",{onMouseEnter:()=>d(`below-${x}`),onMouseLeave:()=>d(null),onClick:()=>p(w),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:R?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${f.cyan}`,transform:R?"translateX(4px)":"none",boxShadow:R?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[R&&t.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:f.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:18,fontWeight:700,color:f.cyan},children:w.strike}),t.jsx("div",{style:{fontSize:10,color:f.cyan},children:"PUT WALL"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:f.cyan,marginBottom:4},children:"DIRECTIONAL"}),t.jsxs("div",{style:{fontSize:12,color:f.text,marginBottom:4},children:[(w.gex*1e3).toFixed(1),"M"]}),t.jsx(G,{value:w.gex*100})]}),t.jsx("div",{children:t.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.green},children:"POT. SUPPORT"})}),t.jsx("div",{style:{fontSize:10,color:f.textMuted},children:""}),t.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${f.amber}40`,borderRadius:4,color:f.amber,width:"fit-content"},children:"HIGH VOL"}),t.jsx(W,{holdPct:w.holdPct,breakPct:w.breakPct})]},x)}),t.jsx(_,{}),t.jsx(b,{label:"EM LOW",value:a.toFixed(2)})]}),Fe=()=>t.jsxs("div",{children:[t.jsx(b,{label:"EM HIGH",value:y.toFixed(2)}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:k.filter(w=>w.strike>n).slice(0,3).map((w,x)=>t.jsxs("div",{onClick:()=>p(w),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:24,fontWeight:700,color:w.type==="CALL"?f.green:f.magenta},children:w.strike}),t.jsxs("div",{style:{fontSize:10,color:f.cyan},children:[w.type," WALL"]})]}),t.jsx("span",{style:{padding:"4px 8px",background:w.role.includes("RESISTANCE")?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",border:`1px solid ${w.role.includes("RESISTANCE")?f.red:f.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:w.role.includes("RESISTANCE")?f.red:f.green},children:w.role})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontSize:10,color:f.cyan},children:"DIRECTIONAL"}),t.jsxs("span",{style:{fontSize:12,fontWeight:600,color:f.text},children:[w.gex.toFixed(1),"M"]})]}),t.jsx(G,{value:w.gex*100})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),t.jsx(W,{holdPct:w.holdPct,breakPct:w.breakPct,size:"small"})]}),t.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:8},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[t.jsx("span",{style:{color:f.cyan},children:"BREAK"}),t.jsx("span",{style:{color:f.textMuted},children:"Open Space"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginTop:4},children:[t.jsx("span",{style:{color:f.green},children:"HOLD"}),t.jsx("span",{style:{color:f.textMuted},children:"Hold"})]})]})]},x))}),t.jsx(O,{}),t.jsx(_,{}),t.jsx(D,{pts:42}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:k.filter(w=>w.strike<=n).slice(0,3).map((w,x)=>t.jsxs("div",{onClick:()=>p(w),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:24,fontWeight:700,color:f.cyan},children:w.strike}),t.jsx("div",{style:{fontSize:10,color:f.cyan},children:"PUT WALL"})]}),t.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:f.green},children:"POT. SUPPORT"})]}),t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{fontSize:10,color:f.cyan},children:"DIRECTIONAL"}),t.jsxs("span",{style:{fontSize:12,fontWeight:600,color:f.text},children:[w.gex.toFixed(1),"M"]})]}),t.jsx(G,{value:w.gex*100})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),t.jsx(W,{holdPct:w.holdPct,breakPct:w.breakPct,size:"small"})]})]},x))})]}),I=()=>t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,padding:"12px 16px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:f.textMuted}}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:f.textMuted},children:"FIELD"}),t.jsx("div",{style:{fontSize:12,color:f.text,fontWeight:600},children:"NEUTRAL"})]})]}),t.jsx("span",{style:{padding:"6px 16px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:12,color:f.text},children:"WAIT"}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:10,color:f.textMuted},children:"MID"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:40,height:4,background:f.green,borderRadius:2}}),t.jsx("div",{style:{width:20,height:4,background:f.red,borderRadius:2}}),t.jsx("span",{style:{fontSize:11,color:f.text},children:"67%"})]})]})]}),t.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:11,color:f.purple},children:""}),t.jsx("span",{style:{fontSize:10,color:f.text},children:"QUANTUM FIELD"}),t.jsx("span",{style:{padding:"2px 6px",background:f.cyan,borderRadius:4,fontSize:8,color:"#000",fontWeight:600},children:"BETA"})]}),["EXPANDED","NAV","BOUNDS"].map(w=>t.jsx("span",{style:{padding:"4px 12px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:10,color:f.text},children:w},w)),t.jsxs("div",{style:{marginLeft:"auto",fontSize:11,color:f.textMuted},children:["LEVELS: ",o," | SPOT: ",t.jsx("span",{style:{color:f.amber},children:n==null?void 0:n.toFixed(2)})]})]}),k.slice(0,o).map((w,x)=>{const R=w.strike>n,M=Math.abs(w.strike-n)<10;return t.jsxs("div",{children:[M&&R&&t.jsx(_,{}),t.jsxs("div",{onClick:()=>p(w),style:{background:`linear-gradient(90deg, rgba(139,92,246,${.1+Math.abs(w.gex)*.05}) 0%, rgba(139,92,246,${.2+Math.abs(w.gex)*.1}) 50%, rgba(139,92,246,${.1+Math.abs(w.gex)*.05}) 100%)`,padding:"20px 24px",marginBottom:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[t.jsx("div",{style:{width:4,height:30,background:w.type==="CALL"?f.green:f.cyan,borderRadius:2}}),t.jsx("span",{style:{fontSize:32,fontWeight:700,color:f.cyan,fontFamily:"'JetBrains Mono', monospace"},children:w.strike})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flex:1,justifyContent:"center"},children:[t.jsxs("span",{style:{fontSize:11,color:w.type==="CALL"?f.green:f.magenta},children:[w.type," | WALL"]}),t.jsxs("span",{style:{padding:"4px 10px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.green},children:["POT. ","SUPPORT"]}),t.jsxs("span",{style:{padding:"4px 10px",background:"rgba(255,255,255,0.1)",borderRadius:4,fontSize:9,color:f.textMuted},children:[Math.abs(w.distance),"pt ",w.distance>0?"above":"below"," spot"]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"2px 8px",background:"rgba(0,0,0,0.3)",borderRadius:4},children:[t.jsxs("span",{style:{fontSize:9,color:f.green},children:["H:",w.holdPct,"%"]}),t.jsx("div",{style:{width:30,height:4,background:f.green,borderRadius:2}}),t.jsx("div",{style:{width:15,height:4,background:f.red,borderRadius:2}}),t.jsxs("span",{style:{fontSize:9,color:f.red},children:["B:",w.breakPct,"%"]})]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("span",{style:{fontSize:28,fontWeight:600,color:f.text},children:Math.abs(w.gex*100).toFixed(1)}),t.jsx("span",{style:{fontSize:14,color:f.textMuted},children:"M"}),t.jsxs("div",{style:{fontSize:10,color:f.textMuted},children:["18PT | L ",w.fieldHigh.toFixed(1)," - L ",w.fieldLow.toFixed(1)]})]})]}),x===2&&t.jsx(D,{pts:42})]},x)})]});Math.max(...h.map(w=>Math.abs(w.gex||0)),.01);const[ze,tt]=A.useState(null),[se,me]=A.useState({x:0,y:0});return t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(11, 17, 32, 0.98) 0%, rgba(8, 12, 24, 0.99) 100%)",borderRadius:16,border:`1px solid ${f.border}`,padding:24,fontFamily:"'Inter', -apple-system, sans-serif",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",position:"relative"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("h3",{style:{margin:0,color:f.text,fontSize:18,fontWeight:600},children:"GEX Profile"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:f.cyan,animation:"pulse 2s infinite"}}),t.jsx("span",{style:{fontSize:10,color:f.cyan,letterSpacing:"0.05em"},children:"LIVE"})]})]}),t.jsx("div",{style:{padding:"6px 12px",borderRadius:6,background:m==="POSITIVE"?"rgba(34,197,94,0.15)":m==="NEGATIVE"?"rgba(239,68,68,0.15)":"rgba(161,161,170,0.15)",border:`1px solid ${m==="POSITIVE"?f.green:m==="NEGATIVE"?f.red:f.textMuted}40`},children:t.jsxs("span",{style:{color:m==="POSITIVE"?f.green:m==="NEGATIVE"?f.red:f.textMuted,fontSize:12,fontWeight:600},children:[m," GEX: ",u>0?"+":"",u.toFixed(3),"B"]})})]}),t.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.95)",borderRadius:12,padding:"16px 0",marginBottom:24,position:"relative",border:"1px solid rgba(255,255,255,0.05)",cursor:ze?"none":"default"},children:[t.jsx("div",{style:{position:"relative",display:"flex"},children:(()=>{const w=z||n||4600,M=[...h].filter(Z=>Math.abs(Z.strike-w)<=300).sort((Z,ee)=>Math.abs(Z.strike-w)-Math.abs(ee.strike-w)).slice(0,40).sort((Z,ee)=>ee.strike-Z.strike),ie=Math.max(...M.map(Z=>Math.abs(Z.gex||0)),.01);n&&M.reduce((Z,ee)=>Math.abs(ee.strike-n)<Math.abs(Z.strike-n)?ee:Z,M[0]),z&&M.reduce((Z,ee)=>Math.abs(ee.strike-z)<Math.abs(Z.strike-z)?ee:Z,M[0]);const ae=M.map(Z=>Z.strike),Se=Math.min(...ae),Ce=Math.max(...ae),U=Math.ceil((Ce+20)/10)*10,ve=Math.floor((Se-20)/10)*10,xe=U-ve,J=900,re=[];for(let Z=U;Z>=ve;Z-=10)re.push(Z);return t.jsxs("div",{style:{display:"flex",width:"100%"},children:[t.jsx("div",{style:{width:55,height:J,position:"relative",borderRight:"1px solid rgba(255,255,255,0.1)",marginRight:8,flexShrink:0},children:re.map((Z,ee)=>{const ue=(U-Z)/xe*J;return t.jsx("div",{style:{position:"absolute",top:ue-6,right:8,fontSize:10,fontFamily:"'JetBrains Mono', monospace",color:"rgba(148,163,184,0.5)"},children:Z},Z)})}),t.jsxs("div",{style:{flex:1,height:J,position:"relative"},children:[re.map(Z=>{const ee=(U-Z)/xe*J;return t.jsx("div",{style:{position:"absolute",top:ee,left:0,right:0,height:1,background:"rgba(255,255,255,0.04)",pointerEvents:"none"}},`grid-${Z}`)}),n&&t.jsx("div",{style:{position:"absolute",top:(U-n)/xe*J,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(132,204,22,0.8) 0%, rgba(132,204,22,0.2) 100%)",zIndex:5},children:t.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(132,204,22,0.2)",border:"1px solid rgba(132,204,22,0.4)",padding:"2px 6px",borderRadius:3,color:"#84cc16",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["SPOT ",n==null?void 0:n.toFixed(2)]})}),z&&Math.abs(z-n)>5&&t.jsx("div",{style:{position:"absolute",top:(U-z)/xe*J,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(34,211,238,0.6) 0%, rgba(34,211,238,0.1) 100%)",zIndex:4},children:t.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(34,211,238,0.15)",border:"1px solid rgba(34,211,238,0.35)",padding:"2px 6px",borderRadius:3,color:"#22d3ee",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["ZG ",z==null?void 0:z.toFixed(0)]})}),M.map((Z,ee)=>{const ue=(Z.gex||0)<0,ye=Math.min(Math.abs(Z.gex||0)/ie*60,60),de=(ze==null?void 0:ze.strike)===Z.strike,L=Math.abs(Z.gex||0),Me=L>=1?`${L.toFixed(1)}B`:`${(L*1e3).toFixed(0)}M`,Ke=L>ie*.25,zt=n?Math.abs(Math.round(Z.strike-n)):0,Dt=Z.call_oi||0,bt=Z.put_oi||0,Y=Dt+bt||1,Q=Math.round(Dt/Y*100),Re=100-Q,Ge=ue?"#22d3ee":"#f472b6",ce=(U-Z.strike)/xe*J;return t.jsxs("div",{onMouseEnter:Be=>{me({x:Be.clientX,y:Be.clientY}),tt({strike:Z.strike,gex:Z.gex,isCall:ue,gexLabel:Me,isWall:Ke,callPct:Q,putPct:Re,callOI:Dt,putOI:bt,distance:n?Math.round(Z.strike-n):0})},onMouseMove:Be=>me({x:Be.clientX,y:Be.clientY}),onMouseLeave:()=>tt(null),style:{position:"absolute",top:ce-12,left:0,right:0,display:"flex",alignItems:"center",height:24,cursor:ze?"none":"pointer",zIndex:de?10:1},children:[t.jsx("div",{style:{width:`${ye}%`,minWidth:ye>3?10:0,height:de?28:22,background:ue?"rgba(34, 211, 238, 0.5)":"rgba(244, 114, 182, 0.5)",backdropFilter:"blur(4px)",borderRadius:"3px 8px 8px 3px",border:ue?"1px solid rgba(34, 211, 238, 0.3)":"1px solid rgba(244, 114, 182, 0.3)",boxShadow:de?ue?"0 0 12px rgba(34,211,238,0.7), 0 0 30px rgba(34,211,238,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 0 12px rgba(244,114,182,0.7), 0 0 30px rgba(244,114,182,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 2px 6px rgba(0,0,0,0.25)",transition:"all 0.15s ease-out",transform:de?"scale(1.02)":"none",flexShrink:0}}),t.jsxs("div",{style:{marginLeft:8,display:"flex",alignItems:"center",gap:4,fontSize:10,fontFamily:"'Inter', sans-serif",whiteSpace:"nowrap"},children:[t.jsx("span",{style:{color:"rgba(148,163,184,0.6)"},children:""}),t.jsx("span",{style:{color:"rgba(255,255,255,0.85)",fontWeight:500},children:Ke?"WALL":"LEVEL"}),t.jsxs("span",{style:{color:Ge,fontWeight:600,background:ue?"rgba(34,211,238,0.12)":"rgba(244,114,182,0.12)",padding:"1px 5px",borderRadius:3},children:["(",ue?"CALL":"PUT",")"]}),t.jsx("span",{style:{color:"#fff",fontWeight:700,marginLeft:2},children:Me}),t.jsxs("span",{style:{color:"rgba(148,163,184,0.5)",fontSize:9},children:["[",zt,"pts]"]}),t.jsxs("span",{style:{color:"rgba(148,163,184,0.4)",fontSize:9},children:["C:",Q,"% P:",Re,"%"]})]})]},ee)})]})]})})()}),t.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:24,marginTop:14,paddingTop:10,paddingLeft:70,borderTop:"1px solid rgba(255,255,255,0.04)",fontSize:9,color:"rgba(148,163,184,0.5)",fontFamily:"'Inter', sans-serif"},children:[t.jsx("span",{children:" MAGNET (attractor)"}),t.jsx("span",{children:" WALL (barrier)"}),t.jsx("span",{children:"Glow = Field Width"})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[t.jsx("h3",{style:{margin:0,color:f.text,fontSize:18,fontWeight:600},children:"Strategic Levels"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(255,255,255,0.05)",borderRadius:6},children:[t.jsx("span",{style:{fontSize:11,color:f.textMuted},children:"LEVELS"}),t.jsx("select",{value:o,onChange:w=>s(Number(w.target.value)),style:{background:"transparent",border:"none",color:f.text,fontSize:12,cursor:"pointer"},children:[5,10,15,20].map(w=>t.jsx("option",{value:w,children:w},w))})]}),t.jsx("div",{style:{display:"flex",background:"rgba(255,255,255,0.05)",borderRadius:6,overflow:"hidden"},children:[{id:"table",icon:""},{id:"card",icon:""},{id:"quantum",icon:""}].map(w=>t.jsx("button",{onClick:()=>i(w.id),style:{padding:"8px 12px",background:r===w.id?f.purple:"transparent",border:"none",color:r===w.id?"#fff":f.textMuted,fontSize:14,cursor:"pointer",transition:"all 0.2s ease"},children:w.icon},w.id))})]})]}),r==="table"&&t.jsx(_e,{}),r==="card"&&t.jsx(Fe,{}),r==="quantum"&&t.jsx(I,{}),c&&t.jsx(j,{level:c,onClose:()=>p(null)}),ze&&(()=>{var Ce;const w=ze.isCall?"#22d3ee":"#f472b6",x=ze.isCall?"rgba(34,211,238,0.1)":"rgba(244,114,182,0.1)",R=ze.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)",M=ze.isCall?71:48,ie=100-M;let ae=se.x+8,Se=se.y-8;return ae+240>window.innerWidth-10&&(ae=se.x-248),Se<10&&(Se=10),Se+340>window.innerHeight-10&&(Se=window.innerHeight-350),t.jsxs("div",{style:{position:"fixed",left:ae,top:Se,width:240,background:"rgba(15, 23, 42, 0.98)",border:`1px solid ${R}`,borderRadius:12,padding:16,zIndex:99999,pointerEvents:"none",boxShadow:`0 0 20px ${ze.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)"}, 0 8px 32px rgba(0,0,0,0.5)`,fontFamily:"'Inter', sans-serif",transform:"translateZ(0)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[t.jsx("span",{style:{fontSize:30,fontWeight:700,color:w,fontFamily:"'JetBrains Mono', monospace"},children:(Ce=ze.strike)==null?void 0:Ce.toFixed(0)}),t.jsxs("span",{style:{fontSize:11,fontWeight:600,color:w,background:x,padding:"4px 10px",borderRadius:5,border:`1px solid ${R}`},children:[" ",ze.isWall?"WALL":"LEVEL"," (",ze.isCall?"CALL":"PUT",")"]})]}),t.jsxs("div",{style:{marginBottom:14},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.6)",marginBottom:5},children:[t.jsx("span",{children:"OPEN INTEREST"}),t.jsx("span",{style:{color:"#e2e8f0"},children:((ze.callOI||0)+(ze.putOI||0)).toLocaleString()})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[t.jsxs("span",{children:["C: ",(ze.callOI||0).toLocaleString()]}),t.jsxs("span",{children:["P: ",(ze.putOI||0).toLocaleString()]})]}),t.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[t.jsx("div",{style:{width:`${ze.callPct}%`,background:"#22d3ee"}}),t.jsx("div",{style:{width:`${ze.putPct}%`,background:"#f472b6"}})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:9,marginTop:3},children:[t.jsxs("span",{style:{color:"#22d3ee"},children:[ze.callPct,"%"]}),t.jsxs("span",{style:{color:"#f472b6"},children:[ze.putPct,"%"]})]})]}),t.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",border:"1px solid rgba(139,92,246,0.2)",borderRadius:8,padding:10,marginBottom:14},children:[t.jsx("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:5},children:"QUANTUM FIELD"}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#e2e8f0"},children:[t.jsxs("span",{children:["L ",(ze.strike+9).toFixed(0)]}),t.jsx("span",{style:{color:"rgba(148,163,184,0.4)"},children:""}),t.jsxs("span",{children:[(ze.strike-9).toFixed(0)," L"]})]}),t.jsx("div",{style:{fontSize:11,color:"#a855f7",textAlign:"center",marginTop:5},children:"18.4 pts influence"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:14},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"MASS"}),t.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:ze.gexLabel})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"EFFECTIVE"}),t.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:ze.gexLabel})]})]}),t.jsxs("div",{style:{marginBottom:14},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[t.jsx("span",{children:"INTEGRITY"}),t.jsx("span",{style:{color:"#e2e8f0"},children:"100%"})]}),t.jsx("div",{style:{height:5,background:"rgba(0,0,0,0.4)",borderRadius:3},children:t.jsx("div",{style:{width:"100%",height:"100%",background:w,borderRadius:3}})})]}),t.jsxs("div",{style:{marginBottom:10},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[t.jsx("span",{children:"HOLD / BREAK"}),t.jsxs("span",{children:["H:",M,"% B:",ie,"%"]})]}),t.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[t.jsx("div",{style:{width:`${M}%`,background:"#22c55e"}}),t.jsx("div",{style:{width:`${ie}%`,background:"#ef4444"}})]})]}),t.jsxs("div",{style:{textAlign:"center",fontSize:12,color:"rgba(148,163,184,0.6)",paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[ze.distance>0?"+":"",ze.distance," pts (",(Math.abs(ze.distance)/(n||1)*100).toFixed(2),"%)"]})]})})()]})},fg=()=>{const[e,n]=A.useState(new Date),[r,i]=A.useState(null);A.useEffect(()=>{const c=setInterval(()=>n(new Date),1e3);return()=>clearInterval(c)},[]);const o=[{id:"japan",name:"Japan",time:"19:00-20:00",color:"#9370DB",start:1900,end:2e3},{id:"china",name:"China",time:"20:00-23:00",color:"#F472B6",start:2e3,end:2300},{id:"deadzone",name:"Deadzone",time:"02:00-03:00",color:"#6B7280",start:200,end:300},{id:"london",name:"London",time:"03:00-06:00",color:"#3B82F6",start:300,end:600},{id:"us_ib",name:"US IB",time:"08:20-09:30",color:"#F59E0B",start:820,end:930},{id:"ny_1h",name:"NY 1H",time:"09:30-10:30",color:"#10B981",start:930,end:1030},{id:"ny_2h",name:"NY 2H",time:"10:30-11:30",color:"#06B6D4",start:1030,end:1130},{id:"lunch",name:"Lunch",time:"11:30-13:30",color:"#8B5CF6",start:1130,end:1330},{id:"ny_pm",name:"NY PM",time:"13:30-16:00",color:"#EF4444",start:1330,end:1600}],l=(()=>{const c=new Date(e.toLocaleString("en-US",{timeZone:"America/New_York"})),p=c.getHours(),h=c.getMinutes(),m=p*100+h;return m>=1900&&m<2e3?"japan":m>=2e3&&m<2300?"china":m>=200&&m<300?"deadzone":m>=300&&m<600?"london":m>=820&&m<930?"us_ib":m>=930&&m<1030?"ny_1h":m>=1030&&m<1130?"ny_2h":m>=1130&&m<1330?"lunch":m>=1330&&m<1600?"ny_pm":null})(),d=l!==null;return t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",marginBottom:16,padding:"24px 16px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative",width:"100%"},children:[t.jsx("div",{style:{position:"absolute",top:60,left:50,right:50,height:1,background:"rgba(255,255,255,0.1)",zIndex:0}}),o.map((c,p)=>{const h=c.id===l,m=r===c.id,u=(()=>{if(!d)return!1;const S=o.findIndex(k=>k.id===l);return p<S})(),z=90;return t.jsx("div",{onMouseEnter:()=>i(c.id),onMouseLeave:()=>i(null),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",zIndex:m?10:1,cursor:"pointer",minWidth:80,height:120},children:t.jsxs("div",{style:{width:z,height:z,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,background:h?"linear-gradient(135deg, rgba(20,20,28,1) 0%, rgba(15,15,22,1) 100%)":m?"linear-gradient(135deg, rgba(30,30,40,1) 0%, rgba(25,25,35,1) 100%)":"rgb(20, 20, 28)",border:h?`2px solid ${c.color}`:m?`2px solid ${c.color}80`:"1px solid rgba(255,255,255,0.08)",opacity:d?u?.5:1:.7,transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:h?`0 0 25px ${c.color}50, 0 8px 32px rgba(0,0,0,0.4)`:m?`0 0 30px ${c.color}40, 0 12px 40px rgba(0,0,0,0.5)`:"0 4px 12px rgba(0,0,0,0.3)",position:"relative",transform:m?"scale(1.2) translateY(-5px)":"scale(1) translateY(0)",zIndex:m?5:1},children:[t.jsx("div",{style:{width:m?12:10,height:m?12:10,borderRadius:"50%",background:c.color,boxShadow:h||m?`0 0 12px ${c.color}`:"none",animation:h?"sessionDotPulse 1.5s ease-in-out infinite":"none",transition:"all 0.3s ease"}}),t.jsx("span",{style:{fontSize:m?16:14,color:h?c.color:m?"#fff":d?"#e5e5e5":"#888",fontWeight:600,textAlign:"center",lineHeight:1.1,transition:"all 0.3s ease",textShadow:m?`0 0 10px ${c.color}60`:"none"},children:c.name}),t.jsx("span",{style:{fontSize:m?9:8,color:h||m?c.color:d?"#666":"#555",fontFamily:"'JetBrains Mono', monospace",opacity:.9,transition:"all 0.3s ease"},children:c.time}),h&&d&&t.jsx("div",{style:{position:"absolute",bottom:-10,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000",fontSize:8,fontWeight:700,padding:"3px 10px",borderRadius:10,letterSpacing:"0.05em",boxShadow:"0 4px 12px rgba(0,255,136,0.6)",animation:"liveBadgePulse 2s ease-in-out infinite"},children:"LIVE"})]})},c.id)})]})}),t.jsx("style",{children:`
        @keyframes sessionDotPulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.7; transform: scale(1.2); }
        }
        @keyframes liveBadgePulse {
          0%, 100% { box-shadow: 0 4px 12px rgba(0,255,136,0.6); }
          50% { box-shadow: 0 4px 20px rgba(0,255,136,0.9); }
        }
      `})]})},ug=({gexData:e,currentPrice:n})=>{const[r,i]=A.useState(!1),o=(e==null?void 0:e.gamma_regime)||"UNKNOWN",s=(e==null?void 0:e.total_gex)||0,l=(e==null?void 0:e.zero_gamma)||(e==null?void 0:e.gamma_flip)||0;e!=null&&e.hvl;const d=n?(n-l).toFixed(1):0,c=n>l,p=54.09,h=17.73,m=94.8,u=85,z=1.75,S={green:"#22c55e",red:"#ef4444",cyan:"#22d3ee",purple:"#a855f7",amber:"#f59e0b",text:"#f4f4f5",textMuted:"#71717a"};return r?t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:"16px 24px",marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("span",{style:{fontSize:18},children:""}),t.jsx("span",{style:{color:S.purple,fontSize:16,fontWeight:600},children:"Market Pulse"}),t.jsx("span",{style:{padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:600,background:o==="NEGATIVE"?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",color:o==="NEGATIVE"?S.red:S.green},children:o})]}),t.jsx("button",{onClick:()=>i(!1),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:S.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"+ EXPAND"})]}):t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:24,marginBottom:24},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("span",{style:{fontSize:18},children:""}),t.jsx("span",{style:{color:S.purple,fontSize:18,fontWeight:600},children:"Market Pulse"})]}),t.jsx("button",{onClick:()=>i(!0),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:S.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:" COLLAPSE"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",gap:24},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:S.textMuted,letterSpacing:"0.1em",marginBottom:8},children:"GAMMA REGIME"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[t.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:o==="NEGATIVE"?S.red:S.green,boxShadow:`0 0 10px ${o==="NEGATIVE"?S.red:S.green}`}}),t.jsxs("span",{style:{fontSize:18,fontWeight:700,color:o==="NEGATIVE"?S.red:S.green,letterSpacing:"0.05em"},children:["CONFIRMED ",o]})]}),t.jsxs("div",{style:{fontSize:12,color:S.textMuted,marginBottom:16},children:["Net GEX: ",t.jsxs("span",{style:{color:s<0?S.red:S.green,fontWeight:600},children:[s.toFixed(2),"B"]})]}),t.jsx("div",{style:{fontSize:10,color:S.textMuted,letterSpacing:"0.1em",marginBottom:8,marginTop:24},children:"VOLATILITY REGIME"}),t.jsx("div",{style:{fontSize:22,fontWeight:700,color:S.text,marginBottom:4},children:o==="NEGATIVE"?"EXPANSION":"CONTRACTION"}),t.jsxs("div",{style:{fontSize:12,color:S.cyan},children:["GVI Magnitude: ",t.jsx("span",{style:{fontWeight:600},children:z})]})]}),t.jsxs("div",{children:[t.jsxs("div",{style:{padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginBottom:16,fontSize:13,color:S.textMuted,lineHeight:1.6},children:["Spot price is ",t.jsxs("span",{style:{color:S.text,fontWeight:600},children:[Math.abs(d)," points ",c?"above":"below"," Zero Gamma"]}),".",o==="NEGATIVE"?t.jsxs(t.Fragment,{children:[" Dealers hedge against explosive moves by amplifying volatility and reinforcing trend continuation. Requires ",t.jsx("span",{style:{color:S.amber},children:"extreme caution"})," around breakouts."]}):t.jsxs(t.Fragment,{children:[" Dealers hedge by dampening volatility and providing mean reversion. Expect ",t.jsx("span",{style:{color:S.green},children:"range-bound"})," price action."]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:[{label:"ATR",value:p.toFixed(2)},{label:"VIX",value:h.toFixed(2)},{label:"EXP. MOVE",value:m.toFixed(1)}].map(({label:k,value:y})=>t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:16,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:S.textMuted,marginBottom:6},children:k}),t.jsx("div",{style:{fontSize:20,fontWeight:600,color:S.text},children:y})]},k))}),t.jsxs("div",{style:{marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[t.jsx("span",{style:{fontSize:11,color:S.textMuted},children:"REALIZED VS EXPECTED RANGE"}),t.jsxs("span",{style:{fontSize:11,color:S.text},children:[u," / ",m.toFixed(1)," (",Math.round(u/m*100),"%)"]})]}),t.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:t.jsx("div",{style:{width:`${Math.min(u/m*100,100)}%`,height:"100%",background:S.amber,borderRadius:4}})})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,fontSize:12},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:S.textMuted},children:"Sentiment (Skew):"}),t.jsx("span",{style:{color:S.text},children:"Neutral (-0.01)"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:S.textMuted},children:"Stability (Speed):"}),t.jsx("span",{style:{color:S.text},children:"Normal"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:S.textMuted},children:"Vanna:"}),t.jsx("span",{style:{color:S.cyan},children:"Vol Support"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:S.textMuted},children:"Charm:"}),t.jsx("span",{style:{color:S.text},children:"Price Pressure"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:S.textMuted},children:"Magnete Charm:"}),t.jsxs("span",{style:{color:S.purple},children:["Pressione (",l.toFixed(2),")"]})]})]})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,background:"rgba(34,197,94,0.1)",borderRadius:8,marginTop:20,border:"1px solid rgba(34,197,94,0.3)"},children:[t.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:S.green,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:12,color:S.green,fontWeight:600,marginBottom:2},children:"VOLATILITY DIAGNOSIS"}),t.jsx("div",{style:{fontSize:12,color:S.textMuted},children:"Confirmation: The multi-factor analysis (Speed/Convexity) confirms the detected regime."})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginTop:12},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"rgba(168,85,247,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:14,color:S.text,fontWeight:600},children:"AI Deep Analysis"}),t.jsx("div",{style:{fontSize:11,color:S.textMuted},children:"Market Structure & 0DTE Strategy"})]})]}),t.jsx("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:" VIEW ANALYSIS"})]})]})},en="https://backend-production-ea57.up.railway.app",sa="https://backend-production-ea57.up.railway.app/redfolder",hg="18.5.1";console.log("Horizon v"+hg);const gg=A.createContext(null),kf=A.createContext(null),xg=()=>A.useContext(kf);A.createContext({isMobile:!1,isTablet:!1,screenWidth:1200});const _i=()=>{const[e,n]=A.useState({width:typeof window<"u"?window.innerWidth:1200,height:typeof window<"u"?window.innerHeight:800});return A.useEffect(()=>{const r=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),{isMobile:e.width<768,isTablet:e.width>=768&&e.width<1024,isDesktop:e.width>=1024,screenWidth:e.width,screenHeight:e.height}},Cf={deltaThreshold:-2500,buyingImbalancePct:400,entryTiers:{tier1:25,tier2:40,tier3:35},targetTiers:{vwap:50,ibMid:35,ibHigh:15},filters:{grades:{A:!0,B:!0,C:!0},tiers:{1:!0,2:!0,3:!0},minR:-10},divergenceThreshold:0},yg=e=>{const n=[],r=new Date("2025-08-20"),i=new Date("2025-12-28");let o=12345;const s=()=>(o=(o*9301+49297)%233280,o/233280);let l=1,d=new Date(r);for(;d<=i;){if(s()<.35){const c=s()<.35?"A":s()<.65?"B":"C",p=s()<.25?1:s()<.65?2:3,h=["I","II","III"][p-1],m=c==="A"?.82:c==="B"?.71:.52,u=s()<m,z=u?s()<.5?"VWAP":s()<.7?"IB_MID":"IB_HIGH":"STOP_LOSS",S=Math.ceil(s()*8)+2,k=z==="STOP_LOSS"?-1:1.5+s()*2,a=3320+(d-r)/(1e3*60*60*24)*.5+(s()-.5)*40,g=Math.round(k*35*10*S);n.push({id:l++,date:d.toISOString().split("T")[0],entry:Math.round(a*100)/100,exit:Math.round((a+(u?k*3.5:-3.5))*100)/100,stop_loss:Math.round((a-3.5)*100)/100,pnl:g,r:Math.round(k*10)/10,grade:c,tier:p,tierRoman:h,exitReason:z,contracts:S,delta:-1500-Math.floor(s()*3500),buyingImbalance:250+Math.floor(s()*400),conditionsMet:c==="A"?6:c==="B"?5:4,levels:{ib_high:Math.round((a+15)*100)/100,ib_low:Math.round((a-10)*100)/100,ib_mid:Math.round((a+2.5)*100)/100,pdpoc:Math.round((a-5)*100)/100,vwap:Math.round((a+5)*100)/100,pd_high:Math.round((a+20)*100)/100,pd_low:Math.round((a-15)*100)/100}})}for(d.setDate(d.getDate()+1);d.getDay()===0||d.getDay()===6;)d.setDate(d.getDate()+1)}return n},mg=()=>{const[e,n]=A.useState({trades:null,stats:null,source:"loading"});return A.useEffect(()=>{(async()=>{try{const i=await fetch("/backtest_data.json");if(i.ok){const o=await i.json();if(o.trades&&o.trades.length>0){console.log(` Loaded ${o.trades.length} trades from ${o.dataSource||"backtest_data.json"}`),n({trades:o.trades,stats:o.stats,source:o.dataSource||"real"});return}}}catch{console.log("No backtest_data.json found")}console.log("Using generated mock data (run generate_backtest.py for real data)"),n({trades:null,stats:null,source:"mock"})})()},[]),e},bg=(e,n)=>{var T,j,b,O,_,D;if(e.length===0)return{summary:{total_trades:0,winners:0,losers:0,win_rate:0,total_pnl:0,adjusted_pnl:0,gross_profit:0,gross_loss:0,profit_factor:0,avg_win:0,avg_loss:0,avg_r_multiple:0,max_drawdown:0,max_drawdown_pct:0,final_equity:1e6},yearly_pnl:[],weekly_pnl:[],exit_reasons:{VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0},grade_stats:{A:{trades:0,winners:0,pnl:0,win_rate:0},B:{trades:0,winners:0,pnl:0,win_rate:0},C:{trades:0,winners:0,pnl:0,win_rate:0}},tier_stats:{TIER_I:{trades:0,winners:0,pnl:0,win_rate:0},TIER_II:{trades:0,winners:0,pnl:0,win_rate:0},TIER_III:{trades:0,winners:0,pnl:0,win_rate:0}}};const r={1:(((T=n.entryTiers)==null?void 0:T.tier1)||25)/25,2:(((j=n.entryTiers)==null?void 0:j.tier2)||40)/40,3:(((b=n.entryTiers)==null?void 0:b.tier3)||35)/35},i={VWAP:(((O=n.targetTiers)==null?void 0:O.vwap)||50)/50,IB_MID:(((_=n.targetTiers)==null?void 0:_.ibMid)||35)/35,IB_HIGH:(((D=n.targetTiers)==null?void 0:D.ibHigh)||15)/15,STOP_LOSS:1},o=e.map(W=>{const G=r[W.tier]||1,_e=W.pnl>0&&i[W.exitReason]||1,Fe=W.pnl*G*_e;return{...W,adjustedPnl:Fe,originalPnl:W.pnl}}),s=o.filter(W=>W.adjustedPnl>0),l=o.filter(W=>W.adjustedPnl<=0),d=s.reduce((W,G)=>W+G.adjustedPnl,0),c=Math.abs(l.reduce((W,G)=>W+G.adjustedPnl,0)),p=d-c,h=e.reduce((W,G)=>W+G.pnl,0);let m=1e6,u=m,z=0;o.forEach(W=>{m+=W.adjustedPnl,m>u&&(u=m);const G=u-m;G>z&&(z=G)});const S={};o.forEach(W=>{const G=parseInt(W.date.split("-")[0]);S[G]||(S[G]={year:G,trades:0,winners:0,losers:0,pnl:0}),S[G].trades++,W.adjustedPnl>0?S[G].winners++:S[G].losers++,S[G].pnl+=W.adjustedPnl});const k=Object.values(S).map(W=>({...W,win_rate:W.trades>0?W.winners/W.trades:0})).sort((W,G)=>W.year-G.year),y={};o.forEach(W=>{const G=new Date(W.date),_e=G.getFullYear(),Fe=Math.ceil((G-new Date(_e,0,1))/(7*24*60*60*1e3)),I=`${_e}-W${Fe}`;y[I]||(y[I]={week:Fe,year:_e,trades:0,pnl:0,winners:0}),y[I].trades++,y[I].pnl+=W.adjustedPnl,W.adjustedPnl>0&&y[I].winners++});const a=Object.values(y).map(W=>({...W,win_rate:W.trades>0?W.winners/W.trades:0})),g={VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0};e.forEach(W=>{g[W.exitReason]!==void 0&&g[W.exitReason]++});const v={A:{trades:0,winners:0,pnl:0},B:{trades:0,winners:0,pnl:0},C:{trades:0,winners:0,pnl:0}};o.forEach(W=>{v[W.grade]&&(v[W.grade].trades++,W.adjustedPnl>0&&v[W.grade].winners++,v[W.grade].pnl+=W.adjustedPnl)}),Object.keys(v).forEach(W=>{v[W].win_rate=v[W].trades>0?v[W].winners/v[W].trades:0});const f={TIER_I:{trades:0,winners:0,pnl:0},TIER_II:{trades:0,winners:0,pnl:0},TIER_III:{trades:0,winners:0,pnl:0}};return o.forEach(W=>{const G=["TIER_I","TIER_II","TIER_III"][W.tier-1]||"TIER_I";f[G].trades++,W.adjustedPnl>0&&f[G].winners++,f[G].pnl+=W.adjustedPnl}),Object.keys(f).forEach(W=>{f[W].win_rate=f[W].trades>0?f[W].winners/f[W].trades:0}),{summary:{total_trades:e.length,winners:s.length,losers:l.length,win_rate:e.length>0?s.length/e.length:0,total_pnl:p,original_pnl:h,pnl_difference:p-h,gross_profit:d,gross_loss:-c,profit_factor:c>0?d/c:d>0?1/0:0,avg_win:s.length>0?d/s.length:0,avg_loss:l.length>0?-c/l.length:0,avg_r_multiple:e.length>0?e.reduce((W,G)=>W+G.r,0)/e.length:0,max_drawdown:z,max_drawdown_pct:u>0?z/u:0,final_equity:1e6+p},yearly_pnl:k,weekly_pnl:a,exit_reasons:g,grade_stats:v,tier_stats:f}},la=(e,n)=>{const[r,i]=A.useState(()=>{try{const o=window.localStorage.getItem(e);return o?JSON.parse(o):n}catch{return n}});return A.useEffect(()=>{window.localStorage.setItem(e,JSON.stringify(r))},[e,r]),[r,i]},td="JBSWY3DPEHPK3PXP",vg=async(e,n=td)=>{const r=[-1,0,1];for(const i of r){const o=Math.floor(Date.now()/1e3/30)+i,s=new Uint8Array(8);let l=o;for(let c=7;c>=0;c--)s[c]=l&255,l=Math.floor(l/256);const d=c=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let h="";for(let u=0;u<c.length;u++){const z=p.indexOf(c.charAt(u).toUpperCase());z!==-1&&(h+=z.toString(2).padStart(5,"0"))}const m=[];for(let u=0;u+8<=h.length;u+=8)m.push(parseInt(h.substr(u,8),2));return new Uint8Array(m)};try{const c=d(n),p=await crypto.subtle.importKey("raw",c,{name:"HMAC",hash:"SHA-1"},!1,["sign"]),h=new Uint8Array(await crypto.subtle.sign("HMAC",p,s)),m=h[h.length-1]&15,z=(((h[m]&127)<<24|(h[m+1]&255)<<16|(h[m+2]&255)<<8|h[m+3]&255)%1e6).toString().padStart(6,"0");if(e===z)return!0}catch(c){console.error("TOTP verification error:",c)}}return!1},jg=({onLogin:e})=>{const[n,r]=A.useState({username:"",password:""}),[i,o]=A.useState(""),[s,l]=A.useState(1),[d,c]=A.useState(!1),[p,h]=A.useState(""),[m,u]=A.useState(!1),z=async a=>{a.preventDefault(),u(!0),h(""),await new Promise(g=>setTimeout(g,500)),n.username==="horizon"&&n.password==="[i68E[4S1k,4"?l(2):h("Invalid credentials"),u(!1)},S=async a=>{a.preventDefault(),u(!0),h(""),await vg(i)?e({username:n.username,role:"trader"}):h("Invalid 2FA code. Please try again."),u(!1)},k=`otpauth://totp/ProjectHorizon:horizon?secret=${td}&issuer=ProjectHorizon&algorithm=SHA1&digits=6&period=30`,y=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(k)}`;return t.jsx("div",{style:C.loginContainer,children:t.jsxs("div",{style:C.loginCard,children:[t.jsxs("div",{style:C.loginHeader,children:[t.jsxs("div",{style:C.logo,children:[t.jsx("div",{style:C.logoIcon,children:t.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 40 40",fill:"none",children:[t.jsx("rect",{x:"4",y:"4",width:"32",height:"32",rx:"8",stroke:"#00ff88",strokeWidth:"2",fill:"rgba(0,255,136,0.1)"}),t.jsx("path",{d:"M20 12L28 20L20 28L12 20L20 12Z",fill:"#00ff88"}),t.jsx("circle",{cx:"20",cy:"20",r:"4",fill:"#0a0a0f"})]})}),t.jsx("span",{style:C.logoText,children:"PROJECT HORIZON"})]}),t.jsx("p",{style:C.loginSubtitle,children:"Not the, 1%."})]}),s===1?t.jsxs("form",{onSubmit:z,style:C.loginForm,children:[t.jsxs("div",{style:C.inputGroup,children:[t.jsx("label",{style:C.inputLabel,children:"Username"}),t.jsx("input",{type:"text",value:n.username,onChange:a=>r({...n,username:a.target.value}),style:C.input,placeholder:"Enter username"})]}),t.jsxs("div",{style:C.inputGroup,children:[t.jsx("label",{style:C.inputLabel,children:"Password"}),t.jsx("input",{type:"password",value:n.password,onChange:a=>r({...n,password:a.target.value}),style:C.input,placeholder:"Enter password"})]}),p&&t.jsx("div",{style:C.error,children:p}),t.jsx("button",{type:"submit",style:C.loginButton,disabled:m,children:m?"Verifying...":"Continue"})]}):t.jsx("div",{style:C.loginForm,children:d?t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("p",{style:{color:"#888",marginBottom:16,fontSize:13},children:"Scan this QR code with your authenticator app:"}),t.jsx("img",{src:y,alt:"2FA QR Code",style:{width:180,height:180,borderRadius:8,marginBottom:16,background:"#fff",padding:8}}),t.jsxs("p",{style:{color:"#666",fontSize:11,marginBottom:8},children:["Or enter manually: ",t.jsx("code",{style:{color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"2px 6px",borderRadius:4},children:td})]}),t.jsx("button",{onClick:()=>c(!1),style:{...C.loginButton,marginTop:16},children:"I've Added It"})]}):t.jsxs("form",{onSubmit:S,children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[t.jsx("div",{style:{width:64,height:64,borderRadius:"50%",background:"rgba(0,255,136,0.1)",border:"2px solid #00ff88",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:t.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),t.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),t.jsx("p",{style:{color:"#fff",fontSize:15,fontWeight:600,fontFamily:"'Inter', sans-serif",marginBottom:6},children:"Two-Factor Authentication"}),t.jsx("p",{style:{color:"#888",fontSize:12,fontFamily:"'Inter', sans-serif"},children:"Enter the 6-digit code from your authenticator app"})]}),t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:8,marginBottom:20},children:[0,1,2,3,4,5].map(a=>t.jsx("input",{id:`totp-${a}`,type:"text",inputMode:"numeric",maxLength:1,value:i[a]||"",onChange:g=>{var f;const v=g.target.value.replace(/\D/g,"");if(v.length<=1){const T=i.split("");T[a]=v,o(T.join("").slice(0,6)),v&&a<5&&((f=document.getElementById(`totp-${a+1}`))==null||f.focus())}},onKeyDown:g=>{var v;g.key==="Backspace"&&!i[a]&&a>0&&((v=document.getElementById(`totp-${a-1}`))==null||v.focus())},onPaste:g=>{var T;g.preventDefault();const v=g.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);o(v);const f=Math.min(v.length,5);(T=document.getElementById(`totp-${f}`))==null||T.focus()},style:{width:48,height:56,textAlign:"center",fontSize:24,fontFamily:'"SF Mono", "JetBrains Mono", "Fira Code", Consolas, monospace',fontWeight:600,background:"rgba(0,0,0,0.5)",border:i[a]?"2px solid #00ff88":"2px solid rgba(255,255,255,0.15)",borderRadius:10,color:"#fff",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",boxShadow:i[a]?"0 0 10px rgba(0,255,136,0.2)":"none"},onFocus:g=>g.target.style.borderColor="#00ff88",onBlur:g=>g.target.style.borderColor=i[a]?"#00ff88":"rgba(255,255,255,0.15)",autoFocus:a===0},a))}),p&&t.jsx("div",{style:C.error,children:p}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx("button",{type:"submit",style:{...C.loginButton,width:"200px"},disabled:m||i.length!==6,children:m?"Verifying...":"VERIFY & LOGIN"}),t.jsx("div",{style:{width:"200px",display:"flex",justifyContent:"flex-end",marginTop:10},children:t.jsx("button",{type:"button",onClick:()=>{l(1),h(""),o("")},style:{background:"transparent",border:"none",color:"#666",fontSize:11,cursor:"pointer",fontFamily:"'Inter', sans-serif"},children:" Back to login"})})]})]})}),t.jsx("div",{style:C.loginFooter,children:t.jsx("p",{style:C.footerText,children:"2FA Protected"})})]})})},Sg=()=>{var j;const[e,n]=A.useState(null),[r,i]=A.useState(!0),[o,s]=A.useState(null),[l,d]=A.useState("1D"),[c,p]=A.useState("1M"),[h,m]=A.useState(null),[u,z]=A.useState({x:0,y:0}),{isMobile:S}=_i(),k={"1D":{GC:{GC:1,SI:.92,CHF:.7,JPY:.66,US10Y:-.44,DXY:-.82},SI:{GC:.92,SI:1,CHF:.62,JPY:.56,US10Y:-.38,DXY:-.74},CHF:{GC:.7,SI:.62,CHF:1,JPY:.76,US10Y:-.32,DXY:-.86},JPY:{GC:.66,SI:.56,JPY:1,CHF:.76,US10Y:-.28,DXY:-.72},US10Y:{GC:-.44,SI:-.38,CHF:-.32,JPY:-.28,US10Y:1,DXY:.54},DXY:{GC:-.82,SI:-.74,CHF:-.86,JPY:-.72,US10Y:.54,DXY:1}},"1W":{GC:{GC:1,SI:.94,CHF:.74,JPY:.7,US10Y:-.48,DXY:-.85},SI:{GC:.94,SI:1,CHF:.66,JPY:.6,US10Y:-.42,DXY:-.78},CHF:{GC:.74,SI:.66,CHF:1,JPY:.8,US10Y:-.36,DXY:-.9},JPY:{GC:.7,SI:.6,JPY:1,CHF:.8,US10Y:-.32,DXY:-.76},US10Y:{GC:-.48,SI:-.42,CHF:-.36,JPY:-.32,US10Y:1,DXY:.58},DXY:{GC:-.85,SI:-.78,CHF:-.9,JPY:-.76,US10Y:.58,DXY:1}},"1M":{GC:{GC:1,SI:.96,CHF:.78,JPY:.74,US10Y:-.52,DXY:-.88},SI:{GC:.96,SI:1,CHF:.7,JPY:.64,US10Y:-.46,DXY:-.82},CHF:{GC:.78,SI:.7,CHF:1,JPY:.84,US10Y:-.4,DXY:-.92},JPY:{GC:.74,SI:.64,JPY:1,CHF:.84,US10Y:-.36,DXY:-.8},US10Y:{GC:-.52,SI:-.46,CHF:-.4,JPY:-.36,US10Y:1,DXY:.62},DXY:{GC:-.88,SI:-.82,CHF:-.92,JPY:-.8,US10Y:.62,DXY:1}}};A.useEffect(()=>{let b=!0;const O=async()=>{try{i(!0);const D=await fetch(`${en}/market-overview`);if(!D.ok)throw new Error("Failed to fetch market data");const W=await D.json();if(W.error)throw new Error(W.error);if(b&&W.sectors){const G=W.correlations||k;n({sectors:W.sectors,correlationsByTimeframe:G}),s(null)}}catch(D){console.error("Market data fetch error:",D),b&&s(D.message)}finally{b&&i(!1)}};O();const _=setInterval(O,3e4);return()=>{b=!1,clearInterval(_)}},[]);const y=b=>l==="1D"?b.change1D||0:l==="1W"?b.change1W||0:b.change1M||0,a=b=>l==="1D"?b.prev1D:l==="1W"?b.prev1W:b.prev1M,g=b=>b>2?"#00ff88":b>0?"#4ade80":b>-1?"#f87171":b>-2?"#ef4444":"#dc2626",v=(b,O)=>!b||isNaN(b)?"":O!=null&&O.includes("6J")||O!=null&&O.includes("6")||O!=null&&O.includes("DX")?b.toFixed(4):O!=null&&O.includes("US")&&!(O!=null&&O.includes("USD"))?b.toFixed(2)+"%":b>1e3||b>10?b.toFixed(2):b.toFixed(4),f=()=>l==="1D"?"vs Yesterday":l==="1W"?"vs Last Week":"vs Last Month",T=()=>l==="1D"?"Yesterday":l==="1W"?"Last Week":"Last Month";return r&&!e?t.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[t.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading live market data..."]}):e?t.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:S?12:0},children:[t.jsxs("div",{style:{display:"flex",flexDirection:S?"column":"row",justifyContent:"space-between",alignItems:S?"flex-start":"center",marginBottom:S?16:24,gap:S?12:16},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,color:"#fff",fontSize:S?16:20},children:S?"Correlation Matrix":" Correlation Matrix"}),t.jsxs("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:S?11:13},children:["Futures price change ",f(),"  Color = % Change"]})]}),t.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(b=>t.jsx("button",{onClick:()=>d(b),style:{padding:S?"6px 12px":"8px 16px",borderRadius:6,border:l===b?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",background:l===b?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.03)",color:l===b?"#00ff88":"#888",fontWeight:600,fontSize:S?10:12,cursor:"pointer",transition:"all 0.2s"},children:b},b))})]}),o&&t.jsxs("div",{style:{padding:16,marginBottom:16,background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,color:"#ff6b6b",fontSize:13},children:[" ",o," - Install yfinance: pip install yfinance"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(2, 1fr)",gap:S?8:12,marginBottom:S?16:24},children:(j=e==null?void 0:e.sectors)==null?void 0:j.map(b=>t.jsxs("div",{style:{padding:14,background:"rgba(255,255,255,0.02)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",borderLeft:`3px solid ${b.color}`},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:b.color}}),t.jsx("span",{style:{fontSize:11,fontWeight:600,color:b.color,textTransform:"uppercase",letterSpacing:.5},children:b.name})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min(b.stocks.length,5)}, 1fr)`,gap:6},children:b.stocks.map(O=>{const _=y(O),D=(h==null?void 0:h.symbol)===O.symbol;return t.jsxs("div",{style:{position:"relative",padding:"8px 10px",borderRadius:6,background:g(_),cursor:"pointer",transition:"all 0.2s ease",transform:D?"scale(1.05)":"scale(1)",boxShadow:D?"0 4px 20px rgba(0,0,0,0.4)":"none",textAlign:"center"},onMouseEnter:W=>{const G=W.currentTarget.getBoundingClientRect();m({...O,sectorName:b.name,sectorColor:b.color}),z({x:G.left+G.width/2,y:G.top})},onMouseLeave:()=>m(null),children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#000",marginBottom:2},children:O.symbol}),t.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#000"},children:[_>=0?"+":"",_.toFixed(2),"%"]})]},O.symbol)})})]},b.name))}),h&&t.jsxs("div",{style:{position:"fixed",left:Math.max(20,Math.min(u.x-150,window.innerWidth-320)),top:u.y+60,background:"linear-gradient(135deg, rgba(20,20,28,0.98) 0%, rgba(15,15,20,0.98) 100%)",border:`1px solid ${h.sectorColor}40`,borderRadius:12,padding:0,zIndex:1e3,boxShadow:`0 8px 32px rgba(0,0,0,0.6), 0 0 20px ${h.sectorColor}20`,minWidth:280,maxWidth:300,pointerEvents:"none",overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"12px 16px",background:`${h.sectorColor}15`,borderBottom:`1px solid ${h.sectorColor}30`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#fff"},children:h.name}),t.jsx("div",{style:{fontSize:11,color:h.sectorColor,marginTop:2},children:h.sectorName})]}),t.jsxs("div",{style:{fontSize:18,fontWeight:700,color:y(h)>=0?"#00ff88":"#ff4466"},children:[y(h)>=0?"+":"",y(h).toFixed(2),"%"]})]}),t.jsxs("div",{style:{padding:"12px 16px"},children:[(()=>{const b=h.current||{},O=b.c>=b.o,_=O?"#00ff88":"#ff4466";return t.jsxs("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:6,background:O?"rgba(0,255,136,0.08)":"rgba(255,68,102,0.08)",border:`1px solid ${_}30`},children:[t.jsxs("div",{style:{fontSize:9,color:_,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,fontWeight:600},children:[O?"":""," Current"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(D=>{const W=b[D.toLowerCase()],G=D==="H"&&O?"#00ff88":D==="L"&&!O?"#ff4466":"#fff";return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:D}),t.jsx("div",{style:{fontSize:10,color:G,fontFamily:"monospace",fontWeight:600},children:v(W,h.symbol)})]},D)})})]})})(),(()=>{const b=a(h)||{},O=b.c>=b.o,_=O?"#00ff88":"#ff4466";return t.jsxs("div",{style:{padding:"8px 10px",borderRadius:6,background:O?"rgba(0,255,136,0.05)":"rgba(255,68,102,0.05)",border:`1px solid ${_}20`},children:[t.jsxs("div",{style:{fontSize:9,color:_,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,opacity:.8,fontWeight:600},children:[O?"":""," ",T()]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(D=>{const W=b[D.toLowerCase()],G=D==="H"&&O?"#00ff88":D==="L"&&!O?"#ff4466":"#aaa";return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:D}),t.jsx("div",{style:{fontSize:10,color:G,fontFamily:"monospace"},children:v(W,h.symbol)})]},D)})})]})})()]}),t.jsx("div",{style:{padding:"8px 16px",background:"rgba(0,0,0,0.3)",fontSize:10,color:"#666",textAlign:"center"},children:"Live data from Yahoo Finance"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,padding:16,background:"rgba(255,255,255,0.02)",borderRadius:12,marginBottom:24},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#dc2626"}}),t.jsx("span",{style:{color:"#888",fontSize:12},children:"< -2%"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#f87171"}}),t.jsx("span",{style:{color:"#888",fontSize:12},children:"-2% to 0%"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#4ade80"}}),t.jsx("span",{style:{color:"#888",fontSize:12},children:"0% to +2%"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#00ff88"}}),t.jsx("span",{style:{color:"#888",fontSize:12},children:">+2%"})]})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:16,padding:24,border:"1px solid rgba(255,255,255,0.1)"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[t.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:10},children:[" GC & SI Correlation Matrix (",c==="30m"?"30 Minutes":c==="1H"?"1 Hour":c==="4H"?"4 Hours":c==="1D"?"1 Day":c==="1W"?"1 Week":"1 Month",")",t.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"3px 8px",borderRadius:4,border:"1px solid rgba(0,255,136,0.3)",letterSpacing:.5},children:" LIVE"})]}),t.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(b=>t.jsx("button",{onClick:()=>p(b),style:{padding:"6px 12px",borderRadius:6,border:c===b?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",background:c===b?"rgba(0,170,255,0.15)":"rgba(255,255,255,0.03)",color:c===b?"#00aaff":"#888",fontWeight:600,fontSize:11,cursor:"pointer",transition:"all 0.2s"},children:b},b))})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:500},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{padding:12,textAlign:"left",color:"#888",fontSize:12}}),["GC","SI","CHF","JPY","US10Y","DXY"].map(b=>t.jsx("th",{style:{padding:12,textAlign:"center",color:b==="GC"?"#FFD700":b==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:b==="CHF"?" CHF":b==="JPY"?" JPY":b==="US10Y"?" 10Y":b==="DXY"?" DXY":b==="GC"?" GC":" SI"},b))]})}),t.jsx("tbody",{children:["GC","SI","CHF","JPY","US10Y","DXY"].map(b=>t.jsxs("tr",{children:[t.jsx("td",{style:{padding:12,color:b==="GC"?"#FFD700":b==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:b==="CHF"?" Swiss":b==="JPY"?" Yen":b==="US10Y"?" Yield":b==="DXY"?" DXY":b==="GC"?" Gold":" Silver"}),["GC","SI","CHF","JPY","US10Y","DXY"].map(O=>{var _e,Fe,I;const _=((I=(Fe=(_e=e.correlationsByTimeframe)==null?void 0:_e[c])==null?void 0:Fe[b])==null?void 0:I[O])??0,D=Math.abs(_),W=_<0,G=_===1?"rgba(100,100,100,0.3)":W?`rgba(255,68,102,${D*.4})`:_>.7?`rgba(0,255,136,${D*.4})`:_>.3?`rgba(0,255,136,${D*.25})`:`rgba(255,170,0,${D*.3})`;return t.jsxs("td",{style:{padding:12,textAlign:"center",background:G,color:_===1?"#888":W?"#ff4466":_>.5?"#00ff88":"#ffaa00",fontSize:13,fontWeight:600,border:"1px solid rgba(255,255,255,0.05)"},children:[_>=0?"+":"",_.toFixed(2)]},O)})]},b))})]})}),t.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:" Green = Positive correlation |  Red = Negative correlation (inverse relationship)"})]})]}):t.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[t.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No market data available"]})},wg=({selectedContract:e})=>{const[n,r]=A.useState({}),[i,o]=A.useState({});return A.useEffect(()=>{r({}),o({});const s=async()=>{try{const c=await(await fetch(en)).json();r(c),o(c)}catch(d){console.error("PriceLadder fetch error:",d)}};s();const l=setInterval(s,300);return()=>clearInterval(l)},[e]),t.jsx(kg,{metrics:n,gexData:i})},kg=({metrics:e={},gexData:n={}})=>{var ae,Se,Ce;const r=xg(),[i,o]=A.useState("5m"),[s,l]=A.useState("all"),[d,c]=A.useState(!1),[p,h]=A.useState(null),[m,u]=A.useState(null),[z,S]=A.useState(!1),[k,y]=A.useState(1),[a,g]=A.useState(1),[v,f]=A.useState(1),{isMobile:T,isTablet:j}=_i(),b=e.current_price||0,_=(()=>{const U={buy:0,sell:0,delta:0,prev_buy:0,prev_sell:0,prev_delta:0};switch(i){case"5m":return{...U,...e.volume_5m};case"15m":return{...U,...e.volume_15m};case"30m":return{...U,...e.volume_30m};case"1h":return{...U,...e.volume_1h};default:return{buy:e.buy_volume||0,sell:e.sell_volume||0,delta:e.cumulative_delta||0,prev_buy:0,prev_sell:0,prev_delta:0}}})(),D=_.history||[],W=()=>{const U=e.asset_class||n.asset_class||"GC";return{GC:2650,ES:5200,NQ:18500,BTC:95e3,"BTC-SPOT":93e3,CL:75}[U]||2650},G=b>0?b:W();A.useMemo(()=>{const U=G,ve=100,xe=[];let J=U,re=0;const Z=i==="5m"?300:i==="15m"?900:i==="30m"?1800:3600,ee=Math.floor(Date.now()/1e3),ue=Math.floor(ee/Z)*Z-ve*Z;let ye=Math.round(U)*100+12345;const de=()=>(ye=(ye*9301+49297)%233280,ye/233280),L=.1,Me=8;for(let Ke=0;Ke<ve;Ke++){const zt=(de()-.5)*L*2;J=U+zt+(de()-.5)*L*4;const Dt=de()>.45,bt=150+de()*100,Y=Dt?20+de()*60:-(20+de()*60),Q=Math.max(0,(bt+Y)/2),Re=Math.max(0,(bt-Y)/2),Ge=L*Me/2,ce=J+(de()-.5)*Ge,Be=J+(de()-.5)*Ge,it=Math.max(ce,Be)+de()*L*2,Je=Math.min(ce,Be)-de()*L*2;re+=Y,xe.push({ts:ue+Ke*Z,buy:Math.round(Q),sell:Math.round(Re),delta:Math.round(Y),price_open:ce,price_high:it,price_low:Je,price_close:Be,delta_open:re-Y,delta_high:re+Math.abs(Y)*.2,delta_low:re-Math.abs(Y)*.2,delta_close:re})}return xe},[Math.round(G/10)*10,i]);const _e=D,Fe=_.buy+_.sell||(_e.length>0?((ae=_e[_e.length-1])==null?void 0:ae.buy)+((Se=_e[_e.length-1])==null?void 0:Se.sell):0);(_.prev_buy||0)+(_.prev_sell||0);const I=(U,ve)=>ve===0?null:((U-ve)/ve*100).toFixed(1);i!=="session"&&I(_.buy,_.prev_buy),i!=="session"&&I(_.sell,_.prev_sell);const ze=(U,ve=5)=>!U||U<=0||!b||b<=0?!1:Math.abs(U-b)<=ve,tt=(U,ve,xe=5)=>ze(U,xe)?{color:"#ffffff",textShadow:"0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(255,255,255,0.5)",fontWeight:700}:{color:ve},se=[n.pd_high>0&&{price:n.pd_high,name:"PD High",color:"#ff4466"},d&&n.hvl>0&&{price:n.hvl,name:"HVL",color:"#00aaff"},e.ib_high>0&&{price:e.ib_high,name:"IB High",color:"#ffaa00"},d&&{price:b+50,name:"R3",color:"#ff6b6b"},d&&{price:b+30,name:"R2",color:"#ff8c8c"},d&&{price:b+15,name:"R1",color:"#ffaaaa"},d&&n.zero_gamma>0&&{price:n.zero_gamma,name:"Zero Gamma",color:"#00ff88"},e.vwap>0&&{price:e.vwap,name:"VWAP",color:"#00ddff"},e.ib_low>0&&{price:e.ib_low,name:"IB Low",color:"#00ff88"},d&&{price:b-15,name:"S1",color:"#88ff88"},d&&{price:b-30,name:"S2",color:"#66dd66"},d&&{price:b-50,name:"S3",color:"#44bb44"},n.pdpoc>0&&{price:n.pdpoc,name:"pdPOC",color:"#ffaa00"},n.pd_low>0&&{price:n.pd_low,name:"PD Low",color:"#00ff88"}].filter(Boolean).sort((U,ve)=>ve.price-U.price),me=se.filter(U=>U.price>b).slice(-10),w=se.filter(U=>U.price<=b).slice(0,10),x=Fe>0?(_.buy/Fe*100).toFixed(1):50,R=Fe>0?(_.sell/Fe*100).toFixed(1):50,M={session:"Session","5m":"5 Min","15m":"15 Min","30m":"30 Min","1h":"1 Hour"},ie=({level:U,position:ve})=>{const xe=Math.abs(U.price-b).toFixed(2),J=Math.abs(U.price-b)<20;return t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",background:J?`${U.color}15`:"transparent",borderLeft:`3px solid ${U.color}`,marginBottom:2,transition:"all 0.3s ease",opacity:J?1:.7,flexWrap:"nowrap",whiteSpace:"nowrap"},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,minWidth:90,flex:"0 0 auto"},children:t.jsx("span",{style:{color:U.color,fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:1},children:U.name})}),t.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:700,color:U.color,textShadow:J?`0 0 10px ${U.color}`:"none",minWidth:110,textAlign:"right",flex:"0 0 auto"},children:["$",U.price.toFixed(2)]}),t.jsxs("div",{style:{fontSize:11,color:"#666",minWidth:90,textAlign:"right",flex:"0 0 auto"},children:[ve==="above"?"":""," $",xe]})]})};return t.jsxs("div",{style:{padding:T?12:24},children:[t.jsxs("div",{style:{display:"flex",flexDirection:T?"column":"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:T?16:24,gap:T?12:0},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{color:"#fff",marginBottom:8,display:"flex",alignItems:"center",gap:12,fontSize:T?18:24},children:T?"Price Ladder":" Price Ladder"}),t.jsx("p",{style:{color:"#888",fontSize:T?11:13},children:"Live price with reference levels  Updates in real-time"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:T?8:12,background:"rgba(255,255,255,0.05)",padding:T?"6px 12px":"8px 16px",borderRadius:8,border:"1px solid rgba(255,255,255,0.1)"},children:[t.jsx("span",{style:{color:"#888",fontSize:T?10:12},children:"Gamma Levels"}),t.jsx("button",{onClick:()=>c(!d),style:{width:T?40:48,height:T?20:24,borderRadius:12,border:"none",background:d?"#00ff88":"rgba(255,255,255,0.2)",cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:t.jsx("div",{style:{width:T?14:18,height:T?14:18,borderRadius:"50%",background:"#fff",position:"absolute",top:3,left:d?T?23:27:3,transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})]}),t.jsxs("div",{style:{display:T?"flex":"grid",flexDirection:T?"column":void 0,gridTemplateColumns:T?void 0:j?"1fr":"340px 1fr",gap:T?12:20,maxWidth:1400,margin:"0 auto"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[t.jsxs("div",{style:{background:"rgba(0,170,255,0.08)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:8,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:8,letterSpacing:1},children:"SESSION"}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",fontFamily:"'JetBrains Mono', monospace"},children:n.current_session_name||"Loading..."})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsxs("div",{style:{color:"#555",fontSize:9},children:[n.current_session_start," - ",n.current_session_end]}),t.jsx("div",{style:{color:"#666",fontSize:8},children:"ET"})]})]}),t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20,20,30,0.95) 0%, rgba(10,10,15,0.98) 100%)",border:"2px solid rgba(255,255,255,0.1)",borderRadius:16,overflow:"hidden",flex:1},children:[t.jsx("div",{style:{maxHeight:200,overflowY:"auto",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:me.map((U,ve)=>t.jsx(ie,{level:U,position:"above"},ve))}),t.jsxs("div",{style:{padding:"16px 12px",background:"linear-gradient(180deg, rgba(0,170,255,0.2) 0%, rgba(0,100,200,0.1) 100%)",borderTop:"2px solid #00aaff",borderBottom:"2px solid #00aaff",textAlign:"center"},children:[t.jsx("div",{style:{color:"#888",fontSize:9,letterSpacing:2,marginBottom:4},children:"CURRENT PRICE"}),t.jsxs("div",{style:{fontSize:36,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",textShadow:"0 0 30px rgba(0,170,255,0.5)"},children:["$",b.toFixed(2)]}),t.jsxs("div",{style:{marginTop:4,fontSize:11,color:e.cumulative_delta>=0?"#00ff88":"#ff4466",fontWeight:600},children:[e.cumulative_delta>=0?"":""," Delta: ",((Ce=e.cumulative_delta)==null?void 0:Ce.toLocaleString())||0]})]}),t.jsx("div",{style:{maxHeight:200,overflowY:"auto",borderTop:"1px solid rgba(255,255,255,0.1)"},children:w.map((U,ve)=>t.jsx(ie,{level:U,position:"below"},ve))})]})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,minWidth:0,overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",gap:4},children:["5m","15m","30m","1h"].map(U=>t.jsx("button",{onClick:()=>o(U),style:{padding:"6px 12px",borderRadius:6,border:"none",background:i===U?"#00ff88":"rgba(255,255,255,0.1)",color:i===U?"#000":"#888",fontSize:10,fontWeight:600,cursor:"pointer"},children:M[U]},U))}),t.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(0,255,136,0.1)",padding:"4px 10px",borderRadius:6},children:[t.jsx("span",{style:{color:"#666",fontSize:8},children:"BUY"}),t.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",fontFamily:"monospace"},children:_.buy>999?`${(_.buy/1e3).toFixed(1)}k`:_.buy}),t.jsxs("span",{style:{fontSize:9,color:"#00ff88",opacity:.7},children:[x,"%"]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[t.jsx("span",{style:{color:"#666",fontSize:8},children:"SELL"}),t.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#ff4466",fontFamily:"monospace"},children:_.sell>999?`${(_.sell/1e3).toFixed(1)}k`:_.sell}),t.jsxs("span",{style:{fontSize:9,color:"#ff4466",opacity:.7},children:[R,"%"]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:_.delta>=0?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[t.jsx("span",{style:{color:"#666",fontSize:8},children:"DELTA"}),t.jsxs("span",{style:{fontSize:12,fontWeight:700,color:_.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[_.delta>=0?"+":"",Math.abs(_.delta)>999?`${(_.delta/1e3).toFixed(1)}k`:_.delta]}),t.jsx("span",{style:{fontSize:9,color:_.delta>=0?"#00ff88":"#ff4466",opacity:.7},children:Fe>0?`${(_.delta/Fe*100).toFixed(0)}%`:"0%"})]})]})]}),(()=>{const U=Math.min(200,Math.round(100/a)),ve=[..._e].slice(-U),xe=_e.length>0?_e[_e.length-1]:null,J={price_open:_.price_open||(xe==null?void 0:xe.price_open)||b,price_high:_.price_high||(xe==null?void 0:xe.price_high)||b,price_low:_.price_low||(xe==null?void 0:xe.price_low)||b,price_close:b||(xe==null?void 0:xe.price_close)||0,buy:_.buy||(xe==null?void 0:xe.buy)||100,sell:_.sell||(xe==null?void 0:xe.sell)||80,delta:_.delta||(xe==null?void 0:xe.delta)||20,volume:Fe||(xe?xe.buy+xe.sell:180)},re=[...ve,J],Z=re.slice(-10),ee=()=>{if(Z.length<3)return{exhaustion:!1,absorption:!1,deltaTrend:"neutral",volTrend:"neutral"};const ce=Z.slice(-3),Be=ce.map(We=>We.delta||0),it=ce.map(We=>(We.buy||0)+(We.sell||0)),Je=ce.map(We=>We.price_close||0),Lt=Be[2]>Be[1]&&Be[1]>Be[0]?"increasing":Be[2]<Be[1]&&Be[1]<Be[0]?"decreasing":"neutral",lt=it[2]>it[1]?"increasing":it[2]<it[1]?"decreasing":"neutral",yn=Be.reduce((We,Qt)=>We+Qt,0)/3,nn=yn<0&&lt==="decreasing"&&Math.abs(Be[2])<Math.abs(Be[0]),Bn=Je[2]>=Je[0]-2,X=yn<-10&&Bn&&it[2]>50;return{exhaustion:nn,absorption:X,deltaTrend:Lt,volTrend:lt,avgDelta:yn}},ue=()=>{if(Z.length<5)return{microRange:null,initiation:!1,vRecovery:!1};const ce=Z.slice(-5),Be=ce.map(We=>We.price_high||We.price_close||0),it=ce.map(We=>We.price_low||We.price_close||0),Je=Math.max(...Be),Lt=Math.min(...it),lt=Je-Lt,yn=ce.reduce((We,Qt)=>We+(Qt.price_close||0),0)/5,nn=lt<yn*.005,Bn=J.price_close>Je&&nn,Kn=ce.slice(-3).map(We=>We.delta||0),X=Kn[0]<-50&&Kn[2]>50;return{microRange:nn?{high:Je,low:Lt}:null,initiation:Bn,vRecovery:X,rangeSize:lt}},ye=()=>{if(Z.length<3)return{pocMigration:"neutral",imbalances:0,bullishClose:!1};const ce=Z.slice(-3),Be=ce.map(lt=>((lt.price_high||lt.price_close)+(lt.price_low||lt.price_close))/2),it=Be[2]>Be[1]&&Be[1]>Be[0]?"up":Be[2]<Be[1]&&Be[1]<Be[0]?"down":"neutral",Je=ce.filter(lt=>(lt.buy||0)>(lt.sell||0)*1.5).length,Lt=J.price_close>Be[1]&&J.delta>0;return{pocMigration:it,imbalances:Je,bullishClose:Lt,pocs:Be}},de=ee(),L=ue(),Me=ye(),zt=Me.pocMigration==="up"&&Me.imbalances>=2&&Me.bullishClose?"C":L.initiation||L.vRecovery?"B":de.exhaustion||de.absorption?"A":"-",Dt=Math.min(100,Math.max(0,50+(de.avgDelta||0)/5+(Me.pocMigration==="up"?20:Me.pocMigration==="down"?-20:0)+Me.imbalances*10)),Y=Math.min(U,Math.round(50/a)),Q=re.slice(-Y),Re=Q.map((ce,Be)=>({...ce,isEmpty:!1,isCurrent:Be===Q.length-1})),Ge=Re.filter(ce=>!ce.isEmpty&&ce.price_close>0);return Ge.length>0&&Math.max(...Ge.map(ce=>ce.price_high||ce.price_close)),Ge.length>0&&Math.min(...Ge.map(ce=>ce.price_low||ce.price_close)),Math.max(...Ge.map(ce=>Math.abs(ce.delta||0)),1),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginTop:8},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{color:"#888",fontSize:11,fontWeight:600,letterSpacing:1},children:"EXECUTION ANALYSIS"}),t.jsxs("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:zt==="C"?"rgba(0,255,136,0.2)":zt==="B"?"rgba(255,170,0,0.2)":zt==="A"?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",color:zt==="C"?"#00ff88":zt==="B"?"#ffaa00":zt==="A"?"#00aaff":"#666",border:`1px solid ${zt==="C"?"#00ff8850":zt==="B"?"#ffaa0050":zt==="A"?"#00aaff50":"#ffffff20"}`},children:["PHASE ",zt]})]}),t.jsx("div",{style:{fontSize:9,color:"#666"},children:M[i]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:6,marginBottom:12},children:[t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"MOMENTUM"}),t.jsx("div",{style:{fontSize:16,fontWeight:700,color:Dt>60?"#00ff88":Dt<40?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:Dt.toFixed(0)}),t.jsx("div",{style:{height:3,background:"rgba(255,255,255,0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:t.jsx("div",{style:{width:`${Dt}%`,height:"100%",background:Dt>60?"#00ff88":Dt<40?"#ff4466":"#ffaa00",transition:"width 0.3s"}})})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"DELTA"}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:de.deltaTrend==="increasing"?"#00ff88":de.deltaTrend==="decreasing"?"#ff4466":"#888"},children:de.deltaTrend==="increasing"?" UP":de.deltaTrend==="decreasing"?" DN":" FLAT"})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VOLUME"}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:de.volTrend==="increasing"?"#00aaff":de.volTrend==="decreasing"?"#ff8800":"#888"},children:de.volTrend==="increasing"?" UP":de.volTrend==="decreasing"?" DN":" FLAT"})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"POC"}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:Me.pocMigration==="up"?"#00ff88":Me.pocMigration==="down"?"#ff4466":"#888"},children:Me.pocMigration==="up"?" UP":Me.pocMigration==="down"?" DN":" FLAT"})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IMBAL"}),t.jsxs("div",{style:{fontSize:16,fontWeight:700,color:Me.imbalances>=2?"#00ff88":Me.imbalances===1?"#ffaa00":"#666",fontFamily:"monospace"},children:[Me.imbalances,"/3"]})]})]}),t.jsxs("div",{style:{display:"flex",gap:6,marginBottom:10,flexWrap:"wrap"},children:[de.exhaustion&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,170,255,0.2)",color:"#00aaff",border:"1px solid rgba(0,170,255,0.3)"},children:" EXHAUSTION"}),de.absorption&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(138,43,226,0.2)",color:"#a855f7",border:"1px solid rgba(138,43,226,0.3)"},children:" ABSORPTION"}),L.microRange&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.3)"},children:" MICRO RANGE"}),L.initiation&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" INITIATION"}),L.vRecovery&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" V-RECOVERY"}),Me.bullishClose&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" BULLISH CLOSE"}),!de.exhaustion&&!de.absorption&&!L.microRange&&!L.initiation&&!L.vRecovery&&!Me.bullishClose&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,255,255,0.05)",color:"#666",border:"1px solid rgba(255,255,255,0.1)"},children:"SCANNING..."})]}),(()=>{const ce=e.asset_class||"GC",Be=ce==="BTC-SPOT"?10:ce==="BTC"?5:ce==="ES"||ce==="NQ"?.25:.1,it=(ce.includes("BTC"),2),Je=Be*it,lt=Math.round((z?52:40)*a),yn=z?window.innerHeight-150:340,nn=55,Bn=Re.filter(je=>!je.isEmpty&&je.price_close>0),Kn=Bn.map(je=>je.price_high||je.price_close),X=Bn.map(je=>je.price_low||je.price_close),We=Kn.length>0?Math.max(...Kn):b+5,Qt=X.length>0?Math.min(...X):b-5,un=We-Qt,hn=(We+Qt)/2,Vt=un/k,Bt=Math.ceil((hn+Vt/2+Je*10)/Je)*Je,Sn=Math.floor((hn-Vt/2-Je*10)/Je)*Je,Dn=Re.length*lt,Mn=yn-10,Jn=je=>(Bt-je)/(Bt-Sn)*Mn,Qn=je=>je?new Date(je*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"America/New_York"}):"";return t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,20,0.99) 0%, rgba(8,8,14,1) 100%)",borderRadius:z?0:8,border:z?"none":"1px solid rgba(255,255,255,0.08)",position:z?"fixed":"relative",top:z?0:void 0,left:z?0:void 0,right:z?0:void 0,bottom:z?0:void 0,zIndex:z?9999:1,overflow:"hidden",width:z?"100vw":"100%",height:z?"100vh":void 0,maxWidth:"100%",boxSizing:"border-box"},children:[z&&t.jsx("button",{onClick:()=>S(!1),style:{position:"absolute",top:20,right:20,background:"rgba(255,100,100,0.5)",border:"1px solid rgba(255,100,100,0.7)",borderRadius:6,padding:"10px 20px",cursor:"pointer",fontSize:14,fontWeight:600,color:"#fff",zIndex:1e4},children:" Close Fullscreen"}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%"},children:[t.jsxs("div",{style:{display:"flex",maxWidth:"100%"},children:[t.jsx("div",{ref:je=>{je&&Dn>je.clientWidth&&(je.scrollLeft=Dn-je.clientWidth)},style:{flex:1,maxWidth:`calc(100% - ${nn}px)`,height:yn,overflow:"auto",position:"relative"},children:t.jsx("div",{style:{width:Math.max(Dn+80,400),height:yn-10,position:"relative",background:"rgba(8,8,14,1)",paddingRight:60},children:Re.map((je,gt)=>{if(je.isEmpty)return null;const pt=je.buy||0,dn=je.sell||0,gn=je.price_high||je.price_close||b+1,Zn=je.price_low||je.price_close||b-1,or=je.price_open||je.price_close||b,qn=je.price_close||b,er=qn>=or,H=Jn(gn),$e=Jn(Zn),Le=Jn(or),Ue=Jn(qn),Mt=Math.min(Le,Ue),qe=Math.max(Math.abs(Ue-Le),2),at=Math.max(gn-Zn,Je),mn=Math.max($e-H,20),rn=z?12:10,xt=Math.max(2,Math.floor(mn/rn)),zn=at/xt,cn=[],sr=(je.ts||gt)*9301+49297;for(let N=0;N<xt;N++){const K=gn-(N+.5)*zn,fe=Math.abs(K-qn)/(at||1),ke=Math.exp(-fe*2)*.6+.3,B=(sr+N*7919)%233280/233280,oe=B>.1?B>.7?1.8:B>.4?1.2:.8:0,pe=ke*oe,he=(K-Zn)/(at||1),ge=er?he>.5?1.3:.8:he<.5?1.3:.8,we=er?he<.5?1.3:.8:he>.5?1.3:.8,nt=Math.round(pt*pe*ge/xt),Ee=Math.round(dn*pe*we/xt);cn.push({price:K,sell:Ee,buy:nt})}const Ae=Math.max(...cn.map(N=>N.sell+N.buy),1),Pe=Math.max(...cn.map(N=>N.sell),1),yt=Math.max(...cn.map(N=>N.buy),1);cn.forEach(N=>N.isPOC=N.sell+N.buy===Ae&&Ae>0);const Rt=(N,K)=>{if(K)return{bg:"#ffffff",border:"2px solid #fff"};if(N===0)return{bg:"rgba(60,40,40,0.4)",border:"1px solid rgba(80,60,60,0.3)"};const fe=Math.min(1,N/Pe),ke=255,B=Math.round(255-fe*200),V=Math.round(255-fe*200);return{bg:`rgb(${ke},${B},${V})`,border:`1px solid rgba(255,${80+(1-fe)*120},${80+(1-fe)*120},0.8)`}},pn=(N,K)=>{if(K)return{bg:"#ffffff",border:"2px solid #fff"};if(N===0)return{bg:"rgba(40,50,45,0.4)",border:"1px solid rgba(60,80,70,0.3)"};const fe=Math.min(1,N/yt),ke=Math.round(255-fe*200),B=255,V=Math.round(255-fe*180);return{bg:`rgb(${ke},${B},${V})`,border:`1px solid rgba(${100+(1-fe)*100},255,${100+(1-fe)*100},0.8)`}},E=12,$=(lt-E)/2;return t.jsxs("div",{style:{position:"absolute",left:gt*lt,top:0,width:lt,height:Mn,borderRight:"1px solid rgba(40,40,50,0.5)"},children:[cn.map((N,K)=>{const fe=H+K*rn,ke=14,B=N.sell===0?ke:Math.max(ke,$*.3+$*.7*(N.sell/Pe)),V=N.buy===0?ke:Math.max(ke,$*.3+$*.7*(N.buy/yt)),oe=Rt(N.sell,N.isPOC),pe=pn(N.buy,N.isPOC),he=N.isPOC?"#000":"#8b0000",ge=N.isPOC?"#000":"#006400";return t.jsxs(Wr.Fragment,{children:[t.jsx("div",{style:{position:"absolute",left:$-B,top:fe,width:B,height:rn-1,background:oe.bg,border:oe.border,borderRadius:"2px 0 0 2px",boxShadow:N.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:2,fontSize:8,fontFamily:"monospace",color:N.sell===0?"#666":he,fontWeight:N.isPOC?700:600,textShadow:"none",overflow:"hidden"},children:z&&N.sell}),t.jsx("div",{style:{position:"absolute",left:$+E,top:fe,width:V,height:rn-1,background:pe.bg,border:pe.border,borderRadius:"0 2px 2px 0",boxShadow:N.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:2,fontSize:8,fontFamily:"monospace",color:N.buy===0?"#666":ge,fontWeight:N.isPOC?700:400,textShadow:N.isPOC||N.buy===0?"none":"0 0 2px rgba(0,0,0,0.8)",overflow:"hidden"},children:z&&N.buy})]},K)}),t.jsx("div",{style:{position:"absolute",left:$+E/2-1,top:H,width:2,height:Math.max($e-H,1),background:er?"rgba(0,255,200,0.6)":"rgba(255,0,150,0.6)",boxShadow:er?"0 0 3px rgba(0,255,255,0.5)":"0 0 3px rgba(255,0,150,0.5)"}}),t.jsx("div",{style:{position:"absolute",left:$+1,top:Mt,width:E-2,height:Math.max(qe,3),background:er?"rgba(100,255,200,0.7)":"rgba(255,100,150,0.7)",border:er?"1px solid rgba(0,255,255,0.9)":"1px solid rgba(255,0,150,0.9)",borderRadius:2,boxShadow:er?"0 0 4px rgba(0,255,255,0.6)":"0 0 4px rgba(255,0,150,0.6)"}}),gt===Re.length-1&&je.ts&&t.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Math.min($e+10,Mn-25),background:"#00cccc",border:"2px solid #00ffff",borderRadius:4,padding:"4px 12px",fontSize:12,fontWeight:700,color:"#000",whiteSpace:"nowrap",boxShadow:"0 0 15px rgba(0,255,255,0.9)",zIndex:500},children:Qn(je.ts)})]},gt)})})}),t.jsx("div",{style:{width:nn,height:yn,overflow:"hidden",borderLeft:"1px solid rgba(255,255,255,0.2)",background:"rgba(20,20,30,0.95)",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"4px 0",cursor:"ns-resize",userSelect:"none"},onMouseDown:je=>{const gt=je.clientY,pt=k,dn=Zn=>{const or=(gt-Zn.clientY)/100,qn=Math.max(.5,Math.min(5,pt+or));y(qn)},gn=()=>{document.removeEventListener("mousemove",dn),document.removeEventListener("mouseup",gn)};document.addEventListener("mousemove",dn),document.addEventListener("mouseup",gn)},onWheel:je=>{je.preventDefault();const gt=je.deltaY>0?-.1:.1;y(pt=>Math.max(.5,Math.min(5,pt+gt)))},children:[...Array(8)].map((je,gt)=>{const pt=Bt-gt*(Bt-Sn)/7;return t.jsx("div",{style:{fontSize:9,fontFamily:"monospace",color:"#aaa",paddingLeft:4,lineHeight:1},children:pt.toFixed(1)},gt)})})]}),t.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.4)",maxWidth:"100%",overflowX:"auto"},children:[t.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[t.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Re.map((je,gt)=>t.jsx("div",{style:{width:lt,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",color:"#777",padding:"2px 0"},children:je.isEmpty?"":(je.buy||0)+(je.sell||0)},gt))}),t.jsx("div",{style:{width:nn,flexShrink:0}})]}),t.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[t.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Re.map((je,gt)=>{const pt=je.delta||(je.buy||0)-(je.sell||0),dn=pt>=0;return t.jsx("div",{style:{width:lt,flexShrink:0,textAlign:"center",padding:"2px 1px"},children:!je.isEmpty&&t.jsxs("span",{style:{fontSize:8,fontFamily:"monospace",fontWeight:600,color:"#000",background:dn?"#40dd80":"#ff5555",padding:"1px 4px",borderRadius:2},children:[dn?"+":"",typeof pt=="number"?pt.toFixed(0):pt]})},gt)})}),t.jsx("div",{style:{width:nn,flexShrink:0}})]}),t.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[t.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Re.map((je,gt)=>{const pt=je.delta||(je.buy||0)-(je.sell||0),dn=(je.buy||0)+(je.sell||0),gn=dn>0?pt/dn*100:0;return t.jsx("div",{style:{width:lt,flexShrink:0,textAlign:"center",fontSize:7,fontFamily:"monospace",color:gn>=0?"#40dd80":"#ff5555",padding:"1px 0"},children:je.isEmpty?"":`${gn.toFixed(1)}%`},gt)})}),t.jsx("div",{style:{width:nn,flexShrink:0}})]}),t.jsxs("div",{style:{display:"flex",cursor:"ew-resize",userSelect:"none"},onMouseDown:je=>{const gt=je.clientX,pt=a,dn=Zn=>{const or=(gt-Zn.clientX)/100,qn=Math.max(.5,Math.min(3,pt+or));g(qn)},gn=()=>{document.removeEventListener("mousemove",dn),document.removeEventListener("mouseup",gn)};document.addEventListener("mousemove",dn),document.addEventListener("mouseup",gn)},onWheel:je=>{je.preventDefault();const gt=je.deltaY>0?-.1:.1;g(pt=>Math.max(.5,Math.min(3,pt+gt)))},children:[t.jsxs("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",position:"relative",paddingRight:60},children:[Re.map((je,gt)=>{const pt=gt===Re.length-1;return t.jsx("div",{style:{width:lt,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",padding:"3px 0"},children:je.isEmpty?"":t.jsx("span",{style:{color:pt?"#00ffff":"#555",fontWeight:pt?700:400,background:pt?"rgba(0,255,255,0.25)":"transparent",padding:pt?"2px 6px":0,borderRadius:pt?4:0,border:pt?"1px solid rgba(0,255,255,0.7)":"none",boxShadow:pt?"0 0 6px rgba(0,255,255,0.5)":"none"},children:Qn(je.ts)})},gt)}),Re.length>0&&!Re[Re.length-1].isEmpty&&t.jsxs("div",{style:{position:"absolute",right:0,top:-20,background:"rgba(0,255,255,0.3)",border:"1px solid rgba(0,255,255,0.8)",borderRadius:4,padding:"2px 8px",fontSize:9,fontWeight:700,color:"#00ffff",boxShadow:"0 0 8px rgba(0,255,255,0.5)",zIndex:100},children:["LIVE: ",Qn(Re[Re.length-1].ts)]})]}),t.jsx("div",{style:{width:nn,flexShrink:0}})]})]})]}),!z&&t.jsx("button",{onClick:()=>S(!0),style:{position:"absolute",top:8,right:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:10,color:"#888",zIndex:200},children:" Expand"})]})})()]})})()]})]}),t.jsxs("div",{style:{maxWidth:1400,margin:"12px auto 0",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10},children:[t.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"SESSION IB LEVELS"}),t.jsx("div",{style:{display:"flex",gap:8},children:[{name:"Japan",id:"japan_ib",color:"#9370DB"},{name:"London",id:"london",color:"#3B82F6"},{name:"US",id:"us_ib",color:"#F59E0B"},{name:"NY",id:"ny_1h",color:"#10B981"}].map((U,ve)=>{var J;const xe=((J=n.ended_sessions)==null?void 0:J[U.id])||{};return t.jsxs("div",{style:{flex:1,textAlign:"center",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"6px 4px"},children:[t.jsx("div",{style:{fontSize:10,color:U.color,fontWeight:700,marginBottom:6},children:U.name}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:6,marginBottom:3},children:[t.jsx("span",{style:{color:"#ff4466",fontSize:9,fontWeight:600},children:"H"}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:11,fontWeight:600,...tt(xe.high,"#ff4466")},children:(xe.high||0).toFixed(1)})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:6},children:[t.jsx("span",{style:{color:"#00ff88",fontSize:9,fontWeight:600},children:"L"}),t.jsx("span",{style:{fontFamily:"monospace",fontSize:11,fontWeight:600,...tt(xe.low,"#00ff88")},children:(xe.low||0).toFixed(1)})]})]},ve)})})]}),t.jsx("div",{style:{maxWidth:1400,margin:"12px auto 0"},children:(()=>{const U=[..._e].slice(-29),ve=35,xe=1,J=280;let re=0;const Z=U.map((X,We,Qt)=>{const un=X.delta??0,hn=re,Vt=re+un,Bt=(X.buy||0)+(X.sell||0),Sn=Bt>0?un/Bt*100:0,Dn=We>0&&Qt[We-1].delta||0,Mn=un-Dn,Jn=X.delta_high!==null&&X.delta_high!==void 0&&X.delta_high!==-999999,Qn=Math.max(5,Bt*.08);return re=Vt,{price_open:X.price_open||0,price_high:X.price_high||0,price_low:X.price_low||0,price_close:X.price_close||0,delta_open:hn,delta_high:Jn?hn+(X.delta_high-(X.delta_open??0)):Math.max(hn,Vt)+Qn*.3,delta_low:Jn?hn+(X.delta_low-(X.delta_open??0)):Math.min(hn,Vt)-Qn*.3,delta_close:Vt,delta:un,deltaPct:Sn,deltaChange:Mn,volume:Bt,ts:X.ts||0,isCurrent:!1,isEmpty:!1}});if(_.buy>0||_.sell>0||_.price_open>0){const X=_.delta??0,We=re,Qt=re+X,un=Fe>0?X/Fe*100:0,hn=U.length>0&&U[U.length-1].delta||0,Vt=X-hn;Z.push({price_open:_.price_open||0,price_high:_.price_high||b,price_low:_.price_low||b,price_close:b,delta_open:We,delta_high:We+((_.delta_high??X)-(_.delta_open??0)),delta_low:We+((_.delta_low??X)-(_.delta_open??0)),delta_close:Qt,delta:X,deltaPct:un,deltaChange:Vt,volume:Fe,ts:_.candle_start||Date.now()/1e3,isCurrent:!0,isEmpty:!1})}const ee=Math.max(0,ve-Z.length),ue={isEmpty:!0,price_open:0,delta:0,deltaPct:0,deltaChange:0,volume:0,ts:0},ye=[...Array(ee).fill(ue),...Z],de=ye.filter(X=>!X.isEmpty&&X.price_open>0),L=de.map(X=>X.price_high),Me=de.map(X=>X.price_low),Ke=L.length>0?Math.max(...L):0,zt=Me.length>0?Math.min(...Me):0,Dt=Ke-zt||1,bt=Ke+Dt*.1,Y=zt-Dt*.1,Q=bt-Y||1,Re=ye.filter(X=>!X.isEmpty),Ge=Re.map(X=>X.delta_high),ce=Re.map(X=>X.delta_low),Be=Ge.length>0?Math.max(...Ge):0,it=ce.length>0?Math.min(...ce):0,Je=Be-it||50,Lt=Be+Je*.15,lt=it-Je*.15,yn=Lt-lt||1;Math.max(...Re.map(X=>Math.abs(X.delta)),1);const nn=X=>(bt-X)/Q*J,Bn=X=>(Lt-X)/yn*J,Kn=X=>X?new Date(X*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",hour12:!1}):"";return t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,position:"relative"},children:[t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[t.jsx("div",{style:{color:"#888",fontSize:11,marginBottom:8,letterSpacing:1},children:"PRICE OHLC"}),t.jsx("div",{style:{display:"flex",gap:xe,height:J,overflow:"hidden",position:"relative"},children:ye.map((X,We)=>{if(X.isEmpty||X.price_open<=0)return t.jsx("div",{style:{flex:"1 1 0",minWidth:0}},We);const Qt=X.price_close>=X.price_open,un=nn(Math.max(X.price_open,X.price_close)),hn=Math.max(Math.abs(nn(X.price_open)-nn(X.price_close)),2),Vt=nn(X.price_high),Bt=nn(X.price_low)-Vt,Sn=Qt?"#00ff88":"#ff4466",Dn=X.isCurrent?1:.5+We/ye.length*.5,Mn=p===We;return t.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:J,opacity:Mn?1:Dn,cursor:"crosshair"},onMouseEnter:()=>h(We),onMouseLeave:()=>h(null),children:[Mn&&t.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),t.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Vt,width:1,height:Bt,background:Sn,opacity:.7}}),t.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:un,width:X.isCurrent?"90%":"70%",height:hn,background:Sn,borderRadius:1,border:X.isCurrent?"1px solid rgba(255,255,255,0.5)":"none",boxShadow:"none"}}),Mn&&X.ts&&!X.isCurrent&&t.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"2px 6px",fontSize:9,color:"#aaa",whiteSpace:"nowrap",pointerEvents:"none",zIndex:100},children:Kn(X.ts)}),X.isCurrent&&X.ts&&t.jsx("div",{style:{position:"absolute",bottom:-18,left:"50%",transform:"translateX(-50%)",background:"rgba(0,170,255,0.3)",border:"1px solid rgba(0,170,255,0.6)",borderRadius:3,padding:"1px 4px",fontSize:8,fontWeight:600,color:"#00aaff",whiteSpace:"nowrap",pointerEvents:"none",zIndex:50},children:Kn(X.ts)})]},We)})})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[t.jsx("div",{style:{color:"#888",fontSize:11,marginBottom:8,letterSpacing:1},children:"DELTA OHLC  DIVERGENCE GLOW"}),t.jsx("div",{style:{display:"flex",gap:xe,height:J,overflow:"hidden",position:"relative"},children:ye.map((X,We)=>{if(X.isEmpty)return t.jsx("div",{style:{flex:"1 1 0",minWidth:0}},We);const Qt=X.delta_open,un=X.delta_high,hn=X.delta_low,Vt=X.delta_close,Bt=X.price_open,Sn=X.price_close,Dn=Vt>=Qt,Mn=Sn>=Bt,Jn=Math.abs(Vt-Qt),Qn=(r==null?void 0:r.divergenceThreshold)||0,je=Bt>0&&Sn>0&&Dn!==Mn&&(Qn===0||Jn>=Qn),gt=Bn(un),pt=Bn(hn),dn=Bn(Qt),gn=Bn(Vt),Zn=Math.min(gt,pt),or=Math.abs(pt-gt)||1,qn=Math.min(dn,gn),er=Math.max(Math.abs(gn-dn),2),H=je?"#ffffff":Dn?"#00ff88":"#ff4466",$e=X.isCurrent?1:.5+We/ye.length*.5,Le=p===We;return t.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:J,opacity:Le?1:$e,cursor:"crosshair"},onMouseEnter:()=>h(We),onMouseLeave:()=>h(null),children:[Le&&t.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),t.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Zn,width:2,height:or,background:H,opacity:.7}}),t.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:qn,width:X.isCurrent?"90%":"70%",height:er,background:H,borderRadius:2,boxShadow:je?"0 0 10px rgba(255,255,255,0.9), 0 0 20px rgba(255,255,255,0.5)":`0 0 4px ${H}50`,border:X.isCurrent?"1px solid rgba(255,255,255,0.5)":"none"}})]},We)})})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[t.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"DELTA HISTORY"}),t.jsx("div",{style:{display:"flex",gap:xe,overflow:"hidden",width:"100%"},children:ye.map((X,We)=>{if(X.isEmpty)return t.jsx("div",{style:{flex:"1 1 0",minWidth:0}},We);const Qt=X.isCurrent?1:.5+We/ye.length*.5,un=X.delta>=0?"#00ff88":"#ff4466",hn=X.deltaChange>=0?"#00aaff":"#ffaa00",Vt=Sn=>Math.abs(Sn)>=1e3?`${(Sn/1e3).toFixed(1)}K`:Sn,Bt=p===We;return t.jsxs("div",{style:{flex:"1 1 0",minWidth:0,display:"flex",flexDirection:"column",alignItems:"center",opacity:Bt?1:Qt,background:Bt?"rgba(255,255,255,0.1)":X.isCurrent?"rgba(0,170,255,0.1)":"transparent",borderRadius:3,padding:"2px 1px",overflow:"hidden",transition:"background 0.15s, opacity 0.15s"},children:[t.jsx("div",{style:{fontSize:9,color:Bt?"#fff":"#888",fontFamily:"monospace",whiteSpace:"nowrap"},children:Vt(X.volume||0)}),t.jsxs("div",{style:{fontSize:10,color:un,fontFamily:"monospace",fontWeight:600,whiteSpace:"nowrap",filter:Bt?"brightness(1.3)":"none"},children:[X.deltaPct>=0?"+":"",X.deltaPct.toFixed(0),"%"]}),t.jsx("div",{style:{fontSize:9,color:un,fontFamily:"monospace",opacity:Bt?1:.85,whiteSpace:"nowrap",filter:Bt?"brightness(1.3)":"none"},children:Vt(X.delta)}),t.jsxs("div",{style:{fontSize:9,color:hn,fontFamily:"monospace",whiteSpace:"nowrap",filter:Bt?"brightness(1.3)":"none"},children:["",X.deltaChange>=0?"+":"",Vt(X.deltaChange)]})]},We)})})]})]})})()})]})},Cg=({selectedContract:e="ES"})=>{const[n,r]=A.useState("horizon"),[i,o]=A.useState(null),[s,l]=A.useState(!1),[d,c]=A.useState(null),[p,h]=A.useState(null),[m,u]=A.useState(null),[z,S]=A.useState({x:0,y:0}),[k,y]=A.useState("current"),[a,g]=A.useState(null),[v,f]=A.useState(null),{isMobile:T}=_i(),[j,b]=A.useState(!1),[O,_]=A.useState("japan_ib"),[D,W]=A.useState(10),[G,_e]=A.useState("long"),I=(()=>{const J=new Date,Z=(ye=>{const de=new Date(Date.UTC(ye.getFullYear(),ye.getMonth(),ye.getDate())),L=de.getUTCDay()||7;de.setUTCDate(de.getUTCDate()+4-L);const Me=new Date(Date.UTC(de.getUTCFullYear(),0,1));return Math.ceil(((de-Me)/864e5+1)/7)})(J),ee=J.getFullYear(),ue=[];for(let ye=5;ye>=1;ye--){let de=Z-ye,L=ee;de<=0&&(de=52+de,L=ee-1),ue.push({id:`w${ye}`,label:`W${de}`,weekNum:de,year:L})}return ue.push({id:"current",label:"Current",weekNum:Z,year:ee}),ue})(),ze=[{id:"pre_asia",name:"Pre Asia",start:"18:00",end:"19:00",color:"#4B5563",horizon:!1},{id:"japan_ib",name:"Japan",start:"19:00",end:"20:00",color:"#9370DB",horizon:!0},{id:"china",name:"China",start:"20:00",end:"23:00",color:"#F472B6",horizon:!0},{id:"asia_close",name:"Asia Close",start:"23:00",end:"02:00",color:"#4B5563",horizon:!1},{id:"deadzone",name:"Dead Zone",start:"02:00",end:"03:00",color:"#6B7280",horizon:!0},{id:"london",name:"London",start:"03:00",end:"06:00",color:"#3B82F6",horizon:!0},{id:"low_volume",name:"Low Vol",start:"06:00",end:"08:20",color:"#4B5563",horizon:!1},{id:"us_ib",name:"US IB",start:"08:20",end:"09:30",color:"#F59E0B",horizon:!0},{id:"ny_1h",name:"NY 1H",start:"09:30",end:"10:30",color:"#10B981",horizon:!0},{id:"ny_2h",name:"NY 2H",start:"10:30",end:"11:30",color:"#06B6D4",horizon:!0},{id:"lunch",name:"Lunch",start:"11:30",end:"13:30",color:"#8B5CF6",horizon:!0},{id:"ny_pm",name:"NY PM",start:"13:30",end:"16:00",color:"#EF4444",horizon:!0},{id:"ny_close",name:"NY Close",start:"16:00",end:"17:00",color:"#4B5563",horizon:!1},{id:"market_closed",name:"Market Closed",start:"17:00",end:"18:00",color:"#1F2937",horizon:!1}],tt=(n==="horizon"?ze.filter(J=>J.horizon):ze).filter(J=>J.id!=="market_closed"),me=(()=>{const J=new Date,re=J.getTime()+J.getTimezoneOffset()*6e4,Z=new Date(re-5*36e5),ee=Z.getHours(),ue=Z.getMinutes(),ye=ee*100+ue;return ye>=1900&&ye<2e3?"japan_ib":ye>=2e3&&ye<2300?"china":ye>=2300||ye<200?"asia_close":ye>=200&&ye<300?"deadzone":ye>=300&&ye<600?"london":ye>=600&&ye<820?"low_volume":ye>=820&&ye<930?"us_ib":ye>=930&&ye<1030?"ny_1h":ye>=1030&&ye<1130?"ny_2h":ye>=1130&&ye<1330?"lunch":ye>=1330&&ye<1600?"ny_pm":ye>=1600&&ye<1700?"ny_close":ye>=1700&&ye<1800?"market_closed":ye>=1800&&ye<1900?"pre_asia":null})(),w=["pre_asia","japan_ib","china","asia_close","deadzone","london","low_volume","us_ib","ny_1h","ny_2h","lunch","ny_pm","ny_close","market_closed"],x=J=>{if(J===me)return"NOW";const re=w.indexOf(me),Z=w.indexOf(J);return re===-1?"WAITING":Z<re?"ENDED":"WAITING"},M=(()=>{const J=new Date,re={timeZone:"America/New_York"},ee=new Intl.DateTimeFormat("en-US",{...re,weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}).formatToParts(J),ue=ee.find(Me=>Me.type==="weekday").value,ye=parseInt(ee.find(Me=>Me.type==="hour").value),de=parseInt(ee.find(Me=>Me.type==="minute").value),L=ye*100+de;return ue==="Saturday"?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:ue==="Sunday"&&L<1800?{closed:!0,isWeekend:!0,reopenDay:"Today",reopenTime:"18:00 ET"}:ue==="Friday"&&L>=1700?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:L>=1700&&L<1800?{closed:!0,isWeekend:!1,reopenTime:"18:00 ET"}:{closed:!1,isWeekend:!1}})(),[ie,ae]=A.useState(!0),[Se,Ce]=A.useState(null);A.useEffect(()=>{let J=!0;const re=async()=>{try{const ee=await fetch(en);if(ee.ok&&J){const ue=await ee.json();h({sessionHigh:ue.session_high||0,sessionLow:ue.session_low||0,sessionOpen:ue.session_open||0,currentPrice:ue.current_price||0,sessionId:ue.current_session_id,vwap:ue.vwap||0,dayOpen:ue.day_open||0,dayHigh:ue.day_high||0,dayLow:ue.day_low||0,totalVolume:ue.total_volume||0,sessionVolume:ue.session_volume||ue.total_volume||0,sessionDelta:ue.session_delta||ue.cumulative_delta||0,cumulativeDelta:ue.cumulative_delta||0,endedSessions:ue.ended_sessions||{}})}}catch(ee){console.error("Live data fetch error:",ee)}};re();const Z=setInterval(re,2e3);return()=>{J=!1,clearInterval(Z)}},[]),A.useEffect(()=>{let J=!0,re=null;const Z=async()=>{if(J){ae(!0),Ce(null);try{const ee=await fetch(`${en}/session-history`);if(!ee.ok)throw new Error(`HTTP ${ee.status}: ${ee.statusText}`);const ue=await ee.json();if(ue.loading){re=setTimeout(()=>{J&&Z()},2e3);return}const ye={japan_ib:"japan_ib",china:"china",london:"london",us_ib:"us_ib",ny_1h:"ny_1h"},de={};ze.forEach(L=>{const Me=ue[L.id];if(Me)de[L.id]={todayRange:Me.todayRange||0,pDR:Me.pDR||0,avgRange:Me.avgRange||0,cW:Me.cW||0,pW:Me.pW||0,CM:Me.CM||0,PM:Me.PM||0,max:Me.max||0,min:Me.min||0};else{let Ke=L.id.split("").reduce((Re,Ge)=>Re+Ge.charCodeAt(0),0);const zt=()=>(Ke=(Ke*9301+49297)%233280,Ke/233280),Dt=L.horizon?5+zt()*10:3+zt()*5,bt=Array.from({length:40},()=>Dt*(.8+zt()*.4)),Y=Re=>Re.length>0?Re.reduce((Ge,ce)=>Ge+ce,0)/Re.length:0,Q=bt.slice(1,11);de[L.id]={todayRange:bt[0]||0,pDR:bt[1]||0,avgRange:Y(Q),cW:Y(bt.slice(0,5)),pW:Y(bt.slice(5,10))||0,CM:Y(bt.slice(0,20)),PM:Y(bt.slice(20,40))||0,max:Q.length>0?Math.max(...Q):0,min:Q.length>0?Math.min(...Q):0}}}),o(de)}catch(ee){console.error("Failed to fetch session history:",ee),Ce(ee.message)}finally{ae(!1)}}};return Z(),()=>{J=!1,re&&clearTimeout(re)}},[]);const U=J=>`horizon_sessions_${e}_${J}`,ve=J=>{try{const re=localStorage.getItem(U(J));if(re){const{data:Z,timestamp:ee}=JSON.parse(re),ue=J==="current"?3e5:36e5;if(Date.now()-ee<ue)return Z}}catch{}return null},xe=(J,re)=>{try{localStorage.setItem(U(J),JSON.stringify({data:re,timestamp:Date.now()}))}catch{}};return A.useEffect(()=>{const J=async()=>{const Z=ve(k);Z&&c(Z);try{const ee=await fetch(`${en}/historical-sessions?week=${k}&stock=${e}`);if(ee.ok){const ue=await ee.json();ue.days&&!ue.loading&&(c(ue.days),xe(k,ue.days))}}catch(ee){console.error("Failed to fetch historical sessions:",ee)}};J();const re=setInterval(J,k==="current"?3e5:36e5);return()=>clearInterval(re)},[k,e]),ie?t.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[t.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading session history from Databento..."]}):Se?t.jsxs("div",{style:{padding:40,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:24,marginBottom:8,color:"#ff4466"},children:""}),t.jsx("div",{style:{color:"#ff4466",marginBottom:8},children:"Failed to load session data"}),t.jsx("div",{style:{color:"#666",fontSize:12},children:Se})]}):i?t.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:T?12:0},children:[t.jsxs("div",{style:{display:"flex",flexDirection:T?"column":"row",justifyContent:"space-between",alignItems:T?"flex-start":"center",marginBottom:T?16:24,gap:T?12:16},children:[t.jsxs("div",{children:[t.jsx("h2",{style:{margin:0,color:"#fff",fontSize:T?16:20},children:T?"Session Analysis":" Session Analysis"}),t.jsx("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:T?11:13},children:"Historical Session Range Analysis  Range = High - Low"})]}),t.jsx("div",{style:{display:"flex",gap:T?8:12,alignItems:"center",flexWrap:"wrap"},children:t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("button",{onClick:()=>r("horizon"),style:{padding:T?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="horizon"?"#8B5CF6":"rgba(255,255,255,0.1)",color:n==="horizon"?"#fff":"#888",fontSize:T?10:11,fontWeight:600,cursor:"pointer"},children:"Horizon"}),t.jsx("button",{onClick:()=>r("universe"),style:{padding:T?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="universe"?"#3B82F6":"rgba(255,255,255,0.1)",color:n==="universe"?"#fff":"#888",fontSize:T?10:11,fontWeight:600,cursor:"pointer"},children:"Universe"})]})})]}),M.closed&&t.jsxs("div",{style:{background:M.isWeekend?"linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)":"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:M.isWeekend?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,padding:"16px 24px",marginBottom:20,display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[t.jsx("span",{style:{fontSize:20},children:M.isWeekend?"":""}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{color:M.isWeekend?"#A78BFA":"#00ff88",fontSize:14,fontWeight:700,letterSpacing:1,textTransform:"uppercase"},children:M.isWeekend?"Weekend":"Market Closed"}),t.jsx("div",{style:{color:"#888",fontSize:12,marginTop:4},children:M.isWeekend?`Market Reopens ${M.reopenDay} ${M.reopenTime}`:`Reopens ${M.reopenTime}`})]})]}),(()=>{var Mn,Jn,Qn,je,gt,pt,dn,gn,Zn,or,qn,er;let J=0,re=1/0,Z=null,ee=null,ue=null,ye=null;const de=new Set(tt.map(H=>H.id));d&&d.length>0&&d.forEach(H=>{Object.entries(H.sessions||{}).forEach(([$e,Le])=>{de.has($e)&&Le&&Le.h>0&&(Le.h>J&&(J=Le.h,Z=H.date,ee=$e),Le.l>0&&Le.l<re&&(re=Le.l,ue=H.date,ye=$e))})});const L=(()=>{const H=new Date;return`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`})(),Me=M.closed&&d&&d.length>0,Ke=Me?d[0]:null,zt=Ke?Object.fromEntries(Object.entries(Ke.sessions||{}).map(([H,$e])=>[H,{open:$e.o,high:$e.h,low:$e.l,close:$e.c,volume:$e.v||0,delta:$e.d||0}])):{},Dt=Me?zt:(p==null?void 0:p.endedSessions)||{},bt=Me?((Mn=Ke==null?void 0:Ke.day)==null?void 0:Mn.c)||0:(p==null?void 0:p.currentPrice)||0,Y=Me?((Jn=Ke==null?void 0:Ke.day)==null?void 0:Jn.o)||0:(p==null?void 0:p.dayOpen)||0,Q=Me?((Qn=Ke==null?void 0:Ke.day)==null?void 0:Qn.h)||0:(p==null?void 0:p.dayHigh)||0,Re=Me?((je=Ke==null?void 0:Ke.day)==null?void 0:je.l)||0:(p==null?void 0:p.dayLow)||0,Ge=Me?((gt=Ke==null?void 0:Ke.day)==null?void 0:gt.v)||0:(p==null?void 0:p.totalVolume)||0,ce=Me?((pt=Ke==null?void 0:Ke.day)==null?void 0:pt.d)||0:(p==null?void 0:p.cumulativeDelta)||0,it=Me?(Ke==null?void 0:Ke.label)||"Friday":(()=>{const H=new Date,$e=String(H.getMonth()+1).padStart(2,"0"),Le=String(H.getDate()).padStart(2,"0");return`${$e}-${Le} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][H.getDay()]}`})(),Je=tt.map(H=>{const $e=x(H.id),Le=Dt[H.id]||{},Ue=$e==="NOW",Mt=i[H.id]||{},qe=Ue?(p==null?void 0:p.sessionOpen)||0:Le.open||0,at=Ue?(p==null?void 0:p.sessionHigh)||0:Le.high||0,mn=Ue?(p==null?void 0:p.sessionLow)||0:Le.low||0,rn=Ue?bt:Le.close||0,xt=Ue?(p==null?void 0:p.sessionVolume)||0:Le.volume||0,zn=Ue?(p==null?void 0:p.sessionDelta)||0:Le.delta||0,cn=at>0&&mn>0?at-mn:0,sr=xt>0?zn/xt*100:0;return{...H,status:$e,open:qe,high:at,low:mn,close:rn,volume:xt,delta:zn,deltaPct:sr,range:cn,hasData:at>0||Ue,pdr:Mt.pDR||0,avg10d:Mt.avgRange||0,cW:Mt.cW||0,pW:Mt.pW||0,cM:Mt.CM||0,pM:Mt.PM||0,max:Mt.max||0,min:Mt.min||0,todayRange:Mt.todayRange||0}});k==="current"&&Je.forEach(H=>{H.high>0&&(H.high>J&&(J=H.high,Z=L,ee=H.id),H.low>0&&H.low<re&&(re=H.low,ue=L,ye=H.id))});const Lt=H=>{const $e=Object.values(i||{}).map(Le=>Le[H]||0).filter(Le=>Le>0);return $e.length>0?$e.reduce((Le,Ue)=>Le+Ue,0)/$e.length:0},lt=bt>0?bt:((dn=Dt.ny_close)==null?void 0:dn.close)||((gn=Dt.ny_pm)==null?void 0:gn.close)||Q,yn={id:"1d",name:"1D",color:"#FFFFFF",open:Y,high:Q,low:Re,close:lt,volume:Ge,delta:ce,deltaPct:Ge>0?ce/Ge*100:0,range:Q>0&&Re>0?Q-Re:0,hasData:Y>0,pdr:Lt("pDR"),avg10d:Lt("avgRange"),cW:Lt("cW"),pW:Lt("pW"),cM:Lt("CM"),pM:Lt("PM"),max:Lt("max"),min:Lt("min")},nn=[yn.low,...Je.filter(H=>H.hasData).map(H=>H.low)].filter(H=>H>0),Bn=[yn.high,...Je.filter(H=>H.hasData).map(H=>H.high)].filter(H=>H>0),Kn=nn.length>0?Math.min(...nn):0,X=Bn.length>0?Math.max(...Bn):0,We=X-Kn||1,Qt=Kn-We*.08,un=X+We*.08,hn=un-Qt,Vt=180,Bt=[yn,...Je],Sn=138,Dn=(H,$e,Le=!1,Ue=null,Mt=null,qe=null)=>{let at=Qt,mn=un,rn=hn;const xt=Le?Vt:Sn;if(!Le&&H){const Pe=H.day,yt=Object.values(H.sessions||{}).filter(E=>E&&E.h>0),Rt=yt.map(E=>E.h),pn=yt.map(E=>E.l);if((Pe==null?void 0:Pe.h)>0&&(Rt.push(Pe.h),pn.push(Pe.l)),Rt.length>0){const E=Math.max(...Rt),$=Math.min(...pn),N=E-$||1;at=$-N*.08,mn=E+N*.08,rn=mn-at}}const zn=Le?Bt:(()=>{if(!H)return[];const Pe=H.day||{},yt={id:"1d",name:"1D",color:"#FFFFFF",open:Pe.o||0,high:Pe.h||0,low:Pe.l||0,close:Pe.c||0,hasData:Pe.h>0},Rt=tt.map(pn=>{var $;const E=(($=H.sessions)==null?void 0:$[pn.id])||{};return{...pn,open:E.o||0,high:E.h||0,low:E.l||0,close:E.c||0,hasData:E.h>0}});return[yt,...Rt]})(),cn=zn.slice(1).filter(Pe=>Pe.hasData&&Pe.high>0);let sr=null,Ae=null;if(cn.length>0){const Pe=Math.max(...cn.map(E=>E.high)),yt=Math.min(...cn.map(E=>E.low)),Rt=cn.find(E=>E.high===Pe),pn=cn.find(E=>E.low===yt);Rt&&(sr=Rt.id),pn&&(Ae=pn.id)}return t.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"8px 12px",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",background:Le?"rgba(0,255,136,0.02)":"rgba(255,255,255,0.02)",overflow:"hidden"},children:[t.jsx("div",{style:{width:70,minWidth:70,padding:"8px 12px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRight:"1px solid rgba(255,255,255,0.05)",background:Le&&M.closed?"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)":Le?"rgba(0, 255, 136, 0.05)":"transparent"},children:Le&&M.closed?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:16,marginBottom:4},children:""}),t.jsx("div",{style:{color:"#A78BFA",fontSize:11,fontWeight:700,letterSpacing:.5},children:$e}),t.jsx("div",{style:{color:"#666",fontSize:9,marginTop:2},children:"(Closed)"})]}):Le?t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{color:"#00ff88",fontSize:12,fontWeight:600,lineHeight:1.2},children:$e.split(" ")[0]}),t.jsxs("div",{style:{color:"#00ff88",fontSize:10,fontWeight:500,marginTop:2,display:"flex",alignItems:"center",gap:4},children:[$e.split(" ")[1]||"",t.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 6px rgba(0, 255, 136, 0.6)"}})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{color:"#A78BFA",fontSize:12,fontWeight:600,lineHeight:1.2},children:$e.split(" ")[0]}),t.jsx("div",{style:{color:"#8B7FC7",fontSize:10,fontWeight:500,marginTop:2},children:$e.split(" ")[1]||""})]})}),t.jsx("div",{style:{flex:1,display:"flex",height:xt,position:"relative"},children:zn.map((Pe,yt)=>{const Rt=yt===0,pn=`${$e}-${Pe.id||Pe.name}`,E=!Rt&&Pe.id===sr,$=!Rt&&Pe.id===Ae,N=!Rt&&Mt&&Mt.dayDate===Ue&&Mt.sessionId===Pe.id,K=!Rt&&qe&&qe.dayDate===Ue&&qe.sessionId===Pe.id,fe=Rt?"rgba(255,255,255,0.02)":`${Pe.color}06`;return t.jsxs("div",{style:{flex:Rt?"0 0 8%":1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:E||N?14:0,paddingBottom:$||K?14:0,background:fe,borderLeft:yt>0?"1px solid rgba(255,255,255,0.02)":"none"},onMouseEnter:ke=>{if(Pe.hasData&&Pe.high>0){u({...Pe,label:`${$e} - ${Pe.name||"1D"}`,isHOD:E,isLOD:$,isHOW:N,isLOW:K});const B=ke.currentTarget.getBoundingClientRect();S({x:B.left+B.width/2,y:B.top})}},onMouseLeave:()=>u(null),children:[E&&!N&&t.jsx("div",{style:{position:"absolute",top:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #10B981"}}),$&&!K&&t.jsx("div",{style:{position:"absolute",bottom:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #EF4444"}}),N&&t.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 4px #00ff88)"}}),K&&t.jsx("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 4px #ff4466)"}}),Pe.hasData&&Pe.high>0&&(()=>{const ke=Pe.close>=Pe.open,B=ke?"#00ff88":"#ff4466",V=ke?"#00ff88":"#ff4466",oe=1.5,pe=7,he=2,ge=1,we=xt-(Pe.high-at)/rn*xt,nt=xt-(Pe.low-at)/rn*xt,Ee=xt-(Pe.open-at)/rn*xt,be=xt-(Pe.close-at)/rn*xt;return t.jsxs("svg",{width:"100%",height:xt,viewBox:`0 0 40 ${xt}`,preserveAspectRatio:"xMidYMid meet",style:{overflow:"visible",cursor:"pointer"},children:[t.jsx("line",{x1:"20",y1:Math.max(2,we),x2:"20",y2:Math.min(xt-2,nt),stroke:N?"#00ff88":K?"#ff4466":B,strokeWidth:oe,strokeLinecap:"butt",style:{filter:`drop-shadow(0 0 2px ${B}60)`}}),t.jsx("rect",{x:20-ge-pe,y:Math.max(0,Math.min(xt-he,Ee-he/2)),width:pe,height:he,fill:"#FFFFFF",style:{opacity:.9}}),t.jsx("rect",{x:20+ge,y:Math.max(0,Math.min(xt-he,be-he/2)),width:pe,height:he,fill:V,style:{filter:`drop-shadow(0 0 2px ${V}60)`}})]})})()]},pn)})})]})};return t.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 8px 32px rgba(0,0,0,0.6)",position:"relative",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden"},children:[t.jsx("div",{style:{position:"sticky",top:0,zIndex:20,background:"linear-gradient(180deg, rgba(12,12,16,1) 0%, rgba(12,12,16,0.98) 100%)",padding:"12px 12px 8px 12px",borderBottom:"1px solid rgba(255,255,255,0.06)",borderTopLeftRadius:16,borderTopRightRadius:16},children:t.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"0 12px",borderRadius:12},children:[t.jsx("div",{style:{width:70,minWidth:70}}),t.jsx("div",{style:{flex:1,display:"flex",position:"relative"},children:Bt.map((H,$e)=>{var xt,zn;const Le=$e===0,Ue=H.status==="NOW",Mt=H.status==="WAITING",qe=Le?"#FFFFFF":H.color||"#FFFFFF",at=v===(H.id||$e),mn=(xt=H.name)!=null&&xt.includes(" ")?H.name.split(" "):[H.name],rn=mn.length>1;return t.jsx("div",{onMouseEnter:()=>f(H.id||$e),onMouseLeave:()=>f(null),style:{flex:Le?"0 0 8%":1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",position:"relative",cursor:"pointer",paddingBottom:8},children:t.jsxs("div",{style:{width:73,height:73,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,padding:10,background:Ue&&!M.closed?`linear-gradient(135deg, ${qe}30 0%, ${qe}15 100%)`:at?`linear-gradient(135deg, ${qe}20 0%, ${qe}10 100%)`:"rgba(20, 20, 28, 0.9)",border:Ue&&!M.closed?`2px solid ${qe}`:at?`2px solid ${qe}60`:"1px solid rgba(255,255,255,0.1)",opacity:Mt?.4:M.closed&&!Le?.6:1,transition:"all 0.2s ease",boxShadow:Ue&&!M.closed?`0 0 12px ${qe}50`:at?`0 0 10px ${qe}30`:"0 2px 8px rgba(0,0,0,0.3)",position:"relative"},children:[t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:Le?"#888":M.closed?"#555":qe,boxShadow:Ue&&!M.closed||at?`0 0 6px ${qe}`:"none",animation:Ue&&!M.closed?"sessionDotPulse 1.5s ease-in-out infinite":"none"}}),rn?t.jsxs("div",{style:{textAlign:"center",lineHeight:1.1},children:[t.jsx("div",{style:{fontSize:11,color:Ue&&!M.closed||at?qe:M.closed&&!Le?"#666":"#e5e5e5",fontWeight:600},children:mn[0]}),t.jsx("div",{style:{fontSize:10,color:Ue&&!M.closed||at?qe:M.closed&&!Le?"#555":"#bbb",fontWeight:500},children:mn.slice(1).join(" ")})]}):t.jsx("span",{style:{fontSize:((zn=H.name)==null?void 0:zn.length)>6?10:12,color:Le?at?"#ccc":"#999":Ue&&!M.closed||at?qe:M.closed?"#666":"#e5e5e5",fontWeight:600,textAlign:"center",lineHeight:1.1},children:H.name}),Ue&&!M.closed&&t.jsx("div",{style:{position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 6px",borderRadius:8,letterSpacing:"0.05em",boxShadow:"0 2px 6px rgba(0,255,136,0.4)"},children:"LIVE"}),at&&!Le&&t.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:12,background:"linear-gradient(135deg, rgba(12, 12, 18, 0.98) 0%, rgba(18, 18, 28, 0.98) 100%)",border:`1px solid ${qe}30`,borderRadius:12,padding:"14px 18px",minWidth:200,zIndex:100,boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.05) inset",pointerEvents:"none"},children:[t.jsx("div",{style:{position:"absolute",top:-6,left:"50%",width:10,height:10,background:"rgba(12, 12, 18, 0.98)",border:`1px solid ${qe}30`,borderRight:"none",borderBottom:"none",transform:"translateX(-50%) rotate(45deg)"}}),t.jsxs("div",{style:{textAlign:"center",marginBottom:10,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:qe,boxShadow:`0 0 8px ${qe}`}}),t.jsx("span",{style:{color:qe,fontWeight:700,fontSize:14,letterSpacing:.5},children:H.name}),Ue&&!M.closed&&t.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 5px",borderRadius:4},children:"LIVE"})]}),H.start&&H.end&&t.jsxs("div",{style:{fontSize:10,color:"#666",fontFamily:"'JetBrains Mono', monospace",marginTop:4},children:[H.start," - ",H.end," ET"]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px 16px",fontSize:10},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#8B5CF6"},children:"VOL"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.volume?H.volume>=1e3?(H.volume/1e3).toFixed(1)+"K":H.volume:""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:H.delta>=0?"#00ff88":"#ff4466"},children:"DELTA"}),t.jsx("span",{style:{color:H.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:H.delta?Math.abs(H.delta)>=1e3?(H.delta/1e3).toFixed(1)+"K":H.delta:""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#6366F1"},children:"pDR"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.pdr>0?H.pdr.toFixed(1):""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#06B6D4"},children:"10D"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.avg10d>0?H.avg10d.toFixed(1):""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#84CC16"},children:"cW"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.cW>0?H.cW.toFixed(1):""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#22C55E"},children:"pW"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.pW>0?H.pW.toFixed(1):""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#F97316"},children:"cM"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.cM>0?H.cM.toFixed(1):""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#FB923C"},children:"pM"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.pM>0?H.pM.toFixed(1):""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#10B981"},children:"MAX"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.max>0?H.max.toFixed(1):""})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[t.jsx("span",{style:{color:"#EF4444"},children:"MIN"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:H.min>0?H.min.toFixed(1):""})]})]}),t.jsx("div",{style:{marginTop:10,paddingTop:8,borderTop:"1px solid rgba(255,255,255,0.06)",fontSize:9,color:Ue&&!M.closed?"#00ff88":Mt?"#555":"#666",textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center"},children:Ue&&!M.closed?" Active Session":Mt?" Upcoming":" Ended"})]})]})},H.id||$e)})})]})}),Dn(null,it,!0,L,{dayDate:Z,sessionId:ee},{dayDate:ue,sessionId:ye}),t.jsx("div",{style:{padding:"8px 12px",borderTop:"1px solid rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:12,background:"rgba(15, 15, 20, 0.5)"},children:t.jsx("div",{style:{display:"flex",gap:4},children:I.map(H=>t.jsx("button",{onClick:()=>y(H.id),style:{padding:"6px 10px",background:k===H.id?"rgba(59, 130, 246, 0.2)":"rgba(255,255,255,0.03)",border:k===H.id?"1px solid rgba(59, 130, 246, 0.4)":"1px solid rgba(255,255,255,0.08)",borderRadius:4,color:k===H.id?"#60A5FA":"#666",fontSize:10,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease",letterSpacing:"0.5px"},children:H.label},H.id))})}),t.jsx("div",{children:d&&d.length>0?(()=>{const H=new Date,$e=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`;return(k==="current"?d.filter(Ue=>Ue.date!==$e):d).map((Ue,Mt)=>{let qe=Ue.label||`Day ${Mt+1}`;if(Ue.date){const rn=Ue.date.split("-"),xt=new Date(Ue.date+"T12:00:00"),zn=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cn=`${rn[1]}-${rn[2]}`,sr=zn[xt.getDay()];qe=`${cn} ${sr}`}const at={dayDate:Z,sessionId:ee},mn={dayDate:ue,sessionId:ye};return Dn(Ue,qe,!1,Ue.date,at,mn)})})():t.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading historical data..."})}),t.jsxs("div",{style:{margin:"12px",background:"rgba(20, 20, 30, 0.8)",borderRadius:12,border:"1px solid rgba(139, 92, 246, 0.3)",overflow:"hidden"},children:[t.jsxs("div",{onClick:()=>b(!j),style:{padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:j?"rgba(139, 92, 246, 0.15)":"transparent",borderBottom:j?"1px solid rgba(139, 92, 246, 0.2)":"none",transition:"all 0.2s ease"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{style:{color:"#A78BFA",fontWeight:600,fontSize:13},children:"Session Trade Calculator"}),t.jsx("span",{style:{color:"#666",fontSize:11},children:" Entry  Target Analysis"})]}),t.jsx("span",{style:{color:"#8B5CF6",fontSize:12,transform:j?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),j&&t.jsxs("div",{style:{padding:16},children:[t.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:16},children:[t.jsxs("div",{style:{flex:"1 1 180px"},children:[t.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"ENTRY SESSION"}),t.jsx("select",{value:O,onChange:H=>_(H.target.value),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,cursor:"pointer",outline:"none"},children:tt.map(H=>t.jsx("option",{value:H.id,style:{background:"#1a1a2e"},children:H.name},H.id))})]}),t.jsxs("div",{style:{flex:"1 1 120px"},children:[t.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"TARGET POINTS"}),t.jsx("input",{type:"number",value:D,onChange:H=>W(Math.max(0,parseFloat(H.target.value)||0)),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,outline:"none",textAlign:"center"},min:"0",step:"0.5"})]}),t.jsxs("div",{style:{flex:"1 1 160px"},children:[t.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"DIRECTION"}),t.jsxs("div",{style:{display:"flex",gap:4},children:[t.jsx("button",{onClick:()=>_e("long"),style:{flex:1,padding:"10px 16px",background:G==="long"?"rgba(0, 255, 136, 0.2)":"rgba(0,0,0,0.3)",border:G==="long"?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px 0 0 8px",color:G==="long"?"#00ff88":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" LONG"}),t.jsx("button",{onClick:()=>_e("short"),style:{flex:1,padding:"10px 16px",background:G==="short"?"rgba(255, 68, 102, 0.2)":"rgba(0,0,0,0.3)",border:G==="short"?"1px solid #ff4466":"1px solid rgba(255,255,255,0.1)",borderRadius:"0 8px 8px 0",color:G==="short"?"#ff4466":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" SHORT"})]})]})]}),d&&d.length>0&&(()=>{var xt,zn,cn,sr;const H=tt.findIndex(Ae=>Ae.id===O),$e=tt.slice(H+1),Le=d.map(Ae=>{var fe;const Pe=(fe=Ae.sessions)==null?void 0:fe[O];if(!Pe||!Pe.o||Pe.o<=0)return null;const yt=Pe.o,Rt=G==="long"?yt+D:yt-D;let pn=0,E=G==="long"?1/0:0,$=-1;const N=$e.map((ke,B)=>{var he;const V=(he=Ae.sessions)==null?void 0:he[ke.id];if(!V||!V.h||V.h<=0)return{session:ke,hit:!1,noData:!0,drawdownAtSession:0};const oe=G==="long"?V.h>=Rt:V.l<=Rt;if($===-1)if(G==="long"){E=Math.min(E,V.l);const ge=yt-E;pn=Math.max(pn,ge)}else{E=Math.max(E,V.h);const ge=E-yt;pn=Math.max(pn,ge)}oe&&$===-1&&($=B);const pe=G==="long"?V.h:V.l;return{session:ke,hit:oe,hitPrice:pe,high:V.h,low:V.l,overshoot:oe?G==="long"?V.h-Rt:Rt-V.l:0,drawdownAtSession:G==="long"?Math.max(0,yt-V.l):Math.max(0,V.h-yt)}}),K=N.find(ke=>ke.hit);return{date:Ae.date,label:Ae.label,entryPrice:yt,targetPrice:Rt,sessionResults:N,firstHit:K,hitAny:N.some(ke=>ke.hit),maxDrawdown:pn>0?pn:0}}).filter(Boolean),Ue=Le.length>0?(Le.filter(Ae=>Ae.hitAny).length/Le.length*100).toFixed(0):0,Mt={};Le.forEach(Ae=>{Ae.firstHit&&(Mt[Ae.firstHit.session.id]=(Mt[Ae.firstHit.session.id]||0)+1)});const qe=Object.entries(Mt).sort((Ae,Pe)=>Pe[1]-Ae[1])[0],at=Le.map(Ae=>Ae.maxDrawdown).filter(Ae=>Ae>0),mn=at.length>0?at.reduce((Ae,Pe)=>Ae+Pe,0)/at.length:0,rn=at.length>0?Math.max(...at):0;return t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16,padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderRadius:8},children:[t.jsxs("div",{style:{flex:1,textAlign:"center"},children:[t.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"SUCCESS RATE"}),t.jsxs("div",{style:{fontSize:24,fontWeight:700,color:Ue>=70?"#00ff88":Ue>=50?"#F59E0B":"#ff4466"},children:[Ue,"%"]})]}),t.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[t.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"MOST LIKELY HIT"}),t.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#A78BFA"},children:qe&&((xt=tt.find(Ae=>Ae.id===qe[0]))==null?void 0:xt.name)||""}),qe&&t.jsxs("div",{style:{fontSize:10,color:"#666"},children:[qe[1]," of ",Le.length," days"]})]}),t.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[t.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"ENTRY SESSION"}),t.jsx("div",{style:{fontSize:14,fontWeight:600,color:((zn=tt.find(Ae=>Ae.id===O))==null?void 0:zn.color)||"#fff"},children:((cn=tt.find(Ae=>Ae.id===O))==null?void 0:cn.name)||O}),t.jsxs("div",{style:{fontSize:10,color:"#666"},children:[" +",D," pts ",G==="long"?"":""]})]}),t.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[t.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"AVG DRAWDOWN"}),t.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#F59E0B"},children:mn>0?mn.toFixed(1):"0"}),t.jsx("div",{style:{fontSize:10,color:"#666"},children:"points"})]}),t.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[t.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"WORST DD"}),t.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#EF4444"},children:rn>0?rn.toFixed(1):"0"}),t.jsx("div",{style:{fontSize:10,color:"#666"},children:"max risk"})]})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[t.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),t.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),t.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Target"}),$e.map(Ae=>t.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:Ae.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",minWidth:60},children:Ae.name.split(" ")[0]},Ae.id)),t.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max DD"}),t.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Result"})]})}),t.jsx("tbody",{children:Le.map((Ae,Pe)=>t.jsxs("tr",{style:{background:Pe%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[t.jsx("td",{style:{padding:"8px 12px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Ae.label||Ae.date}),t.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Ae.entryPrice.toFixed(2)}),t.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:G==="long"?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Ae.targetPrice.toFixed(2)}),Ae.sessionResults.map(yt=>{var Rt;return t.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",background:yt.hit&&((Rt=Ae.firstHit)==null?void 0:Rt.session.id)===yt.session.id?"rgba(0, 255, 136, 0.1)":"transparent",verticalAlign:"middle"},children:yt.noData?t.jsx("span",{style:{color:"#444"},children:""}):t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[yt.hit?t.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["",yt.overshoot>0&&t.jsxs("span",{style:{fontSize:9,marginLeft:2},children:["+",yt.overshoot.toFixed(1)]})]}):t.jsx("span",{style:{color:"#ff4466",opacity:.5},children:""}),yt.drawdownAtSession>0&&t.jsxs("span",{style:{fontSize:8,color:"#F59E0B",opacity:.8},children:["DD: ",yt.drawdownAtSession.toFixed(1)]})]})},yt.session.id)}),t.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontFamily:"monospace"},children:t.jsx("span",{style:{color:Ae.maxDrawdown>D?"#EF4444":Ae.maxDrawdown>D*.5?"#F59E0B":"#888",fontWeight:Ae.maxDrawdown>D?700:400},children:Ae.maxDrawdown>0?Ae.maxDrawdown.toFixed(1):"0"})}),t.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Ae.hitAny?t.jsx("span",{style:{color:"#00ff88",fontWeight:600,fontSize:10},children:Ae.firstHit.session.name}):t.jsx("span",{style:{color:"#ff4466",fontSize:10},children:"NO HIT"})})]},Ae.date))})]})}),t.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[" Analysis based on ",Le.length," trading days  Entry at ",(sr=tt.find(Ae=>Ae.id===O))==null?void 0:sr.name," session open price  Target: ",G==="long"?"+":"-",D," points"]})]})})()]})]}),t.jsxs("div",{style:{padding:"10px 16px",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.3)",display:"flex",gap:16,justifyContent:"center",alignItems:"center",flexWrap:"wrap",fontSize:11,color:"#555"},children:[t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:t.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#10B981",strokeWidth:"2",strokeDasharray:"3,2"})}),t.jsx("span",{style:{color:"#10B981"},children:"High of Day"})]}),t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:t.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"3,2"})}),t.jsx("span",{style:{color:"#EF4444"},children:"Low of Day"})]}),t.jsx("span",{style:{borderLeft:"1px solid #333",height:16,margin:"0 4px"}}),t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 3px #00ff88)"}}),t.jsx("span",{style:{color:"#00ff88"},children:"High of Week"})]}),t.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 3px #ff4466)"}}),t.jsx("span",{style:{color:"#ff4466"},children:"Low of Week"})]})]}),m&&t.jsxs("div",{style:{position:"fixed",left:z.x,top:z.y-10,transform:"translate(-50%, -100%)",background:"rgba(0,0,0,0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,padding:"10px 14px",zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.8)",minWidth:140,pointerEvents:"none"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:11,fontWeight:700,color:m.close>=m.open?"#00ff88":"#ff4466",marginBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:6},children:[t.jsx("span",{children:m.label||m.name}),m.isHOD&&t.jsx("span",{style:{background:"#10B981",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"HIGH OF DAY"}),m.isLOD&&t.jsx("span",{style:{background:"#EF4444",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"LOW OF DAY"}),m.isHOW&&t.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #00ff88"},children:"HIGH OF WEEK"}),m.isLOW&&t.jsx("span",{style:{background:"#ff4466",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #ff4466"},children:"LOW OF WEEK"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"4px 12px",fontSize:10},children:[t.jsx("span",{style:{color:"#3B82F6"},children:"O"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((Zn=m.open)==null?void 0:Zn.toFixed(2))||""}),t.jsx("span",{style:{color:(m.isHOD,"#10B981")},children:"H"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:m.isHOD?"rgba(16, 185, 129, 0.2)":"transparent",padding:m.isHOD?"1px 4px":0,borderRadius:3},children:((or=m.high)==null?void 0:or.toFixed(2))||""}),t.jsx("span",{style:{color:(m.isLOD,"#EF4444")},children:"L"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:m.isLOD?"rgba(239, 68, 68, 0.2)":"transparent",padding:m.isLOD?"1px 4px":0,borderRadius:3},children:((qn=m.low)==null?void 0:qn.toFixed(2))||""}),t.jsx("span",{style:{color:"#F59E0B"},children:"C"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((er=m.close)==null?void 0:er.toFixed(2))||""})]}),m.high>0&&m.low>0&&t.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#888"},children:["Range: ",t.jsx("span",{style:{color:"#EC4899"},children:(m.high-m.low).toFixed(2)})]})]})]})})()]}):t.jsx("div",{style:{padding:40,textAlign:"center",color:"#888"},children:"No data available"})},Tg=({activeTab:e,setActiveTab:n,onLogout:r})=>{var m;const{isMobile:i,isTablet:o}=_i(),[s,l]=A.useState(!1),[d,c]=A.useState(!1),p=[{id:"backtest",icon:"",label:"Backtest",fullLabel:"Backtest Analytics"},{id:"live",icon:"",label:"Live",fullLabel:"Live Metrics",iconColor:"#ef4444"},{id:"tpo",icon:"",label:"TPO",fullLabel:"Market Profile",iconColor:"#ffaa00"},{id:"zones",icon:"",label:"Zones",fullLabel:"Zone Participation",iconColor:"#00ff88"},{id:"treemap",icon:"",label:"Matrix",fullLabel:"Correlation Matrix"},{id:"vsi",icon:"",label:"Sessions",fullLabel:"Session Analysis"},{id:"trades",icon:"",label:"Trades",fullLabel:"Trade Log"},{id:"priceladder",icon:"",label:"Ladder",fullLabel:"Price Ladder"},{id:"redfolder",icon:"",label:"Red",fullLabel:"Red Folder",iconColor:"#ff4466",accent:"#ff4466"}],h=u=>{n(u),l(!1)};return i?t.jsxs(t.Fragment,{children:[t.jsxs("nav",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"rgba(0,0,0,0.4)",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:1e3,backdropFilter:"blur(10px)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})}),t.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",letterSpacing:"2px"},children:"HORIZON"})]}),t.jsx("div",{style:{padding:"6px 12px",background:"rgba(0,255,136,0.1)",borderRadius:6,border:"1px solid rgba(0,255,136,0.3)"},children:t.jsx("span",{style:{color:"#00ff88",fontSize:11,fontWeight:600},children:((m=p.find(u=>u.id===e))==null?void 0:m.label)||"Menu"})}),t.jsxs("button",{onClick:()=>l(!s),style:{width:40,height:40,background:s?"rgba(0,255,136,0.15)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:5,transition:"all 0.2s"},children:[t.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(45deg) translateY(7px)":"none"}}),t.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",opacity:s?0:1}}),t.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(-45deg) translateY(-7px)":"none"}})]})]}),s&&t.jsxs("div",{style:{position:"fixed",top:57,left:0,right:0,bottom:0,background:"rgba(10,10,15,0.98)",zIndex:999,padding:16,overflowY:"auto",animation:"slideIn 0.2s ease"},children:[t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:p.map(u=>{const z=e===u.id,S=u.accent||"#00ff88";return t.jsxs("button",{onClick:()=>h(u.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,padding:"20px 12px",background:z?`linear-gradient(180deg, ${S}20 0%, ${S}08 100%)`:"rgba(255,255,255,0.03)",border:z?`2px solid ${S}`:"1px solid rgba(255,255,255,0.08)",borderRadius:12,color:z?S:"#aaa",cursor:"pointer",transition:"all 0.2s"},children:[t.jsx("span",{style:{fontSize:24,color:z?S:u.iconColor||"#666",filter:z?`drop-shadow(0 0 8px ${S})`:"none"},children:u.icon}),t.jsx("span",{style:{fontSize:12,fontWeight:z?700:500},children:u.fullLabel})]},u.id)})}),t.jsxs("div",{style:{display:"flex",gap:12,marginTop:20},children:[t.jsxs("button",{onClick:()=>{n("settings"),l(!1)},style:{flex:1,padding:"16px",background:"rgba(0,255,136,0.1)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:12,color:"#00ff88",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[t.jsx("span",{children:""})," Settings"]}),t.jsxs("button",{onClick:r,style:{flex:1,padding:"16px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.4)",borderRadius:12,color:"#ff4466",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[t.jsx("span",{children:""})," Logout"]})]})]})]}):o?t.jsxs("nav",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)",gap:16},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexShrink:0},children:t.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})})}),t.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",flex:1,WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:p.map(u=>{const z=e===u.id,S=u.accent||"#00ff88";return t.jsxs("button",{onClick:()=>n(u.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",background:z?`${S}15`:"transparent",border:z?`1px solid ${S}`:"1px solid transparent",borderRadius:6,color:z?S:"#888",fontSize:11,fontWeight:z?600:500,cursor:"pointer",whiteSpace:"nowrap",flexShrink:0},children:[t.jsx("span",{style:{color:z?S:u.iconColor||"#666"},children:u.icon}),t.jsx("span",{children:u.label})]},u.id)})}),t.jsxs("div",{style:{position:"relative",flexShrink:0},children:[t.jsx("button",{onClick:()=>c(!d),style:{width:36,height:36,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:14,color:"#fff",boxShadow:d?"0 0 15px rgba(0,255,136,0.5)":"none"},children:t.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>c(!1)}),t.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:10,padding:6,minWidth:150,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",zIndex:999},children:[t.jsxs("button",{onClick:()=>{n("settings"),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ccc",fontSize:13,cursor:"pointer"},children:[t.jsx("span",{children:""})," Settings"]}),t.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 6px"}}),t.jsxs("button",{onClick:()=>{r(),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ff4466",fontSize:13,cursor:"pointer"},children:[t.jsx("span",{children:""})," Logout"]})]})]})]})]}):t.jsxs("nav",{style:C.nav,children:[t.jsxs("div",{style:C.navBrand,children:[t.jsx("div",{style:{width:36,height:36,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(0,255,136,0.3)"},children:t.jsx("span",{style:{fontSize:18,color:"#0a0a0a",fontWeight:800},children:"H"})}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[t.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#fff",letterSpacing:"1.5px"},children:"PROJECT"}),t.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",letterSpacing:"3px"},children:"HORIZON"})]})]}),t.jsx("div",{style:{...C.navTabs,marginLeft:24},children:p.map(u=>{const z=e===u.id,S=u.accent||"#00ff88";return t.jsxs("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 18px",background:z?`linear-gradient(180deg, ${S}20 0%, ${S}05 100%)`:"transparent",border:z?`1px solid ${S}`:"1px solid transparent",borderRadius:8,color:z?S:"#8b8b8b",fontSize:13,fontWeight:z?600:500,cursor:"pointer",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},onClick:()=>n(u.id),onMouseEnter:k=>{z||(k.target.style.background="rgba(255,255,255,0.05)",k.target.style.color="#ccc")},onMouseLeave:k=>{z||(k.target.style.background="transparent",k.target.style.color="#8b8b8b")},children:[t.jsx("span",{style:{fontSize:u.icon.length===1?14:15,color:z?S:u.iconColor||"#8b8b8b",filter:z&&u.iconColor?`drop-shadow(0 0 4px ${u.iconColor})`:"none"},children:u.icon}),t.jsx("span",{children:u.fullLabel}),z&&t.jsx("div",{style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"60%",height:2,background:S,borderRadius:"2px 2px 0 0",boxShadow:`0 0 10px ${S}`}})]},u.id)})}),t.jsxs("div",{style:{position:"relative",marginLeft:16},children:[t.jsx("button",{onClick:()=>c(!d),style:{width:40,height:40,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:18,color:"#fff",boxShadow:d?"0 0 15px rgba(0,255,136,0.5)":"none"},onMouseEnter:u=>{u.currentTarget.style.borderColor="#00ff88",u.currentTarget.style.boxShadow="0 0 15px rgba(0,255,136,0.5)"},onMouseLeave:u=>{d||(u.currentTarget.style.borderColor="rgba(255,255,255,0.5)",u.currentTarget.style.boxShadow="none")},children:t.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),t.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>c(!1)}),t.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:8,minWidth:180,boxShadow:"0 10px 40px rgba(0,0,0,0.5)",zIndex:999,backdropFilter:"blur(20px)"},children:[t.jsxs("button",{onClick:()=>{n("settings"),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ccc",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,255,255,0.08)",u.currentTarget.style.color="#fff"},onMouseLeave:u=>{u.currentTarget.style.background="transparent",u.currentTarget.style.color="#ccc"},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{children:"Settings"})]}),t.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 8px"}}),t.jsxs("button",{onClick:()=>{r(),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ff4466",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,68,102,0.15)"},onMouseLeave:u=>{u.currentTarget.style.background="transparent"},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{children:"Logout"})]})]})]})]})]})},_g=()=>{var k,y,a,g,v,f,T,j,b,O,_,D,W,G,_e,Fe,I,ze,tt,se,me,w,x,R,M,ie,ae,Se,Ce,U,ve,xe,J,re,Z,ee,ue,ye,de,L,Me,Ke,zt,Dt,bt;const[e,n]=A.useState(""),[r,i]=A.useState(!1),[o,s]=A.useState(!1),[l,d]=A.useState({stream_active:!1,stream_title:"",transcript_buffer:[],current_segment:"",sentiment:{current:"neutral",score:0,confidence:0,history:[]},voice_tone:{confidence_level:0,hesitation_count:0,stress_indicators:0,speaking_rate:0},keywords:{},market_direction:{signal:"neutral",strength:0,components:{sentiment_weight:0,tone_weight:0,keyword_weight:0}},error:null}),c=A.useRef(null);A.useEffect(()=>{const Y=async()=>{try{const Ge=await(await fetch(sa)).json();d(Ge),i(Ge.stream_active),s(!0)}catch{s(!1)}};Y();const Q=setInterval(Y,300);return()=>clearInterval(Q)},[]),A.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[l.transcript_buffer]);const p=async()=>{if(e)try{await fetch(`${sa}/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})})}catch(Y){console.error("Failed to start stream:",Y)}},h=async()=>{try{await fetch(`${sa}/stop`,{method:"POST"})}catch(Y){console.error("Failed to stop stream:",Y)}},m=Y=>{if(!Y)return Y;const Q=Object.keys(l.keywords||{});let Re=Y;return Q.forEach(Ge=>{const ce=new RegExp(`\\b(${Ge})\\b`,"gi");Re=Re.replace(ce,'<span style="background: rgba(0,255,136,0.2); color: #00ff88; padding: 2px 4px; border-radius: 4px; font-weight: 600;">$1</span>')}),Re},u=Y=>Y>.05?"#00ff88":Y<-.05?"#ff4466":"#ffaa00",S=(Y=>{switch(Y){case"bullish":return{color:"#00ff88",icon:"",glow:"rgba(0,255,136,0.3)"};case"bearish":return{color:"#ff4466",icon:"",glow:"rgba(255,68,102,0.3)"};default:return{color:"#ffaa00",icon:"",glow:"rgba(255,170,0,0.3)"}}})((k=l.market_direction)==null?void 0:k.signal);return t.jsxs("div",{style:{maxWidth:1400,margin:"0 auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},children:[t.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[t.jsx("span",{style:{fontSize:28},children:""}),t.jsx("span",{children:"Red Folder"}),t.jsx("span",{style:{fontSize:14,color:"#888",fontWeight:400},children:"Live Event Transcription & Analysis"})]}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 16px",borderRadius:8,background:o?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${o?"#00ff88":"#ff4466"}`},children:[t.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:o?"#00ff88":"#ff4466",boxShadow:o?"0 0 10px #00ff88":"none",animation:o&&r?"pulse 2s infinite":"none"}}),t.jsx("span",{style:{color:o?"#00ff88":"#ff4466",fontSize:12,fontWeight:600},children:r?"LIVE TRANSCRIBING":o?"SERVICE ONLINE":"SERVICE OFFLINE"})]})})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20,marginBottom:24},children:[t.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[t.jsx("input",{type:"text",placeholder:"Enter YouTube Live URL (e.g., https://youtube.com/watch?v=...)",value:e,onChange:Y=>n(Y.target.value),style:{flex:1,minWidth:300,padding:"12px 16px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"#fff",fontSize:14,fontFamily:"'JetBrains Mono', monospace"}}),t.jsx("button",{onClick:p,disabled:r||!e,style:{padding:"12px 24px",borderRadius:8,background:r?"rgba(255,255,255,0.05)":"linear-gradient(135deg, #00ff88, #00cc6a)",border:"none",color:r?"#666":"#000",fontWeight:700,cursor:r?"not-allowed":"pointer",transition:"all 0.2s"},children:" START"}),t.jsx("button",{onClick:h,disabled:!r,style:{padding:"12px 24px",borderRadius:8,background:r?"linear-gradient(135deg, #ff4466, #cc3355)":"rgba(255,255,255,0.05)",border:"none",color:r?"#fff":"#666",fontWeight:700,cursor:r?"pointer":"not-allowed",transition:"all 0.2s"},children:" STOP"})]}),l.stream_title&&t.jsxs("div",{style:{marginTop:12,color:"#888",fontSize:13},children:[t.jsx("span",{style:{color:"#00aaff"},children:"Now transcribing:"})," ",l.stream_title]}),l.error&&t.jsxs("div",{style:{marginTop:12,color:"#ff4466",fontSize:13},children:["Error: ",l.error]}),l.scheduler&&t.jsxs("div",{style:{marginTop:16,padding:"12px 16px",borderRadius:8,background:l.scheduler.event_active?"rgba(255,170,0,0.1)":"rgba(0,170,255,0.05)",border:`1px solid ${l.scheduler.event_active?"#ffaa00":"rgba(0,170,255,0.2)"}`,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:l.scheduler.event_active?"":""}),t.jsx("span",{style:{color:"#888",fontSize:12,fontWeight:600},children:"AUTO-SCHEDULER"}),t.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:l.scheduler.enabled?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:l.scheduler.enabled?"#00ff88":"#ff4466"},children:l.scheduler.enabled?"ENABLED":"DISABLED"})]}),l.scheduler.next_event&&t.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{color:"#666",fontSize:11},children:"Next:"}),t.jsx("span",{style:{color:l.scheduler.event_active?"#ffaa00":"#00aaff",fontSize:12,fontWeight:600},children:l.scheduler.next_event}),t.jsx("span",{style:{color:"#888",fontSize:11},children:l.scheduler.next_time}),l.scheduler.event_active&&t.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",animation:"pulse 2s infinite"},children:"EVENT ACTIVE"})]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:24},children:[t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:24,height:600,display:"flex",flexDirection:"column"},children:[t.jsxs("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{children:""})," Live Transcript",r&&t.jsx("span",{style:{fontSize:11,color:"#00ff88",marginLeft:"auto"},children:" RECORDING"})]}),t.jsx("div",{ref:c,style:{flex:1,overflowY:"auto",fontFamily:"'JetBrains Mono', monospace",fontSize:14,lineHeight:1.8},children:((y=l.transcript_buffer)==null?void 0:y.length)===0&&!l.current_segment?t.jsx("div",{style:{color:"#666",textAlign:"center",padding:40},children:r?"Waiting for speech...":"Start a stream to begin transcription"}):t.jsxs(t.Fragment,{children:[(a=l.transcript_buffer)==null?void 0:a.map((Y,Q)=>t.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.03)",opacity:Y.is_final?1:.6},children:[t.jsx("span",{style:{color:"#666",marginRight:12,fontSize:12},children:Y.timestamp}),t.jsx("span",{style:{color:"#e0e0e0"},dangerouslySetInnerHTML:{__html:m(Y.text)}})]},Q)),l.current_segment&&t.jsxs("div",{style:{padding:"8px 0",opacity:.6,color:"#888"},children:[t.jsx("span",{style:{marginRight:12,fontSize:12},children:"..."}),l.current_segment]})]})})]}),t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${((g=l.sentiment)==null?void 0:g.score)>.1?"rgba(0,255,136,0.3)":((v=l.sentiment)==null?void 0:v.score)<-.1?"rgba(255,68,102,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:16,padding:20,textAlign:"center",transition:"border-color 0.5s ease, box-shadow 0.5s ease",boxShadow:((f=l.sentiment)==null?void 0:f.score)>.1?"0 0 20px rgba(0,255,136,0.1)":((T=l.sentiment)==null?void 0:T.score)<-.1?"0 0 20px rgba(255,68,102,0.1)":"none"},children:[t.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"SENTIMENT GAUGE"}),t.jsxs("svg",{width:"200",height:"110",viewBox:"0 0 200 110",style:{margin:"0 auto",display:"block"},children:[t.jsx("defs",{children:t.jsxs("filter",{id:"glow",children:[t.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),t.jsxs("feMerge",{children:[t.jsx("feMergeNode",{in:"coloredBlur"}),t.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),t.jsx("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"12"}),t.jsx("path",{d:"M 20 100 A 80 80 0 0 1 60 35",fill:"none",stroke:"#ff4466",strokeWidth:"12",opacity:((j=l.sentiment)==null?void 0:j.score)<-.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),t.jsx("path",{d:"M 60 35 A 80 80 0 0 1 140 35",fill:"none",stroke:"#ffaa00",strokeWidth:"12",opacity:Math.abs(((b=l.sentiment)==null?void 0:b.score)||0)<=.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),t.jsx("path",{d:"M 140 35 A 80 80 0 0 1 180 100",fill:"none",stroke:"#00ff88",strokeWidth:"12",opacity:((O=l.sentiment)==null?void 0:O.score)>.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),t.jsx("g",{style:{transform:`rotate(${((((_=l.sentiment)==null?void 0:_.score)||0)+1)*90-180}deg)`,transformOrigin:"100px 100px",transition:"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:t.jsx("line",{x1:"100",y1:"100",x2:"165",y2:"100",stroke:u(((D=l.sentiment)==null?void 0:D.score)||0),strokeWidth:"3",strokeLinecap:"round",filter:"url(#glow)"})}),t.jsx("circle",{cx:"100",cy:"100",r:"10",fill:u(((W=l.sentiment)==null?void 0:W.score)||0),style:{transition:"fill 0.5s"}}),t.jsx("circle",{cx:"100",cy:"100",r:"5",fill:"#1a1a1a"}),t.jsx("text",{x:"20",y:"108",fill:"#ff4466",fontSize:"10",fontWeight:"600",children:"BEAR"}),t.jsx("text",{x:"160",y:"108",fill:"#00ff88",fontSize:"10",fontWeight:"600",children:"BULL"})]}),t.jsxs("div",{style:{marginTop:12},children:[t.jsx("span",{style:{fontSize:28,fontWeight:800,color:u(((G=l.sentiment)==null?void 0:G.score)||0),textShadow:((_e=l.sentiment)==null?void 0:_e.current)!=="neutral"?`0 0 20px ${u(((Fe=l.sentiment)==null?void 0:Fe.score)||0)}40`:"none",transition:"color 0.5s, text-shadow 0.5s"},children:(((I=l.sentiment)==null?void 0:I.current)||"neutral").toUpperCase()}),t.jsxs("div",{style:{fontSize:12,color:"#888",marginTop:6},children:["Score: ",t.jsxs("span",{style:{color:u(((ze=l.sentiment)==null?void 0:ze.score)||0),fontWeight:600},children:[((((tt=l.sentiment)==null?void 0:tt.score)||0)*100).toFixed(0),"%"]})," | Confidence: ",t.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[((((se=l.sentiment)==null?void 0:se.confidence)||0)*100).toFixed(0),"%"]})]})]})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[t.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"VOICE ANALYSIS"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Confidence"}),t.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:t.jsx("div",{style:{width:`${((me=l.voice_tone)==null?void 0:me.confidence_level)||0}%`,height:"100%",borderRadius:4,background:(((w=l.voice_tone)==null?void 0:w.confidence_level)||0)>70?"#00ff88":(((x=l.voice_tone)==null?void 0:x.confidence_level)||0)>40?"#ffaa00":"#ff4466",transition:"width 0.3s"}})}),t.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",marginTop:4},children:[(((R=l.voice_tone)==null?void 0:R.confidence_level)||0).toFixed(0),"%"]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Speaking Rate"}),t.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#00aaff"},children:(((M=l.voice_tone)==null?void 0:M.speaking_rate)||0).toFixed(0)}),t.jsx("div",{style:{fontSize:10,color:"#666"},children:"WPM"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Hesitations"}),t.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((ie=l.voice_tone)==null?void 0:ie.hesitation_count)||0)>5?"#ff4466":"#888"},children:((ae=l.voice_tone)==null?void 0:ae.hesitation_count)||0})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Stress Signs"}),t.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((Se=l.voice_tone)==null?void 0:Se.stress_indicators)||0)>3?"#ff4466":"#888"},children:((Ce=l.voice_tone)==null?void 0:Ce.stress_indicators)||0})]})]})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[t.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"KEYWORD TRACKING"}),t.jsxs("div",{style:{maxHeight:150,overflowY:"auto"},children:[Object.entries(l.keywords||{}).filter(([Y,Q])=>Q.count>0).sort((Y,Q)=>Q[1].count-Y[1].count).slice(0,8).map(([Y,Q])=>{const Re=Math.max(...Object.values(l.keywords||{}).map(it=>it.count||0),1),Ge=["growth","dovish","easing","employment","jobs"],ce=["inflation","hawkish","tightening","recession","rates"],Be=Ge.includes(Y)?"#00ff88":ce.includes(Y)?"#ff4466":"#00aaff";return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[t.jsx("span",{style:{minWidth:70,fontSize:11,color:Be,fontWeight:600,textTransform:"capitalize"},children:Y}),t.jsx("div",{style:{flex:1,height:6,background:"rgba(255,255,255,0.05)",borderRadius:3,overflow:"hidden"},children:t.jsx("div",{style:{width:`${Q.count/Re*100}%`,height:"100%",background:Be,borderRadius:3,transition:"width 0.3s"}})}),t.jsx("span",{style:{fontSize:12,color:"#888",minWidth:24,textAlign:"right"},children:Q.count})]},Y)}),Object.values(l.keywords||{}).every(Y=>Y.count===0)&&t.jsx("div",{style:{color:"#666",fontSize:12,textAlign:"center",padding:20},children:"No keywords detected yet"})]})]}),(()=>{var ce,Be,it,Je;const Y=(((ce=l.sentiment)==null?void 0:ce.score)||0)>.05?"bullish":(((Be=l.sentiment)==null?void 0:Be.score)||0)<-.05?"bearish":"neutral",Q=((it=l.market_direction)==null?void 0:it.signal)||"neutral",Re=Y!=="neutral"&&Q!=="neutral"&&Y!==Q,Ge=Y!=="neutral"&&Q==="neutral"||Y==="neutral"&&Q!=="neutral";if(Re)return t.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,170,0,0.15) 0%, rgba(255,170,0,0.05) 100%)",border:"2px solid #ffaa00",borderRadius:12,padding:16,marginBottom:16,animation:"pulse 1.5s infinite"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.jsx("span",{style:{fontSize:24},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#ffaa00",fontWeight:700,fontSize:14},children:"DIVERGENCE ALERT"}),t.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment: ",t.jsx("span",{style:{color:Y==="bullish"?"#00ff88":"#ff4466"},children:Y.toUpperCase()})," vs ","Direction: ",t.jsx("span",{style:{color:Q==="bullish"?"#00ff88":"#ff4466"},children:Q.toUpperCase()})]}),t.jsx("div",{style:{color:"#ffaa00",fontSize:10,marginTop:4},children:"Voice tone or keywords offsetting text sentiment"})]})]})});if(Ge)return t.jsx("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginBottom:16},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsxs("div",{style:{color:"#888",fontSize:11},children:["Mixed signals: Sentiment ",Y.toUpperCase()," | Direction ",Q.toUpperCase()]})]})});if(Y!=="neutral"&&Y===Q){const Lt=((Je=l.market_direction)==null?void 0:Je.strength)||0,lt=Y==="bullish"?"#00ff88":"#ff4466";return t.jsx("div",{style:{background:`linear-gradient(135deg, ${lt}20 0%, ${lt}08 100%)`,border:`2px solid ${lt}`,borderRadius:12,padding:16,marginBottom:16,boxShadow:`0 0 20px ${lt}30`},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.jsx("span",{style:{fontSize:24},children:Y==="bullish"?"":""}),t.jsxs("div",{children:[t.jsxs("div",{style:{color:lt,fontWeight:700,fontSize:14},children:["STRONG ",Y.toUpperCase()," SIGNAL"]}),t.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment + Direction aligned | Strength: ",Lt.toFixed(0),"%"]})]})]})})}return null})(),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`2px solid ${S.color}`,borderRadius:16,padding:24,textAlign:"center",boxShadow:`0 0 30px ${S.glow}`},children:[t.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"MARKET DIRECTION"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"20px 0",transition:"transform 0.5s ease"},children:[t.jsx("span",{style:{fontSize:56,color:S.color,textShadow:`0 0 30px ${S.color}`,transition:"color 0.5s, text-shadow 0.5s, transform 0.3s",animation:((U=l.market_direction)==null?void 0:U.signal)!=="neutral"?"pulse 2s infinite":"none"},children:S.icon}),t.jsx("span",{style:{fontSize:36,fontWeight:800,color:S.color,letterSpacing:4,transition:"color 0.5s ease",textShadow:`0 0 15px ${S.color}40`},children:(((ve=l.market_direction)==null?void 0:ve.signal)||"neutral").toUpperCase()})]}),t.jsxs("div",{style:{marginBottom:16},children:[t.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Strength"}),t.jsx("div",{style:{height:10,background:"rgba(255,255,255,0.1)",borderRadius:5,overflow:"hidden"},children:t.jsx("div",{style:{width:`${((xe=l.market_direction)==null?void 0:xe.strength)||0}%`,height:"100%",borderRadius:5,background:`linear-gradient(90deg, ${S.color}80 0%, ${S.color} 100%)`,transition:"width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:`0 0 10px ${S.color}`}})}),t.jsxs("div",{style:{fontSize:16,fontWeight:700,color:S.color,marginTop:6,transition:"color 0.5s"},children:[(((J=l.market_direction)==null?void 0:J.strength)||0).toFixed(0),"%"]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#666"},children:"Sentiment"}),t.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((Z=(re=l.market_direction)==null?void 0:re.components)==null?void 0:Z.sentiment_weight)||0)*100).toFixed(0),"%"]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#666"},children:"Voice"}),t.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((ue=(ee=l.market_direction)==null?void 0:ee.components)==null?void 0:ue.tone_weight)||0)*100).toFixed(0),"%"]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#666"},children:"Keywords"}),t.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((de=(ye=l.market_direction)==null?void 0:ye.components)==null?void 0:de.keyword_weight)||0)*100).toFixed(0),"%"]})]})]})]})]})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:16,padding:24,marginTop:24},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[t.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[t.jsx("span",{style:{fontSize:22},children:""}),"Fed Speech Transcription Analysis"]}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:t.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(139,92,246,0.2)",color:"#A78BFA",fontSize:10,fontWeight:600},children:"DEEPGRAM LIVE TRANSCRIPTION"})})]}),t.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Real-time sentiment analysis of Fed Chair, FOMC Press Conferences & Presidential speeches  OHLC during speech duration"}),t.jsxs("div",{style:{marginBottom:24},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{color:"#A78BFA",fontSize:12,fontWeight:600},children:" PAST SPEECHES"}),t.jsx("span",{style:{color:"#666",fontSize:11},children:"(Last 6 Months)"})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid rgba(139,92,246,0.2)"},children:[t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DURATION"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SENTIMENT"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SIGNAL"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"OHLC"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"RESULT"})]})}),t.jsx("tbody",{children:[{date:"Wed, Jan 8",dateStr:"2026-01-08",time:"14:00",event:"FOMC Minutes Release Discussion",speaker:"Fed Officials",duration:45,sentiment:-.08,direction:"bearish",o:4495,h:4498.5,l:4486.2,c:4488.8},{date:"Wed, Dec 18",dateStr:"2025-12-18",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:52,sentiment:.15,direction:"bullish",o:4425,h:4452.3,l:4420.5,c:4448.6},{date:"Fri, Dec 6",dateStr:"2025-12-06",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:38,sentiment:-.12,direction:"bearish",o:4380,h:4385.4,l:4358.2,c:4362.5},{date:"Wed, Nov 26",dateStr:"2025-11-26",time:"14:30",event:"FOMC Minutes Discussion",speaker:"Fed Officials",duration:42,sentiment:.05,direction:"neutral",o:4320,h:4328.5,l:4315.8,c:4322.4},{date:"Thu, Nov 14",dateStr:"2025-11-14",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:55,sentiment:.22,direction:"bullish",o:4285.5,h:4318.2,l:4282,c:4312.8},{date:"Mon, Nov 4",dateStr:"2025-11-04",time:"15:00",event:"U.S. President Trump Speaks",speaker:"Trump",duration:28,sentiment:.18,direction:"bullish",o:4245,h:4272.5,l:4242.3,c:4268.9},{date:"Wed, Oct 22",dateStr:"2025-10-22",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:48,sentiment:-.15,direction:"bearish",o:4195,h:4202.8,l:4168.5,c:4175.2},{date:"Tue, Oct 8",dateStr:"2025-10-08",time:"09:30",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:35,sentiment:.08,direction:"bullish",o:4150,h:4168.4,l:4145.2,c:4162.5},{date:"Wed, Sep 17",dateStr:"2025-09-17",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:58,sentiment:.28,direction:"bullish",o:4085,h:4135.6,l:4080.5,c:4128.4},{date:"Fri, Sep 5",dateStr:"2025-09-05",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:42,sentiment:-.05,direction:"neutral",o:4055,h:4068.2,l:4048.5,c:4058.8},{date:"Fri, Aug 22",dateStr:"2025-08-22",time:"10:00",event:"Jackson Hole - Powell Speaks",speaker:"Powell",duration:65,sentiment:.35,direction:"bullish",o:3985,h:4058.5,l:3978.2,c:4045.8},{date:"Thu, Aug 7",dateStr:"2025-08-07",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:50,sentiment:.12,direction:"bullish",o:3925,h:3958.4,l:3920.5,c:3952.2},{date:"Wed, Jul 30",dateStr:"2025-07-30",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.18,direction:"bearish",o:3895,h:3902.5,l:3858.2,c:3865.4},{date:"Tue, Jul 15",dateStr:"2025-07-15",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:40,sentiment:.1,direction:"bullish",o:3845,h:3872.8,l:3840.5,c:3868.2}].map((Q,Re)=>{const Ge=Q.h-Q.l,ce=Q.c>Q.o+3?"bullish":Q.c<Q.o-3?"bearish":"neutral",Be=Q.direction===ce||Q.direction==="neutral"&&Math.abs(Q.c-Q.o)<=3,it=Q.sentiment>.1?"#00ff88":Q.sentiment<-.1?"#ff4466":"#ffaa00",Je=Q.direction==="bullish"?"#00ff88":Q.direction==="bearish"?"#ff4466":"#ffaa00",Lt=Q.speaker==="Powell"?"#A78BFA":Q.speaker==="Trump"?"#FF6B6B":"#00aaff";return t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:Re%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[t.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:Q.date}),t.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Q.time}),t.jsxs("td",{style:{padding:"10px 8px"},children:[t.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:Q.event}),t.jsx("div",{style:{color:Lt,fontSize:10,marginTop:2},children:Q.speaker})]}),t.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[Q.duration,"m"]}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:`${it}15`,border:`1px solid ${it}30`},children:t.jsxs("span",{style:{color:it,fontWeight:600,fontSize:11},children:[(Q.sentiment*100).toFixed(0),"%"]})})}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsxs("span",{style:{color:Je,fontWeight:600,fontSize:11,display:"inline-flex",alignItems:"center",gap:3},children:[t.jsx("span",{children:Q.direction==="bullish"?"":Q.direction==="bearish"?"":""}),Q.direction.toUpperCase()]})}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsxs("div",{style:{fontSize:9,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.4},children:[t.jsx("span",{style:{color:"#888"},children:"O:"}),t.jsx("span",{style:{color:"#fff"},children:Q.o.toFixed(0)}),t.jsx("span",{style:{color:"#888",marginLeft:4},children:"H:"}),t.jsx("span",{style:{color:"#00ff88"},children:Q.h.toFixed(0)}),t.jsx("br",{}),t.jsx("span",{style:{color:"#888"},children:"L:"}),t.jsx("span",{style:{color:"#ff4466"},children:Q.l.toFixed(0)}),t.jsx("span",{style:{color:"#888",marginLeft:4},children:"C:"}),t.jsx("span",{style:{color:Q.c>=Q.o?"#00ff88":"#ff4466"},children:Q.c.toFixed(0)})]})}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right"},children:t.jsxs("span",{style:{color:"#FFD700",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:12},children:["$",Ge.toFixed(2)]})}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:"50%",background:Be?"rgba(0,255,136,0.15)":"rgba(255,68,102,0.15)",color:Be?"#00ff88":"#ff4466",fontSize:12,fontWeight:700},children:Be?"":""})})]},Re)})})]})})]}),t.jsxs("div",{style:{marginBottom:24},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING SPEECHES"}),t.jsx("span",{style:{color:"#666",fontSize:11},children:"(Scheduled for Transcription)"})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EST. DURATION"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"STATUS"})]})}),t.jsx("tbody",{children:[{date:"Wed, Jan 29",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",estDuration:"~55m"},{date:"Fri, Feb 7",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",estDuration:"~40m"},{date:"Wed, Feb 12",time:"15:00",event:"U.S. President Trump Speaks",speaker:"Trump",estDuration:"~30m"},{date:"Wed, Mar 19",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",estDuration:"~55m"}].map((Y,Q)=>{const Re=Y.speaker==="Powell"?"#A78BFA":Y.speaker==="Trump"?"#FF6B6B":"#00aaff";return t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:Q%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[t.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:Y.date}),t.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.time}),t.jsxs("td",{style:{padding:"10px 8px"},children:[t.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:Y.event}),t.jsx("div",{style:{color:Re,fontSize:10,marginTop:2},children:Y.speaker})]}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.estDuration}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(139,92,246,0.2)",color:"#A78BFA"},children:"SCHEDULED"})})]},Q)})})]})})]}),(()=>{const Y=[{sentiment:-.08,direction:"bearish",o:4495,c:4488.8},{sentiment:.15,direction:"bullish",o:4425,c:4448.6},{sentiment:-.12,direction:"bearish",o:4380,c:4362.5},{sentiment:.05,direction:"neutral",o:4320,c:4322.4},{sentiment:.22,direction:"bullish",o:4285.5,c:4312.8},{sentiment:.18,direction:"bullish",o:4245,c:4268.9},{sentiment:-.15,direction:"bearish",o:4195,c:4175.2},{sentiment:.08,direction:"bullish",o:4150,c:4162.5},{sentiment:.28,direction:"bullish",o:4085,c:4128.4},{sentiment:-.05,direction:"neutral",o:4055,c:4058.8},{sentiment:.35,direction:"bullish",o:3985,c:4045.8},{sentiment:.12,direction:"bullish",o:3925,c:3952.2},{sentiment:-.18,direction:"bearish",o:3895,c:3865.4},{sentiment:.1,direction:"bullish",o:3845,c:3868.2}];let Q=0,Re=0;Y.forEach(it=>{const Je=it.c-it.o,Lt=Je>3?"bullish":Je<-3?"bearish":"neutral";(it.direction===Lt||it.direction==="neutral"&&Math.abs(Je)<=3)&&(Q++,Re+=Math.abs(Je))});const Ge=Math.round(Q/Y.length*100),ce=(Y.reduce((it,Je)=>it+Math.abs(Je.c-Je.o),0)/Y.length).toFixed(2),Be=Math.round(Re*100);return t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.1) 0%, rgba(0,170,255,0.05) 100%)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:12,padding:20,marginTop:8},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[t.jsx("span",{style:{fontSize:18},children:""}),t.jsx("span",{style:{color:"#fff",fontSize:14,fontWeight:600},children:"Deepgram Speech Analysis ROI (6 Months)"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:[t.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"SPEECHES"}),t.jsx("div",{style:{color:"#fff",fontSize:24,fontWeight:700},children:Y.length})]}),t.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"CORRECT"}),t.jsx("div",{style:{color:"#00ff88",fontSize:24,fontWeight:700},children:Q})]}),t.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"ACCURACY"}),t.jsxs("div",{style:{color:Ge>=70?"#00ff88":"#ffaa00",fontSize:24,fontWeight:700},children:[Ge,"%"]})]}),t.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"AVG MOVE"}),t.jsxs("div",{style:{color:"#00aaff",fontSize:24,fontWeight:700},children:["$",ce]})]}),t.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"$ VALUE"}),t.jsxs("div",{style:{color:"#FFD700",fontSize:24,fontWeight:700},children:["$",Be.toLocaleString()]})]})]}),t.jsx("div",{style:{marginTop:16,padding:"12px 16px",background:"rgba(139,92,246,0.1)",borderRadius:8,border:"1px solid rgba(139,92,246,0.2)"},children:t.jsxs("p",{style:{color:"#aaa",fontSize:11,margin:0,lineHeight:1.5},children:[t.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" VERDICT: ",Ge>=70?"KEEP DEEPGRAM":"MONITOR"]})," - At ",Ge,"% accuracy on Fed speeches, capturing $",Be.toLocaleString()," in value over 6 months.",t.jsx("span",{style:{color:"#888"},children:" Note: Fed Chair position may change - monitor for new appointments."})]})})]})})()]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:16,padding:24,marginTop:24},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[t.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[t.jsx("span",{style:{fontSize:22},children:""}),"Red Folder News Events"]}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:t.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(255,68,102,0.2)",color:"#ff4466",fontSize:10,fontWeight:600},children:"HIGH IMPACT DATA RELEASES"})})]}),t.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Instant economic data releases  30-minute candle OHLC at release time  No transcription (instant release)"}),t.jsxs("div",{style:{marginBottom:24},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{color:"#ff4466",fontSize:12,fontWeight:600},children:" PAST RELEASES"}),t.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,68,102,0.2)"},children:[t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"ACTUAL"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"30m OHLC"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"})]})}),t.jsxs("tbody",{children:[(((L=l.economic_calendar)==null?void 0:L.past)||[]).map((Y,Q)=>{const Re=Y.impact==="high"||Y.impact==="critical"?"#ff4466":Y.impact==="medium"?"#ffaa00":"#888";return t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:Q%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[t.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:Y.date}),t.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.time}),t.jsxs("td",{style:{padding:"10px 8px"},children:[t.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:Y.event}),t.jsx("span",{style:{padding:"2px 6px",borderRadius:3,fontSize:8,fontWeight:600,background:`${Re}20`,color:Re,marginTop:4,display:"inline-block"},children:Y.impact.toUpperCase()})]}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.actual||Y.forecast})}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.forecast}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#666",fontSize:10},children:"--"}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#666",fontSize:10},children:"--"})]},Q)}),(!((Me=l.economic_calendar)!=null&&Me.past)||l.economic_calendar.past.length===0)&&t.jsx("tr",{children:t.jsx("td",{colSpan:"7",style:{padding:20,textAlign:"center",color:"#666"},children:"No past events this month"})})]})]})})]}),t.jsxs("div",{style:{marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[t.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING RELEASES"}),t.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",((Ke=l.economic_calendar)==null?void 0:Ke.current_month)||new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]}),((zt=l.economic_calendar)==null?void 0:zt.last_updated)&&t.jsxs("span",{style:{color:"#444",fontSize:9,marginLeft:"auto"},children:["Updated: ",l.economic_calendar.last_updated]})]}),t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"PREVIOUS"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"IMPACT"})]})}),t.jsxs("tbody",{children:[(((Dt=l.economic_calendar)==null?void 0:Dt.upcoming)||[]).map((Y,Q)=>{const Re=Y.impact==="high"||Y.impact==="critical"?"#ff4466":Y.impact==="medium"?"#ffaa00":"#888",Ge=Y.is_today;return t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:Ge?"rgba(255,170,0,0.1)":Q%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[t.jsxs("td",{style:{padding:"10px 8px",color:Ge?"#ffaa00":"#aaa",fontSize:11,whiteSpace:"nowrap",fontWeight:Ge?600:400},children:[Ge&&t.jsx("span",{style:{marginRight:4},children:""}),Y.date]}),t.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.time}),t.jsx("td",{style:{padding:"10px 8px"},children:t.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:Y.event})}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.forecast}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:Y.previous}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${Re}20`,color:Re},children:Y.impact.toUpperCase()})})]},Q)}),(!((bt=l.economic_calendar)!=null&&bt.upcoming)||l.economic_calendar.upcoming.length===0)&&t.jsx("tr",{children:t.jsx("td",{colSpan:"6",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming events"})})]})]})})]})]})]})},zg=({onResetComplete:e})=>{const[n,r]=A.useState(!1),[i,o]=A.useState(null),[s,l]=A.useState(""),d=async()=>{r(!0),o(null),l("Initiating full system reset...");try{l("Stopping all connections...");const c=await fetch(`${en}/reset-connection`,{method:"POST",headers:{"Content-Type":"application/json"}});if(c.ok){const p=await c.json();l("Clearing state and reconnecting..."),await new Promise(m=>setTimeout(m,2e3)),l("Verifying connection...");let h=0;for(;h<10;){try{const m=await fetch(`${en}`);if(m.ok){const u=await m.json();if(u.data_source&&u.data_source!=="DISCONNECTED"){o({type:"success",message:"System reset complete! Live data restored."}),e&&e();break}}}catch{}h++,l(`Waiting for connection... (${h}/10)`),await new Promise(m=>setTimeout(m,1e3))}h>=10&&o({type:"warning",message:"Reset complete. Connection may take a moment to establish."})}else o({type:"error",message:"Failed to reset - backend may need manual restart"})}catch{o({type:"error",message:"Network error - check if backend is running on port 8080"})}l(""),r(!1)};return t.jsxs("div",{children:[t.jsx("button",{onClick:d,disabled:n,style:{width:"100%",padding:"16px 24px",background:n?"linear-gradient(135deg, #555 0%, #333 100%)":"linear-gradient(135deg, #ff4466 0%, #cc2244 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:15,fontWeight:700,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"all 0.2s ease",boxShadow:n?"none":"0 4px 20px rgba(255,68,102,0.3)"},children:n?t.jsxs(t.Fragment,{children:[t.jsx("span",{style:{animation:"spin 1s linear infinite"},children:""}),s||"Resetting..."]}):t.jsx(t.Fragment,{children:" FULL SYSTEM RESET"})}),i&&t.jsxs("div",{style:{marginTop:12,padding:"12px 16px",borderRadius:8,background:i.type==="success"?"rgba(0,255,136,0.15)":i.type==="warning"?"rgba(255,170,0,0.15)":"rgba(255,68,102,0.15)",border:`1px solid ${i.type==="success"?"#00ff88":i.type==="warning"?"#ffaa00":"#ff4466"}`,color:i.type==="success"?"#00ff88":i.type==="warning"?"#ffaa00":"#ff4466",fontSize:13,textAlign:"center"},children:[i.type==="success"?"":i.type==="warning"?"":""," ",i.message]}),t.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(255,68,102,0.05)",borderRadius:8,border:"1px solid rgba(255,68,102,0.1)"},children:[t.jsx("div",{style:{fontSize:11,color:"#ff6688",marginBottom:8,fontWeight:600},children:"THIS WILL:"}),t.jsxs("ul",{style:{margin:0,paddingLeft:16,lineHeight:1.8,fontSize:11,color:"#888"},children:[t.jsx("li",{children:"Kill all active data connections"}),t.jsx("li",{children:"Clear volume, delta, and TPO counters"}),t.jsx("li",{children:"Reset session high/low tracking"}),t.jsx("li",{children:"Restart Databento live feed"}),t.jsx("li",{children:"Re-establish fresh connection"})]})]})]})},Rg=({settings:e,onSettingsChange:n,trades:r=[],dateRange:i,connectionStatus:o,onResetConnection:s})=>{var v,f;const[l,d]=A.useState(e),[c,p]=A.useState(!1),[h,m]=A.useState(!1),[u,z]=A.useState(null),S=(T,j)=>{const b=JSON.parse(JSON.stringify(l)),O=T.split(".");let _=b;for(let D=0;D<O.length-1;D++)_=_[O[D]];_[O[O.length-1]]=j,d(b),p(!0)},k=()=>{const T=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,j=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;if(Math.abs(T-100)>.1){alert(`Entry Tier allocations must sum to 100%. Currently: ${T}%`);return}if(Math.abs(j-100)>.1){alert(`Target Tier allocations must sum to 100%. Currently: ${j}%`);return}n(l),p(!1)},y=()=>{d(Cf),p(!0)},a=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,g=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;return t.jsxs("div",{style:C.settingsPanel,children:[t.jsxs("div",{style:C.settingsHeader,children:[t.jsx("h2",{style:C.dashboardTitle,children:" Strategy Parameters"}),t.jsx("p",{style:C.settingsSubtitle,children:"Adjust thresholds and allocations to see how analytics change"})]}),t.jsxs("div",{style:C.settingsGrid,children:[t.jsxs("div",{style:C.settingsCard,children:[t.jsx("h3",{style:C.settingsCardTitle,children:" Signal Thresholds"}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"Delta Threshold"}),t.jsx("span",{style:C.sliderValue,children:l.deltaThreshold.toLocaleString()})]}),t.jsx("input",{type:"range",min:"-5000",max:"-1000",step:"100",value:l.deltaThreshold,onChange:T=>S("deltaThreshold",parseInt(T.target.value)),style:C.slider}),t.jsxs("div",{style:C.sliderTicks,children:[t.jsx("span",{children:"-5000"}),t.jsx("span",{children:"-3000"}),t.jsx("span",{children:"-1000"})]})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"Buying Imbalance %"}),t.jsxs("span",{style:C.sliderValue,children:[l.buyingImbalancePct,"%"]})]}),t.jsx("input",{type:"range",min:"200",max:"600",step:"25",value:l.buyingImbalancePct,onChange:T=>S("buyingImbalancePct",parseInt(T.target.value)),style:C.slider}),t.jsxs("div",{style:C.sliderTicks,children:[t.jsx("span",{children:"200%"}),t.jsx("span",{children:"400%"}),t.jsx("span",{children:"600%"})]})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"Divergence Highlight Threshold"}),t.jsx("span",{style:C.sliderValue,children:l.divergenceThreshold||0})]}),t.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:l.divergenceThreshold||0,onChange:T=>S("divergenceThreshold",parseInt(T.target.value)),style:C.slider}),t.jsxs("div",{style:C.sliderTicks,children:[t.jsx("span",{children:"0 (All)"}),t.jsx("span",{children:"100"}),t.jsx("span",{children:"200"})]}),t.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Delta divergence amount required for white glow on candles (0 = always highlight)"})]})]}),t.jsxs("div",{style:C.settingsCard,children:[t.jsx("h3",{style:C.settingsCardTitle,children:" Entry Tier Allocation"}),t.jsxs("p",{style:C.allocationNote,children:["Total: ",t.jsxs("span",{style:{color:Math.abs(a-100)<.1?"#00ff88":"#ff4466"},children:[a,"%"]}),Math.abs(a-100)>=.1&&t.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"Tier I (Feeler)  8:45-9:20 ET"}),t.jsxs("span",{style:C.sliderValue,children:[l.entryTiers.tier1,"%"]})]}),t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier1,onChange:T=>S("entryTiers.tier1",parseInt(T.target.value)),style:C.slider})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"Tier II (Builder)  9:35-10:00 ET"}),t.jsxs("span",{style:C.sliderValue,children:[l.entryTiers.tier2,"%"]})]}),t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier2,onChange:T=>S("entryTiers.tier2",parseInt(T.target.value)),style:C.slider})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"Tier III (Runner)  10:15-10:45 ET"}),t.jsxs("span",{style:C.sliderValue,children:[l.entryTiers.tier3,"%"]})]}),t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier3,onChange:T=>S("entryTiers.tier3",parseInt(T.target.value)),style:C.slider})]}),t.jsxs("div",{style:C.tierVisual,children:[t.jsx("div",{style:{...C.tierBar,width:`${l.entryTiers.tier1}%`,background:"#00aaff"}}),t.jsx("div",{style:{...C.tierBar,width:`${l.entryTiers.tier2}%`,background:"#00ff88"}}),t.jsx("div",{style:{...C.tierBar,width:`${l.entryTiers.tier3}%`,background:"#ffaa00"}})]}),t.jsxs("div",{style:C.tierLegend,children:[t.jsxs("span",{children:[t.jsx("span",{style:{color:"#00aaff"},children:""})," Tier I"]}),t.jsxs("span",{children:[t.jsx("span",{style:{color:"#00ff88"},children:""})," Tier II"]}),t.jsxs("span",{children:[t.jsx("span",{style:{color:"#ffaa00"},children:""})," Tier III"]})]})]}),t.jsxs("div",{style:C.settingsCard,children:[t.jsx("h3",{style:C.settingsCardTitle,children:" Target Allocation"}),t.jsxs("p",{style:C.allocationNote,children:["Total: ",t.jsxs("span",{style:{color:Math.abs(g-100)<.1?"#00ff88":"#ff4466"},children:[g,"%"]}),Math.abs(g-100)>=.1&&t.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"VWAP Target (88% historical hit rate)"}),t.jsxs("span",{style:C.sliderValue,children:[l.targetTiers.vwap,"%"]})]}),t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.vwap,onChange:T=>S("targetTiers.vwap",parseInt(T.target.value)),style:C.slider})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"IB Mid Target (75% historical hit rate)"}),t.jsxs("span",{style:C.sliderValue,children:[l.targetTiers.ibMid,"%"]})]}),t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibMid,onChange:T=>S("targetTiers.ibMid",parseInt(T.target.value)),style:C.slider})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"IB High Target (40% historical hit rate)"}),t.jsxs("span",{style:C.sliderValue,children:[l.targetTiers.ibHigh,"%"]})]}),t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibHigh,onChange:T=>S("targetTiers.ibHigh",parseInt(T.target.value)),style:C.slider})]}),t.jsxs("div",{style:C.tierVisual,children:[t.jsx("div",{style:{...C.tierBar,width:`${l.targetTiers.vwap}%`,background:"#00ff88"}}),t.jsx("div",{style:{...C.tierBar,width:`${l.targetTiers.ibMid}%`,background:"#ffaa00"}}),t.jsx("div",{style:{...C.tierBar,width:`${l.targetTiers.ibHigh}%`,background:"#ff4466"}})]}),t.jsxs("div",{style:C.tierLegend,children:[t.jsxs("span",{children:[t.jsx("span",{style:{color:"#00ff88"},children:""})," VWAP"]}),t.jsxs("span",{children:[t.jsx("span",{style:{color:"#ffaa00"},children:""})," IB Mid"]}),t.jsxs("span",{children:[t.jsx("span",{style:{color:"#ff4466"},children:""})," IB High"]})]})]}),t.jsxs("div",{style:C.settingsCard,children:[t.jsx("h3",{style:C.settingsCardTitle,children:" Backtest Filters"}),t.jsx("p",{style:C.allocationNote,children:"Filter trades by grade, tier, and R-multiple"}),t.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12},children:[t.jsxs("div",{style:{flex:1},children:[t.jsx("label",{style:{...C.sliderLabel,fontSize:10},children:"Grade"}),t.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:["A","B","C"].map(T=>{var j,b;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:((b=(j=l.filters)==null?void 0:j.grades)==null?void 0:b[T])??!0,onChange:O=>{const _={...l.filters};_.grades||(_.grades={A:!0,B:!0,C:!0}),_.grades[T]=O.target.checked,S("filters",_)},style:{width:14,height:14}}),t.jsx("span",{style:{color:T==="A"?"#00ff88":T==="B"?"#ffaa00":"#ff4466",fontWeight:600,fontSize:11},children:T})]},T)})})]}),t.jsxs("div",{style:{flex:1},children:[t.jsx("label",{style:{...C.sliderLabel,fontSize:10},children:"Tier"}),t.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:[1,2,3].map(T=>{var j,b;return t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[t.jsx("input",{type:"checkbox",checked:((b=(j=l.filters)==null?void 0:j.tiers)==null?void 0:b[T])??!0,onChange:O=>{const _={...l.filters};_.tiers||(_.tiers={1:!0,2:!0,3:!0}),_.tiers[T]=O.target.checked,S("filters",_)},style:{width:14,height:14}}),t.jsx("span",{style:{color:T===1?"#00aaff":T===2?"#00ff88":"#ffaa00",fontWeight:600,fontSize:11},children:T===1?"I":T===2?"II":"III"})]},T)})})]})]}),t.jsxs("div",{style:C.sliderGroup,children:[t.jsxs("div",{style:C.sliderHeader,children:[t.jsx("label",{style:C.sliderLabel,children:"Minimum R-Multiple"}),t.jsxs("span",{style:C.sliderValue,children:[(((v=l.filters)==null?void 0:v.minR)??-10).toFixed(1),"R"]})]}),t.jsx("input",{type:"range",min:"-10",max:"5",step:"0.5",value:((f=l.filters)==null?void 0:f.minR)??-10,onChange:T=>{const j={...l.filters,minR:parseFloat(T.target.value)};S("filters",j)},style:C.slider}),t.jsxs("div",{style:C.sliderTicks,children:[t.jsx("span",{children:"-10R (All)"}),t.jsx("span",{children:"0R"}),t.jsx("span",{children:"5R"})]})]})]})]}),t.jsxs("div",{style:C.settingsActions,children:[t.jsx("button",{style:{...C.actionButton,...C.resetButton},onClick:y,children:"Reset to Defaults"}),t.jsx("button",{style:{...C.actionButton,...C.applyButton,opacity:c?1:.5,cursor:c?"pointer":"not-allowed"},onClick:k,disabled:!c,children:c?" Apply Changes & Recalculate":"No Changes"})]}),t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(138,43,226,0.1) 0%, rgba(75,0,130,0.05) 100%)",border:"2px solid rgba(138,43,226,0.3)",borderRadius:16,padding:24,marginBottom:24},children:[t.jsx("h3",{style:{margin:"0 0 16px 0",color:"#9370DB",fontSize:18},children:" Project Horizon AI Optimizer"}),t.jsxs("p",{style:{color:"#888",fontSize:13,marginBottom:20},children:["Analyzes ",r.length," trades from ",i==null?void 0:i.start," to ",i==null?void 0:i.end," to find optimal parameters."]}),t.jsx("button",{style:{width:"100%",padding:"16px 32px",background:h?"linear-gradient(135deg, #666 0%, #444 100%)":"linear-gradient(135deg, #9370DB 0%, #8B5CF6 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:16,fontWeight:700,cursor:h?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10},disabled:h||r.length===0,onClick:()=>{if(r.length===0){alert("No trades available to optimize. Please load trade data first.");return}m(!0),z(null),setTimeout(()=>{const T=[-1500,-2e3,-2500,-3e3,-3500,-4e3],j=[300,350,400,450,500];let b={pnl:-1/0,winRate:0,settings:null,tradesUsed:0};if(T.forEach(G=>{j.forEach(_e=>{const Fe=r.filter(I=>!(I.delta!==void 0&&I.delta>G||I.buyingImbalance!==void 0&&I.buyingImbalance<_e));if(Fe.length>0){const I=Fe.reduce((me,w)=>me+(w.pnl||0),0),tt=Fe.filter(me=>(me.pnl||0)>0).length/Fe.length*100;(I*(tt/100)>b.pnl*(b.winRate/100)||I>b.pnl&&tt>=50)&&(b={pnl:I,winRate:tt,tradesUsed:Fe.length,settings:{deltaThreshold:G,buyingImbalancePct:_e}})}})}),!b.settings){const G=r.reduce((Fe,I)=>Fe+(I.pnl||0),0),_e=r.filter(Fe=>(Fe.pnl||0)>0).length;b={pnl:G,winRate:_e/r.length*100,tradesUsed:r.length,settings:{deltaThreshold:-2500,buyingImbalancePct:400}}}const O=r.filter(G=>(G.pnl||0)>0),_=O.length>0?O.reduce((G,_e)=>G+(_e.r||0),0)/O.length:1.5;let D={tier1:25,tier2:40,tier3:35},W={vwap:50,ibMid:35,ibHigh:15};_>2?(D={tier1:20,tier2:35,tier3:45},W={vwap:40,ibMid:35,ibHigh:25}):_<1&&(D={tier1:30,tier2:45,tier3:25},W={vwap:60,ibMid:30,ibHigh:10}),z({...b,entryTiers:D,targetTiers:W,avgR:_.toFixed(2),totalTrades:r.length}),m(!1)},1500)},children:h?t.jsxs(t.Fragment,{children:[t.jsx("span",{style:{animation:"pulse 1s infinite"},children:""}),t.jsx("span",{children:"Optimizing..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Run AI Optimization"})]})}),u&&t.jsxs("div",{style:{marginTop:20,padding:20,background:"rgba(0,255,136,0.05)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12},children:[t.jsx("h4",{style:{margin:"0 0 16px 0",color:"#00ff88",fontSize:14},children:" Optimization Complete"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[t.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{fontSize:11,color:"#888"},children:"PROJECTED P&L"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.pnl>=0?"#00ff88":"#ff4466"},children:["$",u.pnl.toLocaleString()]})]}),t.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{fontSize:11,color:"#888"},children:"WIN RATE"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.winRate>=50?"#00ff88":"#ffaa00"},children:[u.winRate.toFixed(1),"%"]})]}),t.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{fontSize:11,color:"#888"},children:"TRADES USED"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#fff"},children:[u.tradesUsed,"/",u.totalTrades]})]}),t.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[t.jsx("div",{style:{fontSize:11,color:"#888"},children:"AVG R-MULTIPLE"}),t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#00aaff"},children:[u.avgR,"R"]})]})]}),t.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16},children:[t.jsx("strong",{children:"Recommended Settings:"}),t.jsxs("div",{style:{marginTop:8,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[t.jsxs("div",{children:["Delta Threshold: ",t.jsx("span",{style:{color:"#9370DB"},children:u.settings.deltaThreshold.toLocaleString()})]}),t.jsxs("div",{children:["Buy Imbalance: ",t.jsxs("span",{style:{color:"#9370DB"},children:[u.settings.buyingImbalancePct,"%"]})]}),t.jsxs("div",{children:["Entry Tiers: ",t.jsxs("span",{style:{color:"#9370DB"},children:[u.entryTiers.tier1,"/",u.entryTiers.tier2,"/",u.entryTiers.tier3]})]}),t.jsxs("div",{children:["Targets: ",t.jsxs("span",{style:{color:"#9370DB"},children:[u.targetTiers.vwap,"/",u.targetTiers.ibMid,"/",u.targetTiers.ibHigh]})]})]})]}),t.jsx("button",{style:{width:"100%",padding:"12px 20px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:8,color:"#000",fontSize:14,fontWeight:700,cursor:"pointer"},onClick:()=>{const T={...l,deltaThreshold:u.settings.deltaThreshold,buyingImbalancePct:u.settings.buyingImbalancePct,entryTiers:u.entryTiers,targetTiers:u.targetTiers};d(T),n(T),z(null),alert(" Optimal settings applied!")},children:" Apply Optimal Settings"})]}),t.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:"Grid search optimization across Delta & Imbalance parameters"})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:16,padding:24,marginBottom:24},children:[t.jsx("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16},children:" Timezone"}),t.jsx("div",{style:{padding:"14px 20px",background:"rgba(0,170,255,0.1)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:10,color:"#00aaff",fontSize:14,fontWeight:500},children:" New York (ET) - Eastern Time"}),t.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666"},children:"All session times are displayed in Eastern Time (ET). Market hours: 6:00 PM - 5:00 PM ET (Sun-Fri)"})]}),t.jsxs("div",{style:{background:o!=null&&o.connected?"linear-gradient(135deg, rgba(0,255,136,0.05) 0%, rgba(0,200,100,0.02) 100%)":"linear-gradient(135deg, rgba(255,68,102,0.1) 0%, rgba(200,50,80,0.05) 100%)",border:`2px solid ${o!=null&&o.connected?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`,borderRadius:16,padding:24,marginBottom:24},children:[t.jsxs("h3",{style:{margin:"0 0 16px 0",color:o!=null&&o.connected?"#00ff88":"#ff4466",fontSize:18},children:[o!=null&&o.connected?"":""," Live Data Connection"]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:20},children:[t.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[t.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"STATUS"}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:o!=null&&o.connected?"#00ff88":"#ff4466"},children:o!=null&&o.connected?"LIVE":"OFFLINE"})]}),t.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[t.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"UPTIME"}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:o!=null&&o.connected?"#00aaff":"#888"},children:o!=null&&o.lastSuccessTime?Math.floor((Date.now()-new Date(o.lastSuccessTime).getTime())/1e3)<60?"STABLE":"RECONNECTING":"--"})]}),t.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[t.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"ERRORS"}),t.jsx("div",{style:{fontSize:14,fontWeight:700,color:(o==null?void 0:o.errorCount)>0?"#ffaa00":"#00ff88"},children:(o==null?void 0:o.errorCount)||0})]})]}),(o==null?void 0:o.lastError)&&t.jsxs("div",{style:{padding:12,background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:8,marginBottom:16},children:[t.jsx("div",{style:{fontSize:10,color:"#ff4466",marginBottom:4},children:"LAST ERROR"}),t.jsx("div",{style:{fontSize:12,color:"#ffaa00",fontFamily:"monospace",wordBreak:"break-all"},children:o.lastError}),o.reconnectAttempts>0&&t.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:8},children:["Auto-reconnect attempts: ",o.reconnectAttempts]})]}),(o==null?void 0:o.lastSuccessTime)&&t.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:16},children:["Last successful data: ",new Date(o.lastSuccessTime).toLocaleTimeString()]}),t.jsx(zg,{onResetComplete:s})]}),t.jsxs("div",{style:C.settingsInfo,children:[t.jsx("h4",{style:C.infoTitle,children:" How Settings Affect Analytics"}),t.jsxs("ul",{style:C.infoList,children:[t.jsxs("li",{children:[t.jsx("strong",{children:"Delta Threshold:"})," Trades with delta deeper than this value are considered valid setups"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Buying Imbalance %:"})," Minimum imbalance required for entry confirmation"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Entry Tier Allocation:"})," How position size is distributed across the three entry phases"]}),t.jsxs("li",{children:[t.jsx("strong",{children:"Target Allocation:"})," Distribution of profit-taking across the three target levels"]})]})]})]})},Gi=A.memo(({title:e,value:n,subtitle:r,trend:i,color:o})=>{const s=i>0?"#00ff88":i<0?"#ff4466":"#888",l=o||"rgba(255,255,255,0.03)";return t.jsxs("div",{style:{...C.statsCard,background:l},children:[t.jsx("div",{style:C.statsTitle,children:e}),t.jsx("div",{style:C.statsValue,children:n}),r&&t.jsx("div",{style:C.statsSubtitle,children:r}),i!==void 0&&t.jsxs("div",{style:{...C.statsTrend,color:s},children:[i>0?"":i<0?"":""," ",Math.abs(i).toFixed(1),"%"]})]})}),Ig=({metrics:e,settings:n})=>{var h,m;const[r,i]=A.useState(null),[o,s]=A.useState({x:0,y:0}),l=[{name:`Delta < ${((h=n.deltaThreshold)==null?void 0:h.toLocaleString())||"-2500"}`,active:(e.delta_30m||0)<=(n.deltaThreshold||-2500),critical:!0,tooltip:(e.delta_30m||0)<=(n.deltaThreshold||-2500)?` 30m delta (${(e.delta_30m||0).toLocaleString()}) is below threshold (${(n.deltaThreshold||-2500).toLocaleString()}), indicating strong selling pressure`:` 30m delta (${(e.delta_30m||0).toLocaleString()}) is above threshold (${(n.deltaThreshold||-2500).toLocaleString()}), not enough selling pressure`},{name:"Outside IB",active:(e.current_price||0)>(e.ib_high||0)&&(e.ib_high||0)>0||(e.current_price||0)<(e.ib_low||999999)&&(e.ib_low||999999)<999999,critical:!0,tooltip:(()=>{const u=e.current_price||0,z=e.ib_high||0,S=e.ib_low||999999,k=u>z&&z>0,y=u<S&&S<999999;return k?` Price ($${u.toFixed(2)}) is ABOVE IB High ($${z.toFixed(2)}), potential breakout`:y?` Price ($${u.toFixed(2)}) is BELOW IB Low ($${S.toFixed(2)}), potential breakdown`:` Price ($${u.toFixed(2)}) is within IB range ($${S.toFixed(2)} - $${z.toFixed(2)})`})()},{name:"At pdPOC",active:Math.abs((e.current_price||0)-(e.pdpoc||0))<=2&&(e.pdpoc||0)>0,critical:!1,tooltip:Math.abs((e.current_price||0)-(e.pdpoc||0))<=2&&(e.pdpoc||0)>0?` Price is within $2 of previous day POC ($${(e.pdpoc||0).toFixed(2)}), key support level`:` Price is $${Math.abs((e.current_price||0)-(e.pdpoc||0)).toFixed(2)} away from pdPOC ($${(e.pdpoc||0).toFixed(2)})`},{name:"Absorption",active:(e.absorption_ratio||0)>1.2,critical:!0,tooltip:(e.absorption_ratio||0)>1.2?` Absorption ratio (${(e.absorption_ratio||0).toFixed(2)}) > 1.2, buyers absorbing selling pressure`:` Absorption ratio (${(e.absorption_ratio||0).toFixed(2)})  1.2, not enough buying absorption`},{name:`Buy Imb. ${n.buyingImbalancePct||400}%+`,active:(e.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400),critical:!1,tooltip:(e.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400)?` Buying imbalance (${e.buying_imbalance_pct||0}%) meets threshold (${n.buyingImbalancePct||400}%)`:` Buying imbalance (${e.buying_imbalance_pct||0}%) below threshold (${n.buyingImbalancePct||400}%)`},{name:"Stacked Imb. 3+",active:(e.stacked_buy_imbalances||0)>=3,critical:!1,tooltip:(e.stacked_buy_imbalances||0)>=3?` ${e.stacked_buy_imbalances||0} stacked buy imbalances detected, strong buying interest`:` Only ${e.stacked_buy_imbalances||0} stacked imbalances, need 3+ for confirmation`}],d=l.filter(u=>u.active).length,c=(u,z)=>{const S=u.target.getBoundingClientRect();s({x:S.left,y:S.bottom+8}),i(z)},p=()=>{i(null)};return t.jsxs("div",{style:C.signalMatrix,children:[t.jsxs("div",{style:C.signalHeader,children:[t.jsx("h3",{style:C.signalTitle,children:"Signal Matrix"}),t.jsx("div",{style:C.signalCount,children:t.jsxs("span",{style:{color:d>=4?"#00ff88":"#ffaa00"},children:[d,"/6 Active"]})})]}),t.jsx("div",{style:C.signalGrid,children:l.map((u,z)=>t.jsxs("div",{onMouseEnter:S=>c(S,u),onMouseLeave:p,style:{...C.signalItem,background:u.active?"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,255,136,0.05) 100%)":"rgba(255,68,102,0.1)",borderColor:u.active?"#00ff88":"#ff4466",cursor:"help"},children:[t.jsx("div",{style:{...C.signalIndicator,background:u.active?"#00ff88":"#ff4466",boxShadow:u.active?"0 0 10px #00ff88":"none"}}),t.jsx("span",{style:C.signalName,children:u.name}),u.critical&&t.jsx("span",{style:C.criticalBadge,children:"!"})]},z))}),r&&t.jsxs("div",{style:{position:"fixed",left:o.x,top:o.y,background:"rgba(20,20,30,0.98)",border:`2px solid ${r.active?"#00ff88":"#ff4466"}`,borderRadius:12,padding:"14px 18px",maxWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[t.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:r.active?"#00ff88":"#ff4466",boxShadow:r.active?"0 0 8px #00ff88":"none"}}),t.jsx("span",{style:{color:r.active?"#00ff88":"#ff4466",fontWeight:700,fontSize:14},children:r.active?"CONDITION MET":"NOT MET"}),r.critical&&t.jsx("span",{style:{background:"#ff4466",color:"#000",padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:700},children:"CRITICAL"})]}),t.jsx("div",{style:{color:"#ddd",fontSize:13,lineHeight:1.5},children:r.tooltip})]}),t.jsxs("div",{style:C.setupStatus,children:[t.jsx("span",{style:C.phaseLabel,children:"Current Phase:"}),t.jsx("span",{style:{...C.phaseValue,color:(m=e.current_phase)!=null&&m.includes("IB")?"#00ff88":e.current_phase==="POST_IB"?"#ffaa00":e.current_phase==="DISCONNECTED"?"#ff4466":"#888"},children:e.current_phase})]})]})},Eg=({data:e,selectedYear:n,setSelectedYear:r})=>e.yearly_pnl.length===0?t.jsxs("div",{style:C.drillDownContainer,children:[t.jsx("h3",{style:C.sectionTitle,children:" Yearly Performance"}),t.jsx("p",{style:{color:"#666",textAlign:"center",padding:"40px"},children:"No data available for selected date range"})]}):t.jsxs("div",{style:C.drillDownContainer,children:[t.jsx("h3",{style:C.sectionTitle,children:" Yearly Performance"}),t.jsx("div",{style:C.yearGrid,children:e.yearly_pnl.map(i=>t.jsxs("div",{style:{...C.yearCard,border:n===i.year?"2px solid #00ff88":"1px solid rgba(255,255,255,0.1)",background:n===i.year?"rgba(0,255,136,0.1)":"rgba(255,255,255,0.02)"},onClick:()=>r(i.year),children:[t.jsx("div",{style:C.yearLabel,children:i.year}),t.jsxs("div",{style:{...C.yearPnl,color:i.pnl>=0?"#00ff88":"#ff4466"},children:["$",i.pnl.toLocaleString()]}),t.jsxs("div",{style:C.yearStats,children:[t.jsxs("span",{children:[i.trades," trades"]}),t.jsxs("span",{style:{color:"#00ff88"},children:[(i.win_rate*100).toFixed(0),"% WR"]})]})]},i.year))})]}),Lg=({trades:e,onDayClick:n})=>{const[r,i]=A.useState(()=>{if(e.length>0){const j=e[e.length-1],b=new Date(j.date);return{year:b.getFullYear(),month:b.getMonth()}}return{year:2025,month:11}}),[o,s]=A.useState(null),[l,d]=A.useState(null),[c,p]=A.useState({x:0,y:0}),h=A.useMemo(()=>{const j={};return e.forEach(b=>{j[b.date]||(j[b.date]=[]),j[b.date].push(b)}),j},[e]),m=(j,b)=>new Date(j,b+1,0).getDate(),u=(j,b)=>new Date(j,b,1).getDay(),z=m(r.year,r.month),S=u(r.year,r.month),k=["January","February","March","April","May","June","July","August","September","October","November","December"],y=()=>{i(j=>j.month===0?{year:j.year-1,month:11}:{...j,month:j.month-1})},a=()=>{i(j=>j.month===11?{year:j.year+1,month:0}:{...j,month:j.month+1})},g=[];for(let j=0;j<S;j++)g.push({day:null,date:null});for(let j=1;j<=z;j++){const b=`${r.year}-${String(r.month+1).padStart(2,"0")}-${String(j).padStart(2,"0")}`,O=h[b]||[],_=O.reduce((D,W)=>D+W.pnl,0);g.push({day:j,date:b,trades:O,pnl:_,hasTradeData:O.length>0})}const v=(j,b)=>{if(b.hasTradeData){const O=j.target.getBoundingClientRect();p({x:O.left+O.width/2,y:O.top-10}),s(b)}},f=j=>{j.hasTradeData&&(d(j),n&&n(j))},T=A.useMemo(()=>{const j=e.filter(_=>{const D=new Date(_.date);return D.getFullYear()===r.year&&D.getMonth()===r.month}),b=j.reduce((_,D)=>_+D.pnl,0),O=j.filter(_=>_.pnl>0).length;return{trades:j.length,pnl:b,winRate:j.length>0?(O/j.length*100).toFixed(0):0}},[e,r]);return t.jsxs("div",{style:le.container,children:[t.jsxs("div",{style:le.header,children:[t.jsx("h3",{style:le.title,children:" Daily P&L Calendar"}),t.jsxs("div",{style:le.monthNav,children:[t.jsx("button",{onClick:y,style:le.navButton,children:""}),t.jsxs("span",{style:le.monthLabel,children:[k[r.month]," ",r.year]}),t.jsx("button",{onClick:a,style:le.navButton,children:""})]}),t.jsxs("div",{style:le.monthStats,children:[t.jsxs("span",{children:[T.trades," trades"]}),t.jsxs("span",{style:{color:T.pnl>=0?"#00ff88":"#ff4466"},children:["$",T.pnl.toLocaleString()]}),t.jsxs("span",{style:{color:"#00ff88"},children:[T.winRate,"% WR"]})]})]}),t.jsx("div",{style:le.weekdays,children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(j=>t.jsx("div",{style:le.weekday,children:j},j))}),t.jsx("div",{style:le.grid,children:g.map((j,b)=>t.jsx("div",{style:{...le.day,...j.day?{}:le.emptyDay,...j.hasTradeData?{background:j.pnl>=0?`rgba(0, 255, 136, ${Math.min(.4,Math.abs(j.pnl)/5e4+.1)})`:`rgba(255, 68, 102, ${Math.min(.4,Math.abs(j.pnl)/5e4+.1)})`,cursor:"pointer",border:`1px solid ${j.pnl>=0?"#00ff88":"#ff4466"}`}:{},...(l==null?void 0:l.date)===j.date?{border:"2px solid #fff",boxShadow:"0 0 15px rgba(0,255,136,0.5)"}:{}},onMouseEnter:O=>v(O,j),onMouseLeave:()=>s(null),onClick:()=>j.day&&f(j),children:j.day&&t.jsxs(t.Fragment,{children:[t.jsx("span",{style:le.dayNumber,children:j.day}),j.hasTradeData&&t.jsxs("span",{style:{...le.dayPnl,color:j.pnl>=0?"#00ff88":"#ff4466"},children:[j.pnl>=0?"+":"",(j.pnl/1e3).toFixed(1),"k"]}),j.trades.length>1&&t.jsx("span",{style:le.tradeCount,children:j.trades.length})]})},b))}),o&&o.hasTradeData&&t.jsxs("div",{style:{...le.tooltip,left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[t.jsxs("div",{style:le.tooltipHeader,children:[o.date,"  ",o.trades.length," trade(s)"]}),o.trades.map((j,b)=>t.jsxs("div",{style:le.tooltipTrade,children:[t.jsxs("div",{style:le.tooltipRow,children:[t.jsxs("span",{children:["Grade ",j.grade,"  Tier ",j.tier]}),t.jsxs("span",{style:{color:j.pnl>=0?"#00ff88":"#ff4466"},children:["$",j.pnl.toLocaleString()]})]}),t.jsxs("div",{style:le.tooltipRow,children:[t.jsxs("span",{children:["Entry: $",j.entry.toFixed(2)]}),t.jsxs("span",{children:["Exit: $",j.exit.toFixed(2)]})]}),t.jsxs("div",{style:le.tooltipRow,children:[t.jsxs("span",{children:["Delta: ",j.delta]}),t.jsxs("span",{children:["Imb: ",j.buyingImbalance,"%"]})]}),t.jsxs("div",{style:le.tooltipRow,children:[t.jsxs("span",{children:["Conditions: ",j.grade==="A"?"6/6":j.grade==="B"?"5/6":"4/6"]}),t.jsxs("span",{children:[j.r>0?"+":"",j.r,"R"]})]})]},b)),t.jsx("div",{style:le.tooltipFooter,children:"Click for full details"})]}),l&&l.hasTradeData&&t.jsx("div",{style:le.modalOverlay,onClick:()=>d(null),children:t.jsxs("div",{style:le.modal,onClick:j=>j.stopPropagation(),children:[t.jsxs("div",{style:le.modalHeader,children:[t.jsxs("h3",{children:[" Trade Details - ",l.date]}),t.jsx("button",{onClick:()=>d(null),style:le.closeButton,children:""})]}),t.jsx("div",{style:le.modalContent,children:l.trades.map((j,b)=>{var O,_,D,W,G,_e,Fe;return t.jsxs("div",{style:le.tradeDetail,children:[t.jsxs("div",{style:le.tradeHeader,children:[t.jsxs("span",{style:le.tradeBadge,children:["Trade #",j.id]}),t.jsxs("span",{style:{...le.tradePnl,color:j.pnl>=0?"#00ff88":"#ff4466"},children:[j.pnl>=0?"+":"","$",j.pnl.toLocaleString()]})]}),t.jsxs("div",{style:le.tradeSection,children:[t.jsx("h4",{children:"Entry & Exit"}),t.jsxs("div",{style:le.tradeGrid,children:[t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"Entry Price"}),t.jsxs("span",{style:le.tradeValue,children:["$",j.entry.toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"Exit Price"}),t.jsxs("span",{style:le.tradeValue,children:["$",j.exit.toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"Stop Loss"}),t.jsxs("span",{style:le.tradeValue,children:["$",(j.entry-3.5).toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"R-Multiple"}),t.jsxs("span",{style:{...le.tradeValue,color:j.r>=0?"#00ff88":"#ff4466"},children:[j.r>0?"+":"",j.r,"R"]})]})]})]}),t.jsxs("div",{style:le.tradeSection,children:[t.jsx("h4",{children:"Reference Levels"}),t.jsxs("div",{style:le.tradeGrid,children:[t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"IB High"}),t.jsxs("span",{style:le.tradeValue,children:["$",(((O=j.levels)==null?void 0:O.ib_high)||j.entry+15).toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"IB Low"}),t.jsxs("span",{style:le.tradeValue,children:["$",(((_=j.levels)==null?void 0:_.ib_low)||j.entry-10).toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"IB Mid"}),t.jsxs("span",{style:le.tradeValue,children:["$",(((D=j.levels)==null?void 0:D.ib_mid)||j.entry+2.5).toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"pdPOC"}),t.jsxs("span",{style:le.tradeValue,children:["$",(((W=j.levels)==null?void 0:W.pdpoc)||j.entry-5).toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"VWAP"}),t.jsxs("span",{style:le.tradeValue,children:["$",(((G=j.levels)==null?void 0:G.vwap)||j.entry+5).toFixed(2)]})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"pd High"}),t.jsxs("span",{style:le.tradeValue,children:["$",(((_e=j.levels)==null?void 0:_e.pd_high)||j.entry+20).toFixed(2)]})]})]})]}),t.jsxs("div",{style:le.tradeSection,children:[t.jsx("h4",{children:"Entry Criteria Met"}),t.jsx("div",{style:le.criteriaGrid,children:[{name:"Price < IB Low",met:j.entry<(((Fe=j.levels)==null?void 0:Fe.ib_low)||j.entry)},{name:"At pdPOC",met:j.grade!=="C"},{name:`Delta Spike (${j.delta})`,met:j.delta<-2500},{name:"Absorption Detected",met:j.grade==="A"},{name:`Buying Imbalance (${j.buyingImbalance}%)`,met:j.buyingImbalance>=400},{name:"Stacked Imbalances",met:j.grade==="A"||j.grade==="B"}].map((I,ze)=>t.jsxs("div",{style:{...le.criterion,background:I.met?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",borderColor:I.met?"#00ff88":"#ff4466"},children:[t.jsx("span",{style:{...le.criterionIcon,color:I.met?"#00ff88":"#ff4466"},children:I.met?"":""}),t.jsx("span",{style:le.criterionName,children:I.name})]},ze))}),t.jsxs("div",{style:le.criteriaCount,children:["Conditions Met: ",t.jsxs("strong",{children:[j.conditionsMet||(j.grade==="A"?6:j.grade==="B"?5:4),"/6"]})]})]}),t.jsxs("div",{style:le.tradeSection,children:[t.jsx("h4",{children:"Trade Info"}),t.jsxs("div",{style:le.tradeGrid,children:[t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"Grade"}),t.jsx("span",{style:{...le.tradeBadgeSmall,background:j.grade==="A"?"#00ff88":j.grade==="B"?"#ffaa00":"#888"},children:j.grade})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"Tier"}),t.jsx("span",{style:le.tradeValue,children:j.tier})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"Contracts"}),t.jsx("span",{style:le.tradeValue,children:j.contracts})]}),t.jsxs("div",{style:le.tradeItem,children:[t.jsx("span",{style:le.tradeLabel,children:"Exit Reason"}),t.jsx("span",{style:le.tradeValue,children:j.exitReason.replace("target_","").replace("_"," ").toUpperCase()})]})]})]})]},b)})}),t.jsx("div",{style:le.modalFooter,children:t.jsxs("span",{style:{color:l.pnl>=0?"#00ff88":"#ff4466"},children:["Day Total: ",l.pnl>=0?"+":"","$",l.pnl.toLocaleString()]})})]})})]})},le={container:{background:"linear-gradient(180deg, rgba(15,18,25,0.95) 0%, rgba(10,12,18,0.98) 100%)",borderRadius:16,padding:16,marginTop:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",maxWidth:420},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},title:{fontSize:14,fontWeight:600,color:"#fff",margin:0},monthNav:{display:"flex",alignItems:"center",gap:8},navButton:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:11,transition:"all 0.15s ease"},monthLabel:{fontSize:13,fontWeight:600,color:"#fff",minWidth:110,textAlign:"center"},monthStats:{display:"flex",gap:10,fontSize:11,color:"#666"},weekdays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2,marginBottom:4},weekday:{textAlign:"center",color:"#555",fontSize:9,fontWeight:600,padding:4,letterSpacing:"0.5px"},grid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2},day:{aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:6,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)",position:"relative",transition:"all 0.15s ease",minHeight:42,maxHeight:50},emptyDay:{background:"transparent",border:"none"},dayNumber:{fontSize:11,color:"#777",fontWeight:500},dayPnl:{fontSize:9,fontWeight:600,marginTop:1},tradeCount:{position:"absolute",top:2,right:2,background:"rgba(0,170,255,0.9)",color:"#fff",fontSize:8,fontWeight:700,padding:"1px 4px",borderRadius:8,lineHeight:1.2},tooltip:{position:"fixed",background:"rgba(20, 25, 35, 0.98)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:12,padding:16,zIndex:1e3,minWidth:280,maxWidth:350,boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},tooltipHeader:{fontSize:14,fontWeight:600,color:"#fff",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)"},tooltipTrade:{marginBottom:12,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.05)"},tooltipRow:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#aaa",marginBottom:4},tooltipFooter:{fontSize:11,color:"#666",textAlign:"center",marginTop:8},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:20},modal:{background:"linear-gradient(180deg, #1a1f2e 0%, #0d1117 100%)",borderRadius:16,maxWidth:700,width:"100%",maxHeight:"90vh",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 80px rgba(0,0,0,0.6)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,255,136,0.05)"},closeButton:{background:"rgba(255,255,255,0.1)",border:"none",color:"#fff",fontSize:18,width:36,height:36,borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},modalContent:{padding:24,maxHeight:"calc(90vh - 150px)",overflowY:"auto"},modalFooter:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",textAlign:"center",fontSize:16,fontWeight:600},tradeDetail:{background:"rgba(255,255,255,0.03)",borderRadius:12,padding:20,marginBottom:16,border:"1px solid rgba(255,255,255,0.05)"},tradeHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},tradeBadge:{background:"rgba(0,170,255,0.2)",color:"#00aaff",padding:"4px 12px",borderRadius:20,fontSize:12,fontWeight:600},tradePnl:{fontSize:20,fontWeight:700},tradeSection:{marginBottom:16},tradeGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginTop:8},tradeItem:{display:"flex",flexDirection:"column",gap:4},tradeLabel:{fontSize:11,color:"#666",textTransform:"uppercase"},tradeValue:{fontSize:14,color:"#fff",fontWeight:500},tradeBadgeSmall:{display:"inline-block",padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:600,color:"#000"},criteriaGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8,marginTop:8},criterion:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:8,border:"1px solid",fontSize:12},criterionIcon:{fontSize:14,fontWeight:700},criterionName:{color:"#ccc"},criteriaCount:{marginTop:12,textAlign:"center",fontSize:14,color:"#888"}},Bg=({weeks:e,year:n})=>{const r=e.filter(o=>o.year===n),i=Math.max(...r.map(o=>Math.abs(o.pnl)),1);return r.length===0?t.jsxs("div",{style:C.weekContainer,children:[t.jsxs("h3",{style:C.sectionTitle,children:[" Weekly Breakdown - ",n]}),t.jsx("p",{style:{color:"#666",textAlign:"center",padding:"40px"},children:"No data for selected year"})]}):t.jsxs("div",{style:C.weekContainer,children:[t.jsxs("h3",{style:C.sectionTitle,children:[" Weekly Breakdown - ",n]}),t.jsx("div",{style:C.weekGrid,children:r.slice(0,26).map((o,s)=>{const l=Math.abs(o.pnl)/i*100;return t.jsxs("div",{style:C.weekBar,children:[t.jsx("div",{style:C.weekBarContainer,children:t.jsx("div",{style:{...C.weekBarFill,height:`${l}%`,background:o.pnl>=0?"linear-gradient(180deg, #00ff88 0%, #00cc66 100%)":"linear-gradient(180deg, #ff4466 0%, #cc3355 100%)"}})}),t.jsxs("div",{style:C.weekLabel,children:["W",o.week]}),t.jsxs("div",{style:{...C.weekPnl,color:o.pnl>=0?"#00ff88":"#ff4466"},children:["$",Math.abs(o.pnl/1e3).toFixed(0),"k"]})]},s)})})]})},Mg=({data:e})=>{const n=e.summary.final_equity>1e6?(e.summary.final_equity-1e6)/1e6*100:-((1e6-e.summary.final_equity)/1e6*100);return t.jsxs("div",{style:C.statsContainer,children:[t.jsx("h3",{style:C.sectionTitle,children:" Performance Metrics"}),t.jsxs("div",{style:C.statsGrid,children:[t.jsx(Gi,{title:"Win Rate",value:`${(e.summary.win_rate*100).toFixed(1)}%`,subtitle:`${e.summary.winners}W / ${e.summary.losers}L`,color:"rgba(0,255,136,0.1)"}),t.jsx(Gi,{title:"Total P&L",value:`$${Math.round(e.summary.total_pnl).toLocaleString()}`,subtitle:e.summary.pnl_difference&&e.summary.pnl_difference!==0?`${e.summary.pnl_difference>0?"+":""}$${Math.round(e.summary.pnl_difference).toLocaleString()} from allocation`:"Net Profit",trend:n,color:"rgba(0,255,136,0.1)"}),t.jsx(Gi,{title:"Profit Factor",value:e.summary.profit_factor===1/0?"":e.summary.profit_factor.toFixed(2),subtitle:"Gross Profit / Loss",color:"rgba(255,170,0,0.1)"}),t.jsx(Gi,{title:"Avg R-Multiple",value:`${e.summary.avg_r_multiple.toFixed(2)}R`,subtitle:"Risk-Adjusted Return",color:"rgba(0,170,255,0.1)"}),t.jsx(Gi,{title:"Max Drawdown",value:`$${Math.round(e.summary.max_drawdown).toLocaleString()}`,subtitle:`${(e.summary.max_drawdown_pct*100).toFixed(1)}%`,color:"rgba(255,68,102,0.1)"}),t.jsx(Gi,{title:"Final Equity",value:`$${Math.round(e.summary.final_equity).toLocaleString()}`,subtitle:"Starting: $1,000,000",color:"rgba(136,136,136,0.1)"})]}),t.jsxs("div",{style:C.breakdownGrid,children:[t.jsxs("div",{style:C.breakdownCard,children:[t.jsx("h4",{style:C.breakdownTitle,children:"Exit Reasons"}),Object.entries(e.exit_reasons).map(([r,i])=>t.jsxs("div",{style:C.breakdownRow,children:[t.jsx("span",{style:C.breakdownLabel,children:r.replace("_"," ")}),t.jsx("div",{style:C.breakdownBarContainer,children:t.jsx("div",{style:{...C.breakdownBar,width:`${e.summary.total_trades>0?i/e.summary.total_trades*100:0}%`,background:r==="STOP_LOSS"?"#ff4466":"#00ff88"}})}),t.jsx("span",{style:C.breakdownCount,children:i})]},r))]}),t.jsxs("div",{style:C.breakdownCard,children:[t.jsx("h4",{style:C.breakdownTitle,children:"Grade Analysis"}),Object.entries(e.grade_stats).map(([r,i])=>t.jsxs("div",{style:C.breakdownRow,children:[t.jsxs("span",{style:C.breakdownLabel,children:["Grade ",r]}),t.jsxs("div",{style:C.gradeStats,children:[t.jsxs("span",{style:{color:"#00ff88"},children:[(i.win_rate*100).toFixed(0),"% WR"]}),t.jsxs("span",{style:{color:i.pnl>=0?"#00ff88":"#ff4466"},children:["$",(i.pnl/1e3).toFixed(0),"k"]})]})]},r))]}),t.jsxs("div",{style:C.breakdownCard,children:[t.jsx("h4",{style:C.breakdownTitle,children:"Tier Performance"}),Object.entries(e.tier_stats).map(([r,i])=>t.jsxs("div",{style:C.breakdownRow,children:[t.jsx("span",{style:C.breakdownLabel,children:r.replace("_"," ")}),t.jsxs("div",{style:C.gradeStats,children:[t.jsxs("span",{children:[i.trades," trades"]}),t.jsxs("span",{style:{color:"#00ff88"},children:[(i.win_rate*100).toFixed(0),"% WR"]})]})]},r))]})]})]})},Og=()=>{var z,S;const[e,n]=A.useState(null),[r,i]=A.useState(null),[o,s]=A.useState(null),[l,d]=A.useState(!0),[c,p]=A.useState(null),{isMobile:h}=_i();A.useEffect(()=>{const k=async()=>{try{const[a,g,v]=await Promise.all([fetch(`${en}/zones`),fetch(`${en}/live`),fetch(`${en}/market-profile`)]);a.ok&&n(await a.json()),g.ok&&i(await g.json()),v.ok&&s(await v.json()),p(null)}catch{p("Connection error")}d(!1)};k();const y=setInterval(k,1e3);return()=>clearInterval(y)},[]);const m=({zone:k,rank:y})=>{var v,f,T,j,b,O,_,D,W,G,_e,Fe,I,ze,tt,se,me;const a={approaching:"#ffaa00",at_zone:"#00ff88",watching:"#888",distant:"#555"},g=((v=k.readiness)==null?void 0:v.overall_score)>=80?"#00ff88":((f=k.readiness)==null?void 0:f.overall_score)>=60?"#ffaa00":"#ff4466";return t.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",border:`2px solid ${y===1?"#00ff88":"rgba(255,255,255,0.1)"}`,borderRadius:h?10:12,padding:h?12:20,marginBottom:h?12:16,overflow:"hidden"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",justifyContent:"space-between",gap:h?10:0,marginBottom:h?12:16},children:[t.jsxs("div",{children:[t.jsxs("span",{style:{background:y===1?"#00ff88":"#ffaa00",color:"#000",padding:h?"3px 10px":"4px 12px",borderRadius:20,fontSize:h?10:12,fontWeight:700},children:["#",y," PRIORITY"]}),t.jsx("h3",{style:{margin:"8px 0 0",color:"#fff",fontSize:h?15:18},children:k.name}),t.jsxs("span",{style:{color:"#888",fontSize:h?10:12},children:["Session ",k.session_number,"  ",(T=k.type)==null?void 0:T.toUpperCase()]})]}),t.jsxs("div",{style:{textAlign:h?"left":"right",display:"flex",flexDirection:h?"row":"column",alignItems:h?"center":"flex-end",gap:h?12:0},children:[t.jsx("div",{style:{color:a[k.status]||"#888",fontSize:h?11:14,fontWeight:600},children:(j=k.status)==null?void 0:j.toUpperCase()}),t.jsxs("div",{style:{color:"#fff",fontSize:h?18:24,fontFamily:"monospace",fontWeight:700},children:["$",(b=k.price)==null?void 0:b.toFixed(2)]}),t.jsxs("div",{style:{color:k.distance>0?"#00ff88":"#ff4466",fontSize:h?11:14},children:[k.distance>0?"+":"",(O=k.distance)==null?void 0:O.toFixed(2)," pts"]})]})]}),k.trade&&t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:h?12:16,marginBottom:h?12:16},children:[t.jsx("div",{style:{color:"#00aaff",fontSize:h?10:12,marginBottom:8,letterSpacing:1},children:"TRADE FRAMEWORK"}),t.jsxs("div",{style:{marginBottom:h?8:12},children:[t.jsx("span",{style:{color:"#888",fontSize:h?9:11},children:"ENTRY TRIGGER"}),t.jsx("div",{style:{color:"#fff",fontSize:h?11:13},children:k.trade.entry_trigger})]}),t.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",gap:h?8:20,marginBottom:h?8:12},children:[t.jsxs("div",{children:[t.jsx("span",{style:{color:"#888",fontSize:h?9:11},children:"TARGET 1"}),t.jsxs("div",{style:{color:"#00ff88",fontSize:h?11:14},children:[(_=k.trade.target1)==null?void 0:_.name,": $",(W=(D=k.trade.target1)==null?void 0:D.price)==null?void 0:W.toFixed(2),t.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:h?10:12},children:["+",(G=k.trade.target1)==null?void 0:G.pts,"pts"]})]})]}),t.jsxs("div",{children:[t.jsx("span",{style:{color:"#888",fontSize:h?9:11},children:"TARGET 2"}),t.jsxs("div",{style:{color:"#00ff88",fontSize:h?11:14},children:[(_e=k.trade.target2)==null?void 0:_e.name,": $",(I=(Fe=k.trade.target2)==null?void 0:Fe.price)==null?void 0:I.toFixed(2),t.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:h?10:12},children:["+",(ze=k.trade.target2)==null?void 0:ze.pts,"pts"]})]})]})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{children:[t.jsx("span",{style:{color:"#888",fontSize:h?9:11},children:"STOP"}),t.jsxs("div",{style:{color:"#ff4466",fontSize:h?11:14},children:["$",(se=(tt=k.trade.stop)==null?void 0:tt.price)==null?void 0:se.toFixed(2),t.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:h?10:12},children:["-",(me=k.trade.stop)==null?void 0:me.pts,"pts"]})]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("span",{style:{color:"#888",fontSize:h?9:11},children:"R:R"}),t.jsxs("div",{style:{color:"#ffaa00",fontSize:h?16:18,fontWeight:700},children:[k.trade.r_ratio,":1"]})]})]})]}),k.readiness&&t.jsxs("div",{style:{background:g==="#00ff88"?"rgba(0,255,136,0.1)":g==="#ffaa00"?"rgba(255,170,0,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${g}`,borderRadius:8,padding:h?10:12},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[t.jsx("span",{style:{color:g,fontWeight:600,fontSize:h?11:14},children:"SETUP READINESS"}),t.jsxs("span",{style:{color:g,fontWeight:700,fontSize:h?16:18},children:[k.readiness.overall_score,"%"]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:h?3:4,fontSize:h?9:11},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:k.readiness.price_at_zone?"#00ff88":"#666"},children:[t.jsx("span",{children:k.readiness.price_at_zone?"":""}),t.jsx("span",{children:"Price at Zone"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:k.readiness.tpo_confirmation?"#00ff88":"#666"},children:[t.jsx("span",{children:k.readiness.tpo_confirmation?"":""}),t.jsx("span",{children:"2+ TPO"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:k.readiness.session_context?"#00ff88":"#666"},children:[t.jsx("span",{children:k.readiness.session_context?"":""}),t.jsx("span",{children:"Session OK"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:k.readiness.single_print_nearby?"#00ff88":"#666"},children:[t.jsx("span",{children:k.readiness.single_print_nearby?"":""}),t.jsx("span",{children:"Single Print"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:k.readiness.poc_alignment?"#00ff88":"#666"},children:[t.jsx("span",{children:k.readiness.poc_alignment?"":""}),t.jsx("span",{children:"POC Align"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:k.readiness.ib_intact?"#00ff88":"#666"},children:[t.jsx("span",{children:k.readiness.ib_intact?"":""}),t.jsx("span",{children:"IB Intact"})]})]})]})]})},u=({zones:k,buyZones:y,currentPrice:a})=>{const g=[...k||[]].filter(_=>_.price>a).sort((_,D)=>D.price-_.price),v=[...k||[]].filter(_=>_.price<=a).sort((_,D)=>D.price-_.price),f=new Set((y||[]).map(_=>_.id)),T=_=>_.type==="ib_high"?"#ffaa00":_.type==="ib_low"?"#00ff88":_.type==="poc"?"#9370DB":_.type==="vah"?"#ff6b6b":_.type==="val"?"#4ECDC4":"#888",j=_=>f.has(_.id)?_.status==="at_zone"?{label:"TRIGGERED",color:"#00ff88",bg:"rgba(0,255,136,0.15)"}:_.status==="approaching"?{label:"APPROACHING",color:"#ffaa00",bg:"rgba(255,170,0,0.15)"}:{label:"VALID",color:"#00aaff",bg:"rgba(0,170,255,0.1)"}:null,b=_=>{const D=(y||[]).findIndex(W=>W.id===_.id);return D>=0?D+1:null},O=_=>{var I;const D=j(_),W=b(_),G=_.price>a,_e=_.price-a,Fe=Math.abs(_e)<=2;return t.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 12px",margin:"2px 8px",borderRadius:6,background:Fe?"rgba(0,255,136,0.1)":D?D.bg:"transparent",borderLeft:`3px solid ${T(_)}`,transition:"background 0.2s"},children:[t.jsxs("div",{style:{flex:1,minWidth:0},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[W&&t.jsxs("span",{style:{background:W===1?"#00ff88":W===2?"#ffaa00":"#00aaff",color:"#000",fontSize:9,fontWeight:700,padding:"1px 5px",borderRadius:3},children:["#",W]}),t.jsx("span",{style:{color:"#fff",fontSize:11,fontWeight:W?600:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:_.name})]}),D&&t.jsx("span",{style:{fontSize:9,color:D.color,fontWeight:600,letterSpacing:.5},children:D.label})]}),t.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[t.jsx("div",{style:{color:"#fff",fontSize:12,fontFamily:"monospace",fontWeight:Fe?700:400},children:(I=_.price)==null?void 0:I.toFixed(2)}),t.jsxs("div",{style:{fontSize:10,fontFamily:"monospace",color:G?"#ff4466":"#00ff88"},children:[G?"+":"",_e==null?void 0:_e.toFixed(1)]})]})]},_.id)};return t.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",height:"100%",display:"flex",flexDirection:"column"},children:[t.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{color:"#888",fontSize:11,letterSpacing:1},children:"PRICE LADDER"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsxs("span",{style:{color:"#ff4466",fontSize:10},children:[g.length," above"]}),t.jsx("span",{style:{color:"#666"},children:"|"}),t.jsxs("span",{style:{color:"#00ff88",fontSize:10},children:[v.length," below"]})]})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px 0"},children:[g.map(_=>O(_)),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 12px",margin:"8px",borderRadius:8,background:"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, rgba(0,255,136,0.05) 50%, rgba(0,255,136,0.2) 100%)",border:"1px solid rgba(0,255,136,0.4)",position:"relative"},children:[t.jsxs("div",{style:{position:"absolute",left:12,display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 8px rgba(0,255,136,0.6)"}}),t.jsx("span",{style:{color:"#00ff88",fontSize:10,fontWeight:600},children:"LIVE"})]}),t.jsxs("span",{style:{color:"#00ff88",fontSize:16,fontFamily:"monospace",fontWeight:700,textShadow:"0 0 10px rgba(0,255,136,0.5)"},children:["$",a==null?void 0:a.toFixed(2)]}),t.jsx("span",{style:{position:"absolute",right:12,color:"#888",fontSize:10},children:"CURRENT"})]}),v.map(_=>O(_))]}),t.jsxs("div",{style:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,0.08)",display:"flex",flexWrap:"wrap",gap:8,fontSize:9},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:8,height:8,background:"#ffaa00",borderRadius:1}}),t.jsx("span",{style:{color:"#666"},children:"IB High"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:8,height:8,background:"#00ff88",borderRadius:1}}),t.jsx("span",{style:{color:"#666"},children:"IB Low"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:8,height:8,background:"#9370DB",borderRadius:1}}),t.jsx("span",{style:{color:"#666"},children:"POC"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:8,height:8,background:"#ff6b6b",borderRadius:1}}),t.jsx("span",{style:{color:"#666"},children:"VAH"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:8,height:8,background:"#4ECDC4",borderRadius:1}}),t.jsx("span",{style:{color:"#666"},children:"VAL"})]})]})]})};return l?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#888"},children:"Loading zones..."}):c||!e?t.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#ff4466"},children:c||"No zone data available"}):t.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",gap:h?12:20,padding:h?12:20,height:h?"auto":"100%",overflow:h?"auto":"hidden"},children:[t.jsxs("div",{style:{flex:h?"none":2,overflowY:h?"visible":"auto"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",justifyContent:"space-between",alignItems:h?"flex-start":"center",gap:h?8:0,marginBottom:h?12:16},children:[t.jsx("h2",{style:{color:"#fff",margin:0,fontSize:h?16:24},children:h?"10pt Buy Setup":"Zone Participation - 10pt Buy Setup"}),t.jsxs("div",{style:{color:"#888",fontSize:h?12:14},children:["Current: ",t.jsxs("span",{style:{color:"#00ff88",fontFamily:"monospace",fontWeight:700},children:["$",(z=e.current_price)==null?void 0:z.toFixed(2)]})]})]}),(()=>{var G,_e,Fe,I,ze,tt,se,me,w;const k=(e==null?void 0:e.current_price)||(r==null?void 0:r.current_price)||0;e!=null&&e.all_zones;const y={monthly:{bias:"NEUTRAL",color:"#ffaa00"},weekly:{bias:"NEUTRAL",color:"#ffaa00"},dayOpen:{position:"--",diff:0,color:"#888"},weeklyOpen:{position:"--",diff:0,color:"#888"},daily:{ib:{level:"--",color:"#888"},pvaLocation:{status:"--",detail:"",color:"#888"},opening:{type:"--",color:"#888"}},critical:{abOverlap:{pct:"--",color:"#888"},buyingTail:!1,sellingTail:!1,tpoBias:{direction:"--",color:"#888"}}};if(r){const x=r.pd_high||0,R=r.pd_low||0,M=(x+R)/2,ie=r.week_high||0,ae=r.week_low||0,Se=r.weekly_open||0,Ce=ie-ae;let U=0,ve=[];if(ie>0&&ae>0&&Ce>0){const de=(k-ae)/Ce*100;if(de>=90?(U+=40,ve.push("Near Week High")):de>=70?(U+=30,ve.push("Upper Week Range")):de<=10?(U-=40,ve.push("Near Week Low")):de<=30?(U-=30,ve.push("Lower Week Range")):ve.push("Mid Week Range"),Se>0){const L=k-Se;L<-Ce*.1?(U+=35,ve.push("Below Weekly Open")):L>Ce*.1?U-=25:U+=10}k>x?(U+=25,ve.push("Above PD High")):k>M?U+=15:k<R?(U-=25,ve.push("Below PD Low")):k<M&&(U-=15),U>=60?y.weekly={bias:"VERY BULLISH",color:"#00ff88",score:U,factors:ve}:U>=25?y.weekly={bias:"BULLISH",color:"#88ff88",score:U,factors:ve}:U<=-60?y.weekly={bias:"VERY BEARISH",color:"#ff4466",score:U,factors:ve}:U<=-25?y.weekly={bias:"BEARISH",color:"#ff8888",score:U,factors:ve}:y.weekly={bias:"NEUTRAL",color:"#ffaa00",score:U,factors:ve}}else k>x?y.weekly={bias:"BULLISH",color:"#88ff88",factors:["Above PD High"]}:k<R&&(y.weekly={bias:"BEARISH",color:"#ff8888",factors:["Below PD Low"]});const xe=r.rolling_20d_high||0,J=r.rolling_20d_low||0,re=xe-J,Z=(xe+J)/2;let ee=0,ue=[];if(xe>0&&J>0&&re>0){const de=(k-J)/re*100;de>=90?(ee+=50,ue.push("Near 20d High")):de>=75?(ee+=35,ue.push("Upper 20d Range")):de>=60?ee+=20:de<=10?(ee-=50,ue.push("Near 20d Low")):de<=25?(ee-=35,ue.push("Lower 20d Range")):de<=40&&(ee-=20),ie>0&&ae>0&&(ie>=xe*.998?(ee+=30,ue.push("Week at 20d High")):ae<=J*1.002?(ee-=30,ue.push("Week at 20d Low")):ie>Z?ee+=15:ae<Z&&(ee-=15)),Se>0&&(k>Se&&Se>J+re*.4?(ee+=20,ue.push("Uptrend confirmed")):k<Se&&Se<xe-re*.4&&(ee-=20,ue.push("Downtrend confirmed"))),ee>=50?y.monthly={bias:"VERY BULLISH",color:"#00ff88",score:ee,factors:ue}:ee>=20?y.monthly={bias:"BULLISH",color:"#88ff88",score:ee,factors:ue}:ee<=-50?y.monthly={bias:"VERY BEARISH",color:"#ff4466",score:ee,factors:ue}:ee<=-20?y.monthly={bias:"BEARISH",color:"#ff8888",score:ee,factors:ue}:y.monthly={bias:"NEUTRAL",color:"#ffaa00",score:ee,factors:ue}}else if(ie>0&&ae>0){const de=(k-ae)/Ce*100;de>=80?y.monthly={bias:"BULLISH",color:"#88ff88",factors:["Near Week High"]}:de<=20&&(y.monthly={bias:"BEARISH",color:"#ff8888",factors:["Near Week Low"]})}const ye=r.day_open||0;if(ye>0){const de=k-ye;de<-2?y.dayOpen={position:"BELOW",diff:de,price:ye,color:"#00ff88",bias:"BULLISH"}:de>2?y.dayOpen={position:"ABOVE",diff:de,price:ye,color:"#ff4466",bias:"BEARISH"}:y.dayOpen={position:"AT",diff:de,price:ye,color:"#ffaa00",bias:"NEUTRAL"}}if(Se>0){const de=k-Se;de<-5?y.weeklyOpen={position:"BELOW",diff:de,price:Se,color:"#00ff88",bias:"BULLISH"}:de>5?y.weeklyOpen={position:"ABOVE",diff:de,price:Se,color:"#ff4466",bias:"BEARISH"}:y.weeklyOpen={position:"AT",diff:de,price:Se,color:"#ffaa00",bias:"NEUTRAL"}}}if(o){const x=o.ib_range||0,R=o.avg_daily_range||50,M=R>0?x/R*100:0;x===0||!o.ib_complete?y.daily.ib={level:"FORMING",color:"#888",pct:"--"}:M<35?y.daily.ib={level:"LOW",color:"#00ff88",pct:M.toFixed(0)}:M<=75?y.daily.ib={level:"MEDIUM",color:"#ffaa00",pct:M.toFixed(0)}:y.daily.ib={level:"HIGH",color:"#ff4466",pct:M.toFixed(0)}}if(r&&o){const x=r.pd_high||0,R=r.pd_low||0,M=x-R,ie=R+M*.85,ae=R+M*.15,Se=r.day_open||k,Ce=r.session_open||Se;if(k>=ae&&k<=ie){const U=Ce>=ae&&Ce<=ie;y.daily.pvaLocation={status:"IN",detail:U?"Accepted":"Returned",color:"#00aaff"}}else if(k>ie){const U=k>ie+5;y.daily.pvaLocation={status:"OUT",detail:U?"Accepted Above":"Testing VAH",color:U?"#00ff88":"#ffaa00"}}else{const U=k<ae-5;y.daily.pvaLocation={status:"OUT",detail:U?"Accepted Below":"Testing VAL",color:U?"#ff4466":"#ffaa00"}}(Math.abs(k-ie)<=3||Math.abs(k-ae)<=3)&&(y.daily.pvaLocation.status="DYNAMIC",y.daily.pvaLocation.color="#ffaa00")}if(o!=null&&o.open_type){const x=((G=o.open_type)==null?void 0:G.toUpperCase())||"DEVELOPING",R={OD:{name:"OD",full:"Open Drive",color:"#00ff88"},OPEN_DRIVE:{name:"OD",full:"Open Drive",color:"#00ff88"},OTD:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},OPEN_TEST_DRIVE:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},ORR:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OPEN_REJECTION_REVERSE:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OA:{name:"OA",full:"Open Auction",color:"#ffaa00"},OPEN_AUCTION:{name:"OA",full:"Open Auction",color:"#ffaa00"},DEVELOPING:{name:"DEV",full:"Developing",color:"#888"}},M=R[x]||R.DEVELOPING;y.daily.opening={type:M.name,full:M.full,color:M.color}}if((o==null?void 0:o.ab_overlap)!==void 0&&(o==null?void 0:o.ab_overlap)!==null){const x=o.ab_overlap;x<33?y.critical.abOverlap={pct:x.toFixed(0),color:"#00ff88",level:"<33%"}:x<=50?y.critical.abOverlap={pct:x.toFixed(0),color:"#ffaa00",level:"33-50%"}:y.critical.abOverlap={pct:x.toFixed(0),color:"#ff4466",level:">50%"}}if(o){const x=o.single_prints_count||0,R=(r==null?void 0:r.day_high)||0,M=(r==null?void 0:r.day_low)||0,ie=o.poc||k;x>0&&(ie>(R+M)/2?y.critical.buyingTail=!0:y.critical.sellingTail=!0)}if(o){const x=o.poc||0,R=o.vah||0,M=o.val||0,ie=(R+M)/2;x>ie+2?y.critical.tpoBias={direction:"BULLISH",color:"#00ff88"}:x<ie-2?y.critical.tpoBias={direction:"BEARISH",color:"#ff4466"}:y.critical.tpoBias={direction:"NEUTRAL",color:"#ffaa00"}}const a={rank1:{name:"MACRO",points:3,factors:[],total:0,direction:"NEUTRAL"},rank2:{name:"VOLUME",points:2,factors:[],total:0,direction:"NEUTRAL"},rank3:{name:"STRUCTURE",points:2,factors:[],total:0,direction:"NEUTRAL"},rank4:{name:"TIMING",points:1,factors:[],total:0,direction:"NEUTRAL"},conflicts:[],totalScore:0,confidence:"LOW",positionSize:"25%",direction:"NEUTRAL"};if(r){const x=r.week_high||0,R=r.week_low||0,M=x-R;if(M>0){const ie=R+M*.7,ae=R+M*.3;k>ie?(a.rank1.factors.push({name:"Weekly VA",signal:"LONG",reason:"Price above weekly VAH",pts:3}),a.rank1.total+=3):k<ae?(a.rank1.factors.push({name:"Weekly VA",signal:"SHORT",reason:"Price below weekly VAL",pts:-3}),a.rank1.total-=3):a.rank1.factors.push({name:"Weekly VA",signal:"NEUTRAL",reason:"Price inside weekly VA",pts:0})}}if(r){const x=r.rolling_20d_high||0,R=r.rolling_20d_low||0,M=x-R;if(M>0){const ie=R+M*.75,ae=R+M*.25;k>ie?(a.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"LONG",reason:"At multi-day highs (breakout zone)",pts:3}),a.rank1.total+=3):k<ae?(a.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"SHORT",reason:"At multi-day lows (breakdown zone)",pts:-3}),a.rank1.total-=3):a.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"NEUTRAL",reason:"Mid-range (fair value)",pts:0})}}if((r==null?void 0:r.weekly_open)>0){const x=r.weekly_open,R=k-x;R>10?(a.rank1.factors.push({name:"Composite VPOC",signal:"LONG",reason:`+${R.toFixed(0)}pts above weekly open`,pts:3}),a.rank1.total+=3):R<-10?(a.rank1.factors.push({name:"Composite VPOC",signal:"SHORT",reason:`${R.toFixed(0)}pts below weekly open`,pts:-3}),a.rank1.total-=3):a.rank1.factors.push({name:"Composite VPOC",signal:"NEUTRAL",reason:"Near weekly open",pts:0})}if(a.rank1.direction=a.rank1.total>0?"LONG":a.rank1.total<0?"SHORT":"NEUTRAL",r){const x=r.day_open||0,R=r.day_high||0,M=r.day_low||0;if(x>0){const ie=R-x,ae=x-M;ie>ae*1.5?(a.rank2.factors.push({name:"Delta Direction",signal:"LONG",reason:"Buyers dominating (up move > down)",pts:2}),a.rank2.total+=2):ae>ie*1.5?(a.rank2.factors.push({name:"Delta Direction",signal:"SHORT",reason:"Sellers dominating (down move > up)",pts:-2}),a.rank2.total-=2):a.rank2.factors.push({name:"Delta Direction",signal:"NEUTRAL",reason:"Balanced volume",pts:0})}}if(o){const x=o.poc||0,R=o.vah||0,M=o.val||0;if(x>0&&R>0&&M>0){const ie=R-M,ae=(x-M)/ie;ae>.65?(a.rank2.factors.push({name:"Daily HVN",signal:"LONG",reason:"POC in upper VA (HVN above)",pts:2}),a.rank2.total+=2):ae<.35?(a.rank2.factors.push({name:"Daily HVN",signal:"SHORT",reason:"POC in lower VA (HVN below)",pts:-2}),a.rank2.total-=2):a.rank2.factors.push({name:"Daily HVN",signal:"NEUTRAL",reason:"POC centered",pts:0})}}if(o!=null&&o.vpoc&&(o!=null&&o.poc)){const x=o.vpoc,R=o.poc;if(Math.abs(x-R)<3){const ie=x>k;a.rank2.factors.push({name:"VPOC/POC Align",signal:ie?"SHORT":"LONG",reason:`VPOC & POC aligned at ${x.toFixed(0)} (strong ${ie?"resistance":"support"})`,pts:ie?-2:2}),a.rank2.total+=ie?-2:2}else o.vpoc>o.poc?(a.rank2.factors.push({name:"VPOC/POC Align",signal:"LONG",reason:"VPOC above POC (volume leads up)",pts:2}),a.rank2.total+=2):(a.rank2.factors.push({name:"VPOC/POC Align",signal:"SHORT",reason:"VPOC below POC (volume leads down)",pts:-2}),a.rank2.total-=2)}else if(o!=null&&o.poc){const x=o.poc>k?"SHORT":"LONG";a.rank2.factors.push({name:"POC Location",signal:x,reason:`POC at ${(_e=o.poc)==null?void 0:_e.toFixed(0)} (${x==="LONG"?"support":"resistance"})`,pts:x==="LONG"?1:-1}),a.rank2.total+=x==="LONG"?1:-1}if(a.rank2.direction=a.rank2.total>0?"LONG":a.rank2.total<0?"SHORT":"NEUTRAL",o&&(o.single_prints_count||0)>0&&(y.critical.buyingTail&&(a.rank3.factors.push({name:"Buying Tail",signal:"LONG",reason:"Single prints at lows (buyer aggression)",pts:2}),a.rank3.total+=2),y.critical.sellingTail&&(a.rank3.factors.push({name:"Selling Tail",signal:"SHORT",reason:"Single prints at highs (seller aggression)",pts:-2}),a.rank3.total-=2)),o){const x=o.poc||0,R=o.vah||0,M=o.val||0,ie=(r==null?void 0:r.day_high)||R,ae=(r==null?void 0:r.day_low)||M,Se=ie-ae;if(Se>0){const Ce=ie-R,U=M-ae,ve=R-M,xe=(x-ae)/Se;let J="D",re="NEUTRAL",Z="Balanced D-shape profile",ee=0;xe<.4&&Ce>ve*.3?(J="P",re="LONG",Z="P-shape (accumulation, buyers loading)",ee=2):xe>.6&&U>ve*.3?(J="b",re="SHORT",Z="b-shape (distribution, sellers unloading)",ee=-2):o.double_distribution&&(J="B",re="NEUTRAL",Z="B-shape (double distribution, range bound)",ee=0),a.rank3.factors.push({name:`Profile Shape (${J})`,signal:re,reason:Z,pts:ee}),a.rank3.total+=ee}}if(o&&r){const x=o.ib_high||0,R=o.ib_low||0,M=r.day_high||0,ie=r.day_low||0;if(x>0&&R>0){const ae=M>x+2,Se=ie<R-2;ae&&!Se?(a.rank3.factors.push({name:"Range Extension",signal:"LONG",reason:"IB broken to upside",pts:2}),a.rank3.total+=2):Se&&!ae?(a.rank3.factors.push({name:"Range Extension",signal:"SHORT",reason:"IB broken to downside",pts:-2}),a.rank3.total-=2):ae&&Se?a.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"IB broken both ways",pts:0}):a.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"Inside IB",pts:0})}}if(a.rank3.direction=a.rank3.total>0?"LONG":a.rank3.total<0?"SHORT":"NEUTRAL",o!=null&&o.open_type){const x=((Fe=o.open_type)==null?void 0:Fe.toUpperCase())||"",R=o.open_direction||"";if(x.includes("OD")||x.includes("DRIVE")){const M=R==="up"?1:R==="down"?-1:0;a.rank4.factors.push({name:"Open Type",signal:M>0?"LONG":M<0?"SHORT":"NEUTRAL",reason:`Open Drive ${R||""}`,pts:M}),a.rank4.total+=M}else if(x.includes("ORR")||x.includes("REJECTION")){const M=R==="up"?-1:R==="down"?1:0;a.rank4.factors.push({name:"Open Type",signal:M>0?"LONG":M<0?"SHORT":"NEUTRAL",reason:"Open Rejection Reverse",pts:M}),a.rank4.total+=M}else if(x.includes("OTD")||x.includes("TEST")){const M=R==="up"?1:R==="down"?-1:0;a.rank4.factors.push({name:"Open Type",signal:M>0?"LONG":M<0?"SHORT":"NEUTRAL",reason:`Open Test Drive ${R||""}`,pts:M*.5}),a.rank4.total+=M*.5}}if(y.daily.ib.level!=="--"&&y.daily.ib.level!=="FORMING")if(y.daily.ib.level==="LOW"){const x=a.rank3.direction!=="NEUTRAL"?a.rank3.direction:a.rank2.direction!=="NEUTRAL"?a.rank2.direction:"NEUTRAL";x==="LONG"?(a.rank4.factors.push({name:"IB Width",signal:"LONG",reason:"Low IB + uptrend = expansion up",pts:1}),a.rank4.total+=1):x==="SHORT"?(a.rank4.factors.push({name:"IB Width",signal:"SHORT",reason:"Low IB + downtrend = expansion down",pts:-1}),a.rank4.total-=1):a.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"Low IB (breakout pending)",pts:0})}else y.daily.ib.level==="HIGH"&&a.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"High IB (rotational day)",pts:0});if((o==null?void 0:o.single_prints_count)>0){const x=o.single_print_level||0;x>k+5?(a.rank4.factors.push({name:"Single Prints",signal:"LONG",reason:`Singles above at ${x.toFixed(0)} (target)`,pts:1}),a.rank4.total+=1):x<k-5&&(a.rank4.factors.push({name:"Single Prints",signal:"SHORT",reason:`Singles below at ${x.toFixed(0)} (target)`,pts:-1}),a.rank4.total-=1)}a.rank4.direction=a.rank4.total>0?"LONG":a.rank4.total<0?"SHORT":"NEUTRAL";const g=[{rank:1,name:"MACRO",dir:a.rank1.direction,total:a.rank1.total},{rank:2,name:"VOLUME",dir:a.rank2.direction,total:a.rank2.total},{rank:3,name:"STRUCTURE",dir:a.rank3.direction,total:a.rank3.total},{rank:4,name:"TIMING",dir:a.rank4.direction,total:a.rank4.total}].filter(x=>x.dir!=="NEUTRAL");for(let x=0;x<g.length;x++)for(let R=x+1;R<g.length;R++)g[x].dir!==g[R].dir&&a.conflicts.push({higher:g[x],lower:g[R],resolution:`${g[x].name} (Rank ${g[x].rank}) overrides ${g[R].name}`});a.totalScore=a.rank1.total+a.rank2.total+a.rank3.total+a.rank4.total;const v=Math.abs(a.totalScore);v>=12?(a.confidence="VERY HIGH",a.positionSize="100%+",a.confidenceColor="#00ff88"):v>=8?(a.confidence="HIGH",a.positionSize="100%",a.confidenceColor="#88ff88"):v>=5?(a.confidence="MED-HIGH",a.positionSize="75%",a.confidenceColor="#ffdd00"):v>=2?(a.confidence="MEDIUM",a.positionSize="50%",a.confidenceColor="#ffaa00"):v>=0?(a.confidence="LOW",a.positionSize="25% or SKIP",a.confidenceColor="#ff8844"):(a.confidence="AVOID",a.positionSize="NO TRADE",a.confidenceColor="#ff4466"),a.direction=a.totalScore>0?"LONG":a.totalScore<0?"SHORT":"NEUTRAL";let f=0,T=0;if(y.monthly.bias.includes("BULLISH")&&(f+=y.monthly.bias.includes("VERY")?15:10),y.monthly.bias.includes("BEARISH")&&(T+=y.monthly.bias.includes("VERY")?15:10),y.weekly.bias.includes("BULLISH")&&(f+=y.weekly.bias.includes("VERY")?15:10),y.weekly.bias.includes("BEARISH")&&(T+=y.weekly.bias.includes("VERY")?15:10),y.dayOpen.bias==="BULLISH"&&(f+=10),y.dayOpen.bias==="BEARISH"&&(T+=10),y.weeklyOpen.bias==="BULLISH"&&(f+=12),y.weeklyOpen.bias==="BEARISH"&&(T+=12),y.daily.ib.level==="LOW"&&(f+=8),y.daily.ib.level==="HIGH"&&(T+=5),(I=y.daily.pvaLocation.detail)!=null&&I.includes("Above")&&(f+=10),(ze=y.daily.pvaLocation.detail)!=null&&ze.includes("Below")&&(T+=10),y.daily.pvaLocation.status==="IN"&&(f+=3,T+=3),y.daily.opening.type==="OD"){const x=o==null?void 0:o.open_direction;x==="up"?f+=12:x==="down"&&(T+=12)}if(y.daily.opening.type==="ORR"){const x=o==null?void 0:o.open_direction;x==="up"?T+=8:x==="down"&&(f+=8)}if(y.critical.abOverlap.pct!=="--"){const x=parseFloat(y.critical.abOverlap.pct);x<33&&(f+=5),x>50&&(T+=3)}y.critical.buyingTail&&(f+=8),y.critical.sellingTail&&(T+=8),y.critical.tpoBias.direction==="BULLISH"&&(f+=7),y.critical.tpoBias.direction==="BEARISH"&&(T+=7);const j=f+T,b=j>0?Math.round(f/j*100):50,O=100-b;let _="NEUTRAL",D="#ffaa00",W=50;return b>=65?(_=b>=80?"VERY BULLISH":"BULLISH",D=b>=80?"#00ff88":"#88ff88",W=b):O>=65?(_=O>=80?"VERY BEARISH":"BEARISH",D=O>=80?"#ff4466":"#ff8888",W=O):W=Math.max(b,O),t.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:h?10:12,border:`2px solid ${D}40`,padding:h?12:16,marginBottom:h?12:16},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#888",letterSpacing:1,marginBottom:4},children:"SIGNAL ENGINE"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.jsx("span",{style:{fontSize:h?18:22,fontWeight:700,color:D},children:_}),t.jsxs("span",{style:{fontSize:12,padding:"3px 8px",background:`${D}25`,borderRadius:4,color:D,fontWeight:600},children:[W,"%"]})]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:10,color:"#888"},children:"Score"}),t.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[t.jsxs("span",{style:{color:"#00ff88",fontSize:12},children:["+",f]}),t.jsx("span",{style:{color:"#666"},children:"vs"}),t.jsxs("span",{style:{color:"#ff4466",fontSize:12},children:["-",T]})]})]})]}),t.jsxs("div",{style:{background:`linear-gradient(135deg, ${a.confidenceColor}12 0%, rgba(0,0,0,0.4) 100%)`,border:`1px solid ${a.confidenceColor}50`,borderRadius:10,padding:h?12:16,marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,paddingBottom:10,borderBottom:`1px solid ${a.confidenceColor}30`},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"MIND OVER MARKETS"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsxs("span",{style:{fontSize:h?20:26,fontWeight:800,color:a.direction==="LONG"?"#00ff88":a.direction==="SHORT"?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:[a.totalScore>0?"+":"",a.totalScore]}),t.jsx("span",{style:{fontSize:h?14:16,fontWeight:700,color:a.direction==="LONG"?"#00ff88":a.direction==="SHORT"?"#ff4466":"#ffaa00"},children:a.direction})]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:11,fontWeight:700,color:a.confidenceColor,marginBottom:2},children:a.confidence}),t.jsxs("div",{style:{fontSize:10,padding:"3px 8px",background:`${a.confidenceColor}25`,borderRadius:4,color:a.confidenceColor,fontWeight:600},children:["Size: ",a.positionSize]})]})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:h?"1fr 1fr":"1fr 1fr 1fr 1fr",gap:8},children:[a.rank1,a.rank2,a.rank3,a.rank4].map((x,R)=>{var Se,Ce;const M=R+1,ie=x.direction==="LONG"?"#00ff88":x.direction==="SHORT"?"#ff4466":"#666",ae=Math.min(100,Math.abs(x.total)*(M===1?15:M<=3?20:30));return t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"8px 10px",borderLeft:`3px solid ${ie}`},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[t.jsxs("span",{style:{fontSize:8,color:"#888",letterSpacing:.5},children:["R",M," ",x.name]}),t.jsxs("span",{style:{fontSize:12,fontWeight:700,color:ie,fontFamily:"monospace"},children:[x.total>0?"+":"",x.total]})]}),t.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:t.jsx("div",{style:{height:"100%",width:`${ae}%`,background:ie,borderRadius:2,transition:"width 0.3s"}})}),x.factors.length>0&&t.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(Se=x.factors[0])==null?void 0:Se.name,": ",(Ce=x.factors[0])==null?void 0:Ce.signal]})]},x.name)})}),a.conflicts.length>0&&t.jsxs("div",{style:{marginTop:10,padding:"8px 10px",background:"rgba(255,170,0,0.15)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:[t.jsx("span",{style:{fontWeight:600},children:"Conflict: "}),a.conflicts[0].resolution,a.conflicts.length>1&&` (+${a.conflicts.length-1} more)`]}),t.jsxs("details",{style:{marginTop:10},children:[t.jsxs("summary",{style:{fontSize:10,color:"#888",cursor:"pointer",userSelect:"none"},children:["View all ",a.rank1.factors.length+a.rank2.factors.length+a.rank3.factors.length+a.rank4.factors.length," factors"]}),t.jsx("div",{style:{marginTop:8,maxHeight:200,overflowY:"auto"},children:[a.rank1,a.rank2,a.rank3,a.rank4].map((x,R)=>x.factors.length>0&&t.jsxs("div",{style:{marginBottom:8},children:[t.jsxs("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:["RANK ",R+1,": ",x.name," (+",x.points,"pts each)"]}),x.factors.map((M,ie)=>t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:10,padding:"4px 8px",marginBottom:2,background:"rgba(0,0,0,0.2)",borderRadius:4,borderLeft:`2px solid ${M.signal==="LONG"?"#00ff88":M.signal==="SHORT"?"#ff4466":"#666"}`},children:[t.jsx("span",{style:{color:"#aaa"},children:M.name}),t.jsxs("span",{style:{color:M.signal==="LONG"?"#00ff88":M.signal==="SHORT"?"#ff4466":"#666",fontWeight:600},children:[M.signal," (",M.pts>0?"+":"",M.pts,")"]})]},ie))]},x.name))})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"MONTHLY"}),t.jsx("div",{style:{fontSize:h?13:15,fontWeight:600,color:y.monthly.color},children:y.monthly.bias})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"WEEKLY"}),t.jsx("div",{style:{fontSize:h?13:15,fontWeight:600,color:y.weekly.color},children:y.weekly.bias})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:y.dayOpen.bias!=="NEUTRAL"?`1px solid ${y.dayOpen.color}40`:"none"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"DAY OPEN (18:00 ET)"}),t.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[t.jsx("span",{style:{fontSize:h?14:16,fontWeight:700,color:y.dayOpen.color},children:y.dayOpen.position}),y.dayOpen.price>0&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(tt=y.dayOpen.price)==null?void 0:tt.toFixed(2)]}),t.jsxs("span",{style:{fontSize:10,color:y.dayOpen.color},children:["(",y.dayOpen.diff>0?"+":"",(se=y.dayOpen.diff)==null?void 0:se.toFixed(1),"pts)"]})]})]}),y.dayOpen.bias&&y.dayOpen.bias!=="NEUTRAL"&&t.jsx("div",{style:{fontSize:9,color:y.dayOpen.color,marginTop:4},children:y.dayOpen.bias==="BULLISH"?"Buying below open":"Selling above open"})]}),t.jsxs("div",{style:{background:y.weeklyOpen.position==="--"?"rgba(50,50,60,0.5)":"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:y.weeklyOpen.bias&&y.weeklyOpen.bias!=="NEUTRAL"?`1px solid ${y.weeklyOpen.color}40`:"1px dashed rgba(255,255,255,0.1)"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"WEEKLY OPEN (Sun 18:00)"}),y.weeklyOpen.position==="--"?t.jsxs("div",{children:[t.jsx("span",{style:{fontSize:h?13:14,fontWeight:600,color:"#666"},children:"N/A"}),t.jsx("div",{style:{fontSize:9,color:"#555",marginTop:4},children:"Not tracked yet - sets on Sunday 18:00 ET"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[t.jsx("span",{style:{fontSize:h?14:16,fontWeight:700,color:y.weeklyOpen.color},children:y.weeklyOpen.position}),y.weeklyOpen.price>0&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(me=y.weeklyOpen.price)==null?void 0:me.toFixed(2)]}),t.jsxs("span",{style:{fontSize:10,color:y.weeklyOpen.color},children:["(",y.weeklyOpen.diff>0?"+":"",(w=y.weeklyOpen.diff)==null?void 0:w.toFixed(1),"pts)"]})]})]}),y.weeklyOpen.bias&&y.weeklyOpen.bias!=="NEUTRAL"&&t.jsx("div",{style:{fontSize:9,color:y.weeklyOpen.color,marginTop:4},children:y.weeklyOpen.bias==="BULLISH"?"Buying below weekly open":"Selling above weekly open"})]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:h?"1fr 1fr":"1fr 1fr 1fr",gap:12,marginBottom:12},children:[t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"INITIAL BALANCE"}),t.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[t.jsx("span",{style:{fontSize:h?14:16,fontWeight:700,color:y.daily.ib.color},children:y.daily.ib.level}),y.daily.ib.pct!=="--"&&t.jsxs("span",{style:{fontSize:11,color:"#666"},children:[y.daily.ib.pct,"%"]})]})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"LOCATION wrt PVA"}),t.jsxs("div",{children:[t.jsx("span",{style:{fontSize:h?14:16,fontWeight:700,color:y.daily.pvaLocation.color},children:y.daily.pvaLocation.status}),y.daily.pvaLocation.detail&&t.jsx("div",{style:{fontSize:10,color:"#888",marginTop:2},children:y.daily.pvaLocation.detail})]})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",gridColumn:h?"1 / -1":"auto"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"OPENING TYPE"}),t.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[t.jsx("span",{style:{fontSize:h?14:16,fontWeight:700,color:y.daily.opening.color},children:y.daily.opening.type}),y.daily.opening.full&&t.jsx("span",{style:{fontSize:10,color:"#666"},children:y.daily.opening.full})]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12},children:[t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"AB OVERLAP"}),t.jsx("div",{style:{fontSize:h?14:16,fontWeight:700,color:y.critical.abOverlap.color},children:y.critical.abOverlap.pct!=="--"?`${y.critical.abOverlap.pct}%`:"--"})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TAIL/EXCESS"}),t.jsxs("div",{style:{display:"flex",gap:8},children:[t.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:y.critical.buyingTail?"#00ff8830":"rgba(255,255,255,0.05)",color:y.critical.buyingTail?"#00ff88":"#555"},children:"BUY"}),t.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:y.critical.sellingTail?"#ff446630":"rgba(255,255,255,0.05)",color:y.critical.sellingTail?"#ff4466":"#555"},children:"SELL"})]})]}),t.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO BIAS"}),t.jsx("div",{style:{fontSize:h?14:16,fontWeight:700,color:y.critical.tpoBias.color},children:y.critical.tpoBias.direction})]})]}),t.jsxs("div",{style:{marginTop:16,padding:"14px 16px",background:`linear-gradient(135deg, ${D}08 0%, transparent 50%)`,borderRadius:8,border:`1px solid ${D}30`},children:[t.jsx("div",{style:{fontSize:10,color:D,letterSpacing:1,marginBottom:14,fontWeight:600,borderBottom:`1px solid ${D}20`,paddingBottom:8},children:"NON-DISCRETIONARY ANALYSIS"}),t.jsx("div",{style:{fontSize:h?12:13,color:"#bbb",lineHeight:1.85},children:(()=>{var ie,ae,Se;const x=[];if(y.monthly.bias!=="NEUTRAL"||y.weekly.bias!=="NEUTRAL"){if(y.weekly.bias!=="NEUTRAL"){const Ce=((ie=y.weekly.factors)==null?void 0:ie.length)>0?` (${y.weekly.factors.slice(0,2).join(", ")})`:"";x.push(`Weekly bias is <span style="color:${y.weekly.color};font-weight:600">${y.weekly.bias}</span>${Ce} based on week range, weekly open, and prior day position.`)}if(y.monthly.bias!=="NEUTRAL"){const Ce=((ae=y.monthly.factors)==null?void 0:ae.length)>0?` (${y.monthly.factors.slice(0,2).join(", ")})`:"";x.push(`Monthly bias is <span style="color:${y.monthly.color};font-weight:600">${y.monthly.bias}</span>${Ce} based on rolling 20-day range analysis.`)}}if(y.dayOpen.price>0&&y.dayOpen.bias!=="NEUTRAL"&&(y.dayOpen.bias==="BULLISH"?x.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(y.dayOpen.diff).toFixed(1)}pts BELOW</span> Day Open ($${y.dayOpen.price.toFixed(2)}) - buying below the open adds bullish confidence.`):x.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(y.dayOpen.diff).toFixed(1)}pts ABOVE</span> Day Open ($${y.dayOpen.price.toFixed(2)}) - selling above the open adds bearish confidence.`)),y.weeklyOpen.price>0&&y.weeklyOpen.bias!=="NEUTRAL"&&(y.weeklyOpen.bias==="BULLISH"?x.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(y.weeklyOpen.diff).toFixed(1)}pts BELOW</span> Weekly Open ($${y.weeklyOpen.price.toFixed(2)}) - buying below weekly open is a key bullish signal.`):x.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(y.weeklyOpen.diff).toFixed(1)}pts ABOVE</span> Weekly Open ($${y.weeklyOpen.price.toFixed(2)}) - selling above weekly open is a key bearish signal.`)),y.daily.ib.level!=="--"&&y.daily.ib.level!=="FORMING"){const Ce={LOW:`Initial Balance is <span style="color:#00ff88;font-weight:600">LOW</span> (${y.daily.ib.pct}% of ADR) - expect range extension and directional move.`,MEDIUM:`Initial Balance is <span style="color:#ffaa00;font-weight:600">MEDIUM</span> (${y.daily.ib.pct}% of ADR) - balanced day possible, watch for breakout.`,HIGH:`Initial Balance is <span style="color:#ff4466;font-weight:600">HIGH</span> (${y.daily.ib.pct}% of ADR) - range may be set, rotational day likely.`};x.push(Ce[y.daily.ib.level]||"")}if(y.daily.pvaLocation.status!=="--"){const Ce={IN:`Price is <span style="color:#00aaff;font-weight:600">INSIDE</span> prior value area (${y.daily.pvaLocation.detail}) - value acceptance, mean reversion favored.`,OUT:(Se=y.daily.pvaLocation.detail)!=null&&Se.includes("Above")?`Price is <span style="color:#00ff88;font-weight:600">ABOVE</span> prior value area (${y.daily.pvaLocation.detail}) - bullish continuation if accepted.`:`Price is <span style="color:#ff4466;font-weight:600">BELOW</span> prior value area (${y.daily.pvaLocation.detail}) - bearish continuation if accepted.`,DYNAMIC:'Price is at <span style="color:#ffaa00;font-weight:600">DYNAMIC</span> boundary of prior value area - key decision point, watch for acceptance or rejection.'};x.push(Ce[y.daily.pvaLocation.status]||"")}if(y.daily.opening.type!=="--"&&y.daily.opening.type!=="DEV"){const Ce={OD:'Opening type is <span style="color:#00ff88;font-weight:600">Open Drive</span> - strong conviction, trend day likely, fade at your own risk.',OTD:'Opening type is <span style="color:#88ff88;font-weight:600">Open Test Drive</span> - tested and confirmed direction, follow the trend.',ORR:'Opening type is <span style="color:#ff8888;font-weight:600">Open Rejection Reverse</span> - initial move failed, expect reversal to dominate.',OA:'Opening type is <span style="color:#ffaa00;font-weight:600">Open Auction</span> - balanced open, wait for value to establish before trading.'};x.push(Ce[y.daily.opening.type]||"")}if(y.critical.abOverlap.pct!=="--"){const Ce=parseFloat(y.critical.abOverlap.pct);Ce<33?x.push(`AB overlap is <span style="color:#00ff88;font-weight:600">${Ce}%</span> (trending) - A and B periods show directional conviction, continuation expected.`):Ce<=50?x.push(`AB overlap is <span style="color:#ffaa00;font-weight:600">${Ce}%</span> (mixed) - some directional bias but not strong, be selective.`):x.push(`AB overlap is <span style="color:#ff4466;font-weight:600">${Ce}%</span> (rotational) - high overlap suggests balance, range-bound trading likely.`)}if((y.critical.buyingTail||y.critical.sellingTail)&&(y.critical.buyingTail&&x.push('<span style="color:#00ff88;font-weight:600">Buying tail/excess</span> detected at lows - aggressive buyers defending, support is strong.'),y.critical.sellingTail&&x.push('<span style="color:#ff4466;font-weight:600">Selling tail/excess</span> detected at highs - aggressive sellers defending, resistance is strong.')),y.critical.tpoBias.direction!=="--"){const Ce={BULLISH:'TPO distribution is <span style="color:#00ff88;font-weight:600">BULLISH</span> - POC is above value area midpoint, buyers in control.',BEARISH:'TPO distribution is <span style="color:#ff4466;font-weight:600">BEARISH</span> - POC is below value area midpoint, sellers in control.',NEUTRAL:'TPO distribution is <span style="color:#ffaa00;font-weight:600">NEUTRAL</span> - balanced profile, no clear directional bias from structure.'};x.push(Ce[y.critical.tpoBias.direction]||"")}const R=_.includes("BULLISH")?'<strong style="color:#00ff88">Conclusion:</strong> Multiple factors align bullish. Look for long entries at support zones with proper risk management.':_.includes("BEARISH")?'<strong style="color:#ff4466">Conclusion:</strong> Multiple factors align bearish. Exercise caution on longs, consider short setups at resistance.':'<strong style="color:#ffaa00">Conclusion:</strong> Mixed signals present. Wait for clearer structure or trade both sides at extremes.';x.push(R);const M=x.map((Ce,U)=>{const ve=U===x.length-1,xe=ve?D:"rgba(255,255,255,0.1)",J=ve?`${D}10`:"transparent";return`<div style="margin-bottom: ${ve?"0":"12px"}; margin-top: ${ve?"16px":"0"}; padding: ${ve?"10px 10px 10px 10px":"2px 0 2px 10px"}; border-left: 2px solid ${xe}; background: ${J}; border-radius: ${ve?"6px":"0"};">${Ce}</div>`}).join("");return t.jsx("span",{dangerouslySetInnerHTML:{__html:M}})})()})]})]})})(),((S=e.buy_zones)==null?void 0:S.length)>0?e.buy_zones.map((k,y)=>t.jsx(m,{zone:k,rank:y+1},k.id)):t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,padding:h?24:40,textAlign:"center",color:"#888"},children:[t.jsx("div",{style:{fontSize:h?36:48,marginBottom:16},children:""}),t.jsx("div",{style:{fontSize:h?14:16,marginBottom:8},children:"No buy zones available"}),t.jsx("div",{style:{fontSize:12},children:"Price may be at or below all support zones"})]})]}),t.jsx("div",{style:{flex:h?"none":1,minHeight:h?300:0,height:h?400:"auto"},children:t.jsx(u,{zones:e.all_zones,buyZones:e.buy_zones,currentPrice:e.current_price})})]})},Ag=({selectedContract:e})=>{var Be,it,Je,Lt,lt,yn,nn,Bn,Kn,X,We,Qt,un,hn,Vt,Bt,Sn,Dn,Mn,Jn,Qn,je,gt,pt,dn,gn,Zn,or,qn,er,H,$e,Le,Ue,Mt,qe,at,mn,rn,xt,zn,cn,sr,Ae,Pe,yt,Rt,pn;const[n,r]=A.useState(null),[i,o]=A.useState(!1),[s,l]=A.useState("1week"),[d,c]=A.useState(!1),[p,h]=A.useState(null),[m,u]=A.useState(!1),[z,S]=A.useState(!1),[k,y]=A.useState(!1),[a,g]=A.useState(null),[v,f]=A.useState(null),[T,j]=A.useState(0),[b,O]=A.useState(!1),[_,D]=A.useState("compact"),[W,G]=A.useState(!1),[_e,Fe]=A.useState(!1),[I,ze]=A.useState({show:!1,x:0,y:0,price:0,dayIdx:-1,day:null}),tt=Wr.useRef(!1),se=Wr.useRef(!1),me=Wr.useRef(null),w=Wr.useRef(null),{isMobile:x,isTablet:R}=_i(),M=E=>{tt.current=!1,se.current=!1,setTimeout(()=>{if(me.current){me.current.scrollLeft=me.current.scrollWidth-me.current.clientWidth;const K=(me.current.scrollHeight-me.current.clientHeight)/2;me.current.scrollTop=K}if(w.current){w.current.scrollLeft=w.current.scrollWidth-w.current.clientWidth;const K=(w.current.scrollHeight-w.current.clientHeight)/2;w.current.scrollTop=K}const $=document.getElementById("price-scale-1w"),N=document.getElementById("price-scale-4w");$&&me.current&&($.scrollTop=me.current.scrollTop),N&&w.current&&(N.scrollTop=w.current.scrollTop)},300)},ie=Wr.useRef(!1);A.useEffect(()=>{n!=null&&n.current_price&&!ie.current&&(M(n.current_price),ie.current=!0)},[n==null?void 0:n.current_price]),A.useEffect(()=>{ie.current=!1},[e]);const ae=E=>E.length===1?E.charCodeAt(0)-65:26+(E.charCodeAt(0)-65)*26+(E.charCodeAt(1)-65),Se=31,Ce=44,U=E=>{if(!E)return{};const $={};for(const[N,K]of Object.entries(E)){const fe=K.filter(ke=>{const B=ae(ke);return B>=Se&&B<=Ce});fe.length>0&&($[N]=fe)}return $},ve=E=>{if(!E||Object.keys(E).length===0)return 0;let $=0,N=0;for(const[K,fe]of Object.entries(E))fe.length>$&&($=fe.length,N=parseFloat(K));return N},xe=(E,$,N=.1)=>{var we,nt;if(!E||Object.keys(E).length===0)return{vah:0,val:0};const K=Object.keys(E).map(Ee=>parseFloat(Ee)).sort((Ee,be)=>be-Ee),fe=Object.values(E).reduce((Ee,be)=>Ee+be.length,0),ke=Math.ceil(fe*.7);let B=new Set,V=0;const oe=$.toFixed(1);E[oe]&&(B.add($),V+=E[oe].length);let pe=K.indexOf($)-1,he=K.indexOf($)+1;for(;V<ke&&(pe>=0||he<K.length);){const Ee=pe>=0?K[pe]:null,be=he<K.length?K[he]:null,dt=Ee&&((we=E[Ee.toFixed(1)])==null?void 0:we.length)||0,bn=be&&((nt=E[be.toFixed(1)])==null?void 0:nt.length)||0;if(dt>=bn&&Ee!==null)B.add(Ee),V+=dt,pe--;else if(be!==null)B.add(be),V+=bn,he++;else break}const ge=Array.from(B);return{vah:Math.max(...ge),val:Math.min(...ge)}},J=(E,$=!1)=>{if(!E||E.length===0)return null;const N=E.slice(0,20),K=2,fe={};let ke=[],B=[];N.forEach((he,ge)=>{const we=ge<26?String.fromCharCode(65+ge):"A"+String.fromCharCode(65+ge-26),nt=$&&he.ib_high||he.high,Ee=$&&he.ib_low||he.low;if(nt&&Ee){ke.push(nt),B.push(Ee);for(let be=Math.floor(Ee/K)*K;be<=nt;be+=K){const dt=be.toFixed(1);fe[dt]||(fe[dt]=[]),fe[dt].push(we)}}});const V=ve(fe),{vah:oe,val:pe}=xe(fe,V,K);return{profiles:fe,poc:V,vah:oe,val:pe,high:Math.max(...ke),low:Math.min(...B),period_count:N.length,current_letter:N.length>0?N.length<26?String.fromCharCode(65+N.length-1):"T":"A",ib_high:null,ib_low:null,is_composite:!0,days_included:N.length}};A.useEffect(()=>{r(null),o(!1);const E=async()=>{await new Promise(K=>setTimeout(K,3e3));const N=async()=>{try{const K=await fetch(`${en}/market-profile`);if(K.ok){const fe=await K.json(),ke=e==="BTC-SPOT"||(e==null?void 0:e.startsWith("BTC")),B=fe.poc||0,V=B>5e4;ke===V||B===0?(r(fe),o(!0)):console.log(`Waiting for backend to switch - got POC ${B} but expected ${ke?"BTC":"non-BTC"}`)}}catch{o(!1)}};return N(),setInterval(N,1e3)};let $;return E().then(N=>{$=N}),()=>{$&&clearInterval($)}},[e]);const re=10,Z=E=>`tpo_historic_cache_${E||"GC"}`;A.useEffect(()=>{h(null),(async()=>{var ke,B,V;const $=Z(e);try{const oe=localStorage.getItem($);if(oe){const pe=JSON.parse(oe),he=new Date().toISOString().split("T")[0],ge=e==="BTC-SPOT"||(e==null?void 0:e.startsWith("BTC")),we=((B=(ke=pe.data)==null?void 0:ke.profiles)==null?void 0:B.length)>0;if(pe.version===re&&pe.date===he&&pe.data&&(we||ge)){h(pe.data);return}else!we&&!ge&&(localStorage.removeItem($),console.log("Cleared stale cache with empty profiles"))}}catch{console.warn("Invalid cache, fetching fresh data")}await new Promise(oe=>setTimeout(oe,12e3)),u(!0);let N=3,K=null;for(;N>0;)try{K=await(await fetch(`${en}/historic-tpo?days=40`)).json();const pe=e==="BTC-SPOT"||(e==null?void 0:e.startsWith("BTC"));if(K.source==="spot_no_history"&&!pe){console.log(`Historic TPO: Backend still on spot, retrying in 5s... (${N} left)`),N--,await new Promise(ge=>setTimeout(ge,5e3));continue}break}catch(oe){console.error("Failed to fetch historic TPO:",oe),N--,await new Promise(pe=>setTimeout(pe,3e3))}if(!K){u(!1);return}const fe=e==="BTC-SPOT"||(e==null?void 0:e.startsWith("BTC"));if(((V=K.profiles)==null?void 0:V.length)>0||fe){const oe={version:re,date:new Date().toISOString().split("T")[0],contract:e,data:K};try{localStorage.setItem($,JSON.stringify(oe))}catch(pe){console.warn("Failed to cache historic data:",pe)}}h(K),u(!1)})()},[e]);const ee=s==="1week"||s==="1week_rth",ye=ee||(s==="4week"||s==="4week_rth");if((!i||!n)&&!(ye&&((Be=p==null?void 0:p.profiles)==null?void 0:Be.length)>0))return t.jsxs("div",{style:{padding:40,textAlign:"center",color:"#8b8b8b"},children:[t.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),t.jsx("div",{style:{fontSize:18,marginBottom:8},children:"Connecting to Market Profile..."}),t.jsx("div",{style:{fontSize:13},children:"Waiting for TPO data from backend"})]});const L=(()=>{var $;if(!n&&!ye||ye)return null;if(s==="day")return{profiles:n.profiles,poc:n.poc,vah:n.vah,val:n.val,single_prints:n.single_prints||[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:n.period_count,current_letter:n.current_letter,open_price:n.open_price,high:n.high||Math.max(...Object.keys(n.profiles||{}).map(N=>parseFloat(N))),low:n.low||Math.min(...Object.keys(n.profiles||{}).map(N=>parseFloat(N))),volume:n.volume};if(s==="rth"){const N=U(n.profiles),K=ve(N),{vah:fe,val:ke}=xe(N,K),B=Object.keys(N).map(V=>parseFloat(V));return{profiles:N,poc:K,vah:fe,val:ke,single_prints:[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:Object.values(N).flat().filter((V,oe,pe)=>pe.indexOf(V)===oe).length,current_letter:n.current_letter,open_price:n.rth_open||n.open_price,high:B.length>0?Math.max(...B):0,low:B.length>0?Math.min(...B):0,volume:n.volume}}if(s==="4week")return J(p==null?void 0:p.profiles,!1);if(s==="4week_rth")return J(p==null?void 0:p.profiles,!0);const E=($=n.sessions)==null?void 0:$[s];return E?{profiles:E.profiles,poc:E.poc,vah:E.vah,val:E.val,single_prints:E.single_prints||[],ib_high:E.ib_high,ib_low:E.ib_low,period_count:E.period_count,current_letter:E.current_letter,high:E.high,low:E.low,volume:E.volume}:null})(),Me=(n==null?void 0:n.tick_size)||.1,zt=T===0?(E=>{if(!E||Object.keys(E).length===0)return 1;const $=Object.keys(E).map(V=>parseFloat(V)),N=Math.min(...$),B=(Math.max(...$)-N)/45;return B<=.1?.1:B<=.5?.5:B<=1?1:B<=2?2:B<=5?5:B<=10?10:Math.ceil(B/10)*10})(L==null?void 0:L.profiles):T,Dt=(E,$)=>{if(!E||$<=Me)return Object.entries(E).map(([K,fe])=>({price:parseFloat(K),letters:fe})).sort((K,fe)=>fe.price-K.price);const N={};return Object.entries(E).forEach(([K,fe])=>{const ke=parseFloat(K),B=Math.floor(ke/$)*$;N[B]||(N[B]=new Set),fe.forEach(V=>N[B].add(V))}),Object.entries(N).map(([K,fe])=>({price:parseFloat(K),letters:Array.from(fe)})).sort((K,fe)=>fe.price-K.price)},bt=L!=null&&L.profiles?Dt(L.profiles,zt):[],Y=bt.map(E=>E.price);Math.min(...Y),Math.max(...Y);const Q={developing:"#8b8b8b",normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},Re={developing:"#8b8b8b",OA:"#888888",ORR:"#ffaa00",OTD:"#00ff88",OD:"#00aaff"},Ge={developing:"",D:"D",P:"P",b:"b",B:"B"},ce=n||{};return t.jsxs("div",{style:{display:x?"flex":"grid",flexDirection:x?"column":void 0,gridTemplateColumns:x?void 0:R||b?"1fr":"280px 1fr 300px",gap:x?12:20,height:x?"auto":"100%",padding:x?12:0,overflow:x?"auto":"hidden"},children:[!b&&t.jsxs("div",{style:{display:"flex",flexDirection:x?"row":"column",gap:x?8:16,overflowX:x?"auto":void 0,flexWrap:x?"nowrap":void 0},children:[t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[t.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"TPO Ranges"}),t.jsxs("div",{style:{display:"flex",marginBottom:12,background:"rgba(20,20,30,0.8)",borderRadius:8,padding:3},children:[t.jsxs("button",{onClick:()=>{s.includes("_rth")&&l(s.replace("_rth","")),M()},onMouseEnter:E=>{const $=E.currentTarget.querySelector(".tooltip");$&&($.style.opacity="1")},onMouseLeave:E=>{const $=E.currentTarget.querySelector(".tooltip");$&&($.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"transparent":"linear-gradient(135deg, rgba(0,170,255,0.3) 0%, rgba(0,221,255,0.2) 100%)",border:s.includes("_rth")?"1px solid transparent":"1px solid rgba(0,221,255,0.5)",borderRadius:6,color:s.includes("_rth")?"#666":"#00ddff",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["ETH",t.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,221,255,0.3)",borderRadius:6,color:"#00ddff",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"18:00 - 17:00 ET"})]}),t.jsxs("button",{onClick:()=>{s.includes("_rth")||l(s+"_rth"),M()},onMouseEnter:E=>{const $=E.currentTarget.querySelector(".tooltip");$&&($.style.opacity="1")},onMouseLeave:E=>{const $=E.currentTarget.querySelector(".tooltip");$&&($.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"linear-gradient(135deg, rgba(0,255,136,0.3) 0%, rgba(0,200,100,0.2) 100%)":"transparent",border:s.includes("_rth")?"1px solid rgba(0,255,136,0.5)":"1px solid transparent",borderRadius:6,color:s.includes("_rth")?"#00ff88":"#666",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["RTH",t.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:6,color:"#00ff88",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"09:30 - 16:15 ET"})]})]}),t.jsxs("div",{style:{display:"flex",gap:6},children:[t.jsx("button",{onClick:()=>{const E=s.includes("_rth");l(E?"1week_rth":"1week"),M()},style:{flex:1,padding:"12px 8px",background:s==="1week"||s==="1week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="1week"||s==="1week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="1week"||s==="1week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"1 Week"}),t.jsx("button",{onClick:()=>{const E=s.includes("_rth");l(E?"4week_rth":"4week"),M()},style:{flex:1,padding:"12px 8px",background:s==="4week"||s==="4week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="4week"||s==="4week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="4week"||s==="4week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"4 Week"})]})]}),t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px"},children:[t.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Key Levels"}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("span",{style:{color:"#ffaa00",fontWeight:600,fontSize:12},children:"POC"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((it=L==null?void 0:L.poc)==null?void 0:it.toFixed(2))||"--"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAH"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Je=L==null?void 0:L.vah)==null?void 0:Je.toFixed(2))||"--"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAL"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Lt=L==null?void 0:L.val)==null?void 0:Lt.toFixed(2))||"--"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB High"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((lt=L==null?void 0:L.ib_high)==null?void 0:lt.toFixed(2))||"--"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[t.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB Low"}),t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((yn=L==null?void 0:L.ib_low)==null?void 0:yn.toFixed(2))||"--"})]}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[t.jsx("span",{style:{color:"#ff4466",fontWeight:600,fontSize:12},children:"Single Prints"}),t.jsx("span",{style:{color:"#ff4466",fontFamily:"monospace",fontSize:12},children:((nn=L==null?void 0:L.single_prints)==null?void 0:nn.length)||0})]})]}),(n==null?void 0:n.confluence)&&t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px",marginTop:8},children:[t.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Confluence Score"}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",background:n.confluence.total_score>=8?"rgba(0,255,136,0.15)":n.confluence.total_score>=5?"rgba(0,170,255,0.15)":n.confluence.total_score>=2?"rgba(255,170,0,0.15)":n.confluence.total_score>=-1?"rgba(139,139,139,0.15)":"rgba(255,68,102,0.15)",borderRadius:6,marginBottom:8,border:`1px solid ${n.confluence.total_score>=8?"rgba(0,255,136,0.3)":n.confluence.total_score>=5?"rgba(0,170,255,0.3)":n.confluence.total_score>=2?"rgba(255,170,0,0.3)":n.confluence.total_score>=-1?"rgba(139,139,139,0.3)":"rgba(255,68,102,0.3)"}`},children:[t.jsxs("div",{children:[t.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.confluence.total_score>=8?"#00ff88":n.confluence.total_score>=5?"#00aaff":n.confluence.total_score>=2?"#ffaa00":n.confluence.total_score>=-1?"#8b8b8b":"#ff4466",fontFamily:"monospace"},children:[n.confluence.total_score>0?"+":"",n.confluence.total_score]}),t.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:n.confluence.confidence})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.confluence.trade_direction==="LONG"?"#00ff88":n.confluence.trade_direction==="SHORT"?"#ff4466":"#8b8b8b"},children:n.confluence.trade_direction==="LONG"?" LONG":n.confluence.trade_direction==="SHORT"?" SHORT":n.confluence.trade_direction}),t.jsxs("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:["Size: ",n.confluence.position_size_pct,"%"]})]})]}),t.jsx("div",{style:{padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:6,marginBottom:12,fontSize:12,color:(Bn=n.confluence.action)!=null&&Bn.includes("NO TRADE")||(Kn=n.confluence.action)!=null&&Kn.includes("SKIP")?"#ff4466":(X=n.confluence.action)!=null&&X.includes("ADD")?"#00ff88":"#fff"},children:n.confluence.action}),t.jsxs("div",{style:{fontSize:11,color:"#8b8b8b"},children:[t.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[t.jsx("span",{style:{color:"#00ff88"},children:"R1 Macro"}),t.jsxs("span",{style:{color:n.confluence.rank1_score>0?"#00ff88":"#666"},children:[n.confluence.rank1_score>0?"+":"",n.confluence.rank1_score]})]}),((Qt=(We=n.confluence.factors)==null?void 0:We.rank1_macro)==null?void 0:Qt.length)>0&&t.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#666"},children:n.confluence.factors.rank1_macro.map((E,$)=>t.jsx("div",{style:{padding:"2px 0"},children:E},$))})]}),t.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[t.jsx("span",{style:{color:"#00aaff"},children:"R2 Volume"}),t.jsxs("span",{style:{color:n.confluence.rank2_score>0?"#00aaff":"#666"},children:[n.confluence.rank2_score>0?"+":"",n.confluence.rank2_score]})]}),((hn=(un=n.confluence.factors)==null?void 0:un.rank2_volume)==null?void 0:hn.length)>0&&t.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#00aaff",opacity:.7},children:n.confluence.factors.rank2_volume.map((E,$)=>t.jsx("div",{style:{padding:"2px 0"},children:E},$))})]}),t.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[t.jsx("span",{style:{color:"#ffaa00"},children:"R3 Structure"}),t.jsxs("span",{style:{color:n.confluence.rank3_score>0?"#ffaa00":"#666"},children:[n.confluence.rank3_score>0?"+":"",n.confluence.rank3_score]})]}),((Bt=(Vt=n.confluence.factors)==null?void 0:Vt.rank3_structure)==null?void 0:Bt.length)>0&&t.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ffaa00",opacity:.7},children:n.confluence.factors.rank3_structure.map((E,$)=>t.jsx("div",{style:{padding:"2px 0"},children:E},$))})]}),t.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[t.jsx("span",{style:{color:"#9370DB"},children:"R4 Timing"}),t.jsxs("span",{style:{color:n.confluence.rank4_score>0?"#9370DB":"#666"},children:[n.confluence.rank4_score>0?"+":"",n.confluence.rank4_score]})]}),((Dn=(Sn=n.confluence.factors)==null?void 0:Sn.rank4_timing)==null?void 0:Dn.length)>0&&t.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#9370DB",opacity:.7},children:n.confluence.factors.rank4_timing.map((E,$)=>t.jsx("div",{style:{padding:"2px 0"},children:E},$))})]}),(n.confluence.conflict_penalty!==0||((Jn=(Mn=n.confluence.factors)==null?void 0:Mn.conflicts)==null?void 0:Jn.length)>0)&&t.jsxs("div",{style:{paddingBottom:4},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[t.jsx("span",{style:{color:"#ff4466"},children:"Conflicts"}),t.jsx("span",{style:{color:"#ff4466"},children:n.confluence.conflict_penalty})]}),((je=(Qn=n.confluence.factors)==null?void 0:Qn.conflicts)==null?void 0:je.length)>0&&t.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ff4466",opacity:.7},children:n.confluence.factors.conflicts.map((E,$)=>t.jsx("div",{style:{padding:"2px 0"},children:E},$))})]})]}),((pt=(gt=n.confluence.factors)==null?void 0:gt.volume_override)==null?void 0:pt.length)>0&&t.jsx("div",{style:{marginTop:10,padding:"8px",background:"rgba(255,170,0,0.1)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:n.confluence.factors.volume_override[0]}),n.confluence.level_type&&t.jsxs("div",{style:{marginTop:8,fontSize:11,color:"#8b8b8b"},children:["At: ",t.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:n.confluence.level_type}),n.confluence.at_key_level&&t.jsx("span",{style:{color:"#fff",fontFamily:"monospace",marginLeft:6},children:n.confluence.at_key_level.toFixed(2)})]})]})]}),t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:20,overflow:"auto"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[t.jsxs("div",{style:{fontSize:14,color:"#fff",fontWeight:600},children:["TPO Profile - ",s==="day"?"Full Day":(gn=(dn=n==null?void 0:n.sessions)==null?void 0:dn[s])==null?void 0:gn.display]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("button",{onClick:()=>G(!W),style:{padding:"4px 10px",background:W?"rgba(0,170,255,0.25)":"rgba(30,30,40,0.8)",border:W?"1px solid rgba(0,170,255,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:W?"#00aaff":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:W?"Zoomed":"Zoom"}),t.jsx("button",{onClick:()=>Fe(!_e),style:{padding:"4px 10px",background:_e?"rgba(255,170,0,0.25)":"rgba(30,30,40,0.8)",border:_e?"1px solid rgba(255,170,0,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:_e?"#ffaa00":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:_e?"IB Only":"Hide Non-IB"}),t.jsxs("span",{style:{fontSize:12,color:"#8b8b8b",whiteSpace:"nowrap"},children:["Period: ",t.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(L==null?void 0:L.current_letter)||"A"})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(30,30,40,0.8)",borderRadius:6,padding:"2px 4px",border:"1px solid rgba(255,255,255,0.1)"},children:[t.jsx("span",{style:{fontSize:10,color:"#8b8b8b",paddingLeft:4},children:"View:"}),t.jsx("button",{onClick:()=>D("compact"),style:{padding:"4px 8px",background:_==="compact"?"rgba(0,255,136,0.2)":"transparent",border:_==="compact"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:_==="compact"?"#00ff88":"#888",fontSize:10,fontWeight:_==="compact"?600:400,cursor:"pointer"},children:"Compact"}),t.jsx("button",{onClick:()=>D("expanded"),style:{padding:"4px 8px",background:_==="expanded"?"rgba(0,255,136,0.2)":"transparent",border:_==="expanded"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:_==="expanded"?"#00ff88":"#888",fontSize:10,fontWeight:_==="expanded"?600:400,cursor:"pointer"},children:"Expanded"})]}),t.jsx("button",{onClick:()=>O(!b),style:{padding:"4px 10px",background:b?"rgba(0,170,255,0.2)":"rgba(30,30,40,0.8)",border:b?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:b?"#00aaff":"#888",fontSize:11,cursor:"pointer",display:"flex",alignItems:"center",gap:4},title:b?"Collapse TPO chart":"Expand TPO chart",children:b?"":" "})]})]}),t.jsx("div",{style:{fontFamily:"monospace",fontSize:10,position:"relative"},children:ye&&(!p||m)?t.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[t.jsx("div",{style:{fontSize:36,marginBottom:16,animation:"pulse 1.5s ease-in-out infinite"},children:""}),t.jsx("div",{style:{fontSize:16,marginBottom:8,color:"#9370DB"},children:"Loading Historic Data..."}),t.jsxs("div",{style:{fontSize:12},children:["Fetching ",ee?"1-week":"4-week"," TPO profiles"]})]}):ye&&((Zn=p==null?void 0:p.profiles)==null?void 0:Zn.length)===0?t.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[t.jsx("div",{style:{fontSize:36,marginBottom:16},children:""}),t.jsx("div",{style:{fontSize:16,marginBottom:8},children:"No Historic Data Available"}),t.jsx("div",{style:{fontSize:12},children:"Try refreshing or check backend connection"})]}):(s==="1week"||s==="1week_rth")&&((or=p==null?void 0:p.profiles)==null?void 0:or.length)>0?(()=>{var E,$,N,K,fe,ke,B,V,oe,pe,he;try{const ge=s==="1week_rth",we=p.profiles[0],Ee=((we==null?void 0:we.high)||5e3)>1e4,be=Ee?W?25:50:W?2:4,dt=Ee?W?.1:1:W?.05:.3,bn=Math.max(2,Math.round(be/dt)),Ut=14,Gt=11,Pt=45,Zt=20,ii=ge?[{key:"us_rth",name:"US RTH",color:"#00ff88",start:31,end:44,time:"09:30-16:15",hasIB:!0,ibStart:31,ibEnd:33},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}]:[{key:"asia",name:"Asia",color:"#00ddff",start:0,end:17,time:"18:00-03:00"},{key:"london",name:"London",color:"#ffaa00",start:18,end:28,time:"03:00-08:20"},{key:"us",name:"US",color:"#00ff88",start:28,end:41,time:"08:20-15:00",hasIB:!0,ibStart:28,ibEnd:30},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}],wr=F=>F.length===1?F.charCodeAt(0)-65:26+(F.charCodeAt(0)-65)*26+(F.charCodeAt(1)-65),Ie=F=>{if(F.open_type&&F.open_type!=="developing")return F.open_type;const q=F.ib_high,Ve=F.ib_low,St=F.open,Nt=F.close||F.high;if(!q||!Ve||Ve>=999999||!St)return"OA";const Ct=q-Ve;if(Ct<=0)return"OA";const Yt=(q+Ve)/2,Cn=(St-Ve)/Ct*100;return Cn<=20&&Nt>Yt||Cn>=80&&Nt<Yt?"OD":St>Yt&&F.low<Ve&&Nt>q||St<Yt&&F.high>q&&Nt<Ve?"OTD":F.high>q&&Nt<Yt||F.low<Ve&&Nt>Yt?"ORR":"OA"},vt=p.profiles.slice(0,5).filter(F=>F.tpo_profiles).reverse(),Qe=F=>F<26?String.fromCharCode(65+F):String.fromCharCode(65+Math.floor(F/26)-1)+String.fromCharCode(65+F%26),On=[];vt.forEach(F=>{ii.forEach(q=>{var wt,In,ht,on,$n,At;const Ve=F.tpo_profiles||{},St=F.price_volumes||{},Nt=F.delta_by_price||{},Ct={},Yt={},Cn={};let ft=0,qt=0,Rn=0,Tt=999999,Xt=null,Ot=null,P=0,Oe=999999;Object.entries(Ve).forEach(([He,jt])=>{const rt=parseFloat(He);jt.filter(An=>{const _t=wr(An);return _t>=q.start&&_t<=q.end}).length>0&&(rt>P&&(P=rt),rt<Oe&&(Oe=rt))});const te=Ee?100:5,ct=P+te,et=Oe-te;Object.entries(St).forEach(([He,jt])=>{const rt=parseFloat(He);if(rt>=et&&rt<=ct){Yt[rt]=(Yt[rt]||0)+jt;const It=Nt[He]||Nt[rt.toFixed(1)]||0;Cn[rt]=(Cn[rt]||0)+It}}),Object.entries(Ve).forEach(([He,jt])=>{const rt=parseFloat(He),It=Math.floor(rt/be)*be,An=jt.filter(_t=>{const gr=wr(_t);return gr>=q.start&&gr<=q.end});An.length>0&&(Ct[It]||(Ct[It]=new Set),An.forEach(_t=>{const xr=wr(_t)-q.start,oi=Qe(xr);Ct[It].add(oi),xr>qt&&(qt=xr)}),rt>Rn&&(Rn=rt),rt<Tt&&(Tt=rt)),q.hasIB&&jt.filter(gr=>{const xr=wr(gr);return xr>=q.ibStart&&xr<=q.ibEnd}).length>0&&((Xt===null||rt>Xt)&&(Xt=rt),(Ot===null||rt<Ot)&&(Ot=rt))}),Object.values(Ct).forEach(He=>{He.size>ft&&(ft=He.size)});let ut=0;if(Object.values(Yt).forEach(He=>{He>ut&&(ut=He)}),Object.keys(Ct).length>0){let He=0,jt=0,rt=null;Object.entries(Ct).forEach(([De,Ne])=>{Ne.size>jt&&(jt=Ne.size,He=parseFloat(De),rt=De)});const It=Object.keys(Ct).map(De=>parseFloat(De)).sort((De,Ne)=>Ne-De),An=Object.values(Ct).reduce((De,Ne)=>De+Ne.size,0);let _t=0,gr=He,xr=He;const oi=It.indexOf(Math.floor(He/be)*be);if(oi>=0){_t=((wt=Ct[It[oi]])==null?void 0:wt.size)||0;let De=oi,Ne=oi;for(;_t<An*.7&&(De>0||Ne<It.length-1);){const ot=De>0&&((In=Ct[It[De-1]])==null?void 0:In.size)||0,dr=Ne<It.length-1&&((ht=Ct[It[Ne+1]])==null?void 0:ht.size)||0;if(ot>=dr&&De>0)De--,_t+=ot;else if(Ne<It.length-1)Ne++,_t+=dr;else break}gr=It[De]||He,xr=It[Ne]||He}let Ur=He,So=0;Object.entries(Yt).forEach(([De,Ne])=>{Ne>So&&(So=Ne,Ur=parseFloat(De))});let wo=Ur,Gr=Ur;const Pn=Object.entries(Yt).map(([De,Ne])=>({price:parseFloat(De),vol:Ne})).sort((De,Ne)=>De.price-Ne.price),si=Pn.reduce((De,Ne)=>De+Ne.vol,0)*.7;if(Pn.length>0){const De=Pn.findIndex(_o=>Math.abs(_o.price-Ur)<dt);let Ne=((on=Pn[De])==null?void 0:on.vol)||0,ot=De>=0?De:0,dr=De>=0?De:0;for(;Ne<si&&(ot<Pn.length-1||dr>0);){const _o=ot<Pn.length-1?Pn[ot+1].vol:0,Bl=dr>0?Pn[dr-1].vol:0;if(_o>=Bl&&ot<Pn.length-1)ot++,Ne+=Pn[ot].vol;else if(dr>0)dr--,Ne+=Pn[dr].vol;else break}wo=(($n=Pn[ot])==null?void 0:$n.price)||Ur,Gr=((At=Pn[dr])==null?void 0:At.price)||Ur}const $i=Math.max(ft*Gt+Zt+Pt+40,120),Vi=Math.max((qt+1)*Gt+Zt+Pt+40,160);let zi=null,ko=null,Co=null,To=null;const Ze=[],Xe=Qe(qt),Ye=[];if(Object.entries(Ct).forEach(([De,Ne])=>{const ot=parseFloat(De);Ne.has("A")&&Ze.push({price:ot,key:De}),Ne.has(Xe)&&Ye.push({price:ot,key:De})}),Ze.length>0){const De=(Math.max(...Ze.map(ot=>ot.price))+Math.min(...Ze.map(ot=>ot.price)))/2;let Ne=Ze[0];Ze.forEach(ot=>{Math.abs(ot.price-De)<Math.abs(Ne.price-De)&&(Ne=ot)}),zi=Ne.price,Co=Ne.key}if(Ye.length>0){const De=(Math.max(...Ye.map(ot=>ot.price))+Math.min(...Ye.map(ot=>ot.price)))/2;let Ne=Ye[0];Ye.forEach(ot=>{Math.abs(ot.price-De)<Math.abs(Ne.price-De)&&(Ne=ot)}),ko=Ne.price,To=Ne.key}let Ht="D";if(Rn>Tt&&He>0){const De=Rn-Tt,Ne=(He-Tt)/De,ot=Tt+De*.67,dr=Tt+De*.33;Ne>.6?Ht="P":Ne<.4?Ht="b":Ht="D"}let ar=null;const Vn=[],Yr=[];if(Object.entries(Ct).forEach(([De,Ne])=>{const ot=parseFloat(De);Ne.has("A")&&Vn.push(ot),Ne.has("B")&&Yr.push(ot)}),Vn.length>0&&Yr.length>0){const De=Math.max(...Vn),Ne=Math.min(...Vn),ot=Math.max(...Yr),dr=Math.min(...Yr),_o=De-Ne,Bl=ot-dr,_f=Math.min(De,ot),zf=Math.max(Ne,dr),Qd=Math.max(0,_f-zf),Zd=Math.min(_o,Bl);Zd>0?ar=Math.round(Qd/Zd*100):Qd>0?ar=100:ar=0}On.push({date:F.date,weekday:F.weekday,sessKey:q.key,sessName:q.name,sessTime:q.time,color:q.color,lettersByPrice:Ct,volumeByPrice:Yt,deltaByPrice:Cn,maxVol:ut,poc:He,pocPriceKey:rt,maxTPOCount:jt,sessionVPOC:Ur,vah:gr,val:xr,volVAH:wo,volVAL:Gr,high:Rn,low:Tt,open:zi,close:ko,openPriceKey:Co,closePriceKey:To,ibHigh:Xt,ibLow:Ot,hasIB:q.hasIB,maxLetters:ft,maxPeriod:qt,sessStart:0,width:_==="expanded"?Vi:$i,day_type:F.day_type,open_type:Ie(F),profile_shape:Ht,abOverlap:ar})}})});const kt=_e?On.filter(F=>F.hasIB&&F.ibHigh&&F.ibLow):On;if(kt.length===0)return t.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:["No session data",_e?" with IB":"","..."]});let Ft=0,Wt=999999;kt.forEach(F=>{F.high>Ft&&(Ft=F.high),F.low<Wt&&(Wt=F.low)}),Ft=Math.ceil(Ft/be)*be+be*3,Wt=Math.floor(Wt/be)*be-be*3;const vn=[];for(let F=Ft;F>=Wt;F-=be)vn.push(F);let wn=0;const Hn=kt.map(F=>{const q=wn;return wn+=F.width,q}),Pr=wn,kn=(F,q)=>{if(!q)return;const Ve=q.getBoundingClientRect(),St=q.scrollLeft,Nt=q.scrollTop,Ct=F.clientX-Ve.left,Yt=Ct+St,Cn=F.clientY-Ve.top,ft=Cn-36+Nt;let qt=kt.length-1;for(let Xt=0;Xt<kt.length;Xt++)if(Yt<Hn[Xt]+kt[Xt].width){qt=Xt;break}const Rn=Math.floor(ft/Ut),Tt=vn[Rn]||0;ze({show:!0,x:Ct,y:Cn,clientX:F.clientX,clientY:F.clientY,chartLeft:Ve.left,chartTop:Ve.top,chartRight:Ve.right,chartBottom:Ve.bottom,scrollLeft:St,scrollTop:Nt,price:Tt,dayIdx:qt,day:kt[qt]})};return t.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[I.show&&I.day&&t.jsxs("div",{style:{position:"absolute",left:I.x+65,top:Math.max(10,I.y-140),background:"rgba(20,20,35,0.95)",border:`1px solid ${I.day.color||"rgba(147,112,219,0.5)"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[t.jsxs("div",{style:{fontSize:12,color:I.day.color||"#ba68c8",fontWeight:700,marginBottom:4},children:[I.day.sessName," - ",I.day.weekday," ",(E=I.day.date)==null?void 0:E.slice(5)]}),t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:I.day.sessTime||"--"}),t.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[t.jsx("span",{children:"Price:"}),t.jsx("span",{style:{color:"#fff",fontWeight:600},children:(($=I.price)==null?void 0:$.toFixed(1))||"--"}),t.jsx("span",{children:"POC:"}),t.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof I.day.poc=="number"?I.day.poc.toFixed(1):"--"}),t.jsx("span",{children:"VAH:"}),t.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof I.day.vah=="number"?I.day.vah.toFixed(1):"--"}),t.jsx("span",{children:"VAL:"}),t.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof I.day.val=="number"?I.day.val.toFixed(1):"--"}),t.jsx("span",{children:"IB H:"}),t.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof I.day.ibHigh=="number"?I.day.ibHigh.toFixed(1):"--"}),t.jsx("span",{children:"IB L:"}),t.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof I.day.ibLow=="number"?I.day.ibLow.toFixed(1):"--"}),t.jsx("span",{children:"IB%:"}),t.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof I.day.ibHigh=="number"&&typeof I.day.ibLow=="number"&&I.day.high>I.day.low?((I.day.ibHigh-I.day.ibLow)/(I.day.high-I.day.low)*100).toFixed(0)+"%":"--"})]}),t.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),t.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[t.jsx("span",{children:"VP VAH:"}),t.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof I.day.volVAH=="number"?I.day.volVAH.toFixed(1):"--"}),t.jsx("span",{children:"VP VAL:"}),t.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof I.day.volVAL=="number"?I.day.volVAL.toFixed(1):"--"}),t.jsx("span",{children:"Day Type:"}),t.jsx("span",{style:{color:Q[(N=I.day)==null?void 0:N.day_type]||"#888",fontWeight:600},children:((fe=(K=I.day)==null?void 0:K.day_type)==null?void 0:fe.replace("_"," "))||"--"}),t.jsx("span",{children:"Open Type:"}),t.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((B=(ke=I.day)==null?void 0:ke.open_type)==null?void 0:B.replace("_"," "))||"--"}),t.jsx("span",{children:"Shape:"}),t.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((oe=(V=I.day)==null?void 0:V.profile_shape)==null?void 0:oe.replace("_"," "))||"--"}),t.jsx("span",{children:"AB Overlap:"}),t.jsx("span",{style:{color:((pe=I.day)==null?void 0:pe.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((he=I.day)==null?void 0:he.abOverlap)=="number"?I.day.abOverlap+"%":"--"})]})]}),t.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[t.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[t.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),t.jsx("div",{style:{overflow:"hidden",height:"calc(100% - 36px)"},id:"price-scale-1w",children:vn.map((F,q)=>{const Ve=F%10===0,St=F%50===0;return t.jsx("div",{style:{height:Ut,fontSize:St?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:St?"rgba(147,112,219,0.9)":Ve?"#666":"transparent",fontWeight:St?600:400,borderBottom:St?"1px solid rgba(147,112,219,0.1)":"none"},children:Ve?F.toFixed(0):""},F)})})]}),t.jsxs("div",{className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:I.show?"none":"crosshair"},onScroll:F=>{const q=document.getElementById("price-scale-1w"),Ve=document.getElementById("time-scale-1w");q&&(q.scrollTop=F.target.scrollTop),Ve&&(Ve.scrollLeft=F.target.scrollLeft)},onMouseMove:F=>kn(F,F.currentTarget),onMouseLeave:()=>ze({...I,show:!1}),ref:F=>{me.current=F,F&&!tt.current&&Pr>F.clientWidth&&(F.scrollLeft=Pr-F.clientWidth,tt.current=!0)},children:[I.show&&I.clientX&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",left:I.chartLeft-58,right:window.innerWidth-I.chartRight,height:1,top:I.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),t.jsx("div",{style:{position:"fixed",left:I.clientX,top:I.chartTop,height:I.chartBottom-I.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),t.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:10,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:kt.map((F,q)=>{var Ve;return t.jsxs("div",{style:{width:F.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:F.sessKey==="asia"||ge&&F.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:I.dayIdx===q?`${F.color}15`:"transparent"},children:[t.jsx("div",{style:{fontSize:10,color:F.color,fontWeight:700},children:F.sessName}),t.jsxs("div",{style:{fontSize:8,color:"#666"},children:[F.weekday," ",(Ve=F.date)==null?void 0:Ve.slice(5)]})]},`${F.date}-${F.sessKey}`)})}),t.jsxs("div",{style:{position:"relative",minHeight:"calc(100% - 36px)"},children:[kt.map((F,q)=>t.jsx("div",{style:{position:"absolute",left:Hn[q]+F.width-1,top:0,bottom:0,minHeight:vn.length*Ut,width:1,background:"rgba(147,112,219,0.06)",pointerEvents:"none",zIndex:1}},`col-line-${q}`)),kt.map((F,q)=>F.sessKey==="asia"||ge&&F.sessKey==="us_rth"?t.jsx("div",{style:{position:"absolute",left:Hn[q],top:0,bottom:0,minHeight:vn.length*Ut,width:2,background:"rgba(255,255,255,0.1)",pointerEvents:"none",zIndex:1}},`day-line-${q}`):null),vn.map(F=>t.jsx("div",{style:{display:"flex",height:Ut,background:I.price===F?"rgba(186,104,200,0.04)":"transparent"},children:kt.map((q,Ve)=>{const St=q.lettersByPrice[F]?[...q.lettersByPrice[F]].sort():[],Nt=q.vah&&q.val&&F<=q.vah&&F>=q.val,Ct=q.hasIB&&q.ibHigh&&Math.abs(F-q.ibHigh)<be,Yt=q.hasIB&&q.ibLow&&Math.abs(F-q.ibLow)<be,Cn=q.openPriceKey&&F.toString()===q.openPriceKey,ft=q.maxPeriod>=0?q.maxPeriod<26?String.fromCharCode(65+q.maxPeriod):"A"+String.fromCharCode(65+q.maxPeriod-26):null,qt=q.closePriceKey&&F.toString()===q.closePriceKey,Tt=q.close&&q.open&&q.close>=q.open?"#00ff88":"#ff4466",Xt=q.pocPriceKey&&F.toString()===q.pocPriceKey;return t.jsx("div",{style:{width:q.width,flexShrink:0,height:Ut,display:"flex",alignItems:"center",borderRight:"none",borderLeft:q.sessKey==="asia"||ge&&q.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",position:"relative",paddingLeft:21,paddingRight:Pt+Zt+19,background:Ct||Yt?"rgba(255,255,255,0.05)":"transparent"},children:_==="expanded"?t.jsx("div",{style:{position:"relative",width:Math.max((q.maxPeriod-q.sessStart+1)*Gt,50),height:Ut-2,overflow:"visible"},children:St.map((Ot,P)=>{const Oe=wr(Ot)-q.sessStart;if(Oe<0)return null;const te=Ot==="A"&&Cn,ct=Ot===ft&&qt&&!te,et=Xt?"#000":te?"#fff":ct?"#000":Nt?Tt:"#888",ut=Xt?"#ffffff":te?"rgba(100,100,100,0.6)":ct?Tt:Nt?`${Tt}30`:"rgba(136,136,136,0.25)",wt=Xt||te?"1px solid #fff":ct?`1px solid ${Tt}`:Nt?`1px solid ${Tt}50`:"1px solid rgba(136,136,136,0.4)";return t.jsx("span",{style:{position:"absolute",left:Oe*Gt,width:Ot.length>1?Gt+4:Gt-1,height:Ut-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:Ot.length>1?7:9,fontWeight:700,color:et,background:ut,borderRadius:2,border:wt},children:Ot},`${Ot}-${P}`)})}):St.map((Ot,P)=>{const Oe=Ot==="A"&&Cn,te=Ot===ft&&qt&&!Oe,ct=Xt?"#000":Oe?"#fff":te?"#000":Nt?Tt:"#888",et=Xt?"#ffffff":Oe?"rgba(100,100,100,0.6)":te?Tt:Nt?`${Tt}30`:"rgba(136,136,136,0.25)",ut=Xt||Oe?"1px solid #fff":te?`1px solid ${Tt}`:Nt?`1px solid ${Tt}50`:"1px solid rgba(136,136,136,0.4)";return t.jsx("span",{style:{minWidth:Ot.length>1?Gt+4:Gt,height:Ut-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:Ot.length>1?8:10,fontWeight:700,color:ct,background:et,borderRadius:2,marginRight:1,border:ut,padding:Ot.length>1?"0 2px":0},children:Ot},`${Ot}-${P}`)})},`${q.date}-${q.sessKey}-${F}`)})},F)),kt.map((F,q)=>{const Ve=Hn[q],St=vn.length*Ut,Nt=(F.high+F.low)/2,Ct=ft=>{const qt=Math.floor(ft/be)*be,Rn=(Ft-qt)/be,Tt=1-(ft-qt)/be;return(Rn+Tt)*Ut},Yt=Object.entries(F.volumeByPrice||{}).map(([ft,qt])=>{var Xt,Ot;const Rn=parseFloat(ft),Tt=((Xt=F.deltaByPrice)==null?void 0:Xt[ft])??((Ot=F.deltaByPrice)==null?void 0:Ot[Rn]);return{price:Rn,vol:qt,delta:Tt}}).filter(ft=>ft.vol>0).sort((ft,qt)=>qt.price-ft.price),Cn=Math.max(...Yt.map(ft=>ft.vol),1);return t.jsx("div",{style:{position:"absolute",left:Ve+F.width-Pt-15,top:0,width:Pt,height:St,overflow:"hidden"},children:Yt.map((ft,qt)=>{const Rn=Ct(ft.price),Tt=1,Xt=F.sessionVPOC&&Math.abs(ft.price-F.sessionVPOC)<1,Ot=F.volVAH&&Math.abs(ft.price-F.volVAH)<1,P=F.volVAL&&Math.abs(ft.price-F.volVAL)<1,te=ft.delta!==void 0&&ft.delta!==null&&ft.delta!==0?ft.delta>0:ft.price>Nt;return t.jsx("div",{style:{position:"absolute",top:Rn,left:4,width:`${Math.min(ft.vol/Cn*95,95)}%`,height:Tt,background:Xt?"#ff9900":Ot?"#00ff88":P?"#ff4466":te?"#00dd77":"#cc3366",opacity:.9}},qt)})},`vp-sess-${q}`)}),kt.map((F,q)=>{const Ve=Nt=>{const Ct=Math.floor(Nt/be)*be,Yt=(Ft-Ct)/be,Cn=1-(Nt-Ct)/be;return(Yt+Cn)*Ut},St=Hn[q];return t.jsxs(Wr.Fragment,{children:[F.hasIB&&F.ibHigh&&F.ibLow&&t.jsx("div",{style:{position:"absolute",left:St+7,top:Ve(F.ibHigh)+Ut/2,width:2,height:Ve(F.ibLow)-Ve(F.ibHigh),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),F.vah&&t.jsx("div",{style:{position:"absolute",left:St+F.width-12,top:Ve(F.vah)+Ut/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),F.val&&t.jsx("div",{style:{position:"absolute",left:St+F.width-12,top:Ve(F.val)+Ut/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${F.date}-${F.sessKey}`)})]})]})]}),t.jsxs("div",{style:{display:"flex",flexShrink:0,background:"rgba(18,18,30,0.98)",borderTop:"1px solid rgba(147,112,219,0.2)"},children:[t.jsx("div",{style:{width:58,flexShrink:0,borderRight:"1px solid rgba(147,112,219,0.25)"}}),t.jsx("div",{id:"time-scale-1w",style:{display:"flex",flex:1,overflow:"hidden"},children:kt.map((F,q)=>t.jsx("div",{style:{width:F.width,flexShrink:0,textAlign:"center",padding:"2px 0",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:F.sessKey==="asia"||ge&&F.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:I.dayIdx===q?`${F.color}15`:"transparent"},children:t.jsx("div",{style:{fontSize:9,color:"#666"},children:F.sessTime})},`time-${F.date}-${F.sessKey}`))})]})]})}catch(ge){return console.error("1-Week chart error:",ge),t.jsxs("div",{style:{padding:40,textAlign:"center",color:"#ff4466"},children:["Error rendering 1-Week chart: ",ge.message]})}})():(s==="4week"||s==="4week_rth")&&((qn=p==null?void 0:p.profiles)==null?void 0:qn.length)>0?(()=>{var On,kt,Ft,Wt,vn,wn,Hn,Pr,kn,F,q,Ve,St,Nt,Ct,Yt,Cn,ft,qt,Rn,Tt,Xt,Ot;const E=s==="4week_rth",$=31,N=45,K=P=>P.length===1?P.charCodeAt(0)-65:26+(P.charCodeAt(0)-65)*26+(P.charCodeAt(1)-65),fe=P=>E?P.filter(Oe=>{const te=K(Oe);return te>=$&&te<=N}):P,ke=new Date().toISOString().split("T")[0],V=p.profiles.slice(0,20).filter(P=>P.tpo_profiles).map(P=>{let Oe=P;if(P.date===ke&&n&&(Oe={...P,poc:n.poc||P.poc,vah:n.vah||P.vah,val:n.val||P.val,ib_high:n.ib_high||P.ib_high,ib_low:n.ib_low||P.ib_low,high:Math.max(n.high||0,P.high||0),low:Math.min(n.low||999999,P.low||999999),tpo_profiles:n.profiles||P.tpo_profiles,day_type:n.day_type||P.day_type,open_type:n.open_type||P.open_type,profile_shape:n.profile_shape||P.profile_shape}),E&&Oe.tpo_profiles){const te={};Object.entries(Oe.tpo_profiles).forEach(([et,ut])=>{const wt=fe(ut);wt.length>0&&(te[et]=wt)}),Oe={...Oe,tpo_profiles:te};const ct=Object.keys(te).map(et=>parseFloat(et));ct.length>0&&(Oe.high=Math.max(...ct),Oe.low=Math.min(...ct))}return Oe}).reverse(),oe=V.map(P=>P.high||0).filter(P=>P>0);V.map(P=>P.low||999999).filter(P=>P<999999);const he=Math.max(...oe)>1e4,ge=he?W?50:100:W?2:4,we=he?W?.1:1:W?.05:.3,nt=Math.max(2,Math.round(ge/we)),Ee=14,be=12,dt=50,bn=16,Ut=P=>{const Oe=new Set;return P.forEach(te=>{let ct;te.length===1?ct=te.charCodeAt(0)-65:ct=26+(te.charCodeAt(0)-65)*26+(te.charCodeAt(1)-65);const et=Math.floor(ct/2);et<26?Oe.add(String.fromCharCode(65+et)):Oe.add(String.fromCharCode(65+Math.floor((et-26)/26))+String.fromCharCode(65+(et-26)%26))}),[...Oe].sort()},Gt=P=>{if(P.open_type&&P.open_type!=="developing")return P.open_type;const Oe=P.ib_high,te=P.ib_low,ct=P.open,et=P.close||P.high;if(!Oe||!te||te>=999999||!ct)return"OA";const ut=Oe-te;if(ut<=0)return"OA";const wt=(Oe+te)/2,In=(ct-te)/ut*100;return In<=20&&et>wt||In>=80&&et<wt?"OD":ct>wt&&P.low<te&&et>Oe||ct<wt&&P.high>Oe&&et<te?"OTD":P.high>Oe&&et<wt||P.low<te&&et>wt?"ORR":"OA"},Pt=V.map(P=>{var ko,Co,To;const Oe=P.tpo_profiles||{};let te=0,ct=0;const et={},ut={},wt={},In={},ht=P.price_volumes&&Object.keys(P.price_volumes).length>0,on=P.delta_by_price||{};Object.entries(Oe).forEach(([Ze,Xe])=>{const Ye=parseFloat(Ze),Ht=Math.floor(Ye/ge)*ge;if(et[Ht]||(et[Ht]=new Set),Ut(Xe).forEach(Vn=>{et[Ht].add(Vn);const Yr=K(Vn);Yr>ct&&(ct=Yr)}),!ht){const Vn=Math.floor(Ye/we)*we;ut[Vn]=(ut[Vn]||0)+Xe.length,wt[Ht]=(wt[Ht]||0)+Xe.length}}),ht&&Object.entries(P.price_volumes).forEach(([Ze,Xe])=>{const Ye=parseFloat(Ze),Ht=Math.floor(Ye/we)*we,ar=Math.floor(Ye/ge)*ge;ut[Ht]=(ut[Ht]||0)+Xe,wt[ar]=(wt[ar]||0)+Xe;const Vn=on[Ze]||on[Ye.toFixed(1)]||0;In[Ht]=(In[Ht]||0)+Vn});let $n=0,At=0,He=null;Object.entries(et).forEach(([Ze,Xe])=>{Xe.size>At&&(At=Xe.size,$n=parseFloat(Ze),He=Ze),Xe.size>te&&(te=Xe.size)});let jt=P.poc||$n,rt=0;Object.entries(ut).forEach(([Ze,Xe])=>{Xe>rt&&(rt=Xe,jt=parseFloat(Ze))});let It=jt,An=jt;const _t=Object.entries(ut).map(([Ze,Xe])=>({price:parseFloat(Ze),vol:Xe})).sort((Ze,Xe)=>Ze.price-Xe.price),xr=_t.reduce((Ze,Xe)=>Ze+Xe.vol,0)*.7;if(_t.length>0){const Ze=_t.findIndex(ar=>Math.abs(ar.price-jt)<we);let Xe=((ko=_t[Ze])==null?void 0:ko.vol)||0,Ye=Ze,Ht=Ze;for(;Xe<xr&&(Ye<_t.length-1||Ht>0);){const ar=Ye<_t.length-1?_t[Ye+1].vol:0,Vn=Ht>0?_t[Ht-1].vol:0;if(ar>=Vn&&Ye<_t.length-1)Ye++,Xe+=_t[Ye].vol;else if(Ht>0)Ht--,Xe+=_t[Ht].vol;else break}It=((Co=_t[Ye])==null?void 0:Co.price)||jt,An=((To=_t[Ht])==null?void 0:To.price)||jt}const oi=Math.max(te*be+bn+dt+45,130),Ur=Math.max((ct+1)*be+bn+dt+45,180);let So=null,wo=null;const Gr=[],Pn=ct,Jd=Pn<26?String.fromCharCode(65+Pn):"A"+String.fromCharCode(65+Pn-26),si=[];if(Object.entries(et).forEach(([Ze,Xe])=>{const Ye=parseFloat(Ze);Xe.has("A")&&Gr.push({price:Ye,key:Ze}),Xe.has(Jd)&&si.push({price:Ye,key:Ze})}),Gr.length>0){const Ze=(Math.max(...Gr.map(Ye=>Ye.price))+Math.min(...Gr.map(Ye=>Ye.price)))/2;let Xe=Gr[0];Gr.forEach(Ye=>{Math.abs(Ye.price-Ze)<Math.abs(Xe.price-Ze)&&(Xe=Ye)}),So=Xe.key}if(si.length>0){const Ze=(Math.max(...si.map(Ye=>Ye.price))+Math.min(...si.map(Ye=>Ye.price)))/2;let Xe=si[0];si.forEach(Ye=>{Math.abs(Ye.price-Ze)<Math.abs(Xe.price-Ze)&&(Xe=Ye)}),wo=Xe.key}let $i=null;const Vi=[],zi=[];if(Object.entries(et).forEach(([Ze,Xe])=>{const Ye=parseFloat(Ze);Xe.has("A")&&Vi.push(Ye),Xe.has("B")&&zi.push(Ye)}),Vi.length>0&&zi.length>0){const Ze=Math.max(...Vi),Xe=Math.min(...Vi),Ye=Math.max(...zi),Ht=Math.min(...zi),ar=Ze-Xe,Vn=Ye-Ht,Yr=Math.min(Ze,Ye),De=Math.max(Xe,Ht),Ne=Math.max(0,Yr-De),ot=Math.min(ar,Vn);ot>0?$i=Math.round(Ne/ot*100):Ne>0?$i=100:$i=0}return{...P,lettersByPrice:et,volumeByPrice:ut,volumeByPriceCoarse:wt,deltaByPrice:In,maxVol:rt,dayVPOC:jt,tpoPOC:$n,pocPriceKey:He,openPriceKey:So,closePriceKey:wo,abOverlap:$i,volVAH:It,volVAL:An,maxLetters:Math.max(te,1),maxPeriod:ct,width:_==="expanded"?Ur:oi,open_type:Gt(P)}});let Zt=0,lr=999999;V.forEach(P=>{P.high>Zt&&(Zt=P.high),P.low<lr&&(lr=P.low)}),Zt=Math.ceil(Zt/ge)*ge+ge*3,lr=Math.floor(lr/ge)*ge-ge*3;const Vr=[];for(let P=Zt;P>=lr;P-=ge)Vr.push(P);let ii=0;const wr=Pt.map(P=>{const Oe=ii;return ii+=P.width,Oe}),Ie=ii;let vt=0;const Qe=(P,Oe)=>{if(!Oe)return;const te=Oe.getBoundingClientRect();vt=Oe.scrollLeft;const ct=Oe.scrollTop,et=P.clientX-te.left,ut=et+vt,wt=P.clientY-te.top,In=wt-36+ct;let ht=Pt.length-1;for(let At=0;At<Pt.length;At++)if(ut<wr[At]+Pt[At].width){ht=At;break}const on=Math.floor(In/Ee),$n=Vr[on]||0;ze({show:!0,x:et,y:wt,clientX:P.clientX,clientY:P.clientY,chartLeft:te.left,chartTop:te.top,chartRight:te.right,chartBottom:te.bottom,scrollLeft:vt,scrollTop:ct,price:$n,dayIdx:ht,day:Pt[ht]})};return t.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[I.show&&I.day&&t.jsxs("div",{style:{position:"absolute",left:I.x+65,top:Math.max(10,I.y-140),background:"rgba(20,20,35,0.95)",border:"1px solid rgba(147,112,219,0.5)",borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[t.jsxs("div",{style:{fontSize:12,color:"#ba68c8",fontWeight:700,marginBottom:4},children:[(On=I.day)==null?void 0:On.weekday," ",(kt=I.day)==null?void 0:kt.date]}),t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:E?"09:30 - 16:15 ET":"18:00 - 17:00 ET"}),t.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[t.jsx("span",{children:"Price:"}),t.jsx("span",{style:{color:"#fff",fontWeight:600},children:((Ft=I.price)==null?void 0:Ft.toFixed(1))||"--"}),t.jsx("span",{children:"POC:"}),t.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof((Wt=I.day)==null?void 0:Wt.poc)=="number"?I.day.poc.toFixed(1):"--"}),t.jsx("span",{children:"VAH:"}),t.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((vn=I.day)==null?void 0:vn.vah)=="number"?I.day.vah.toFixed(1):"--"}),t.jsx("span",{children:"VAL:"}),t.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((wn=I.day)==null?void 0:wn.val)=="number"?I.day.val.toFixed(1):"--"}),t.jsx("span",{children:"IB H:"}),t.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((Hn=I.day)==null?void 0:Hn.ib_high)=="number"?I.day.ib_high.toFixed(1):"--"}),t.jsx("span",{children:"IB L:"}),t.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((Pr=I.day)==null?void 0:Pr.ib_low)=="number"?I.day.ib_low.toFixed(1):"--"}),t.jsx("span",{children:"IB%:"}),t.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof((kn=I.day)==null?void 0:kn.ib_high)=="number"&&typeof((F=I.day)==null?void 0:F.ib_low)=="number"&&((q=I.day)==null?void 0:q.high)>((Ve=I.day)==null?void 0:Ve.low)?((I.day.ib_high-I.day.ib_low)/(I.day.high-I.day.low)*100).toFixed(0)+"%":"--"})]}),t.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),t.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[t.jsx("span",{children:"VP VAH:"}),t.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((St=I.day)==null?void 0:St.volVAH)=="number"?I.day.volVAH.toFixed(1):"--"}),t.jsx("span",{children:"VP VAL:"}),t.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((Nt=I.day)==null?void 0:Nt.volVAL)=="number"?I.day.volVAL.toFixed(1):"--"}),t.jsx("span",{children:"Day Type:"}),t.jsx("span",{style:{color:Q[(Ct=I.day)==null?void 0:Ct.day_type]||"#888",fontWeight:600},children:((Cn=(Yt=I.day)==null?void 0:Yt.day_type)==null?void 0:Cn.replace("_"," "))||"--"}),t.jsx("span",{children:"Open Type:"}),t.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((qt=(ft=I.day)==null?void 0:ft.open_type)==null?void 0:qt.replace("_"," "))||"--"}),t.jsx("span",{children:"Shape:"}),t.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((Tt=(Rn=I.day)==null?void 0:Rn.profile_shape)==null?void 0:Tt.replace("_"," "))||"--"}),t.jsx("span",{children:"AB Overlap:"}),t.jsx("span",{style:{color:((Xt=I.day)==null?void 0:Xt.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((Ot=I.day)==null?void 0:Ot.abOverlap)=="number"?I.day.abOverlap+"%":"--"})]})]}),t.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[t.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),t.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-4w",children:Vr.map(P=>{const Oe=P%20===0,te=P%100===0;return t.jsx("div",{style:{height:Ee,fontSize:te?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:te?"rgba(147,112,219,0.9)":Oe?"#666":"transparent",fontWeight:te?600:400,borderBottom:te?"1px solid rgba(147,112,219,0.1)":"none"},children:Oe?P.toFixed(0):""},P)})})]}),t.jsxs("div",{id:"tpo-chart-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:I.show?"none":"crosshair"},onScroll:P=>{const Oe=document.getElementById("price-scale-4w");Oe&&(Oe.scrollTop=P.target.scrollTop)},onMouseMove:P=>Qe(P,P.currentTarget),onMouseLeave:()=>ze({...I,show:!1}),ref:P=>{w.current=P,P&&!se.current&&Ie>P.clientWidth&&(P.scrollLeft=Ie-P.clientWidth,se.current=!0)},children:[I.show&&I.clientX&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",left:I.chartLeft+50,right:window.innerWidth-I.chartRight,height:1,top:I.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),t.jsx("div",{style:{position:"fixed",left:I.clientX,top:I.chartTop,height:I.chartBottom-I.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),t.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:Pt.map((P,Oe)=>t.jsxs("div",{style:{width:P.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.2)",background:I.dayIdx===Oe?"rgba(186,104,200,0.2)":"transparent"},children:[t.jsx("div",{style:{fontSize:10,color:"#ba68c8",fontWeight:700},children:P.weekday}),t.jsx("div",{style:{fontSize:8,color:"#666"},children:P.date.slice(5)})]},P.date))}),t.jsxs("div",{style:{position:"relative"},children:[Vr.map((P,Oe)=>t.jsx("div",{style:{display:"flex",height:Ee,borderBottom:P%20===0?"1px solid rgba(147,112,219,0.12)":"none",background:I.price===P?"rgba(186,104,200,0.06)":"transparent"},children:Pt.map((te,ct)=>{const et=te.lettersByPrice[P]?[...te.lettersByPrice[P]].sort():[],ut=te.vah&&te.val&&P<=te.vah&&P>=te.val;(te.high+te.low)/2;const wt=te.openPriceKey&&P.toString()===te.openPriceKey,In=te.maxPeriod>=0?te.maxPeriod<26?String.fromCharCode(65+te.maxPeriod):"A"+String.fromCharCode(65+te.maxPeriod-26):null,ht=te.closePriceKey&&P.toString()===te.closePriceKey,on=te.pocPriceKey&&P.toString()===te.pocPriceKey,At=te.close&&te.open&&te.close>=te.open?"#00ff88":"#ff4466";for(let He=0;He<nt;He++){const jt=P-He*we;te.volumeByPrice[jt],te.dayVPOC&&Math.abs(jt-te.dayVPOC)<we,te.volVAH&&Math.abs(jt-te.volVAH)<we,te.volVAL&&Math.abs(jt-te.volVAL)<we}return t.jsx("div",{style:{width:te.width,flexShrink:0,height:Ee,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.15)",position:"relative",paddingLeft:14,paddingRight:dt+bn+14},children:_==="expanded"?t.jsx("div",{style:{position:"relative",width:(te.maxPeriod+1)*be,height:Ee-2},children:et.map((He,jt)=>{const rt=He.length===1?He.charCodeAt(0)-65:26+(He.charCodeAt(0)-65)*26+(He.charCodeAt(1)-65),It=He==="A"&&wt,An=He===In&&ht&&!It,_t=on?"#000":It?"#fff":An?"#000":ut?At:"#888",gr=on?"#ffffff":It?"rgba(100,100,100,0.6)":An?At:ut?`${At}30`:"rgba(136,136,136,0.25)",xr=on||It?"1px solid #fff":An?`1px solid ${At}`:ut?`1px solid ${At}50`:"1px solid rgba(136,136,136,0.4)";return t.jsx("span",{style:{position:"absolute",left:rt*be,width:be-1,height:Ee-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:_t,background:gr,borderRadius:2,border:xr},children:He},jt)})}):et.map((He,jt)=>{const rt=He==="A"&&wt,It=He===In&&ht&&!rt,An=on?"#000":rt?"#fff":It?"#000":ut?At:"#888",_t=on?"#ffffff":rt?"rgba(100,100,100,0.6)":It?At:ut?`${At}30`:"rgba(136,136,136,0.25)",gr=on||rt?"1px solid #fff":It?`1px solid ${At}`:ut?`1px solid ${At}50`:"1px solid rgba(136,136,136,0.4)";return t.jsx("span",{style:{width:be,height:Ee-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:700,color:An,background:_t,borderRadius:2,marginRight:1,border:gr},children:He},jt)})},`${te.date}-${P}`)})},P)),Pt.map((P,Oe)=>{const te=wr[Oe],ct=Vr.length*Ee,et=(P.high+P.low)/2,ut=ht=>{const on=Math.floor(ht/ge)*ge,$n=(Zt-on)/ge,At=1-(ht-on)/ge;return($n+At)*Ee},wt=Object.entries(P.volumeByPrice||{}).map(([ht,on])=>{var He,jt;const $n=parseFloat(ht),At=((He=P.deltaByPrice)==null?void 0:He[ht])??((jt=P.deltaByPrice)==null?void 0:jt[$n]);return{price:$n,vol:on,delta:At}}).filter(ht=>ht.vol>0).sort((ht,on)=>on.price-ht.price),In=Math.max(...wt.map(ht=>ht.vol),1);return t.jsxs(Wr.Fragment,{children:[t.jsx("div",{style:{position:"absolute",left:te+P.width-dt-10,top:0,width:dt,height:ct,borderLeft:"1px solid rgba(147,112,219,0.25)",overflow:"hidden"},children:wt.map((ht,on)=>{const $n=ut(ht.price),At=1,He=P.dayVPOC&&Math.abs(ht.price-P.dayVPOC)<1,jt=P.volVAH&&Math.abs(ht.price-P.volVAH)<1,rt=P.volVAL&&Math.abs(ht.price-P.volVAL)<1,An=ht.delta!==void 0&&ht.delta!==null&&ht.delta!==0?ht.delta>0:ht.price>et;return t.jsx("div",{style:{position:"absolute",top:$n,left:4,width:`${Math.min(ht.vol/In*95,95)}%`,height:At,background:He?"#ff9900":jt?"#00ff88":rt?"#ff4466":An?"#00dd77":"#cc3366",opacity:.85}},on)})}),t.jsx("div",{style:{position:"absolute",left:te+P.width-8,top:ut(P.close||P.low)-5,fontSize:8,color:"#666",fontWeight:500,pointerEvents:"none",zIndex:5},children:"4pm"})]},`vp-${Oe}`)}),Pt.map((P,Oe)=>{const te=et=>{const ut=Math.floor(et/ge)*ge,wt=(Zt-ut)/ge,In=1-(et-ut)/ge;return(wt+In)*Ee},ct=wr[Oe];return(P.high+P.low)/2,t.jsxs(Wr.Fragment,{children:[P.ib_high&&P.ib_low&&t.jsx("div",{style:{position:"absolute",left:ct+7,top:te(P.ib_high),width:2,height:te(P.ib_low)-te(P.ib_high),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),P.volVAH&&t.jsx("div",{style:{position:"absolute",left:ct+P.width-8,top:te(P.volVAH)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),P.volVAL&&t.jsx("div",{style:{position:"absolute",left:ct+P.width-8,top:te(P.volVAL)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${P.date}`)})]})]}),t.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[t.jsxs("span",{style:{color:"#666"},children:["Range ",t.jsx("span",{style:{color:"#9370DB",fontWeight:600},children:(Zt-lr).toFixed(0)})]}),t.jsxs("span",{style:{color:"#666"},children:["Days ",t.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:V.length})]}),t.jsx("span",{style:{color:"#fff",background:"#fff",padding:"0 4px",borderRadius:2},children:t.jsx("span",{style:{color:"#000"},children:"POC"})}),t.jsx("span",{style:{color:"#00aaff"},children:" MID"}),t.jsx("span",{style:{color:"#fff"},children:" IB"}),t.jsx("span",{style:{color:"#fff"},children:" VAH"}),t.jsx("span",{style:{color:"#fff"},children:" VAL"}),t.jsx("span",{style:{color:"#fff"},children:" Open"}),t.jsx("span",{style:{color:"#00ff88"},children:" Close"}),t.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():s==="session_view"&&(n!=null&&n.sessions)?(()=>{var dt,bn,Ut,Gt,Pt,Zt,lr,Vr,ii,wr;const E=Object.entries((n==null?void 0:n.sessions)||{}).filter(([Ie,vt])=>vt.profiles&&Object.keys(vt.profiles).length>0);if(E.length===0)return t.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No session data yet..."});const $=.5,N=14,K=11,fe=45,ke=16,B=11,V=Ie=>Ie.length===1?Ie.charCodeAt(0)-65:26+(Ie.charCodeAt(0)-65)*26+(Ie.charCodeAt(1)-65),oe=E.map(([Ie,vt])=>{const Qe=vt.profiles||{};let On=0,kt=0;const Ft={},Wt={};Object.entries(Qe).forEach(([kn,F])=>{const q=Math.floor(parseFloat(kn)/$)*$;Ft[q]||(Ft[q]=new Set),F.forEach(Ve=>{Ft[q].add(Ve);const St=V(Ve);St>kt&&(kt=St)}),Wt[q]=(Wt[q]||0)+F.length}),Object.values(Ft).forEach(kn=>{kn.size>On&&(On=kn.size)});let vn=vt.poc,wn=0;Object.entries(Wt).forEach(([kn,F])=>{F>wn&&(wn=F,vn=parseFloat(kn))});const Hn=Math.max(On*K+ke+fe+16,120),Pr=Math.max((kt+1)*B+ke+fe+16,150);return{key:Ie,...vt,lettersByPrice:Ft,volumeByPrice:Wt,maxVol:wn,sessionVPOC:vn,maxLetters:Math.max(On,1),maxPeriod:kt,width:_==="expanded"?Pr:Hn}});let pe=0,he=999999;E.forEach(([Ie,vt])=>{vt.high>pe&&(pe=vt.high),vt.low<he&&(he=vt.low)}),pe=Math.ceil(pe/$)*$+$*5,he=Math.floor(he/$)*$-$*5;const ge=[];for(let Ie=pe;Ie>=he;Ie-=$)ge.push(Ie);let we=0;const nt=oe.map(Ie=>{const vt=we;return we+=Ie.width,vt});let Ee=0;const be=(Ie,vt)=>{if(!vt)return;const Qe=vt.getBoundingClientRect();Ee=vt.scrollLeft;const On=vt.scrollTop,kt=Ie.clientX-Qe.left,Ft=kt+Ee,Wt=Ie.clientY-Qe.top,vn=Wt-36+On;let wn=oe.length-1;for(let kn=0;kn<oe.length;kn++)if(Ft<nt[kn]+oe[kn].width){wn=kn;break}const Hn=Math.floor(vn/N),Pr=ge[Hn]||0;ze({show:!0,x:kt,y:Wt,clientX:Ie.clientX,clientY:Ie.clientY,chartLeft:Qe.left,chartTop:Qe.top,chartRight:Qe.right,chartBottom:Qe.bottom,scrollLeft:Ee,scrollTop:On,price:Pr,dayIdx:wn,day:oe[wn]})};return t.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[I.show&&I.day&&t.jsxs("div",{style:{position:"absolute",left:Math.max(60,Math.min(I.x+60,500)),top:Math.max(50,Math.min(I.y,300)),background:"rgba(20,20,35,0.95)",border:`1px solid ${((dt=I.day)==null?void 0:dt.color)||"#9370DB"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",pointerEvents:"none"},children:[t.jsx("div",{style:{fontSize:12,color:((bn=I.day)==null?void 0:bn.color)||"#ba68c8",fontWeight:700,marginBottom:6},children:(Ut=I.day)==null?void 0:Ut.display}),t.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[t.jsx("span",{children:"Price:"}),t.jsx("span",{style:{color:"#fff",fontWeight:600},children:(Gt=I.price)==null?void 0:Gt.toFixed(1)}),t.jsx("span",{children:"POC:"}),t.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:(Zt=(Pt=I.day)==null?void 0:Pt.poc)==null?void 0:Zt.toFixed(1)}),t.jsx("span",{children:"VAH:"}),t.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(Vr=(lr=I.day)==null?void 0:lr.vah)==null?void 0:Vr.toFixed(1)}),t.jsx("span",{children:"VAL:"}),t.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:(wr=(ii=I.day)==null?void 0:ii.val)==null?void 0:wr.toFixed(1)})]})]}),t.jsxs("div",{style:{width:50,flexShrink:0,background:"rgba(15,15,25,0.95)",borderRight:"1px solid rgba(147,112,219,0.2)"},children:[t.jsx("div",{style:{height:36,background:"rgba(147,112,219,0.08)",borderBottom:"1px solid rgba(147,112,219,0.2)"}}),t.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-sess",children:ge.map(Ie=>t.jsx("div",{style:{height:N,fontSize:9,textAlign:"right",paddingRight:4,color:"#555",lineHeight:`${N}px`},children:Ie%10===0?Ie.toFixed(0):""},Ie))})]}),t.jsxs("div",{id:"tpo-session-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:Ie=>{const vt=document.getElementById("price-scale-sess");vt&&(vt.scrollTop=Ie.target.scrollTop)},onMouseMove:Ie=>be(Ie,Ie.currentTarget),onMouseLeave:()=>ze({...I,show:!1}),children:[I.show&&I.clientX&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{position:"fixed",left:I.chartLeft+50,right:window.innerWidth-I.chartRight,height:1,top:I.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),t.jsx("div",{style:{position:"fixed",left:I.clientX,top:I.chartTop,height:I.chartBottom-I.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),t.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:oe.map((Ie,vt)=>t.jsxs("div",{style:{width:Ie.width,flexShrink:0,textAlign:"center",padding:"8px 4px",borderRight:"1px solid rgba(147,112,219,0.2)",background:I.dayIdx===vt?`${Ie.color}20`:"transparent"},children:[t.jsx("div",{style:{fontSize:11,color:Ie.color,fontWeight:700},children:Ie.display}),t.jsxs("div",{style:{fontSize:8,color:"#666"},children:[Ie.period_count," periods"]})]},Ie.key))}),t.jsxs("div",{style:{position:"relative"},children:[ge.map((Ie,vt)=>t.jsx("div",{style:{display:"flex",height:N,borderBottom:Ie%10===0?"1px solid rgba(147,112,219,0.12)":"none",background:I.price===Ie?"rgba(186,104,200,0.06)":"transparent"},children:oe.map((Qe,On)=>{var F;const kt=Qe.lettersByPrice[Ie]?[...Qe.lettersByPrice[Ie]].sort():[],Ft=Qe.volumeByPrice[Ie]||0,Wt=Qe.maxVol>0?Ft/Qe.maxVol*100:0,vn=Qe.sessionVPOC&&Math.abs(Ie-Qe.sessionVPOC)<$,wn=Qe.vah&&Qe.val&&Ie<=Qe.vah&&Ie>=Qe.val,Hn=((F=Qe.deltaByPrice)==null?void 0:F[Ie])||0,kn=Qe.deltaByPrice&&Object.keys(Qe.deltaByPrice).length>0?Hn>=0:Ie>(Qe.high+Qe.low)/2;return t.jsxs("div",{style:{width:Qe.width,flexShrink:0,height:N,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.1)",position:"relative",paddingLeft:14,paddingRight:fe+ke+14},children:[_==="expanded"?t.jsx("div",{style:{display:"flex",position:"relative",width:(Qe.maxPeriod+1)*B,height:N-2},children:kt.map((q,Ve)=>{const St=V(q);return t.jsx("span",{style:{position:"absolute",left:St*B,width:B-1,height:N-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:wn?"#00ee88":Qe.color,background:`${Qe.color}30`,borderRadius:2,border:`1px solid ${Qe.color}50`},children:q},Ve)})}):kt.map((q,Ve)=>t.jsx("span",{style:{width:K,height:N-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:wn?"#00ee88":Qe.color,background:`${Qe.color}30`,borderRadius:2,marginRight:1,border:`1px solid ${Qe.color}50`},children:q},Ve)),Ft>0&&t.jsx("div",{style:{position:"absolute",right:12,width:fe,height:N-2,display:"flex",alignItems:"center",paddingLeft:ke,borderLeft:"1px solid rgba(147,112,219,0.15)"},children:t.jsx("div",{style:{width:`${Wt}%`,height:1,marginBottom:1,opacity:.9,background:vn?"#ff9900":kn?"#00ee88":"#ff2266",borderRadius:0}})})]},`${Qe.key}-${Ie}`)})},Ie)),oe.map((Ie,vt)=>{const Qe=Wt=>{const vn=Math.floor(Wt/$)*$,wn=(pe-vn)/$,Hn=1-(Wt-vn)/$;return(wn+Hn)*N},On=nt[vt],kt=(Ie.high+Ie.low)/2,Ft=[];return Ie.poc&&Ft.push({price:Ie.poc,color:"#ffcc00",label:"",type:"poc"}),Ft.push({price:kt,color:"#00aaff",label:"",type:"mid"}),Ie.vah&&Ft.push({price:Ie.vah,color:"#00ff88",label:"",type:"vah"}),Ie.val&&Ft.push({price:Ie.val,color:"#ff4466",label:"",type:"val"}),Ft.map(Wt=>t.jsx("div",{style:{position:"absolute",left:On+1,top:Qe(Wt.price)-5,color:Wt.color,fontSize:Wt.type==="mid"?10:8,fontWeight:700,zIndex:10,textShadow:"0 0 3px rgba(0,0,0,0.8)",pointerEvents:"none"},children:Wt.label},`${Ie.key}-${Wt.type}`))})]})]}),t.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[t.jsxs("span",{style:{color:"#666"},children:["Sessions ",t.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:oe.length})]}),t.jsx("span",{style:{color:"#ffcc00"},children:" POC"}),t.jsx("span",{style:{color:"#00aaff"},children:" MID"}),t.jsx("span",{style:{color:"#fff"},children:" VAH"}),t.jsx("span",{style:{color:"#fff"},children:" VAL"}),t.jsx("span",{style:{color:"#fff"},children:" Open"}),t.jsx("span",{style:{color:"#00ff88"},children:" Close"}),t.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():bt.length===0?t.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No TPO data yet. Waiting for trades..."}):t.jsxs(t.Fragment,{children:[(()=>{const E=Math.max(...bt.map(oe=>oe.letters.length),1),$=Math.max(...bt.flatMap(oe=>oe.letters.map(pe=>ae(pe))),0),N=11,K=zt||(n==null?void 0:n.tick_size)||.1,fe=(L==null?void 0:L.open_price)||(n==null?void 0:n.open_price),ke=Math.max(...bt.map(oe=>oe.price)),B=Math.min(...bt.map(oe=>oe.price)),V=(ke+B)/2;return bt.map(({price:oe,letters:pe})=>{const he=(L==null?void 0:L.poc)&&Math.abs(oe-L.poc)<K,ge=(L==null?void 0:L.vah)&&Math.abs(oe-L.vah)<K,we=(L==null?void 0:L.val)&&Math.abs(oe-L.val)<K,nt=(L==null?void 0:L.vah)&&(L==null?void 0:L.val)&&oe<=L.vah&&oe>=L.val,Ee=(L==null?void 0:L.ib_high)&&(L==null?void 0:L.ib_low)&&oe<=L.ib_high&&oe>=L.ib_low;L!=null&&L.ib_high&&Math.abs(oe-L.ib_high)<K,L!=null&&L.ib_low&&Math.abs(oe-L.ib_low)<K;const be=pe.length===1,dt=(n==null?void 0:n.current_price)&&Math.abs(oe-n.current_price)<K,bn=fe&&Math.abs(oe-fe)<K,Ut=Math.abs(oe-V)<K;return t.jsxs("div",{style:{display:"flex",alignItems:"center",height:16,position:"relative",background:Ee?"rgba(0, 188, 212, 0.08)":"transparent"},children:[t.jsx("div",{style:{width:55,textAlign:"right",paddingRight:6,fontSize:9,color:he?"#fff":dt?"#00ff88":"#555",fontWeight:he||dt?700:400,flexShrink:0},children:oe.toFixed(1)}),t.jsxs("div",{style:{width:40,fontSize:8,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:4,flexShrink:0,gap:2},children:[ge&&!he&&t.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAH"}),we&&!he&&t.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAL"}),Ut&&!he&&t.jsx("span",{style:{color:"#ff9800",fontSize:7},children:"Mid"}),bn&&!he&&t.jsx("span",{style:{color:"#888",fontSize:7},children:"Open"}),dt&&t.jsx("span",{style:{color:"#00ff88"},children:""})]}),t.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",gap:_==="compact"?1:0,position:"relative",minHeight:14,minWidth:_==="expanded"?($+1)*N:"auto",overflowX:_==="expanded"?"visible":"hidden"},children:_==="compact"?pe.map((Gt,Pt)=>{const Zt=Gt==="A"&&bn;return t.jsx("div",{style:{width:13,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:he?"#ffffff":Zt?"rgba(100,100,100,0.6)":be?"rgba(255,68,102,0.9)":nt?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:8,fontWeight:600,color:he?"#1a1a2e":"#fff",flexShrink:0,border:he?"none":Zt?"1px solid #fff":nt?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:Gt},`${oe}-${Gt}-${Pt}`)}):t.jsx("div",{style:{position:"relative",width:($+1)*N,height:14},children:pe.map((Gt,Pt)=>{const Zt=ae(Gt),lr=Gt==="A"&&bn;return t.jsx("div",{style:{position:"absolute",left:Zt*N,width:N-1,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:he?"#ffffff":lr?"rgba(100,100,100,0.6)":be?"rgba(255,68,102,0.9)":nt?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:7,fontWeight:600,color:he?"#1a1a2e":"#fff",border:he?"none":lr?"1px solid #fff":nt?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:Gt},`${oe}-${Gt}-${Pt}`)})})}),t.jsx("div",{style:{width:60,height:12,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:4,flexShrink:0},children:t.jsx("div",{style:{height:10,width:`${pe.length/E*100}%`,background:he?"rgba(255,255,255,0.6)":nt?"rgba(186, 104, 200, 0.5)":"rgba(100,100,120,0.4)",borderRadius:1}})})]},oe)})})(),(L==null?void 0:L.ib_high)&&(L==null?void 0:L.ib_low)&&t.jsxs("div",{style:{marginTop:8,padding:"6px 10px",background:"rgba(0, 188, 212, 0.15)",borderRadius:4,border:"1px solid rgba(0, 188, 212, 0.3)",display:"flex",justifyContent:"space-between",fontSize:10},children:[t.jsx("span",{style:{color:"#00bcd4"},children:"IB Range"}),t.jsxs("span",{style:{color:"#fff"},children:[(er=L.ib_high)==null?void 0:er.toFixed(1)," - ",(H=L.ib_low)==null?void 0:H.toFixed(1),t.jsxs("span",{style:{color:"#888",marginLeft:8},children:["(",(L.ib_high-L.ib_low||0).toFixed(1)," pts)"]})]})]}),t.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(20,20,28,0.6)",borderRadius:8,border:"1px solid rgba(255,255,255,0.06)"},children:[t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,fontSize:11},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"HL range"}),t.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:L!=null&&L.high&&(L!=null&&L.low)?(L.high-L.low).toFixed(1):"--"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VA range"}),t.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:L!=null&&L.vah&&(L!=null&&L.val)?(L.vah-L.val).toFixed(1):"--"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAH"}),t.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:(($e=L==null?void 0:L.vah)==null?void 0:$e.toFixed(1))||"--"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAL"}),t.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:((Le=L==null?void 0:L.val)==null?void 0:Le.toFixed(1))||"--"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"POC"}),t.jsx("div",{style:{color:"#ffaa00",fontFamily:"monospace"},children:((Ue=L==null?void 0:L.poc)==null?void 0:Ue.toFixed(1))||"--"})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,fontSize:11,marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"Total vol"}),t.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:L!=null&&L.volume?L.volume>=1e3?(L.volume/1e3).toFixed(2)+"K":L.volume:"--"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB high"}),t.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((Mt=L==null?void 0:L.ib_high)==null?void 0:Mt.toFixed(1))||"--"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB low"}),t.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((qe=L==null?void 0:L.ib_low)==null?void 0:qe.toFixed(1))||"--"})]}),t.jsxs("div",{children:[t.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB range"}),t.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:L!=null&&L.ib_high&&(L!=null&&L.ib_low)?(L.ib_high-L.ib_low).toFixed(1):"--"})]})]})]})]})})]}),!b&&t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[t.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Day Type"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[t.jsx("div",{style:{padding:"8px 16px",background:`${Q[ce.day_type]||"#888"}20`,border:`1px solid ${Q[ce.day_type]||"#888"}`,borderRadius:8,color:Q[ce.day_type]||"#888",fontWeight:700,fontSize:14},children:ce.day_type_name||"Developing"}),t.jsxs("div",{style:{color:"#8b8b8b",fontSize:12},children:[ce.day_type_confidence||0,"%"]})]}),ce.day_type_scores&&Object.entries(ce.day_type_scores).map(([E,$])=>t.jsxs("div",{style:{marginBottom:6},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,marginBottom:2},children:[t.jsx("span",{style:{color:"#aaa",textTransform:"capitalize"},children:E.replace("_"," ")}),t.jsxs("span",{style:{color:Q[E]||"#888"},children:[$,"%"]})]}),t.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:t.jsx("div",{style:{height:"100%",width:`${Math.min($,100)}%`,background:Q[E]||"#888",borderRadius:2}})})]},E)),ce.trade_setup&&t.jsxs("div",{style:{marginTop:12,padding:10,background:"rgba(0,255,136,0.08)",borderRadius:6,border:"1px solid rgba(0,255,136,0.2)"},children:[t.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:4},children:"TRADE SETUP"}),t.jsx("div",{style:{fontSize:12,color:"#ccc"},children:ce.trade_setup})]})]}),t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[t.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Open Type (RTH)"}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:t.jsx("div",{style:{padding:"8px 16px",background:`${Re[ce.open_type]||"#888"}20`,border:`1px solid ${Re[ce.open_type]||"#888"}`,borderRadius:8,color:Re[ce.open_type]||"#888",fontWeight:700,fontSize:14},children:((at=ce.open_type_info)==null?void 0:at.name)||"Developing"})}),ce.open_type_info&&t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{fontSize:12,color:"#aaa",marginBottom:8},children:ce.open_type_info.description}),t.jsxs("div",{style:{display:"flex",gap:16,fontSize:11},children:[t.jsxs("div",{children:[t.jsx("span",{style:{color:"#8b8b8b"},children:"Conviction: "}),t.jsx("span",{style:{color:Re[ce.open_type]||"#888",fontWeight:600},children:((mn=ce.open_type_info)==null?void 0:mn.conviction)||"N/A"})]}),(n==null?void 0:n.open_direction)&&t.jsxs("div",{children:[t.jsx("span",{style:{color:"#8b8b8b"},children:"Direction: "}),t.jsx("span",{style:{color:(n==null?void 0:n.open_direction)==="up"?"#00ff88":"#ff4466",fontWeight:600},children:(rn=n==null?void 0:n.open_direction)==null?void 0:rn.toUpperCase()})]})]})]}),(n==null?void 0:n.ab_overlap)!==void 0&&t.jsxs("div",{style:{marginTop:12,fontSize:11},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[t.jsx("span",{style:{color:"#8b8b8b"},children:"AB Overlap"}),t.jsxs("span",{style:{color:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88"},children:[n==null?void 0:n.ab_overlap,"%"]})]}),t.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:t.jsx("div",{style:{height:"100%",width:`${Math.min((n==null?void 0:n.ab_overlap)||0,100)}%`,background:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88",borderRadius:2}})})]})]}),t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[t.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Profile Shape"}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[t.jsx("div",{style:{width:48,height:48,background:"rgba(255,255,255,0.05)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:800,color:((xt=ce.profile_shape_info)==null?void 0:xt.sentiment)==="Bullish"?"#00ff88":((zn=ce.profile_shape_info)==null?void 0:zn.sentiment)==="Bearish"?"#ff4466":"#888"},children:Ge[ce.profile_shape]||""}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:14,fontWeight:600,color:((cn=ce.profile_shape_info)==null?void 0:cn.sentiment)==="Bullish"?"#00ff88":((sr=ce.profile_shape_info)==null?void 0:sr.sentiment)==="Bearish"?"#ff4466":"#aaa"},children:((Ae=ce.profile_shape_info)==null?void 0:Ae.name)||"Developing"}),t.jsx("div",{style:{fontSize:11,color:"#8b8b8b"},children:((Pe=ce.profile_shape_info)==null?void 0:Pe.sentiment)||"N/A"})]})]}),((yt=ce.profile_shape_info)==null?void 0:yt.description)&&t.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:ce.profile_shape_info.description})]}),t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[t.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Metrics"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"IB Range %"}),t.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[n!=null&&n.ib_range?(n.ib_range/n.avg_daily_range*100).toFixed(0):"--","%"]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"Range Ext %"}),t.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[((Rt=n==null?void 0:n.range_extension_pct)==null?void 0:Rt.toFixed(0))||"--","%"]})]})]}),(n==null?void 0:n.ib_high)&&(n==null?void 0:n.ib_low)&&(n==null?void 0:n.ib_range)&&(()=>{const E=n.ib_range,$=ce.day_type||"normal",N=$==="trend"?2:$==="normal_var"?1.5:$==="neutral"?.5:1,K=E*N,fe=n.high||n.ib_high,ke=n.low||n.ib_low,B=Math.max(0,fe-n.ib_high),V=Math.max(0,n.ib_low-ke),oe=Math.max(0,K-B),pe=Math.max(0,K-V),he=n.ib_high+K,ge=n.ib_low-K;return t.jsxs(t.Fragment,{children:[t.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",marginBottom:12}}),t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Price Targets"}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[t.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:6,padding:8},children:[t.jsx("div",{style:{fontSize:9,color:"#00ff88",marginBottom:2},children:"Upside Target"}),t.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#00ff88"},children:["$",he.toFixed(1)]}),t.jsxs("div",{style:{fontSize:9,color:"#888"},children:["+",oe.toFixed(1)," pts remaining"]})]}),t.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:6,padding:8},children:[t.jsx("div",{style:{fontSize:9,color:"#ff4466",marginBottom:2},children:"Downside Target"}),t.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#ff4466"},children:["$",ge.toFixed(1)]}),t.jsxs("div",{style:{fontSize:9,color:"#888"},children:["-",pe.toFixed(1)," pts remaining"]})]})]}),t.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:8,textAlign:"center"},children:["Based on ",N,"x IB (",$.replace("_"," "),")"]})]})})()]})]}),t.jsx("div",{style:{gridColumn:"1 / -1",marginTop:20},children:t.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[t.jsxs("button",{onClick:()=>S(!z),style:{width:"100%",padding:"16px 20px",background:"transparent",border:"none",borderBottom:z?"1px solid rgba(255,255,255,0.08)":"none",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("span",{style:{fontSize:18},children:""}),t.jsx("span",{children:"Historic TPO Profiles (Last 8 Weeks)"}),p&&t.jsxs("span",{style:{fontSize:11,color:"#8b8b8b",fontWeight:400},children:[p.days," trading days"]})]}),t.jsx("span",{style:{fontSize:18,transform:z?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"},children:""})]}),z&&t.jsx("div",{style:{padding:20},children:m?t.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:[t.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading historic TPO data..."]}):((pn=p==null?void 0:p.profiles)==null?void 0:pn.length)>0?t.jsxs("div",{children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[t.jsxs("button",{onClick:()=>y(!k),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"#aaa",cursor:"pointer",fontSize:12,fontWeight:500},children:[t.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,background:k?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.1)",color:k?"#00ff88":"#888",fontSize:12,fontWeight:700},children:k?"":"+"}),t.jsxs("span",{style:{color:k?"#fff":"#888"},children:[k?"Hide":"Show"," Data Table"]}),t.jsxs("span",{style:{fontSize:10,color:"#666"},children:["(",p.profiles.length," rows)"]})]}),t.jsxs("button",{onClick:()=>{const E=["Date","Day","Open","High","Low","Close","POC","VAH","VAL","IB_High","IB_Low","IB_Range","Range","Day_Type","Shape"],$=p.profiles.map(B=>{var V,oe,pe,he,ge,we,nt,Ee,be,dt,bn;return[B.date,B.weekday,((V=B.open)==null?void 0:V.toFixed(2))||"",((oe=B.high)==null?void 0:oe.toFixed(2))||"",((pe=B.low)==null?void 0:pe.toFixed(2))||"",((he=B.close)==null?void 0:he.toFixed(2))||"",((ge=B.poc)==null?void 0:ge.toFixed(2))||"",((we=B.vah)==null?void 0:we.toFixed(2))||"",((nt=B.val)==null?void 0:nt.toFixed(2))||"",((Ee=B.ib_high)==null?void 0:Ee.toFixed(2))||"",((be=B.ib_low)==null?void 0:be.toFixed(2))||"",((dt=B.ib_range)==null?void 0:dt.toFixed(2))||"",((bn=B.range)==null?void 0:bn.toFixed(2))||"",B.day_type||"",B.profile_shape||""].join(",")}),N=[E.join(","),...$].join(`
`),K=new Blob([N],{type:"text/csv"}),fe=URL.createObjectURL(K),ke=document.createElement("a");ke.href=fe,ke.download=`tpo_historic_${new Date().toISOString().slice(0,10)}.csv`,ke.click(),URL.revokeObjectURL(fe)},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(0,170,255,0.15)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:6,color:"#00aaff",cursor:"pointer",fontSize:11,fontWeight:600},children:[t.jsx("span",{children:""})," Export CSV"]})]}),k&&t.jsx("div",{style:{overflowX:"auto",marginBottom:20},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[t.jsx("thead",{children:t.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,255,255,0.15)"},children:[t.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#8b8b8b",fontWeight:500},children:"Date"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b",fontWeight:500},children:"Day"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontWeight:600},children:"POC"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAH"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAL"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB H"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB L"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"High"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"Low"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b"},children:"Range"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Type"}),t.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Shape"})]})}),t.jsx("tbody",{children:p.profiles.map((E,$)=>{var ke,B,V,oe,pe,he,ge,we;const N={normal:"#00aaff",trend:"#ff6600",normal_var:"#00ff88",neutral:"#9370DB",non_trend:"#888888",double_dist:"#ff4466"},K={normal:"Normal",trend:"Trend",normal_var:"NV",neutral:"Neutral",non_trend:"Non-Tr",double_dist:"DD"},fe={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"};return t.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.06)",background:$===0?"rgba(0,255,136,0.05)":"transparent"},children:[t.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"monospace"},children:E.date}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:E.weekday}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontFamily:"monospace",fontWeight:600},children:((ke=E.poc)==null?void 0:ke.toFixed(2))||"--"}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((B=E.vah)==null?void 0:B.toFixed(2))||"--"}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((V=E.val)==null?void 0:V.toFixed(2))||"--"}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((oe=E.ib_high)==null?void 0:oe.toFixed(2))||"--"}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((pe=E.ib_low)==null?void 0:pe.toFixed(2))||"--"}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((he=E.high)==null?void 0:he.toFixed(2))||"--"}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((ge=E.low)==null?void 0:ge.toFixed(2))||"--"}),t.jsxs("td",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b",fontFamily:"monospace"},children:["$",((we=E.range)==null?void 0:we.toFixed(2))||"--"]}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,background:`${N[E.day_type]||"#888"}30`,color:N[E.day_type]||"#888",border:`1px solid ${N[E.day_type]||"#888"}50`},children:K[E.day_type]||E.day_type})}),t.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:t.jsx("span",{style:{display:"inline-block",width:22,height:22,lineHeight:"22px",textAlign:"center",borderRadius:4,fontSize:12,fontWeight:700,background:`${fe[E.profile_shape]||"#888"}20`,color:fe[E.profile_shape]||"#888",border:`1px solid ${fe[E.profile_shape]||"#888"}50`},children:E.profile_shape})})]},E.date)})})]})}),(()=>{const E=p.profiles,$=E.reduce((B,V)=>B+(V.poc||0),0)/E.length||0,N=E.reduce((B,V)=>B+(V.range||0),0)/E.length||0,K=E.filter(B=>B.ib_range),fe=K.reduce((B,V)=>B+V.ib_range,0)/K.length||0,ke=N>0?fe/N*100:0;return t.jsxs("div",{style:{marginTop:20,padding:16,background:"rgba(30,30,40,0.6)",borderRadius:8,display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:16},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg POC"}),t.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#ffaa00",fontFamily:"monospace"},children:["$",$.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg Range"}),t.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",N.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB Range"}),t.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",fe.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB %"}),t.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[ke.toFixed(1),"%"]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Trend Days"}),t.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#ff6600"},children:E.filter(B=>B.day_type==="trend").length})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Normal Var"}),t.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#00ff88"},children:E.filter(B=>B.day_type==="normal_var").length})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Non-Trend"}),t.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#888"},children:E.filter(B=>B.day_type==="non_trend").length})]})]})})(),(()=>{const E=p.profiles,$=["Mon","Tue","Wed","Thu","Fri"],N={normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},K={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"},fe={};$.forEach(B=>fe[B]=[]),E.forEach(B=>{fe[B.weekday]&&fe[B.weekday].push(B)});const ke=$.map(B=>{const V=fe[B];if(V.length===0)return{day:B,count:0};const oe={},pe={};V.forEach(be=>{oe[be.day_type]=(oe[be.day_type]||0)+1,pe[be.profile_shape]=(pe[be.profile_shape]||0)+1});const he=Object.entries(oe).sort((be,dt)=>dt[1]-be[1])[0],ge=Object.entries(pe).sort((be,dt)=>dt[1]-be[1])[0],we=V.reduce((be,dt)=>be+(dt.range||0),0)/V.length,nt=V.filter(be=>be.ib_range).reduce((be,dt)=>be+dt.ib_range,0)/V.filter(be=>be.ib_range).length||0,Ee=we>0?nt/we*100:0;return{day:B,count:V.length,profiles:V,mostCommonType:he?he[0]:"N/A",typePercent:he?Math.round(he[1]/V.length*100):0,mostCommonShape:ge?ge[0]:"N/A",shapePercent:ge?Math.round(ge[1]/V.length*100):0,avgRange:we.toFixed(2),avgIbRange:nt.toFixed(2),ibPct:Ee.toFixed(1),typeCounts:oe,shapeCounts:pe}});return t.jsxs("div",{style:{marginTop:24},children:[t.jsxs("div",{style:{fontSize:14,fontWeight:600,marginBottom:16,color:"#fff",display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{children:""})," Day of Week Analysis"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:ke.map(B=>t.jsxs("div",{style:{background:"rgba(30,30,40,0.8)",borderRadius:8,padding:12,border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s"},children:[t.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#fff",marginBottom:8},children:B.day}),t.jsxs("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:[B.count," samples"]}),B.count>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{style:{marginTop:8,marginBottom:6},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Most Common Type"}),t.jsxs("div",{style:{display:"inline-block",padding:"2px 8px",borderRadius:4,background:`${N[B.mostCommonType]||"#666"}22`,border:`1px solid ${N[B.mostCommonType]||"#666"}`,color:N[B.mostCommonType]||"#666",fontSize:10,fontWeight:600},children:[B.mostCommonType==="normal_var"?"N-Var":B.mostCommonType==="double_dist"?"Dbl-D":B.mostCommonType==="non_trend"?"Non-T":B.mostCommonType.charAt(0).toUpperCase()+B.mostCommonType.slice(1),t.jsxs("span",{style:{marginLeft:4,opacity:.7},children:[B.typePercent,"%"]})]})]}),t.jsxs("div",{style:{marginBottom:6},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Shape"}),t.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:4,background:`${K[B.mostCommonShape]||"#666"}22`,border:`1px solid ${K[B.mostCommonShape]||"#666"}44`,color:K[B.mostCommonShape]||"#888",fontSize:11,fontWeight:700},children:[B.mostCommonShape,t.jsxs("span",{style:{fontSize:9,fontWeight:400,opacity:.7},children:[B.shapePercent,"%"]})]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4,marginTop:8},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:8,color:"#666"},children:"Avg Range"}),t.jsxs("div",{style:{fontSize:11,color:"#fff",fontFamily:"monospace"},children:["$",B.avgRange]})]}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:8,color:"#666"},children:"IB %"}),t.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontFamily:"monospace"},children:[B.ibPct,"%"]})]})]})]})]},B.day))}),t.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)"},children:[t.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),"Trading Day Heatmap",t.jsx("span",{style:{fontSize:10,color:"#666",marginLeft:"auto"},children:"Most recent at top"})]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:20},children:ke.map(B=>t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:13,color:"#fff",marginBottom:10,textAlign:"center",fontWeight:600,padding:"6px 0",background:"rgba(255,255,255,0.05)",borderRadius:6},children:B.day}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:3,minHeight:90},children:B.profiles.slice(0,12).map((V,oe)=>{var nt;const pe=V.vah&&V.val?V.vah-V.val:0,he=V.range>0?pe/V.range*100:0,ge=V.range>0&&V.ib_range?V.ib_range/V.range*100:0,we=N[V.day_type]||"#666";return t.jsxs("div",{style:{aspectRatio:"1",borderRadius:4,background:`linear-gradient(135deg, ${we} 0%, ${we}99 100%)`,cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 2px 8px ${we}33`,transition:"all 0.2s ease",border:`1px solid ${we}44`},onMouseEnter:Ee=>{Ee.currentTarget.style.transform="scale(1.1)",Ee.currentTarget.style.boxShadow=`0 4px 20px ${we}66`,Ee.currentTarget.style.zIndex="10"},onMouseMove:Ee=>{g({...V,vaRange:pe,vaPct:he,ibPct:ge,baseColor:we,x:Ee.clientX,y:Ee.clientY})},onMouseLeave:Ee=>{Ee.currentTarget.style.transform="scale(1)",Ee.currentTarget.style.boxShadow=`0 2px 8px ${we}33`,Ee.currentTarget.style.zIndex="1",g(null)},children:[t.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:V.profile_shape}),t.jsx("span",{style:{position:"absolute",bottom:1,right:2,fontSize:7,color:"rgba(255,255,255,0.6)"},children:(nt=V.date)==null?void 0:nt.slice(8)})]},oe)})}),B.count>12&&t.jsxs("div",{style:{fontSize:8,color:"#666",textAlign:"center",marginTop:4},children:["+",B.count-12," more"]})]},B.day))}),t.jsx("div",{style:{display:"flex",gap:20,marginTop:20,paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.08)",flexWrap:"wrap",justifyContent:"center"},children:Object.entries(N).map(([B,V])=>t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:`${V}15`,borderRadius:20,border:`1px solid ${V}33`},children:[t.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:`linear-gradient(135deg, ${V} 0%, ${V}aa 100%)`,boxShadow:`0 0 6px ${V}66`}}),t.jsx("span",{style:{fontSize:10,color:"#bbb",fontWeight:500},children:B==="normal_var"?"Normal Var":B==="double_dist"?"Double Dist":B==="non_trend"?"Non-Trend":B.charAt(0).toUpperCase()+B.slice(1)})]},B))}),a&&(()=>{var oe,pe,he,ge,we,nt,Ee,be,dt,bn,Ut,Gt;const B=a.close>a.open,V=B?"#00ff88":"#ff4466";return t.jsxs("div",{style:{position:"fixed",left:a.x+15,top:a.y+15,transform:a.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:260,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px ${a.baseColor}44, 0 0 20px ${a.baseColor}22`,zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[t.jsxs("div",{style:{background:`linear-gradient(135deg, ${a.baseColor}33 0%, ${a.baseColor}11 100%)`,borderBottom:`1px solid ${a.baseColor}44`,padding:"10px 14px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:a.date}),t.jsx("div",{style:{fontSize:10,color:"#888"},children:a.weekday})]})]}),t.jsx("span",{style:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,fontSize:13,fontWeight:800,background:"rgba(255,255,255,0.1)",color:"#fff"},children:a.profile_shape})]}),t.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${a.baseColor}33`,color:a.baseColor,border:`1px solid ${a.baseColor}55`,textTransform:"uppercase"},children:(oe=a.day_type)==null?void 0:oe.replace("_"," ")}),a.open_type&&a.open_type!=="developing"&&t.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.4)",textTransform:"uppercase"},children:a.open_type})]})]}),t.jsxs("div",{style:{margin:"10px 14px",padding:"10px 12px",borderRadius:8,background:`${V}15`,border:`1px solid ${V}30`},children:[t.jsxs("div",{style:{fontSize:10,color:V,marginBottom:8,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{children:B?"":""}),"PRICE ACTION"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:[{label:"O",value:a.open,color:"#fff"},{label:"H",value:a.high,color:B?"#00ff88":"#fff"},{label:"L",value:a.low,color:B?"#fff":"#ff4466"},{label:"C",value:a.close,color:"#fff"}].map(Pt=>{var Zt;return t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:7,color:"#888",marginBottom:2},children:Pt.label}),t.jsxs("div",{style:{fontSize:10,fontWeight:600,color:Pt.color,fontFamily:"monospace"},children:["$",(Zt=Pt.value)==null?void 0:Zt.toFixed(2)]})]},Pt.label)})})]}),t.jsxs("div",{style:{padding:"0 14px 10px 14px"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[t.jsxs("div",{style:{textAlign:"left"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"HIGH"}),t.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00ff88",fontFamily:"monospace"},children:["$",(pe=a.high)==null?void 0:pe.toFixed(2)]})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"DAY RANGE"}),t.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#fff",fontFamily:"monospace"},children:["$",(he=a.range)==null?void 0:he.toFixed(2)]}),t.jsx("div",{style:{fontSize:8,color:"#666",marginTop:2},children:"100%"})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"LOW"}),t.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#ff4466",fontFamily:"monospace"},children:["$",(ge=a.low)==null?void 0:ge.toFixed(2)]})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[t.jsxs("div",{style:{textAlign:"left"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB HIGH"}),t.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((we=a.ib_high)==null?void 0:we.toFixed(2))||"N/A"]})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"IB RANGE"}),t.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#9370DB",fontFamily:"monospace"},children:["$",((nt=a.ib_range)==null?void 0:nt.toFixed(2))||"N/A"]}),t.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(Ee=a.ibPct)==null?void 0:Ee.toFixed(0),"%"]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB LOW"}),t.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((be=a.ib_low)==null?void 0:be.toFixed(2))||"N/A"]})]})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[t.jsxs("div",{style:{textAlign:"left"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAH"}),t.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(dt=a.vah)==null?void 0:dt.toFixed(2)]})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"VA RANGE"}),t.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#00aaff",fontFamily:"monospace"},children:["$",(bn=a.vaRange)==null?void 0:bn.toFixed(2)]}),t.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(Ut=a.vaPct)==null?void 0:Ut.toFixed(0),"%"]})]}),t.jsxs("div",{style:{textAlign:"right"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAL"}),t.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(Gt=a.val)==null?void 0:Gt.toFixed(2)]})]})]})]})]})})()]}),t.jsxs("div",{style:{marginTop:20,background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)"},children:[t.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),"Day Type Distribution by Weekday"]}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:ke.map(B=>{var he,ge;const V=B.count;let oe=0;const pe=Object.entries(B.typeCounts||{}).sort((we,nt)=>nt[1]-we[1]).map(([we,nt])=>{const Ee=V>0?nt/V*100:0,be=oe;return oe+=Ee,{type:we,count:nt,percent:Ee,startPercent:be}});return t.jsxs("div",{style:{textAlign:"center",position:"relative"},children:[t.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:8,fontWeight:600},children:B.day}),t.jsx("div",{style:{width:70,height:70,borderRadius:"50%",margin:"0 auto",background:V>0?`conic-gradient(${pe.map(we=>`${N[we.type]} ${we.startPercent}% ${we.startPercent+we.percent}%`).join(", ")})`:"rgba(50,50,60,0.5)",position:"relative",boxShadow:"0 2px 12px rgba(0,0,0,0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:we=>{we.currentTarget.style.transform="scale(1.1)",we.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)"},onMouseMove:we=>{f({day:B.day,total:V,segments:pe,avgRange:B.avgRange,avgIbRange:B.avgIbRange,ibPct:B.ibPct,x:we.clientX,y:we.clientY})},onMouseLeave:we=>{we.currentTarget.style.transform="scale(1)",we.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.3)",f(null)},children:t.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:40,height:40,borderRadius:"50%",background:"linear-gradient(135deg, #1a1a2e 0%, #252540 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#fff"},children:V})}),pe[0]&&t.jsxs("div",{style:{marginTop:8,fontSize:9,color:N[pe[0].type],fontWeight:600},children:[pe[0].type==="normal_var"?"N-Var":pe[0].type==="double_dist"?"Dbl-D":pe[0].type==="non_trend"?"Non-T":((he=pe[0].type)==null?void 0:he.charAt(0).toUpperCase())+((ge=pe[0].type)==null?void 0:ge.slice(1)),t.jsxs("span",{style:{color:"#666",marginLeft:4},children:[pe[0].percent.toFixed(0),"%"]})]})]},B.day)})}),v&&t.jsxs("div",{style:{position:"fixed",left:v.x+15,top:v.y+15,transform:v.x>window.innerWidth-260?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:200,boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1)",zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[t.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:16},children:""}),t.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:v.day})]}),t.jsxs("span",{style:{fontSize:11,color:"#888",background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:10},children:[v.total," days"]})]}),t.jsxs("div",{style:{padding:"12px 14px"},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:8,fontWeight:600,textTransform:"uppercase"},children:"Day Type Distribution"}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:v.segments.map((B,V)=>{var pe,he;const oe=B.type==="normal_var"?"Normal Var":B.type==="double_dist"?"Double Dist":B.type==="non_trend"?"Non-Trend":((pe=B.type)==null?void 0:pe.charAt(0).toUpperCase())+((he=B.type)==null?void 0:he.slice(1));return t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:10,height:10,borderRadius:3,background:N[B.type],boxShadow:`0 0 6px ${N[B.type]}66`}}),t.jsx("span",{style:{fontSize:11,color:"#ccc",flex:1},children:oe}),t.jsx("span",{style:{fontSize:11,fontWeight:600,color:N[B.type]},children:B.count}),t.jsx("div",{style:{width:50,height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:t.jsx("div",{style:{width:`${B.percent}%`,height:"100%",background:N[B.type],borderRadius:2}})}),t.jsxs("span",{style:{fontSize:10,color:"#888",width:32,textAlign:"right"},children:[B.percent.toFixed(0),"%"]})]},V)})}),t.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.08)",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG RANGE"}),t.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",v.avgRange]})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG IB"}),t.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",v.avgIbRange]})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB %"}),t.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[v.ibPct,"%"]})]})]})]})]})]})]})})()]}):t.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No historic data available"})})]})})]})},Pg=({settings:e,onSettingsChange:n})=>{const[r,i]=A.useState({ticker:"GC1!",current_price:0,delta_5m:0,delta_30m:0,cumulative_delta:0,ib_high:0,ib_low:0,ib_midpoint:0,ib_range:0,pdpoc:0,pd_high:0,pd_low:0,vwap:0,session_high:0,session_low:0,buying_imbalance_pct:0,absorption_ratio:0,stacked_buy_imbalances:0,current_phase:"CONNECTING...",conditions_met:0,entry_signal:!1,last_update:"",market_open:!1,candle_30m_stats:{avg:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},max:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},min:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0}}}),[o,s]=A.useState(!1),[l,d]=A.useState(0),[c,p]=A.useState(new Date),[h,m]=A.useState([]),[u,z]=A.useState({gamma_environment:"UNKNOWN",gamma_regime:"UNKNOWN",total_gex:0,zero_gamma:0,max_pain:0,key_levels:[],gex_profile:[],gex_levels:[],call_wall:0,put_wall:0,hvl:0,gamma_flip:0,beta_spx:0,beta_dxy:0,ib_locked:!1,ib_session_name:"",pd_high:0,pd_low:0,pdpoc:0,session_high:0,session_low:0,data_source:"CONNECTING"}),{isMobile:S}=_i();A.useEffect(()=>{const g=async()=>{const f=performance.now();try{const T=await fetch(en);if(T.ok){const j=await T.json(),b=performance.now(),O=Math.round(b-f);i(j),z(_=>({..._,...j})),s(!0),d(O),p(new Date)}else throw new Error("Backend error")}catch{s(!1),d(0),i(j=>({...j,current_phase:"DISCONNECTED"})),z(j=>({...j,data_source:"DISCONNECTED"}))}};g();const v=setInterval(g,300);return()=>clearInterval(v)},[]);const k=(g,v=5)=>!g||g<=0||!r.current_price||r.current_price<=0?!1:Math.abs(g-r.current_price)<=v,y=(g,v,f=5)=>k(g,f)?{color:"#ffffff",textShadow:"0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(255,255,255,0.5)",fontWeight:700}:{color:v},a=({active:g,conditionsMet:v})=>t.jsxs("div",{style:{padding:16,borderRadius:12,background:g?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.02)",border:`2px solid ${g?"#00ff88":"rgba(255,255,255,0.1)"}`,textAlign:"center",animation:g?"glow 1s infinite alternate":"none"},children:[t.jsx("div",{style:{fontSize:14,color:"#888",marginBottom:8},children:"ENTRY SIGNAL"}),t.jsx("div",{style:{fontSize:36,fontWeight:700,color:g?"#00ff88":"#444"},children:g?" READY":" WAITING"}),t.jsxs("div",{style:{fontSize:14,color:g?"#00ff88":"#666",marginTop:8},children:[v,"/6 Conditions Met"]})]});return t.jsxs("div",{style:{...C.liveDashboard,maxWidth:S?"100%":"1000px",padding:S?"12px":"0"},children:[t.jsx(fg,{}),t.jsx("div",{style:{marginBottom:S?16:24},children:t.jsx(a,{active:r.entry_signal,conditionsMet:r.conditions_met})}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:S?12:16,padding:S?12:20,marginBottom:S?12:16},children:[t.jsx("h3",{style:{margin:"0 0 16px 0",color:"#888",fontSize:S?12:14},children:"Initial Balance Sessions"}),t.jsx("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(2, 1fr)",gap:12},children:u.ibs&&["japan","london","us","ny"].map(g=>{const v=u.ibs[g];if(!v)return null;const f=v.status==="ACTIVE",T=v.status==="ENDED",j=v.high>0&&v.low>0;return t.jsxs("div",{style:{background:f?"rgba(0,255,136,0.05)":"rgba(255,255,255,0.02)",border:`2px solid ${f?"rgba(0,255,136,0.6)":T?"rgba(255,170,0,0.4)":"rgba(136,136,136,0.2)"}`,borderRadius:12,padding:12,position:"relative"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[t.jsxs("div",{children:[t.jsx("div",{style:{fontSize:13,fontWeight:700,color:f?"#00ff88":T?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:v.name}),t.jsxs("div",{style:{fontSize:10,color:"#666",marginTop:2},children:[v.start," - ",v.end," ET"]})]}),t.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:9,fontWeight:700,letterSpacing:1,background:f?"#001a00":T?"#1a1000":"#111",color:f?"#00ff88":T?"#ffaa00":"#666",border:`1px solid ${f?"#00ff88":T?"#ffaa00":"#333"}`,animation:f?"pulse 1.5s ease-in-out infinite":"none"},children:f?" ACTIVE":T?" ENDED":" WAITING"})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:6},children:[t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"HIGH"}),t.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...y(j?v.high:0,j?"#ff4466":"#444")},children:j?`$${v.high.toFixed(2)}`:"--"})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"MID"}),t.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...y(j?v.mid:0,j?"#ffaa00":"#444")},children:j?`$${v.mid.toFixed(2)}`:"--"})]}),t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"LOW"}),t.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...y(j?v.low:0,j?"#00ff88":"#444")},children:j?`$${v.low.toFixed(2)}`:"--"})]})]})]},g)})})]}),t.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(136,136,136,0.3)",borderRadius:16,padding:20,marginBottom:16},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[t.jsx("h3",{style:{margin:0,color:"#888",fontSize:14},children:" Previous Day Levels"}),t.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:"rgba(136,136,136,0.15)",color:"#aaa",fontFamily:"monospace"},children:u.pd_date_range||"Loading..."})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(3, 1fr)",gap:S?8:16},children:[t.jsxs("div",{style:C.levelCard,children:[t.jsx("div",{style:C.levelLabel,children:"PD High"}),t.jsxs("div",{style:{...C.levelValue,...y(u.pd_high,"#ff4466")},children:["$",u.pd_high&&u.pd_high>0?u.pd_high.toFixed(2):"0.00"]})]}),t.jsxs("div",{style:C.levelCard,children:[t.jsx("div",{style:C.levelLabel,children:"pdPOC"}),t.jsxs("div",{style:{...C.levelValue,...y(u.pdpoc||r.pdpoc,"#ffaa00")},children:["$",u.pdpoc&&u.pdpoc>0?u.pdpoc.toFixed(2):r.pdpoc&&r.pdpoc>0?r.pdpoc.toFixed(2):"0.00"]})]}),t.jsxs("div",{style:C.levelCard,children:[t.jsx("div",{style:C.levelLabel,children:"PD Low"}),t.jsxs("div",{style:{...C.levelValue,...y(u.pd_low,"#00ff88")},children:["$",u.pd_low&&u.pd_low<999999?u.pd_low.toFixed(2):"0.00"]})]})]})]}),t.jsx(Ig,{metrics:r,settings:e}),t.jsx("div",{style:{marginTop:20},children:t.jsx(ug,{gexData:u,currentPrice:r.current_price})}),t.jsx("div",{style:{marginTop:20},children:t.jsx(pg,{gexData:u,currentPrice:r.current_price})})]})},Fg=({data:e,trades:n,dateRange:r,setDateRange:i})=>{const[o,s]=A.useState(2025),[l,d]=A.useState(r);A.useEffect(()=>{e.yearly_pnl.length>0&&!e.yearly_pnl.find(h=>h.year===o)&&s(e.yearly_pnl[e.yearly_pnl.length-1].year)},[e.yearly_pnl,o]);const c=()=>{i(l)},p=()=>{const h={start:"2025-08-20",end:"2025-12-28"};d(h),i(h)};return t.jsxs("div",{style:C.backtestDashboard,children:[t.jsxs("div",{style:C.dashboardHeader,children:[t.jsx("h2",{style:C.dashboardTitle,children:"Underground Setup - Backtest Analytics"}),t.jsxs("div",{style:C.dateFilter,children:[t.jsx("input",{type:"date",value:l.start,onChange:h=>d({...l,start:h.target.value}),style:C.dateInput}),t.jsx("span",{style:C.dateSeparator,children:"to"}),t.jsx("input",{type:"date",value:l.end,onChange:h=>d({...l,end:h.target.value}),style:C.dateInput}),t.jsx("button",{onClick:c,style:{...C.filterButton,background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000",fontWeight:600,border:"none"},children:"Apply"}),t.jsx("button",{style:C.filterButton,onClick:p,children:"Reset"})]})]}),t.jsxs("div",{style:C.filterInfo,children:["Showing ",e.summary.total_trades," trades from ",r.start," to ",r.end]}),t.jsx(Mg,{data:e}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 450px",gap:24,alignItems:"start"},children:[t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[t.jsx(Eg,{data:e,selectedYear:o,setSelectedYear:s}),t.jsx(Bg,{weeks:e.weekly_pnl,year:o})]}),t.jsx("div",{children:t.jsx(Lg,{trades:n})})]})]})},Wg=({trades:e,dateRange:n})=>{const r=e.filter(l=>l.date>=n.start&&l.date<=n.end).sort((l,d)=>new Date(d.date)-new Date(l.date)),i=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"],d=r.map(u=>{var z,S,k,y,a;return[u.date,((z=u.entry)==null?void 0:z.toFixed(2))||"",((S=u.exit)==null?void 0:S.toFixed(2))||"",((k=u.stop_loss)==null?void 0:k.toFixed(2))||"",((y=u.pnl)==null?void 0:y.toFixed(2))||"",((a=u.r)==null?void 0:a.toFixed(2))||"",u.grade||"",u.tier||"",u.exitReason||"",u.delta||"",u.contracts||""]}),c=[l.join(","),...d.map(u=>u.join(","))].join(`
`),p=new Blob([c],{type:"text/csv"}),h=URL.createObjectURL(p),m=document.createElement("a");m.href=h,m.download=`trade_log_${n.start}_to_${n.end}.csv`,m.click(),URL.revokeObjectURL(h)},o=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"];let d='<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?>';d+='<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">',d+='<Worksheet ss:Name="Trades"><Table>',d+="<Row>"+l.map(m=>`<Cell><Data ss:Type="String">${m}</Data></Cell>`).join("")+"</Row>",r.forEach(m=>{d+="<Row>",d+=`<Cell><Data ss:Type="String">${m.date||""}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.entry||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.exit||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.stop_loss||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.pnl||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.r||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="String">${m.grade||""}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.tier||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="String">${m.exitReason||""}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.delta||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${m.contracts||0}</Data></Cell>`,d+="</Row>"}),d+="</Table></Worksheet></Workbook>";const c=new Blob([d],{type:"application/vnd.ms-excel"}),p=URL.createObjectURL(c),h=document.createElement("a");h.href=p,h.download=`trade_log_${n.start}_to_${n.end}.xls`,h.click(),URL.revokeObjectURL(p)},s=r.slice(0,50);return t.jsxs("div",{style:C.tradeLog,children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[t.jsx("h2",{style:C.dashboardTitle,children:"Trade Log"}),t.jsxs("div",{style:{display:"flex",gap:"8px"},children:[t.jsxs("button",{onClick:i,style:{background:"rgba(0,255,136,0.1)",border:"1px solid #00ff88",color:"#00ff88",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" CSV (",r.length,")"]}),t.jsxs("button",{onClick:o,style:{background:"rgba(0,170,255,0.1)",border:"1px solid #00aaff",color:"#00aaff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" Excel (",r.length,")"]})]})]}),t.jsxs("p",{style:C.tradeLogInfo,children:["Showing ",s.length," of ",r.length," filtered trades (most recent first)"]}),t.jsxs("table",{style:C.tradeTable,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:C.th,children:"Date"}),t.jsx("th",{style:C.th,children:"Entry"}),t.jsx("th",{style:C.th,children:"Exit"}),t.jsx("th",{style:C.th,children:"P&L"}),t.jsx("th",{style:C.th,children:"R-Multiple"}),t.jsx("th",{style:C.th,children:"Grade"}),t.jsx("th",{style:C.th,children:"Tier"}),t.jsx("th",{style:C.th,children:"Exit Reason"})]})}),t.jsx("tbody",{children:s.map(l=>{var d;return t.jsxs("tr",{style:C.tr,children:[t.jsx("td",{style:C.td,children:l.date}),t.jsxs("td",{style:C.td,children:["$",l.entry.toFixed(2)]}),t.jsxs("td",{style:C.td,children:["$",l.exit.toFixed(2)]}),t.jsxs("td",{style:{...C.td,color:l.pnl>=0?"#00ff88":"#ff4466"},children:["$",l.pnl.toLocaleString()]}),t.jsxs("td",{style:{...C.td,color:l.r>=0?"#00ff88":"#ff4466"},children:[l.r.toFixed(1),"R"]}),t.jsx("td",{style:C.td,children:t.jsx("span",{style:{...C.gradeBadge,background:l.grade==="A"?"#00ff88":l.grade==="B"?"#ffaa00":"#ff4466"},children:l.grade})}),t.jsx("td",{style:C.td,children:l.tier}),t.jsx("td",{style:C.td,children:t.jsx("span",{style:{fontSize:"11px",color:l.exitReason==="STOP_LOSS"?"#ff4466":"#00ff88"},children:((d=l.exitReason)==null?void 0:d.replace("_"," "))||""})})]},l.id)})})]})]})},Ao={"BTC-SPOT":{symbol:"BTC-SPOT",name:"Bitcoin Spot 24/7",ticker:"BTCUSDT",asset:"BTC-SPOT",icon:"",isSpot:!0},ESH26:{symbol:"ESH26",name:"E-mini S&P Mar 2026",ticker:"ES1!",asset:"ES",icon:""},NQH26:{symbol:"NQH26",name:"Nasdaq Mar 2026",ticker:"NQ1!",asset:"NQ",icon:""},GCG26:{symbol:"GCG26",name:"Gold Feb 2026",ticker:"GC1!",asset:"GC",icon:""},BTCG26:{symbol:"BTCG26",name:"Bitcoin CME Feb 2026",ticker:"BTC1!",asset:"BTC",icon:""},CLG26:{symbol:"CLG26",name:"Crude Oil Feb 2026",ticker:"CL1!",asset:"CL",icon:""}},d0=({selectedContract:e,onContractChange:n,contracts:r,isMobile:i})=>{var c;const[o,s]=A.useState(!1),l=A.useRef(null),d=r[e];return A.useEffect(()=>{const p=h=>{l.current&&!l.current.contains(h.target)&&s(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),t.jsxs("div",{ref:l,style:{position:"relative"},children:[t.jsxs("button",{onClick:()=>s(!o),style:{display:"flex",alignItems:"center",gap:i?6:10,padding:i?"6px 10px":"10px 16px",background:"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,170,255,0.1) 100%)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:8,cursor:"pointer",transition:"all 0.2s ease",outline:"none"},children:[t.jsx("span",{style:{fontSize:i?14:18},children:(d==null?void 0:d.icon)||""}),t.jsxs("div",{style:{textAlign:"left"},children:[t.jsx("div",{style:{fontSize:i?12:14,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace",letterSpacing:.5},children:(d==null?void 0:d.symbol)||"SELECT"}),!i&&t.jsx("div",{style:{fontSize:9,color:"#888",marginTop:1},children:((c=d==null?void 0:d.name)==null?void 0:c.split(" ").slice(0,2).join(" "))||"Contract"})]}),t.jsx("svg",{width:i?10:12,height:i?10:12,viewBox:"0 0 12 12",fill:"none",style:{marginLeft:i?2:6,transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:t.jsx("path",{d:"M2 4L6 8L10 4",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),o&&t.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,marginBottom:8,minWidth:i?180:240,background:"linear-gradient(180deg, rgba(20,20,30,0.98) 0%, rgba(10,10,18,0.99) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,overflow:"hidden",boxShadow:"0 -10px 40px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",zIndex:2e3,animation:"slideUp 0.2s ease"},children:[t.jsx("div",{style:{padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,0.08)",background:"rgba(0,255,136,0.05)"},children:t.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1,textTransform:"uppercase"},children:"Select Contract"})}),t.jsx("div",{style:{maxHeight:280,overflowY:"auto"},children:Object.entries(r).map(([p,h])=>{const m=p===e;return t.jsxs("div",{onClick:()=>{n(p),s(!1)},style:{display:"flex",alignItems:"center",gap:12,padding:"12px 14px",cursor:"pointer",background:m?"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, transparent 100%)":"transparent",borderLeft:m?"3px solid #00ff88":"3px solid transparent",transition:"all 0.15s ease"},onMouseEnter:u=>{m||(u.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseLeave:u=>{m||(u.currentTarget.style.background="transparent")},children:[t.jsx("div",{style:{width:36,height:36,borderRadius:8,background:m?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:h.icon||""}),t.jsxs("div",{style:{flex:1},children:[t.jsx("div",{style:{fontSize:13,fontWeight:700,color:m?"#00ff88":"#fff",fontFamily:"'JetBrains Mono', monospace",marginBottom:2},children:h.symbol}),t.jsx("div",{style:{fontSize:10,color:"#888"},children:h.name})]}),m&&t.jsx("div",{style:{width:20,height:20,borderRadius:"50%",background:"#00ff88",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:t.jsx("path",{d:"M2 6L5 9L10 3",stroke:"#000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},p)})}),t.jsx("div",{style:{padding:"8px 14px",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.2)"},children:t.jsx("span",{style:{fontSize:9,color:"#555"},children:"Live data from Databento"})})]}),t.jsx("style",{children:`
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbars for Windows users */
        .tpo-scroll-container::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }

        .tpo-scroll-container::-webkit-scrollbar-track {
          background: rgba(20, 20, 28, 0.8);
          border-radius: 5px;
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb {
          background: linear-gradient(180deg, rgba(100, 100, 120, 0.6) 0%, rgba(70, 70, 90, 0.6) 100%);
          border-radius: 5px;
          border: 2px solid rgba(20, 20, 28, 0.8);
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(180deg, rgba(130, 130, 150, 0.8) 0%, rgba(100, 100, 120, 0.8) 100%);
        }

        .tpo-scroll-container::-webkit-scrollbar-corner {
          background: rgba(20, 20, 28, 0.8);
        }

        /* Firefox scrollbar support */
        .tpo-scroll-container {
          scrollbar-width: thin;
          scrollbar-color: rgba(100, 100, 120, 0.6) rgba(20, 20, 28, 0.8);
        }
      `})]})},Ng=({globalData:e,selectedContract:n,onContractChange:r,contracts:i,isMobile:o})=>{var l,d,c;const s=(e==null?void 0:e.data_source)&&(e.data_source==="DATABENTO_LIVE"||e.data_source.includes("_SPOT"));return o?t.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.98) 0%, rgba(5,5,10,1) 100%)",borderTop:"1px solid rgba(0,255,136,0.3)",padding:"8px 12px",zIndex:1e3,backdropFilter:"blur(10px)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[t.jsx(d0,{selectedContract:n,onContractChange:r,contracts:i,isMobile:!0}),t.jsx("div",{style:{padding:"6px 14px",background:s?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.03)",border:`1px solid ${s?"rgba(0,255,136,0.4)":"rgba(255,255,255,0.1)"}`,borderRadius:8},children:t.jsxs("span",{style:{fontSize:16,fontWeight:700,color:s?"#00ff88":"#666",fontFamily:"'JetBrains Mono', monospace"},children:["$",((l=e==null?void 0:e.current_price)==null?void 0:l.toFixed(2))||"----.--"]})}),t.jsx("div",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6},children:t.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff",fontFamily:"'JetBrains Mono', monospace"},children:(e==null?void 0:e.current_et_time)||"--:--"})})]}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"4px 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:s?"#00ff88":"#ff4466",boxShadow:s?"0 0 6px #00ff88":"none",animation:s?"pulse 2s infinite":"none"}}),t.jsx("span",{style:{fontSize:9,fontWeight:700,color:s?"#00ff88":"#ff4466"},children:s?"LIVE":"OFFLINE"})]}),t.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),t.jsxs("span",{style:{fontSize:9,color:"#666"},children:["LATENCY: ",t.jsx("span",{style:{color:s?"#00ff88":"#666"},children:s?"~10ms":"--"})]}),t.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),t.jsx("span",{style:{fontSize:9,color:s?"#00aaff":"#666"},children:(e==null?void 0:e.data_source)||"DISCONNECTED"})]})]}):t.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.95) 0%, rgba(5,5,10,0.98) 100%)",borderTop:"1px solid rgba(0,255,136,0.2)",padding:"12px 24px",display:"flex",alignItems:"center",justifyContent:"center",gap:24,zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.5)"},children:[t.jsx(d0,{selectedContract:n,onContractChange:r,contracts:i,isMobile:!1}),t.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:t.jsxs("div",{style:{padding:"8px 16px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6,display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:11,color:"#666"},children:"ET"}),t.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:(e==null?void 0:e.current_et_time)||"--:--:--"})]})}),t.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[t.jsx("span",{style:{fontSize:11,color:"#666",textTransform:"uppercase",letterSpacing:1},children:"Price"}),t.jsx("div",{style:{padding:"8px 20px",background:s?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.03)",border:`1px solid ${s?"rgba(0,255,136,0.4)":"rgba(255,255,255,0.1)"}`,borderRadius:6,boxShadow:s?"0 0 20px rgba(0,255,136,0.2)":"none"},children:t.jsxs("span",{style:{fontSize:20,fontWeight:700,color:s?"#00ff88":"#666",fontFamily:"'JetBrains Mono', monospace",textShadow:s?"0 0 10px rgba(0,255,136,0.5)":"none"},children:["$",((d=e==null?void 0:e.current_price)==null?void 0:d.toFixed(2))||"----.--"]})})]}),t.jsx("div",{style:{padding:"6px 12px",background:"rgba(255,255,255,0.02)",borderRadius:4,fontSize:11,color:"#888"},children:((c=i[n])==null?void 0:c.name)||"Gold Feb 2026"}),t.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 14px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:s?"#00ff88":"#666",boxShadow:s?"0 0 6px #00ff88":"none",animation:s?"pulse 2s infinite":"none"}}),t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:s?"#00ff88":"#666",boxShadow:s?"0 0 6px #00ff88":"none",animation:s?"pulse 2s infinite 0.3s":"none"}}),t.jsx("span",{style:{fontSize:11,fontWeight:700,color:s?"#00ff88":"#666",marginLeft:4,textTransform:"uppercase",letterSpacing:1},children:s?"LIVE":"OFFLINE"})]}),t.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"LATENCY:"}),t.jsx("span",{style:{fontSize:11,color:"#00ff88",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:s?"~10ms":"--"}),s&&t.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(0,255,136,0.2)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:3,color:"#00ff88",fontWeight:600},children:"EXCELLENT"})]}),t.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[t.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"SOURCE:"}),t.jsx("span",{style:{fontSize:11,color:s?"#00aaff":"#666",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:(e==null?void 0:e.data_source)||"DISCONNECTED"})]})]})]})},Dg=()=>{var w;const{isMobile:e}=_i(),[n,r]=la("horizon_user",null),[i,o]=A.useState("backtest"),[s,l]=la("horizon_settings",Cf),[d,c]=A.useState({start:"2025-08-20",end:"2025-12-28"}),[p,h]=la("horizon_contract","GCG26");A.useEffect(()=>{(async()=>{let R;p==="BTC-SPOT"?R="BTC-SPOT":p.startsWith("BTC")?R="BTC":p.startsWith("GC")?R="GC":p.startsWith("NQ")?R="NQ":p.startsWith("ES")?R="ES":p.startsWith("CL")?R="CL":R="GC";try{await fetch(`${en}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:R})}),console.log(`Synced backend to ${p} (${R})`)}catch(M){console.error("Failed to sync contract on load:",M)}})()},[]);const[m,u]=A.useState({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),z=A.useRef(0),[S,k]=A.useState({contract:"GCG26",contract_name:"Gold Feb 2026",current_price:0,current_et_time:"--:--:--",current_et_date:""}),[y,a]=A.useState(!1),[g,v]=A.useState([{role:"assistant",content:"Welcome to Horizon AI! I can help you analyze market structure, interpret TPO profiles, and provide trading insights based on live data."}]),[f,T]=A.useState(""),[j,b]=A.useState(!1),O=A.useRef(null);A.useEffect(()=>{var x;(x=O.current)==null||x.scrollIntoView({behavior:"smooth"})},[g]),A.useEffect(()=>{const x=["/live","/tpo","/zones","/market-overview","/historical-sessions?week=current"];console.log("Warming up caches..."),x.forEach(R=>{fetch(`${en}${R}`).then(()=>console.log(`Warmed up ${R}`)).catch(()=>{})})},[]),A.useEffect(()=>{const R={backtest:["/live"],live:["/tpo","/zones"],tpo:["/zones"],zones:["/live"],treemap:[],vsi:[],priceladder:["/tpo"]}[i]||[];i!=="treemap"&&R.push("/market-overview");const M=setTimeout(()=>{R.forEach(ie=>{fetch(`${en}${ie}`).then(()=>console.log(`Preloaded ${ie}`)).catch(()=>{})})},500);return()=>clearTimeout(M)},[i]);const _=async()=>{if(!f.trim()||j)return;const x=f.trim();T(""),v(ae=>[...ae,{role:"user",content:x}]),b(!0);let R={};try{const ae=await fetch(`${en}/live`);ae.ok&&(R=await ae.json())}catch{}let M={};try{const ae=await fetch(`${en}/session-ohlc?week=current`);ae.ok&&(M=await ae.json())}catch{}const ie={currentPrice:S.current_price,contract:S.contract,contractName:S.contract_name,currentTime:S.current_et_time,liveSession:R.current_session||null,sessionHigh:R.session_high||null,sessionLow:R.session_low||null,dayHigh:R.day_high||null,dayLow:R.day_low||null,pdHigh:R.pd_high||null,pdLow:R.pd_low||null,pdPOC:R.pd_poc||null,cumulativeDelta:R.cumulative_delta||null,buyVolume:R.buy_volume||null,sellVolume:R.sell_volume||null,sessionData:M.days?M.days.slice(0,2):null};try{const ae=await fetch(`${en}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:x,context:ie,provider:"claude"})});if(ae.ok){const Se=await ae.json();v(Ce=>[...Ce,{role:"assistant",content:Se.response,error:!1}])}else{const Se=await ae.json();v(Ce=>[...Ce,{role:"assistant",content:Se.error||"Sorry, I encountered an error. Please try again.",error:!0}])}}catch{v(Se=>[...Se,{role:"assistant",content:"Connection error. Please check your connection and try again.",error:!0}])}b(!1)};A.useEffect(()=>{let x=0,R=!1;const M=3,ie=1e3,ae=async()=>{if(!R){R=!0,console.log(" Auto-reconnecting to backend...");try{(await fetch(`${en}/reconnect`,{method:"POST"})).ok&&console.log(" Auto-reconnect triggered successfully")}catch{console.log(" Auto-reconnect request failed, backend may be restarting")}await new Promise(ve=>setTimeout(ve,2e3)),R=!1}},Se=async()=>{try{const ve=new AbortController,xe=setTimeout(()=>ve.abort(),3e3),J=await fetch(en,{signal:ve.signal});if(clearTimeout(xe),J.ok){const re=await J.json(),Z=re.data_source&&re.data_source!=="DISCONNECTED"&&!re.data_source.includes("RECONNECTING")&&re.data_source!=="INITIALIZING",ee=re.data_source&&re.data_source.includes("RECONNECTING");k({contract:re.contract||"GCG26",contract_name:re.contract_name||"Gold Feb 2026",current_price:re.current_price||0,current_et_time:re.current_et_time||"--:--:--",current_et_date:re.current_et_date||"",available_contracts:re.available_contracts||{},data_source:re.data_source||"DISCONNECTED"}),Z?(x=0,u(ue=>({...ue,connected:!0,lastSuccessTime:new Date().toISOString(),reconnectAttempts:0,lastError:null}))):(ee||(x++,x>=M&&!R&&ae()),u(ue=>({...ue,connected:ee?"reconnecting":!1,lastError:`Data source: ${re.data_source||"DISCONNECTED"}`,reconnectAttempts:ee?ue.reconnectAttempts:ue.reconnectAttempts+1})))}else throw new Error(`HTTP ${J.status}`)}catch(ve){x++;const xe=ve.name==="AbortError"?"Request timeout":ve.message||"Unknown error",J=xe.includes("ECONNRESET")||xe.includes("connection reset")||xe.includes("Failed to fetch")||xe.includes("NetworkError")||xe.includes("timeout");u(re=>({...re,connected:!1,lastError:J?`Network: ${xe}`:xe,errorCount:re.errorCount+1,reconnectAttempts:re.reconnectAttempts+1})),x>=M&&!R&&ae()}};Se();let Ce=setInterval(Se,ie);const U=setInterval(()=>{x>0&&console.log(` Health check: ${x} consecutive failures`)},3e4);return()=>{clearInterval(Ce),clearInterval(U)}},[z.current]);const D=async x=>{var M,ie;let R;x==="BTC-SPOT"?R="BTC-SPOT":x.startsWith("BTC")?R="BTC":x.startsWith("GC")?R="GC":x.startsWith("NQ")?R="NQ":x.startsWith("ES")?R="ES":x.startsWith("CL")?R="CL":R=((M=Ao[x])==null?void 0:M.asset)||"GC",h(x),k(ae=>({...ae,data_source:"SWITCHING...",current_price:0}));try{if((await fetch(`${en}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:R})})).ok){localStorage.removeItem("tpo_historic_cache"),console.log(`Switched to ${x} (${R})`);const Se=x==="BTC-SPOT"?"BTC-SPOT":((ie=Ao[x])==null?void 0:ie.symbol)||x;let Ce=0;const U=20,ve=async()=>{var xe;try{const J=await fetch(en);if(J.ok){const re=await J.json();if(re.contract===Se||re.asset_class===R||Ce>=U){k({contract:re.contract||x,contract_name:re.contract_name||((xe=Ao[x])==null?void 0:xe.name)||x,current_price:re.current_price||0,current_et_time:re.current_et_time||"--:--:--",current_et_date:re.current_et_date||"",available_contracts:re.available_contracts||{},data_source:re.data_source||"SWITCHING..."});return}}}catch{console.log("Polling for new contract data...")}Ce++,Ce<U&&setTimeout(ve,500)};setTimeout(ve,500)}}catch(ae){console.error("Failed to switch contract:",ae),k(Se=>({...Se,data_source:"ERROR"}))}},W=async()=>{u({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),z.current+=1,console.log("Connection reset triggered");try{const x=await fetch(`${en}/reconnect`,{method:"POST"});if(x.ok){const R=await x.json();console.log("Backend reconnect:",R.message)}}catch(x){console.error("Failed to trigger backend reconnect:",x)}},{trades:G,stats:_e,source:Fe}=mg(),I=A.useMemo(()=>G&&G.length>0?G:yg(),[G,s]);A.useEffect(()=>{if(G&&G.length>0){const x=G.map(R=>R.date).sort();c({start:x[0],end:x[x.length-1]})}},[G]);const ze=A.useMemo(()=>I.filter(x=>{var R,M,ie;return!(x.date<d.start||x.date>d.end||x.delta>s.deltaThreshold||x.pnl>0&&x.buyingImbalance<s.buyingImbalancePct||(R=s.filters)!=null&&R.grades&&!s.filters.grades[x.grade]||(M=s.filters)!=null&&M.tiers&&!s.filters.tiers[x.tier]||((ie=s.filters)==null?void 0:ie.minR)!==void 0&&x.r<s.filters.minR)}),[I,d,s.deltaThreshold,s.buyingImbalancePct,s.filters]),tt=A.useMemo(()=>bg(ze,s),[ze,s]);new Date().toISOString();const se=x=>r(x),me=()=>r(null);return n?t.jsx(kf.Provider,{value:s,children:t.jsx(gg.Provider,{value:n,children:t.jsxs("div",{style:C.app,children:[t.jsx(Tg,{activeTab:i,setActiveTab:o,onLogout:me}),t.jsxs("main",{style:{...C.main,padding:e?"12px":"24px",paddingBottom:e?"85px":"80px"},children:[i==="backtest"&&t.jsx(Fg,{data:tt,trades:ze,dateRange:d,setDateRange:c}),i==="live"&&t.jsx(Pg,{settings:s,onSettingsChange:l}),i==="tpo"&&t.jsx(Ag,{selectedContract:p}),i==="zones"&&t.jsx(Og,{}),i==="treemap"&&t.jsx(Sg,{}),i==="vsi"&&t.jsx(Cg,{selectedContract:p}),i==="trades"&&t.jsx(Wg,{trades:I,dateRange:d}),i==="priceladder"&&t.jsx(wg,{selectedContract:p}),i==="settings"&&t.jsx(Rg,{settings:s,onSettingsChange:l,trades:ze,dateRange:d,connectionStatus:m,onResetConnection:W}),i==="redfolder"&&t.jsx(_g,{})]}),t.jsxs("footer",{style:C.footer,children:[t.jsx("span",{children:"Project Horizon v2.0 | Underground Setup Strategy"}),t.jsxs("span",{children:[((w=Ao[p])==null?void 0:w.name)||"GC Futures"," | 2025 Market Regime"]})]}),y&&t.jsxs("div",{style:{position:"fixed",bottom:e?70:100,right:e?10:24,left:e?10:"auto",width:e?"auto":380,height:e?"calc(100vh - 150px)":500,maxHeight:e?"70vh":500,background:"linear-gradient(180deg, rgba(12,12,18,0.98) 0%, rgba(8,8,14,1) 100%)",borderRadius:16,border:"1px solid rgba(0,255,136,0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(0,255,136,0.05)"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[t.jsx("div",{style:{width:32,height:32,borderRadius:8,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"#000"},children:"H"}),t.jsxs("div",{children:[t.jsx("div",{style:{fontWeight:600,fontSize:14,color:"#fff"},children:"Horizon AI"}),t.jsx("div",{style:{fontSize:10,color:"#00ff88"},children:"Trading Assistant"})]})]}),t.jsx("button",{onClick:()=>a(!1),style:{background:"transparent",border:"none",color:"#666",fontSize:20,cursor:"pointer",padding:4},children:""})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:16,display:"flex",flexDirection:"column",gap:12},children:[g.map((x,R)=>t.jsx("div",{style:{alignSelf:x.role==="user"?"flex-end":"flex-start",maxWidth:x.role==="user"?"85%":"95%",width:x.role==="user"?"auto":"95%"},children:t.jsx("div",{style:{padding:x.role==="assistant"?"14px 16px":"10px 14px",borderRadius:x.role==="user"?"14px 14px 4px 14px":"14px 14px 14px 4px",background:x.role==="user"?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.06)",border:x.role==="user"?"none":"1px solid rgba(255,255,255,0.1)",color:x.role==="user"?"#000":x.error?"#ff6b6b":"#e8e8e8",fontSize:13,lineHeight:1.6,fontWeight:x.role==="user"?500:400},children:x.role==="assistant"?t.jsx("div",{dangerouslySetInnerHTML:{__html:x.content.replace(/\*\*(.+?)\*\*/g,'<strong style="color:#00ff88">$1</strong>').replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,'<code style="background:rgba(0,255,136,0.15);padding:2px 6px;border-radius:4px;font-family:monospace;font-size:12px">$1</code>').replace(/\n- /g,"<br/> ").replace(/\n\d+\. /g,M=>"<br/>"+M.trim()+" ").replace(/\n\n/g,'</p><p style="margin:8px 0">').replace(/\n/g,"<br/>")}}):x.content})},R)),j&&t.jsx("div",{style:{alignSelf:"flex-start",width:"95%"},children:t.jsxs("div",{style:{padding:"14px 16px",borderRadius:"14px 14px 14px 4px",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",fontSize:13,display:"flex",alignItems:"center",gap:8},children:[t.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite"}}),"Analyzing..."]})}),t.jsx("div",{ref:O})]}),t.jsxs("div",{style:{padding:12,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:8},children:[t.jsx("input",{type:"text",value:f,onChange:x=>T(x.target.value),onKeyPress:x=>x.key==="Enter"&&_(),placeholder:"Ask about trading...",style:{flex:1,padding:"10px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:13,outline:"none"}}),t.jsx("button",{onClick:_,disabled:j||!f.trim(),style:{padding:"10px 16px",borderRadius:10,border:"none",background:f.trim()&&!j?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.1)",color:f.trim()&&!j?"#000":"#666",fontWeight:600,fontSize:13,cursor:f.trim()&&!j?"pointer":"not-allowed"},children:"Send"})]})]}),t.jsx("button",{onClick:()=>a(!y),style:{position:"fixed",bottom:e?75:24,right:e?12:24,width:y?48:"auto",height:e?40:48,padding:y?0:e?"0 14px":"0 20px",borderRadius:y?"50%":24,border:"none",background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",color:"#000",fontWeight:700,fontSize:e?12:14,cursor:"pointer",boxShadow:"0 4px 20px rgba(0,255,136,0.4)",zIndex:1001,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},children:y?"":t.jsxs(t.Fragment,{children:[t.jsx("span",{style:{fontSize:18},children:"H"}),t.jsx("span",{children:"Horizon"})]})}),t.jsx(Ng,{globalData:S,selectedContract:p,onContractChange:D,contracts:Ao,isMobile:e}),t.jsx(cg,{})]})})}):t.jsx(jg,{onLogin:se})},C={app:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",color:"#e0e0e0",fontFamily:"'JetBrains Mono', 'Fira Code', monospace",overflowX:"hidden",width:"100%",maxWidth:"100vw"},main:{padding:"24px",paddingBottom:"80px",maxWidth:"1600px",margin:"0 auto",overflowX:"hidden"},footer:{display:"flex",justifyContent:"space-between",padding:"16px 24px",paddingBottom:"70px",borderTop:"1px solid rgba(255,255,255,0.05)",fontSize:"12px",color:"#666"},loginContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",padding:"20px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginCard:{width:"100%",maxWidth:"420px",background:"rgba(20,20,28,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:"48px 40px",boxShadow:"0 25px 50px rgba(0,0,0,0.5)",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginHeader:{textAlign:"center",marginBottom:"40px"},logo:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"16px"},logoIcon:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},logoText:{fontSize:"22px",fontWeight:"700",color:"#fff",letterSpacing:"3px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, sans-serif"},loginSubtitle:{color:"#888",fontSize:"13px",fontFamily:"'Inter', sans-serif",letterSpacing:"0.5px"},loginForm:{display:"flex",flexDirection:"column",gap:"20px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},inputLabel:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"1px",fontFamily:"'Inter', sans-serif"},input:{padding:"14px 16px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",fontSize:"15px",outline:"none",transition:"border-color 0.2s",fontFamily:"'Inter', sans-serif"},error:{padding:"12px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:"8px",color:"#ff4466",fontSize:"13px",fontFamily:"'Inter', sans-serif"},loginButton:{padding:"16px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:"8px",color:"#000",fontSize:"13px",fontWeight:"700",cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s",fontFamily:"'Inter', sans-serif"},loginFooter:{textAlign:"center",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,0.05)"},footerText:{color:"#555",fontSize:"11px",margin:"4px 0",fontFamily:"'Inter', sans-serif"},nav:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)"},navBrand:{display:"flex",alignItems:"center",gap:"10px"},navTabs:{display:"flex",gap:"8px"},settingsPanel:{maxWidth:"1200px",margin:"0 auto"},settingsHeader:{marginBottom:"32px"},settingsSubtitle:{color:"#666",fontSize:"14px",marginTop:"8px"},settingsGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},settingsCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px"},settingsCardTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",marginBottom:"14px"},sliderGroup:{marginBottom:"16px"},sliderHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},sliderLabel:{fontSize:"11px",color:"#aaa"},sliderValue:{fontSize:"13px",fontWeight:"700",color:"#00ff88"},slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer",WebkitAppearance:"none"},sliderTicks:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#555",marginTop:"4px"},allocationNote:{fontSize:"12px",color:"#888",marginBottom:"16px"},tierVisual:{display:"flex",height:"8px",borderRadius:"4px",overflow:"hidden",marginTop:"16px"},tierBar:{height:"100%",transition:"width 0.3s"},tierLegend:{display:"flex",justifyContent:"space-around",fontSize:"11px",color:"#888",marginTop:"12px"},settingsActions:{display:"flex",gap:"16px",justifyContent:"center",marginBottom:"32px"},actionButton:{padding:"14px 32px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",border:"none"},resetButton:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"#888"},applyButton:{background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000"},settingsInfo:{padding:"24px",background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:"12px"},infoTitle:{fontSize:"14px",color:"#00aaff",marginBottom:"16px"},infoList:{listStyle:"none",padding:0,margin:0,fontSize:"13px",color:"#888",lineHeight:"1.8"},statsContainer:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#fff",marginBottom:"20px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginBottom:"24px"},statsCard:{padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},statsTitle:{fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},statsValue:{fontSize:"24px",fontWeight:"700",color:"#fff"},statsSubtitle:{fontSize:"12px",color:"#666",marginTop:"4px"},statsTrend:{fontSize:"12px",marginTop:"8px",fontWeight:"600"},breakdownGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px"},breakdownCard:{padding:"20px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px"},breakdownTitle:{fontSize:"12px",color:"#666",textTransform:"uppercase",marginBottom:"16px"},breakdownRow:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 0",borderBottom:"1px solid rgba(255,255,255,0.03)"},breakdownLabel:{flex:"0 0 100px",fontSize:"13px",color:"#888"},breakdownBarContainer:{flex:1,height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"3px",overflow:"hidden"},breakdownBar:{height:"100%",borderRadius:"3px",transition:"width 0.3s"},breakdownCount:{flex:"0 0 40px",textAlign:"right",fontSize:"13px",color:"#fff"},gradeStats:{flex:1,display:"flex",justifyContent:"flex-end",gap:"16px",fontSize:"13px"},drillDownContainer:{marginBottom:"32px"},yearGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},yearCard:{padding:"20px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},yearLabel:{fontSize:"24px",fontWeight:"700",color:"#fff",marginBottom:"8px"},yearPnl:{fontSize:"20px",fontWeight:"600",marginBottom:"12px"},yearStats:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#888"},weekContainer:{marginBottom:"32px"},weekGrid:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"16px"},weekBar:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"40px"},weekBarContainer:{width:"32px",height:"100px",background:"rgba(255,255,255,0.03)",borderRadius:"4px",display:"flex",alignItems:"flex-end",overflow:"hidden"},weekBarFill:{width:"100%",borderRadius:"4px 4px 0 0",transition:"height 0.3s"},weekLabel:{fontSize:"10px",color:"#666",marginTop:"8px"},weekPnl:{fontSize:"10px",fontWeight:"600",marginTop:"4px"},liveDashboard:{maxWidth:"1000px",margin:"0 auto"},levelCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px",textAlign:"center"},levelLabel:{fontSize:"11px",color:"#666",textTransform:"uppercase",marginBottom:"8px"},levelValue:{fontSize:"18px",fontWeight:"600",color:"#fff"},signalMatrix:{padding:"24px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",marginBottom:"24px"},signalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},signalTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",margin:0},signalCount:{fontSize:"14px",fontWeight:"600"},signalGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px"},signalItem:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",borderRadius:"8px",border:"1px solid"},signalIndicator:{width:"10px",height:"10px",borderRadius:"50%"},signalName:{fontSize:"12px",color:"#ddd"},criticalBadge:{marginLeft:"auto",fontSize:"10px",fontWeight:"700",color:"#ffaa00",background:"rgba(255,170,0,0.2)",padding:"2px 6px",borderRadius:"4px"},setupStatus:{display:"flex",alignItems:"center",gap:"12px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.05)"},phaseLabel:{fontSize:"12px",color:"#666"},phaseValue:{fontSize:"14px",fontWeight:"700"},dashboardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"16px"},dashboardTitle:{fontSize:"20px",fontWeight:"700",color:"#fff",margin:0},dateFilter:{display:"flex",alignItems:"center",gap:"12px"},dateInput:{padding:"10px 14px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",fontSize:"13px",cursor:"pointer"},dateSeparator:{color:"#666",fontSize:"13px"},filterButton:{padding:"10px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#888",fontSize:"12px",cursor:"pointer",transition:"all 0.2s"},filterInfo:{fontSize:"13px",color:"#666",marginBottom:"24px",padding:"12px 16px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.05)"},tradeLog:{maxWidth:"1200px",margin:"0 auto"},tradeLogInfo:{fontSize:"13px",color:"#666",marginTop:"8px",marginBottom:"16px"},tradeTable:{width:"100%",borderCollapse:"collapse",marginTop:"16px"},th:{padding:"14px 16px",textAlign:"left",fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",borderBottom:"1px solid rgba(255,255,255,0.1)"},tr:{transition:"background 0.2s"},td:{padding:"14px 16px",fontSize:"14px",borderBottom:"1px solid rgba(255,255,255,0.03)"},gradeBadge:{display:"inline-block",padding:"4px 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"700",color:"#000"},backtestDashboard:{maxWidth:"1400px",margin:"0 auto"}},Tf=document.createElement("style");Tf.textContent=`
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  input:focus {
    border-color: #00ff88 !important;
  }
  button:hover:not(:disabled) {
    transform: translateY(-1px);
  }
  tr:hover {
    background: rgba(255,255,255,0.02);
  }
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255,255,255,0.1);
    height: 8px;
    border-radius: 4px;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    cursor: pointer;
  }
`;document.head.appendChild(Tf);aa.createRoot(document.getElementById("root")).render(t.jsx(Wr.StrictMode,{children:t.jsx(Dg,{})}));
