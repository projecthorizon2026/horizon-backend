(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function Fp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u0={exports:{}},_l={},x0={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=Symbol.for("react.element"),Mp=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Pp=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),Np=Symbol.for("react.provider"),Hp=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Up=Symbol.for("react.memo"),Gp=Symbol.for("react.lazy"),oc=Symbol.iterator;function Yp(t){return t===null||typeof t!="object"?null:(t=oc&&t[oc]||t["@@iterator"],typeof t=="function"?t:null)}var y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m0=Object.assign,b0={};function Lr(t,n,i){this.props=t,this.context=n,this.refs=b0,this.updater=i||y0}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};Lr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v0(){}v0.prototype=Lr.prototype;function cd(t,n,i){this.props=t,this.context=n,this.refs=b0,this.updater=i||y0}var fd=cd.prototype=new v0;fd.constructor=cd;m0(fd,Lr.prototype);fd.isPureReactComponent=!0;var rc=Array.isArray,j0=Object.prototype.hasOwnProperty,pd={current:null},S0={key:!0,ref:!0,__self:!0,__source:!0};function w0(t,n,i){var o,r={},s=null,l=null;if(n!=null)for(o in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(s=""+n.key),n)j0.call(n,o)&&!S0.hasOwnProperty(o)&&(r[o]=n[o]);var d=arguments.length-2;if(d===1)r.children=i;else if(1<d){for(var c=Array(d),g=0;g<d;g++)c[g]=arguments[g+2];r.children=c}if(t&&t.defaultProps)for(o in d=t.defaultProps,d)r[o]===void 0&&(r[o]=d[o]);return{$$typeof:js,type:t,key:s,ref:l,props:r,_owner:pd.current}}function Xp(t,n){return{$$typeof:js,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function gd(t){return typeof t=="object"&&t!==null&&t.$$typeof===js}function Kp(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return n[i]})}var sc=/\/+/g;function Hl(t,n){return typeof t=="object"&&t!==null&&t.key!=null?Kp(""+t.key):n.toString(36)}function $s(t,n,i,o,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case js:case Mp:l=!0}}if(l)return l=t,r=r(l),t=o===""?"."+Hl(l,0):o,rc(r)?(i="",t!=null&&(i=t.replace(sc,"$&/")+"/"),$s(r,n,i,"",function(g){return g})):r!=null&&(gd(r)&&(r=Xp(r,i+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(sc,"$&/")+"/")+t)),n.push(r)),1;if(l=0,o=o===""?".":o+":",rc(t))for(var d=0;d<t.length;d++){s=t[d];var c=o+Hl(s,d);l+=$s(s,n,i,c,r)}else if(c=Yp(t),typeof c=="function")for(t=c.call(t),d=0;!(s=t.next()).done;)s=s.value,c=o+Hl(s,d++),l+=$s(s,n,i,c,r);else if(s==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function Cs(t,n,i){if(t==null)return t;var o=[],r=0;return $s(t,o,"","",function(s){return n.call(i,s,r++)}),o}function Jp(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var ii={current:null},Vs={transition:null},Qp={ReactCurrentDispatcher:ii,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:pd};function k0(){throw Error("act(...) is not supported in production builds of React.")}Jt.Children={map:Cs,forEach:function(t,n,i){Cs(t,function(){n.apply(this,arguments)},i)},count:function(t){var n=0;return Cs(t,function(){n++}),n},toArray:function(t){return Cs(t,function(n){return n})||[]},only:function(t){if(!gd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Jt.Component=Lr;Jt.Fragment=Op;Jt.Profiler=Dp;Jt.PureComponent=cd;Jt.StrictMode=Pp;Jt.Suspense=Vp;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qp;Jt.act=k0;Jt.cloneElement=function(t,n,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=m0({},t.props),r=t.key,s=t.ref,l=t._owner;if(n!=null){if(n.ref!==void 0&&(s=n.ref,l=pd.current),n.key!==void 0&&(r=""+n.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(c in n)j0.call(n,c)&&!S0.hasOwnProperty(c)&&(o[c]=n[c]===void 0&&d!==void 0?d[c]:n[c])}var c=arguments.length-2;if(c===1)o.children=i;else if(1<c){d=Array(c);for(var g=0;g<c;g++)d[g]=arguments[g+2];o.children=d}return{$$typeof:js,type:t.type,key:r,ref:s,props:o,_owner:l}};Jt.createContext=function(t){return t={$$typeof:Hp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Np,_context:t},t.Consumer=t};Jt.createElement=w0;Jt.createFactory=function(t){var n=w0.bind(null,t);return n.type=t,n};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(t){return{$$typeof:$p,render:t}};Jt.isValidElement=gd;Jt.lazy=function(t){return{$$typeof:Gp,_payload:{_status:-1,_result:t},_init:Jp}};Jt.memo=function(t,n){return{$$typeof:Up,type:t,compare:n===void 0?null:n}};Jt.startTransition=function(t){var n=Vs.transition;Vs.transition={};try{t()}finally{Vs.transition=n}};Jt.unstable_act=k0;Jt.useCallback=function(t,n){return ii.current.useCallback(t,n)};Jt.useContext=function(t){return ii.current.useContext(t)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(t){return ii.current.useDeferredValue(t)};Jt.useEffect=function(t,n){return ii.current.useEffect(t,n)};Jt.useId=function(){return ii.current.useId()};Jt.useImperativeHandle=function(t,n,i){return ii.current.useImperativeHandle(t,n,i)};Jt.useInsertionEffect=function(t,n){return ii.current.useInsertionEffect(t,n)};Jt.useLayoutEffect=function(t,n){return ii.current.useLayoutEffect(t,n)};Jt.useMemo=function(t,n){return ii.current.useMemo(t,n)};Jt.useReducer=function(t,n,i){return ii.current.useReducer(t,n,i)};Jt.useRef=function(t){return ii.current.useRef(t)};Jt.useState=function(t){return ii.current.useState(t)};Jt.useSyncExternalStore=function(t,n,i){return ii.current.useSyncExternalStore(t,n,i)};Jt.useTransition=function(){return ii.current.useTransition()};Jt.version="18.3.1";x0.exports=Jt;var I=x0.exports;const Pi=Fp(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=I,qp=Symbol.for("react.element"),eg=Symbol.for("react.fragment"),tg=Object.prototype.hasOwnProperty,ng=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ig={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,n,i){var o,r={},s=null,l=null;i!==void 0&&(s=""+i),n.key!==void 0&&(s=""+n.key),n.ref!==void 0&&(l=n.ref);for(o in n)tg.call(n,o)&&!ig.hasOwnProperty(o)&&(r[o]=n[o]);if(t&&t.defaultProps)for(o in n=t.defaultProps,n)r[o]===void 0&&(r[o]=n[o]);return{$$typeof:qp,type:t,key:s,ref:l,props:r,_owner:ng.current}}_l.Fragment=eg;_l.jsx=_0;_l.jsxs=_0;u0.exports=_l;var e=u0.exports,xa={},C0={exports:{}},wi={},T0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(ne,Ce){var v=ne.length;ne.push(Ce);e:for(;0<v;){var _e=v-1>>>1,le=ne[_e];if(0<r(le,Ce))ne[_e]=Ce,ne[v]=le,v=_e;else break e}}function i(ne){return ne.length===0?null:ne[0]}function o(ne){if(ne.length===0)return null;var Ce=ne[0],v=ne.pop();if(v!==Ce){ne[0]=v;e:for(var _e=0,le=ne.length,Ne=le>>>1;_e<Ne;){var it=2*(_e+1)-1,Rt=ne[it],Ke=it+1,Xe=ne[Ke];if(0>r(Rt,v))Ke<le&&0>r(Xe,Rt)?(ne[_e]=Xe,ne[Ke]=v,_e=Ke):(ne[_e]=Rt,ne[it]=v,_e=it);else if(Ke<le&&0>r(Xe,v))ne[_e]=Xe,ne[Ke]=v,_e=Ke;else break e}}return Ce}function r(ne,Ce){var v=ne.sortIndex-Ce.sortIndex;return v!==0?v:ne.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var c=[],g=[],w=1,y=null,u=3,L=!1,W=!1,Y=!1,Ue=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ne){for(var Ce=i(g);Ce!==null;){if(Ce.callback===null)o(g);else if(Ce.startTime<=ne)o(g),Ce.sortIndex=Ce.expirationTime,n(c,Ce);else break;Ce=i(g)}}function f(ne){if(Y=!1,C(ne),!W)if(i(c)!==null)W=!0,Be(P);else{var Ce=i(g);Ce!==null&&Oe(f,Ce.startTime-ne)}}function P(ne,Ce){W=!1,Y&&(Y=!1,p(E),E=-1),L=!0;var v=u;try{for(C(Ce),y=i(c);y!==null&&(!(y.expirationTime>Ce)||ne&&!j());){var _e=y.callback;if(typeof _e=="function"){y.callback=null,u=y.priorityLevel;var le=_e(y.expirationTime<=Ce);Ce=t.unstable_now(),typeof le=="function"?y.callback=le:y===i(c)&&o(c),C(Ce)}else o(c);y=i(c)}if(y!==null)var Ne=!0;else{var it=i(g);it!==null&&Oe(f,it.startTime-Ce),Ne=!1}return Ne}finally{y=null,u=v,L=!1}}var S=!1,T=null,E=-1,ie=5,U=-1;function j(){return!(t.unstable_now()-U<ie)}function h(){if(T!==null){var ne=t.unstable_now();U=ne;var Ce=!0;try{Ce=T(!0,ne)}finally{Ce?z():(S=!1,T=null)}}else S=!1}var z;if(typeof b=="function")z=function(){b(h)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,_=Ie.port2;Ie.port1.onmessage=h,z=function(){_.postMessage(null)}}else z=function(){Ue(h,0)};function Be(ne){T=ne,S||(S=!0,z())}function Oe(ne,Ce){E=Ue(function(){ne(t.unstable_now())},Ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){W||L||(W=!0,Be(P))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(ne){switch(u){case 1:case 2:case 3:var Ce=3;break;default:Ce=u}var v=u;u=Ce;try{return ne()}finally{u=v}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,Ce){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var v=u;u=ne;try{return Ce()}finally{u=v}},t.unstable_scheduleCallback=function(ne,Ce,v){var _e=t.unstable_now();switch(typeof v=="object"&&v!==null?(v=v.delay,v=typeof v=="number"&&0<v?_e+v:_e):v=_e,ne){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=v+le,ne={id:w++,callback:Ce,priorityLevel:ne,startTime:v,expirationTime:le,sortIndex:-1},v>_e?(ne.sortIndex=v,n(g,ne),i(c)===null&&ne===i(g)&&(Y?(p(E),E=-1):Y=!0,Oe(f,v-_e))):(ne.sortIndex=le,n(c,ne),W||L||(W=!0,Be(P))),ne},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(ne){var Ce=u;return function(){var v=u;u=Ce;try{return ne.apply(this,arguments)}finally{u=v}}}})(z0);T0.exports=z0;var og=T0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=I,Si=og;function Fe(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var R0=new Set,os={};function or(t,n){Cr(t,n),Cr(t+"Capture",n)}function Cr(t,n){for(os[t]=n,t=0;t<n.length;t++)R0.add(n[t])}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ya=Object.prototype.hasOwnProperty,sg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lc={},ac={};function lg(t){return ya.call(ac,t)?!0:ya.call(lc,t)?!1:sg.test(t)?ac[t]=!0:(lc[t]=!0,!1)}function ag(t,n,i,o){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dg(t,n,i,o){if(n===null||typeof n>"u"||ag(t,n,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function oi(t,n,i,o,r,s,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=s,this.removeEmptyString=l}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new oi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Hn[n]=new oi(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new oi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new oi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new oi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new oi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new oi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new oi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new oi(t,5,!1,t.toLowerCase(),null,!1,!1)});var hd=/[\-:]([a-z])/g;function ud(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(hd,ud);Hn[n]=new oi(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(hd,ud);Hn[n]=new oi(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(hd,ud);Hn[n]=new oi(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new oi(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new oi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new oi(t,1,!1,t.toLowerCase(),null,!0,!0)});function xd(t,n,i,o){var r=Hn.hasOwnProperty(n)?Hn[n]:null;(r!==null?r.type!==0:o||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(dg(n,i,r,o)&&(i=null),o||r===null?lg(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):r.mustUseProperty?t[r.propertyName]=i===null?r.type===3?!1:"":i:(n=r.attributeName,o=r.attributeNamespace,i===null?t.removeAttribute(n):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,o?t.setAttributeNS(o,n,i):t.setAttribute(n,i))))}var ho=rg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=Symbol.for("react.element"),ar=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),yd=Symbol.for("react.strict_mode"),ma=Symbol.for("react.profiler"),B0=Symbol.for("react.provider"),I0=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),ba=Symbol.for("react.suspense"),va=Symbol.for("react.suspense_list"),bd=Symbol.for("react.memo"),_o=Symbol.for("react.lazy"),E0=Symbol.for("react.offscreen"),dc=Symbol.iterator;function Fr(t){return t===null||typeof t!="object"?null:(t=dc&&t[dc]||t["@@iterator"],typeof t=="function"?t:null)}var Sn=Object.assign,$l;function Ur(t){if($l===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);$l=n&&n[1]||""}return`
`+$l+t}var Vl=!1;function Ul(t,n){if(!t||Vl)return"";Vl=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(g){var o=g}Reflect.construct(t,[],n)}else{try{n.call()}catch(g){o=g}t.call(n.prototype)}else{try{throw Error()}catch(g){o=g}t()}}catch(g){if(g&&o&&typeof g.stack=="string"){for(var r=g.stack.split(`
`),s=o.stack.split(`
`),l=r.length-1,d=s.length-1;1<=l&&0<=d&&r[l]!==s[d];)d--;for(;1<=l&&0<=d;l--,d--)if(r[l]!==s[d]){if(l!==1||d!==1)do if(l--,d--,0>d||r[l]!==s[d]){var c=`
`+r[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=d);break}}}finally{Vl=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Ur(t):""}function cg(t){switch(t.tag){case 5:return Ur(t.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return t=Ul(t.type,!1),t;case 11:return t=Ul(t.type.render,!1),t;case 1:return t=Ul(t.type,!0),t;default:return""}}function ja(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dr:return"Fragment";case ar:return"Portal";case ma:return"Profiler";case yd:return"StrictMode";case ba:return"Suspense";case va:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I0:return(t.displayName||"Context")+".Consumer";case B0:return(t._context.displayName||"Context")+".Provider";case md:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bd:return n=t.displayName||null,n!==null?n:ja(t.type)||"Memo";case _o:n=t._payload,t=t._init;try{return ja(t(n))}catch{}}return null}function fg(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ja(n);case 8:return n===yd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L0(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function pg(t){var n=L0(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return r.call(this)},set:function(l){o=""+l,s.call(this,l)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(l){o=""+l},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function zs(t){t._valueTracker||(t._valueTracker=pg(t))}function A0(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return t&&(o=L0(t)?t.checked?"true":"false":t.value),t=o,t!==i?(n.setValue(t),!0):!1}function tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sa(t,n){var i=n.checked;return Sn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function cc(t,n){var i=n.defaultValue==null?"":n.defaultValue,o=n.checked!=null?n.checked:n.defaultChecked;i=Po(n.value!=null?n.value:i),t._wrapperState={initialChecked:o,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function W0(t,n){n=n.checked,n!=null&&xd(t,"checked",n,!1)}function wa(t,n){W0(t,n);var i=Po(n.value),o=n.type;if(i!=null)o==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?ka(t,n.type,i):n.hasOwnProperty("defaultValue")&&ka(t,n.type,Po(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function fc(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var o=n.type;if(!(o!=="submit"&&o!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function ka(t,n,i){(n!=="number"||tl(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Gr=Array.isArray;function vr(t,n,i,o){if(t=t.options,n){n={};for(var r=0;r<i.length;r++)n["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=n.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&o&&(t[i].defaultSelected=!0)}else{for(i=""+Po(i),n=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}n!==null||t[r].disabled||(n=t[r])}n!==null&&(n.selected=!0)}}function _a(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Sn({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pc(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(Fe(92));if(Gr(i)){if(1<i.length)throw Error(Fe(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:Po(i)}}function F0(t,n){var i=Po(n.value),o=Po(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),o!=null&&(t.defaultValue=""+o)}function gc(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function M0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ca(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?M0(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rs,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,o,r){MSApp.execUnsafeLocalFunction(function(){return t(n,i,o,r)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Rs=Rs||document.createElement("div"),Rs.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Rs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function rs(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gg=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(t){gg.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Kr[n]=Kr[t]})});function P0(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Kr.hasOwnProperty(t)&&Kr[t]?(""+n).trim():n+"px"}function D0(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var o=i.indexOf("--")===0,r=P0(i,n[i],o);i==="float"&&(i="cssFloat"),o?t.setProperty(i,r):t[i]=r}}var hg=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(t,n){if(n){if(hg[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Fe(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Fe(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Fe(62))}}function za(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ra=null;function vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ba=null,jr=null,Sr=null;function hc(t){if(t=ks(t)){if(typeof Ba!="function")throw Error(Fe(280));var n=t.stateNode;n&&(n=Bl(n),Ba(t.stateNode,t.type,n))}}function N0(t){jr?Sr?Sr.push(t):Sr=[t]:jr=t}function H0(){if(jr){var t=jr,n=Sr;if(Sr=jr=null,hc(t),n)for(t=0;t<n.length;t++)hc(n[t])}}function $0(t,n){return t(n)}function V0(){}var Gl=!1;function U0(t,n,i){if(Gl)return t(n,i);Gl=!0;try{return $0(t,n,i)}finally{Gl=!1,(jr!==null||Sr!==null)&&(V0(),H0())}}function ss(t,n){var i=t.stateNode;if(i===null)return null;var o=Bl(i);if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(Fe(231,n,typeof i));return i}var Ia=!1;if(co)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{Ia=!1}function ug(t,n,i,o,r,s,l,d,c){var g=Array.prototype.slice.call(arguments,3);try{n.apply(i,g)}catch(w){this.onError(w)}}var Jr=!1,nl=null,il=!1,Ea=null,xg={onError:function(t){Jr=!0,nl=t}};function yg(t,n,i,o,r,s,l,d,c){Jr=!1,nl=null,ug.apply(xg,arguments)}function mg(t,n,i,o,r,s,l,d,c){if(yg.apply(this,arguments),Jr){if(Jr){var g=nl;Jr=!1,nl=null}else throw Error(Fe(198));il||(il=!0,Ea=g)}}function rr(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function G0(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function uc(t){if(rr(t)!==t)throw Error(Fe(188))}function bg(t){var n=t.alternate;if(!n){if(n=rr(t),n===null)throw Error(Fe(188));return n!==t?null:t}for(var i=t,o=n;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(o=r.return,o!==null){i=o;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return uc(r),t;if(s===o)return uc(r),n;s=s.sibling}throw Error(Fe(188))}if(i.return!==o.return)i=r,o=s;else{for(var l=!1,d=r.child;d;){if(d===i){l=!0,i=r,o=s;break}if(d===o){l=!0,o=r,i=s;break}d=d.sibling}if(!l){for(d=s.child;d;){if(d===i){l=!0,i=s,o=r;break}if(d===o){l=!0,o=s,i=r;break}d=d.sibling}if(!l)throw Error(Fe(189))}}if(i.alternate!==o)throw Error(Fe(190))}if(i.tag!==3)throw Error(Fe(188));return i.stateNode.current===i?t:n}function Y0(t){return t=bg(t),t!==null?X0(t):null}function X0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=X0(t);if(n!==null)return n;t=t.sibling}return null}var K0=Si.unstable_scheduleCallback,xc=Si.unstable_cancelCallback,vg=Si.unstable_shouldYield,jg=Si.unstable_requestPaint,Cn=Si.unstable_now,Sg=Si.unstable_getCurrentPriorityLevel,jd=Si.unstable_ImmediatePriority,J0=Si.unstable_UserBlockingPriority,ol=Si.unstable_NormalPriority,wg=Si.unstable_LowPriority,Q0=Si.unstable_IdlePriority,Cl=null,qi=null;function kg(t){if(qi&&typeof qi.onCommitFiberRoot=="function")try{qi.onCommitFiberRoot(Cl,t,void 0,(t.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:Tg,_g=Math.log,Cg=Math.LN2;function Tg(t){return t>>>=0,t===0?32:31-(_g(t)/Cg|0)|0}var Bs=64,Is=4194304;function Yr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rl(t,n){var i=t.pendingLanes;if(i===0)return 0;var o=0,r=t.suspendedLanes,s=t.pingedLanes,l=i&268435455;if(l!==0){var d=l&~r;d!==0?o=Yr(d):(s&=l,s!==0&&(o=Yr(s)))}else l=i&~r,l!==0?o=Yr(l):s!==0&&(o=Yr(s));if(o===0)return 0;if(n!==0&&n!==o&&!(n&r)&&(r=o&-o,s=n&-n,r>=s||r===16&&(s&4194240)!==0))return n;if(o&4&&(o|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=o;0<n;)i=31-$i(n),r=1<<i,o|=t[i],n&=~r;return o}function zg(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rg(t,n){for(var i=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-$i(s),d=1<<l,c=r[l];c===-1?(!(d&i)||d&o)&&(r[l]=zg(d,n)):c<=n&&(t.expiredLanes|=d),s&=~d}}function La(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z0(){var t=Bs;return Bs<<=1,!(Bs&4194240)&&(Bs=64),t}function Yl(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function Ss(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-$i(n),t[n]=i}function Bg(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<i;){var r=31-$i(i),s=1<<r;n[r]=0,o[r]=-1,t[r]=-1,i&=~s}}function Sd(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var o=31-$i(i),r=1<<o;r&n|t[o]&n&&(t[o]|=n),i&=~r}}var dn=0;function q0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ef,wd,tf,nf,of,Aa=!1,Es=[],Io=null,Eo=null,Lo=null,ls=new Map,as=new Map,To=[],Ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yc(t,n){switch(t){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":Lo=null;break;case"pointerover":case"pointerout":ls.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":as.delete(n.pointerId)}}function Or(t,n,i,o,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:s,targetContainers:[r]},n!==null&&(n=ks(n),n!==null&&wd(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,r!==null&&n.indexOf(r)===-1&&n.push(r),t)}function Eg(t,n,i,o,r){switch(n){case"focusin":return Io=Or(Io,t,n,i,o,r),!0;case"dragenter":return Eo=Or(Eo,t,n,i,o,r),!0;case"mouseover":return Lo=Or(Lo,t,n,i,o,r),!0;case"pointerover":var s=r.pointerId;return ls.set(s,Or(ls.get(s)||null,t,n,i,o,r)),!0;case"gotpointercapture":return s=r.pointerId,as.set(s,Or(as.get(s)||null,t,n,i,o,r)),!0}return!1}function rf(t){var n=Xo(t.target);if(n!==null){var i=rr(n);if(i!==null){if(n=i.tag,n===13){if(n=G0(i),n!==null){t.blockedOn=n,of(t.priority,function(){tf(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Us(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Wa(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);Ra=o,i.target.dispatchEvent(o),Ra=null}else return n=ks(i),n!==null&&wd(n),t.blockedOn=i,!1;n.shift()}return!0}function mc(t,n,i){Us(t)&&i.delete(n)}function Lg(){Aa=!1,Io!==null&&Us(Io)&&(Io=null),Eo!==null&&Us(Eo)&&(Eo=null),Lo!==null&&Us(Lo)&&(Lo=null),ls.forEach(mc),as.forEach(mc)}function Pr(t,n){t.blockedOn===n&&(t.blockedOn=null,Aa||(Aa=!0,Si.unstable_scheduleCallback(Si.unstable_NormalPriority,Lg)))}function ds(t){function n(r){return Pr(r,t)}if(0<Es.length){Pr(Es[0],t);for(var i=1;i<Es.length;i++){var o=Es[i];o.blockedOn===t&&(o.blockedOn=null)}}for(Io!==null&&Pr(Io,t),Eo!==null&&Pr(Eo,t),Lo!==null&&Pr(Lo,t),ls.forEach(n),as.forEach(n),i=0;i<To.length;i++)o=To[i],o.blockedOn===t&&(o.blockedOn=null);for(;0<To.length&&(i=To[0],i.blockedOn===null);)rf(i),i.blockedOn===null&&To.shift()}var wr=ho.ReactCurrentBatchConfig,sl=!0;function Ag(t,n,i,o){var r=dn,s=wr.transition;wr.transition=null;try{dn=1,kd(t,n,i,o)}finally{dn=r,wr.transition=s}}function Wg(t,n,i,o){var r=dn,s=wr.transition;wr.transition=null;try{dn=4,kd(t,n,i,o)}finally{dn=r,wr.transition=s}}function kd(t,n,i,o){if(sl){var r=Wa(t,n,i,o);if(r===null)ia(t,n,o,ll,i),yc(t,o);else if(Eg(r,t,n,i,o))o.stopPropagation();else if(yc(t,o),n&4&&-1<Ig.indexOf(t)){for(;r!==null;){var s=ks(r);if(s!==null&&ef(s),s=Wa(t,n,i,o),s===null&&ia(t,n,o,ll,i),s===r)break;r=s}r!==null&&o.stopPropagation()}else ia(t,n,o,null,i)}}var ll=null;function Wa(t,n,i,o){if(ll=null,t=vd(o),t=Xo(t),t!==null)if(n=rr(t),n===null)t=null;else if(i=n.tag,i===13){if(t=G0(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return ll=t,null}function sf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sg()){case jd:return 1;case J0:return 4;case ol:case wg:return 16;case Q0:return 536870912;default:return 16}default:return 16}}var Ro=null,_d=null,Gs=null;function lf(){if(Gs)return Gs;var t,n=_d,i=n.length,o,r="value"in Ro?Ro.value:Ro.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var l=i-t;for(o=1;o<=l&&n[i-o]===r[s-o];o++);return Gs=r.slice(t,1<o?1-o:void 0)}function Ys(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ls(){return!0}function bc(){return!1}function ki(t){function n(i,o,r,s,l){this._reactName=i,this._targetInst=r,this.type=o,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(i=t[d],this[d]=i?i(s):s[d]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ls:bc,this.isPropagationStopped=bc,this}return Sn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),n}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cd=ki(Ar),ws=Sn({},Ar,{view:0,detail:0}),Fg=ki(ws),Xl,Kl,Dr,Tl=Sn({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dr&&(Dr&&t.type==="mousemove"?(Xl=t.screenX-Dr.screenX,Kl=t.screenY-Dr.screenY):Kl=Xl=0,Dr=t),Xl)},movementY:function(t){return"movementY"in t?t.movementY:Kl}}),vc=ki(Tl),Mg=Sn({},Tl,{dataTransfer:0}),Og=ki(Mg),Pg=Sn({},ws,{relatedTarget:0}),Jl=ki(Pg),Dg=Sn({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Ng=ki(Dg),Hg=Sn({},Ar,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$g=ki(Hg),Vg=Sn({},Ar,{data:0}),jc=ki(Vg),Ug={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xg(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Yg[t])?!!n[t]:!1}function Td(){return Xg}var Kg=Sn({},ws,{key:function(t){if(t.key){var n=Ug[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ys(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(t){return t.type==="keypress"?Ys(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ys(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jg=ki(Kg),Qg=Sn({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sc=ki(Qg),Zg=Sn({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),qg=ki(Zg),eh=Sn({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),th=ki(eh),nh=Sn({},Tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ih=ki(nh),oh=[9,13,27,32],zd=co&&"CompositionEvent"in window,Qr=null;co&&"documentMode"in document&&(Qr=document.documentMode);var rh=co&&"TextEvent"in window&&!Qr,af=co&&(!zd||Qr&&8<Qr&&11>=Qr),wc=" ",kc=!1;function df(t,n){switch(t){case"keyup":return oh.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cr=!1;function sh(t,n){switch(t){case"compositionend":return cf(n);case"keypress":return n.which!==32?null:(kc=!0,wc);case"textInput":return t=n.data,t===wc&&kc?null:t;default:return null}}function lh(t,n){if(cr)return t==="compositionend"||!zd&&df(t,n)?(t=lf(),Gs=_d=Ro=null,cr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return af&&n.locale!=="ko"?null:n.data;default:return null}}var ah={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!ah[t.type]:n==="textarea"}function ff(t,n,i,o){N0(o),n=al(n,"onChange"),0<n.length&&(i=new Cd("onChange","change",null,i,o),t.push({event:i,listeners:n}))}var Zr=null,cs=null;function dh(t){Sf(t,0)}function zl(t){var n=gr(t);if(A0(n))return t}function ch(t,n){if(t==="change")return n}var pf=!1;if(co){var Ql;if(co){var Zl="oninput"in document;if(!Zl){var Cc=document.createElement("div");Cc.setAttribute("oninput","return;"),Zl=typeof Cc.oninput=="function"}Ql=Zl}else Ql=!1;pf=Ql&&(!document.documentMode||9<document.documentMode)}function Tc(){Zr&&(Zr.detachEvent("onpropertychange",gf),cs=Zr=null)}function gf(t){if(t.propertyName==="value"&&zl(cs)){var n=[];ff(n,cs,t,vd(t)),U0(dh,n)}}function fh(t,n,i){t==="focusin"?(Tc(),Zr=n,cs=i,Zr.attachEvent("onpropertychange",gf)):t==="focusout"&&Tc()}function ph(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zl(cs)}function gh(t,n){if(t==="click")return zl(n)}function hh(t,n){if(t==="input"||t==="change")return zl(n)}function uh(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ui=typeof Object.is=="function"?Object.is:uh;function fs(t,n){if(Ui(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var r=i[o];if(!ya.call(n,r)||!Ui(t[r],n[r]))return!1}return!0}function zc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rc(t,n){var i=zc(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=n&&o>=n)return{node:i,offset:n-t};t=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=zc(i)}}function hf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?hf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function uf(){for(var t=window,n=tl();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=tl(t.document)}return n}function Rd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function xh(t){var n=uf(),i=t.focusedElem,o=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&hf(i.ownerDocument.documentElement,i)){if(o!==null&&Rd(i)){if(n=o.start,t=o.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var r=i.textContent.length,s=Math.min(o.start,r);o=o.end===void 0?s:Math.min(o.end,r),!t.extend&&s>o&&(r=o,o=s,s=r),r=Rc(i,s);var l=Rc(i,o);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(r.node,r.offset),t.removeAllRanges(),s>o?(t.addRange(n),t.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yh=co&&"documentMode"in document&&11>=document.documentMode,fr=null,Fa=null,qr=null,Ma=!1;function Bc(t,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ma||fr==null||fr!==tl(o)||(o=fr,"selectionStart"in o&&Rd(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),qr&&fs(qr,o)||(qr=o,o=al(Fa,"onSelect"),0<o.length&&(n=new Cd("onSelect","select",null,n,i),t.push({event:n,listeners:o}),n.target=fr)))}function As(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var pr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},ql={},xf={};co&&(xf=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function Rl(t){if(ql[t])return ql[t];if(!pr[t])return t;var n=pr[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in xf)return ql[t]=n[i];return t}var yf=Rl("animationend"),mf=Rl("animationiteration"),bf=Rl("animationstart"),vf=Rl("transitionend"),jf=new Map,Ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(t,n){jf.set(t,n),or(n,[t])}for(var ea=0;ea<Ic.length;ea++){var ta=Ic[ea],mh=ta.toLowerCase(),bh=ta[0].toUpperCase()+ta.slice(1);No(mh,"on"+bh)}No(yf,"onAnimationEnd");No(mf,"onAnimationIteration");No(bf,"onAnimationStart");No("dblclick","onDoubleClick");No("focusin","onFocus");No("focusout","onBlur");No(vf,"onTransitionEnd");Cr("onMouseEnter",["mouseout","mouseover"]);Cr("onMouseLeave",["mouseout","mouseover"]);Cr("onPointerEnter",["pointerout","pointerover"]);Cr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Ec(t,n,i){var o=t.type||"unknown-event";t.currentTarget=i,mg(o,n,void 0,t),t.currentTarget=null}function Sf(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],r=o.event;o=o.listeners;e:{var s=void 0;if(n)for(var l=o.length-1;0<=l;l--){var d=o[l],c=d.instance,g=d.currentTarget;if(d=d.listener,c!==s&&r.isPropagationStopped())break e;Ec(r,d,g),s=c}else for(l=0;l<o.length;l++){if(d=o[l],c=d.instance,g=d.currentTarget,d=d.listener,c!==s&&r.isPropagationStopped())break e;Ec(r,d,g),s=c}}}if(il)throw t=Ea,il=!1,Ea=null,t}function yn(t,n){var i=n[Ha];i===void 0&&(i=n[Ha]=new Set);var o=t+"__bubble";i.has(o)||(wf(n,t,2,!1),i.add(o))}function na(t,n,i){var o=0;n&&(o|=4),wf(i,t,o,n)}var Ws="_reactListening"+Math.random().toString(36).slice(2);function ps(t){if(!t[Ws]){t[Ws]=!0,R0.forEach(function(i){i!=="selectionchange"&&(vh.has(i)||na(i,!1,t),na(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ws]||(n[Ws]=!0,na("selectionchange",!1,n))}}function wf(t,n,i,o){switch(sf(n)){case 1:var r=Ag;break;case 4:r=Wg;break;default:r=kd}i=r.bind(null,n,i,t),r=void 0,!Ia||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(n,i,{capture:!0,passive:r}):t.addEventListener(n,i,!0):r!==void 0?t.addEventListener(n,i,{passive:r}):t.addEventListener(n,i,!1)}function ia(t,n,i,o,r){var s=o;if(!(n&1)&&!(n&2)&&o!==null)e:for(;;){if(o===null)return;var l=o.tag;if(l===3||l===4){var d=o.stateNode.containerInfo;if(d===r||d.nodeType===8&&d.parentNode===r)break;if(l===4)for(l=o.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;l=l.return}for(;d!==null;){if(l=Xo(d),l===null)return;if(c=l.tag,c===5||c===6){o=s=l;continue e}d=d.parentNode}}o=o.return}U0(function(){var g=s,w=vd(i),y=[];e:{var u=jf.get(t);if(u!==void 0){var L=Cd,W=t;switch(t){case"keypress":if(Ys(i)===0)break e;case"keydown":case"keyup":L=Jg;break;case"focusin":W="focus",L=Jl;break;case"focusout":W="blur",L=Jl;break;case"beforeblur":case"afterblur":L=Jl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=Og;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=qg;break;case yf:case mf:case bf:L=Ng;break;case vf:L=th;break;case"scroll":L=Fg;break;case"wheel":L=ih;break;case"copy":case"cut":case"paste":L=$g;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=Sc}var Y=(n&4)!==0,Ue=!Y&&t==="scroll",p=Y?u!==null?u+"Capture":null:u;Y=[];for(var b=g,C;b!==null;){C=b;var f=C.stateNode;if(C.tag===5&&f!==null&&(C=f,p!==null&&(f=ss(b,p),f!=null&&Y.push(gs(b,f,C)))),Ue)break;b=b.return}0<Y.length&&(u=new L(u,W,null,i,w),y.push({event:u,listeners:Y}))}}if(!(n&7)){e:{if(u=t==="mouseover"||t==="pointerover",L=t==="mouseout"||t==="pointerout",u&&i!==Ra&&(W=i.relatedTarget||i.fromElement)&&(Xo(W)||W[fo]))break e;if((L||u)&&(u=w.window===w?w:(u=w.ownerDocument)?u.defaultView||u.parentWindow:window,L?(W=i.relatedTarget||i.toElement,L=g,W=W?Xo(W):null,W!==null&&(Ue=rr(W),W!==Ue||W.tag!==5&&W.tag!==6)&&(W=null)):(L=null,W=g),L!==W)){if(Y=vc,f="onMouseLeave",p="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(Y=Sc,f="onPointerLeave",p="onPointerEnter",b="pointer"),Ue=L==null?u:gr(L),C=W==null?u:gr(W),u=new Y(f,b+"leave",L,i,w),u.target=Ue,u.relatedTarget=C,f=null,Xo(w)===g&&(Y=new Y(p,b+"enter",W,i,w),Y.target=C,Y.relatedTarget=Ue,f=Y),Ue=f,L&&W)t:{for(Y=L,p=W,b=0,C=Y;C;C=lr(C))b++;for(C=0,f=p;f;f=lr(f))C++;for(;0<b-C;)Y=lr(Y),b--;for(;0<C-b;)p=lr(p),C--;for(;b--;){if(Y===p||p!==null&&Y===p.alternate)break t;Y=lr(Y),p=lr(p)}Y=null}else Y=null;L!==null&&Lc(y,u,L,Y,!1),W!==null&&Ue!==null&&Lc(y,Ue,W,Y,!0)}}e:{if(u=g?gr(g):window,L=u.nodeName&&u.nodeName.toLowerCase(),L==="select"||L==="input"&&u.type==="file")var P=ch;else if(_c(u))if(pf)P=hh;else{P=ph;var S=fh}else(L=u.nodeName)&&L.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(P=gh);if(P&&(P=P(t,g))){ff(y,P,i,w);break e}S&&S(t,u,g),t==="focusout"&&(S=u._wrapperState)&&S.controlled&&u.type==="number"&&ka(u,"number",u.value)}switch(S=g?gr(g):window,t){case"focusin":(_c(S)||S.contentEditable==="true")&&(fr=S,Fa=g,qr=null);break;case"focusout":qr=Fa=fr=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,Bc(y,i,w);break;case"selectionchange":if(yh)break;case"keydown":case"keyup":Bc(y,i,w)}var T;if(zd)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else cr?df(t,i)&&(E="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(E="onCompositionStart");E&&(af&&i.locale!=="ko"&&(cr||E!=="onCompositionStart"?E==="onCompositionEnd"&&cr&&(T=lf()):(Ro=w,_d="value"in Ro?Ro.value:Ro.textContent,cr=!0)),S=al(g,E),0<S.length&&(E=new jc(E,t,null,i,w),y.push({event:E,listeners:S}),T?E.data=T:(T=cf(i),T!==null&&(E.data=T)))),(T=rh?sh(t,i):lh(t,i))&&(g=al(g,"onBeforeInput"),0<g.length&&(w=new jc("onBeforeInput","beforeinput",null,i,w),y.push({event:w,listeners:g}),w.data=T))}Sf(y,n)})}function gs(t,n,i){return{instance:t,listener:n,currentTarget:i}}function al(t,n){for(var i=n+"Capture",o=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ss(t,i),s!=null&&o.unshift(gs(t,s,r)),s=ss(t,n),s!=null&&o.push(gs(t,s,r))),t=t.return}return o}function lr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lc(t,n,i,o,r){for(var s=n._reactName,l=[];i!==null&&i!==o;){var d=i,c=d.alternate,g=d.stateNode;if(c!==null&&c===o)break;d.tag===5&&g!==null&&(d=g,r?(c=ss(i,s),c!=null&&l.unshift(gs(i,c,d))):r||(c=ss(i,s),c!=null&&l.push(gs(i,c,d)))),i=i.return}l.length!==0&&t.push({event:n,listeners:l})}var jh=/\r\n?/g,Sh=/\u0000|\uFFFD/g;function Ac(t){return(typeof t=="string"?t:""+t).replace(jh,`
`).replace(Sh,"")}function Fs(t,n,i){if(n=Ac(n),Ac(t)!==n&&i)throw Error(Fe(425))}function dl(){}var Oa=null,Pa=null;function Da(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Na=typeof setTimeout=="function"?setTimeout:void 0,wh=typeof clearTimeout=="function"?clearTimeout:void 0,Wc=typeof Promise=="function"?Promise:void 0,kh=typeof queueMicrotask=="function"?queueMicrotask:typeof Wc<"u"?function(t){return Wc.resolve(null).then(t).catch(_h)}:Na;function _h(t){setTimeout(function(){throw t})}function oa(t,n){var i=n,o=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(o===0){t.removeChild(r),ds(n);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=r}while(i);ds(n)}function Ao(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Fc(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),Zi="__reactFiber$"+Wr,hs="__reactProps$"+Wr,fo="__reactContainer$"+Wr,Ha="__reactEvents$"+Wr,Ch="__reactListeners$"+Wr,Th="__reactHandles$"+Wr;function Xo(t){var n=t[Zi];if(n)return n;for(var i=t.parentNode;i;){if(n=i[fo]||i[Zi]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Fc(t);t!==null;){if(i=t[Zi])return i;t=Fc(t)}return n}t=i,i=t.parentNode}return null}function ks(t){return t=t[Zi]||t[fo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Bl(t){return t[hs]||null}var $a=[],hr=-1;function Ho(t){return{current:t}}function mn(t){0>hr||(t.current=$a[hr],$a[hr]=null,hr--)}function un(t,n){hr++,$a[hr]=t.current,t.current=n}var Do={},Kn=Ho(Do),ui=Ho(!1),qo=Do;function Tr(t,n){var i=t.type.contextTypes;if(!i)return Do;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===n)return o.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=n[s];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=r),r}function xi(t){return t=t.childContextTypes,t!=null}function cl(){mn(ui),mn(Kn)}function Mc(t,n,i){if(Kn.current!==Do)throw Error(Fe(168));un(Kn,n),un(ui,i)}function kf(t,n,i){var o=t.stateNode;if(n=n.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var r in o)if(!(r in n))throw Error(Fe(108,fg(t)||"Unknown",r));return Sn({},i,o)}function fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Do,qo=Kn.current,un(Kn,t),un(ui,ui.current),!0}function Oc(t,n,i){var o=t.stateNode;if(!o)throw Error(Fe(169));i?(t=kf(t,n,qo),o.__reactInternalMemoizedMergedChildContext=t,mn(ui),mn(Kn),un(Kn,t)):mn(ui),un(ui,i)}var ro=null,Il=!1,ra=!1;function _f(t){ro===null?ro=[t]:ro.push(t)}function zh(t){Il=!0,_f(t)}function $o(){if(!ra&&ro!==null){ra=!0;var t=0,n=dn;try{var i=ro;for(dn=1;t<i.length;t++){var o=i[t];do o=o(!0);while(o!==null)}ro=null,Il=!1}catch(r){throw ro!==null&&(ro=ro.slice(t+1)),K0(jd,$o),r}finally{dn=n,ra=!1}}return null}var ur=[],xr=0,pl=null,gl=0,Ri=[],Bi=0,er=null,so=1,lo="";function Go(t,n){ur[xr++]=gl,ur[xr++]=pl,pl=t,gl=n}function Cf(t,n,i){Ri[Bi++]=so,Ri[Bi++]=lo,Ri[Bi++]=er,er=t;var o=so;t=lo;var r=32-$i(o)-1;o&=~(1<<r),i+=1;var s=32-$i(n)+r;if(30<s){var l=r-r%5;s=(o&(1<<l)-1).toString(32),o>>=l,r-=l,so=1<<32-$i(n)+r|i<<r|o,lo=s+t}else so=1<<s|i<<r|o,lo=t}function Bd(t){t.return!==null&&(Go(t,1),Cf(t,1,0))}function Id(t){for(;t===pl;)pl=ur[--xr],ur[xr]=null,gl=ur[--xr],ur[xr]=null;for(;t===er;)er=Ri[--Bi],Ri[Bi]=null,lo=Ri[--Bi],Ri[Bi]=null,so=Ri[--Bi],Ri[Bi]=null}var ji=null,vi=null,bn=!1,Hi=null;function Tf(t,n){var i=Ii(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function Pc(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,ji=t,vi=Ao(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,ji=t,vi=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=er!==null?{id:so,overflow:lo}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=Ii(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,ji=t,vi=null,!0):!1;default:return!1}}function Va(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ua(t){if(bn){var n=vi;if(n){var i=n;if(!Pc(t,n)){if(Va(t))throw Error(Fe(418));n=Ao(i.nextSibling);var o=ji;n&&Pc(t,n)?Tf(o,i):(t.flags=t.flags&-4097|2,bn=!1,ji=t)}}else{if(Va(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,bn=!1,ji=t}}}function Dc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ji=t}function Ms(t){if(t!==ji)return!1;if(!bn)return Dc(t),bn=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Da(t.type,t.memoizedProps)),n&&(n=vi)){if(Va(t))throw zf(),Error(Fe(418));for(;n;)Tf(t,n),n=Ao(n.nextSibling)}if(Dc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){vi=Ao(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}vi=null}}else vi=ji?Ao(t.stateNode.nextSibling):null;return!0}function zf(){for(var t=vi;t;)t=Ao(t.nextSibling)}function zr(){vi=ji=null,bn=!1}function Ed(t){Hi===null?Hi=[t]:Hi.push(t)}var Rh=ho.ReactCurrentBatchConfig;function Nr(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(Fe(309));var o=i.stateNode}if(!o)throw Error(Fe(147,t));var r=o,s=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===s?n.ref:(n=function(l){var d=r.refs;l===null?delete d[s]:d[s]=l},n._stringRef=s,n)}if(typeof t!="string")throw Error(Fe(284));if(!i._owner)throw Error(Fe(290,t))}return t}function Os(t,n){throw t=Object.prototype.toString.call(n),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Nc(t){var n=t._init;return n(t._payload)}function Rf(t){function n(p,b){if(t){var C=p.deletions;C===null?(p.deletions=[b],p.flags|=16):C.push(b)}}function i(p,b){if(!t)return null;for(;b!==null;)n(p,b),b=b.sibling;return null}function o(p,b){for(p=new Map;b!==null;)b.key!==null?p.set(b.key,b):p.set(b.index,b),b=b.sibling;return p}function r(p,b){return p=Oo(p,b),p.index=0,p.sibling=null,p}function s(p,b,C){return p.index=C,t?(C=p.alternate,C!==null?(C=C.index,C<b?(p.flags|=2,b):C):(p.flags|=2,b)):(p.flags|=1048576,b)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function d(p,b,C,f){return b===null||b.tag!==6?(b=pa(C,p.mode,f),b.return=p,b):(b=r(b,C),b.return=p,b)}function c(p,b,C,f){var P=C.type;return P===dr?w(p,b,C.props.children,f,C.key):b!==null&&(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===_o&&Nc(P)===b.type)?(f=r(b,C.props),f.ref=Nr(p,b,C),f.return=p,f):(f=el(C.type,C.key,C.props,null,p.mode,f),f.ref=Nr(p,b,C),f.return=p,f)}function g(p,b,C,f){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=ga(C,p.mode,f),b.return=p,b):(b=r(b,C.children||[]),b.return=p,b)}function w(p,b,C,f,P){return b===null||b.tag!==7?(b=Zo(C,p.mode,f,P),b.return=p,b):(b=r(b,C),b.return=p,b)}function y(p,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=pa(""+b,p.mode,C),b.return=p,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ts:return C=el(b.type,b.key,b.props,null,p.mode,C),C.ref=Nr(p,null,b),C.return=p,C;case ar:return b=ga(b,p.mode,C),b.return=p,b;case _o:var f=b._init;return y(p,f(b._payload),C)}if(Gr(b)||Fr(b))return b=Zo(b,p.mode,C,null),b.return=p,b;Os(p,b)}return null}function u(p,b,C,f){var P=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return P!==null?null:d(p,b,""+C,f);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ts:return C.key===P?c(p,b,C,f):null;case ar:return C.key===P?g(p,b,C,f):null;case _o:return P=C._init,u(p,b,P(C._payload),f)}if(Gr(C)||Fr(C))return P!==null?null:w(p,b,C,f,null);Os(p,C)}return null}function L(p,b,C,f,P){if(typeof f=="string"&&f!==""||typeof f=="number")return p=p.get(C)||null,d(b,p,""+f,P);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ts:return p=p.get(f.key===null?C:f.key)||null,c(b,p,f,P);case ar:return p=p.get(f.key===null?C:f.key)||null,g(b,p,f,P);case _o:var S=f._init;return L(p,b,C,S(f._payload),P)}if(Gr(f)||Fr(f))return p=p.get(C)||null,w(b,p,f,P,null);Os(b,f)}return null}function W(p,b,C,f){for(var P=null,S=null,T=b,E=b=0,ie=null;T!==null&&E<C.length;E++){T.index>E?(ie=T,T=null):ie=T.sibling;var U=u(p,T,C[E],f);if(U===null){T===null&&(T=ie);break}t&&T&&U.alternate===null&&n(p,T),b=s(U,b,E),S===null?P=U:S.sibling=U,S=U,T=ie}if(E===C.length)return i(p,T),bn&&Go(p,E),P;if(T===null){for(;E<C.length;E++)T=y(p,C[E],f),T!==null&&(b=s(T,b,E),S===null?P=T:S.sibling=T,S=T);return bn&&Go(p,E),P}for(T=o(p,T);E<C.length;E++)ie=L(T,p,E,C[E],f),ie!==null&&(t&&ie.alternate!==null&&T.delete(ie.key===null?E:ie.key),b=s(ie,b,E),S===null?P=ie:S.sibling=ie,S=ie);return t&&T.forEach(function(j){return n(p,j)}),bn&&Go(p,E),P}function Y(p,b,C,f){var P=Fr(C);if(typeof P!="function")throw Error(Fe(150));if(C=P.call(C),C==null)throw Error(Fe(151));for(var S=P=null,T=b,E=b=0,ie=null,U=C.next();T!==null&&!U.done;E++,U=C.next()){T.index>E?(ie=T,T=null):ie=T.sibling;var j=u(p,T,U.value,f);if(j===null){T===null&&(T=ie);break}t&&T&&j.alternate===null&&n(p,T),b=s(j,b,E),S===null?P=j:S.sibling=j,S=j,T=ie}if(U.done)return i(p,T),bn&&Go(p,E),P;if(T===null){for(;!U.done;E++,U=C.next())U=y(p,U.value,f),U!==null&&(b=s(U,b,E),S===null?P=U:S.sibling=U,S=U);return bn&&Go(p,E),P}for(T=o(p,T);!U.done;E++,U=C.next())U=L(T,p,E,U.value,f),U!==null&&(t&&U.alternate!==null&&T.delete(U.key===null?E:U.key),b=s(U,b,E),S===null?P=U:S.sibling=U,S=U);return t&&T.forEach(function(h){return n(p,h)}),bn&&Go(p,E),P}function Ue(p,b,C,f){if(typeof C=="object"&&C!==null&&C.type===dr&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ts:e:{for(var P=C.key,S=b;S!==null;){if(S.key===P){if(P=C.type,P===dr){if(S.tag===7){i(p,S.sibling),b=r(S,C.props.children),b.return=p,p=b;break e}}else if(S.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===_o&&Nc(P)===S.type){i(p,S.sibling),b=r(S,C.props),b.ref=Nr(p,S,C),b.return=p,p=b;break e}i(p,S);break}else n(p,S);S=S.sibling}C.type===dr?(b=Zo(C.props.children,p.mode,f,C.key),b.return=p,p=b):(f=el(C.type,C.key,C.props,null,p.mode,f),f.ref=Nr(p,b,C),f.return=p,p=f)}return l(p);case ar:e:{for(S=C.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){i(p,b.sibling),b=r(b,C.children||[]),b.return=p,p=b;break e}else{i(p,b);break}else n(p,b);b=b.sibling}b=ga(C,p.mode,f),b.return=p,p=b}return l(p);case _o:return S=C._init,Ue(p,b,S(C._payload),f)}if(Gr(C))return W(p,b,C,f);if(Fr(C))return Y(p,b,C,f);Os(p,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(i(p,b.sibling),b=r(b,C),b.return=p,p=b):(i(p,b),b=pa(C,p.mode,f),b.return=p,p=b),l(p)):i(p,b)}return Ue}var Rr=Rf(!0),Bf=Rf(!1),hl=Ho(null),ul=null,yr=null,Ld=null;function Ad(){Ld=yr=ul=null}function Wd(t){var n=hl.current;mn(hl),t._currentValue=n}function Ga(t,n,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===i)break;t=t.return}}function kr(t,n){ul=t,Ld=yr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(hi=!0),t.firstContext=null)}function Li(t){var n=t._currentValue;if(Ld!==t)if(t={context:t,memoizedValue:n,next:null},yr===null){if(ul===null)throw Error(Fe(308));yr=t,ul.dependencies={lanes:0,firstContext:t}}else yr=yr.next=t;return n}var Ko=null;function Fd(t){Ko===null?Ko=[t]:Ko.push(t)}function If(t,n,i,o){var r=n.interleaved;return r===null?(i.next=i,Fd(n)):(i.next=r.next,r.next=i),n.interleaved=i,po(t,o)}function po(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Co=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ef(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ao(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Wo(t,n,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,on&2){var r=o.pending;return r===null?n.next=n:(n.next=r.next,r.next=n),o.pending=n,po(t,i)}return r=o.interleaved,r===null?(n.next=n,Fd(o)):(n.next=r.next,r.next=n),o.interleaved=n,po(t,i)}function Xs(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var o=n.lanes;o&=t.pendingLanes,i|=o,n.lanes=i,Sd(t,i)}}function Hc(t,n){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var r=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var l={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?r=s=l:s=s.next=l,i=i.next}while(i!==null);s===null?r=s=n:s=s.next=n}else r=s=n;i={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:o.shared,effects:o.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function xl(t,n,i,o){var r=t.updateQueue;Co=!1;var s=r.firstBaseUpdate,l=r.lastBaseUpdate,d=r.shared.pending;if(d!==null){r.shared.pending=null;var c=d,g=c.next;c.next=null,l===null?s=g:l.next=g,l=c;var w=t.alternate;w!==null&&(w=w.updateQueue,d=w.lastBaseUpdate,d!==l&&(d===null?w.firstBaseUpdate=g:d.next=g,w.lastBaseUpdate=c))}if(s!==null){var y=r.baseState;l=0,w=g=c=null,d=s;do{var u=d.lane,L=d.eventTime;if((o&u)===u){w!==null&&(w=w.next={eventTime:L,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var W=t,Y=d;switch(u=n,L=i,Y.tag){case 1:if(W=Y.payload,typeof W=="function"){y=W.call(L,y,u);break e}y=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=Y.payload,u=typeof W=="function"?W.call(L,y,u):W,u==null)break e;y=Sn({},y,u);break e;case 2:Co=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,u=r.effects,u===null?r.effects=[d]:u.push(d))}else L={eventTime:L,lane:u,tag:d.tag,payload:d.payload,callback:d.callback,next:null},w===null?(g=w=L,c=y):w=w.next=L,l|=u;if(d=d.next,d===null){if(d=r.shared.pending,d===null)break;u=d,d=u.next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}while(!0);if(w===null&&(c=y),r.baseState=c,r.firstBaseUpdate=g,r.lastBaseUpdate=w,n=r.shared.interleaved,n!==null){r=n;do l|=r.lane,r=r.next;while(r!==n)}else s===null&&(r.shared.lanes=0);nr|=l,t.lanes=l,t.memoizedState=y}}function $c(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var o=t[n],r=o.callback;if(r!==null){if(o.callback=null,o=i,typeof r!="function")throw Error(Fe(191,r));r.call(o)}}}var _s={},eo=Ho(_s),us=Ho(_s),xs=Ho(_s);function Jo(t){if(t===_s)throw Error(Fe(174));return t}function Od(t,n){switch(un(xs,n),un(us,t),un(eo,_s),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ca(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Ca(n,t)}mn(eo),un(eo,n)}function Br(){mn(eo),mn(us),mn(xs)}function Lf(t){Jo(xs.current);var n=Jo(eo.current),i=Ca(n,t.type);n!==i&&(un(us,t),un(eo,i))}function Pd(t){us.current===t&&(mn(eo),mn(us))}var vn=Ho(0);function yl(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var sa=[];function Dd(){for(var t=0;t<sa.length;t++)sa[t]._workInProgressVersionPrimary=null;sa.length=0}var Ks=ho.ReactCurrentDispatcher,la=ho.ReactCurrentBatchConfig,tr=0,jn=null,Ln=null,Mn=null,ml=!1,es=!1,ys=0,Bh=0;function Gn(){throw Error(Fe(321))}function Nd(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Ui(t[i],n[i]))return!1;return!0}function Hd(t,n,i,o,r,s){if(tr=s,jn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ks.current=t===null||t.memoizedState===null?Ah:Wh,t=i(o,r),es){s=0;do{if(es=!1,ys=0,25<=s)throw Error(Fe(301));s+=1,Mn=Ln=null,n.updateQueue=null,Ks.current=Fh,t=i(o,r)}while(es)}if(Ks.current=bl,n=Ln!==null&&Ln.next!==null,tr=0,Mn=Ln=jn=null,ml=!1,n)throw Error(Fe(300));return t}function $d(){var t=ys!==0;return ys=0,t}function Qi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?jn.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function Ai(){if(Ln===null){var t=jn.alternate;t=t!==null?t.memoizedState:null}else t=Ln.next;var n=Mn===null?jn.memoizedState:Mn.next;if(n!==null)Mn=n,Ln=t;else{if(t===null)throw Error(Fe(310));Ln=t,t={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Mn===null?jn.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function ms(t,n){return typeof n=="function"?n(t):n}function aa(t){var n=Ai(),i=n.queue;if(i===null)throw Error(Fe(311));i.lastRenderedReducer=t;var o=Ln,r=o.baseQueue,s=i.pending;if(s!==null){if(r!==null){var l=r.next;r.next=s.next,s.next=l}o.baseQueue=r=s,i.pending=null}if(r!==null){s=r.next,o=o.baseState;var d=l=null,c=null,g=s;do{var w=g.lane;if((tr&w)===w)c!==null&&(c=c.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),o=g.hasEagerState?g.eagerState:t(o,g.action);else{var y={lane:w,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};c===null?(d=c=y,l=o):c=c.next=y,jn.lanes|=w,nr|=w}g=g.next}while(g!==null&&g!==s);c===null?l=o:c.next=d,Ui(o,n.memoizedState)||(hi=!0),n.memoizedState=o,n.baseState=l,n.baseQueue=c,i.lastRenderedState=o}if(t=i.interleaved,t!==null){r=t;do s=r.lane,jn.lanes|=s,nr|=s,r=r.next;while(r!==t)}else r===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function da(t){var n=Ai(),i=n.queue;if(i===null)throw Error(Fe(311));i.lastRenderedReducer=t;var o=i.dispatch,r=i.pending,s=n.memoizedState;if(r!==null){i.pending=null;var l=r=r.next;do s=t(s,l.action),l=l.next;while(l!==r);Ui(s,n.memoizedState)||(hi=!0),n.memoizedState=s,n.baseQueue===null&&(n.baseState=s),i.lastRenderedState=s}return[s,o]}function Af(){}function Wf(t,n){var i=jn,o=Ai(),r=n(),s=!Ui(o.memoizedState,r);if(s&&(o.memoizedState=r,hi=!0),o=o.queue,Vd(Of.bind(null,i,o,t),[t]),o.getSnapshot!==n||s||Mn!==null&&Mn.memoizedState.tag&1){if(i.flags|=2048,bs(9,Mf.bind(null,i,o,r,n),void 0,null),On===null)throw Error(Fe(349));tr&30||Ff(i,n,r)}return r}function Ff(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=jn.updateQueue,n===null?(n={lastEffect:null,stores:null},jn.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function Mf(t,n,i,o){n.value=i,n.getSnapshot=o,Pf(n)&&Df(t)}function Of(t,n,i){return i(function(){Pf(n)&&Df(t)})}function Pf(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Ui(t,i)}catch{return!0}}function Df(t){var n=po(t,1);n!==null&&Vi(n,t,1,-1)}function Vc(t){var n=Qi();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},n.queue=t,t=t.dispatch=Lh.bind(null,jn,t),[n.memoizedState,t]}function bs(t,n,i,o){return t={tag:t,create:n,destroy:i,deps:o,next:null},n=jn.updateQueue,n===null?(n={lastEffect:null,stores:null},jn.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,n.lastEffect=t)),t}function Nf(){return Ai().memoizedState}function Js(t,n,i,o){var r=Qi();jn.flags|=t,r.memoizedState=bs(1|n,i,void 0,o===void 0?null:o)}function El(t,n,i,o){var r=Ai();o=o===void 0?null:o;var s=void 0;if(Ln!==null){var l=Ln.memoizedState;if(s=l.destroy,o!==null&&Nd(o,l.deps)){r.memoizedState=bs(n,i,s,o);return}}jn.flags|=t,r.memoizedState=bs(1|n,i,s,o)}function Uc(t,n){return Js(8390656,8,t,n)}function Vd(t,n){return El(2048,8,t,n)}function Hf(t,n){return El(4,2,t,n)}function $f(t,n){return El(4,4,t,n)}function Vf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Uf(t,n,i){return i=i!=null?i.concat([t]):null,El(4,4,Vf.bind(null,n,t),i)}function Ud(){}function Gf(t,n){var i=Ai();n=n===void 0?null:n;var o=i.memoizedState;return o!==null&&n!==null&&Nd(n,o[1])?o[0]:(i.memoizedState=[t,n],t)}function Yf(t,n){var i=Ai();n=n===void 0?null:n;var o=i.memoizedState;return o!==null&&n!==null&&Nd(n,o[1])?o[0]:(t=t(),i.memoizedState=[t,n],t)}function Xf(t,n,i){return tr&21?(Ui(i,n)||(i=Z0(),jn.lanes|=i,nr|=i,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,hi=!0),t.memoizedState=i)}function Ih(t,n){var i=dn;dn=i!==0&&4>i?i:4,t(!0);var o=la.transition;la.transition={};try{t(!1),n()}finally{dn=i,la.transition=o}}function Kf(){return Ai().memoizedState}function Eh(t,n,i){var o=Mo(t);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},Jf(t))Qf(n,i);else if(i=If(t,n,i,o),i!==null){var r=ni();Vi(i,t,o,r),Zf(i,n,o)}}function Lh(t,n,i){var o=Mo(t),r={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(Jf(t))Qf(n,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=n.lastRenderedReducer,s!==null))try{var l=n.lastRenderedState,d=s(l,i);if(r.hasEagerState=!0,r.eagerState=d,Ui(d,l)){var c=n.interleaved;c===null?(r.next=r,Fd(n)):(r.next=c.next,c.next=r),n.interleaved=r;return}}catch{}finally{}i=If(t,n,r,o),i!==null&&(r=ni(),Vi(i,t,o,r),Zf(i,n,o))}}function Jf(t){var n=t.alternate;return t===jn||n!==null&&n===jn}function Qf(t,n){es=ml=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function Zf(t,n,i){if(i&4194240){var o=n.lanes;o&=t.pendingLanes,i|=o,n.lanes=i,Sd(t,i)}}var bl={readContext:Li,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},Ah={readContext:Li,useCallback:function(t,n){return Qi().memoizedState=[t,n===void 0?null:n],t},useContext:Li,useEffect:Uc,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,Js(4194308,4,Vf.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Js(4194308,4,t,n)},useInsertionEffect:function(t,n){return Js(4,2,t,n)},useMemo:function(t,n){var i=Qi();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var o=Qi();return n=i!==void 0?i(n):n,o.memoizedState=o.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},o.queue=t,t=t.dispatch=Eh.bind(null,jn,t),[o.memoizedState,t]},useRef:function(t){var n=Qi();return t={current:t},n.memoizedState=t},useState:Vc,useDebugValue:Ud,useDeferredValue:function(t){return Qi().memoizedState=t},useTransition:function(){var t=Vc(!1),n=t[0];return t=Ih.bind(null,t[1]),Qi().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var o=jn,r=Qi();if(bn){if(i===void 0)throw Error(Fe(407));i=i()}else{if(i=n(),On===null)throw Error(Fe(349));tr&30||Ff(o,n,i)}r.memoizedState=i;var s={value:i,getSnapshot:n};return r.queue=s,Uc(Of.bind(null,o,s,t),[t]),o.flags|=2048,bs(9,Mf.bind(null,o,s,i,n),void 0,null),i},useId:function(){var t=Qi(),n=On.identifierPrefix;if(bn){var i=lo,o=so;i=(o&~(1<<32-$i(o)-1)).toString(32)+i,n=":"+n+"R"+i,i=ys++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=Bh++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Wh={readContext:Li,useCallback:Gf,useContext:Li,useEffect:Vd,useImperativeHandle:Uf,useInsertionEffect:Hf,useLayoutEffect:$f,useMemo:Yf,useReducer:aa,useRef:Nf,useState:function(){return aa(ms)},useDebugValue:Ud,useDeferredValue:function(t){var n=Ai();return Xf(n,Ln.memoizedState,t)},useTransition:function(){var t=aa(ms)[0],n=Ai().memoizedState;return[t,n]},useMutableSource:Af,useSyncExternalStore:Wf,useId:Kf,unstable_isNewReconciler:!1},Fh={readContext:Li,useCallback:Gf,useContext:Li,useEffect:Vd,useImperativeHandle:Uf,useInsertionEffect:Hf,useLayoutEffect:$f,useMemo:Yf,useReducer:da,useRef:Nf,useState:function(){return da(ms)},useDebugValue:Ud,useDeferredValue:function(t){var n=Ai();return Ln===null?n.memoizedState=t:Xf(n,Ln.memoizedState,t)},useTransition:function(){var t=da(ms)[0],n=Ai().memoizedState;return[t,n]},useMutableSource:Af,useSyncExternalStore:Wf,useId:Kf,unstable_isNewReconciler:!1};function Di(t,n){if(t&&t.defaultProps){n=Sn({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}function Ya(t,n,i,o){n=t.memoizedState,i=i(o,n),i=i==null?n:Sn({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Ll={isMounted:function(t){return(t=t._reactInternals)?rr(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var o=ni(),r=Mo(t),s=ao(o,r);s.payload=n,i!=null&&(s.callback=i),n=Wo(t,s,r),n!==null&&(Vi(n,t,r,o),Xs(n,t,r))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var o=ni(),r=Mo(t),s=ao(o,r);s.tag=1,s.payload=n,i!=null&&(s.callback=i),n=Wo(t,s,r),n!==null&&(Vi(n,t,r,o),Xs(n,t,r))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=ni(),o=Mo(t),r=ao(i,o);r.tag=2,n!=null&&(r.callback=n),n=Wo(t,r,o),n!==null&&(Vi(n,t,o,i),Xs(n,t,o))}};function Gc(t,n,i,o,r,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,s,l):n.prototype&&n.prototype.isPureReactComponent?!fs(i,o)||!fs(r,s):!0}function qf(t,n,i){var o=!1,r=Do,s=n.contextType;return typeof s=="object"&&s!==null?s=Li(s):(r=xi(n)?qo:Kn.current,o=n.contextTypes,s=(o=o!=null)?Tr(t,r):Do),n=new n(i,s),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ll,t.stateNode=n,n._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),n}function Yc(t,n,i,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==t&&Ll.enqueueReplaceState(n,n.state,null)}function Xa(t,n,i,o){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs={},Md(t);var s=n.contextType;typeof s=="object"&&s!==null?r.context=Li(s):(s=xi(n)?qo:Kn.current,r.context=Tr(t,s)),r.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Ya(t,n,s,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(n=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),n!==r.state&&Ll.enqueueReplaceState(r,r.state,null),xl(t,i,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ir(t,n){try{var i="",o=n;do i+=cg(o),o=o.return;while(o);var r=i}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:n,stack:r,digest:null}}function ca(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function Ka(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var Mh=typeof WeakMap=="function"?WeakMap:Map;function ep(t,n,i){i=ao(-1,i),i.tag=3,i.payload={element:null};var o=n.value;return i.callback=function(){jl||(jl=!0,rd=o),Ka(t,n)},i}function tp(t,n,i){i=ao(-1,i),i.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=n.value;i.payload=function(){return o(r)},i.callback=function(){Ka(t,n)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){Ka(t,n),typeof o!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),i}function Xc(t,n,i){var o=t.pingCache;if(o===null){o=t.pingCache=new Mh;var r=new Set;o.set(n,r)}else r=o.get(n),r===void 0&&(r=new Set,o.set(n,r));r.has(i)||(r.add(i),t=Qh.bind(null,t,n,i),n.then(t,t))}function Kc(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Jc(t,n,i,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=ao(-1,1),n.tag=2,Wo(i,n,1))),i.lanes|=1),t)}var Oh=ho.ReactCurrentOwner,hi=!1;function ti(t,n,i,o){n.child=t===null?Bf(n,null,i,o):Rr(n,t.child,i,o)}function Qc(t,n,i,o,r){i=i.render;var s=n.ref;return kr(n,r),o=Hd(t,n,i,o,s,r),i=$d(),t!==null&&!hi?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r,go(t,n,r)):(bn&&i&&Bd(n),n.flags|=1,ti(t,n,o,r),n.child)}function Zc(t,n,i,o,r){if(t===null){var s=i.type;return typeof s=="function"&&!qd(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=s,np(t,n,s,o,r)):(t=el(i.type,null,o,n,n.mode,r),t.ref=n.ref,t.return=n,n.child=t)}if(s=t.child,!(t.lanes&r)){var l=s.memoizedProps;if(i=i.compare,i=i!==null?i:fs,i(l,o)&&t.ref===n.ref)return go(t,n,r)}return n.flags|=1,t=Oo(s,o),t.ref=n.ref,t.return=n,n.child=t}function np(t,n,i,o,r){if(t!==null){var s=t.memoizedProps;if(fs(s,o)&&t.ref===n.ref)if(hi=!1,n.pendingProps=o=s,(t.lanes&r)!==0)t.flags&131072&&(hi=!0);else return n.lanes=t.lanes,go(t,n,r)}return Ja(t,n,i,o,r)}function ip(t,n,i){var o=n.pendingProps,r=o.children,s=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(br,bi),bi|=i;else{if(!(i&1073741824))return t=s!==null?s.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,un(br,bi),bi|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=s!==null?s.baseLanes:i,un(br,bi),bi|=o}else s!==null?(o=s.baseLanes|i,n.memoizedState=null):o=i,un(br,bi),bi|=o;return ti(t,n,r,i),n.child}function op(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Ja(t,n,i,o,r){var s=xi(i)?qo:Kn.current;return s=Tr(n,s),kr(n,r),i=Hd(t,n,i,o,s,r),o=$d(),t!==null&&!hi?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r,go(t,n,r)):(bn&&o&&Bd(n),n.flags|=1,ti(t,n,i,r),n.child)}function qc(t,n,i,o,r){if(xi(i)){var s=!0;fl(n)}else s=!1;if(kr(n,r),n.stateNode===null)Qs(t,n),qf(n,i,o),Xa(n,i,o,r),o=!0;else if(t===null){var l=n.stateNode,d=n.memoizedProps;l.props=d;var c=l.context,g=i.contextType;typeof g=="object"&&g!==null?g=Li(g):(g=xi(i)?qo:Kn.current,g=Tr(n,g));var w=i.getDerivedStateFromProps,y=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==o||c!==g)&&Yc(n,l,o,g),Co=!1;var u=n.memoizedState;l.state=u,xl(n,o,l,r),c=n.memoizedState,d!==o||u!==c||ui.current||Co?(typeof w=="function"&&(Ya(n,i,w,o),c=n.memoizedState),(d=Co||Gc(n,i,d,o,u,c,g))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=c),l.props=o,l.state=c,l.context=g,o=d):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{l=n.stateNode,Ef(t,n),d=n.memoizedProps,g=n.type===n.elementType?d:Di(n.type,d),l.props=g,y=n.pendingProps,u=l.context,c=i.contextType,typeof c=="object"&&c!==null?c=Li(c):(c=xi(i)?qo:Kn.current,c=Tr(n,c));var L=i.getDerivedStateFromProps;(w=typeof L=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==y||u!==c)&&Yc(n,l,o,c),Co=!1,u=n.memoizedState,l.state=u,xl(n,o,l,r);var W=n.memoizedState;d!==y||u!==W||ui.current||Co?(typeof L=="function"&&(Ya(n,i,L,o),W=n.memoizedState),(g=Co||Gc(n,i,g,o,u,W,c)||!1)?(w||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,W,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,W,c)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=W),l.props=o,l.state=W,l.context=c,o=g):(typeof l.componentDidUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&u===t.memoizedState||(n.flags|=1024),o=!1)}return Qa(t,n,i,o,s,r)}function Qa(t,n,i,o,r,s){op(t,n);var l=(n.flags&128)!==0;if(!o&&!l)return r&&Oc(n,i,!1),go(t,n,s);o=n.stateNode,Oh.current=n;var d=l&&typeof i.getDerivedStateFromError!="function"?null:o.render();return n.flags|=1,t!==null&&l?(n.child=Rr(n,t.child,null,s),n.child=Rr(n,null,d,s)):ti(t,n,d,s),n.memoizedState=o.state,r&&Oc(n,i,!0),n.child}function rp(t){var n=t.stateNode;n.pendingContext?Mc(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Mc(t,n.context,!1),Od(t,n.containerInfo)}function e0(t,n,i,o,r){return zr(),Ed(r),n.flags|=256,ti(t,n,i,o),n.child}var Za={dehydrated:null,treeContext:null,retryLane:0};function qa(t){return{baseLanes:t,cachePool:null,transitions:null}}function sp(t,n,i){var o=n.pendingProps,r=vn.current,s=!1,l=(n.flags&128)!==0,d;if((d=l)||(d=t!==null&&t.memoizedState===null?!1:(r&2)!==0),d?(s=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),un(vn,r&1),t===null)return Ua(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=o.children,t=o.fallback,s?(o=n.mode,s=n.child,l={mode:"hidden",children:l},!(o&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Fl(l,o,0,null),t=Zo(t,o,i,null),s.return=n,t.return=n,s.sibling=t,n.child=s,n.child.memoizedState=qa(i),n.memoizedState=Za,t):Gd(n,l));if(r=t.memoizedState,r!==null&&(d=r.dehydrated,d!==null))return Ph(t,n,l,o,d,r,i);if(s){s=o.fallback,l=n.mode,r=t.child,d=r.sibling;var c={mode:"hidden",children:o.children};return!(l&1)&&n.child!==r?(o=n.child,o.childLanes=0,o.pendingProps=c,n.deletions=null):(o=Oo(r,c),o.subtreeFlags=r.subtreeFlags&14680064),d!==null?s=Oo(d,s):(s=Zo(s,l,i,null),s.flags|=2),s.return=n,o.return=n,o.sibling=s,n.child=o,o=s,s=n.child,l=t.child.memoizedState,l=l===null?qa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~i,n.memoizedState=Za,o}return s=t.child,t=s.sibling,o=Oo(s,{mode:"visible",children:o.children}),!(n.mode&1)&&(o.lanes=i),o.return=n,o.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=o,n.memoizedState=null,o}function Gd(t,n){return n=Fl({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Ps(t,n,i,o){return o!==null&&Ed(o),Rr(n,t.child,null,i),t=Gd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Ph(t,n,i,o,r,s,l){if(i)return n.flags&256?(n.flags&=-257,o=ca(Error(Fe(422))),Ps(t,n,l,o)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(s=o.fallback,r=n.mode,o=Fl({mode:"visible",children:o.children},r,0,null),s=Zo(s,r,l,null),s.flags|=2,o.return=n,s.return=n,o.sibling=s,n.child=o,n.mode&1&&Rr(n,t.child,null,l),n.child.memoizedState=qa(l),n.memoizedState=Za,s);if(!(n.mode&1))return Ps(t,n,l,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var d=o.dgst;return o=d,s=Error(Fe(419)),o=ca(s,o,void 0),Ps(t,n,l,o)}if(d=(l&t.childLanes)!==0,hi||d){if(o=On,o!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|l)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,po(t,r),Vi(o,t,r,-1))}return Zd(),o=ca(Error(Fe(421))),Ps(t,n,l,o)}return r.data==="$?"?(n.flags|=128,n.child=t.child,n=Zh.bind(null,t),r._reactRetry=n,null):(t=s.treeContext,vi=Ao(r.nextSibling),ji=n,bn=!0,Hi=null,t!==null&&(Ri[Bi++]=so,Ri[Bi++]=lo,Ri[Bi++]=er,so=t.id,lo=t.overflow,er=n),n=Gd(n,o.children),n.flags|=4096,n)}function t0(t,n,i){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),Ga(t.return,n,i)}function fa(t,n,i,o,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:r}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=o,s.tail=i,s.tailMode=r)}function lp(t,n,i){var o=n.pendingProps,r=o.revealOrder,s=o.tail;if(ti(t,n,o.children,i),o=vn.current,o&2)o=o&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t0(t,i,n);else if(t.tag===19)t0(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(un(vn,o),!(n.mode&1))n.memoizedState=null;else switch(r){case"forwards":for(i=n.child,r=null;i!==null;)t=i.alternate,t!==null&&yl(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=n.child,n.child=null):(r=i.sibling,i.sibling=null),fa(n,!1,r,i,s);break;case"backwards":for(i=null,r=n.child,n.child=null;r!==null;){if(t=r.alternate,t!==null&&yl(t)===null){n.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}fa(n,!0,i,null,s);break;case"together":fa(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Qs(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function go(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),nr|=n.lanes,!(i&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(Fe(153));if(n.child!==null){for(t=n.child,i=Oo(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=Oo(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function Dh(t,n,i){switch(n.tag){case 3:rp(n),zr();break;case 5:Lf(n);break;case 1:xi(n.type)&&fl(n);break;case 4:Od(n,n.stateNode.containerInfo);break;case 10:var o=n.type._context,r=n.memoizedProps.value;un(hl,o._currentValue),o._currentValue=r;break;case 13:if(o=n.memoizedState,o!==null)return o.dehydrated!==null?(un(vn,vn.current&1),n.flags|=128,null):i&n.child.childLanes?sp(t,n,i):(un(vn,vn.current&1),t=go(t,n,i),t!==null?t.sibling:null);un(vn,vn.current&1);break;case 19:if(o=(i&n.childLanes)!==0,t.flags&128){if(o)return lp(t,n,i);n.flags|=128}if(r=n.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),un(vn,vn.current),o)break;return null;case 22:case 23:return n.lanes=0,ip(t,n,i)}return go(t,n,i)}var ap,ed,dp,cp;ap=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};ed=function(){};dp=function(t,n,i,o){var r=t.memoizedProps;if(r!==o){t=n.stateNode,Jo(eo.current);var s=null;switch(i){case"input":r=Sa(t,r),o=Sa(t,o),s=[];break;case"select":r=Sn({},r,{value:void 0}),o=Sn({},o,{value:void 0}),s=[];break;case"textarea":r=_a(t,r),o=_a(t,o),s=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=dl)}Ta(i,o);var l;i=null;for(g in r)if(!o.hasOwnProperty(g)&&r.hasOwnProperty(g)&&r[g]!=null)if(g==="style"){var d=r[g];for(l in d)d.hasOwnProperty(l)&&(i||(i={}),i[l]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(os.hasOwnProperty(g)?s||(s=[]):(s=s||[]).push(g,null));for(g in o){var c=o[g];if(d=r!=null?r[g]:void 0,o.hasOwnProperty(g)&&c!==d&&(c!=null||d!=null))if(g==="style")if(d){for(l in d)!d.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in c)c.hasOwnProperty(l)&&d[l]!==c[l]&&(i||(i={}),i[l]=c[l])}else i||(s||(s=[]),s.push(g,i)),i=c;else g==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(s=s||[]).push(g,c)):g==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(g,""+c):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(os.hasOwnProperty(g)?(c!=null&&g==="onScroll"&&yn("scroll",t),s||d===c||(s=[])):(s=s||[]).push(g,c))}i&&(s=s||[]).push("style",i);var g=s;(n.updateQueue=g)&&(n.flags|=4)}};cp=function(t,n,i,o){i!==o&&(n.flags|=4)};function Hr(t,n){if(!bn)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Yn(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(n)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=i,n}function Nh(t,n,i){var o=n.pendingProps;switch(Id(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(n),null;case 1:return xi(n.type)&&cl(),Yn(n),null;case 3:return o=n.stateNode,Br(),mn(ui),mn(Kn),Dd(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Ms(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Hi!==null&&(ad(Hi),Hi=null))),ed(t,n),Yn(n),null;case 5:Pd(n);var r=Jo(xs.current);if(i=n.type,t!==null&&n.stateNode!=null)dp(t,n,i,o,r),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!o){if(n.stateNode===null)throw Error(Fe(166));return Yn(n),null}if(t=Jo(eo.current),Ms(n)){o=n.stateNode,i=n.type;var s=n.memoizedProps;switch(o[Zi]=n,o[hs]=s,t=(n.mode&1)!==0,i){case"dialog":yn("cancel",o),yn("close",o);break;case"iframe":case"object":case"embed":yn("load",o);break;case"video":case"audio":for(r=0;r<Xr.length;r++)yn(Xr[r],o);break;case"source":yn("error",o);break;case"img":case"image":case"link":yn("error",o),yn("load",o);break;case"details":yn("toggle",o);break;case"input":cc(o,s),yn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},yn("invalid",o);break;case"textarea":pc(o,s),yn("invalid",o)}Ta(i,s),r=null;for(var l in s)if(s.hasOwnProperty(l)){var d=s[l];l==="children"?typeof d=="string"?o.textContent!==d&&(s.suppressHydrationWarning!==!0&&Fs(o.textContent,d,t),r=["children",d]):typeof d=="number"&&o.textContent!==""+d&&(s.suppressHydrationWarning!==!0&&Fs(o.textContent,d,t),r=["children",""+d]):os.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&yn("scroll",o)}switch(i){case"input":zs(o),fc(o,s,!0);break;case"textarea":zs(o),gc(o);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(o.onclick=dl)}o=r,n.updateQueue=o,o!==null&&(n.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M0(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=l.createElement(i,{is:o.is}):(t=l.createElement(i),i==="select"&&(l=t,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):t=l.createElementNS(t,i),t[Zi]=n,t[hs]=o,ap(t,n,!1,!1),n.stateNode=t;e:{switch(l=za(i,o),i){case"dialog":yn("cancel",t),yn("close",t),r=o;break;case"iframe":case"object":case"embed":yn("load",t),r=o;break;case"video":case"audio":for(r=0;r<Xr.length;r++)yn(Xr[r],t);r=o;break;case"source":yn("error",t),r=o;break;case"img":case"image":case"link":yn("error",t),yn("load",t),r=o;break;case"details":yn("toggle",t),r=o;break;case"input":cc(t,o),r=Sa(t,o),yn("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=Sn({},o,{value:void 0}),yn("invalid",t);break;case"textarea":pc(t,o),r=_a(t,o),yn("invalid",t);break;default:r=o}Ta(i,r),d=r;for(s in d)if(d.hasOwnProperty(s)){var c=d[s];s==="style"?D0(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&O0(t,c)):s==="children"?typeof c=="string"?(i!=="textarea"||c!=="")&&rs(t,c):typeof c=="number"&&rs(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(os.hasOwnProperty(s)?c!=null&&s==="onScroll"&&yn("scroll",t):c!=null&&xd(t,s,c,l))}switch(i){case"input":zs(t),fc(t,o,!1);break;case"textarea":zs(t),gc(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Po(o.value));break;case"select":t.multiple=!!o.multiple,s=o.value,s!=null?vr(t,!!o.multiple,s,!1):o.defaultValue!=null&&vr(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=dl)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Yn(n),null;case 6:if(t&&n.stateNode!=null)cp(t,n,t.memoizedProps,o);else{if(typeof o!="string"&&n.stateNode===null)throw Error(Fe(166));if(i=Jo(xs.current),Jo(eo.current),Ms(n)){if(o=n.stateNode,i=n.memoizedProps,o[Zi]=n,(s=o.nodeValue!==i)&&(t=ji,t!==null))switch(t.tag){case 3:Fs(o.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fs(o.nodeValue,i,(t.mode&1)!==0)}s&&(n.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Zi]=n,n.stateNode=o}return Yn(n),null;case 13:if(mn(vn),o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bn&&vi!==null&&n.mode&1&&!(n.flags&128))zf(),zr(),n.flags|=98560,s=!1;else if(s=Ms(n),o!==null&&o.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=n.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Zi]=n}else zr(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Yn(n),s=!1}else Hi!==null&&(ad(Hi),Hi=null),s=!0;if(!s)return n.flags&65536?n:null}return n.flags&128?(n.lanes=i,n):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(n.child.flags|=8192,n.mode&1&&(t===null||vn.current&1?An===0&&(An=3):Zd())),n.updateQueue!==null&&(n.flags|=4),Yn(n),null);case 4:return Br(),ed(t,n),t===null&&ps(n.stateNode.containerInfo),Yn(n),null;case 10:return Wd(n.type._context),Yn(n),null;case 17:return xi(n.type)&&cl(),Yn(n),null;case 19:if(mn(vn),s=n.memoizedState,s===null)return Yn(n),null;if(o=(n.flags&128)!==0,l=s.rendering,l===null)if(o)Hr(s,!1);else{if(An!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(l=yl(t),l!==null){for(n.flags|=128,Hr(s,!1),o=l.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),n.subtreeFlags=0,o=i,i=n.child;i!==null;)s=i,t=o,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return un(vn,vn.current&1|2),n.child}t=t.sibling}s.tail!==null&&Cn()>Er&&(n.flags|=128,o=!0,Hr(s,!1),n.lanes=4194304)}else{if(!o)if(t=yl(l),t!==null){if(n.flags|=128,o=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),Hr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!bn)return Yn(n),null}else 2*Cn()-s.renderingStartTime>Er&&i!==1073741824&&(n.flags|=128,o=!0,Hr(s,!1),n.lanes=4194304);s.isBackwards?(l.sibling=n.child,n.child=l):(i=s.last,i!==null?i.sibling=l:n.child=l,s.last=l)}return s.tail!==null?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.renderingStartTime=Cn(),n.sibling=null,i=vn.current,un(vn,o?i&1|2:i&1),n):(Yn(n),null);case 22:case 23:return Qd(),o=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(n.flags|=8192),o&&n.mode&1?bi&1073741824&&(Yn(n),n.subtreeFlags&6&&(n.flags|=8192)):Yn(n),null;case 24:return null;case 25:return null}throw Error(Fe(156,n.tag))}function Hh(t,n){switch(Id(n),n.tag){case 1:return xi(n.type)&&cl(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Br(),mn(ui),mn(Kn),Dd(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return Pd(n),null;case 13:if(mn(vn),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(Fe(340));zr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return mn(vn),null;case 4:return Br(),null;case 10:return Wd(n.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var Ds=!1,Xn=!1,$h=typeof WeakSet=="function"?WeakSet:Set,dt=null;function mr(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){kn(t,n,o)}else i.current=null}function td(t,n,i){try{i()}catch(o){kn(t,n,o)}}var n0=!1;function Vh(t,n){if(Oa=sl,t=uf(),Rd(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var r=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var l=0,d=-1,c=-1,g=0,w=0,y=t,u=null;t:for(;;){for(var L;y!==i||r!==0&&y.nodeType!==3||(d=l+r),y!==s||o!==0&&y.nodeType!==3||(c=l+o),y.nodeType===3&&(l+=y.nodeValue.length),(L=y.firstChild)!==null;)u=y,y=L;for(;;){if(y===t)break t;if(u===i&&++g===r&&(d=l),u===s&&++w===o&&(c=l),(L=y.nextSibling)!==null)break;y=u,u=y.parentNode}y=L}i=d===-1||c===-1?null:{start:d,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(Pa={focusedElem:t,selectionRange:i},sl=!1,dt=n;dt!==null;)if(n=dt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,dt=t;else for(;dt!==null;){n=dt;try{var W=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(W!==null){var Y=W.memoizedProps,Ue=W.memoizedState,p=n.stateNode,b=p.getSnapshotBeforeUpdate(n.elementType===n.type?Y:Di(n.type,Y),Ue);p.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=n.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(f){kn(n,n.return,f)}if(t=n.sibling,t!==null){t.return=n.return,dt=t;break}dt=n.return}return W=n0,n0=!1,W}function ts(t,n,i){var o=n.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&td(n,i,s)}r=r.next}while(r!==o)}}function Al(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.create;i.destroy=o()}i=i.next}while(i!==n)}}function nd(t){var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof n=="function"?n(t):n.current=t}}function fp(t){var n=t.alternate;n!==null&&(t.alternate=null,fp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Zi],delete n[hs],delete n[Ha],delete n[Ch],delete n[Th])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pp(t){return t.tag===5||t.tag===3||t.tag===4}function i0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function id(t,n,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=dl));else if(o!==4&&(t=t.child,t!==null))for(id(t,n,i),t=t.sibling;t!==null;)id(t,n,i),t=t.sibling}function od(t,n,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(od(t,n,i),t=t.sibling;t!==null;)od(t,n,i),t=t.sibling}var Dn=null,Ni=!1;function ko(t,n,i){for(i=i.child;i!==null;)gp(t,n,i),i=i.sibling}function gp(t,n,i){if(qi&&typeof qi.onCommitFiberUnmount=="function")try{qi.onCommitFiberUnmount(Cl,i)}catch{}switch(i.tag){case 5:Xn||mr(i,n);case 6:var o=Dn,r=Ni;Dn=null,ko(t,n,i),Dn=o,Ni=r,Dn!==null&&(Ni?(t=Dn,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Dn.removeChild(i.stateNode));break;case 18:Dn!==null&&(Ni?(t=Dn,i=i.stateNode,t.nodeType===8?oa(t.parentNode,i):t.nodeType===1&&oa(t,i),ds(t)):oa(Dn,i.stateNode));break;case 4:o=Dn,r=Ni,Dn=i.stateNode.containerInfo,Ni=!0,ko(t,n,i),Dn=o,Ni=r;break;case 0:case 11:case 14:case 15:if(!Xn&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var s=r,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&td(i,n,l),r=r.next}while(r!==o)}ko(t,n,i);break;case 1:if(!Xn&&(mr(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(d){kn(i,n,d)}ko(t,n,i);break;case 21:ko(t,n,i);break;case 22:i.mode&1?(Xn=(o=Xn)||i.memoizedState!==null,ko(t,n,i),Xn=o):ko(t,n,i);break;default:ko(t,n,i)}}function o0(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new $h),n.forEach(function(o){var r=qh.bind(null,t,o);i.has(o)||(i.add(o),o.then(r,r))})}}function Oi(t,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var r=i[o];try{var s=t,l=n,d=l;e:for(;d!==null;){switch(d.tag){case 5:Dn=d.stateNode,Ni=!1;break e;case 3:Dn=d.stateNode.containerInfo,Ni=!0;break e;case 4:Dn=d.stateNode.containerInfo,Ni=!0;break e}d=d.return}if(Dn===null)throw Error(Fe(160));gp(s,l,r),Dn=null,Ni=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(g){kn(r,n,g)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)hp(n,t),n=n.sibling}function hp(t,n){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Oi(n,t),Ji(t),o&4){try{ts(3,t,t.return),Al(3,t)}catch(Y){kn(t,t.return,Y)}try{ts(5,t,t.return)}catch(Y){kn(t,t.return,Y)}}break;case 1:Oi(n,t),Ji(t),o&512&&i!==null&&mr(i,i.return);break;case 5:if(Oi(n,t),Ji(t),o&512&&i!==null&&mr(i,i.return),t.flags&32){var r=t.stateNode;try{rs(r,"")}catch(Y){kn(t,t.return,Y)}}if(o&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,l=i!==null?i.memoizedProps:s,d=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{d==="input"&&s.type==="radio"&&s.name!=null&&W0(r,s),za(d,l);var g=za(d,s);for(l=0;l<c.length;l+=2){var w=c[l],y=c[l+1];w==="style"?D0(r,y):w==="dangerouslySetInnerHTML"?O0(r,y):w==="children"?rs(r,y):xd(r,w,y,g)}switch(d){case"input":wa(r,s);break;case"textarea":F0(r,s);break;case"select":var u=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var L=s.value;L!=null?vr(r,!!s.multiple,L,!1):u!==!!s.multiple&&(s.defaultValue!=null?vr(r,!!s.multiple,s.defaultValue,!0):vr(r,!!s.multiple,s.multiple?[]:"",!1))}r[hs]=s}catch(Y){kn(t,t.return,Y)}}break;case 6:if(Oi(n,t),Ji(t),o&4){if(t.stateNode===null)throw Error(Fe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(Y){kn(t,t.return,Y)}}break;case 3:if(Oi(n,t),Ji(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ds(n.containerInfo)}catch(Y){kn(t,t.return,Y)}break;case 4:Oi(n,t),Ji(t);break;case 13:Oi(n,t),Ji(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Kd=Cn())),o&4&&o0(t);break;case 22:if(w=i!==null&&i.memoizedState!==null,t.mode&1?(Xn=(g=Xn)||w,Oi(n,t),Xn=g):Oi(n,t),Ji(t),o&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!w&&t.mode&1)for(dt=t,w=t.child;w!==null;){for(y=dt=w;dt!==null;){switch(u=dt,L=u.child,u.tag){case 0:case 11:case 14:case 15:ts(4,u,u.return);break;case 1:mr(u,u.return);var W=u.stateNode;if(typeof W.componentWillUnmount=="function"){o=u,i=u.return;try{n=o,W.props=n.memoizedProps,W.state=n.memoizedState,W.componentWillUnmount()}catch(Y){kn(o,i,Y)}}break;case 5:mr(u,u.return);break;case 22:if(u.memoizedState!==null){s0(y);continue}}L!==null?(L.return=u,dt=L):s0(y)}w=w.sibling}e:for(w=null,y=t;;){if(y.tag===5){if(w===null){w=y;try{r=y.stateNode,g?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(d=y.stateNode,c=y.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=P0("display",l))}catch(Y){kn(t,t.return,Y)}}}else if(y.tag===6){if(w===null)try{y.stateNode.nodeValue=g?"":y.memoizedProps}catch(Y){kn(t,t.return,Y)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;w===y&&(w=null),y=y.return}w===y&&(w=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Oi(n,t),Ji(t),o&4&&o0(t);break;case 21:break;default:Oi(n,t),Ji(t)}}function Ji(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(pp(i)){var o=i;break e}i=i.return}throw Error(Fe(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(rs(r,""),o.flags&=-33);var s=i0(t);od(t,s,r);break;case 3:case 4:var l=o.stateNode.containerInfo,d=i0(t);id(t,d,l);break;default:throw Error(Fe(161))}}catch(c){kn(t,t.return,c)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Uh(t,n,i){dt=t,up(t)}function up(t,n,i){for(var o=(t.mode&1)!==0;dt!==null;){var r=dt,s=r.child;if(r.tag===22&&o){var l=r.memoizedState!==null||Ds;if(!l){var d=r.alternate,c=d!==null&&d.memoizedState!==null||Xn;d=Ds;var g=Xn;if(Ds=l,(Xn=c)&&!g)for(dt=r;dt!==null;)l=dt,c=l.child,l.tag===22&&l.memoizedState!==null?l0(r):c!==null?(c.return=l,dt=c):l0(r);for(;s!==null;)dt=s,up(s),s=s.sibling;dt=r,Ds=d,Xn=g}r0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,dt=s):r0(t)}}function r0(t){for(;dt!==null;){var n=dt;if(n.flags&8772){var i=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Xn||Al(5,n);break;case 1:var o=n.stateNode;if(n.flags&4&&!Xn)if(i===null)o.componentDidMount();else{var r=n.elementType===n.type?i.memoizedProps:Di(n.type,i.memoizedProps);o.componentDidUpdate(r,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var s=n.updateQueue;s!==null&&$c(n,s,o);break;case 3:var l=n.updateQueue;if(l!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}$c(n,l,i)}break;case 5:var d=n.stateNode;if(i===null&&n.flags&4){i=d;var c=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var g=n.alternate;if(g!==null){var w=g.memoizedState;if(w!==null){var y=w.dehydrated;y!==null&&ds(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Xn||n.flags&512&&nd(n)}catch(u){kn(n,n.return,u)}}if(n===t){dt=null;break}if(i=n.sibling,i!==null){i.return=n.return,dt=i;break}dt=n.return}}function s0(t){for(;dt!==null;){var n=dt;if(n===t){dt=null;break}var i=n.sibling;if(i!==null){i.return=n.return,dt=i;break}dt=n.return}}function l0(t){for(;dt!==null;){var n=dt;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Al(4,n)}catch(c){kn(n,i,c)}break;case 1:var o=n.stateNode;if(typeof o.componentDidMount=="function"){var r=n.return;try{o.componentDidMount()}catch(c){kn(n,r,c)}}var s=n.return;try{nd(n)}catch(c){kn(n,s,c)}break;case 5:var l=n.return;try{nd(n)}catch(c){kn(n,l,c)}}}catch(c){kn(n,n.return,c)}if(n===t){dt=null;break}var d=n.sibling;if(d!==null){d.return=n.return,dt=d;break}dt=n.return}}var Gh=Math.ceil,vl=ho.ReactCurrentDispatcher,Yd=ho.ReactCurrentOwner,Ei=ho.ReactCurrentBatchConfig,on=0,On=null,Rn=null,Nn=0,bi=0,br=Ho(0),An=0,vs=null,nr=0,Wl=0,Xd=0,ns=null,gi=null,Kd=0,Er=1/0,oo=null,jl=!1,rd=null,Fo=null,Ns=!1,Bo=null,Sl=0,is=0,sd=null,Zs=-1,qs=0;function ni(){return on&6?Cn():Zs!==-1?Zs:Zs=Cn()}function Mo(t){return t.mode&1?on&2&&Nn!==0?Nn&-Nn:Rh.transition!==null?(qs===0&&(qs=Z0()),qs):(t=dn,t!==0||(t=window.event,t=t===void 0?16:sf(t.type)),t):1}function Vi(t,n,i,o){if(50<is)throw is=0,sd=null,Error(Fe(185));Ss(t,i,o),(!(on&2)||t!==On)&&(t===On&&(!(on&2)&&(Wl|=i),An===4&&zo(t,Nn)),yi(t,o),i===1&&on===0&&!(n.mode&1)&&(Er=Cn()+500,Il&&$o()))}function yi(t,n){var i=t.callbackNode;Rg(t,n);var o=rl(t,t===On?Nn:0);if(o===0)i!==null&&xc(i),t.callbackNode=null,t.callbackPriority=0;else if(n=o&-o,t.callbackPriority!==n){if(i!=null&&xc(i),n===1)t.tag===0?zh(a0.bind(null,t)):_f(a0.bind(null,t)),kh(function(){!(on&6)&&$o()}),i=null;else{switch(q0(o)){case 1:i=jd;break;case 4:i=J0;break;case 16:i=ol;break;case 536870912:i=Q0;break;default:i=ol}i=wp(i,xp.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function xp(t,n){if(Zs=-1,qs=0,on&6)throw Error(Fe(327));var i=t.callbackNode;if(_r()&&t.callbackNode!==i)return null;var o=rl(t,t===On?Nn:0);if(o===0)return null;if(o&30||o&t.expiredLanes||n)n=wl(t,o);else{n=o;var r=on;on|=2;var s=mp();(On!==t||Nn!==n)&&(oo=null,Er=Cn()+500,Qo(t,n));do try{Kh();break}catch(d){yp(t,d)}while(!0);Ad(),vl.current=s,on=r,Rn!==null?n=0:(On=null,Nn=0,n=An)}if(n!==0){if(n===2&&(r=La(t),r!==0&&(o=r,n=ld(t,r))),n===1)throw i=vs,Qo(t,0),zo(t,o),yi(t,Cn()),i;if(n===6)zo(t,o);else{if(r=t.current.alternate,!(o&30)&&!Yh(r)&&(n=wl(t,o),n===2&&(s=La(t),s!==0&&(o=s,n=ld(t,s))),n===1))throw i=vs,Qo(t,0),zo(t,o),yi(t,Cn()),i;switch(t.finishedWork=r,t.finishedLanes=o,n){case 0:case 1:throw Error(Fe(345));case 2:Yo(t,gi,oo);break;case 3:if(zo(t,o),(o&130023424)===o&&(n=Kd+500-Cn(),10<n)){if(rl(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){ni(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Na(Yo.bind(null,t,gi,oo),n);break}Yo(t,gi,oo);break;case 4:if(zo(t,o),(o&4194240)===o)break;for(n=t.eventTimes,r=-1;0<o;){var l=31-$i(o);s=1<<l,l=n[l],l>r&&(r=l),o&=~s}if(o=r,o=Cn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Gh(o/1960))-o,10<o){t.timeoutHandle=Na(Yo.bind(null,t,gi,oo),o);break}Yo(t,gi,oo);break;case 5:Yo(t,gi,oo);break;default:throw Error(Fe(329))}}}return yi(t,Cn()),t.callbackNode===i?xp.bind(null,t):null}function ld(t,n){var i=ns;return t.current.memoizedState.isDehydrated&&(Qo(t,n).flags|=256),t=wl(t,n),t!==2&&(n=gi,gi=i,n!==null&&ad(n)),t}function ad(t){gi===null?gi=t:gi.push.apply(gi,t)}function Yh(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var r=i[o],s=r.getSnapshot;r=r.value;try{if(!Ui(s(),r))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function zo(t,n){for(n&=~Xd,n&=~Wl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-$i(n),o=1<<i;t[i]=-1,n&=~o}}function a0(t){if(on&6)throw Error(Fe(327));_r();var n=rl(t,0);if(!(n&1))return yi(t,Cn()),null;var i=wl(t,n);if(t.tag!==0&&i===2){var o=La(t);o!==0&&(n=o,i=ld(t,o))}if(i===1)throw i=vs,Qo(t,0),zo(t,n),yi(t,Cn()),i;if(i===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Yo(t,gi,oo),yi(t,Cn()),null}function Jd(t,n){var i=on;on|=1;try{return t(n)}finally{on=i,on===0&&(Er=Cn()+500,Il&&$o())}}function ir(t){Bo!==null&&Bo.tag===0&&!(on&6)&&_r();var n=on;on|=1;var i=Ei.transition,o=dn;try{if(Ei.transition=null,dn=1,t)return t()}finally{dn=o,Ei.transition=i,on=n,!(on&6)&&$o()}}function Qd(){bi=br.current,mn(br)}function Qo(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,wh(i)),Rn!==null)for(i=Rn.return;i!==null;){var o=i;switch(Id(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&cl();break;case 3:Br(),mn(ui),mn(Kn),Dd();break;case 5:Pd(o);break;case 4:Br();break;case 13:mn(vn);break;case 19:mn(vn);break;case 10:Wd(o.type._context);break;case 22:case 23:Qd()}i=i.return}if(On=t,Rn=t=Oo(t.current,null),Nn=bi=n,An=0,vs=null,Xd=Wl=nr=0,gi=ns=null,Ko!==null){for(n=0;n<Ko.length;n++)if(i=Ko[n],o=i.interleaved,o!==null){i.interleaved=null;var r=o.next,s=i.pending;if(s!==null){var l=s.next;s.next=r,o.next=l}i.pending=o}Ko=null}return t}function yp(t,n){do{var i=Rn;try{if(Ad(),Ks.current=bl,ml){for(var o=jn.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}ml=!1}if(tr=0,Mn=Ln=jn=null,es=!1,ys=0,Yd.current=null,i===null||i.return===null){An=1,vs=n,Rn=null;break}e:{var s=t,l=i.return,d=i,c=n;if(n=Nn,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var g=c,w=d,y=w.tag;if(!(w.mode&1)&&(y===0||y===11||y===15)){var u=w.alternate;u?(w.updateQueue=u.updateQueue,w.memoizedState=u.memoizedState,w.lanes=u.lanes):(w.updateQueue=null,w.memoizedState=null)}var L=Kc(l);if(L!==null){L.flags&=-257,Jc(L,l,d,s,n),L.mode&1&&Xc(s,g,n),n=L,c=g;var W=n.updateQueue;if(W===null){var Y=new Set;Y.add(c),n.updateQueue=Y}else W.add(c);break e}else{if(!(n&1)){Xc(s,g,n),Zd();break e}c=Error(Fe(426))}}else if(bn&&d.mode&1){var Ue=Kc(l);if(Ue!==null){!(Ue.flags&65536)&&(Ue.flags|=256),Jc(Ue,l,d,s,n),Ed(Ir(c,d));break e}}s=c=Ir(c,d),An!==4&&(An=2),ns===null?ns=[s]:ns.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,n&=-n,s.lanes|=n;var p=ep(s,c,n);Hc(s,p);break e;case 1:d=c;var b=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Fo===null||!Fo.has(C)))){s.flags|=65536,n&=-n,s.lanes|=n;var f=tp(s,d,n);Hc(s,f);break e}}s=s.return}while(s!==null)}vp(i)}catch(P){n=P,Rn===i&&i!==null&&(Rn=i=i.return);continue}break}while(!0)}function mp(){var t=vl.current;return vl.current=bl,t===null?bl:t}function Zd(){(An===0||An===3||An===2)&&(An=4),On===null||!(nr&268435455)&&!(Wl&268435455)||zo(On,Nn)}function wl(t,n){var i=on;on|=2;var o=mp();(On!==t||Nn!==n)&&(oo=null,Qo(t,n));do try{Xh();break}catch(r){yp(t,r)}while(!0);if(Ad(),on=i,vl.current=o,Rn!==null)throw Error(Fe(261));return On=null,Nn=0,An}function Xh(){for(;Rn!==null;)bp(Rn)}function Kh(){for(;Rn!==null&&!vg();)bp(Rn)}function bp(t){var n=Sp(t.alternate,t,bi);t.memoizedProps=t.pendingProps,n===null?vp(t):Rn=n,Yd.current=null}function vp(t){var n=t;do{var i=n.alternate;if(t=n.return,n.flags&32768){if(i=Hh(i,n),i!==null){i.flags&=32767,Rn=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{An=6,Rn=null;return}}else if(i=Nh(i,n,bi),i!==null){Rn=i;return}if(n=n.sibling,n!==null){Rn=n;return}Rn=n=t}while(n!==null);An===0&&(An=5)}function Yo(t,n,i){var o=dn,r=Ei.transition;try{Ei.transition=null,dn=1,Jh(t,n,i,o)}finally{Ei.transition=r,dn=o}return null}function Jh(t,n,i,o){do _r();while(Bo!==null);if(on&6)throw Error(Fe(327));i=t.finishedWork;var r=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(Bg(t,s),t===On&&(Rn=On=null,Nn=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Ns||(Ns=!0,wp(ol,function(){return _r(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=Ei.transition,Ei.transition=null;var l=dn;dn=1;var d=on;on|=4,Yd.current=null,Vh(t,i),hp(i,t),xh(Pa),sl=!!Oa,Pa=Oa=null,t.current=i,Uh(i),jg(),on=d,dn=l,Ei.transition=s}else t.current=i;if(Ns&&(Ns=!1,Bo=t,Sl=r),s=t.pendingLanes,s===0&&(Fo=null),kg(i.stateNode),yi(t,Cn()),n!==null)for(o=t.onRecoverableError,i=0;i<n.length;i++)r=n[i],o(r.value,{componentStack:r.stack,digest:r.digest});if(jl)throw jl=!1,t=rd,rd=null,t;return Sl&1&&t.tag!==0&&_r(),s=t.pendingLanes,s&1?t===sd?is++:(is=0,sd=t):is=0,$o(),null}function _r(){if(Bo!==null){var t=q0(Sl),n=Ei.transition,i=dn;try{if(Ei.transition=null,dn=16>t?16:t,Bo===null)var o=!1;else{if(t=Bo,Bo=null,Sl=0,on&6)throw Error(Fe(331));var r=on;for(on|=4,dt=t.current;dt!==null;){var s=dt,l=s.child;if(dt.flags&16){var d=s.deletions;if(d!==null){for(var c=0;c<d.length;c++){var g=d[c];for(dt=g;dt!==null;){var w=dt;switch(w.tag){case 0:case 11:case 15:ts(8,w,s)}var y=w.child;if(y!==null)y.return=w,dt=y;else for(;dt!==null;){w=dt;var u=w.sibling,L=w.return;if(fp(w),w===g){dt=null;break}if(u!==null){u.return=L,dt=u;break}dt=L}}}var W=s.alternate;if(W!==null){var Y=W.child;if(Y!==null){W.child=null;do{var Ue=Y.sibling;Y.sibling=null,Y=Ue}while(Y!==null)}}dt=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,dt=l;else e:for(;dt!==null;){if(s=dt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ts(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,dt=p;break e}dt=s.return}}var b=t.current;for(dt=b;dt!==null;){l=dt;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,dt=C;else e:for(l=b;dt!==null;){if(d=dt,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Al(9,d)}}catch(P){kn(d,d.return,P)}if(d===l){dt=null;break e}var f=d.sibling;if(f!==null){f.return=d.return,dt=f;break e}dt=d.return}}if(on=r,$o(),qi&&typeof qi.onPostCommitFiberRoot=="function")try{qi.onPostCommitFiberRoot(Cl,t)}catch{}o=!0}return o}finally{dn=i,Ei.transition=n}}return!1}function d0(t,n,i){n=Ir(i,n),n=ep(t,n,1),t=Wo(t,n,1),n=ni(),t!==null&&(Ss(t,1,n),yi(t,n))}function kn(t,n,i){if(t.tag===3)d0(t,t,i);else for(;n!==null;){if(n.tag===3){d0(n,t,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Fo===null||!Fo.has(o))){t=Ir(i,t),t=tp(n,t,1),n=Wo(n,t,1),t=ni(),n!==null&&(Ss(n,1,t),yi(n,t));break}}n=n.return}}function Qh(t,n,i){var o=t.pingCache;o!==null&&o.delete(n),n=ni(),t.pingedLanes|=t.suspendedLanes&i,On===t&&(Nn&i)===i&&(An===4||An===3&&(Nn&130023424)===Nn&&500>Cn()-Kd?Qo(t,0):Xd|=i),yi(t,n)}function jp(t,n){n===0&&(t.mode&1?(n=Is,Is<<=1,!(Is&130023424)&&(Is=4194304)):n=1);var i=ni();t=po(t,n),t!==null&&(Ss(t,n,i),yi(t,i))}function Zh(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),jp(t,i)}function qh(t,n){var i=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(Fe(314))}o!==null&&o.delete(n),jp(t,i)}var Sp;Sp=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||ui.current)hi=!0;else{if(!(t.lanes&i)&&!(n.flags&128))return hi=!1,Dh(t,n,i);hi=!!(t.flags&131072)}else hi=!1,bn&&n.flags&1048576&&Cf(n,gl,n.index);switch(n.lanes=0,n.tag){case 2:var o=n.type;Qs(t,n),t=n.pendingProps;var r=Tr(n,Kn.current);kr(n,i),r=Hd(null,n,o,t,r,i);var s=$d();return n.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,xi(o)?(s=!0,fl(n)):s=!1,n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Md(n),r.updater=Ll,n.stateNode=r,r._reactInternals=n,Xa(n,o,t,i),n=Qa(null,n,o,!0,s,i)):(n.tag=0,bn&&s&&Bd(n),ti(null,n,r,i),n=n.child),n;case 16:o=n.elementType;e:{switch(Qs(t,n),t=n.pendingProps,r=o._init,o=r(o._payload),n.type=o,r=n.tag=tu(o),t=Di(o,t),r){case 0:n=Ja(null,n,o,t,i);break e;case 1:n=qc(null,n,o,t,i);break e;case 11:n=Qc(null,n,o,t,i);break e;case 14:n=Zc(null,n,o,Di(o.type,t),i);break e}throw Error(Fe(306,o,""))}return n;case 0:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Di(o,r),Ja(t,n,o,r,i);case 1:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Di(o,r),qc(t,n,o,r,i);case 3:e:{if(rp(n),t===null)throw Error(Fe(387));o=n.pendingProps,s=n.memoizedState,r=s.element,Ef(t,n),xl(n,o,null,i);var l=n.memoizedState;if(o=l.element,s.isDehydrated)if(s={element:o,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=s,n.memoizedState=s,n.flags&256){r=Ir(Error(Fe(423)),n),n=e0(t,n,o,i,r);break e}else if(o!==r){r=Ir(Error(Fe(424)),n),n=e0(t,n,o,i,r);break e}else for(vi=Ao(n.stateNode.containerInfo.firstChild),ji=n,bn=!0,Hi=null,i=Bf(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(zr(),o===r){n=go(t,n,i);break e}ti(t,n,o,i)}n=n.child}return n;case 5:return Lf(n),t===null&&Ua(n),o=n.type,r=n.pendingProps,s=t!==null?t.memoizedProps:null,l=r.children,Da(o,r)?l=null:s!==null&&Da(o,s)&&(n.flags|=32),op(t,n),ti(t,n,l,i),n.child;case 6:return t===null&&Ua(n),null;case 13:return sp(t,n,i);case 4:return Od(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Rr(n,null,o,i):ti(t,n,o,i),n.child;case 11:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Di(o,r),Qc(t,n,o,r,i);case 7:return ti(t,n,n.pendingProps,i),n.child;case 8:return ti(t,n,n.pendingProps.children,i),n.child;case 12:return ti(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(o=n.type._context,r=n.pendingProps,s=n.memoizedProps,l=r.value,un(hl,o._currentValue),o._currentValue=l,s!==null)if(Ui(s.value,l)){if(s.children===r.children&&!ui.current){n=go(t,n,i);break e}}else for(s=n.child,s!==null&&(s.return=n);s!==null;){var d=s.dependencies;if(d!==null){l=s.child;for(var c=d.firstContext;c!==null;){if(c.context===o){if(s.tag===1){c=ao(-1,i&-i),c.tag=2;var g=s.updateQueue;if(g!==null){g=g.shared;var w=g.pending;w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c}}s.lanes|=i,c=s.alternate,c!==null&&(c.lanes|=i),Ga(s.return,i,n),d.lanes|=i;break}c=c.next}}else if(s.tag===10)l=s.type===n.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(Fe(341));l.lanes|=i,d=l.alternate,d!==null&&(d.lanes|=i),Ga(l,i,n),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===n){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}ti(t,n,r.children,i),n=n.child}return n;case 9:return r=n.type,o=n.pendingProps.children,kr(n,i),r=Li(r),o=o(r),n.flags|=1,ti(t,n,o,i),n.child;case 14:return o=n.type,r=Di(o,n.pendingProps),r=Di(o.type,r),Zc(t,n,o,r,i);case 15:return np(t,n,n.type,n.pendingProps,i);case 17:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Di(o,r),Qs(t,n),n.tag=1,xi(o)?(t=!0,fl(n)):t=!1,kr(n,i),qf(n,o,r),Xa(n,o,r,i),Qa(null,n,o,!0,t,i);case 19:return lp(t,n,i);case 22:return ip(t,n,i)}throw Error(Fe(156,n.tag))};function wp(t,n){return K0(t,n)}function eu(t,n,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(t,n,i,o){return new eu(t,n,i,o)}function qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tu(t){if(typeof t=="function")return qd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===bd)return 14}return 2}function Oo(t,n){var i=t.alternate;return i===null?(i=Ii(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function el(t,n,i,o,r,s){var l=2;if(o=t,typeof t=="function")qd(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case dr:return Zo(i.children,r,s,n);case yd:l=8,r|=8;break;case ma:return t=Ii(12,i,n,r|2),t.elementType=ma,t.lanes=s,t;case ba:return t=Ii(13,i,n,r),t.elementType=ba,t.lanes=s,t;case va:return t=Ii(19,i,n,r),t.elementType=va,t.lanes=s,t;case E0:return Fl(i,r,s,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B0:l=10;break e;case I0:l=9;break e;case md:l=11;break e;case bd:l=14;break e;case _o:l=16,o=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return n=Ii(l,i,n,r),n.elementType=t,n.type=o,n.lanes=s,n}function Zo(t,n,i,o){return t=Ii(7,t,o,n),t.lanes=i,t}function Fl(t,n,i,o){return t=Ii(22,t,o,n),t.elementType=E0,t.lanes=i,t.stateNode={isHidden:!1},t}function pa(t,n,i){return t=Ii(6,t,null,n),t.lanes=i,t}function ga(t,n,i){return n=Ii(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function nu(t,n,i,o,r){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ec(t,n,i,o,r,s,l,d,c){return t=new nu(t,n,i,d,c),n===1?(n=1,s===!0&&(n|=8)):n=0,s=Ii(3,null,null,n),t.current=s,s.stateNode=t,s.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(s),t}function iu(t,n,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ar,key:o==null?null:""+o,children:t,containerInfo:n,implementation:i}}function kp(t){if(!t)return Do;t=t._reactInternals;e:{if(rr(t)!==t||t.tag!==1)throw Error(Fe(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(xi(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Fe(171))}if(t.tag===1){var i=t.type;if(xi(i))return kf(t,i,n)}return n}function _p(t,n,i,o,r,s,l,d,c){return t=ec(i,o,!0,t,r,s,l,d,c),t.context=kp(null),i=t.current,o=ni(),r=Mo(i),s=ao(o,r),s.callback=n??null,Wo(i,s,r),t.current.lanes=r,Ss(t,r,o),yi(t,o),t}function Ml(t,n,i,o){var r=n.current,s=ni(),l=Mo(r);return i=kp(i),n.context===null?n.context=i:n.pendingContext=i,n=ao(s,l),n.payload={element:t},o=o===void 0?null:o,o!==null&&(n.callback=o),t=Wo(r,n,l),t!==null&&(Vi(t,r,l,s),Xs(t,r,l)),l}function kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function tc(t,n){c0(t,n),(t=t.alternate)&&c0(t,n)}function ou(){return null}var Cp=typeof reportError=="function"?reportError:function(t){console.error(t)};function nc(t){this._internalRoot=t}Ol.prototype.render=nc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(Fe(409));Ml(t,n,null,null)};Ol.prototype.unmount=nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ir(function(){Ml(null,t,null,null)}),n[fo]=null}};function Ol(t){this._internalRoot=t}Ol.prototype.unstable_scheduleHydration=function(t){if(t){var n=nf();t={blockedOn:null,target:t,priority:n};for(var i=0;i<To.length&&n!==0&&n<To[i].priority;i++);To.splice(i,0,t),i===0&&rf(t)}};function ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f0(){}function ru(t,n,i,o,r){if(r){if(typeof o=="function"){var s=o;o=function(){var g=kl(l);s.call(g)}}var l=_p(n,o,t,0,null,!1,!1,"",f0);return t._reactRootContainer=l,t[fo]=l.current,ps(t.nodeType===8?t.parentNode:t),ir(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var d=o;o=function(){var g=kl(c);d.call(g)}}var c=ec(t,0,!1,null,null,!1,!1,"",f0);return t._reactRootContainer=c,t[fo]=c.current,ps(t.nodeType===8?t.parentNode:t),ir(function(){Ml(n,c,i,o)}),c}function Dl(t,n,i,o,r){var s=i._reactRootContainer;if(s){var l=s;if(typeof r=="function"){var d=r;r=function(){var c=kl(l);d.call(c)}}Ml(n,l,t,r)}else l=ru(i,n,t,r,o);return kl(l)}ef=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=Yr(n.pendingLanes);i!==0&&(Sd(n,i|1),yi(n,Cn()),!(on&6)&&(Er=Cn()+500,$o()))}break;case 13:ir(function(){var o=po(t,1);if(o!==null){var r=ni();Vi(o,t,1,r)}}),tc(t,1)}};wd=function(t){if(t.tag===13){var n=po(t,134217728);if(n!==null){var i=ni();Vi(n,t,134217728,i)}tc(t,134217728)}};tf=function(t){if(t.tag===13){var n=Mo(t),i=po(t,n);if(i!==null){var o=ni();Vi(i,t,n,o)}tc(t,n)}};nf=function(){return dn};of=function(t,n){var i=dn;try{return dn=t,n()}finally{dn=i}};Ba=function(t,n,i){switch(n){case"input":if(wa(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==t&&o.form===t.form){var r=Bl(o);if(!r)throw Error(Fe(90));A0(o),wa(o,r)}}}break;case"textarea":F0(t,i);break;case"select":n=i.value,n!=null&&vr(t,!!i.multiple,n,!1)}};$0=Jd;V0=ir;var su={usingClientEntryPoint:!1,Events:[ks,gr,Bl,N0,H0,Jd]},$r={findFiberByHostInstance:Xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:$r.bundleType,version:$r.version,rendererPackageName:$r.rendererPackageName,rendererConfig:$r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ho.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y0(t),t===null?null:t.stateNode},findFiberByHostInstance:$r.findFiberByHostInstance||ou,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{Cl=Hs.inject(lu),qi=Hs}catch{}}wi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=su;wi.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ic(n))throw Error(Fe(200));return iu(t,n,null,i)};wi.createRoot=function(t,n){if(!ic(t))throw Error(Fe(299));var i=!1,o="",r=Cp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),n=ec(t,1,!1,null,null,i,!1,o,r),t[fo]=n.current,ps(t.nodeType===8?t.parentNode:t),new nc(n)};wi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=Y0(n),t=t===null?null:t.stateNode,t};wi.flushSync=function(t){return ir(t)};wi.hydrate=function(t,n,i){if(!Pl(n))throw Error(Fe(200));return Dl(null,t,n,!0,i)};wi.hydrateRoot=function(t,n,i){if(!ic(t))throw Error(Fe(405));var o=i!=null&&i.hydratedSources||null,r=!1,s="",l=Cp;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(l=i.onRecoverableError)),n=_p(n,null,t,1,i??null,r,!1,s,l),t[fo]=n.current,ps(t),o)for(t=0;t<o.length;t++)i=o[t],r=i._getVersion,r=r(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,r]:n.mutableSourceEagerHydrationData.push(i,r);return new Ol(n)};wi.render=function(t,n,i){if(!Pl(n))throw Error(Fe(200));return Dl(null,t,n,!1,i)};wi.unmountComponentAtNode=function(t){if(!Pl(t))throw Error(Fe(40));return t._reactRootContainer?(ir(function(){Dl(null,null,t,!1,function(){t._reactRootContainer=null,t[fo]=null})}),!0):!1};wi.unstable_batchedUpdates=Jd;wi.unstable_renderSubtreeIntoContainer=function(t,n,i,o){if(!Pl(i))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return Dl(t,n,i,!1,o)};wi.version="18.3.1-next-f1338f8080-20240426";function Tp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tp)}catch(t){console.error(t)}}Tp(),C0.exports=wi;var au=C0.exports,p0=au;xa.createRoot=p0.createRoot,xa.hydrateRoot=p0.hydrateRoot;var g0={},du="@vercel/speed-insights",cu="1.3.1",fu=()=>{window.si||(window.si=function(...n){(window.siq=window.siq||[]).push(n)})};function pu(){return typeof window<"u"}function gu(){try{const t="production"}catch{}return"production"}function zp(){return gu()==="development"}function hu(t){return t.scriptSrc?t.scriptSrc:zp()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function uu(t={}){var n;if(!pu()||t.route===null)return null;fu();const i=hu(t);if(document.head.querySelector(`script[src*="${i}"]`))return null;t.beforeSend&&((n=window.si)==null||n.call(window,"beforeSend",t.beforeSend));const o=document.createElement("script");return o.src=i,o.defer=!0,o.dataset.sdkn=du+(t.framework?`/${t.framework}`:""),o.dataset.sdkv=cu,t.sampleRate&&(o.dataset.sampleRate=t.sampleRate.toString()),t.route&&(o.dataset.route=t.route),t.endpoint?o.dataset.endpoint=t.endpoint:t.basePath&&(o.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(o.dataset.dsn=t.dsn),zp()&&t.debug===!1&&(o.dataset.debug="false"),o.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${i}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(o),{setRoute:r=>{o.dataset.route=r??void 0}}}function xu(){if(!(typeof process>"u"||typeof g0>"u"))return g0.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function yu(t){I.useEffect(()=>{var i;t.beforeSend&&((i=window.si)==null||i.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const n=I.useRef(null);return I.useEffect(()=>{if(n.current)t.route&&n.current(t.route);else{const i=uu({framework:t.framework??"react",basePath:t.basePath??xu(),...t});i&&(n.current=i.setRoute)}},[t.route]),null}const mu=({gexData:t,currentPrice:n})=>{const[i,o]=I.useState("table"),[r,s]=I.useState(10),[l,d]=I.useState(null),[c,g]=I.useState(null),w=(t==null?void 0:t.gex_profile)||[];t!=null&&t.gex_levels;const y=(t==null?void 0:t.gamma_regime)||"UNKNOWN",u=(t==null?void 0:t.total_gex)||0,L=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0,W=(t==null?void 0:t.max_pain)||0;t!=null&&t.call_wall,t!=null&&t.put_wall,t!=null&&t.hvl;const Y=w.filter(v=>Math.abs(v.gex)>.1).sort((v,_e)=>_e.strike-v.strike).slice(0,r).map(v=>{const _e=v.gex<0,le=n?Math.round(v.strike-n):0,Ne=Math.round(50+Math.abs(v.gex)*10),it=100-Ne;return{strike:v.strike,gex:v.gex,type:_e?"CALL":"PUT",wallType:Math.abs(v.gex)>.5?"WALL":"LEVEL",role:_e?v.strike>n?"POT. RESISTANCE":"POT. RESISTANCE (EX-SUPP)":(v.strike<n,"POT. SUPPORT"),distance:le,holdPct:Math.min(Ne,85),breakPct:Math.max(it,15),callPct:_e?70+Math.random()*20:10+Math.random()*20,putPct:_e?30-Math.random()*20:80+Math.random()*10,mass:Math.abs(v.gex).toFixed(1),effective:Math.abs(v.gex*.9).toFixed(1),integrity:Math.round(85+Math.random()*15),fieldHigh:v.strike+8,fieldLow:v.strike-8,influence:Math.round(15+Math.random()*10)}}),Ue=n?n*1.015:0,p=n?n*.985:0,b=n?n*1.012:0,C=n?n*.988:0,f={cyan:"#22d3ee",green:"#22c55e",red:"#ef4444",amber:"#f59e0b",purple:"#a855f7",magenta:"#ec4899",border:"rgba(34, 211, 238, 0.2)",text:"#f4f4f5",textMuted:"#71717a"},P=v=>{const _e=Y.findIndex(it=>it.strike===v.strike),le=Y[_e+1],Ne=Y[_e-1];return{nextLevel:le,prevLevel:Ne}},S=({level:v,onClose:_e})=>{if(!v)return null;const{nextLevel:le,prevLevel:Ne}=P(v),it=L?Math.round(v.strike-L):0,Rt=v.gex<0,Ke=Rt?v.strike>n?"Continuation Short":"Reversal Long":v.strike<n?"Continuation Long":"Reversal Short";return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:_e,children:e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20, 22, 35, 0.98) 0%, rgba(15, 17, 28, 0.99) 100%)",borderRadius:16,width:560,maxWidth:"90vw",maxHeight:"85vh",overflow:"auto",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},onClick:Xe=>Xe.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("span",{style:{fontSize:32,fontWeight:700,color:v.type==="PUT"?f.cyan:f.magenta,fontFamily:"'JetBrains Mono', monospace"},children:v.strike}),e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:v.type==="PUT"?f.cyan:f.magenta},children:[v.type," ",v.wallType]}),e.jsx("span",{style:{padding:"4px 10px",background:v.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${v.role.includes("SUPPORT")?f.green:f.red}`,borderRadius:4,fontSize:10,fontWeight:600,color:v.role.includes("SUPPORT")?f.green:f.red},children:v.role.includes("SUPPORT")?"POTENTIAL SUPPORT":"POTENTIAL RESISTANCE"})]}),e.jsxs("div",{style:{fontSize:11,color:f.textMuted},children:[e.jsx("span",{style:{color:Rt?f.red:f.green},children:Rt?"NEGATIVE GAMMA":"POSITIVE GAMMA"}),e.jsx("span",{style:{margin:"0 8px"},children:"|"}),"ZG Dist: ",it>0?"+":"",it]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"DISTANCE FROM SPOT"}),e.jsxs("div",{style:{fontSize:28,fontWeight:600,color:v.distance>0?f.green:f.red},children:[v.distance>0?"+":"",v.distance,e.jsx("span",{style:{fontSize:14,color:f.textMuted,marginLeft:4},children:"pts"})]}),e.jsx("button",{onClick:_e,style:{position:"absolute",top:16,right:16,background:"transparent",border:"none",color:f.textMuted,fontSize:24,cursor:"pointer",padding:4},children:""})]})]}),e.jsxs("div",{style:{padding:24},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:4},children:" REGIME EXPECTED REACTION"}),e.jsx("div",{style:{fontSize:24,fontWeight:600,color:Ke.includes("Long")?f.cyan:f.magenta,fontFamily:"'JetBrains Mono', monospace"},children:Ke})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:f.cyan,letterSpacing:"0.1em",textAlign:"center",marginBottom:16},children:"DEALER POSITIONING & GREEKS"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:f.textMuted},children:"TOT GEX PROFILE"}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,color:v.gex<0?f.magenta:f.cyan},children:[(v.gex*1e3).toFixed(1),"M"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{width:`${Math.min(Math.abs(v.gex)*100,90)}%`,height:"100%",background:v.gex<0?"linear-gradient(90deg, rgba(236,72,153,0.8), rgba(236,72,153,0.4))":"linear-gradient(90deg, rgba(34,211,238,0.8), rgba(34,211,238,0.4))",borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:16},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"SPEED"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.text},children:[(Math.abs(v.gex)*60).toFixed(1),"K"]})]}),e.jsxs("div",{style:{textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"VANNA"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.cyan},children:[(Math.abs(v.gex)*25).toFixed(1),"M"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"CHARM"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.magenta},children:[(v.gex*-500).toFixed(1),"M"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",textAlign:"center",marginBottom:12},children:"HOLD / BREAK PROBABILITIES"}),e.jsxs("div",{style:{display:"flex",height:28,borderRadius:6,overflow:"hidden",fontSize:11,fontWeight:600},children:[e.jsxs("div",{style:{width:`${v.holdPct}%`,background:f.green,display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:["Hold ",v.holdPct,"%"]}),e.jsxs("div",{style:{width:`${v.breakPct}%`,background:f.red,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:["Break ",v.breakPct,"%"]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,borderLeft:`3px solid ${f.amber}`},children:[e.jsxs("div",{style:{fontSize:12,color:f.text,marginBottom:8},children:[e.jsx("strong",{children:"High Sensitivity."})," Dealer hedging activity increases rapidly here, creating potential for sharp reactions or rejection."]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(245,158,11,0.2)",border:`1px solid ${f.amber}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.amber},children:"REACTIVE ZONE"})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:16},children:"STRUCTURAL CONTEXT"}),le&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(239,68,68,0.2)",border:`1px solid ${f.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.red},children:"IF BREAK"}),e.jsxs("span",{style:{fontSize:12,color:f.text},children:["Next: ",le.type," ",le.wallType," (@ ",le.strike,")"]})]}),Ne&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.green},children:"IF HOLD"}),e.jsxs("span",{style:{fontSize:12,color:f.text},children:["Target: ",Ne.type," ",Ne.wallType," (@ ",Ne.strike,")"]})]})]})]})]})})},T=({label:v,value:_e,color:le=f.textMuted})=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 16px",background:"rgba(40, 40, 50, 0.4)",borderRadius:6,marginBottom:8},children:e.jsxs("span",{style:{fontSize:12,color:le,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.1em"},children:[" ",v,": ",_e," "]})}),E=()=>e.jsxs("div",{style:{background:"linear-gradient(90deg, rgba(34,211,238,0.1) 0%, rgba(34,211,238,0.2) 50%, rgba(34,211,238,0.1) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",border:"1px solid rgba(34,211,238,0.3)"},children:[e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:f.cyan,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" ZERO GAMMA FLIP: ",L.toFixed(2)," "]}),e.jsx("div",{style:{marginTop:4},children:e.jsxs("span",{style:{fontSize:10,color:f.textMuted},children:["Above: Dealers dampen volatility (",e.jsx("span",{style:{color:f.cyan},children:"Reversal Playbook"}),")"]})}),e.jsx("div",{style:{marginTop:2},children:e.jsxs("span",{style:{fontSize:10,color:f.textMuted},children:["Below: Dealers amplify volatility (",e.jsx("span",{style:{color:f.amber},children:"Trend/Breakout Playbook"}),")"]})})]}),ie=()=>e.jsx("div",{style:{background:"linear-gradient(90deg, rgba(234,179,8,0.2) 0%, rgba(234,179,8,0.4) 50%, rgba(234,179,8,0.2) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",boxShadow:"0 0 20px rgba(234,179,8,0.3)"},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:"#eab308",fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" CURRENT SPOT: ",(n==null?void 0:n.toFixed(2))||""," "]})}),U=({pts:v})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"8px 16px",background:"rgba(0,0,0,0.4)",borderRadius:6,margin:"8px 0"},children:[e.jsx("span",{style:{fontSize:14,color:f.textMuted,letterSpacing:"0.15em"},children:"LOW DENSITY"}),e.jsx("span",{style:{width:60,height:1,background:f.textMuted}}),e.jsxs("span",{style:{fontSize:12,color:f.textMuted},children:[v," PTS"]}),e.jsx("span",{style:{fontSize:12,color:f.amber,fontWeight:600},children:"FAST LANE"})]}),j=({holdPct:v,breakPct:_e,size:le="normal"})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsxs("span",{style:{fontSize:le==="small"?9:11,color:f.green},children:["H:",v,"%"]}),e.jsx("div",{style:{flex:1,height:le==="small"?4:6,background:f.red,borderRadius:3,overflow:"hidden",display:"flex"},children:e.jsx("div",{style:{width:`${v}%`,height:"100%",background:f.green}})}),e.jsxs("span",{style:{fontSize:le==="small"?9:11,color:f.red},children:["B:",_e,"%"]})]}),h=({value:v,maxVal:_e=1e3})=>{const le=Math.min(Math.abs(v)/_e*100,100),Ne=v>0;return e.jsx("div",{style:{width:"100%",height:6,background:"rgba(255,255,255,0.1)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${le}%`,height:"100%",background:Ne?"linear-gradient(90deg, #22c55e, #4ade80)":"linear-gradient(90deg, #22d3ee, #67e8f9)",borderRadius:3}})})},z=()=>e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:8},children:["LEVEL","TOT. GEX PROFILE","ROLE","CONFLUENCES","WARNING","HOLD / BREAK PROB."].map(v=>e.jsx("span",{style:{fontSize:10,color:f.textMuted,fontWeight:600,letterSpacing:"0.05em"},children:v},v))}),e.jsx(T,{label:"EM HIGH",value:Ue.toFixed(2)}),e.jsx(T,{label:"VOL BAND HIGH",value:b.toFixed(2)}),Y.filter(v=>v.strike>n).map((v,_e)=>{const le=l===`above-${_e}`;return e.jsxs("div",{onMouseEnter:()=>d(`above-${_e}`),onMouseLeave:()=>d(null),onClick:()=>g(v),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:le?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${v.type==="CALL"?f.green:f.magenta}`,transform:le?"translateX(4px)":"none",boxShadow:le?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[le&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:f.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:v.type==="CALL"?f.green:f.magenta},children:v.strike}),e.jsxs("div",{style:{fontSize:10,color:v.type==="CALL"?f.green:f.magenta},children:[v.type," WALL"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:f.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:f.text,marginBottom:4},children:[(v.gex*1e3).toFixed(1),"M"]}),e.jsx(h,{value:v.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:v.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${v.role.includes("SUPPORT")?f.green:f.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:v.role.includes("SUPPORT")?f.green:f.red},children:v.role})}),e.jsx("div",{style:{fontSize:10,color:f.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${f.amber}40`,borderRadius:4,color:f.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(j,{holdPct:v.holdPct,breakPct:v.breakPct})]},_e)}),e.jsx(E,{}),e.jsx(T,{label:"VOL BAND LOW",value:C.toFixed(2)}),e.jsx(T,{label:"MAX PAIN",value:W.toFixed(2)}),Y.filter(v=>v.strike<=n).slice(0,3).map((v,_e)=>{const le=l===`below-${_e}`;return e.jsxs("div",{onMouseEnter:()=>d(`below-${_e}`),onMouseLeave:()=>d(null),onClick:()=>g(v),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:le?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${f.cyan}`,transform:le?"translateX(4px)":"none",boxShadow:le?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[le&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:f.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:f.cyan},children:v.strike}),e.jsx("div",{style:{fontSize:10,color:f.cyan},children:"PUT WALL"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:f.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:f.text,marginBottom:4},children:[(v.gex*1e3).toFixed(1),"M"]}),e.jsx(h,{value:v.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.green},children:"POT. SUPPORT"})}),e.jsx("div",{style:{fontSize:10,color:f.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${f.amber}40`,borderRadius:4,color:f.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(j,{holdPct:v.holdPct,breakPct:v.breakPct})]},_e)}),e.jsx(ie,{}),e.jsx(T,{label:"EM LOW",value:p.toFixed(2)})]}),Ie=()=>e.jsxs("div",{children:[e.jsx(T,{label:"EM HIGH",value:Ue.toFixed(2)}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:Y.filter(v=>v.strike>n).slice(0,3).map((v,_e)=>e.jsxs("div",{onClick:()=>g(v),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:v.type==="CALL"?f.green:f.magenta},children:v.strike}),e.jsxs("div",{style:{fontSize:10,color:f.cyan},children:[v.type," WALL"]})]}),e.jsx("span",{style:{padding:"4px 8px",background:v.role.includes("RESISTANCE")?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",border:`1px solid ${v.role.includes("RESISTANCE")?f.red:f.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:v.role.includes("RESISTANCE")?f.red:f.green},children:v.role})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:10,color:f.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:f.text},children:[v.gex.toFixed(1),"M"]})]}),e.jsx(h,{value:v.gex*100})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(j,{holdPct:v.holdPct,breakPct:v.breakPct,size:"small"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:f.cyan},children:"BREAK"}),e.jsx("span",{style:{color:f.textMuted},children:"Open Space"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginTop:4},children:[e.jsx("span",{style:{color:f.green},children:"HOLD"}),e.jsx("span",{style:{color:f.textMuted},children:"Hold"})]})]})]},_e))}),e.jsx(E,{}),e.jsx(ie,{}),e.jsx(U,{pts:42}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:Y.filter(v=>v.strike<=n).slice(0,3).map((v,_e)=>e.jsxs("div",{onClick:()=>g(v),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:f.cyan},children:v.strike}),e.jsx("div",{style:{fontSize:10,color:f.cyan},children:"PUT WALL"})]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:f.green},children:"POT. SUPPORT"})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:10,color:f.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:f.text},children:[v.gex.toFixed(1),"M"]})]}),e.jsx(h,{value:v.gex*100})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:f.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(j,{holdPct:v.holdPct,breakPct:v.breakPct,size:"small"})]})]},_e))})]}),_=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,padding:"12px 16px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:f.textMuted}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted},children:"FIELD"}),e.jsx("div",{style:{fontSize:12,color:f.text,fontWeight:600},children:"NEUTRAL"})]})]}),e.jsx("span",{style:{padding:"6px 16px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:12,color:f.text},children:"WAIT"}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted},children:"MID"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:40,height:4,background:f.green,borderRadius:2}}),e.jsx("div",{style:{width:20,height:4,background:f.red,borderRadius:2}}),e.jsx("span",{style:{fontSize:11,color:f.text},children:"67%"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:11,color:f.purple},children:""}),e.jsx("span",{style:{fontSize:10,color:f.text},children:"QUANTUM FIELD"}),e.jsx("span",{style:{padding:"2px 6px",background:f.cyan,borderRadius:4,fontSize:8,color:"#000",fontWeight:600},children:"BETA"})]}),["EXPANDED","NAV","BOUNDS"].map(v=>e.jsx("span",{style:{padding:"4px 12px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:10,color:f.text},children:v},v)),e.jsxs("div",{style:{marginLeft:"auto",fontSize:11,color:f.textMuted},children:["LEVELS: ",r," | SPOT: ",e.jsx("span",{style:{color:f.amber},children:n==null?void 0:n.toFixed(2)})]})]}),Y.slice(0,r).map((v,_e)=>{const le=v.strike>n,Ne=Math.abs(v.strike-n)<10;return e.jsxs("div",{children:[Ne&&le&&e.jsx(ie,{}),e.jsxs("div",{onClick:()=>g(v),style:{background:`linear-gradient(90deg, rgba(139,92,246,${.1+Math.abs(v.gex)*.05}) 0%, rgba(139,92,246,${.2+Math.abs(v.gex)*.1}) 50%, rgba(139,92,246,${.1+Math.abs(v.gex)*.05}) 100%)`,padding:"20px 24px",marginBottom:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("div",{style:{width:4,height:30,background:v.type==="CALL"?f.green:f.cyan,borderRadius:2}}),e.jsx("span",{style:{fontSize:32,fontWeight:700,color:f.cyan,fontFamily:"'JetBrains Mono', monospace"},children:v.strike})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flex:1,justifyContent:"center"},children:[e.jsxs("span",{style:{fontSize:11,color:v.type==="CALL"?f.green:f.magenta},children:[v.type," | WALL"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(34,197,94,0.2)",border:`1px solid ${f.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:f.green},children:["POT. ","SUPPORT"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(255,255,255,0.1)",borderRadius:4,fontSize:9,color:f.textMuted},children:[Math.abs(v.distance),"pt ",v.distance>0?"above":"below"," spot"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"2px 8px",background:"rgba(0,0,0,0.3)",borderRadius:4},children:[e.jsxs("span",{style:{fontSize:9,color:f.green},children:["H:",v.holdPct,"%"]}),e.jsx("div",{style:{width:30,height:4,background:f.green,borderRadius:2}}),e.jsx("div",{style:{width:15,height:4,background:f.red,borderRadius:2}}),e.jsxs("span",{style:{fontSize:9,color:f.red},children:["B:",v.breakPct,"%"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:28,fontWeight:600,color:f.text},children:Math.abs(v.gex*100).toFixed(1)}),e.jsx("span",{style:{fontSize:14,color:f.textMuted},children:"M"}),e.jsxs("div",{style:{fontSize:10,color:f.textMuted},children:["18PT | L ",v.fieldHigh.toFixed(1)," - L ",v.fieldLow.toFixed(1)]})]})]}),_e===2&&e.jsx(U,{pts:42})]},_e)})]});Math.max(...w.map(v=>Math.abs(v.gex||0)),.01);const[Be,Oe]=I.useState(null),[ne,Ce]=I.useState({x:0,y:0});return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(11, 17, 32, 0.98) 0%, rgba(8, 12, 24, 0.99) 100%)",borderRadius:16,border:`1px solid ${f.border}`,padding:24,fontFamily:"'Inter', -apple-system, sans-serif",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h3",{style:{margin:0,color:f.text,fontSize:18,fontWeight:600},children:"GEX Profile"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:f.cyan,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:10,color:f.cyan,letterSpacing:"0.05em"},children:"LIVE"})]})]}),e.jsx("div",{style:{padding:"6px 12px",borderRadius:6,background:y==="POSITIVE"?"rgba(34,197,94,0.15)":y==="NEGATIVE"?"rgba(239,68,68,0.15)":"rgba(161,161,170,0.15)",border:`1px solid ${y==="POSITIVE"?f.green:y==="NEGATIVE"?f.red:f.textMuted}40`},children:e.jsxs("span",{style:{color:y==="POSITIVE"?f.green:y==="NEGATIVE"?f.red:f.textMuted,fontSize:12,fontWeight:600},children:[y," GEX: ",u>0?"+":"",u.toFixed(3),"B"]})})]}),e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.95)",borderRadius:12,padding:"16px 0",marginBottom:24,position:"relative",border:"1px solid rgba(255,255,255,0.05)",cursor:Be?"none":"default"},children:[e.jsx("div",{style:{position:"relative",display:"flex"},children:(()=>{const v=L||n||4600,Ne=[...w].filter(ee=>Math.abs(ee.strike-v)<=300).sort((ee,ke)=>Math.abs(ee.strike-v)-Math.abs(ke.strike-v)).slice(0,40).sort((ee,ke)=>ke.strike-ee.strike),it=Math.max(...Ne.map(ee=>Math.abs(ee.gex||0)),.01);n&&Ne.reduce((ee,ke)=>Math.abs(ke.strike-n)<Math.abs(ee.strike-n)?ke:ee,Ne[0]),L&&Ne.reduce((ee,ke)=>Math.abs(ke.strike-L)<Math.abs(ee.strike-L)?ke:ee,Ne[0]);const Rt=Ne.map(ee=>ee.strike),Ke=Math.min(...Rt),Xe=Math.max(...Rt),Pe=Math.ceil((Xe+20)/10)*10,oe=Math.floor((Ke-20)/10)*10,fe=Pe-oe,Se=900,O=[];for(let ee=Pe;ee>=oe;ee-=10)O.push(ee);return e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsx("div",{style:{width:55,height:Se,position:"relative",borderRight:"1px solid rgba(255,255,255,0.1)",marginRight:8,flexShrink:0},children:O.map((ee,ke)=>{const lt=(Pe-ee)/fe*Se;return e.jsx("div",{style:{position:"absolute",top:lt-6,right:8,fontSize:10,fontFamily:"'JetBrains Mono', monospace",color:"rgba(148,163,184,0.5)"},children:ee},ee)})}),e.jsxs("div",{style:{flex:1,height:Se,position:"relative"},children:[O.map(ee=>{const ke=(Pe-ee)/fe*Se;return e.jsx("div",{style:{position:"absolute",top:ke,left:0,right:0,height:1,background:"rgba(255,255,255,0.04)",pointerEvents:"none"}},`grid-${ee}`)}),n&&e.jsx("div",{style:{position:"absolute",top:(Pe-n)/fe*Se,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(132,204,22,0.8) 0%, rgba(132,204,22,0.2) 100%)",zIndex:5},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(132,204,22,0.2)",border:"1px solid rgba(132,204,22,0.4)",padding:"2px 6px",borderRadius:3,color:"#84cc16",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["SPOT ",n==null?void 0:n.toFixed(2)]})}),L&&Math.abs(L-n)>5&&e.jsx("div",{style:{position:"absolute",top:(Pe-L)/fe*Se,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(34,211,238,0.6) 0%, rgba(34,211,238,0.1) 100%)",zIndex:4},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(34,211,238,0.15)",border:"1px solid rgba(34,211,238,0.35)",padding:"2px 6px",borderRadius:3,color:"#22d3ee",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["ZG ",L==null?void 0:L.toFixed(0)]})}),Ne.map((ee,ke)=>{const lt=(ee.gex||0)<0,He=Math.min(Math.abs(ee.gex||0)/it*60,60),Le=(Be==null?void 0:Be.strike)===ee.strike,Je=Math.abs(ee.gex||0),At=Je>=1?`${Je.toFixed(1)}B`:`${(Je*1e3).toFixed(0)}M`,J=Je>it*.25,ot=n?Math.abs(Math.round(ee.strike-n)):0,rt=ee.call_oi||0,Qe=ee.put_oi||0,re=rt+Qe||1,a=Math.round(rt/re*100),m=100-a,F=lt?"#22d3ee":"#f472b6",B=(Pe-ee.strike)/fe*Se;return e.jsxs("div",{onMouseEnter:A=>{Ce({x:A.clientX,y:A.clientY}),Oe({strike:ee.strike,gex:ee.gex,isCall:lt,gexLabel:At,isWall:J,callPct:a,putPct:m,callOI:rt,putOI:Qe,distance:n?Math.round(ee.strike-n):0})},onMouseMove:A=>Ce({x:A.clientX,y:A.clientY}),onMouseLeave:()=>Oe(null),style:{position:"absolute",top:B-12,left:0,right:0,display:"flex",alignItems:"center",height:24,cursor:Be?"none":"pointer",zIndex:Le?10:1},children:[e.jsx("div",{style:{width:`${He}%`,minWidth:He>3?10:0,height:Le?28:22,background:lt?"rgba(34, 211, 238, 0.5)":"rgba(244, 114, 182, 0.5)",backdropFilter:"blur(4px)",borderRadius:"3px 8px 8px 3px",border:lt?"1px solid rgba(34, 211, 238, 0.3)":"1px solid rgba(244, 114, 182, 0.3)",boxShadow:Le?lt?"0 0 12px rgba(34,211,238,0.7), 0 0 30px rgba(34,211,238,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 0 12px rgba(244,114,182,0.7), 0 0 30px rgba(244,114,182,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 2px 6px rgba(0,0,0,0.25)",transition:"all 0.15s ease-out",transform:Le?"scale(1.02)":"none",flexShrink:0}}),e.jsxs("div",{style:{marginLeft:8,display:"flex",alignItems:"center",gap:4,fontSize:10,fontFamily:"'Inter', sans-serif",whiteSpace:"nowrap"},children:[e.jsx("span",{style:{color:"rgba(148,163,184,0.6)"},children:""}),e.jsx("span",{style:{color:"rgba(255,255,255,0.85)",fontWeight:500},children:J?"WALL":"LEVEL"}),e.jsxs("span",{style:{color:F,fontWeight:600,background:lt?"rgba(34,211,238,0.12)":"rgba(244,114,182,0.12)",padding:"1px 5px",borderRadius:3},children:["(",lt?"CALL":"PUT",")"]}),e.jsx("span",{style:{color:"#fff",fontWeight:700,marginLeft:2},children:At}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.5)",fontSize:9},children:["[",ot,"pts]"]}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.4)",fontSize:9},children:["C:",a,"% P:",m,"%"]})]})]},ke)})]})]})})()}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:24,marginTop:14,paddingTop:10,paddingLeft:70,borderTop:"1px solid rgba(255,255,255,0.04)",fontSize:9,color:"rgba(148,163,184,0.5)",fontFamily:"'Inter', sans-serif"},children:[e.jsx("span",{children:" MAGNET (attractor)"}),e.jsx("span",{children:" WALL (barrier)"}),e.jsx("span",{children:"Glow = Field Width"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{margin:0,color:f.text,fontSize:18,fontWeight:600},children:"Strategic Levels"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(255,255,255,0.05)",borderRadius:6},children:[e.jsx("span",{style:{fontSize:11,color:f.textMuted},children:"LEVELS"}),e.jsx("select",{value:r,onChange:v=>s(Number(v.target.value)),style:{background:"transparent",border:"none",color:f.text,fontSize:12,cursor:"pointer"},children:[5,10,15,20].map(v=>e.jsx("option",{value:v,children:v},v))})]}),e.jsx("div",{style:{display:"flex",background:"rgba(255,255,255,0.05)",borderRadius:6,overflow:"hidden"},children:[{id:"table",icon:""},{id:"card",icon:""},{id:"quantum",icon:""}].map(v=>e.jsx("button",{onClick:()=>o(v.id),style:{padding:"8px 12px",background:i===v.id?f.purple:"transparent",border:"none",color:i===v.id?"#fff":f.textMuted,fontSize:14,cursor:"pointer",transition:"all 0.2s ease"},children:v.icon},v.id))})]})]}),i==="table"&&e.jsx(z,{}),i==="card"&&e.jsx(Ie,{}),i==="quantum"&&e.jsx(_,{}),c&&e.jsx(S,{level:c,onClose:()=>g(null)}),Be&&(()=>{var Xe;const v=Be.isCall?"#22d3ee":"#f472b6",_e=Be.isCall?"rgba(34,211,238,0.1)":"rgba(244,114,182,0.1)",le=Be.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)",Ne=Be.isCall?71:48,it=100-Ne;let Rt=ne.x+8,Ke=ne.y-8;return Rt+240>window.innerWidth-10&&(Rt=ne.x-248),Ke<10&&(Ke=10),Ke+340>window.innerHeight-10&&(Ke=window.innerHeight-350),e.jsxs("div",{style:{position:"fixed",left:Rt,top:Ke,width:240,background:"rgba(15, 23, 42, 0.98)",border:`1px solid ${le}`,borderRadius:12,padding:16,zIndex:99999,pointerEvents:"none",boxShadow:`0 0 20px ${Be.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)"}, 0 8px 32px rgba(0,0,0,0.5)`,fontFamily:"'Inter', sans-serif",transform:"translateZ(0)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[e.jsx("span",{style:{fontSize:30,fontWeight:700,color:v,fontFamily:"'JetBrains Mono', monospace"},children:(Xe=Be.strike)==null?void 0:Xe.toFixed(0)}),e.jsxs("span",{style:{fontSize:11,fontWeight:600,color:v,background:_e,padding:"4px 10px",borderRadius:5,border:`1px solid ${le}`},children:[" ",Be.isWall?"WALL":"LEVEL"," (",Be.isCall?"CALL":"PUT",")"]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.6)",marginBottom:5},children:[e.jsx("span",{children:"OPEN INTEREST"}),e.jsx("span",{style:{color:"#e2e8f0"},children:((Be.callOI||0)+(Be.putOI||0)).toLocaleString()})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsxs("span",{children:["C: ",(Be.callOI||0).toLocaleString()]}),e.jsxs("span",{children:["P: ",(Be.putOI||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${Be.callPct}%`,background:"#22d3ee"}}),e.jsx("div",{style:{width:`${Be.putPct}%`,background:"#f472b6"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:9,marginTop:3},children:[e.jsxs("span",{style:{color:"#22d3ee"},children:[Be.callPct,"%"]}),e.jsxs("span",{style:{color:"#f472b6"},children:[Be.putPct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",border:"1px solid rgba(139,92,246,0.2)",borderRadius:8,padding:10,marginBottom:14},children:[e.jsx("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:5},children:"QUANTUM FIELD"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#e2e8f0"},children:[e.jsxs("span",{children:["L ",(Be.strike+9).toFixed(0)]}),e.jsx("span",{style:{color:"rgba(148,163,184,0.4)"},children:""}),e.jsxs("span",{children:[(Be.strike-9).toFixed(0)," L"]})]}),e.jsx("div",{style:{fontSize:11,color:"#a855f7",textAlign:"center",marginTop:5},children:"18.4 pts influence"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:14},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"MASS"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:Be.gexLabel})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"EFFECTIVE"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:Be.gexLabel})]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"INTEGRITY"}),e.jsx("span",{style:{color:"#e2e8f0"},children:"100%"})]}),e.jsx("div",{style:{height:5,background:"rgba(0,0,0,0.4)",borderRadius:3},children:e.jsx("div",{style:{width:"100%",height:"100%",background:v,borderRadius:3}})})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"HOLD / BREAK"}),e.jsxs("span",{children:["H:",Ne,"% B:",it,"%"]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${Ne}%`,background:"#22c55e"}}),e.jsx("div",{style:{width:`${it}%`,background:"#ef4444"}})]})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:12,color:"rgba(148,163,184,0.6)",paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[Be.distance>0?"+":"",Be.distance," pts (",(Math.abs(Be.distance)/(n||1)*100).toFixed(2),"%)"]})]})})()]})},bu=()=>{const[t,n]=I.useState(new Date),[i,o]=I.useState(null);I.useEffect(()=>{const c=setInterval(()=>n(new Date),1e3);return()=>clearInterval(c)},[]);const r=[{id:"japan",name:"Japan",time:"19:00-20:00",color:"#9370DB",start:1900,end:2e3},{id:"china",name:"China",time:"20:00-23:00",color:"#F472B6",start:2e3,end:2300},{id:"deadzone",name:"Deadzone",time:"02:00-03:00",color:"#6B7280",start:200,end:300},{id:"london",name:"London",time:"03:00-06:00",color:"#3B82F6",start:300,end:600},{id:"us_ib",name:"US IB",time:"08:20-09:30",color:"#F59E0B",start:820,end:930},{id:"ny_1h",name:"NY 1H",time:"09:30-10:30",color:"#10B981",start:930,end:1030},{id:"ny_2h",name:"NY 2H",time:"10:30-11:30",color:"#06B6D4",start:1030,end:1130},{id:"lunch",name:"Lunch",time:"11:30-13:30",color:"#8B5CF6",start:1130,end:1330},{id:"ny_pm",name:"NY PM",time:"13:30-16:00",color:"#EF4444",start:1330,end:1600}],l=(()=>{const c=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),g=c.getHours(),w=c.getMinutes(),y=g*100+w;return y>=1900&&y<2e3?"japan":y>=2e3&&y<2300?"china":y>=200&&y<300?"deadzone":y>=300&&y<600?"london":y>=820&&y<930?"us_ib":y>=930&&y<1030?"ny_1h":y>=1030&&y<1130?"ny_2h":y>=1130&&y<1330?"lunch":y>=1330&&y<1600?"ny_pm":null})(),d=l!==null;return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",marginBottom:16,padding:"24px 16px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative",width:"100%"},children:[e.jsx("div",{style:{position:"absolute",top:60,left:50,right:50,height:1,background:"rgba(255,255,255,0.1)",zIndex:0}}),r.map((c,g)=>{const w=c.id===l,y=i===c.id,u=(()=>{if(!d)return!1;const W=r.findIndex(Y=>Y.id===l);return g<W})(),L=90;return e.jsx("div",{onMouseEnter:()=>o(c.id),onMouseLeave:()=>o(null),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",zIndex:y?10:1,cursor:"pointer",minWidth:80,height:120},children:e.jsxs("div",{style:{width:L,height:L,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,background:w?"linear-gradient(135deg, rgba(20,20,28,1) 0%, rgba(15,15,22,1) 100%)":y?"linear-gradient(135deg, rgba(30,30,40,1) 0%, rgba(25,25,35,1) 100%)":"rgb(20, 20, 28)",border:w?`2px solid ${c.color}`:y?`2px solid ${c.color}80`:"1px solid rgba(255,255,255,0.08)",opacity:d?u?.5:1:.7,transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:w?`0 0 25px ${c.color}50, 0 8px 32px rgba(0,0,0,0.4)`:y?`0 0 30px ${c.color}40, 0 12px 40px rgba(0,0,0,0.5)`:"0 4px 12px rgba(0,0,0,0.3)",position:"relative",transform:y?"scale(1.2) translateY(-5px)":"scale(1) translateY(0)",zIndex:y?5:1},children:[e.jsx("div",{style:{width:y?12:10,height:y?12:10,borderRadius:"50%",background:c.color,boxShadow:w||y?`0 0 12px ${c.color}`:"none",animation:w?"sessionDotPulse 1.5s ease-in-out infinite":"none",transition:"all 0.3s ease"}}),e.jsx("span",{style:{fontSize:y?16:14,color:w?c.color:y?"#fff":d?"#e5e5e5":"#888",fontWeight:600,textAlign:"center",lineHeight:1.1,transition:"all 0.3s ease",textShadow:y?`0 0 10px ${c.color}60`:"none"},children:c.name}),e.jsx("span",{style:{fontSize:y?9:8,color:w||y?c.color:d?"#666":"#555",fontFamily:"'JetBrains Mono', monospace",opacity:.9,transition:"all 0.3s ease"},children:c.time}),w&&d&&e.jsx("div",{style:{position:"absolute",bottom:-10,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000",fontSize:8,fontWeight:700,padding:"3px 10px",borderRadius:10,letterSpacing:"0.05em",boxShadow:"0 4px 12px rgba(0,255,136,0.6)",animation:"liveBadgePulse 2s ease-in-out infinite"},children:"LIVE"})]})},c.id)})]})}),e.jsx("style",{children:`
        @keyframes sessionDotPulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.7; transform: scale(1.2); }
        }
        @keyframes liveBadgePulse {
          0%, 100% { box-shadow: 0 4px 12px rgba(0,255,136,0.6); }
          50% { box-shadow: 0 4px 20px rgba(0,255,136,0.9); }
        }
      `})]})},vu=({gexData:t,currentPrice:n})=>{const[i,o]=I.useState(!1),[r,s]=I.useState(!1),l=(t==null?void 0:t.gamma_regime)||"UNKNOWN",d=(t==null?void 0:t.total_gex)||0,c=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0,g=(t==null?void 0:t.hvl)||0,w=n?(n-c).toFixed(1):0,y=n>c,u=54.09,L=17.73,W=94.8,Y=85,Ue=1.75,p={green:"#22c55e",red:"#ef4444",cyan:"#22d3ee",purple:"#a855f7",amber:"#f59e0b",text:"#f4f4f5",textMuted:"#71717a"};return i?e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:"16px 24px",marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:p.purple,fontSize:16,fontWeight:600},children:"Market Pulse"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:600,background:l==="NEGATIVE"?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",color:l==="NEGATIVE"?p.red:p.green},children:l})]}),e.jsx("button",{onClick:()=>o(!1),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:p.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"+ EXPAND"})]}):e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:p.purple,fontSize:18,fontWeight:600},children:"Market Pulse"})]}),e.jsx("button",{onClick:()=>o(!0),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:p.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:" COLLAPSE"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",gap:24},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:p.textMuted,letterSpacing:"0.1em",marginBottom:8},children:"GAMMA REGIME"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:l==="NEGATIVE"?p.red:p.green,boxShadow:`0 0 10px ${l==="NEGATIVE"?p.red:p.green}`}}),e.jsxs("span",{style:{fontSize:18,fontWeight:700,color:l==="NEGATIVE"?p.red:p.green,letterSpacing:"0.05em"},children:["CONFIRMED ",l]})]}),e.jsxs("div",{style:{fontSize:12,color:p.textMuted,marginBottom:16},children:["Net GEX: ",e.jsxs("span",{style:{color:d<0?p.red:p.green,fontWeight:600},children:[d.toFixed(2),"B"]})]}),e.jsx("div",{style:{fontSize:10,color:p.textMuted,letterSpacing:"0.1em",marginBottom:8,marginTop:24},children:"VOLATILITY REGIME"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:p.text,marginBottom:4},children:l==="NEGATIVE"?"EXPANSION":"CONTRACTION"}),e.jsxs("div",{style:{fontSize:12,color:p.cyan},children:["GVI Magnitude: ",e.jsx("span",{style:{fontWeight:600},children:Ue})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginBottom:16,fontSize:13,color:p.textMuted,lineHeight:1.6},children:["Spot price is ",e.jsxs("span",{style:{color:p.text,fontWeight:600},children:[Math.abs(w)," points ",y?"above":"below"," Zero Gamma"]}),".",l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[" Dealers hedge against explosive moves by amplifying volatility and reinforcing trend continuation. Requires ",e.jsx("span",{style:{color:p.amber},children:"extreme caution"})," around breakouts."]}):e.jsxs(e.Fragment,{children:[" Dealers hedge by dampening volatility and providing mean reversion. Expect ",e.jsx("span",{style:{color:p.green},children:"range-bound"})," price action."]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:[{label:"ATR",value:u.toFixed(2)},{label:"VIX",value:L.toFixed(2)},{label:"EXP. MOVE",value:W.toFixed(1)}].map(({label:b,value:C})=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:p.textMuted,marginBottom:6},children:b}),e.jsx("div",{style:{fontSize:20,fontWeight:600,color:p.text},children:C})]},b))}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:p.textMuted},children:"REALIZED VS EXPECTED RANGE"}),e.jsxs("span",{style:{fontSize:11,color:p.text},children:[Y," / ",W.toFixed(1)," (",Math.round(Y/W*100),"%)"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(Y/W*100,100)}%`,height:"100%",background:p.amber,borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:p.textMuted},children:"Sentiment (Skew):"}),e.jsx("span",{style:{color:p.text},children:"Neutral (-0.01)"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:p.textMuted},children:"Stability (Speed):"}),e.jsx("span",{style:{color:p.text},children:"Normal"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:p.textMuted},children:"Vanna:"}),e.jsx("span",{style:{color:p.cyan},children:"Vol Support"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:p.textMuted},children:"Charm:"}),e.jsx("span",{style:{color:p.text},children:"Price Pressure"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:p.textMuted},children:"Magnete Charm:"}),e.jsxs("span",{style:{color:p.purple},children:["Pressione (",c.toFixed(2),")"]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,background:"rgba(34,197,94,0.1)",borderRadius:8,marginTop:20,border:"1px solid rgba(34,197,94,0.3)"},children:[e.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:p.green,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:p.green,fontWeight:600,marginBottom:2},children:"VOLATILITY DIAGNOSIS"}),e.jsx("div",{style:{fontSize:12,color:p.textMuted},children:"Confirmation: The multi-factor analysis (Speed/Convexity) confirms the detected regime."})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"rgba(168,85,247,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,color:p.text,fontWeight:600},children:"AI Deep Analysis"}),e.jsx("div",{style:{fontSize:11,color:p.textMuted},children:"Market Structure & 0DTE Strategy"})]})]}),e.jsx("button",{onClick:()=>s(!r),style:{padding:"10px 20px",background:r?"rgba(168,85,247,0.3)":"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)",border:r?"1px solid #a855f7":"none",borderRadius:8,color:"#fff",fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:r?" CLOSE":" VIEW ANALYSIS"})]}),r&&e.jsxs("div",{style:{marginTop:16,padding:20,background:"linear-gradient(135deg, rgba(168,85,247,0.1) 0%, rgba(124,58,237,0.1) 100%)",border:"1px solid rgba(168,85,247,0.3)",borderRadius:12},children:[e.jsxs("div",{style:{fontSize:14,color:p.purple,fontWeight:600,marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," AI Market Structure Analysis"]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:p.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"MARKET CONTEXT"}),e.jsx("div",{style:{fontSize:13,color:p.text,lineHeight:1.7},children:l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:p.red,fontWeight:600},children:" High Volatility Environment:"})," The market is in a negative gamma regime, meaning dealers are short gamma and must hedge in the same direction as price moves. This creates a",e.jsx("span",{style:{color:p.amber},children:" feedback loop that amplifies volatility"}),"."]}),e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:p.cyan,fontWeight:600},children:"Key Implications:"}),e.jsx("br",{})," Breakouts tend to extend further than expected",e.jsx("br",{})," Mean reversion strategies carry higher risk",e.jsx("br",{})," Gamma squeezes can occur at key levels",e.jsx("br",{})," Stop runs are more likely"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:p.green,fontWeight:600},children:" Stable Environment:"})," The market is in a positive gamma regime, meaning dealers are long gamma and hedge against price moves. This creates a",e.jsx("span",{style:{color:p.green},children:" dampening effect that reduces volatility"}),"."]}),e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:p.cyan,fontWeight:600},children:"Key Implications:"}),e.jsx("br",{})," Price tends to revert to mean (VWAP, HVL)",e.jsx("br",{})," Range-bound trading strategies favored",e.jsx("br",{})," Breakout attempts often fade",e.jsx("br",{})," Options premium selling has edge"]})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:p.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"0DTE STRATEGY RECOMMENDATION"}),e.jsxs("div",{style:{padding:16,background:l==="NEGATIVE"?"rgba(239,68,68,0.1)":"rgba(34,197,94,0.1)",border:`1px solid ${l==="NEGATIVE"?"rgba(239,68,68,0.3)":"rgba(34,197,94,0.3)"}`,borderRadius:8},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:l==="NEGATIVE"?p.red:p.green,marginBottom:8},children:l==="NEGATIVE"?" TREND FOLLOWING / BREAKOUT":" MEAN REVERSION / RANGE"}),e.jsx("div",{style:{fontSize:12,color:p.text,lineHeight:1.6},children:l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[" Trade with momentum, not against it",e.jsx("br",{})," Use wider stops due to increased volatility",e.jsx("br",{})," Consider strangles/straddles for directional plays",e.jsx("br",{})," Watch for gamma squeeze at ",c.toFixed(2)," (Zero Gamma)"]}):e.jsxs(e.Fragment,{children:[" Fade moves away from VWAP and HVL",e.jsx("br",{})," Iron condors and butterflies have edge",e.jsx("br",{})," Tighter stops acceptable in low-vol environment",e.jsx("br",{})," Expect reversion to ",g>0?g.toFixed(2):c.toFixed(2)," (HVL/ZG)"]})})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:p.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"KEY GAMMA LEVELS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:p.textMuted,marginBottom:4},children:"ZERO GAMMA"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:p.amber},children:["$",c.toFixed(2)]}),e.jsxs("div",{style:{fontSize:9,color:n>c?p.green:p.red},children:[n>c?"":""," ",Math.abs(w)," pts"]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:p.textMuted,marginBottom:4},children:"HVL"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:p.cyan},children:["$",g>0?g.toFixed(2):"--"]}),e.jsx("div",{style:{fontSize:9,color:p.textMuted},children:"High Volume Level"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:p.textMuted,marginBottom:4},children:"NET GEX"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:d<0?p.red:p.green},children:[d.toFixed(2),"B"]}),e.jsx("div",{style:{fontSize:9,color:p.textMuted},children:d<0?"Dealer Short Gamma":"Dealer Long Gamma"})]})]})]})]})]})},nn="https://projecthorizon-production.up.railway.app",ha="https://projecthorizon-production.up.railway.app/redfolder",ju="18.7.0";console.log("Horizon v"+ju);const Su=I.createContext(null),Rp=I.createContext(null),wu=()=>I.useContext(Rp);I.createContext({isMobile:!1,isTablet:!1,screenWidth:1200});const uo=()=>{const[t,n]=I.useState({width:typeof window<"u"?window.innerWidth:1200,height:typeof window<"u"?window.innerHeight:800});return I.useEffect(()=>{const i=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",i),i(),()=>window.removeEventListener("resize",i)},[]),{isMobile:t.width<768,isTablet:t.width>=768&&t.width<1024,isDesktop:t.width>=1024,screenWidth:t.width,screenHeight:t.height}},Bp={deltaThreshold:-2500,buyingImbalancePct:400,entryTiers:{tier1:25,tier2:40,tier3:35},targetTiers:{vwap:50,ibMid:35,ibHigh:15},filters:{grades:{A:!0,B:!0,C:!0,F:!0},tiers:{1:!0,2:!0,3:!0},minR:-10},divergenceThreshold:0},ku=t=>{const n=[],i=new Date("2025-08-20"),o=new Date("2025-12-28");let r=12345;const s=()=>(r=(r*9301+49297)%233280,r/233280);let l=1,d=new Date(i);for(;d<=o;){if(s()<.35){const c=s()<.35?"A":s()<.65?"B":"C",g=s()<.25?1:s()<.65?2:3,w=["I","II","III"][g-1],y=c==="A"?.82:c==="B"?.71:.52,u=s()<y,L=u?s()<.5?"VWAP":s()<.7?"IB_MID":"IB_HIGH":"STOP_LOSS",W=Math.ceil(s()*8)+2,Y=L==="STOP_LOSS"?-1:1.5+s()*2,p=3320+(d-i)/(1e3*60*60*24)*.5+(s()-.5)*40,b=Math.round(Y*35*10*W);n.push({id:l++,date:d.toISOString().split("T")[0],entry:Math.round(p*100)/100,exit:Math.round((p+(u?Y*3.5:-3.5))*100)/100,stop_loss:Math.round((p-3.5)*100)/100,pnl:b,r:Math.round(Y*10)/10,grade:c,tier:g,tierRoman:w,exitReason:L,contracts:W,delta:-1500-Math.floor(s()*3500),buyingImbalance:250+Math.floor(s()*400),conditionsMet:c==="A"?6:c==="B"?5:4,levels:{ib_high:Math.round((p+15)*100)/100,ib_low:Math.round((p-10)*100)/100,ib_mid:Math.round((p+2.5)*100)/100,pdpoc:Math.round((p-5)*100)/100,vwap:Math.round((p+5)*100)/100,pd_high:Math.round((p+20)*100)/100,pd_low:Math.round((p-15)*100)/100}})}for(d.setDate(d.getDate()+1);d.getDay()===0||d.getDay()===6;)d.setDate(d.getDate()+1)}return n},_u=()=>{const[t,n]=I.useState({trades:null,stats:null,source:"loading",metadata:null,sessions:null,volumeProfiles:null,bigVolumeDays:null,supportResistance:null,seasonality:null,dailyCandles:null,hourlyCandles:null,featureStatistics:null,distributions:null});return I.useEffect(()=>{(async()=>{var o,r,s,l;try{const d=await fetch("/backtest_data.json");if(d.ok){const c=await d.json();if(c.trades&&c.trades.length>0){console.log(` Loaded ${c.trades.length} trades from ${((r=(o=c.metadata)==null?void 0:o.data_range)==null?void 0:r.start)||"backtest_data.json"} to ${(l=(s=c.metadata)==null?void 0:s.data_range)==null?void 0:l.end}`),n({trades:c.trades,stats:c.statistics||c.stats,source:"historical_5y",metadata:c.metadata,sessions:c.sessions,volumeProfiles:c.volume_profiles,bigVolumeDays:c.big_volume_days,supportResistance:c.support_resistance,seasonality:c.seasonality,dailyCandles:c.daily_candles,hourlyCandles:c.hourly_candles,featureStatistics:c.feature_statistics,distributions:c.distributions});return}}}catch(d){console.log("No backtest_data.json found:",d)}console.log("Using generated mock data (run generate_backtest.py for real data)"),n({trades:null,stats:null,source:"mock"})})()},[]),t},Cu=(t,n)=>{var P,S,T,E,ie,U;if(t.length===0)return{summary:{total_trades:0,winners:0,losers:0,win_rate:0,total_pnl:0,adjusted_pnl:0,gross_profit:0,gross_loss:0,profit_factor:0,avg_win:0,avg_loss:0,avg_r_multiple:0,max_drawdown:0,max_drawdown_pct:0,final_equity:1e6},yearly_pnl:[],weekly_pnl:[],exit_reasons:{VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0},grade_stats:{A:{trades:0,winners:0,pnl:0,win_rate:0},B:{trades:0,winners:0,pnl:0,win_rate:0},C:{trades:0,winners:0,pnl:0,win_rate:0}},tier_stats:{TIER_I:{trades:0,winners:0,pnl:0,win_rate:0},TIER_II:{trades:0,winners:0,pnl:0,win_rate:0},TIER_III:{trades:0,winners:0,pnl:0,win_rate:0}}};const i={1:(((P=n.entryTiers)==null?void 0:P.tier1)||25)/25,2:(((S=n.entryTiers)==null?void 0:S.tier2)||40)/40,3:(((T=n.entryTiers)==null?void 0:T.tier3)||35)/35},o={VWAP:(((E=n.targetTiers)==null?void 0:E.vwap)||50)/50,IB_MID:(((ie=n.targetTiers)==null?void 0:ie.ibMid)||35)/35,IB_HIGH:(((U=n.targetTiers)==null?void 0:U.ibHigh)||15)/15,STOP_LOSS:1},r=t.map(j=>{const h=i[j.tier]||1,z=j.pnl>0&&o[j.exitReason]||1,Ie=j.pnl*h*z;return{...j,adjustedPnl:Ie,originalPnl:j.pnl}}),s=r.filter(j=>j.adjustedPnl>0),l=r.filter(j=>j.adjustedPnl<=0),d=s.reduce((j,h)=>j+h.adjustedPnl,0),c=Math.abs(l.reduce((j,h)=>j+h.adjustedPnl,0)),g=d-c,w=t.reduce((j,h)=>j+h.pnl,0);let y=1e6,u=y,L=0;r.forEach(j=>{y+=j.adjustedPnl,y>u&&(u=y);const h=u-y;h>L&&(L=h)});const W={};r.forEach(j=>{const h=parseInt(j.date.split("-")[0]);W[h]||(W[h]={year:h,trades:0,winners:0,losers:0,pnl:0}),W[h].trades++,j.adjustedPnl>0?W[h].winners++:W[h].losers++,W[h].pnl+=j.adjustedPnl});const Y=Object.values(W).map(j=>({...j,win_rate:j.trades>0?j.winners/j.trades:0})).sort((j,h)=>j.year-h.year),Ue={};r.forEach(j=>{const h=new Date(j.date),z=h.getFullYear(),Ie=Math.ceil((h-new Date(z,0,1))/(7*24*60*60*1e3)),_=`${z}-W${Ie}`;Ue[_]||(Ue[_]={week:Ie,year:z,trades:0,pnl:0,winners:0}),Ue[_].trades++,Ue[_].pnl+=j.adjustedPnl,j.adjustedPnl>0&&Ue[_].winners++});const p=Object.values(Ue).map(j=>({...j,win_rate:j.trades>0?j.winners/j.trades:0})),b={VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0};t.forEach(j=>{b[j.exitReason]!==void 0&&b[j.exitReason]++});const C={A:{trades:0,winners:0,pnl:0},B:{trades:0,winners:0,pnl:0},C:{trades:0,winners:0,pnl:0}};r.forEach(j=>{C[j.grade]&&(C[j.grade].trades++,j.adjustedPnl>0&&C[j.grade].winners++,C[j.grade].pnl+=j.adjustedPnl)}),Object.keys(C).forEach(j=>{C[j].win_rate=C[j].trades>0?C[j].winners/C[j].trades:0});const f={TIER_I:{trades:0,winners:0,pnl:0},TIER_II:{trades:0,winners:0,pnl:0},TIER_III:{trades:0,winners:0,pnl:0}};return r.forEach(j=>{const h=["TIER_I","TIER_II","TIER_III"][j.tier-1]||"TIER_I";f[h].trades++,j.adjustedPnl>0&&f[h].winners++,f[h].pnl+=j.adjustedPnl}),Object.keys(f).forEach(j=>{f[j].win_rate=f[j].trades>0?f[j].winners/f[j].trades:0}),{summary:{total_trades:t.length,winners:s.length,losers:l.length,win_rate:t.length>0?s.length/t.length:0,total_pnl:g,original_pnl:w,pnl_difference:g-w,gross_profit:d,gross_loss:-c,profit_factor:c>0?d/c:d>0?1/0:0,avg_win:s.length>0?d/s.length:0,avg_loss:l.length>0?-c/l.length:0,avg_r_multiple:t.length>0?t.reduce((j,h)=>j+h.r,0)/t.length:0,max_drawdown:L,max_drawdown_pct:u>0?L/u:0,final_equity:1e6+g},yearly_pnl:Y,weekly_pnl:p,exit_reasons:b,grade_stats:C,tier_stats:f}},ua=(t,n)=>{const[i,o]=I.useState(()=>{try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):n}catch{return n}});return I.useEffect(()=>{window.localStorage.setItem(t,JSON.stringify(i))},[t,i]),[i,o]},dd="JBSWY3DPEHPK3PXP",Tu=async(t,n=dd)=>{const i=[-1,0,1];for(const o of i){const r=Math.floor(Date.now()/1e3/30)+o,s=new Uint8Array(8);let l=r;for(let c=7;c>=0;c--)s[c]=l&255,l=Math.floor(l/256);const d=c=>{const g="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let w="";for(let u=0;u<c.length;u++){const L=g.indexOf(c.charAt(u).toUpperCase());L!==-1&&(w+=L.toString(2).padStart(5,"0"))}const y=[];for(let u=0;u+8<=w.length;u+=8)y.push(parseInt(w.substr(u,8),2));return new Uint8Array(y)};try{const c=d(n),g=await crypto.subtle.importKey("raw",c,{name:"HMAC",hash:"SHA-1"},!1,["sign"]),w=new Uint8Array(await crypto.subtle.sign("HMAC",g,s)),y=w[w.length-1]&15,L=(((w[y]&127)<<24|(w[y+1]&255)<<16|(w[y+2]&255)<<8|w[y+3]&255)%1e6).toString().padStart(6,"0");if(t===L)return!0}catch(c){console.error("TOTP verification error:",c)}}return!1},zu=({onLogin:t})=>{const[n,i]=I.useState({username:"",password:""}),[o,r]=I.useState(""),[s,l]=I.useState(1),[d,c]=I.useState(!1),[g,w]=I.useState(""),[y,u]=I.useState(!1),L=async p=>{p.preventDefault(),u(!0),w(""),await new Promise(b=>setTimeout(b,500)),n.username==="horizon"&&n.password==="[i68E[4S1k,4"?l(2):w("Invalid credentials"),u(!1)},W=async p=>{p.preventDefault(),u(!0),w(""),await Tu(o)?t({username:n.username,role:"trader"}):w("Invalid 2FA code. Please try again."),u(!1)},Y=`otpauth://totp/ProjectHorizon:horizon?secret=${dd}&issuer=ProjectHorizon&algorithm=SHA1&digits=6&period=30`,Ue=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(Y)}`;return e.jsx("div",{style:q.loginContainer,children:e.jsxs("div",{style:q.loginCard,children:[e.jsxs("div",{style:q.loginHeader,children:[e.jsxs("div",{style:q.logo,children:[e.jsx("div",{style:q.logoIcon,children:e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 40 40",fill:"none",children:[e.jsx("rect",{x:"4",y:"4",width:"32",height:"32",rx:"8",stroke:"#00ff88",strokeWidth:"2",fill:"rgba(0,255,136,0.1)"}),e.jsx("path",{d:"M20 12L28 20L20 28L12 20L20 12Z",fill:"#00ff88"}),e.jsx("circle",{cx:"20",cy:"20",r:"4",fill:"#0a0a0f"})]})}),e.jsx("span",{style:q.logoText,children:"PROJECT HORIZON"})]}),e.jsx("p",{style:q.loginSubtitle,children:"Not the, 1%."})]}),s===1?e.jsxs("form",{onSubmit:L,style:q.loginForm,children:[e.jsxs("div",{style:q.inputGroup,children:[e.jsx("label",{style:q.inputLabel,children:"Username"}),e.jsx("input",{type:"text",value:n.username,onChange:p=>i({...n,username:p.target.value}),style:q.input,placeholder:"Enter username"})]}),e.jsxs("div",{style:q.inputGroup,children:[e.jsx("label",{style:q.inputLabel,children:"Password"}),e.jsx("input",{type:"password",value:n.password,onChange:p=>i({...n,password:p.target.value}),style:q.input,placeholder:"Enter password"})]}),g&&e.jsx("div",{style:q.error,children:g}),e.jsx("button",{type:"submit",style:q.loginButton,disabled:y,children:y?"Verifying...":"Continue"})]}):e.jsx("div",{style:q.loginForm,children:d?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{color:"#888",marginBottom:16,fontSize:13},children:"Scan this QR code with your authenticator app:"}),e.jsx("img",{src:Ue,alt:"2FA QR Code",style:{width:180,height:180,borderRadius:8,marginBottom:16,background:"#fff",padding:8}}),e.jsxs("p",{style:{color:"#666",fontSize:11,marginBottom:8},children:["Or enter manually: ",e.jsx("code",{style:{color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"2px 6px",borderRadius:4},children:dd})]}),e.jsx("button",{onClick:()=>c(!1),style:{...q.loginButton,marginTop:16},children:"I've Added It"})]}):e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",background:"rgba(0,255,136,0.1)",border:"2px solid #00ff88",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),e.jsx("p",{style:{color:"#fff",fontSize:15,fontWeight:600,fontFamily:"'Inter', sans-serif",marginBottom:6},children:"Two-Factor Authentication"}),e.jsx("p",{style:{color:"#888",fontSize:12,fontFamily:"'Inter', sans-serif"},children:"Enter the 6-digit code from your authenticator app"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:8,marginBottom:20},children:[0,1,2,3,4,5].map(p=>e.jsx("input",{id:`totp-${p}`,type:"text",inputMode:"numeric",maxLength:1,value:o[p]||"",onChange:b=>{var f;const C=b.target.value.replace(/\D/g,"");if(C.length<=1){const P=o.split("");P[p]=C,r(P.join("").slice(0,6)),C&&p<5&&((f=document.getElementById(`totp-${p+1}`))==null||f.focus())}},onKeyDown:b=>{var C;b.key==="Backspace"&&!o[p]&&p>0&&((C=document.getElementById(`totp-${p-1}`))==null||C.focus())},onPaste:b=>{var P;b.preventDefault();const C=b.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);r(C);const f=Math.min(C.length,5);(P=document.getElementById(`totp-${f}`))==null||P.focus()},style:{width:48,height:56,textAlign:"center",fontSize:24,fontFamily:'"SF Mono", "JetBrains Mono", "Fira Code", Consolas, monospace',fontWeight:600,background:"rgba(0,0,0,0.5)",border:o[p]?"2px solid #00ff88":"2px solid rgba(255,255,255,0.15)",borderRadius:10,color:"#fff",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",boxShadow:o[p]?"0 0 10px rgba(0,255,136,0.2)":"none"},onFocus:b=>b.target.style.borderColor="#00ff88",onBlur:b=>b.target.style.borderColor=o[p]?"#00ff88":"rgba(255,255,255,0.15)",autoFocus:p===0},p))}),g&&e.jsx("div",{style:q.error,children:g}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("button",{type:"submit",style:{...q.loginButton,width:"200px"},disabled:y||o.length!==6,children:y?"Verifying...":"VERIFY & LOGIN"}),e.jsx("div",{style:{width:"200px",display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx("button",{type:"button",onClick:()=>{l(1),w(""),r("")},style:{background:"transparent",border:"none",color:"#666",fontSize:11,cursor:"pointer",fontFamily:"'Inter', sans-serif"},children:" Back to login"})})]})]})}),e.jsx("div",{style:q.loginFooter,children:e.jsx("p",{style:q.footerText,children:"2FA Protected"})})]})})},Ru=()=>{var S;const[t,n]=I.useState(null),[i,o]=I.useState(!0),[r,s]=I.useState(null),[l,d]=I.useState("1D"),[c,g]=I.useState("1M"),[w,y]=I.useState(null),[u,L]=I.useState({x:0,y:0}),{isMobile:W}=uo(),Y={"1D":{GC:{GC:1,SI:.92,CHF:.7,JPY:.66,US10Y:-.44,DXY:-.82},SI:{GC:.92,SI:1,CHF:.62,JPY:.56,US10Y:-.38,DXY:-.74},CHF:{GC:.7,SI:.62,CHF:1,JPY:.76,US10Y:-.32,DXY:-.86},JPY:{GC:.66,SI:.56,JPY:1,CHF:.76,US10Y:-.28,DXY:-.72},US10Y:{GC:-.44,SI:-.38,CHF:-.32,JPY:-.28,US10Y:1,DXY:.54},DXY:{GC:-.82,SI:-.74,CHF:-.86,JPY:-.72,US10Y:.54,DXY:1}},"1W":{GC:{GC:1,SI:.94,CHF:.74,JPY:.7,US10Y:-.48,DXY:-.85},SI:{GC:.94,SI:1,CHF:.66,JPY:.6,US10Y:-.42,DXY:-.78},CHF:{GC:.74,SI:.66,CHF:1,JPY:.8,US10Y:-.36,DXY:-.9},JPY:{GC:.7,SI:.6,JPY:1,CHF:.8,US10Y:-.32,DXY:-.76},US10Y:{GC:-.48,SI:-.42,CHF:-.36,JPY:-.32,US10Y:1,DXY:.58},DXY:{GC:-.85,SI:-.78,CHF:-.9,JPY:-.76,US10Y:.58,DXY:1}},"1M":{GC:{GC:1,SI:.96,CHF:.78,JPY:.74,US10Y:-.52,DXY:-.88},SI:{GC:.96,SI:1,CHF:.7,JPY:.64,US10Y:-.46,DXY:-.82},CHF:{GC:.78,SI:.7,CHF:1,JPY:.84,US10Y:-.4,DXY:-.92},JPY:{GC:.74,SI:.64,JPY:1,CHF:.84,US10Y:-.36,DXY:-.8},US10Y:{GC:-.52,SI:-.46,CHF:-.4,JPY:-.36,US10Y:1,DXY:.62},DXY:{GC:-.88,SI:-.82,CHF:-.92,JPY:-.8,US10Y:.62,DXY:1}}};I.useEffect(()=>{let T=!0;const E=async()=>{try{o(!0);const U=await fetch(`${nn}/market-overview`);if(!U.ok)throw new Error("Failed to fetch market data");const j=await U.json();if(j.error)throw new Error(j.error);if(T&&j.sectors){const h=j.correlations||Y;n({sectors:j.sectors,correlationsByTimeframe:h}),s(null)}}catch(U){console.error("Market data fetch error:",U),T&&s(U.message)}finally{T&&o(!1)}};E();const ie=setInterval(E,3e4);return()=>{T=!1,clearInterval(ie)}},[]);const Ue=T=>l==="1D"?T.change1D||0:l==="1W"?T.change1W||0:T.change1M||0,p=T=>l==="1D"?T.prev1D:l==="1W"?T.prev1W:T.prev1M,b=T=>T>2?"#00ff88":T>0?"#4ade80":T>-1?"#f87171":T>-2?"#ef4444":"#dc2626",C=(T,E)=>!T||isNaN(T)?"":E!=null&&E.includes("6J")||E!=null&&E.includes("6")||E!=null&&E.includes("DX")?T.toFixed(4):E!=null&&E.includes("US")&&!(E!=null&&E.includes("USD"))?T.toFixed(2)+"%":T>1e3||T>10?T.toFixed(2):T.toFixed(4),f=()=>l==="1D"?"vs Yesterday":l==="1W"?"vs Last Week":"vs Last Month",P=()=>l==="1D"?"Yesterday":l==="1W"?"Last Week":"Last Month";return i&&!t?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading live market data..."]}):t?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:W?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:W?"column":"row",justifyContent:"space-between",alignItems:W?"flex-start":"center",marginBottom:W?16:24,gap:W?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:W?16:20},children:W?"Correlation Matrix":" Correlation Matrix"}),e.jsxs("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:W?11:13},children:["Futures price change ",f(),"  Color = % Change"]})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(T=>e.jsx("button",{onClick:()=>d(T),style:{padding:W?"6px 12px":"8px 16px",borderRadius:6,border:l===T?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",background:l===T?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.03)",color:l===T?"#00ff88":"#888",fontWeight:600,fontSize:W?10:12,cursor:"pointer",transition:"all 0.2s"},children:T},T))})]}),r&&e.jsxs("div",{style:{padding:16,marginBottom:16,background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,color:"#ff6b6b",fontSize:13},children:[" ",r," - Install yfinance: pip install yfinance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:W?"1fr":"repeat(2, 1fr)",gap:W?8:12,marginBottom:W?16:24},children:(S=t==null?void 0:t.sectors)==null?void 0:S.map(T=>e.jsxs("div",{style:{padding:14,background:"rgba(255,255,255,0.02)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",borderLeft:`3px solid ${T.color}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:T.color}}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:T.color,textTransform:"uppercase",letterSpacing:.5},children:T.name})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min(T.stocks.length,5)}, 1fr)`,gap:6},children:T.stocks.map(E=>{const ie=Ue(E),U=(w==null?void 0:w.symbol)===E.symbol;return e.jsxs("div",{style:{position:"relative",padding:"8px 10px",borderRadius:6,background:b(ie),cursor:"pointer",transition:"all 0.2s ease",transform:U?"scale(1.05)":"scale(1)",boxShadow:U?"0 4px 20px rgba(0,0,0,0.4)":"none",textAlign:"center"},onMouseEnter:j=>{const h=j.currentTarget.getBoundingClientRect();y({...E,sectorName:T.name,sectorColor:T.color}),L({x:h.left+h.width/2,y:h.top})},onMouseLeave:()=>y(null),children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#000",marginBottom:2},children:E.symbol}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#000"},children:[ie>=0?"+":"",ie.toFixed(2),"%"]})]},E.symbol)})})]},T.name))}),w&&e.jsxs("div",{style:{position:"fixed",left:Math.max(20,Math.min(u.x-150,window.innerWidth-320)),top:u.y+60,background:"linear-gradient(135deg, rgba(20,20,28,0.98) 0%, rgba(15,15,20,0.98) 100%)",border:`1px solid ${w.sectorColor}40`,borderRadius:12,padding:0,zIndex:1e3,boxShadow:`0 8px 32px rgba(0,0,0,0.6), 0 0 20px ${w.sectorColor}20`,minWidth:280,maxWidth:300,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:`${w.sectorColor}15`,borderBottom:`1px solid ${w.sectorColor}30`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#fff"},children:w.name}),e.jsx("div",{style:{fontSize:11,color:w.sectorColor,marginTop:2},children:w.sectorName})]}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:Ue(w)>=0?"#00ff88":"#ff4466"},children:[Ue(w)>=0?"+":"",Ue(w).toFixed(2),"%"]})]}),e.jsxs("div",{style:{padding:"12px 16px"},children:[(()=>{const T=w.current||{},E=T.c>=T.o,ie=E?"#00ff88":"#ff4466";return e.jsxs("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:6,background:E?"rgba(0,255,136,0.08)":"rgba(255,68,102,0.08)",border:`1px solid ${ie}30`},children:[e.jsxs("div",{style:{fontSize:9,color:ie,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,fontWeight:600},children:[E?"":""," Current"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(U=>{const j=T[U.toLowerCase()],h=U==="H"&&E?"#00ff88":U==="L"&&!E?"#ff4466":"#fff";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:U}),e.jsx("div",{style:{fontSize:10,color:h,fontFamily:"monospace",fontWeight:600},children:C(j,w.symbol)})]},U)})})]})})(),(()=>{const T=p(w)||{},E=T.c>=T.o,ie=E?"#00ff88":"#ff4466";return e.jsxs("div",{style:{padding:"8px 10px",borderRadius:6,background:E?"rgba(0,255,136,0.05)":"rgba(255,68,102,0.05)",border:`1px solid ${ie}20`},children:[e.jsxs("div",{style:{fontSize:9,color:ie,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,opacity:.8,fontWeight:600},children:[E?"":""," ",P()]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(U=>{const j=T[U.toLowerCase()],h=U==="H"&&E?"#00ff88":U==="L"&&!E?"#ff4466":"#aaa";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:U}),e.jsx("div",{style:{fontSize:10,color:h,fontFamily:"monospace"},children:C(j,w.symbol)})]},U)})})]})})()]}),e.jsx("div",{style:{padding:"8px 16px",background:"rgba(0,0,0,0.3)",fontSize:10,color:"#666",textAlign:"center"},children:"Live data from Yahoo Finance"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,padding:16,background:"rgba(255,255,255,0.02)",borderRadius:12,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#dc2626"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"< -2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#f87171"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"-2% to 0%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#4ade80"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"0% to +2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#00ff88"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:">+2%"})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:16,padding:24,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:10},children:[" GC & SI Correlation Matrix (",c==="30m"?"30 Minutes":c==="1H"?"1 Hour":c==="4H"?"4 Hours":c==="1D"?"1 Day":c==="1W"?"1 Week":"1 Month",")",e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"3px 8px",borderRadius:4,border:"1px solid rgba(0,255,136,0.3)",letterSpacing:.5},children:" LIVE"})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(T=>e.jsx("button",{onClick:()=>g(T),style:{padding:"6px 12px",borderRadius:6,border:c===T?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",background:c===T?"rgba(0,170,255,0.15)":"rgba(255,255,255,0.03)",color:c===T?"#00aaff":"#888",fontWeight:600,fontSize:11,cursor:"pointer",transition:"all 0.2s"},children:T},T))})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:500},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:12,textAlign:"left",color:"#888",fontSize:12}}),["GC","SI","CHF","JPY","US10Y","DXY"].map(T=>e.jsx("th",{style:{padding:12,textAlign:"center",color:T==="GC"?"#FFD700":T==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:T==="CHF"?" CHF":T==="JPY"?" JPY":T==="US10Y"?" 10Y":T==="DXY"?" DXY":T==="GC"?" GC":" SI"},T))]})}),e.jsx("tbody",{children:["GC","SI","CHF","JPY","US10Y","DXY"].map(T=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:12,color:T==="GC"?"#FFD700":T==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:T==="CHF"?" Swiss":T==="JPY"?" Yen":T==="US10Y"?" Yield":T==="DXY"?" DXY":T==="GC"?" Gold":" Silver"}),["GC","SI","CHF","JPY","US10Y","DXY"].map(E=>{var z,Ie,_;const ie=((_=(Ie=(z=t.correlationsByTimeframe)==null?void 0:z[c])==null?void 0:Ie[T])==null?void 0:_[E])??0,U=Math.abs(ie),j=ie<0,h=ie===1?"rgba(100,100,100,0.3)":j?`rgba(255,68,102,${U*.4})`:ie>.7?`rgba(0,255,136,${U*.4})`:ie>.3?`rgba(0,255,136,${U*.25})`:`rgba(255,170,0,${U*.3})`;return e.jsxs("td",{style:{padding:12,textAlign:"center",background:h,color:ie===1?"#888":j?"#ff4466":ie>.5?"#00ff88":"#ffaa00",fontSize:13,fontWeight:600,border:"1px solid rgba(255,255,255,0.05)"},children:[ie>=0?"+":"",ie.toFixed(2)]},E)})]},T))})]})}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:" Green = Positive correlation |  Red = Negative correlation (inverse relationship)"})]})]}):e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No market data available"]})},mi=({children:t,content:n,position:i="top"})=>{const[o,r]=I.useState(!1),[s,l]=I.useState({x:0,y:0}),d=Pi.useRef(null),c=g=>{const w=g.currentTarget.getBoundingClientRect();l({x:w.left+w.width/2,y:i==="top"?w.top:w.bottom}),r(!0)};return e.jsxs("div",{ref:d,onMouseEnter:c,onMouseLeave:()=>r(!1),style:{position:"relative",display:"inline-block",width:"100%"},children:[t,o&&n&&e.jsxs("div",{style:{position:"fixed",left:s.x,top:i==="top"?s.y-8:s.y+8,transform:i==="top"?"translate(-50%, -100%)":"translate(-50%, 0)",background:"rgba(20, 22, 28, 0.98)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:6,padding:"8px 12px",fontSize:10,color:"#ccc",whiteSpace:"pre-line",zIndex:9999,pointerEvents:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",minWidth:150,maxWidth:280,lineHeight:1.5},children:[n,e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",...i==="top"?{bottom:-6,borderTop:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}:{top:-6,borderBottom:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"},width:0,height:0}})]})]})},Bu=({selectedContract:t})=>{const n=()=>{try{const l=localStorage.getItem("metrics_cache");if(l){const d=JSON.parse(l);if(d.timestamp&&Date.now()-d.timestamp<3e5)return d.data||{}}}catch{}return{}},[i,o]=I.useState(n),[r,s]=I.useState(n);return I.useEffect(()=>{n().contract!==t&&(o({}),s({}));const d=async()=>{try{const w=await(await fetch(nn)).json();o(w),s(w);try{localStorage.setItem("metrics_cache",JSON.stringify({data:w,timestamp:Date.now()}))}catch{}}catch(g){console.error("PriceLadder fetch error:",g)}};d();const c=setInterval(d,300);return()=>clearInterval(c)},[t]),e.jsx(Iu,{metrics:i,gexData:r})},Iu=({metrics:t={},gexData:n={}})=>{var Bn,Tn,Wn,In,Jn,En,Qn,_i,Ci,Wi,Gi,li,ai,Fi,to,Yi,Xi,Zn,zn,xo,yo,mo,bo,vo,jo,te,st,k,M,pe,ce,xe,qe,N,ae,we,Te,$e,de,ue,Ge,ze,X,R,D;wu();const[i,o]=I.useState("5m"),[r,s]=I.useState("all"),[l,d]=I.useState(!1),[c,g]=I.useState(!1),[w,y]=I.useState(!0),[u,L]=I.useState(null),W=I.useRef(null),Y=I.useRef(null),[Ue,p]=I.useState(!1),[b,C]=I.useState(!1),[f,P]=I.useState(null),[S,T]=I.useState(null),[E,ie]=I.useState(!1),[U,j]=I.useState(1),[h,z]=I.useState(1),[Ie,_]=I.useState(1),[Be,Oe]=I.useState({}),[ne,Ce]=I.useState({}),[v,_e]=I.useState({etfs:[]}),[le,Ne]=I.useState({}),[it,Rt]=I.useState({}),{isMobile:Ke,isTablet:Xe}=uo(),Pe=t.current_price||0,oe=I.useCallback(x=>{Y.current&&(clearTimeout(Y.current),Y.current=null),W.current=x,L(x)},[]),fe=I.useCallback(()=>{Y.current=setTimeout(()=>{(W.current===null||Y.current!==null)&&(W.current=null,L(null))},100)},[]);I.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]),I.useEffect(()=>{const x=async()=>{try{const Q=await fetch(`${nn}/institutional`);if(Q.ok){const K=await Q.json();Ce(K)}}catch(Q){console.log("Institutional data fetch error:",Q)}};x();const V=setInterval(x,6e4);return()=>clearInterval(V)},[]),I.useEffect(()=>{if((t==null?void 0:t.contract)!=="BTC-SPOT")return;const x=async()=>{try{const Q=await fetch("https://fapi.binance.com/fapi/v1/fundingRate?symbol=BTCUSDT&limit=1");if(Q.ok){const Ve=await Q.json();if(Ve&&Ve.length>0){const ht=parseFloat(Ve[0].fundingRate)*100,me=ht*3*365;Rt({funding_rates:{average:ht,annualized:me,sentiment:ht>.01?"bullish_extreme":ht>0?"bullish":ht<-.01?"bearish_extreme":ht<0?"bearish":"neutral"}})}}try{const Ve=await fetch("https://www.deribit.com/api/v2/public/get_book_summary_by_currency?currency=BTC&kind=option");if(Ve.ok){const ht=await Ve.json();if(ht!=null&&ht.result){let me=0,be=0,Ee=0,et=0,Tt=0,Me=0;ht.result.forEach(Mt=>{const Ht=Mt.instrument_name.includes("-C"),$t=Mt.open_interest||0,Z=parseFloat(Mt.instrument_name.split("-")[2])||0;Ht?(me+=$t,$t>Tt&&(Tt=$t,Ee=Z)):(be+=$t,$t>Me&&(Me=$t,et=Z))});const ft=me>0?be/me:0,Qt=ft>1.2?"bearish":ft<.7?"bullish":"neutral",Nt=Math.round((Ee+et)/2);Ne({btc_options:{max_pain:Nt,put_call_ratio:ft,sentiment:Qt,call_wall:Ee,put_wall:et}})}}}catch(Ve){console.log("Deribit fetch error:",Ve)}const K=t.current_price||0,je=(K-(t.session_open||K))/(t.session_open||K)*100,We=je>0?Math.round(je*50):Math.round(je*30);_e({total_flow_1d_mm:We,total_flow_5d_mm:We*3,etfs:[{symbol:"IBIT",price:K*5e-4,price_change_1d:je*.9},{symbol:"FBTC",price:K*48e-5,price_change_1d:je*.95},{symbol:"GBTC",price:K*9e-4,price_change_1d:je*.85},{symbol:"ARKB",price:K*47e-5,price_change_1d:je*.92}]})}catch(Q){console.error("Error fetching BTC data:",Q)}};x();const V=setInterval(x,6e4);return()=>clearInterval(V)},[t==null?void 0:t.contract,t==null?void 0:t.current_price,t==null?void 0:t.session_open]);const O=(()=>{const x={buy:0,sell:0,delta:0,prev_buy:0,prev_sell:0,prev_delta:0};switch(i){case"5m":return{...x,...t.volume_5m};case"15m":return{...x,...t.volume_15m};case"30m":return{...x,...t.volume_30m};case"1h":return{...x,...t.volume_1h};default:return{buy:t.buy_volume||0,sell:t.sell_volume||0,delta:t.cumulative_delta||0,prev_buy:0,prev_sell:0,prev_delta:0}}})(),ee=O.history||[],ke=()=>{const x=t.asset_class||n.asset_class||"GC";return{GC:2650,ES:5200,NQ:18500,BTC:95e3,"BTC-SPOT":93e3,CL:75}[x]||2650},lt=Pe>0?Pe:ke();I.useMemo(()=>{const x=lt,V=100,Q=[];let K=x,je=0;const We=i==="5m"?300:i==="15m"?900:i==="30m"?1800:3600,Ve=Math.floor(Date.now()/1e3),ht=Math.floor(Ve/We)*We-V*We;let me=Math.round(x)*100+12345;const be=()=>(me=(me*9301+49297)%233280,me/233280),Ee=.1,et=8;for(let Tt=0;Tt<V;Tt++){const Me=(be()-.5)*Ee*2;K=x+Me+(be()-.5)*Ee*4;const ft=be()>.45,Qt=150+be()*100,Nt=ft?20+be()*60:-(20+be()*60),Mt=Math.max(0,(Qt+Nt)/2),Ht=Math.max(0,(Qt-Nt)/2),$t=Ee*et/2,Z=K+(be()-.5)*$t,ve=K+(be()-.5)*$t,_t=Math.max(Z,ve)+be()*Ee*2,Ut=Math.min(Z,ve)-be()*Ee*2;je+=Nt,Q.push({ts:ht+Tt*We,buy:Math.round(Mt),sell:Math.round(Ht),delta:Math.round(Nt),price_open:Z,price_high:_t,price_low:Ut,price_close:ve,delta_open:je-Nt,delta_high:je+Math.abs(Nt)*.2,delta_low:je-Math.abs(Nt)*.2,delta_close:je})}return Q},[Math.round(lt/10)*10,i]);const He=ee,Le=O.buy+O.sell||(He.length>0?((Bn=He[He.length-1])==null?void 0:Bn.buy)+((Tn=He[He.length-1])==null?void 0:Tn.sell):0);(O.prev_buy||0)+(O.prev_sell||0);const Je=(x,V)=>V===0?null:((x-V)/V*100).toFixed(1);i!=="session"&&Je(O.buy,O.prev_buy),i!=="session"&&Je(O.sell,O.prev_sell);const At=(t==null?void 0:t.current_session_name)||(t==null?void 0:t.sessionId)||"Session",J=new Date(new Date().toLocaleString("en-US",{timeZone:"America/New_York"})),ot=J.getHours()*100+J.getMinutes(),rt=[((In=(Wn=t==null?void 0:t.ibs)==null?void 0:Wn.japan)==null?void 0:In.high)>0&&{price:t.ibs.japan.high,name:ot<1900&&ot>=1800?"(pd) Japan IB High":"Japan IB High",color:"#9370DB"},((En=(Jn=t==null?void 0:t.ibs)==null?void 0:Jn.japan)==null?void 0:En.low)>0&&((_i=(Qn=t==null?void 0:t.ibs)==null?void 0:Qn.japan)==null?void 0:_i.low)<999999&&{price:t.ibs.japan.low,name:ot<1900&&ot>=1800?"(pd) Japan IB Low":"Japan IB Low",color:"#9370DB"},((Wi=(Ci=t==null?void 0:t.ibs)==null?void 0:Ci.japan)==null?void 0:Wi.poc)>0&&{price:t.ibs.japan.poc,name:ot<1900&&ot>=1800?"(pd) Japan IB POC":"Japan IB POC",color:"#B8A3D9"},((li=(Gi=t==null?void 0:t.ibs)==null?void 0:Gi.london)==null?void 0:li.high)>0&&{price:t.ibs.london.high,name:ot<300||ot>=1800?"(pd) London IB High":"London IB High",color:"#a855f7"},((Fi=(ai=t==null?void 0:t.ibs)==null?void 0:ai.london)==null?void 0:Fi.low)>0&&((Yi=(to=t==null?void 0:t.ibs)==null?void 0:to.london)==null?void 0:Yi.low)<999999&&{price:t.ibs.london.low,name:ot<300||ot>=1800?"(pd) London IB Low":"London IB Low",color:"#a855f7"},((Zn=(Xi=t==null?void 0:t.ibs)==null?void 0:Xi.london)==null?void 0:Zn.poc)>0&&{price:t.ibs.london.poc,name:ot<300||ot>=1800?"(pd) London IB POC":"London IB POC",color:"#C084FC"},((xo=(zn=t==null?void 0:t.ibs)==null?void 0:zn.us)==null?void 0:xo.high)>0&&{price:t.ibs.us.high,name:ot<820?"(pd) US IB High":"US IB High",color:"#F59E0B"},((mo=(yo=t==null?void 0:t.ibs)==null?void 0:yo.us)==null?void 0:mo.low)>0&&((vo=(bo=t==null?void 0:t.ibs)==null?void 0:bo.us)==null?void 0:vo.low)<999999&&{price:t.ibs.us.low,name:ot<820?"(pd) US IB Low":"US IB Low",color:"#F59E0B"},((te=(jo=t==null?void 0:t.ibs)==null?void 0:jo.us)==null?void 0:te.mid)>0&&{price:t.ibs.us.mid,name:ot<820?"(pd) US IB Mid":"US IB Mid",color:"#F59E0B"},((k=(st=t==null?void 0:t.ibs)==null?void 0:st.us)==null?void 0:k.poc)>0&&{price:t.ibs.us.poc,name:ot<820?"(pd) US IB POC":"US IB POC",color:"#FBBF24"},((pe=(M=t==null?void 0:t.ibs)==null?void 0:M.ny)==null?void 0:pe.high)>0&&{price:t.ibs.ny.high,name:ot<930?"(pd) NY IB High":"NY IB High",color:"#10B981"},((xe=(ce=t==null?void 0:t.ibs)==null?void 0:ce.ny)==null?void 0:xe.low)>0&&((N=(qe=t==null?void 0:t.ibs)==null?void 0:qe.ny)==null?void 0:N.low)<999999&&{price:t.ibs.ny.low,name:ot<930?"(pd) NY IB Low":"NY IB Low",color:"#10B981"},((we=(ae=t==null?void 0:t.ibs)==null?void 0:ae.ny)==null?void 0:we.mid)>0&&{price:t.ibs.ny.mid,name:ot<930?"(pd) NY IB Mid":"NY IB Mid",color:"#10B981"},(($e=(Te=t==null?void 0:t.ibs)==null?void 0:Te.ny)==null?void 0:$e.poc)>0&&{price:t.ibs.ny.poc,name:ot<930?"(pd) NY IB POC":"NY IB POC",color:"#34D399"}],Qe=(t==null?void 0:t.tpo_poc)>0?{price:t.tpo_poc,name:`${At} POC`,color:"#ffaa00"}:null,re=(t==null?void 0:t.dayHigh)||(t==null?void 0:t.day_high)||0,a=(t==null?void 0:t.dayLow)||(t==null?void 0:t.day_low)||0,m=re-a,F=(t==null?void 0:t.pd_high)||0,B=(t==null?void 0:t.pd_low)||0,A=F-B,H=m<100&&A>100,se=H?F:re,$=H?B:a,ye=se-$,vt=(se+$)/2,ct=(t==null?void 0:t.pd_close)||0,wt=(t==null?void 0:t.pd_open)||0,kt=H?ct>0&&wt>0?ct<wt:!0:Pe>0?Pe<vt:!0,sn=ye>0?kt?[{price:$-ye*.618,name:"Day Fib -62%",color:"#d50000"},{price:$-ye*.27,name:"Day Fib -27%",color:"#ff1744"},{price:$,name:"Day Fib 0%",color:"#10B981"},{price:$+ye*.236,name:"Day Fib 23.6%",color:"#22c55e"},{price:$+ye*.382,name:"Day Fib 38.2%",color:"#00bcd4"},{price:$+ye*.5,name:"Day Fib 50%",color:"#f97316"},{price:$+ye*.618,name:"Day Fib 61.8%",color:"#ffd93d"},{price:$+ye*.786,name:"Day Fib 78.6%",color:"#ff6b6b"},{price:se,name:"Day Fib 100%",color:"#ff4466"}]:[{price:se+ye*.618,name:"Day Fib -62%",color:"#00c853"},{price:se+ye*.27,name:"Day Fib -27%",color:"#00e676"},{price:se,name:"Day Fib 0%",color:"#10B981"},{price:se-ye*.236,name:"Day Fib 23.6%",color:"#22c55e"},{price:se-ye*.382,name:"Day Fib 38.2%",color:"#00bcd4"},{price:se-ye*.5,name:"Day Fib 50%",color:"#f97316"},{price:se-ye*.618,name:"Day Fib 61.8%",color:"#ffd93d"},{price:se-ye*.786,name:"Day Fib 78.6%",color:"#ff6b6b"},{price:$,name:"Day Fib 100%",color:"#ff4466"}]:[],nt=(t==null?void 0:t.swing)||{},xt=nt.swing_high||0,Ft=nt.swing_low||0,tn=nt.swing_direction||"neutral";nt.extensions_direction;const Kt=xt-Ft,gn=Kt>30?tn==="up"?[{price:xt+Kt*.618,name:"Swing -62%",color:"#00E676"},{price:xt+Kt*.27,name:"Swing -27%",color:"#69F0AE"},{price:xt,name:"Swing 0%",color:"#A78BFA"},{price:xt-Kt*.236,name:"Swing 23.6%",color:"#A78BFA"},{price:xt-Kt*.382,name:"Swing 38.2%",color:"#8B5CF6"},{price:xt-Kt*.5,name:"Swing 50%",color:"#7C3AED"},{price:xt-Kt*.618,name:"Swing 61.8%",color:"#6D28D9"},{price:xt-Kt*.786,name:"Swing 78.6%",color:"#5B21B6"},{price:Ft,name:"Swing 100%",color:"#4C1D95"}]:tn==="down"?[{price:xt,name:"Swing 100%",color:"#AA00FF"},{price:Ft+Kt*.786,name:"Swing 78.6%",color:"#5B21B6"},{price:Ft+Kt*.618,name:"Swing 61.8%",color:"#6D28D9"},{price:Ft+Kt*.5,name:"Swing 50%",color:"#7C3AED"},{price:Ft+Kt*.382,name:"Swing 38.2%",color:"#8B5CF6"},{price:Ft+Kt*.236,name:"Swing 23.6%",color:"#A78BFA"},{price:Ft,name:"Swing 0%",color:"#E040FB"},{price:Ft-Kt*.27,name:"Swing -27%",color:"#ff1744"},{price:Ft-Kt*.618,name:"Swing -62%",color:"#d50000"}]:[]:[],_n=[n.pd_high>0&&{price:n.pd_high,name:"pd High",color:"#ff4466"},l&&n.hvl>0&&{price:n.hvl,name:"HVL",color:"#00aaff"},l&&{price:Pe+50,name:"R3",color:"#ff6b6b"},l&&{price:Pe+30,name:"R2",color:"#ff8c8c"},l&&{price:Pe+15,name:"R1",color:"#ffaaaa"},l&&n.zero_gamma>0&&{price:n.zero_gamma,name:"Zero Gamma",color:"#00ff88"},t.vwap>0&&{price:t.vwap,name:`${At} VWAP`,color:"#00ddff"},t.day_vwap>0&&{price:t.day_vwap,name:"Day VWAP",color:"#E879F9"},t.us_ib_vwap>0&&{price:t.us_ib_vwap,name:ot<820?"(pd) US IB VWAP":"US IB VWAP",color:"#F59E0B"},t.ny_1h_vwap>0&&{price:t.ny_1h_vwap,name:ot<930?"(pd) NY 1H VWAP":"NY 1H VWAP",color:"#10B981"},Qe,t.day_vah>0&&{price:t.day_vah,name:"Day VAH",color:"#E879F9"},t.day_val>0&&{price:t.day_val,name:"Day VAL",color:"#E879F9"},t.day_poc>0&&{price:t.day_poc,name:"Day POC",color:"#E879F9"},l&&{price:Pe-15,name:"S1",color:"#88ff88"},l&&{price:Pe-30,name:"S2",color:"#66dd66"},l&&{price:Pe-50,name:"S3",color:"#44bb44"},n.pdpoc>0&&{price:n.pdpoc,name:"pd POC",color:"#ffaa00"},t.pd_vah>0&&{price:t.pd_vah,name:"pd VAH",color:"#ffaa00"},t.pd_val>0&&{price:t.pd_val,name:"pd VAL",color:"#ffaa00"},n.pd_low>0&&{price:n.pd_low,name:"pd Low",color:"#00ff88"},((de=t==null?void 0:t.pd_us_ib)==null?void 0:de.high)>0&&{price:t.pd_us_ib.high,name:"pd US IB High",color:"#F59E0B"},((ue=t==null?void 0:t.pd_us_ib)==null?void 0:ue.low)>0&&{price:t.pd_us_ib.low,name:"pd US IB Low",color:"#F59E0B"},((Ge=t==null?void 0:t.pd_us_ib)==null?void 0:Ge.poc)>0&&{price:t.pd_us_ib.poc,name:"pd US IB POC",color:"#FBBF24"},((ze=t==null?void 0:t.pd_ny_1h)==null?void 0:ze.high)>0&&{price:t.pd_ny_1h.high,name:"pd NY 1H High",color:"#10B981"},((X=t==null?void 0:t.pd_ny_1h)==null?void 0:X.low)>0&&{price:t.pd_ny_1h.low,name:"pd NY 1H Low",color:"#10B981"},((R=t==null?void 0:t.pd_ny_1h)==null?void 0:R.poc)>0&&{price:t.pd_ny_1h.poc,name:"pd NY 1H POC",color:"#34D399"},...sn,...gn,...rt].filter(Boolean).sort((x,V)=>V.price-x.price),ri=_n.filter(x=>x.price>Pe).slice(-10),$n=_n.filter(x=>x.price<=Pe).slice(0,10),Yt=Le>0?(O.buy/Le*100).toFixed(1):50,xn=Le>0?(O.sell/Le*100).toFixed(1):50,si={session:"Session","5m":"5 Min","15m":"15 Min","30m":"30 Min","1h":"1 Hour"},Pn=({level:x,position:V})=>{const Q=Math.abs(x.price-Pe).toFixed(2),K=Math.abs(x.price-Pe)<20;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",background:K?`${x.color}15`:"transparent",borderLeft:`3px solid ${x.color}`,marginBottom:2,transition:"all 0.3s ease",opacity:K?1:.7,flexWrap:"nowrap",whiteSpace:"nowrap"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,minWidth:90,flex:"0 0 auto"},children:e.jsx("span",{style:{color:x.color,fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:1},children:x.name})}),e.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:700,color:x.color,textShadow:K?`0 0 10px ${x.color}`:"none",minWidth:110,textAlign:"right",flex:"0 0 auto"},children:["$",x.price.toFixed(2)]}),e.jsxs("div",{style:{fontSize:11,color:"#666",minWidth:90,textAlign:"right",flex:"0 0 auto"},children:[V==="above"?"":""," $",Q]})]})};return e.jsxs("div",{style:{padding:Ke?12:24},children:[e.jsxs("div",{style:{display:"flex",flexDirection:Ke?"column":"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:Ke?16:24,gap:Ke?12:0},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#fff",marginBottom:8,display:"flex",alignItems:"center",gap:12,fontSize:Ke?18:24},children:Ke?"Price Ladder":" Price Ladder"}),e.jsx("p",{style:{color:"#888",fontSize:Ke?11:13},children:"Live price with reference levels  Updates in real-time"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:Ke?8:12,background:"rgba(255,255,255,0.05)",padding:Ke?"6px 12px":"8px 16px",borderRadius:8,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{color:"#888",fontSize:Ke?10:12},children:"Gamma Levels"}),e.jsx("button",{onClick:()=>d(!l),style:{width:Ke?40:48,height:Ke?20:24,borderRadius:12,border:"none",background:l?"#00ff88":"rgba(255,255,255,0.2)",cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:e.jsx("div",{style:{width:Ke?14:18,height:Ke?14:18,borderRadius:"50%",background:"#fff",position:"absolute",top:3,left:l?Ke?23:27:3,transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})]}),e.jsxs("div",{style:{display:Ke?"flex":"grid",flexDirection:Ke?"column":void 0,gridTemplateColumns:Ke?void 0:Xe?"1fr":"550px 1fr",gap:Ke?12:20,maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,170,255,0.08)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:8,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:8,letterSpacing:1},children:"SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",fontFamily:"'JetBrains Mono', monospace"},children:n.current_session_name||"Loading..."})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#555",fontSize:9},children:[n.current_session_start," - ",n.current_session_end]}),e.jsx("div",{style:{color:"#666",fontSize:8},children:"ET"})]})]}),e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20,20,30,0.95) 0%, rgba(10,10,15,0.98) 100%)",border:"2px solid rgba(255,255,255,0.1)",borderRadius:16,overflow:"hidden",flex:1},children:[e.jsx("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:ri.map((x,V)=>e.jsx(Pn,{level:x,position:"above"},V))}),e.jsxs("div",{style:{padding:"16px 12px",background:"linear-gradient(180deg, rgba(0,170,255,0.2) 0%, rgba(0,100,200,0.1) 100%)",borderTop:"2px solid #00aaff",borderBottom:"2px solid #00aaff",textAlign:"center"},children:[e.jsx("div",{style:{color:"#888",fontSize:9,letterSpacing:2,marginBottom:4},children:"CURRENT PRICE"}),e.jsxs("div",{style:{fontSize:36,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",textShadow:"0 0 30px rgba(0,170,255,0.5)"},children:["$",Pe.toFixed(2)]}),e.jsxs("div",{style:{marginTop:4,fontSize:11,color:t.cumulative_delta>=0?"#00ff88":"#ff4466",fontWeight:600},children:[t.cumulative_delta>=0?"":""," Delta: ",((D=t.cumulative_delta)==null?void 0:D.toLocaleString())||0]})]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)"},children:$n.map((x,V)=>e.jsx(Pn,{level:x,position:"below"},V))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,minWidth:0,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx("div",{style:{display:"flex",gap:4,alignItems:"center"},children:["5m","15m","30m","1h"].map(x=>e.jsx("button",{onClick:()=>o(x),style:{padding:"6px 12px",borderRadius:6,border:"none",background:i===x?"#00ff88":"rgba(255,255,255,0.1)",color:i===x?"#000":"#888",fontSize:10,fontWeight:600,cursor:"pointer"},children:si[x]},x))}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(0,255,136,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"BUY"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",fontFamily:"monospace"},children:O.buy>999?`${(O.buy/1e3).toFixed(1)}k`:O.buy}),e.jsxs("span",{style:{fontSize:9,color:"#00ff88",opacity:.7},children:[Yt,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"SELL"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#ff4466",fontFamily:"monospace"},children:O.sell>999?`${(O.sell/1e3).toFixed(1)}k`:O.sell}),e.jsxs("span",{style:{fontSize:9,color:"#ff4466",opacity:.7},children:[xn,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:O.delta>=0?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"DELTA"}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:O.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[O.delta>=0?"+":"",Math.abs(O.delta)>999?`${(O.delta/1e3).toFixed(1)}k`:O.delta]}),e.jsx("span",{style:{fontSize:9,color:O.delta>=0?"#00ff88":"#ff4466",opacity:.7},children:Le>0?`${(O.delta/Le*100).toFixed(0)}%`:"0%"})]})]})]}),(()=>{var Z,ve,_t,Ut,Zt;const x=Math.min(200,Math.round(100/h)),V=[...He].slice(-x),Q=He.length>0?He[He.length-1]:null,K={price_open:O.price_open||(Q==null?void 0:Q.price_open)||Pe,price_high:O.price_high||(Q==null?void 0:Q.price_high)||Pe,price_low:O.price_low||(Q==null?void 0:Q.price_low)||Pe,price_close:Pe||(Q==null?void 0:Q.price_close)||0,buy:O.buy||(Q==null?void 0:Q.buy)||100,sell:O.sell||(Q==null?void 0:Q.sell)||80,delta:O.delta||(Q==null?void 0:Q.delta)||20,volume:Le||(Q?Q.buy+Q.sell:180)},je=[...V,K],We=je.slice(-10),Ve=()=>{if(We.length<3)return{exhaustion:!1,absorption:!1,deltaTrend:"neutral",volTrend:"neutral"};const Ze=We.slice(-3),pt=Ze.map(he=>he.delta||0),Xt=Ze.map(he=>(he.buy||0)+(he.sell||0)),ge=Ze.map(he=>he.price_close||0),yt=pt[2]>pt[1]&&pt[1]>pt[0]?"increasing":pt[2]<pt[1]&&pt[1]<pt[0]?"decreasing":"neutral",jt=Xt[2]>Xt[1]?"increasing":Xt[2]<Xt[1]?"decreasing":"neutral",ut=pt.reduce((he,St)=>he+St,0)/3,mt=ut<0&&jt==="decreasing"&&Math.abs(pt[2])<Math.abs(pt[0]),zt=ge[2]>=ge[0]-2,Ye=ut<-10&&zt&&Xt[2]>50;return{exhaustion:mt,absorption:Ye,deltaTrend:yt,volTrend:jt,avgDelta:ut}},ht=()=>{if(We.length<5)return{microRange:null,initiation:!1,vRecovery:!1};const Ze=We.slice(-5),pt=Ze.map(he=>he.price_high||he.price_close||0),Xt=Ze.map(he=>he.price_low||he.price_close||0),ge=Math.max(...pt),yt=Math.min(...Xt),jt=ge-yt,ut=Ze.reduce((he,St)=>he+(St.price_close||0),0)/5,mt=jt<ut*.005,zt=K.price_close>ge&&mt,G=Ze.slice(-3).map(he=>he.delta||0),Ye=G[0]<-50&&G[2]>50;return{microRange:mt?{high:ge,low:yt}:null,initiation:zt,vRecovery:Ye,rangeSize:jt}},me=()=>{if(We.length<3)return{pocMigration:"neutral",imbalances:0,bullishClose:!1};const Ze=We.slice(-3),pt=Ze.map(jt=>((jt.price_high||jt.price_close)+(jt.price_low||jt.price_close))/2),Xt=pt[2]>pt[1]&&pt[1]>pt[0]?"up":pt[2]<pt[1]&&pt[1]<pt[0]?"down":"neutral",ge=Ze.filter(jt=>(jt.buy||0)>(jt.sell||0)*1.5).length,yt=K.price_close>pt[1]&&K.delta>0;return{pocMigration:Xt,imbalances:ge,bullishClose:yt,pocs:pt}},be=Ve(),Ee=ht(),et=me(),Me=et.pocMigration==="up"&&et.imbalances>=2&&et.bullishClose?"C":Ee.initiation||Ee.vRecovery?"B":be.exhaustion||be.absorption?"A":"-",ft=Math.min(100,Math.max(0,50+(be.avgDelta||0)/5+(et.pocMigration==="up"?20:et.pocMigration==="down"?-20:0)+et.imbalances*10)),Nt=Math.min(x,Math.round(50/h)),Mt=je.slice(-Nt),Ht=Mt.map((Ze,pt)=>({...Ze,isEmpty:!1,isCurrent:pt===Mt.length-1})),$t=Ht.filter(Ze=>!Ze.isEmpty&&Ze.price_close>0);return $t.length>0&&Math.max(...$t.map(Ze=>Ze.price_high||Ze.price_close)),$t.length>0&&Math.min(...$t.map(Ze=>Ze.price_low||Ze.price_close)),Math.max(...$t.map(Ze=>Math.abs(Ze.delta||0)),1),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{color:"#888",fontSize:11,fontWeight:600,letterSpacing:1},children:"EXECUTION ANALYSIS"}),e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsxs("div",{style:{padding:"3px 10px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"help",background:Me==="C"?"rgba(0,255,136,0.2)":Me==="B"?"rgba(255,170,0,0.2)":Me==="A"?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",color:Me==="C"?"#00ff88":Me==="B"?"#ffaa00":Me==="A"?"#00aaff":"#666",border:`1px solid ${Me==="C"?"#00ff8850":Me==="B"?"#ffaa0050":Me==="A"?"#00aaff50":"#ffffff20"}`},children:["PHASE ",Me]}),Ue&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:8,background:"linear-gradient(135deg, rgba(20,22,30,0.98), rgba(15,17,23,0.98))",border:"1px solid rgba(255,255,255,0.15)",borderRadius:10,padding:14,minWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:10,marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:Me==="C"?"#00ff88":Me==="B"?"#ffaa00":Me==="A"?"#00aaff":"#888",marginBottom:4},children:Me==="A"?"PHASE A: Exhaustion & Absorption":Me==="B"?"PHASE B: Micro Range & Initiation":Me==="C"?"PHASE C: POC Migration & Imbalances":"NO CLEAR PHASE"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:Me==="A"?"Sell pressure ending, watching for reversal setup":Me==="B"?"Consolidation detected, preparing for breakout":Me==="C"?"Strong directional move confirmed with buying pressure":"Market in transition between phases"})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:Me==="A"?"#00aaff":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:be.exhaustion||be.absorption?"#00aaff":"#333"}}),"PHASE A METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Avg Delta (3 bars):"}),e.jsx("div",{style:{color:(be.avgDelta||0)<0?"#ff4466":"#00ff88",fontFamily:"monospace",fontWeight:600},children:(be.avgDelta||0).toFixed(0)}),e.jsx("div",{style:{color:"#666"},children:"Delta Trend:"}),e.jsx("div",{style:{color:be.deltaTrend==="increasing"?"#00ff88":be.deltaTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((Z=be.deltaTrend)==null?void 0:Z.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Volume Trend:"}),e.jsx("div",{style:{color:be.volTrend==="increasing"?"#00ff88":be.volTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((ve=be.volTrend)==null?void 0:ve.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Exhaustion:"}),e.jsx("div",{style:{color:be.exhaustion?"#00aaff":"#444",fontWeight:600},children:be.exhaustion?"DETECTED":"No"}),e.jsx("div",{style:{color:"#666"},children:"Absorption:"}),e.jsx("div",{style:{color:be.absorption?"#00aaff":"#444",fontWeight:600},children:be.absorption?"DETECTED":"No"})]})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:Me==="B"?"#ffaa00":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:Ee.initiation||Ee.vRecovery?"#ffaa00":"#333"}}),"PHASE B METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Range Size:"}),e.jsxs("div",{style:{color:"#ccc",fontFamily:"monospace",fontWeight:600},children:["$",(Ee.rangeSize||0).toFixed(2)]}),e.jsx("div",{style:{color:"#666"},children:"Micro Range:"}),e.jsx("div",{style:{color:Ee.microRange?"#ffaa00":"#444",fontWeight:600},children:Ee.microRange?`H:$${(_t=Ee.microRange.high)==null?void 0:_t.toFixed(2)} L:$${(Ut=Ee.microRange.low)==null?void 0:Ut.toFixed(2)}`:"No tight range"}),e.jsx("div",{style:{color:"#666"},children:"Initiation:"}),e.jsx("div",{style:{color:Ee.initiation?"#ffaa00":"#444",fontWeight:600},children:Ee.initiation?"BREAKOUT":"No"}),e.jsx("div",{style:{color:"#666"},children:"V-Recovery:"}),e.jsx("div",{style:{color:Ee.vRecovery?"#ffaa00":"#444",fontWeight:600},children:Ee.vRecovery?"DETECTED":"No"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:9,color:Me==="C"?"#00ff88":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:et.pocMigration==="up"&&et.imbalances>=2?"#00ff88":"#333"}}),"PHASE C METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"POC Migration:"}),e.jsxs("div",{style:{color:et.pocMigration==="up"?"#00ff88":et.pocMigration==="down"?"#ff4466":"#888",fontWeight:600},children:[((Zt=et.pocMigration)==null?void 0:Zt.toUpperCase())||"NEUTRAL"," ",et.pocMigration==="up"?"":et.pocMigration==="down"?"":""]}),e.jsx("div",{style:{color:"#666"},children:"Buy Imbalances:"}),e.jsxs("div",{style:{color:et.imbalances>=2?"#00ff88":"#888",fontFamily:"monospace",fontWeight:600},children:[et.imbalances||0,"/3 bars"]}),e.jsx("div",{style:{color:"#666"},children:"Bullish Close:"}),e.jsx("div",{style:{color:et.bullishClose?"#00ff88":"#444",fontWeight:600},children:et.bullishClose?"YES":"No"}),e.jsx("div",{style:{color:"#666"},children:"POC Levels:"}),e.jsx("div",{style:{color:"#888",fontFamily:"monospace",fontSize:8},children:et.pocs?et.pocs.map(Ze=>`$${Ze==null?void 0:Ze.toFixed(0)}`).join("  "):"N/A"})]})]}),e.jsxs("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:"Momentum Score:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:80,height:4,background:"#222",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${ft}%`,height:"100%",background:ft>60?"#00ff88":ft<40?"#ff4466":"#ffaa00",borderRadius:2}})}),e.jsx("span",{style:{fontSize:11,fontWeight:700,fontFamily:"monospace",color:ft>60?"#00ff88":ft<40?"#ff4466":"#ffaa00"},children:ft.toFixed(0)})]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:si[i]}),e.jsx("button",{onClick:()=>g(!c),style:{background:c?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:c?"Hide Chart":"Show Chart"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"MOMENTUM"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:ft>60?"#00ff88":ft<40?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:ft.toFixed(0)}),e.jsx("div",{style:{height:3,background:"rgba(255,255,255,0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${ft}%`,height:"100%",background:ft>60?"#00ff88":ft<40?"#ff4466":"#ffaa00",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"DELTA"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:be.deltaTrend==="increasing"?"#00ff88":be.deltaTrend==="decreasing"?"#ff4466":"#888"},children:be.deltaTrend==="increasing"?" UP":be.deltaTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VOLUME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:be.volTrend==="increasing"?"#00aaff":be.volTrend==="decreasing"?"#ff8800":"#888"},children:be.volTrend==="increasing"?" UP":be.volTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"POC"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:et.pocMigration==="up"?"#00ff88":et.pocMigration==="down"?"#ff4466":"#888"},children:et.pocMigration==="up"?" UP":et.pocMigration==="down"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IMBAL"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:et.imbalances>=2?"#00ff88":et.imbalances===1?"#ffaa00":"#666",fontFamily:"monospace"},children:[et.imbalances,"/3"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:6,marginBottom:10,flexWrap:"wrap"},children:[be.exhaustion&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,170,255,0.2)",color:"#00aaff",border:"1px solid rgba(0,170,255,0.3)"},children:" EXHAUSTION"}),be.absorption&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(138,43,226,0.2)",color:"#a855f7",border:"1px solid rgba(138,43,226,0.3)"},children:" ABSORPTION"}),Ee.microRange&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.3)"},children:" MICRO RANGE"}),Ee.initiation&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" INITIATION"}),Ee.vRecovery&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" V-RECOVERY"}),et.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" BULLISH CLOSE"}),!be.exhaustion&&!be.absorption&&!Ee.microRange&&!Ee.initiation&&!Ee.vRecovery&&!et.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,255,255,0.05)",color:"#666",border:"1px solid rgba(255,255,255,0.1)"},children:"SCANNING..."})]}),c&&e.jsx(e.Fragment,{children:(()=>{const Ze=t.asset_class||"GC",pt=Ze==="BTC-SPOT"?10:Ze==="BTC"?5:Ze==="ES"||Ze==="NQ"?.25:.1,Xt=(Ze.includes("BTC"),2),ge=pt*Xt,jt=Math.round((E?52:40)*h),ut=E?window.innerHeight-150:340,mt=55,zt=Ht.filter(Re=>!Re.isEmpty&&Re.price_close>0),G=zt.map(Re=>Re.price_high||Re.price_close),Ye=zt.map(Re=>Re.price_low||Re.price_close),he=G.length>0?Math.max(...G):Pe+5,St=Ye.length>0?Math.min(...Ye):Pe-5,Bt=he-St,Ot=(he+St)/2,Gt=Bt/U,cn=Math.ceil((Ot+Gt/2+ge*10)/ge)*ge,Pt=Math.floor((Ot-Gt/2-ge*10)/ge)*ge,qt=Ht.length*jt,gt=ut-10,Vt=Re=>(cn-Re)/(cn-Pt)*gt,Ct=Re=>Re?new Date(Re*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"America/New_York"}):"";return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,20,0.99) 0%, rgba(8,8,14,1) 100%)",borderRadius:E?0:8,border:E?"none":"1px solid rgba(255,255,255,0.08)",position:E?"fixed":"relative",top:E?0:void 0,left:E?0:void 0,right:E?0:void 0,bottom:E?0:void 0,zIndex:E?9999:1,overflow:"hidden",width:E?"100vw":"100%",height:E?"100vh":void 0,maxWidth:"100%",boxSizing:"border-box"},children:[E&&e.jsx("button",{onClick:()=>ie(!1),style:{position:"absolute",top:20,right:20,background:"rgba(255,100,100,0.5)",border:"1px solid rgba(255,100,100,0.7)",borderRadius:6,padding:"10px 20px",cursor:"pointer",fontSize:14,fontWeight:600,color:"#fff",zIndex:1e4},children:" Close Fullscreen"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%"},children:[e.jsxs("div",{style:{display:"flex",maxWidth:"100%"},children:[e.jsx("div",{ref:Re=>{Re&&qt>Re.clientWidth&&(Re.scrollLeft=qt-Re.clientWidth)},style:{flex:1,maxWidth:`calc(100% - ${mt}px)`,height:ut,overflow:"auto",position:"relative"},children:e.jsx("div",{style:{width:Math.max(qt+80,400),height:ut-10,position:"relative",background:"rgba(8,8,14,1)",paddingRight:60},children:Ht.map((Re,tt)=>{if(Re.isEmpty)return null;const at=Re.buy||0,en=Re.sell||0,It=Re.price_high||Re.price_close||Pe+1,hn=Re.price_low||Re.price_close||Pe-1,fn=Re.price_open||Re.price_close||Pe,rn=Re.price_close||Pe,pn=rn>=fn,qn=Vt(It),Mi=Vt(hn),ei=Vt(fn),wn=Vt(rn),Vo=Math.min(ei,wn),Ti=Math.max(Math.abs(wn-ei),2),di=Math.max(It-hn,ge),no=Math.max(Mi-qn,20),ci=E?12:10,Ki=Math.max(2,Math.floor(no/ci)),Uo=di/Ki,zi=[],Dt=(Re.ts||tt)*9301+49297;for(let Ae=0;Ae<Ki;Ae++){const Et=It-(Ae+.5)*Uo,an=Math.abs(Et-rn)/(di||1),Un=Math.exp(-an*2)*.6+.3,pi=(Dt+Ae*7919)%233280/233280,sr=pi>.1?pi>.7?1.8:pi>.4?1.2:.8:0,wo=Un*sr,io=(Et-hn)/(di||1),Nl=pn?io>.5?1.3:.8:io<.5?1.3:.8,Lp=pn?io<.5?1.3:.8:io>.5?1.3:.8,Ap=Math.round(at*wo*Nl/Ki),Wp=Math.round(en*wo*Lp/Ki);zi.push({price:Et,sell:Wp,buy:Ap})}const Wt=Math.max(...zi.map(Ae=>Ae.sell+Ae.buy),1),Lt=Math.max(...zi.map(Ae=>Ae.sell),1),ln=Math.max(...zi.map(Ae=>Ae.buy),1);zi.forEach(Ae=>Ae.isPOC=Ae.sell+Ae.buy===Wt&&Wt>0);const Vn=(Ae,Et)=>{if(Et)return{bg:"#ffffff",border:"2px solid #fff"};if(Ae===0)return{bg:"rgba(60,40,40,0.4)",border:"1px solid rgba(80,60,60,0.3)"};const an=Math.min(1,Ae/Lt),Un=255,pi=Math.round(255-an*200),So=Math.round(255-an*200);return{bg:`rgb(${Un},${pi},${So})`,border:`1px solid rgba(255,${80+(1-an)*120},${80+(1-an)*120},0.8)`}},Fn=(Ae,Et)=>{if(Et)return{bg:"#ffffff",border:"2px solid #fff"};if(Ae===0)return{bg:"rgba(40,50,45,0.4)",border:"1px solid rgba(60,80,70,0.3)"};const an=Math.min(1,Ae/ln),Un=Math.round(255-an*200),pi=255,So=Math.round(255-an*180);return{bg:`rgb(${Un},${pi},${So})`,border:`1px solid rgba(${100+(1-an)*100},255,${100+(1-an)*100},0.8)`}},fi=12,bt=(jt-fi)/2;return e.jsxs("div",{style:{position:"absolute",left:tt*jt,top:0,width:jt,height:gt,borderRight:"1px solid rgba(40,40,50,0.5)"},children:[zi.map((Ae,Et)=>{const an=qn+Et*ci,Un=14,pi=Ae.sell===0?Un:Math.max(Un,bt*.3+bt*.7*(Ae.sell/Lt)),So=Ae.buy===0?Un:Math.max(Un,bt*.3+bt*.7*(Ae.buy/ln)),sr=Vn(Ae.sell,Ae.isPOC),wo=Fn(Ae.buy,Ae.isPOC),io=Ae.isPOC?"#000":"#8b0000",Nl=Ae.isPOC?"#000":"#006400";return e.jsxs(Pi.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:bt-pi,top:an,width:pi,height:ci-1,background:sr.bg,border:sr.border,borderRadius:"2px 0 0 2px",boxShadow:Ae.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:2,fontSize:8,fontFamily:"monospace",color:Ae.sell===0?"#666":io,fontWeight:Ae.isPOC?700:600,textShadow:"none",overflow:"hidden"},children:E&&Ae.sell}),e.jsx("div",{style:{position:"absolute",left:bt+fi,top:an,width:So,height:ci-1,background:wo.bg,border:wo.border,borderRadius:"0 2px 2px 0",boxShadow:Ae.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:2,fontSize:8,fontFamily:"monospace",color:Ae.buy===0?"#666":Nl,fontWeight:Ae.isPOC?700:400,textShadow:Ae.isPOC||Ae.buy===0?"none":"0 0 2px rgba(0,0,0,0.8)",overflow:"hidden"},children:E&&Ae.buy})]},Et)}),e.jsx("div",{style:{position:"absolute",left:bt+fi/2-1,top:qn,width:2,height:Math.max(Mi-qn,1),background:pn?"rgba(0,255,200,0.6)":"rgba(255,0,150,0.6)",boxShadow:pn?"0 0 3px rgba(0,255,255,0.5)":"0 0 3px rgba(255,0,150,0.5)"}}),e.jsx("div",{style:{position:"absolute",left:bt+1,top:Vo,width:fi-2,height:Math.max(Ti,3),background:pn?"rgba(100,255,200,0.7)":"rgba(255,100,150,0.7)",border:pn?"1px solid rgba(0,255,255,0.9)":"1px solid rgba(255,0,150,0.9)",borderRadius:2,boxShadow:pn?"0 0 4px rgba(0,255,255,0.6)":"0 0 4px rgba(255,0,150,0.6)"}}),tt===Ht.length-1&&Re.ts&&e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Math.min(Mi+10,gt-25),background:"#00cccc",border:"2px solid #00ffff",borderRadius:4,padding:"4px 12px",fontSize:12,fontWeight:700,color:"#000",whiteSpace:"nowrap",boxShadow:"0 0 15px rgba(0,255,255,0.9)",zIndex:500},children:Ct(Re.ts)})]},tt)})})}),e.jsx("div",{style:{width:mt,height:ut,overflow:"hidden",borderLeft:"1px solid rgba(255,255,255,0.2)",background:"rgba(20,20,30,0.95)",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"4px 0",cursor:"ns-resize",userSelect:"none"},onMouseDown:Re=>{const tt=Re.clientY,at=U,en=hn=>{const fn=(tt-hn.clientY)/100,rn=Math.max(.5,Math.min(5,at+fn));j(rn)},It=()=>{document.removeEventListener("mousemove",en),document.removeEventListener("mouseup",It)};document.addEventListener("mousemove",en),document.addEventListener("mouseup",It)},onWheel:Re=>{Re.preventDefault();const tt=Re.deltaY>0?-.1:.1;j(at=>Math.max(.5,Math.min(5,at+tt)))},children:[...Array(8)].map((Re,tt)=>{const at=cn-tt*(cn-Pt)/7;return e.jsx("div",{style:{fontSize:9,fontFamily:"monospace",color:"#aaa",paddingLeft:4,lineHeight:1},children:at.toFixed(1)},tt)})})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.4)",maxWidth:"100%",overflowX:"auto"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Ht.map((Re,tt)=>e.jsx("div",{style:{width:jt,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",color:"#777",padding:"2px 0"},children:Re.isEmpty?"":(Re.buy||0)+(Re.sell||0)},tt))}),e.jsx("div",{style:{width:mt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Ht.map((Re,tt)=>{const at=Re.delta||(Re.buy||0)-(Re.sell||0),en=at>=0;return e.jsx("div",{style:{width:jt,flexShrink:0,textAlign:"center",padding:"2px 1px"},children:!Re.isEmpty&&e.jsxs("span",{style:{fontSize:8,fontFamily:"monospace",fontWeight:600,color:"#000",background:en?"#40dd80":"#ff5555",padding:"1px 4px",borderRadius:2},children:[en?"+":"",typeof at=="number"?at.toFixed(0):at]})},tt)})}),e.jsx("div",{style:{width:mt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Ht.map((Re,tt)=>{const at=Re.delta||(Re.buy||0)-(Re.sell||0),en=(Re.buy||0)+(Re.sell||0),It=en>0?at/en*100:0;return e.jsx("div",{style:{width:jt,flexShrink:0,textAlign:"center",fontSize:7,fontFamily:"monospace",color:It>=0?"#40dd80":"#ff5555",padding:"1px 0"},children:Re.isEmpty?"":`${It.toFixed(1)}%`},tt)})}),e.jsx("div",{style:{width:mt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",cursor:"ew-resize",userSelect:"none"},onMouseDown:Re=>{const tt=Re.clientX,at=h,en=hn=>{const fn=(tt-hn.clientX)/100,rn=Math.max(.5,Math.min(3,at+fn));z(rn)},It=()=>{document.removeEventListener("mousemove",en),document.removeEventListener("mouseup",It)};document.addEventListener("mousemove",en),document.addEventListener("mouseup",It)},onWheel:Re=>{Re.preventDefault();const tt=Re.deltaY>0?-.1:.1;z(at=>Math.max(.5,Math.min(3,at+tt)))},children:[e.jsxs("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",position:"relative",paddingRight:60},children:[Ht.map((Re,tt)=>{const at=tt===Ht.length-1;return e.jsx("div",{style:{width:jt,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",padding:"3px 0"},children:Re.isEmpty?"":e.jsx("span",{style:{color:at?"#00ffff":"#555",fontWeight:at?700:400,background:at?"rgba(0,255,255,0.25)":"transparent",padding:at?"2px 6px":0,borderRadius:at?4:0,border:at?"1px solid rgba(0,255,255,0.7)":"none",boxShadow:at?"0 0 6px rgba(0,255,255,0.5)":"none"},children:Ct(Re.ts)})},tt)}),Ht.length>0&&!Ht[Ht.length-1].isEmpty&&e.jsxs("div",{style:{position:"absolute",right:0,top:-20,background:"rgba(0,255,255,0.3)",border:"1px solid rgba(0,255,255,0.8)",borderRadius:4,padding:"2px 8px",fontSize:9,fontWeight:700,color:"#00ffff",boxShadow:"0 0 8px rgba(0,255,255,0.5)",zIndex:100},children:["LIVE: ",Ct(Ht[Ht.length-1].ts)]})]}),e.jsx("div",{style:{width:mt,flexShrink:0}})]})]})]}),!E&&e.jsx("button",{onClick:()=>ie(!0),style:{position:"absolute",top:8,right:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:10,color:"#888",zIndex:200},children:" Expand"})]})})()})]})})(),(t==null?void 0:t.contract)==="BTC-SPOT"&&e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10,marginTop:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"BTC ETF FLOWS & INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"TOTAL ETF FLOWS"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"1D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:v.total_flow_1d_mm>0?"#00ff88":v.total_flow_1d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(v.total_flow_1d_mm||0).toFixed(0),"M",v.total_flow_1d_mm>0?" IN":v.total_flow_1d_mm<0?" OUT":""]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"5D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:v.total_flow_5d_mm>0?"#00ff88":v.total_flow_5d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(v.total_flow_5d_mm||0).toFixed(0),"M"]})]})]}),(v.etfs||[]).slice(0,4).map((x,V)=>{var Q,K;return e.jsxs("div",{style:{flex:"1 1 120px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#ffaa00",fontWeight:700,marginBottom:4},children:x.symbol}),e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#fff",marginBottom:2},children:["$",((Q=x.price)==null?void 0:Q.toFixed(2))||"--"]}),e.jsxs("div",{style:{fontSize:9,color:x.price_change_1d>0?"#00ff88":x.price_change_1d<0?"#ff4466":"#888"},children:[x.price_change_1d>0?"+":"",((K=x.price_change_1d)==null?void 0:K.toFixed(2))||"0","%"]})]},V)}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"INSTITUTIONAL SENTIMENT"}),(()=>{const x=(ne==null?void 0:ne.bitcoin)||{},V=x.overall_sentiment||"neutral",Q=V==="bullish"?"#00ff88":V==="bearish"?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Overall"}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:Q,textTransform:"uppercase"},children:V})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"ETF Trend"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:x.etf_flow_trend==="bullish"?"#00ff88":x.etf_flow_trend==="bearish"?"#ff4466":"#888"},children:x.etf_flow_trend||"neutral"})]})]})})()]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#ff6b6b",fontWeight:700,marginBottom:6},children:"DERIBIT OPTIONS"}),(()=>{const x=(le==null?void 0:le.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Max Pain"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:"#ffaa00"},children:["$",(x.max_pain||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"P/C Ratio"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:x.put_call_ratio>1?"#ff4466":x.put_call_ratio<.7?"#00ff88":"#888"},children:(x.put_call_ratio||0).toFixed(2)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Sentiment"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:x.sentiment==="bullish"?"#00ff88":x.sentiment==="bearish"?"#ff4466":"#888"},children:x.sentiment||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",fontWeight:700,marginBottom:6},children:"GAMMA LEVELS"}),(()=>{const x=(le==null?void 0:le.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#00ff88"},children:"Call Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(x.call_wall||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#ff4466"},children:"Put Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(x.put_wall||0).toLocaleString()]})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"PERP FUNDING RATE"}),(()=>{var K,je,We;const x=(it==null?void 0:it.funding_rates)||{},V=x.average||0,Q=V>.01?"#00ff88":V<-.01?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"8H Rate"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:Q},children:[V>0?"+":"",(V||0).toFixed(4),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Annual"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:Q},children:[x.annualized>0?"+":"",(x.annualized||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:(K=x.sentiment)!=null&&K.includes("bullish")?"#00ff88":(je=x.sentiment)!=null&&je.includes("bearish")?"#ff4466":"#888"},children:((We=x.sentiment)==null?void 0:We.replace("_"," "))||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CME BASIS"}),(()=>{var Q;const V=(((Q=ne==null?void 0:ne.bitcoin)==null?void 0:Q.cme_basis)||{}).basis_pct||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Futures vs Spot"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:V>0?"#00ff88":"#ff4466"},children:[V>0?"+":"",V.toFixed(2),"%"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Premium tracking"})]})})()]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:8},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var Ee;const x=((Ee=ne==null?void 0:ne.bitcoin)==null?void 0:Ee.cot)||{},V=x.sentiment||"neutral",Q=V==="bullish"?"#00ff88":V==="bearish"?"#ff4466":"#888",K=x.asset_mgr_net||0,je=x.asset_mgr_net_prev||0,We=x.asset_mgr_change||K-je,Ve=x.lev_funds_net||0,ht=x.lev_funds_net_prev||0,me=x.lev_funds_change||Ve-ht,be=x.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Asset Managers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466",fontWeight:600},children:[(K/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(je/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:We>0?"#00ff88":"#ff4466",fontWeight:600},children:[We>0?"+":"",(We/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",be]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Asset Mgrs"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:K>0?"#00ff88":"#ff4466"},children:[K>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:We>0?"#00ff88":"#ff4466"},children:["(",We>0?"+":"",(We/1e3).toFixed(1),"K)"]})]})]})}),e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Leveraged Funds Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Ve>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Ve/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(ht/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:me>0?"#00ff88":"#ff4466",fontWeight:600},children:[me>0?"+":"",(me/1e3).toFixed(1),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Lev Funds"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Ve>0?"#00ff88":"#ff4466"},children:[Ve>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:me>0?"#00ff88":"#ff4466"},children:["(",me>0?"+":"",(me/1e3).toFixed(1),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:Q,textTransform:"capitalize"},children:V})]})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"CME OPEN INTEREST"}),(()=>{var je;const x=((je=ne==null?void 0:ne.bitcoin)==null?void 0:je.open_interest)||{},V=x.total||0,Q=x.total_prev||0,K=x.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"CME Bitcoin Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(V/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(Q/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466"},children:[K>0?"+":"",K.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(V/1e3).toFixed(1),"K BTC"]})]})}),e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466"},children:[K>0?"+":"",K.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",fontWeight:700,marginBottom:6},children:"GBTC PREMIUM"}),(()=>{var je;const x=((je=ne==null?void 0:ne.bitcoin)==null?void 0:je.gbtc)||{},V=x.premium_pct||0,Q=x.premium_pct_prev||0,K=V-Q;return e.jsxs(e.Fragment,{children:[e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#888",fontWeight:600,marginBottom:4},children:"GBTC NAV Premium/Discount"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:V>0?"#00ff88":"#ff4466",fontWeight:600},children:[V>0?"+":"",V.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[Q>0?"+":"",Q.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Change:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466"},children:[K>0?"+":"",K.toFixed(2),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Premium = bullish demand"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Discount = bearish pressure"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"NAV Premium"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:V>0?"#00ff88":"#ff4466"},children:[V>0?"+":"",V.toFixed(2),"%"]})]})}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Institutional demand"})]})})()]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"CFTC COT Report"}),e.jsx("div",{style:{marginBottom:4,color:"#aaa"},children:"Commitments of Traders"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Data as of:"}),e.jsx("span",{style:{color:"#fff"},children:"Tuesday"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Released:"}),e.jsx("span",{style:{color:"#fff"},children:"Friday 3:30pm ET"})]}),e.jsx("div",{style:{marginTop:6,fontSize:9,color:"#666"},children:"Shows institutional positioning in CME Bitcoin futures"})]}),children:e.jsxs("div",{style:{cursor:"help"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CFTC REPORT"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Weekly Tuesday"}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"Released Fri 3:30pm"})]})})})]})]}),(()=>{const V=[...He].slice(0,21).reverse(),Q=3,K=180;let je=0;const We=V.map((ge,yt,jt)=>{const ut=ge.delta??0,mt=(ge.buy||0)+(ge.sell||0),zt=mt>0?ut/mt*100:0,G=yt>0&&jt[yt-1].delta||0,Ye=ut-G,he=je;je+=ut;const St=je,Bt=Math.abs(ut)*.15,Ot=Math.max(he,St)+Bt,Gt=Math.min(he,St)-Bt;return{price_open:ge.price_open||0,price_high:ge.price_high||0,price_low:ge.price_low||0,price_close:ge.price_close||0,delta_open:he,delta_high:Ot,delta_low:Gt,delta_close:St,delta:ut,deltaPct:zt,deltaChange:Ye,volume:mt,ts:ge.ts||0,isCurrent:!1,isEmpty:!1}});if(O.buy>0||O.sell>0||O.price_open>0){const ge=O.delta??0,yt=Le>0?ge/Le*100:0,jt=V.length>0&&V[V.length-1].delta||0,ut=ge-jt,mt=We.length>0?We[We.length-1].delta_close:0,zt=mt,G=mt+ge,Ye=Math.abs(ge)*.15,he=Math.max(zt,G)+Ye,St=Math.min(zt,G)-Ye;We.push({price_open:O.price_open||0,price_high:O.price_high||Pe,price_low:O.price_low||Pe,price_close:Pe,delta_open:zt,delta_high:he,delta_low:St,delta_close:G,delta:ge,deltaPct:yt,deltaChange:ut,volume:Le,ts:O.candle_start||Date.now()/1e3,isCurrent:!0,isEmpty:!1})}const Ve=We,ht=Ve.filter(ge=>ge.price_open>0),me=ht.map(ge=>ge.price_high),be=ht.map(ge=>ge.price_low),Ee=me.length>0?Math.max(...me):0,et=be.length>0?Math.min(...be):0,Tt=Ee-et||1,Me=Ee+Tt*.1,ft=et-Tt*.1,Qt=Me-ft||1,Nt=Ve,Mt=Nt.map(ge=>ge.delta_high),Ht=Nt.map(ge=>ge.delta_low),$t=Mt.length>0?Math.max(...Mt):0,Z=Ht.length>0?Math.min(...Ht):0,ve=$t-Z||50,_t=$t+ve*.15,Ut=Z-ve*.15,Zt=_t-Ut||1,Ze=ge=>(Me-ge)/Qt*K,pt=ge=>(_t-ge)/Zt*K,Xt=ge=>ge?new Date(ge*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",hour12:!1}):"";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{color:"#888",fontSize:10,fontWeight:600,letterSpacing:1},children:"PRICE & DELTA CHARTS"}),e.jsx("button",{onClick:()=>y(!w),style:{background:w?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:w?"Hide Charts":"Show Charts"})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"PRICE OHLC"}),e.jsxs("div",{style:{display:"flex",gap:Q,height:K,overflow:"hidden",position:"relative"},children:[Ve.map((ge,yt)=>{if(ge.price_open<=0)return null;const jt=ge.price_close>=ge.price_open,ut=Ze(Math.max(ge.price_open,ge.price_close)),mt=Math.max(Math.abs(Ze(ge.price_open)-Ze(ge.price_close)),2),zt=Ze(ge.price_high),G=Ze(ge.price_low)-zt,Ye=jt?"#00ff88":"#ff4466",he=ge.isCurrent?1:.5+yt/Ve.length*.5,St=f===yt;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:K,opacity:St?1:he,cursor:"crosshair"},onMouseEnter:()=>P(yt),onMouseLeave:()=>P(null),children:[St&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:zt,width:1,height:G,background:Ye,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:ut,width:ge.isCurrent?"90%":"70%",height:mt,background:Ye,borderRadius:1,border:ge.isCurrent?"1px solid rgba(255,255,255,0.5)":"none"}}),St&&ge.ts&&!ge.isCurrent&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"2px 6px",fontSize:9,color:"#aaa",whiteSpace:"nowrap",pointerEvents:"none",zIndex:100},children:Xt(ge.ts)}),ge.isCurrent&&ge.ts&&e.jsx("div",{style:{position:"absolute",bottom:-16,left:"50%",transform:"translateX(-50%)",background:"rgba(0,170,255,0.3)",border:"1px solid rgba(0,170,255,0.6)",borderRadius:3,padding:"1px 4px",fontSize:8,fontWeight:600,color:"#00aaff",whiteSpace:"nowrap",pointerEvents:"none",zIndex:50},children:Xt(ge.ts)})]},yt)}),(()=>{var qt;const ge=t.big_trades||[],yt=t.big_trades_historical||[],jt=new Set(ge.map(gt=>gt.ts)),mt=[...ge,...yt.filter(gt=>!jt.has(gt.ts))].sort((gt,Vt)=>Vt.ts-gt.ts);if(mt.length===0)return null;const zt=100/Ve.length,G=i==="5m"?300:i==="15m"?900:i==="30m"?1800:3600,Ye=Ve.filter(gt=>gt.ts>0),he=Ye.length>0?Math.min(...Ye.map(gt=>gt.ts)):0,St=Ye.length>0?Math.max(...Ye.map(gt=>gt.ts))+G*2:0,Bt=mt.filter(gt=>gt.ts>=he&&gt.ts<=St),Ot={GC:100,NQ:20,ES:50,CL:1e3,BTC:1},Gt=t.asset_class||"GC",cn=Ot[Gt]||100,Pt=((qt=t.threshold_stats)==null?void 0:qt.avg_size)||3;return t.big_trade_threshold,e.jsxs(e.Fragment,{children:[e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:K,pointerEvents:"none",zIndex:25,overflow:"visible"},children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"buyGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#88ffcc",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#00ff88",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#006633",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"buyGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ccffee",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#44ffaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#00cc66",stopOpacity:"0.7"})]}),e.jsxs("radialGradient",{id:"sellGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffaaaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#ff4466",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#881133",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"sellGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffdddd",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#ff6688",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#cc2244",stopOpacity:"0.7"})]}),e.jsxs("filter",{id:"buyGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"sellGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),Bt.map((gt,Vt)=>{const Ct=gt.ts,Re=Ve.findIndex((Vo,Ti)=>{if(!Vo.ts)return!1;const di=Vo.ts,ci=Ti===Ve.length-1?di+G*2:di+G;return Ct>=di&&Ct<ci});if(Re===-1)return null;const tt=(Re+.5)*zt,at=Ze(gt.price),en=i==="5m"?2:i==="15m"?1.5:i==="30m"?1.2:.8,hn=Math.min(i==="1h"?14:i==="30m"?16:22,Math.max(6,Math.sqrt(gt.size)*en)),fn=gt.ts,rn=u===fn,pn=rn?hn*1.5:hn,qn=gt.side==="BUY",Mi=qn?rn?"url(#buyGradientHover)":"url(#buyGradient)":rn?"url(#sellGradientHover)":"url(#sellGradient)",ei=qn?"#00ff88":"#ff4466",wn=qn?"#00ff88":"#ff4466";return e.jsxs("g",{style:{cursor:"pointer",pointerEvents:"all"},onMouseEnter:()=>oe(fn),onMouseLeave:fe,children:[e.jsx("circle",{cx:`${tt}%`,cy:at,r:pn+15,fill:"transparent",style:{pointerEvents:"visiblePainted",cursor:"pointer"}}),e.jsx("circle",{cx:`${tt}%`,cy:at,r:pn+(rn?12:4),fill:"none",stroke:ei,strokeWidth:rn?3:1,strokeOpacity:rn?.5:.2,style:{transition:"all 0.2s ease",pointerEvents:"none"}}),e.jsx("circle",{cx:`${tt}%`,cy:at,r:pn+(rn?6:2),fill:ei,fillOpacity:rn?.25:.1,style:{transition:"all 0.2s ease"}}),e.jsx("circle",{cx:`${tt}%`,cy:at,r:pn,fill:Mi,stroke:rn?"#ffffff":wn,strokeWidth:rn?2:1,filter:rn?qn?"url(#buyGlow)":"url(#sellGlow)":"none",style:{transition:"all 0.2s ease"}}),e.jsx("ellipse",{cx:`${tt}%`,cy:at-pn*.35,rx:pn*.5,ry:pn*.25,fill:"rgba(255,255,255,0.4)",style:{transition:"all 0.2s ease"}}),(gt.size>=10||rn)&&e.jsx("text",{x:`${tt}%`,y:at+(rn?4:3),textAnchor:"middle",fontSize:rn?11:8,fontWeight:"bold",fill:"#fff",style:{transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:gt.size>=1e3?`${(gt.size/1e3).toFixed(1)}K`:gt.size})]},fn)}),Bt.length===0&&mt.length>0&&e.jsxs("text",{x:"50%",y:"20",textAnchor:"middle",fontSize:9,fill:"#666",children:[mt.length," big trades (",yt.length," historical) - scroll to see"]})]}),u!==null&&(()=>{const gt=Bt.find(It=>It.ts===u);if(!gt)return null;const Vt=gt.ts,Re=Ve.findIndex((It,hn)=>{if(!It.ts)return!1;const fn=It.ts,pn=hn===Ve.length-1?fn+G*2:fn+G;return Vt>=fn&&Vt<pn})>=Ve.length*.7,tt=gt.size*gt.price*cn,at=Pt>0?(gt.size/Pt).toFixed(1):"",en=new Date(gt.ts*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return e.jsxs("div",{style:{position:"absolute",top:4,...Re?{left:4}:{right:4},background:"rgba(10,10,20,0.95)",border:`2px solid ${gt.side==="BUY"?"#00ff88":"#ff4466"}`,borderRadius:8,padding:10,zIndex:100,minWidth:180,boxShadow:`0 4px 20px ${gt.side==="BUY"?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:gt.side==="BUY"?"#00ff88":"#ff4466",marginBottom:6},children:gt.side==="BUY"?" BIG BUY":" BIG SELL"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr",gap:"3px 8px",fontSize:10},children:[e.jsx("span",{style:{color:"#666"},children:"Size:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:700},children:[gt.size," contracts"]}),e.jsx("span",{style:{color:"#666"},children:"Price:"}),e.jsxs("span",{style:{color:"#fff"},children:["$",gt.price.toFixed(2)]}),e.jsx("span",{style:{color:"#666"},children:"Notional:"}),e.jsxs("span",{style:{color:"#ffaa00",fontWeight:600},children:["$",(tt/1e6).toFixed(2),"M"]}),e.jsx("span",{style:{color:"#666"},children:"vs Average:"}),e.jsxs("span",{style:{color:parseFloat(at)>2?"#00ff88":"#fff"},children:[at,"x larger"]}),e.jsx("span",{style:{color:"#666"},children:"Time:"}),e.jsxs("span",{style:{color:"#888"},children:[en," ET"]}),gt.date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#666"},children:"Date:"}),e.jsx("span",{style:{color:"#888"},children:gt.date})]})]}),e.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#666"},children:["Top 10% of trades by size ",gt.date?"(historical)":"(live)"]})]})})()]})})()]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",alignItems:"center",marginTop:4,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG BUY"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ff4466",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG SELL"})]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("div",{style:{color:"#f97316"},children:[(t.big_trades||[]).length," live + ",(t.big_trades_historical||[]).length," historical ",t.big_trade_threshold||10," (P90)"]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"DELTA OHLC  DIVERGENCE GLOW"}),e.jsx("div",{style:{display:"flex",gap:Q,height:K,overflow:"hidden",position:"relative"},children:Ve.map((ge,yt)=>{const jt=ge.delta_open,ut=ge.delta_high,mt=ge.delta_low,zt=ge.delta_close,G=ge.price_open,Ye=ge.price_close,he=zt>=jt,St=Ye>=G,Bt=he!==St,Ot=pt(Math.max(jt,zt)),Gt=Math.max(Math.abs(pt(jt)-pt(zt)),2),cn=pt(ut),Pt=pt(mt)-cn,qt=he?"#00ff88":"#ff4466",gt=ge.isCurrent?1:.5+yt/Ve.length*.5,Vt=f===yt;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:K,opacity:Vt?1:gt,cursor:"crosshair"},onMouseEnter:()=>P(yt),onMouseLeave:()=>P(null),children:[Vt&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:cn,width:1,height:Math.max(Pt,0),background:qt,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Ot,width:ge.isCurrent?"90%":"70%",height:Gt,background:qt,borderRadius:1,border:ge.isCurrent?"1px solid rgba(255,255,255,0.5)":"none",boxShadow:Bt?`0 0 8px ${qt}, 0 0 12px ${qt}`:"none"}})]},yt)})}),e.jsx("div",{style:{display:"flex",gap:Q,marginTop:6},children:Ve.map((ge,yt)=>{const jt=ge.delta>=0?"#00ff88":"#ff4466",ut=ge.isCurrent?1:.5+yt/Ve.length*.5,mt=G=>Math.abs(G)>=1e3?`${(G/1e3).toFixed(1)}k`:Math.round(G),zt=f===yt;return e.jsxs("div",{onMouseEnter:()=>P(yt),onMouseLeave:()=>P(null),style:{flex:"1 1 0",minWidth:0,textAlign:"center",opacity:zt?1:ut,background:ge.isCurrent?"rgba(0,170,255,0.12)":zt?"rgba(255,255,255,0.05)":"transparent",borderRadius:4,padding:"3px 1px",border:ge.isCurrent?"1px solid rgba(0,170,255,0.25)":"none",cursor:"pointer",transition:"opacity 0.15s"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",fontFamily:"monospace",overflow:"hidden",textOverflow:"ellipsis"},children:Xt(ge.ts)}),e.jsxs("div",{style:{fontSize:10,color:jt,fontFamily:"monospace",fontWeight:700},children:[ge.deltaPct>=0?"+":"",(ge.deltaPct||0).toFixed(0),"%"]}),e.jsx("div",{style:{fontSize:8,color:"#888",fontFamily:"monospace"},children:mt(ge.volume||0)})]},yt)})})]})]})]})})(),(()=>{var Ut,Zt,Ze,pt,Xt,ge,yt,jt;const x=((Ut=t.volume_5m)==null?void 0:Ut.history)||[],V=x.length<5,Q=x.slice(0,10),K=x.slice(10,20),je=Q.reduce((ut,mt)=>ut+(mt.delta||0),0),We=K.reduce((ut,mt)=>ut+(mt.delta||0),0),Ve=je-We,ht=((Zt=Q[Q.length-1])==null?void 0:Zt.price_open)||0,me=((Ze=Q[0])==null?void 0:Ze.price_close)||0,be=me-ht,Ee=ht>0?be/ht*100:0,et=500,Tt=.1;let Me="BALANCED";Math.abs(Ve)>et&&(Ve<-et&&Ee>-Tt?Me="DISTRIBUTION":Ve>et&&Ee<Tt&&(Me="ACCUMULATION"));const ft=Q[0]||{},Qt=Math.abs((ft.price_high||0)-(ft.price_low||0)),Nt=ft.delta||0;let Mt="NEUTRAL";Math.abs(Nt)>100&&Qt<5?Mt=Nt>0?"BULL_ABSORPTION":"BEAR_ABSORPTION":Qt>10&&Math.abs(Nt)>100&&(Mt=Nt>0?"BULL_FOLLOW":"BEAR_FOLLOW");const Ht=Ve*be<0&&Math.abs(Ve)>et,$t=Q.length>0?je/Q.length:0;K.length>0&&We/K.length;const Z=t.big_trades_buy||0,ve=t.big_trades_sell||0,_t=(t.big_trades||[]).length;return e.jsxs("div",{style:{marginTop:8,background:V?"rgba(255,255,255,0.02)":Me==="DISTRIBUTION"?"rgba(255,68,102,0.08)":Me==="ACCUMULATION"?"rgba(0,255,136,0.08)":"rgba(255,255,255,0.02)",border:`1px solid ${V?"rgba(255,255,255,0.08)":Me==="DISTRIBUTION"?"rgba(255,68,102,0.3)":Me==="ACCUMULATION"?"rgba(0,255,136,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:8,padding:10},children:[e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",gap:6},onClick:()=>C(!b),children:["ORDER FLOW ANALYSIS",e.jsx("span",{style:{fontSize:10,color:b?"#00aaff":"#555",background:b?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",borderRadius:10,padding:"1px 6px",transition:"all 0.2s"},children:""}),V&&e.jsxs("span",{style:{color:"#ffaa00"},children:[" Collecting data (",x.length,"/5 candles)"]})]}),b&&e.jsxs("div",{style:{marginTop:12,background:"#0a0a12",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:12,marginBottom:12},children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Me==="DISTRIBUTION"?"#ff4466":Me==="ACCUMULATION"?"#00ff88":"#00aaff",marginBottom:6},children:Me==="DISTRIBUTION"?" DISTRIBUTION DETECTED":Me==="ACCUMULATION"?" ACCUMULATION DETECTED":" BALANCED / NO CLEAR REGIME"}),e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:Me==="DISTRIBUTION"?"Sellers building pressure while price holds - expect downside breakout":Me==="ACCUMULATION"?"Buyers building pressure while price holds - expect upside breakout":"CVD and price moving together or no significant pressure detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#00aaff",borderRadius:"50%"}}),"CVD ANALYSIS (Cumulative Volume Delta)"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Session CVD:"}),e.jsxs("div",{style:{color:(t.cumulative_delta||0)>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[(t.cumulative_delta||0)>=0?"+":"",(t.cumulative_delta||0).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Recent CVD (10 bars):"}),e.jsxs("div",{style:{color:je>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[je>=0?"+":"",je.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Prior CVD (10 bars):"}),e.jsxs("div",{style:{color:We>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[We>=0?"+":"",We.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"CVD Trend ():"}),e.jsxs("div",{style:{color:Ve>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[Ve>=0?"+":"",Ve.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Avg Delta/Bar:"}),e.jsxs("div",{style:{color:$t>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[$t>=0?"+":"",$t.toFixed(0)]}),e.jsx("div",{style:{color:"#777"},children:"Regime Threshold:"}),e.jsxs("div",{style:{color:"#999",fontFamily:"monospace"},children:["",et]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#ffaa00",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#ffaa00",borderRadius:"50%"}}),"PRICE ANALYSIS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Current Price:"}),e.jsxs("div",{style:{color:"#00aaff",fontFamily:"monospace",fontWeight:700,fontSize:13},children:["$",(t.current_price||0).toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"50m Start Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:ht>0?`$${ht.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"50m End Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:me>0?`$${me.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"Price Change (50m):"}),e.jsx("div",{style:{color:be>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:ht>0?`${be>=0?"+":""}${be.toFixed(2)} (${Ee>=0?"+":""}${Ee.toFixed(3)}%)`:""})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#a855f7",borderRadius:"50%"}}),"VSA (Volume Spread Analysis) - Last 5m Bar"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Price Spread:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:["$",Qt.toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"Bar Delta:"}),e.jsxs("div",{style:{color:Nt>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[Nt>=0?"+":"",Nt.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Buy Volume:"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:(ft.buy||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Sell Volume:"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:(ft.sell||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Signal:"}),e.jsx("div",{style:{color:Mt.includes("BULL")?"#00ff88":Mt.includes("BEAR")?"#ff4466":"#888",fontWeight:700},children:Mt.replace("_"," ")})]}),e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:8,padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6,marginLeft:14},children:Mt.includes("ABSORPTION")?" High delta + Low spread = Strong hands absorbing pressure":Mt.includes("FOLLOW")?" High delta + High spread = Momentum follow-through":" No significant volume-price relationship detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#f97316",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#f97316",borderRadius:"50%"}}),"BIG TRADES (",t.big_trade_threshold||10," contracts) - Institutional Activity"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Big Buy Volume:"}),e.jsxs("div",{style:{color:"#00ff88",fontFamily:"monospace",fontWeight:600},children:[Z.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Big Sell Volume:"}),e.jsxs("div",{style:{color:"#ff4466",fontFamily:"monospace",fontWeight:600},children:[ve.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Net Big Delta:"}),e.jsxs("div",{style:{color:Z-ve>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:14},children:[Z-ve>=0?"+":"",(Z-ve).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Trade Count:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[_t," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Imbalance:"}),e.jsx("div",{style:{color:Z>ve?"#00ff88":ve>Z?"#ff4466":"#888",fontWeight:600},children:Z>ve?" BUYERS dominant":ve>Z?" SELLERS dominant":" Balanced"})]}),e.jsxs("div",{style:{background:"rgba(249,115,22,0.1)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:6,padding:10,marginTop:12,marginLeft:14},children:[e.jsx("div",{style:{fontSize:10,color:"#f97316",fontWeight:600,marginBottom:6},children:"THRESHOLD CALCULATION (90th Percentile)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"110px 1fr",gap:"4px 12px",fontSize:10},children:[e.jsx("div",{style:{color:"#777"},children:"Sample Size:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((pt=t.threshold_stats)==null?void 0:pt.sample_count)||0).toLocaleString()," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Average Trade:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((Xt=t.threshold_stats)==null?void 0:Xt.avg_size)||0).toFixed(1)," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"90th Percentile:"}),e.jsxs("div",{style:{color:"#f97316",fontFamily:"monospace",fontWeight:700},children:[((ge=t.threshold_stats)==null?void 0:ge.p90_size)||t.big_trade_threshold||10," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Trade Range:"}),e.jsxs("div",{style:{color:"#888",fontFamily:"monospace"},children:[((yt=t.threshold_stats)==null?void 0:yt.min_size)||1," - ",((jt=t.threshold_stats)==null?void 0:jt.max_size)||"?"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:8,fontStyle:"italic"},children:"Trades above 90th percentile are flagged as institutional activity"})]})]}),e.jsxs("div",{style:{background:Ht?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.1)",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontSize:11,color:Ht?"#ffaa00":"#00ff88",fontWeight:600,marginBottom:6},children:Ht?" DIVERGENCE DETECTED":" CVD & PRICE ALIGNED"}),e.jsx("div",{style:{fontSize:10,color:"#999",lineHeight:1.4},children:Ht?`CVD trending ${Ve>0?"UP":"DOWN"} while price moving ${be>0?"UP":"DOWN"} - potential reversal signal`:"CVD direction matches price direction - trend continuation likely"})]}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:10,color:"#666",textAlign:"center"},children:["Order Flow Analysis  ",x.length," candles analyzed"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{flex:"0 0 auto",background:Me==="DISTRIBUTION"?"rgba(255,68,102,0.15)":Me==="ACCUMULATION"?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.05)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:`1px solid ${Me==="DISTRIBUTION"?"#ff446650":Me==="ACCUMULATION"?"#00ff8850":"#ffffff10"}`},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"REGIME"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:Me==="DISTRIBUTION"?"#ff4466":Me==="ACCUMULATION"?"#00ff88":"#888"},children:[Me==="DISTRIBUTION"?"":Me==="ACCUMULATION"?"":""," ",Me]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CVD TREND (50m)"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:Ve>=0?"#00ff88":"#ff4466"},children:[Ve>=0?"+":"",Ve.toLocaleString()]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"PRICE "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:be>=0?"#00ff88":"#ff4466"},children:[be>=0?"+":"",be.toFixed(2)]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:Ht?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.08)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:Ht?"1px solid #ffaa0050":"1px solid #00ff8830"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"DIVERGENCE"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:Ht?"#ffaa00":"#00ff88"},children:Ht?" DETECTED":" ALIGNED"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:Mt.includes("ABSORPTION")?"rgba(0,170,255,0.1)":Mt.includes("FOLLOW")?"rgba(0,255,136,0.1)":"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"VSA SIGNAL"}),e.jsx("div",{style:{fontSize:11,fontWeight:700,color:Mt.includes("BULL")?"#00ff88":Mt.includes("BEAR")?"#ff4466":"#888"},children:Mt==="BULL_ABSORPTION"?" ABSORPTION":Mt==="BEAR_ABSORPTION"?" ABSORPTION":Mt==="BULL_FOLLOW"?" FOLLOW":Mt==="BEAR_FOLLOW"?" FOLLOW":" NEUTRAL"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"BIG TRADES "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:(t.big_trades_delta||0)>=0?"#00ff88":"#ff4466"},children:[(t.big_trades_delta||0)>=0?"+":"",(t.big_trades_delta||0).toLocaleString()]})]})]})]})})(),(t==null?void 0:t.contract)!=="BTC-SPOT"&&e.jsxs("div",{style:{marginTop:8,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"GOLD INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CENTRAL BANKS"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:2},children:"Net Buyers 15+ Years"}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:"Accumulating gold reserves"})]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var Ee,et;const x=((Ee=ne==null?void 0:ne.gold)==null?void 0:Ee.cot)||{},V=x.sentiment||((et=ne==null?void 0:ne.gold)==null?void 0:et.cot_sentiment)||"neutral",Q=V==="bullish"?"#00ff88":V==="bearish"?"#ff4466":"#888",K=x.managed_money_net||0,je=x.managed_money_net_prev||0,We=x.managed_money_change||K-je,Ve=x.swap_dealers_net||0,ht=x.swap_dealers_net_prev||0,me=x.swap_dealers_change||Ve-ht,be=x.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Managed Money Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466",fontWeight:600},children:[(K/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(je/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:We>0?"#00ff88":"#ff4466",fontWeight:600},children:[We>0?"+":"",(We/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",be]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Managed Money"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:K>0?"#00ff88":"#ff4466"},children:[K>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:We>0?"#00ff88":"#ff4466"},children:["(",We>0?"+":"",(We/1e3).toFixed(0),"K)"]})]})]})}),e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Swap Dealers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Ve>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Ve/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(ht/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:me>0?"#00ff88":"#ff4466",fontWeight:600},children:[me>0?"+":"",(me/1e3).toFixed(0),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Swap Dealers"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Ve>0?"#00ff88":"#ff4466"},children:[Ve>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:me>0?"#00ff88":"#ff4466"},children:["(",me>0?"+":"",(me/1e3).toFixed(0),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:Q,textTransform:"capitalize"},children:V})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"COMEX OPEN INTEREST"}),(()=>{var je;const x=((je=ne==null?void 0:ne.gold)==null?void 0:je.open_interest)||{},V=x.total||0,Q=x.total_prev||0,K=x.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"COMEX Gold Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(V/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(Q/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466"},children:[K>0?"+":"",K.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(V/1e3).toFixed(0),"K Contracts"]})]})}),e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466"},children:[K>0?"+":"",K.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"GOLD ETF FLOWS"}),(()=>{var Ve;const x=((Ve=ne==null?void 0:ne.gold)==null?void 0:Ve.etf)||{},V=x.gld_holdings||0,Q=x.gld_holdings_prev||0,K=V-Q,je=x.monthly_flow||0,We=x.weekly_flow||0;return e.jsxs(e.Fragment,{children:[e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"GLD ETF Holdings"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(V/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(Q/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:K>0?"#00ff88":"#ff4466"},children:[K>0?"+":"",(K/1e3).toFixed(0),"K oz"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"GLD Holdings"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(V/1e6).toFixed(1),"M oz"]})]})}),e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"ETF Flow Data"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Weekly:"}),e.jsxs("span",{style:{color:We>0?"#00ff88":"#ff4466"},children:[We>0?"+":"",We," tons"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Monthly:"}),e.jsxs("span",{style:{color:je>0?"#00ff88":"#ff4466"},children:[je>0?"+":"",je," tons"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Positive = inflows (bullish)"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Negative = outflows (bearish)"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Weekly Flow"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:We>0?"#00ff88":"#ff4466"},children:[We>0?"+":"",We.toFixed(0)," tons"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:[e.jsx(mi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:600,marginBottom:6},children:"Signal Composition"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"COT Positioning:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"Central Banks:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"ETF Flows:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:4},children:[e.jsx("span",{style:{color:"#888"},children:"Options Gamma:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:4,marginTop:4},children:[e.jsx("div",{style:{fontSize:9,color:"#666"},children:"CFTC Report: Tuesday data"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Released: Friday 3:30pm ET"})]})]}),children:e.jsx("div",{style:{cursor:"help"},children:e.jsx("div",{style:{fontSize:9,color:"#888",marginBottom:4},children:"OVERALL SIGNAL"})})}),(()=>{const x=(ne==null?void 0:ne.gold)||{},V=x.overall_sentiment||"neutral";x.confidence;const Q=V==="bullish"?"#00ff88":V==="bearish"?"#ff4466":"#ffaa00";return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Q,textTransform:"uppercase",marginBottom:4},children:V}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"CFTC Fri 3:30pm"})]})})()]})]})]})]})]})]})},Eu=({selectedContract:t="ES"})=>{const[n,i]=I.useState("horizon"),[o,r]=I.useState(null),[s,l]=I.useState(!1),[d,c]=I.useState(null),[g,w]=I.useState(null),[y,u]=I.useState(null),[L,W]=I.useState({x:0,y:0}),[Y,Ue]=I.useState("current"),[p,b]=I.useState(null),[C,f]=I.useState(null),{isMobile:P}=uo(),[S,T]=I.useState(!1),[E,ie]=I.useState("japan_ib"),[U,j]=I.useState(10),[h,z]=I.useState("long"),[Ie,_]=I.useState(new Set),[Be,Oe]=I.useState("all"),[ne,Ce]=I.useState("all"),[v,_e]=I.useState(null),[le,Ne]=I.useState(!1),[it,Rt]=I.useState(!0),Xe=(()=>{const B=new Date,H=(ye=>{const vt=new Date(Date.UTC(ye.getFullYear(),ye.getMonth(),ye.getDate())),ct=vt.getUTCDay()||7;vt.setUTCDate(vt.getUTCDate()+4-ct);const wt=new Date(Date.UTC(vt.getUTCFullYear(),0,1));return Math.ceil(((vt-wt)/864e5+1)/7)})(B),se=B.getFullYear(),$=[];for(let ye=5;ye>=1;ye--){let vt=H-ye,ct=se;vt<=0&&(vt=52+vt,ct=se-1),$.push({id:`w${ye}`,label:`W${vt}`,weekNum:vt,year:ct})}return $.push({id:"current",label:"Current",weekNum:H,year:se}),$})(),oe=(()=>{const B=[{id:"all",label:"All 12 Months"}],A=new Date;for(let H=0;H<12;H++){const se=new Date(A.getFullYear(),A.getMonth()-H,1),$=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}`,ye=se.toLocaleDateString("en-US",{month:"short",year:"2-digit"});B.push({id:$,label:ye,year:se.getFullYear(),month:se.getMonth()+1})}return B})(),fe=[{id:"pre_asia",name:"Pre Asia",start:"18:00",end:"19:00",color:"#4B5563",horizon:!1},{id:"japan_ib",name:"Japan",start:"19:00",end:"20:00",color:"#9370DB",horizon:!0},{id:"china",name:"China",start:"20:00",end:"23:00",color:"#F472B6",horizon:!0},{id:"asia_close",name:"Asia Close",start:"23:00",end:"02:00",color:"#4B5563",horizon:!1},{id:"deadzone",name:"Dead Zone",start:"02:00",end:"03:00",color:"#6B7280",horizon:!0},{id:"london",name:"London",start:"03:00",end:"06:00",color:"#3B82F6",horizon:!0},{id:"low_volume",name:"Low Vol",start:"06:00",end:"08:20",color:"#4B5563",horizon:!1},{id:"us_ib",name:"US IB",start:"08:20",end:"09:30",color:"#F59E0B",horizon:!0},{id:"ny_1h",name:"NY 1H",start:"09:30",end:"10:30",color:"#10B981",horizon:!0},{id:"ny_2h",name:"NY 2H",start:"10:30",end:"11:30",color:"#06B6D4",horizon:!0},{id:"lunch",name:"Lunch",start:"11:30",end:"13:30",color:"#8B5CF6",horizon:!0},{id:"ny_pm",name:"NY PM",start:"13:30",end:"16:00",color:"#EF4444",horizon:!0},{id:"ny_close",name:"NY Close",start:"16:00",end:"17:00",color:"#4B5563",horizon:!1},{id:"market_closed",name:"Market Closed",start:"17:00",end:"18:00",color:"#1F2937",horizon:!1}],Se=(n==="horizon"?fe.filter(B=>B.horizon):fe).filter(B=>B.id!=="market_closed"),ee=(()=>{const B=new Date,A=B.getTime()+B.getTimezoneOffset()*6e4,H=new Date(A-5*36e5),se=H.getHours(),$=H.getMinutes(),ye=se*100+$;return ye>=1900&&ye<2e3?"japan_ib":ye>=2e3&&ye<2300?"china":ye>=2300||ye<200?"asia_close":ye>=200&&ye<300?"deadzone":ye>=300&&ye<600?"london":ye>=600&&ye<820?"low_volume":ye>=820&&ye<930?"us_ib":ye>=930&&ye<1030?"ny_1h":ye>=1030&&ye<1130?"ny_2h":ye>=1130&&ye<1330?"lunch":ye>=1330&&ye<1600?"ny_pm":ye>=1600&&ye<1700?"ny_close":ye>=1700&&ye<1800?"market_closed":ye>=1800&&ye<1900?"pre_asia":null})(),ke=["pre_asia","japan_ib","china","asia_close","deadzone","london","low_volume","us_ib","ny_1h","ny_2h","lunch","ny_pm","ny_close","market_closed"],lt=B=>{if(B===ee)return"NOW";const A=ke.indexOf(ee),H=ke.indexOf(B);return A===-1?"WAITING":H<A?"ENDED":"WAITING"},Le=(()=>{const B=new Date,A={timeZone:"America/New_York"},se=new Intl.DateTimeFormat("en-US",{...A,weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}).formatToParts(B),$=se.find(wt=>wt.type==="weekday").value,ye=parseInt(se.find(wt=>wt.type==="hour").value),vt=parseInt(se.find(wt=>wt.type==="minute").value),ct=ye*100+vt;return $==="Saturday"?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:$==="Sunday"&&ct<1800?{closed:!0,isWeekend:!0,reopenDay:"Today",reopenTime:"18:00 ET"}:$==="Friday"&&ct>=1700?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:ct>=1700&&ct<1800?{closed:!0,isWeekend:!1,reopenTime:"18:00 ET"}:{closed:!1,isWeekend:!1}})(),[Je,At]=I.useState(!0),[J,ot]=I.useState(null);I.useEffect(()=>{let B=!0;const A=async()=>{try{const se=await fetch(nn);if(se.ok&&B){const $=await se.json();w({sessionHigh:$.session_high||0,sessionLow:$.session_low||0,sessionOpen:$.session_open||0,currentPrice:$.current_price||0,sessionId:$.current_session_id,current_session_name:$.current_session_name||"",vwap:$.vwap||0,dayOpen:$.day_open||0,dayHigh:$.day_high||0,dayLow:$.day_low||0,totalVolume:$.total_volume||0,sessionVolume:$.session_volume||$.total_volume||0,sessionDelta:$.session_delta||$.cumulative_delta||0,cumulativeDelta:$.cumulative_delta||0,endedSessions:$.ended_sessions||{},ibs:$.ibs||{},currentIB:$.current_ib||null,ibHigh:$.ib_high||0,ibLow:$.ib_low||0,overnightHigh:$.overnight_high||$.globex_high||0,overnightLow:$.overnight_low||$.globex_low||0,tpo_poc:$.tpo_poc||0,tpo_vah:$.tpo_vah||0,tpo_val:$.tpo_val||0,us_ib_vwap:$.us_ib_vwap||0,ny_1h_vwap:$.ny_1h_vwap||0,day_vwap:$.day_vwap||0})}}catch(se){console.error("Live data fetch error:",se)}};A();const H=setInterval(A,2e3);return()=>{B=!1,clearInterval(H)}},[]),I.useEffect(()=>{let B=!0,A=null;const H=async()=>{if(B){At(!0),ot(null);try{const se=await fetch(`${nn}/session-history`);if(!se.ok)throw new Error(`HTTP ${se.status}: ${se.statusText}`);const $=await se.json();if($.loading){A=setTimeout(()=>{B&&H()},2e3);return}const ye={japan_ib:"japan_ib",china:"china",london:"london",us_ib:"us_ib",ny_1h:"ny_1h"},vt={};fe.forEach(ct=>{const wt=$[ct.id];if(wt)vt[ct.id]={todayRange:wt.todayRange||0,pDR:wt.pDR||0,avgRange:wt.avgRange||0,cW:wt.cW||0,pW:wt.pW||0,CM:wt.CM||0,PM:wt.PM||0,max:wt.max||0,min:wt.min||0};else{let kt=ct.id.split("").reduce((Kt,gn)=>Kt+gn.charCodeAt(0),0);const sn=()=>(kt=(kt*9301+49297)%233280,kt/233280),nt=ct.horizon?5+sn()*10:3+sn()*5,xt=Array.from({length:40},()=>nt*(.8+sn()*.4)),Ft=Kt=>Kt.length>0?Kt.reduce((gn,_n)=>gn+_n,0)/Kt.length:0,tn=xt.slice(1,11);vt[ct.id]={todayRange:xt[0]||0,pDR:xt[1]||0,avgRange:Ft(tn),cW:Ft(xt.slice(0,5)),pW:Ft(xt.slice(5,10))||0,CM:Ft(xt.slice(0,20)),PM:Ft(xt.slice(20,40))||0,max:tn.length>0?Math.max(...tn):0,min:tn.length>0?Math.min(...tn):0}}}),r(vt)}catch(se){console.error("Failed to fetch session history:",se),ot(se.message)}finally{At(!1)}}};return H(),()=>{B=!1,A&&clearTimeout(A)}},[]);const rt=B=>`horizon_sessions_${t}_${B}`,Qe=B=>{try{const A=localStorage.getItem(rt(B));if(A){const{data:H,timestamp:se}=JSON.parse(A),$=B==="current"?3e5:36e5;if(Date.now()-se<$)return H}}catch{}return null},re=(B,A)=>{try{localStorage.setItem(rt(B),JSON.stringify({data:A,timestamp:Date.now()}))}catch{}},a={ES:[5500,6500],GC:[2500,3100],BTC:[75e3,13e4]},m=(B,A)=>{if(!B||!B.length)return!1;const H=(A==null?void 0:A.substring(0,2))||"",se=a[H];if(!se)return!0;for(const $ of B)if($.sessions)for(const ye of Object.keys($.sessions)){const vt=$.sessions[ye];if((vt==null?void 0:vt.h)>0)return vt.h>=se[0]&&vt.h<=se[1]?!0:(console.warn(`Data validation failed: price ${vt.h} not in expected range ${se[0]}-${se[1]} for ${A}`),!1)}return!0},F=async()=>{try{["current","w1","w2","w3","w4","w5"].forEach(H=>localStorage.removeItem(rt(H))),c(null);const A=await fetch(`${nn}/historical-sessions?week=${Y}&stock=${t}&nocache=${Date.now()}`);if(A.ok){const H=await A.json();H.days&&!H.loading&&(m(H.days,t)?(c(H.days),re(Y,H.days)):(console.error("Received data for wrong contract, not caching"),c(H.days)))}}catch(B){console.error("Failed to refresh:",B)}};return I.useEffect(()=>{const B=async()=>{const H=Qe(Y);H&&m(H,t)?c(H):H&&localStorage.removeItem(rt(Y));try{const se=await fetch(`${nn}/historical-sessions?week=${Y}&stock=${t}`);if(se.ok){const $=await se.json();$.days&&!$.loading&&(m($.days,t)?(c($.days),re(Y,$.days)):(c($.days),console.error(`Backend returned wrong data for ${t}. Backend needs to clear its cache.`)))}}catch(se){console.error("Failed to fetch historical sessions:",se)}};B();const A=setInterval(B,Y==="current"?3e5:36e5);return()=>clearInterval(A)},[Y,t]),I.useEffect(()=>{(async()=>{const A=`horizon_strategy_${t}_12m`;try{const H=localStorage.getItem(A);if(H){const{data:se,timestamp:$}=JSON.parse(H);if(Date.now()-$<864e5&&m(se,t)){_e(se);return}}}catch{}Ne(!0);try{const H=await fetch(`${nn}/historical-sessions?months=12&stock=${t}`);if(H.ok){const se=await H.json();se.days&&!se.loading&&(m(se.days,t)?(_e(se.days),localStorage.setItem(A,JSON.stringify({data:se.days,timestamp:Date.now()}))):_e(se.days))}}catch(H){console.error("Failed to fetch strategy data:",H)}Ne(!1)})()},[t]),Je?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading session history from Databento..."]}):J?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,color:"#ff4466"},children:""}),e.jsx("div",{style:{color:"#ff4466",marginBottom:8},children:"Failed to load session data"}),e.jsx("div",{style:{color:"#666",fontSize:12},children:J})]}):o?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:P?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:P?"column":"row",justifyContent:"space-between",alignItems:P?"flex-start":"center",marginBottom:P?16:24,gap:P?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:P?16:20},children:P?"Session Analysis":" Session Analysis"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:P?11:13},children:"Historical Session Range Analysis  Range = High - Low"})]}),e.jsx("div",{style:{display:"flex",gap:P?8:12,alignItems:"center",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>i("horizon"),style:{padding:P?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="horizon"?"#8B5CF6":"rgba(255,255,255,0.1)",color:n==="horizon"?"#fff":"#888",fontSize:P?10:11,fontWeight:600,cursor:"pointer"},children:"Horizon"}),e.jsx("button",{onClick:()=>i("universe"),style:{padding:P?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="universe"?"#3B82F6":"rgba(255,255,255,0.1)",color:n==="universe"?"#fff":"#888",fontSize:P?10:11,fontWeight:600,cursor:"pointer"},children:"Universe"})]})})]}),Le.closed&&e.jsxs("div",{style:{background:Le.isWeekend?"linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)":"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:Le.isWeekend?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,padding:"16px 24px",marginBottom:20,display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:Le.isWeekend?"":""}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:Le.isWeekend?"#A78BFA":"#00ff88",fontSize:14,fontWeight:700,letterSpacing:1,textTransform:"uppercase"},children:Le.isWeekend?"Weekend":"Market Closed"}),e.jsx("div",{style:{color:"#888",fontSize:12,marginTop:4},children:Le.isWeekend?`Market Reopens ${Le.reopenDay} ${Le.reopenTime}`:`Reopens ${Le.reopenTime}`})]})]}),(()=>{var ai,Fi,to,Yi,Xi,Zn,zn,xo,yo,mo,bo,vo,jo;let B=0,A=1/0,H=null,se=null,$=null,ye=null;const vt=new Set(Se.map(te=>te.id));d&&d.length>0&&d.forEach(te=>{Object.entries(te.sessions||{}).forEach(([st,k])=>{vt.has(st)&&k&&k.h>0&&(k.h>B&&(B=k.h,H=te.date,se=st),k.l>0&&k.l<A&&(A=k.l,$=te.date,ye=st))})});const ct=(()=>{const te=new Date;return`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,"0")}-${String(te.getDate()).padStart(2,"0")}`})(),wt=Le.closed&&d&&d.length>0,kt=wt?d[0]:null,sn=kt?Object.fromEntries(Object.entries(kt.sessions||{}).map(([te,st])=>[te,{open:st.o,high:st.h,low:st.l,close:st.c,volume:st.v||0,delta:st.d||0}])):{},nt=wt?sn:(g==null?void 0:g.endedSessions)||{},xt=wt?((ai=kt==null?void 0:kt.day)==null?void 0:ai.c)||0:(g==null?void 0:g.currentPrice)||0,Ft=wt?((Fi=kt==null?void 0:kt.day)==null?void 0:Fi.o)||0:(g==null?void 0:g.dayOpen)||0,tn=wt?((to=kt==null?void 0:kt.day)==null?void 0:to.h)||0:(g==null?void 0:g.dayHigh)||0,Kt=wt?((Yi=kt==null?void 0:kt.day)==null?void 0:Yi.l)||0:(g==null?void 0:g.dayLow)||0,gn=wt?((Xi=kt==null?void 0:kt.day)==null?void 0:Xi.v)||0:(g==null?void 0:g.totalVolume)||0,_n=wt?((Zn=kt==null?void 0:kt.day)==null?void 0:Zn.d)||0:(g==null?void 0:g.cumulativeDelta)||0,$n=wt?(kt==null?void 0:kt.label)||"Friday":(()=>{const te=new Date,st=String(te.getMonth()+1).padStart(2,"0"),k=String(te.getDate()).padStart(2,"0");return`${st}-${k} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][te.getDay()]}`})(),Yt=Se.map(te=>{const st=lt(te.id),k=nt[te.id]||{},M=st==="NOW",pe=o[te.id]||{},ce=M?(g==null?void 0:g.sessionOpen)||0:k.open||0,xe=M?(g==null?void 0:g.sessionHigh)||0:k.high||0,qe=M?(g==null?void 0:g.sessionLow)||0:k.low||0,N=M?xt:k.close||0,ae=M?(g==null?void 0:g.sessionVolume)||0:k.volume||0,we=M?(g==null?void 0:g.sessionDelta)||0:k.delta||0,Te=xe>0&&qe>0?xe-qe:0,$e=ae>0?we/ae*100:0;return{...te,status:st,open:ce,high:xe,low:qe,close:N,volume:ae,delta:we,deltaPct:$e,range:Te,hasData:xe>0||M,pdr:pe.pDR||0,avg10d:pe.avgRange||0,cW:pe.cW||0,pW:pe.pW||0,cM:pe.CM||0,pM:pe.PM||0,max:pe.max||0,min:pe.min||0,todayRange:pe.todayRange||0}});Y==="current"&&Yt.forEach(te=>{te.high>0&&(te.high>B&&(B=te.high,H=ct,se=te.id),te.low>0&&te.low<A&&(A=te.low,$=ct,ye=te.id))});const xn=te=>{const st=Object.values(o||{}).map(k=>k[te]||0).filter(k=>k>0);return st.length>0?st.reduce((k,M)=>k+M,0)/st.length:0},si=xt>0?xt:((zn=nt.ny_close)==null?void 0:zn.close)||((xo=nt.ny_pm)==null?void 0:xo.close)||tn,Pn={id:"1d",name:"1D",color:"#FFFFFF",open:Ft,high:tn,low:Kt,close:si,volume:gn,delta:_n,deltaPct:gn>0?_n/gn*100:0,range:tn>0&&Kt>0?tn-Kt:0,hasData:Ft>0,pdr:xn("pDR"),avg10d:xn("avgRange"),cW:xn("cW"),pW:xn("pW"),cM:xn("CM"),pM:xn("PM"),max:xn("max"),min:xn("min")},Bn=[Pn.low,...Yt.filter(te=>te.hasData).map(te=>te.low)].filter(te=>te>0),Tn=[Pn.high,...Yt.filter(te=>te.hasData).map(te=>te.high)].filter(te=>te>0),Wn=Bn.length>0?Math.min(...Bn):0,In=Tn.length>0?Math.max(...Tn):0,Jn=In-Wn||1,En=Wn-Jn*.08,Qn=In+Jn*.08,_i=Qn-En,Ci=180,Wi=[Pn,...Yt],Gi=138,li=(te,st,k=!1,M=null,pe=null,ce=null)=>{let xe=En,qe=Qn,N=_i;const ae=k?Ci:Gi;if(!k&&te){const ue=te.day,Ge=Object.values(te.sessions||{}).filter(R=>R&&R.h>0),ze=Ge.map(R=>R.h),X=Ge.map(R=>R.l);if((ue==null?void 0:ue.h)>0&&(ze.push(ue.h),X.push(ue.l)),ze.length>0){const R=Math.max(...ze),D=Math.min(...X),x=R-D||1;xe=D-x*.08,qe=R+x*.08,N=qe-xe}}const we=k?Wi:(()=>{if(!te)return[];const ue=te.day||{},Ge={id:"1d",name:"1D",color:"#FFFFFF",open:ue.o||0,high:ue.h||0,low:ue.l||0,close:ue.c||0,hasData:ue.h>0},ze=Se.map(X=>{var D;const R=((D=te.sessions)==null?void 0:D[X.id])||{};return{...X,open:R.o||0,high:R.h||0,low:R.l||0,close:R.c||0,hasData:R.h>0}});return[Ge,...ze]})(),Te=we.slice(1).filter(ue=>ue.hasData&&ue.high>0);let $e=null,de=null;if(Te.length>0){const ue=Math.max(...Te.map(R=>R.high)),Ge=Math.min(...Te.map(R=>R.low)),ze=Te.find(R=>R.high===ue),X=Te.find(R=>R.low===Ge);ze&&($e=ze.id),X&&(de=X.id)}return e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"8px 12px",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",background:k?"rgba(0,255,136,0.02)":"rgba(255,255,255,0.02)",overflow:"hidden"},children:[e.jsx("div",{style:{width:70,minWidth:70,padding:"8px 12px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRight:"1px solid rgba(255,255,255,0.05)",background:k&&Le.closed?"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)":k?"rgba(0, 255, 136, 0.05)":"transparent"},children:k&&Le.closed?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:16,marginBottom:4},children:""}),e.jsx("div",{style:{color:"#A78BFA",fontSize:11,fontWeight:700,letterSpacing:.5},children:st}),e.jsx("div",{style:{color:"#666",fontSize:9,marginTop:2},children:"(Closed)"})]}):k?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#00ff88",fontSize:12,fontWeight:600,lineHeight:1.2},children:st.split(" ")[0]}),e.jsxs("div",{style:{color:"#00ff88",fontSize:10,fontWeight:500,marginTop:2,display:"flex",alignItems:"center",gap:4},children:[st.split(" ")[1]||"",e.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 6px rgba(0, 255, 136, 0.6)"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#A78BFA",fontSize:12,fontWeight:600,lineHeight:1.2},children:st.split(" ")[0]}),e.jsx("div",{style:{color:"#8B7FC7",fontSize:10,fontWeight:500,marginTop:2},children:st.split(" ")[1]||""})]})}),e.jsx("div",{style:{flex:1,display:"flex",height:ae,position:"relative"},children:we.map((ue,Ge)=>{const ze=Ge===0,X=`${st}-${ue.id||ue.name}`,R=!ze&&ue.id===$e,D=!ze&&ue.id===de,x=!ze&&pe&&pe.dayDate===M&&pe.sessionId===ue.id,V=!ze&&ce&&ce.dayDate===M&&ce.sessionId===ue.id,Q=ze?"rgba(255,255,255,0.02)":`${ue.color}06`;return e.jsxs("div",{style:{flex:ze?"0 0 8%":1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:R||x?14:0,paddingBottom:D||V?14:0,background:Q,borderLeft:Ge>0?"1px solid rgba(255,255,255,0.02)":"none"},onMouseEnter:K=>{if(ue.hasData&&ue.high>0){u({...ue,label:`${st} - ${ue.name||"1D"}`,isHOD:R,isLOD:D,isHOW:x,isLOW:V});const je=K.currentTarget.getBoundingClientRect();W({x:je.left+je.width/2,y:je.top})}},onMouseLeave:()=>u(null),children:[R&&!x&&e.jsx("div",{style:{position:"absolute",top:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #10B981"}}),D&&!V&&e.jsx("div",{style:{position:"absolute",bottom:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #EF4444"}}),x&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 4px #00ff88)"}}),V&&e.jsx("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 4px #ff4466)"}}),ue.hasData&&ue.high>0&&(()=>{const K=ue.close>=ue.open,je=K?"#00ff88":"#ff4466",We=K?"#00ff88":"#ff4466",Ve=1.5,ht=7,me=2,be=1,Ee=ae-(ue.high-xe)/N*ae,et=ae-(ue.low-xe)/N*ae,Tt=ae-(ue.open-xe)/N*ae,Me=ae-(ue.close-xe)/N*ae;return e.jsxs("svg",{width:"100%",height:ae,viewBox:`0 0 40 ${ae}`,preserveAspectRatio:"xMidYMid meet",style:{overflow:"visible",cursor:"pointer"},children:[e.jsx("line",{x1:"20",y1:Math.max(2,Ee),x2:"20",y2:Math.min(ae-2,et),stroke:x?"#00ff88":V?"#ff4466":je,strokeWidth:Ve,strokeLinecap:"butt",style:{filter:`drop-shadow(0 0 2px ${je}60)`}}),e.jsx("rect",{x:20-be-ht,y:Math.max(0,Math.min(ae-me,Tt-me/2)),width:ht,height:me,fill:"#FFFFFF",style:{opacity:.9}}),e.jsx("rect",{x:20+be,y:Math.max(0,Math.min(ae-me,Me-me/2)),width:ht,height:me,fill:We,style:{filter:`drop-shadow(0 0 2px ${We}60)`}})]})})()]},X)})})]})};return e.jsxs("div",{className:"hide-scrollbar",style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 8px 32px rgba(0,0,0,0.6)",position:"relative",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden"},children:[e.jsx("div",{style:{position:"sticky",top:0,zIndex:20,background:"linear-gradient(180deg, rgba(12,12,16,1) 0%, rgba(12,12,16,0.98) 100%)",padding:"12px 12px 8px 12px",borderBottom:"1px solid rgba(255,255,255,0.06)",borderTopLeftRadius:16,borderTopRightRadius:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"0 12px",borderRadius:12},children:[e.jsx("div",{style:{width:70,minWidth:70}}),e.jsx("div",{style:{flex:1,display:"flex",position:"relative"},children:Wi.map((te,st)=>{var ae,we;const k=st===0,M=te.status==="NOW",pe=te.status==="WAITING",ce=k?"#FFFFFF":te.color||"#FFFFFF",xe=C===(te.id||st),qe=(ae=te.name)!=null&&ae.includes(" ")?te.name.split(" "):[te.name],N=qe.length>1;return e.jsx("div",{onMouseEnter:()=>f(te.id||st),onMouseLeave:()=>f(null),style:{flex:k?"0 0 8%":1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",position:"relative",cursor:"pointer",paddingBottom:8},children:e.jsxs("div",{style:{width:73,height:73,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,padding:10,background:M&&!Le.closed?`linear-gradient(135deg, ${ce}30 0%, ${ce}15 100%)`:xe?`linear-gradient(135deg, ${ce}20 0%, ${ce}10 100%)`:"rgba(20, 20, 28, 0.9)",border:M&&!Le.closed?`2px solid ${ce}`:xe?`2px solid ${ce}60`:"1px solid rgba(255,255,255,0.1)",opacity:pe?.4:Le.closed&&!k?.6:1,transition:"all 0.2s ease",boxShadow:M&&!Le.closed?`0 0 12px ${ce}50`:xe?`0 0 10px ${ce}30`:"0 2px 8px rgba(0,0,0,0.3)",position:"relative"},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:k?"#888":Le.closed?"#555":ce,boxShadow:M&&!Le.closed||xe?`0 0 6px ${ce}`:"none",animation:M&&!Le.closed?"sessionDotPulse 1.5s ease-in-out infinite":"none"}}),N?e.jsxs("div",{style:{textAlign:"center",lineHeight:1.1},children:[e.jsx("div",{style:{fontSize:11,color:M&&!Le.closed||xe?ce:Le.closed&&!k?"#666":"#e5e5e5",fontWeight:600},children:qe[0]}),e.jsx("div",{style:{fontSize:10,color:M&&!Le.closed||xe?ce:Le.closed&&!k?"#555":"#bbb",fontWeight:500},children:qe.slice(1).join(" ")})]}):e.jsx("span",{style:{fontSize:((we=te.name)==null?void 0:we.length)>6?10:12,color:k?xe?"#ccc":"#999":M&&!Le.closed||xe?ce:Le.closed?"#666":"#e5e5e5",fontWeight:600,textAlign:"center",lineHeight:1.1},children:te.name}),M&&!Le.closed&&e.jsx("div",{style:{position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 6px",borderRadius:8,letterSpacing:"0.05em",boxShadow:"0 2px 6px rgba(0,255,136,0.4)"},children:"LIVE"}),xe&&!k&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:12,background:"linear-gradient(135deg, rgba(12, 12, 18, 0.98) 0%, rgba(18, 18, 28, 0.98) 100%)",border:`1px solid ${ce}30`,borderRadius:12,padding:"14px 18px",minWidth:200,zIndex:100,boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.05) inset",pointerEvents:"none"},children:[e.jsx("div",{style:{position:"absolute",top:-6,left:"50%",width:10,height:10,background:"rgba(12, 12, 18, 0.98)",border:`1px solid ${ce}30`,borderRight:"none",borderBottom:"none",transform:"translateX(-50%) rotate(45deg)"}}),e.jsxs("div",{style:{textAlign:"center",marginBottom:10,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:ce,boxShadow:`0 0 8px ${ce}`}}),e.jsx("span",{style:{color:ce,fontWeight:700,fontSize:14,letterSpacing:.5},children:te.name}),M&&!Le.closed&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 5px",borderRadius:4},children:"LIVE"})]}),te.start&&te.end&&e.jsxs("div",{style:{fontSize:10,color:"#666",fontFamily:"'JetBrains Mono', monospace",marginTop:4},children:[te.start," - ",te.end," ET"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px 16px",fontSize:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#8B5CF6"},children:"VOL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.volume?te.volume>=1e3?(te.volume/1e3).toFixed(1)+"K":te.volume:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:te.delta>=0?"#00ff88":"#ff4466"},children:"DELTA"}),e.jsx("span",{style:{color:te.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:te.delta?Math.abs(te.delta)>=1e3?(te.delta/1e3).toFixed(1)+"K":te.delta:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#6366F1"},children:"pDR"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.pdr>0?te.pdr.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#06B6D4"},children:"10D"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.avg10d>0?te.avg10d.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#84CC16"},children:"cW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.cW>0?te.cW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#22C55E"},children:"pW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.pW>0?te.pW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#F97316"},children:"cM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.cM>0?te.cM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#FB923C"},children:"pM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.pM>0?te.pM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#10B981"},children:"MAX"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.max>0?te.max.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#EF4444"},children:"MIN"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:te.min>0?te.min.toFixed(1):""})]})]}),e.jsx("div",{style:{marginTop:10,paddingTop:8,borderTop:"1px solid rgba(255,255,255,0.06)",fontSize:9,color:M&&!Le.closed?"#00ff88":pe?"#555":"#666",textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center"},children:M&&!Le.closed?" Active Session":pe?" Upcoming":" Ended"})]})]})},te.id||st)})})]})}),li(null,$n,!0,ct,{dayDate:H,sessionId:se},{dayDate:$,sessionId:ye}),e.jsxs("div",{style:{padding:"8px 12px",borderTop:"1px solid rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:12,background:"rgba(15, 15, 20, 0.5)"},children:[e.jsx("div",{style:{display:"flex",gap:4},children:Xe.map(te=>e.jsx("button",{onClick:()=>Ue(te.id),style:{padding:"6px 10px",background:Y===te.id?"rgba(59, 130, 246, 0.2)":"rgba(255,255,255,0.03)",border:Y===te.id?"1px solid rgba(59, 130, 246, 0.4)":"1px solid rgba(255,255,255,0.08)",borderRadius:4,color:Y===te.id?"#60A5FA":"#666",fontSize:10,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease",letterSpacing:"0.5px"},children:te.label},te.id))}),e.jsx("button",{onClick:F,title:`Clear cached data for ${((yo=Xe.find(te=>te.id===Y))==null?void 0:yo.label)||Y} and refresh from server`,style:{padding:"6px 8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:4,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer",transition:"all 0.15s ease",display:"flex",alignItems:"center",gap:4},children:" Refresh"})]}),e.jsx("div",{children:d&&d.length>0?(()=>{const te=new Date,st=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,"0")}-${String(te.getDate()).padStart(2,"0")}`;return(Y==="current"?d.filter(M=>M.date!==st):d).map((M,pe)=>{let ce=M.label||`Day ${pe+1}`;if(M.date){const N=M.date.split("-"),ae=new Date(M.date+"T12:00:00"),we=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Te=`${N[1]}-${N[2]}`,$e=we[ae.getDay()];ce=`${Te} ${$e}`}const xe={dayDate:H,sessionId:se},qe={dayDate:$,sessionId:ye};return li(M,ce,!1,M.date,xe,qe)})})():e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading historical data..."})}),e.jsxs("div",{style:{padding:"10px 16px",margin:"0 12px",background:"rgba(0,0,0,0.3)",borderRadius:8,display:"flex",gap:16,justifyContent:"center",alignItems:"center",flexWrap:"wrap",fontSize:11,color:"#555"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#10B981",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#10B981"},children:"High of Day"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#EF4444"},children:"Low of Day"})]}),e.jsx("span",{style:{borderLeft:"1px solid #333",height:16,margin:"0 4px"}}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 3px #00ff88)"}}),e.jsx("span",{style:{color:"#00ff88"},children:"High of Week"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 3px #ff4466)"}}),e.jsx("span",{style:{color:"#ff4466"},children:"Low of Week"})]})]}),e.jsxs("div",{style:{margin:"12px",background:"rgba(20, 20, 30, 0.8)",borderRadius:12,border:"1px solid rgba(139, 92, 246, 0.3)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>T(!S),style:{padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:S?"rgba(139, 92, 246, 0.15)":"transparent",borderBottom:S?"1px solid rgba(139, 92, 246, 0.2)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{color:"#A78BFA",fontWeight:600,fontSize:13},children:"Session Trade Calculator"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:" Entry  Target Analysis"})]}),e.jsx("span",{style:{color:"#8B5CF6",fontSize:12,transform:S?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),S&&e.jsxs("div",{style:{padding:16},children:[e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:16},children:[e.jsxs("div",{style:{flex:"1 1 180px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"ENTRY SESSION"}),e.jsx("select",{value:E,onChange:te=>ie(te.target.value),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,cursor:"pointer",outline:"none"},children:Se.map(te=>e.jsx("option",{value:te.id,style:{background:"#1a1a2e"},children:te.name},te.id))})]}),e.jsxs("div",{style:{flex:"1 1 120px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"TARGET POINTS"}),e.jsx("input",{type:"number",value:U,onChange:te=>j(Math.max(0,parseFloat(te.target.value)||0)),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,outline:"none",textAlign:"center"},min:"0",step:"0.5"})]}),e.jsxs("div",{style:{flex:"1 1 160px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"DIRECTION"}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>z("long"),style:{flex:1,padding:"10px 16px",background:h==="long"?"rgba(0, 255, 136, 0.2)":"rgba(0,0,0,0.3)",border:h==="long"?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px 0 0 8px",color:h==="long"?"#00ff88":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" LONG"}),e.jsx("button",{onClick:()=>z("short"),style:{flex:1,padding:"10px 16px",background:h==="short"?"rgba(255, 68, 102, 0.2)":"rgba(0,0,0,0.3)",border:h==="short"?"1px solid #ff4466":"1px solid rgba(255,255,255,0.1)",borderRadius:"0 8px 8px 0",color:h==="short"?"#ff4466":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" SHORT"})]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:8,letterSpacing:"0.5px"},children:["FILTER SESSIONS ",e.jsx("span",{style:{color:"#666"},children:" Click to exclude from analysis"})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[Se.map(te=>{const st=Ie.has(te.id),k=te.id===E;return e.jsxs("button",{onClick:()=>{if(k)return;const M=new Set(Ie);st?M.delete(te.id):M.add(te.id),_(M)},style:{padding:"6px 12px",background:k?"rgba(139, 92, 246, 0.3)":st?"rgba(255,255,255,0.02)":`${te.color}22`,border:k?"1px solid #8B5CF6":st?"1px solid rgba(255,255,255,0.1)":`1px solid ${te.color}66`,borderRadius:6,color:k?"#A78BFA":st?"#444":te.color,fontSize:10,fontWeight:500,cursor:k?"not-allowed":"pointer",transition:"all 0.15s ease",textDecoration:st?"line-through":"none",opacity:st?.5:1},title:k?"Entry session (cannot exclude)":st?"Click to include":"Click to exclude",children:[k&&" ",te.name]},te.id)}),Ie.size>0&&e.jsx("button",{onClick:()=>_(new Set),style:{padding:"6px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:6,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer"},children:"Reset All"})]})]}),d&&d.length>0&&(()=>{var ae,we,Te,$e;const te=Se.findIndex(de=>de.id===E),st=Se.slice(te+1).filter(de=>!Ie.has(de.id)),k=d.map(de=>{var Q;const ue=(Q=de.sessions)==null?void 0:Q[E];if(!ue||!ue.o||ue.o<=0)return null;const Ge=ue.o,ze=h==="long"?Ge+U:Ge-U;let X=0,R=h==="long"?1/0:0,D=-1;const x=st.map((K,je)=>{var me;const We=(me=de.sessions)==null?void 0:me[K.id];if(!We||!We.h||We.h<=0)return{session:K,hit:!1,noData:!0,drawdownAtSession:0};const Ve=h==="long"?We.h>=ze:We.l<=ze;if(D===-1)if(h==="long"){R=Math.min(R,We.l);const be=Ge-R;X=Math.max(X,be)}else{R=Math.max(R,We.h);const be=R-Ge;X=Math.max(X,be)}Ve&&D===-1&&(D=je);const ht=h==="long"?We.h:We.l;return{session:K,hit:Ve,hitPrice:ht,high:We.h,low:We.l,overshoot:Ve?h==="long"?We.h-ze:ze-We.l:0,drawdownAtSession:h==="long"?Math.max(0,Ge-We.l):Math.max(0,We.h-Ge)}}),V=x.find(K=>K.hit);return{date:de.date,label:de.label,entryPrice:Ge,targetPrice:ze,sessionResults:x,firstHit:V,hitAny:x.some(K=>K.hit),maxDrawdown:X>0?X:0}}).filter(Boolean),M=k.length>0?(k.filter(de=>de.hitAny).length/k.length*100).toFixed(0):0,pe={};k.forEach(de=>{de.firstHit&&(pe[de.firstHit.session.id]=(pe[de.firstHit.session.id]||0)+1)});const ce=Object.entries(pe).sort((de,ue)=>ue[1]-de[1])[0],xe=k.map(de=>de.maxDrawdown).filter(de=>de>0),qe=xe.length>0?xe.reduce((de,ue)=>de+ue,0)/xe.length:0,N=xe.length>0?Math.max(...xe):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16,padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"SUCCESS RATE"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:M>=70?"#00ff88":M>=50?"#F59E0B":"#ff4466"},children:[M,"%"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"MOST LIKELY HIT"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#A78BFA"},children:ce&&((ae=Se.find(de=>de.id===ce[0]))==null?void 0:ae.name)||""}),ce&&e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[ce[1]," of ",k.length," days"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"ENTRY SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((we=Se.find(de=>de.id===E))==null?void 0:we.color)||"#fff"},children:((Te=Se.find(de=>de.id===E))==null?void 0:Te.name)||E}),e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[" +",U," pts ",h==="long"?"":""]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"AVG DRAWDOWN"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#F59E0B"},children:qe>0?qe.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"points"})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"WORST DD"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#EF4444"},children:N>0?N.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"max risk"})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Target"}),st.map(de=>e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:de.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",minWidth:60},children:de.name.split(" ")[0]},de.id)),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max DD"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Result"})]})}),e.jsx("tbody",{children:k.map((de,ue)=>e.jsxs("tr",{style:{background:ue%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:de.label||de.date}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:de.entryPrice.toFixed(2)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:h==="long"?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:de.targetPrice.toFixed(2)}),de.sessionResults.map(Ge=>{var ze;return e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",background:Ge.hit&&((ze=de.firstHit)==null?void 0:ze.session.id)===Ge.session.id?"rgba(0, 255, 136, 0.1)":"transparent",verticalAlign:"middle"},children:Ge.noData?e.jsx("span",{style:{color:"#444"},children:""}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[Ge.hit?e.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["",Ge.overshoot>0&&e.jsxs("span",{style:{fontSize:9,marginLeft:2},children:["+",Ge.overshoot.toFixed(1)]})]}):e.jsx("span",{style:{color:"#ff4466",opacity:.5},children:""}),Ge.drawdownAtSession>0&&e.jsxs("span",{style:{fontSize:8,color:"#F59E0B",opacity:.8},children:["DD: ",Ge.drawdownAtSession.toFixed(1)]})]})},Ge.session.id)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontFamily:"monospace"},children:e.jsx("span",{style:{color:de.maxDrawdown>U?"#EF4444":de.maxDrawdown>U*.5?"#F59E0B":"#888",fontWeight:de.maxDrawdown>U?700:400},children:de.maxDrawdown>0?de.maxDrawdown.toFixed(1):"0"})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:de.hitAny?e.jsx("span",{style:{color:"#00ff88",fontWeight:600,fontSize:10},children:de.firstHit.session.name}):e.jsx("span",{style:{color:"#ff4466",fontSize:10},children:"NO HIT"})})]},de.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[" Analysis based on ",k.length," trading days  Entry at ",($e=Se.find(de=>de.id===E))==null?void 0:$e.name," session open price  Target: ",h==="long"?"+":"-",U," points"]})]})})()]})]}),d&&d.length>0&&(()=>{const te=fe.filter(X=>X.horizon);let st=1/0,k=0;d.forEach(X=>{te.forEach(R=>{var x;const D=(x=X.sessions)==null?void 0:x[R.id];(D==null?void 0:D.h)>0&&(k=Math.max(k,D.h)),(D==null?void 0:D.l)>0&&(D==null?void 0:D.l)<1/0&&(st=Math.min(st,D.l))})});const M={min:st===1/0?0:st,max:k},pe={ES:[5500,7e3],GC:[4500,6e3],NQ:[18e3,25e3],CL:[60,120],BTC:[8e4,15e4],BT:[8e4,15e4]},ce=(t==null?void 0:t.substring(0,2))||"",xe=pe[ce],qe=xe&&(M.max<xe[0]||M.min>xe[1]),N=te.map(X=>{const R=d.map(Q=>{var je;const K=(je=Q.sessions)==null?void 0:je[X.id];return!K||!K.o||!K.c||K.o<=0?null:K.c>=K.o?"bullish":"bearish"}).filter(Boolean),D=R.filter(Q=>Q==="bullish").length,x=R.filter(Q=>Q==="bearish").length,V=R.length;return{session:X,trends:d.map(Q=>{var je;const K=(je=Q.sessions)==null?void 0:je[X.id];return!K||!K.o||!K.c||K.o<=0?null:K.c>=K.o?"bullish":"bearish"}),bullishPct:V>0?Math.round(D/V*100):0,bullishCount:D,bearishCount:x,total:V}}),ae=te.map(X=>{const R=d.map(Q=>{var je;const K=(je=Q.sessions)==null?void 0:je[X.id];return!K||!K.h||!K.l||K.h<=0?null:K.h-K.l}).filter(Q=>Q!==null&&Q>0),D=R.length>0?R.reduce((Q,K)=>Q+K,0)/R.length:0,x=R.length>0?Math.min(...R):0,V=R.length>0?Math.max(...R):0;return{session:X,avgRange:D,minRange:x,maxRange:V,rangeCount:R.length}}),we=d.map(X=>{let R=0,D=1/0;return te.forEach(x=>{var Q;const V=(Q=X.sessions)==null?void 0:Q[x.id];V&&V.h>0&&V.l>0&&(R=Math.max(R,V.h),D=Math.min(D,V.l))}),D<1/0?R-D:0}).filter(X=>X>0),Te=we.length>0?we.reduce((X,R)=>X+R,0)/we.length:0,de=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],ue=te.slice(0,-1).map(X=>{const R=de.map(D=>{let x=0,V=0,Q=0,K=0;return d.forEach(je=>{var et;const We=(et=je.sessions)==null?void 0:et[X.id];if(!We||!We.o||We.o<=0)return;const Ve=We.o,ht=Ve+D;let me=!1,be=0;const Ee=te.findIndex(Tt=>Tt.id===X.id);te.slice(Ee+1).forEach(Tt=>{var ft;const Me=(ft=je.sessions)==null?void 0:ft[Tt.id];!Me||!Me.h||Me.h<=0||me||(be=Math.max(be,Ve-Me.l),Me.h>=ht&&(me=!0))}),me&&x++,V+=be,Q=Math.max(Q,be),K++}),{target:D,winRate:K>0?Math.round(x/K*100):0,avgDD:K>0?V/K:0,maxDD:Q,validDays:K,riskReward:K>0&&V>0?(D/(V/K)).toFixed(1):""}});return{session:X,results:R}}),Ge=de[1];ue.reduce((X,R)=>{var V;const D=R.results.find(Q=>Q.target===Ge),x=(V=X==null?void 0:X.results)==null?void 0:V.find(Q=>Q.target===Ge);return!x||D.winRate>x.winRate||D.winRate===x.winRate&&D.avgDD<x.avgDD?R:X},null),d.forEach(X=>{var x,V;const R=(x=X.sessions)==null?void 0:x.japan_ib,D=(V=X.sessions)==null?void 0:V.china;(R==null?void 0:R.h)>0&&(R==null?void 0:R.l)>0&&(D==null?void 0:D.h)>0&&(D==null?void 0:D.l)>0&&(D.h>R.h||D.l<R.l)}),d.forEach(X=>{var x,V;const R=(x=X.sessions)==null?void 0:x.china,D=(V=X.sessions)==null?void 0:V.london;(R==null?void 0:R.h)>0&&(R==null?void 0:R.l)>0&&(D==null?void 0:D.h)>0&&(D==null?void 0:D.l)>0&&(D.h>R.h||D.l<R.l)}),d.forEach(X=>{var x,V;const R=(x=X.sessions)==null?void 0:x.london,D=(V=X.sessions)==null?void 0:V.ny_1h;(R==null?void 0:R.o)>0&&(R==null?void 0:R.c)>0&&(D==null?void 0:D.o)>0&&(D==null?void 0:D.c)>0&&(R.c>R.o,D.c>D.o)}),d.forEach(X=>{var x,V;const R=(x=X.sessions)==null?void 0:x.us_ib,D=(V=X.sessions)==null?void 0:V.ny_pm;(R==null?void 0:R.o)>0&&(R==null?void 0:R.c)>0&&(D==null?void 0:D.o)>0&&(D==null?void 0:D.c)>0&&(R.c>R.o,D.c>D.o)});const ze={};return te.forEach(X=>ze[X.id]={hod:0,lod:0}),d.forEach(X=>{let R=0,D=1/0,x=null,V=null;te.forEach(Q=>{var je;const K=(je=X.sessions)==null?void 0:je[Q.id];K&&K.h>0&&K.l>0&&(K.h>R&&(R=K.h,x=Q.id),K.l<D&&(D=K.l,V=Q.id))}),x&&ze[x].hod++,V&&ze[V].lod++}),qe?e.jsx("div",{style:{marginTop:20},children:e.jsxs("div",{style:{padding:"20px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:12},children:""}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#EF4444",marginBottom:8},children:"DATA MISMATCH - Wrong Contract Data"}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginBottom:12},children:["Received prices: ",e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",M.min.toFixed(0)," - $",M.max.toFixed(0)]}),e.jsx("br",{}),"Expected for ",ce,": ",e.jsxs("span",{style:{color:"#10B981",fontFamily:"monospace"},children:["$",xe==null?void 0:xe[0]," - $",xe==null?void 0:xe[1]]})]}),e.jsxs("div",{style:{fontSize:11,color:"#666",marginBottom:16},children:["The backend is returning cached data for a different contract.",e.jsx("br",{}),"This requires clearing the backend cache or redeploying."]}),e.jsx("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:e.jsx("button",{onClick:F,style:{padding:"8px 16px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:6,color:"#EF4444",fontSize:11,fontWeight:600,cursor:"pointer"},children:" Try Refresh Again"})})]})}):e.jsxs("div",{style:{marginTop:20},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",marginBottom:12,background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:8,fontSize:10},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#10B981"},children:" DATA OK"}),e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsx("span",{style:{color:"#888"},children:"Price Range:"}),e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",M.min.toFixed(2)," - $",M.max.toFixed(2)]}),xe&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsxs("span",{style:{color:"#666"},children:["Expected ",ce,":"]}),e.jsxs("span",{style:{color:"#666",fontFamily:"monospace"},children:["$",xe[0]," - $",xe[1]]})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16,overflow:"hidden"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#A78BFA",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION TREND DIRECTION"]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),d.map((X,R)=>{var D;return e.jsx("th",{style:{padding:"6px 4px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:((D=X.label)==null?void 0:D.split(" ")[0])||`Day ${R+1}`},R)}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#00ff88",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Bullish"})]})}),e.jsx("tbody",{children:N.map((X,R)=>e.jsxs("tr",{style:{background:R%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:X.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:X.session.name}),X.trends.map((D,x)=>e.jsx("td",{style:{padding:"4px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:D==="bullish"?e.jsx("span",{style:{color:"#00ff88",fontSize:14},children:""}):D==="bearish"?e.jsx("span",{style:{color:"#ff4466",fontSize:14},children:""}):e.jsx("span",{style:{color:"#333"},children:""})},x)),e.jsxs("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontWeight:700,color:X.bullishPct>=70?"#00ff88":X.bullishPct>=50?"#F59E0B":"#ff4466"},children:[X.bullishPct,"%"]})]},X.session.id))})]})}),(()=>{const X=N.reduce((D,x)=>D.bullishPct>x.bullishPct?D:x),R=N.reduce((D,x)=>D.bullishPct<x.bullishPct?D:x);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:X.session.name})," most bullish (",X.bullishPct,"%) ",e.jsx("span",{style:{color:"#ff4466",fontWeight:600,marginLeft:4},children:R.session.name})," most bearish (",100-R.bullishPct,"%)"]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#EC4899",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"RANGE ANALYSIS",e.jsxs("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:["Avg Daily: ",e.jsxs("span",{style:{color:"#EC4899"},children:[Te.toFixed(1)," pts"]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Avg"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Min"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"% Daily"})]})}),e.jsx("tbody",{children:ae.filter(X=>X.avgRange>0).sort((X,R)=>R.avgRange-X.avgRange).map((X,R)=>e.jsxs("tr",{style:{background:R%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:X.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:X.session.name}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:X.avgRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#666",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:X.minRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:X.maxRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{background:`rgba(236, 72, 153, ${Math.min(.8,X.avgRange/Te*.6)})`,padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,color:"#fff"},children:[Te>0?Math.round(X.avgRange/Te*100):0,"%"]})})]},X.session.id))})]})}),(()=>{const X=ae.reduce((R,D)=>R.avgRange>D.avgRange?R:D);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(236, 72, 153, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:X.session.color,fontWeight:600},children:X.session.name})," has largest avg range (",X.avgRange.toFixed(1)," pts) ",e.jsxs("span",{style:{color:"#EC4899"},children:[" ",Math.round(X.avgRange/Te*100),"%"]})," of daily range"]})})()]})]})]})})(),d&&d.length>0&&(()=>{const te=["japan_ib","china","asia_close","deadzone","london","low_volume"];fe.filter(M=>M.horizon);const st=d.map(M=>{if(!M.sessions)return null;let pe=0,ce=1/0,xe=0,qe=0;te.forEach(me=>{const be=M.sessions[me];if(be&&be.h>0&&be.l>0){pe=Math.max(pe,be.h),ce=Math.min(ce,be.l);const Ee=(be.h+be.l+be.c)/3,et=be.v||1;qe+=Ee*et,xe+=et}});const N=M.sessions.us_ib,ae=(N==null?void 0:N.o)||0;if(pe===0||ce===1/0||ae===0)return null;const we=pe-ce,Te=we>0?((pe-ae)/we*100).toFixed(1):0,$e=xe>0?qe/xe:(pe+ce)/2,de=(ae-$e).toFixed(1),ue=ae>=$e;let Ge="NEUTRAL";const ze=parseFloat(Te);ze<=20?Ge="VERY BULLISH":ze<=40?Ge="BULLISH":ze>=80?Ge="VERY BEARISH":ze>=60&&(Ge="BEARISH");const X=(N==null?void 0:N.h)||0,R=(N==null?void 0:N.l)||0,D=X-R,x=M.sessions.ny_1h,V=(x==null?void 0:x.o)||0,Q=D>0&&V>0?((X-V)/D*100).toFixed(1):"";let K="NEUTRAL";const je=parseFloat(Q);isNaN(je)||(je<=20?K="VERY BULLISH":je<=40?K="BULLISH":je>=80?K="VERY BEARISH":je>=60&&(K="BEARISH"));const We=me=>me==="VERY BULLISH"?2:me==="BULLISH"?1:me==="BEARISH"?-1:me==="VERY BEARISH"?-2:0,Ve=(We(Ge)+We(K))/2;let ht="NEUTRAL";return Ve>=1.5?ht="VERY BULLISH":Ve>=.5?ht="BULLISH":Ve<=-1.5?ht="VERY BEARISH":Ve<=-.5&&(ht="BEARISH"),{date:M.date,label:M.label,overnightHigh:pe,overnightLow:ce,overnightRange:we,usIbOpen:ae,pctFromHigh:Te,estimatedVwap:$e,vwapDistance:Math.abs(parseFloat(de)),aboveVwap:ue,biasA:Ge,ibHigh:X,ibLow:R,ibRange:D,nyOpen:V,pctFromIbHigh:Q,biasB:K,combinedBias:ht}}).filter(Boolean);if(st.length===0)return null;const k=st[0];return e.jsxs("div",{style:{margin:"12px",background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(59, 130, 246, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:600,color:"#10B981"},children:"DAY BIAS"}),e.jsx("span",{style:{fontSize:10,color:"#666"},children:" Overnight & IB Range Analysis"})]}),k&&e.jsx("div",{style:{padding:"4px 12px",borderRadius:6,background:k.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":k.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",border:`1px solid ${k.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.3)":k.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.3)":"rgba(255,255,255,0.1)"}`,color:k.combinedBias.includes("BULLISH")?"#00ff88":k.combinedBias.includes("BEARISH")?"#ff4466":"#888",fontSize:11,fontWeight:700},children:k.combinedBias})]}),e.jsxs("div",{style:{padding:16},children:[k&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#3B82F6"},children:"A. OVERNIGHT  8:20 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:k.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":k.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:k.biasA.includes("BULLISH")?"#00ff88":k.biasA.includes("BEARISH")?"#ff4466":"#888"},children:k.biasA})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"O/N RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#3B82F6"},children:k.overnightRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",k.overnightHigh.toFixed(0)," L: ",k.overnightLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"8:20 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(k.pctFromHigh)<=50?"#00ff88":"#ff4466"},children:[k.pctFromHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from O/N high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"PRICE vs VWAP"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:k.aboveVwap?"#00ff88":"#ff4466",padding:"4px 8px",borderRadius:4,background:k.aboveVwap?"rgba(0, 255, 136, 0.15)":"rgba(255, 68, 102, 0.15)"},children:k.aboveVwap?"ABOVE":"BELOW"}),e.jsxs("div",{style:{fontSize:8,color:"#555",marginTop:2},children:[k.vwapDistance.toFixed(1)," pts"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#F59E0B"},children:"B. US IB  9:30 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:k.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":k.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:k.biasB.includes("BULLISH")?"#00ff88":k.biasB.includes("BEARISH")?"#ff4466":"#888"},children:k.biasB})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#F59E0B"},children:k.ibRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",k.ibHigh.toFixed(0)," L: ",k.ibLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"9:30 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(k.pctFromIbHigh)<=50?"#00ff88":"#ff4466"},children:[k.pctFromIbHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from IB high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"NY OPEN"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#fff"},children:k.nyOpen>0?k.nyOpen.toFixed(2):""}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"9:30 ET"})]})]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"rgba(0,0,0,0.4)"},children:[e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#3B82F6",fontWeight:600,borderBottom:"1px solid rgba(59,130,246,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(59,130,246,0.08)"},children:"A: Overnight  8:20"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(245,158,11,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(245,158,11,0.08)"},children:"B: US IB  9:30"}),e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"center",color:"#10B981",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Combined"})]}),e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"VWAP"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"9:30"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"})]})]}),e.jsx("tbody",{children:st.map((M,pe)=>e.jsxs("tr",{style:{background:pe%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 10px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)",fontSize:10},children:M.label||M.date}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(M.pctFromHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(M.pctFromHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(M.pctFromHigh)<=30?"#00ff88":parseFloat(M.pctFromHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[M.pctFromHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{color:M.aboveVwap?"#00ff88":"#ff4466",fontSize:9,fontWeight:500},children:M.aboveVwap?"ABOVE":"BELOW"})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:M.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":M.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:M.biasA.includes("BULLISH")?"#00ff88":M.biasA.includes("BEARISH")?"#ff4466":"#666"},children:M.biasA.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(M.pctFromIbHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(M.pctFromIbHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(M.pctFromIbHigh)<=30?"#00ff88":parseFloat(M.pctFromIbHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[M.pctFromIbHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:9},children:M.nyOpen>0?M.nyOpen.toFixed(0):""}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:M.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":M.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:M.biasB.includes("BULLISH")?"#00ff88":M.biasB.includes("BEARISH")?"#ff4466":"#666"},children:M.biasB.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:M.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":M.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:M.combinedBias.includes("BULLISH")?"#00ff88":M.combinedBias.includes("BEARISH")?"#ff4466":"#888"},children:M.combinedBias.replace("VERY ","V.")})})]},M.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(16, 185, 129, 0.1)",borderRadius:6,fontSize:9,color:"#888"},children:[e.jsx("strong",{style:{color:"#10B981"},children:"Bias Logic:"})," 0-20% from high = Very Bullish  20-40% = Bullish  40-60% = Neutral  60-80% = Bearish  80-100% = Very Bearish"]})]})]})})(),it&&e.jsxs("div",{style:{marginTop:24,background:"rgba(0,0,0,0.4)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#A78BFA"},children:"STRATEGY ANALYTICS"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Optimal entry points & session patterns"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("span",{style:{fontSize:10,color:"#666"},children:"Using data from selected week above"})})]}),(()=>{var X;const te=d;if(!te||te.length===0)return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No historical data available. Select a week above first."]});const st=fe.filter(R=>R.horizon),M=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],pe=st.slice(0,-1).map(R=>{const D=M.map(x=>{let V=0,Q=0,K=0,je=0;return te.forEach(We=>{var Tt;const Ve=(Tt=We.sessions)==null?void 0:Tt[R.id];if(!Ve||!Ve.o||Ve.o<=0)return;const ht=Ve.o,me=ht+x;let be=!1,Ee=0;const et=st.findIndex(Me=>Me.id===R.id);st.slice(et+1).forEach(Me=>{var Qt;const ft=(Qt=We.sessions)==null?void 0:Qt[Me.id];!ft||!ft.h||ft.h<=0||be||(Ee=Math.max(Ee,ht-ft.l),ft.h>=me&&(be=!0))}),be&&V++,Q+=Ee,K=Math.max(K,Ee),je++}),{target:x,winRate:je>0?Math.round(V/je*100):0,avgDD:je>0?Q/je:0,maxDD:K,validDays:je,riskReward:je>0&&Q>0?(x/(Q/je)).toFixed(1):""}});return{session:R,results:D}}),ce=M[1],xe=pe.reduce((R,D)=>{var Q;const x=D.results.find(K=>K.target===ce),V=(Q=R==null?void 0:R.results)==null?void 0:Q.find(K=>K.target===ce);return!V||x.winRate>V.winRate||x.winRate===V.winRate&&x.avgDD<V.avgDD?D:R},null),qe=[];let N=0,ae=0;te.forEach(R=>{var V,Q;const D=(V=R.sessions)==null?void 0:V.japan_ib,x=(Q=R.sessions)==null?void 0:Q.china;(D==null?void 0:D.h)>0&&(D==null?void 0:D.l)>0&&(x==null?void 0:x.h)>0&&(x==null?void 0:x.l)>0&&(ae++,(x.h>D.h||x.l<D.l)&&N++)}),ae>0&&qe.push({name:"China breaks Japan range",occurrences:N,total:ae,pct:Math.round(N/ae*100),color:"#F472B6"});let we=0,Te=0;te.forEach(R=>{var V,Q;const D=(V=R.sessions)==null?void 0:V.china,x=(Q=R.sessions)==null?void 0:Q.london;(D==null?void 0:D.h)>0&&(D==null?void 0:D.l)>0&&(x==null?void 0:x.h)>0&&(x==null?void 0:x.l)>0&&(Te++,(x.h>D.h||x.l<D.l)&&we++)}),Te>0&&qe.push({name:"London breaks China range",occurrences:we,total:Te,pct:Math.round(we/Te*100),color:"#3B82F6"});let $e=0,de=0;te.forEach(R=>{var V,Q;const D=(V=R.sessions)==null?void 0:V.london,x=(Q=R.sessions)==null?void 0:Q.ny_1h;(D==null?void 0:D.o)>0&&(D==null?void 0:D.c)>0&&(x==null?void 0:x.o)>0&&(x==null?void 0:x.c)>0&&(de++,D.c>D.o==x.c>x.o&&$e++)}),de>0&&qe.push({name:"NY 1H continues London trend",occurrences:$e,total:de,pct:Math.round($e/de*100),color:"#10B981"});let ue=0,Ge=0;te.forEach(R=>{var V,Q;const D=(V=R.sessions)==null?void 0:V.us_ib,x=(Q=R.sessions)==null?void 0:Q.ny_pm;(D==null?void 0:D.o)>0&&(D==null?void 0:D.c)>0&&(x==null?void 0:x.o)>0&&(x==null?void 0:x.c)>0&&(Ge++,D.c>D.o==x.c>x.o&&ue++)}),Ge>0&&qe.push({name:"US IB direction = NY PM direction",occurrences:ue,total:Ge,pct:Math.round(ue/Ge*100),color:"#F59E0B"});const ze={};return st.forEach(R=>ze[R.id]={hod:0,lod:0}),te.forEach(R=>{let D=0,x=1/0,V=null,Q=null;st.forEach(K=>{var We;const je=(We=R.sessions)==null?void 0:We[K.id];je&&je.h>0&&je.l>0&&(je.h>D&&(D=je.h,V=K.id),je.l<x&&(x=je.l,Q=K.id))}),V&&ze[V].hod++,Q&&ze[Q].lod++}),e.jsxs("div",{style:{padding:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16,padding:"10px 16px",background:"rgba(139, 92, 246, 0.1)",borderRadius:8,fontSize:11},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" ",te.length," trading days"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#888"},children:[Be==="all"?"All available data":`${((X=oe.find(R=>R.id===Be))==null?void 0:X.label)||Be}`,ne!=="all"&&`  Week ${ne}`]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#10B981",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"OPTIMAL ENTRY FINDER",e.jsx("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:"Long entries  Target capture"})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),M.map(R=>e.jsxs("th",{style:{padding:"6px 6px",textAlign:"center",color:R===ce?"#10B981":"#666",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:10},children:["+",R,"pt"]},R))]})}),e.jsx("tbody",{children:pe.map((R,D)=>e.jsxs("tr",{style:{background:(xe==null?void 0:xe.session.id)===R.session.id?"rgba(16, 185, 129, 0.1)":D%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsxs("td",{style:{padding:"6px 8px",color:R.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:[R.session.name,(xe==null?void 0:xe.session.id)===R.session.id&&e.jsx("span",{style:{marginLeft:6,color:"#00ff88",fontSize:10},children:""})]}),R.results.map(x=>e.jsxs("td",{style:{padding:"4px 6px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:x.winRate>=70?"#00ff88":x.winRate>=50?"#F59E0B":"#ff4466"},children:[x.winRate,"%"]}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:["DD: ",x.avgDD.toFixed(1)]})]},x.target))]},R.session.id))})]})}),xe&&(()=>{const R=M[1],D=xe.results.find(x=>x.target===R);return e.jsxs("div",{style:{marginTop:12,padding:"10px 12px",background:"rgba(16, 185, 129, 0.15)",borderRadius:6,borderLeft:"3px solid #10B981"},children:[e.jsx("div",{style:{fontSize:10,color:"#10B981",fontWeight:700,marginBottom:4},children:" RECOMMENDED ENTRY"}),e.jsxs("div",{style:{fontSize:11,color:"#fff"},children:[e.jsx("span",{style:{color:xe.session.color,fontWeight:600},children:xe.session.name})," offers best risk-adjusted entry for ",R,"pt long targets"]}),e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4},children:[D.winRate,"% win rate  ",D.avgDD.toFixed(1)," pts avg drawdown  ",D.riskReward,":1 R:R"]})]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(245, 158, 11, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#F59E0B",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION PATTERNS & BEHAVIOR"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:qe.map((R,D)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:8,borderLeft:`3px solid ${R.color}`},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:11,color:"#fff",fontWeight:500},children:R.name}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:2},children:[R.occurrences,"/",R.total," days"]})]}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:R.pct>=70?"#00ff88":R.pct>=50?"#F59E0B":"#888"},children:[R.pct,"%"]})]},D))}),e.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:8,fontWeight:600},children:"WHO SETS HIGH/LOW OF DAY"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#10B981",marginBottom:6,fontWeight:600},children:"HIGH OF DAY"}),Object.entries(ze).filter(([R,D])=>D.hod>0).sort((R,D)=>D[1].hod-R[1].hod).slice(0,3).map(([R,D])=>{const x=st.find(V=>V.id===R);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(x==null?void 0:x.color)||"#888"},children:(x==null?void 0:x.name)||R}),e.jsxs("span",{style:{color:"#10B981",fontWeight:600},children:[Math.round(D.hod/te.length*100),"%"]})]},R)})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#EF4444",marginBottom:6,fontWeight:600},children:"LOW OF DAY"}),Object.entries(ze).filter(([R,D])=>D.lod>0).sort((R,D)=>D[1].lod-R[1].lod).slice(0,3).map(([R,D])=>{const x=st.find(V=>V.id===R);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(x==null?void 0:x.color)||"#888"},children:(x==null?void 0:x.name)||R}),e.jsxs("span",{style:{color:"#EF4444",fontWeight:600},children:[Math.round(D.lod/te.length*100),"%"]})]},R)})]})]})]})]})]})]})})()]}),y&&e.jsxs("div",{style:{position:"fixed",left:L.x,top:L.y-10,transform:"translate(-50%, -100%)",background:"rgba(0,0,0,0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,padding:"10px 14px",zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.8)",minWidth:140,pointerEvents:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:11,fontWeight:700,color:y.close>=y.open?"#00ff88":"#ff4466",marginBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:6},children:[e.jsx("span",{children:y.label||y.name}),y.isHOD&&e.jsx("span",{style:{background:"#10B981",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"HIGH OF DAY"}),y.isLOD&&e.jsx("span",{style:{background:"#EF4444",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"LOW OF DAY"}),y.isHOW&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #00ff88"},children:"HIGH OF WEEK"}),y.isLOW&&e.jsx("span",{style:{background:"#ff4466",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #ff4466"},children:"LOW OF WEEK"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"4px 12px",fontSize:10},children:[e.jsx("span",{style:{color:"#3B82F6"},children:"O"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((mo=y.open)==null?void 0:mo.toFixed(2))||""}),e.jsx("span",{style:{color:(y.isHOD,"#10B981")},children:"H"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:y.isHOD?"rgba(16, 185, 129, 0.2)":"transparent",padding:y.isHOD?"1px 4px":0,borderRadius:3},children:((bo=y.high)==null?void 0:bo.toFixed(2))||""}),e.jsx("span",{style:{color:(y.isLOD,"#EF4444")},children:"L"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:y.isLOD?"rgba(239, 68, 68, 0.2)":"transparent",padding:y.isLOD?"1px 4px":0,borderRadius:3},children:((vo=y.low)==null?void 0:vo.toFixed(2))||""}),e.jsx("span",{style:{color:"#F59E0B"},children:"C"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((jo=y.close)==null?void 0:jo.toFixed(2))||""})]}),y.high>0&&y.low>0&&e.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#888"},children:["Range: ",e.jsx("span",{style:{color:"#EC4899"},children:(y.high-y.low).toFixed(2)})]})]})]})})()]}):e.jsx("div",{style:{padding:40,textAlign:"center",color:"#888"},children:"No data available"})},Lu=({activeTab:t,setActiveTab:n,onLogout:i})=>{var y;const{isMobile:o,isTablet:r}=uo(),[s,l]=I.useState(!1),[d,c]=I.useState(!1),g=[{id:"backtest",icon:"",label:"Backtest",fullLabel:"Backtest Analytics"},{id:"live",icon:"",label:"Live",fullLabel:"Live Metrics",iconColor:"#ef4444"},{id:"tpo",icon:"",label:"TPO",fullLabel:"Market Profile",iconColor:"#ffaa00"},{id:"zones",icon:"",label:"Zones",fullLabel:"Zone Participation",iconColor:"#00ff88"},{id:"clawd",icon:"",label:"Clawd",fullLabel:"Clawd Bot Analytics",iconColor:"#00aaff"},{id:"treemap",icon:"",label:"Matrix",fullLabel:"Correlation Matrix"},{id:"vsi",icon:"",label:"Sessions",fullLabel:"Session Analysis"},{id:"trades",icon:"",label:"Trades",fullLabel:"Trade Log"},{id:"priceladder",icon:"",label:"Ladder",fullLabel:"Price Ladder"},{id:"redfolder",icon:"",label:"Red",fullLabel:"Red Folder",iconColor:"#ff4466",accent:"#ff4466"}],w=u=>{n(u),l(!1)};return o?e.jsxs(e.Fragment,{children:[e.jsxs("nav",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"rgba(0,0,0,0.4)",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",letterSpacing:"2px"},children:"HORIZON"})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(0,255,136,0.1)",borderRadius:6,border:"1px solid rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{color:"#00ff88",fontSize:11,fontWeight:600},children:((y=g.find(u=>u.id===t))==null?void 0:y.label)||"Menu"})}),e.jsxs("button",{onClick:()=>l(!s),style:{width:40,height:40,background:s?"rgba(0,255,136,0.15)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:5,transition:"all 0.2s"},children:[e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(45deg) translateY(7px)":"none"}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",opacity:s?0:1}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(-45deg) translateY(-7px)":"none"}})]})]}),s&&e.jsxs("div",{style:{position:"fixed",top:57,left:0,right:0,bottom:0,background:"rgba(10,10,15,0.98)",zIndex:999,padding:16,overflowY:"auto",animation:"slideIn 0.2s ease"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:g.map(u=>{const L=t===u.id,W=u.accent||"#00ff88";return e.jsxs("button",{onClick:()=>w(u.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,padding:"20px 12px",background:L?`linear-gradient(180deg, ${W}20 0%, ${W}08 100%)`:"rgba(255,255,255,0.03)",border:L?`2px solid ${W}`:"1px solid rgba(255,255,255,0.08)",borderRadius:12,color:L?W:"#aaa",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("span",{style:{fontSize:24,color:L?W:u.iconColor||"#666",filter:L?`drop-shadow(0 0 8px ${W})`:"none"},children:u.icon}),e.jsx("span",{style:{fontSize:12,fontWeight:L?700:500},children:u.fullLabel})]},u.id)})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:20},children:[e.jsxs("button",{onClick:()=>{n("settings"),l(!1)},style:{flex:1,padding:"16px",background:"rgba(0,255,136,0.1)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:12,color:"#00ff88",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Settings"]}),e.jsxs("button",{onClick:i,style:{flex:1,padding:"16px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.4)",borderRadius:12,color:"#ff4466",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Logout"]})]})]})]}):r?e.jsxs("nav",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)",gap:16},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexShrink:0},children:e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})})}),e.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",flex:1,WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:g.map(u=>{const L=t===u.id,W=u.accent||"#00ff88";return e.jsxs("button",{onClick:()=>n(u.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",background:L?`${W}15`:"transparent",border:L?`1px solid ${W}`:"1px solid transparent",borderRadius:6,color:L?W:"#888",fontSize:11,fontWeight:L?600:500,cursor:"pointer",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx("span",{style:{color:L?W:u.iconColor||"#666"},children:u.icon}),e.jsx("span",{children:u.label})]},u.id)})}),e.jsxs("div",{style:{position:"relative",flexShrink:0},children:[e.jsx("button",{onClick:()=>c(!d),style:{width:36,height:36,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:14,color:"#fff",boxShadow:d?"0 0 15px rgba(0,255,136,0.5)":"none"},children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>c(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:10,padding:6,minWidth:150,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",zIndex:999},children:[e.jsxs("button",{onClick:()=>{n("settings"),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ccc",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Settings"]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 6px"}}),e.jsxs("button",{onClick:()=>{i(),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ff4466",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Logout"]})]})]})]})]}):e.jsxs("nav",{style:q.nav,children:[e.jsxs("div",{style:q.navBrand,children:[e.jsx("div",{style:{width:36,height:36,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{fontSize:18,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[e.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#fff",letterSpacing:"1.5px"},children:"PROJECT"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",letterSpacing:"3px"},children:"HORIZON"})]})]}),e.jsx("div",{style:{...q.navTabs,marginLeft:24},children:g.map(u=>{const L=t===u.id,W=u.accent||"#00ff88";return e.jsxs("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 18px",background:L?`linear-gradient(180deg, ${W}20 0%, ${W}05 100%)`:"transparent",border:L?`1px solid ${W}`:"1px solid transparent",borderRadius:8,color:L?W:"#8b8b8b",fontSize:13,fontWeight:L?600:500,cursor:"pointer",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},onClick:()=>n(u.id),onMouseEnter:Y=>{L||(Y.target.style.background="rgba(255,255,255,0.05)",Y.target.style.color="#ccc")},onMouseLeave:Y=>{L||(Y.target.style.background="transparent",Y.target.style.color="#8b8b8b")},children:[e.jsx("span",{style:{fontSize:u.icon.length===1?14:15,color:L?W:u.iconColor||"#8b8b8b",filter:L&&u.iconColor?`drop-shadow(0 0 4px ${u.iconColor})`:"none"},children:u.icon}),e.jsx("span",{children:u.fullLabel}),L&&e.jsx("div",{style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"60%",height:2,background:W,borderRadius:"2px 2px 0 0",boxShadow:`0 0 10px ${W}`}})]},u.id)})}),e.jsxs("div",{style:{position:"relative",marginLeft:16},children:[e.jsx("button",{onClick:()=>c(!d),style:{width:40,height:40,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:18,color:"#fff",boxShadow:d?"0 0 15px rgba(0,255,136,0.5)":"none"},onMouseEnter:u=>{u.currentTarget.style.borderColor="#00ff88",u.currentTarget.style.boxShadow="0 0 15px rgba(0,255,136,0.5)"},onMouseLeave:u=>{d||(u.currentTarget.style.borderColor="rgba(255,255,255,0.5)",u.currentTarget.style.boxShadow="none")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>c(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:8,minWidth:180,boxShadow:"0 10px 40px rgba(0,0,0,0.5)",zIndex:999,backdropFilter:"blur(20px)"},children:[e.jsxs("button",{onClick:()=>{n("settings"),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ccc",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,255,255,0.08)",u.currentTarget.style.color="#fff"},onMouseLeave:u=>{u.currentTarget.style.background="transparent",u.currentTarget.style.color="#ccc"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 8px"}}),e.jsxs("button",{onClick:()=>{i(),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ff4466",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,68,102,0.15)"},onMouseLeave:u=>{u.currentTarget.style.background="transparent"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Logout"})]})]})]})]})]})},Au=()=>{var Y,Ue,p,b,C,f,P,S,T,E,ie,U,j,h,z,Ie,_,Be,Oe,ne,Ce,v,_e,le,Ne,it,Rt,Ke,Xe,Pe,oe,fe,Se,O,ee,ke,lt,He,Le,Je,At,J,ot,rt,Qe;const[t,n]=I.useState(""),[i,o]=I.useState(!1),[r,s]=I.useState(!1),[l,d]=I.useState({stream_active:!1,stream_title:"",transcript_buffer:[],current_segment:"",sentiment:{current:"neutral",score:0,confidence:0,history:[]},voice_tone:{confidence_level:0,hesitation_count:0,stress_indicators:0,speaking_rate:0},keywords:{},market_direction:{signal:"neutral",strength:0,components:{sentiment_weight:0,tone_weight:0,keyword_weight:0}},error:null}),c=I.useRef(null);I.useEffect(()=>{const re=async()=>{try{const F=await(await fetch(ha)).json();d(F),o(F.stream_active),s(!0)}catch{s(!1)}};re();const a=setInterval(re,300);return()=>clearInterval(a)},[]),I.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[l.transcript_buffer]);const g=async()=>{if(t)try{await fetch(`${ha}/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})})}catch(re){console.error("Failed to start stream:",re)}},w=async()=>{try{await fetch(`${ha}/stop`,{method:"POST"})}catch(re){console.error("Failed to stop stream:",re)}},y=re=>{if(!re)return re;const a=Object.keys(l.keywords||{});let m=re;return a.forEach(F=>{const B=new RegExp(`\\b(${F})\\b`,"gi");m=m.replace(B,'<span style="background: rgba(0,255,136,0.2); color: #00ff88; padding: 2px 4px; border-radius: 4px; font-weight: 600;">$1</span>')}),m},u=re=>re>.05?"#00ff88":re<-.05?"#ff4466":"#ffaa00",W=(re=>{switch(re){case"bullish":return{color:"#00ff88",icon:"",glow:"rgba(0,255,136,0.3)"};case"bearish":return{color:"#ff4466",icon:"",glow:"rgba(255,68,102,0.3)"};default:return{color:"#ffaa00",icon:"",glow:"rgba(255,170,0,0.3)"}}})((Y=l.market_direction)==null?void 0:Y.signal);return e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},children:[e.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:""}),e.jsx("span",{children:"Red Folder"}),e.jsx("span",{style:{fontSize:14,color:"#888",fontWeight:400},children:"Live Event Transcription & Analysis"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 16px",borderRadius:8,background:r?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${r?"#00ff88":"#ff4466"}`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r?"#00ff88":"#ff4466",boxShadow:r?"0 0 10px #00ff88":"none",animation:r&&i?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{color:r?"#00ff88":"#ff4466",fontSize:12,fontWeight:600},children:i?"LIVE TRANSCRIBING":r?"SERVICE ONLINE":"SERVICE OFFLINE"})]})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",placeholder:"Enter YouTube Live URL (e.g., https://youtube.com/watch?v=...)",value:t,onChange:re=>n(re.target.value),style:{flex:1,minWidth:300,padding:"12px 16px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"#fff",fontSize:14,fontFamily:"'JetBrains Mono', monospace"}}),e.jsx("button",{onClick:g,disabled:i||!t,style:{padding:"12px 24px",borderRadius:8,background:i?"rgba(255,255,255,0.05)":"linear-gradient(135deg, #00ff88, #00cc6a)",border:"none",color:i?"#666":"#000",fontWeight:700,cursor:i?"not-allowed":"pointer",transition:"all 0.2s"},children:" START"}),e.jsx("button",{onClick:w,disabled:!i,style:{padding:"12px 24px",borderRadius:8,background:i?"linear-gradient(135deg, #ff4466, #cc3355)":"rgba(255,255,255,0.05)",border:"none",color:i?"#fff":"#666",fontWeight:700,cursor:i?"pointer":"not-allowed",transition:"all 0.2s"},children:" STOP"})]}),l.stream_title&&e.jsxs("div",{style:{marginTop:12,color:"#888",fontSize:13},children:[e.jsx("span",{style:{color:"#00aaff"},children:"Now transcribing:"})," ",l.stream_title]}),l.error&&e.jsxs("div",{style:{marginTop:12,color:"#ff4466",fontSize:13},children:["Error: ",l.error]}),l.scheduler&&e.jsxs("div",{style:{marginTop:16,padding:"12px 16px",borderRadius:8,background:l.scheduler.event_active?"rgba(255,170,0,0.1)":"rgba(0,170,255,0.05)",border:`1px solid ${l.scheduler.event_active?"#ffaa00":"rgba(0,170,255,0.2)"}`,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:l.scheduler.event_active?"":""}),e.jsx("span",{style:{color:"#888",fontSize:12,fontWeight:600},children:"AUTO-SCHEDULER"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:l.scheduler.enabled?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:l.scheduler.enabled?"#00ff88":"#ff4466"},children:l.scheduler.enabled?"ENABLED":"DISABLED"})]}),l.scheduler.next_event&&e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#666",fontSize:11},children:"Next:"}),e.jsx("span",{style:{color:l.scheduler.event_active?"#ffaa00":"#00aaff",fontSize:12,fontWeight:600},children:l.scheduler.next_event}),e.jsx("span",{style:{color:"#888",fontSize:11},children:l.scheduler.next_time}),l.scheduler.event_active&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",animation:"pulse 2s infinite"},children:"EVENT ACTIVE"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:24},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:24,height:600,display:"flex",flexDirection:"column"},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Live Transcript",i&&e.jsx("span",{style:{fontSize:11,color:"#00ff88",marginLeft:"auto"},children:" RECORDING"})]}),e.jsx("div",{ref:c,style:{flex:1,overflowY:"auto",fontFamily:"'JetBrains Mono', monospace",fontSize:14,lineHeight:1.8},children:((Ue=l.transcript_buffer)==null?void 0:Ue.length)===0&&!l.current_segment?e.jsx("div",{style:{color:"#666",textAlign:"center",padding:40},children:i?"Waiting for speech...":"Start a stream to begin transcription"}):e.jsxs(e.Fragment,{children:[(p=l.transcript_buffer)==null?void 0:p.map((re,a)=>e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.03)",opacity:re.is_final?1:.6},children:[e.jsx("span",{style:{color:"#666",marginRight:12,fontSize:12},children:re.timestamp}),e.jsx("span",{style:{color:"#e0e0e0"},dangerouslySetInnerHTML:{__html:y(re.text)}})]},a)),l.current_segment&&e.jsxs("div",{style:{padding:"8px 0",opacity:.6,color:"#888"},children:[e.jsx("span",{style:{marginRight:12,fontSize:12},children:"..."}),l.current_segment]})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${((b=l.sentiment)==null?void 0:b.score)>.1?"rgba(0,255,136,0.3)":((C=l.sentiment)==null?void 0:C.score)<-.1?"rgba(255,68,102,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:16,padding:20,textAlign:"center",transition:"border-color 0.5s ease, box-shadow 0.5s ease",boxShadow:((f=l.sentiment)==null?void 0:f.score)>.1?"0 0 20px rgba(0,255,136,0.1)":((P=l.sentiment)==null?void 0:P.score)<-.1?"0 0 20px rgba(255,68,102,0.1)":"none"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"SENTIMENT GAUGE"}),e.jsxs("svg",{width:"200",height:"110",viewBox:"0 0 200 110",style:{margin:"0 auto",display:"block"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"12"}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 60 35",fill:"none",stroke:"#ff4466",strokeWidth:"12",opacity:((S=l.sentiment)==null?void 0:S.score)<-.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 60 35 A 80 80 0 0 1 140 35",fill:"none",stroke:"#ffaa00",strokeWidth:"12",opacity:Math.abs(((T=l.sentiment)==null?void 0:T.score)||0)<=.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 140 35 A 80 80 0 0 1 180 100",fill:"none",stroke:"#00ff88",strokeWidth:"12",opacity:((E=l.sentiment)==null?void 0:E.score)>.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("g",{style:{transform:`rotate(${((((ie=l.sentiment)==null?void 0:ie.score)||0)+1)*90-180}deg)`,transformOrigin:"100px 100px",transition:"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e.jsx("line",{x1:"100",y1:"100",x2:"165",y2:"100",stroke:u(((U=l.sentiment)==null?void 0:U.score)||0),strokeWidth:"3",strokeLinecap:"round",filter:"url(#glow)"})}),e.jsx("circle",{cx:"100",cy:"100",r:"10",fill:u(((j=l.sentiment)==null?void 0:j.score)||0),style:{transition:"fill 0.5s"}}),e.jsx("circle",{cx:"100",cy:"100",r:"5",fill:"#1a1a1a"}),e.jsx("text",{x:"20",y:"108",fill:"#ff4466",fontSize:"10",fontWeight:"600",children:"BEAR"}),e.jsx("text",{x:"160",y:"108",fill:"#00ff88",fontSize:"10",fontWeight:"600",children:"BULL"})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("span",{style:{fontSize:28,fontWeight:800,color:u(((h=l.sentiment)==null?void 0:h.score)||0),textShadow:((z=l.sentiment)==null?void 0:z.current)!=="neutral"?`0 0 20px ${u(((Ie=l.sentiment)==null?void 0:Ie.score)||0)}40`:"none",transition:"color 0.5s, text-shadow 0.5s"},children:(((_=l.sentiment)==null?void 0:_.current)||"neutral").toUpperCase()}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginTop:6},children:["Score: ",e.jsxs("span",{style:{color:u(((Be=l.sentiment)==null?void 0:Be.score)||0),fontWeight:600},children:[((((Oe=l.sentiment)==null?void 0:Oe.score)||0)*100).toFixed(0),"%"]})," | Confidence: ",e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[((((ne=l.sentiment)==null?void 0:ne.confidence)||0)*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"VOICE ANALYSIS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Confidence"}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((Ce=l.voice_tone)==null?void 0:Ce.confidence_level)||0}%`,height:"100%",borderRadius:4,background:(((v=l.voice_tone)==null?void 0:v.confidence_level)||0)>70?"#00ff88":(((_e=l.voice_tone)==null?void 0:_e.confidence_level)||0)>40?"#ffaa00":"#ff4466",transition:"width 0.3s"}})}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",marginTop:4},children:[(((le=l.voice_tone)==null?void 0:le.confidence_level)||0).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Speaking Rate"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#00aaff"},children:(((Ne=l.voice_tone)==null?void 0:Ne.speaking_rate)||0).toFixed(0)}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"WPM"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Hesitations"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((it=l.voice_tone)==null?void 0:it.hesitation_count)||0)>5?"#ff4466":"#888"},children:((Rt=l.voice_tone)==null?void 0:Rt.hesitation_count)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Stress Signs"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((Ke=l.voice_tone)==null?void 0:Ke.stress_indicators)||0)>3?"#ff4466":"#888"},children:((Xe=l.voice_tone)==null?void 0:Xe.stress_indicators)||0})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"KEYWORD TRACKING"}),e.jsxs("div",{style:{maxHeight:150,overflowY:"auto"},children:[Object.entries(l.keywords||{}).filter(([re,a])=>a.count>0).sort((re,a)=>a[1].count-re[1].count).slice(0,8).map(([re,a])=>{const m=Math.max(...Object.values(l.keywords||{}).map(H=>H.count||0),1),F=["growth","dovish","easing","employment","jobs"],B=["inflation","hawkish","tightening","recession","rates"],A=F.includes(re)?"#00ff88":B.includes(re)?"#ff4466":"#00aaff";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsx("span",{style:{minWidth:70,fontSize:11,color:A,fontWeight:600,textTransform:"capitalize"},children:re}),e.jsx("div",{style:{flex:1,height:6,background:"rgba(255,255,255,0.05)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${a.count/m*100}%`,height:"100%",background:A,borderRadius:3,transition:"width 0.3s"}})}),e.jsx("span",{style:{fontSize:12,color:"#888",minWidth:24,textAlign:"right"},children:a.count})]},re)}),Object.values(l.keywords||{}).every(re=>re.count===0)&&e.jsx("div",{style:{color:"#666",fontSize:12,textAlign:"center",padding:20},children:"No keywords detected yet"})]})]}),(()=>{var B,A,H,se;const re=(((B=l.sentiment)==null?void 0:B.score)||0)>.05?"bullish":(((A=l.sentiment)==null?void 0:A.score)||0)<-.05?"bearish":"neutral",a=((H=l.market_direction)==null?void 0:H.signal)||"neutral",m=re!=="neutral"&&a!=="neutral"&&re!==a,F=re!=="neutral"&&a==="neutral"||re==="neutral"&&a!=="neutral";if(m)return e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,170,0,0.15) 0%, rgba(255,170,0,0.05) 100%)",border:"2px solid #ffaa00",borderRadius:12,padding:16,marginBottom:16,animation:"pulse 1.5s infinite"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:700,fontSize:14},children:"DIVERGENCE ALERT"}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment: ",e.jsx("span",{style:{color:re==="bullish"?"#00ff88":"#ff4466"},children:re.toUpperCase()})," vs ","Direction: ",e.jsx("span",{style:{color:a==="bullish"?"#00ff88":"#ff4466"},children:a.toUpperCase()})]}),e.jsx("div",{style:{color:"#ffaa00",fontSize:10,marginTop:4},children:"Voice tone or keywords offsetting text sentiment"})]})]})});if(F)return e.jsx("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{style:{color:"#888",fontSize:11},children:["Mixed signals: Sentiment ",re.toUpperCase()," | Direction ",a.toUpperCase()]})]})});if(re!=="neutral"&&re===a){const $=((se=l.market_direction)==null?void 0:se.strength)||0,ye=re==="bullish"?"#00ff88":"#ff4466";return e.jsx("div",{style:{background:`linear-gradient(135deg, ${ye}20 0%, ${ye}08 100%)`,border:`2px solid ${ye}`,borderRadius:12,padding:16,marginBottom:16,boxShadow:`0 0 20px ${ye}30`},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:re==="bullish"?"":""}),e.jsxs("div",{children:[e.jsxs("div",{style:{color:ye,fontWeight:700,fontSize:14},children:["STRONG ",re.toUpperCase()," SIGNAL"]}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment + Direction aligned | Strength: ",$.toFixed(0),"%"]})]})]})})}return null})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`2px solid ${W.color}`,borderRadius:16,padding:24,textAlign:"center",boxShadow:`0 0 30px ${W.glow}`},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"MARKET DIRECTION"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"20px 0",transition:"transform 0.5s ease"},children:[e.jsx("span",{style:{fontSize:56,color:W.color,textShadow:`0 0 30px ${W.color}`,transition:"color 0.5s, text-shadow 0.5s, transform 0.3s",animation:((Pe=l.market_direction)==null?void 0:Pe.signal)!=="neutral"?"pulse 2s infinite":"none"},children:W.icon}),e.jsx("span",{style:{fontSize:36,fontWeight:800,color:W.color,letterSpacing:4,transition:"color 0.5s ease",textShadow:`0 0 15px ${W.color}40`},children:(((oe=l.market_direction)==null?void 0:oe.signal)||"neutral").toUpperCase()})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Strength"}),e.jsx("div",{style:{height:10,background:"rgba(255,255,255,0.1)",borderRadius:5,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((fe=l.market_direction)==null?void 0:fe.strength)||0}%`,height:"100%",borderRadius:5,background:`linear-gradient(90deg, ${W.color}80 0%, ${W.color} 100%)`,transition:"width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:`0 0 10px ${W.color}`}})}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:W.color,marginTop:6,transition:"color 0.5s"},children:[(((Se=l.market_direction)==null?void 0:Se.strength)||0).toFixed(0),"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Sentiment"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((ee=(O=l.market_direction)==null?void 0:O.components)==null?void 0:ee.sentiment_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Voice"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((lt=(ke=l.market_direction)==null?void 0:ke.components)==null?void 0:lt.tone_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Keywords"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((Le=(He=l.market_direction)==null?void 0:He.components)==null?void 0:Le.keyword_weight)||0)*100).toFixed(0),"%"]})]})]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Fed Speech Transcription Analysis"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(139,92,246,0.2)",color:"#A78BFA",fontSize:10,fontWeight:600},children:"DEEPGRAM LIVE TRANSCRIPTION"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Real-time sentiment analysis of Fed Chair, FOMC Press Conferences & Presidential speeches  OHLC during speech duration"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#A78BFA",fontSize:12,fontWeight:600},children:" PAST SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Last 6 Months)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(139,92,246,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SENTIMENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SIGNAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"RESULT"})]})}),e.jsx("tbody",{children:[{date:"Tue, Jan 28",dateStr:"2026-01-28",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.12,direction:"bearish",o:2765.8,h:2772.4,l:2748.5,c:2752.2},{date:"Tue, Jan 28",dateStr:"2026-01-28",time:"14:00",event:"FOMC Rate Decision",speaker:"Fed",duration:25,sentiment:-.05,direction:"neutral",o:2768.5,h:2775.2,l:2762.8,c:2765.8},{date:"Wed, Jan 8",dateStr:"2026-01-08",time:"14:00",event:"FOMC Minutes Release Discussion",speaker:"Fed Officials",duration:45,sentiment:-.08,direction:"bearish",o:4495,h:4498.5,l:4486.2,c:4488.8},{date:"Wed, Dec 18",dateStr:"2025-12-18",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:52,sentiment:.15,direction:"bullish",o:4425,h:4452.3,l:4420.5,c:4448.6},{date:"Fri, Dec 6",dateStr:"2025-12-06",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:38,sentiment:-.12,direction:"bearish",o:4380,h:4385.4,l:4358.2,c:4362.5},{date:"Wed, Nov 26",dateStr:"2025-11-26",time:"14:30",event:"FOMC Minutes Discussion",speaker:"Fed Officials",duration:42,sentiment:.05,direction:"neutral",o:4320,h:4328.5,l:4315.8,c:4322.4},{date:"Thu, Nov 14",dateStr:"2025-11-14",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:55,sentiment:.22,direction:"bullish",o:4285.5,h:4318.2,l:4282,c:4312.8},{date:"Mon, Nov 4",dateStr:"2025-11-04",time:"15:00",event:"U.S. President Trump Speaks",speaker:"Trump",duration:28,sentiment:.18,direction:"bullish",o:4245,h:4272.5,l:4242.3,c:4268.9},{date:"Wed, Oct 22",dateStr:"2025-10-22",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:48,sentiment:-.15,direction:"bearish",o:4195,h:4202.8,l:4168.5,c:4175.2},{date:"Tue, Oct 8",dateStr:"2025-10-08",time:"09:30",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:35,sentiment:.08,direction:"bullish",o:4150,h:4168.4,l:4145.2,c:4162.5},{date:"Wed, Sep 17",dateStr:"2025-09-17",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:58,sentiment:.28,direction:"bullish",o:4085,h:4135.6,l:4080.5,c:4128.4},{date:"Fri, Sep 5",dateStr:"2025-09-05",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:42,sentiment:-.05,direction:"neutral",o:4055,h:4068.2,l:4048.5,c:4058.8},{date:"Fri, Aug 22",dateStr:"2025-08-22",time:"10:00",event:"Jackson Hole - Powell Speaks",speaker:"Powell",duration:65,sentiment:.35,direction:"bullish",o:3985,h:4058.5,l:3978.2,c:4045.8},{date:"Thu, Aug 7",dateStr:"2025-08-07",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:50,sentiment:.12,direction:"bullish",o:3925,h:3958.4,l:3920.5,c:3952.2},{date:"Wed, Jul 30",dateStr:"2025-07-30",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.18,direction:"bearish",o:3895,h:3902.5,l:3858.2,c:3865.4},{date:"Tue, Jul 15",dateStr:"2025-07-15",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:40,sentiment:.1,direction:"bullish",o:3845,h:3872.8,l:3840.5,c:3868.2}].map((a,m)=>{const F=a.h-a.l,B=a.c>a.o+3?"bullish":a.c<a.o-3?"bearish":"neutral",A=a.direction===B||a.direction==="neutral"&&Math.abs(a.c-a.o)<=3,H=a.sentiment>.1?"#00ff88":a.sentiment<-.1?"#ff4466":"#ffaa00",se=a.direction==="bullish"?"#00ff88":a.direction==="bearish"?"#ff4466":"#ffaa00",$=a.speaker==="Powell"?"#A78BFA":a.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:m%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:a.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:a.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:a.event}),e.jsx("div",{style:{color:$,fontSize:10,marginTop:2},children:a.speaker})]}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[a.duration,"m"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:`${H}15`,border:`1px solid ${H}30`},children:e.jsxs("span",{style:{color:H,fontWeight:600,fontSize:11},children:[(a.sentiment*100).toFixed(0),"%"]})})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("span",{style:{color:se,fontWeight:600,fontSize:11,display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx("span",{children:a.direction==="bullish"?"":a.direction==="bearish"?"":""}),a.direction.toUpperCase()]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("div",{style:{fontSize:9,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.4},children:[e.jsx("span",{style:{color:"#888"},children:"O:"}),e.jsx("span",{style:{color:"#fff"},children:a.o.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"H:"}),e.jsx("span",{style:{color:"#00ff88"},children:a.h.toFixed(0)}),e.jsx("br",{}),e.jsx("span",{style:{color:"#888"},children:"L:"}),e.jsx("span",{style:{color:"#ff4466"},children:a.l.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"C:"}),e.jsx("span",{style:{color:a.c>=a.o?"#00ff88":"#ff4466"},children:a.c.toFixed(0)})]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right"},children:e.jsxs("span",{style:{color:"#FFD700",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:12},children:["$",F.toFixed(2)]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:"50%",background:A?"rgba(0,255,136,0.15)":"rgba(255,68,102,0.15)",color:A?"#00ff88":"#ff4466",fontSize:12,fontWeight:700},children:A?"":""})})]},m)})})]})})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Scheduled for Transcription)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EST. DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"STATUS"})]})}),e.jsx("tbody",{children:(()=>{const re=[{date:"Fri, Feb 7",dateStr:"2026-02-07",time:"10:00",durationMin:40,event:"Fed Chair Powell Speaks",speaker:"Powell",estDuration:"~40m"},{date:"Wed, Feb 12",dateStr:"2026-02-12",time:"15:00",durationMin:30,event:"U.S. President Trump Speaks",speaker:"Trump",estDuration:"~30m"},{date:"Wed, Mar 19",dateStr:"2026-03-19",time:"14:30",durationMin:55,event:"FOMC Press Conference",speaker:"Powell",estDuration:"~55m"}],a=new Date,m=new Date(a.toLocaleString("en-US",{timeZone:"America/New_York"})),F=re.map(B=>{const[A,H]=B.time.split(":").map(Number),se=new Date(B.dateStr+"T"+B.time+":00"),$=new Date(se.toLocaleString("en-US",{timeZone:"America/New_York"})),ye=new Date($.getTime()+B.durationMin*60*1e3);let vt="SCHEDULED",ct="#A78BFA",wt="rgba(139,92,246,0.2)";return m>=$&&m<=ye?(vt=" LIVE",ct="#ff4466",wt="rgba(255,68,102,0.3)"):m>ye&&(vt="ENDED",ct="#666",wt="rgba(100,100,100,0.2)"),{...B,status:vt,statusColor:ct,statusBg:wt,eventEnd:ye}}).filter(B=>B.status!=="ENDED");return F.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming speeches scheduled"})}):F.map((B,A)=>{const H=B.speaker==="Powell"?"#A78BFA":B.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:B.status===" LIVE"?"rgba(255,68,102,0.05)":A%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:B.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:B.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:B.event}),e.jsx("div",{style:{color:H,fontSize:10,marginTop:2},children:B.speaker})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:B.estDuration}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:B.statusBg,color:B.statusColor,animation:B.status===" LIVE"?"pulse 1.5s infinite":"none"},children:B.status})})]},A)})})()})]})})]}),(()=>{const re=[{sentiment:-.08,direction:"bearish",o:4495,c:4488.8},{sentiment:.15,direction:"bullish",o:4425,c:4448.6},{sentiment:-.12,direction:"bearish",o:4380,c:4362.5},{sentiment:.05,direction:"neutral",o:4320,c:4322.4},{sentiment:.22,direction:"bullish",o:4285.5,c:4312.8},{sentiment:.18,direction:"bullish",o:4245,c:4268.9},{sentiment:-.15,direction:"bearish",o:4195,c:4175.2},{sentiment:.08,direction:"bullish",o:4150,c:4162.5},{sentiment:.28,direction:"bullish",o:4085,c:4128.4},{sentiment:-.05,direction:"neutral",o:4055,c:4058.8},{sentiment:.35,direction:"bullish",o:3985,c:4045.8},{sentiment:.12,direction:"bullish",o:3925,c:3952.2},{sentiment:-.18,direction:"bearish",o:3895,c:3865.4},{sentiment:.1,direction:"bullish",o:3845,c:3868.2}];let a=0,m=0;re.forEach(H=>{const se=H.c-H.o,$=se>3?"bullish":se<-3?"bearish":"neutral";(H.direction===$||H.direction==="neutral"&&Math.abs(se)<=3)&&(a++,m+=Math.abs(se))});const F=Math.round(a/re.length*100),B=(re.reduce((H,se)=>H+Math.abs(se.c-se.o),0)/re.length).toFixed(2),A=Math.round(m*100);return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.1) 0%, rgba(0,170,255,0.05) 100%)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:12,padding:20,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:"#fff",fontSize:14,fontWeight:600},children:"Deepgram Speech Analysis ROI (6 Months)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"SPEECHES"}),e.jsx("div",{style:{color:"#fff",fontSize:24,fontWeight:700},children:re.length})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"CORRECT"}),e.jsx("div",{style:{color:"#00ff88",fontSize:24,fontWeight:700},children:a})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"ACCURACY"}),e.jsxs("div",{style:{color:F>=70?"#00ff88":"#ffaa00",fontSize:24,fontWeight:700},children:[F,"%"]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"AVG MOVE"}),e.jsxs("div",{style:{color:"#00aaff",fontSize:24,fontWeight:700},children:["$",B]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"$ VALUE"}),e.jsxs("div",{style:{color:"#FFD700",fontSize:24,fontWeight:700},children:["$",A.toLocaleString()]})]})]}),e.jsx("div",{style:{marginTop:16,padding:"12px 16px",background:"rgba(139,92,246,0.1)",borderRadius:8,border:"1px solid rgba(139,92,246,0.2)"},children:e.jsxs("p",{style:{color:"#aaa",fontSize:11,margin:0,lineHeight:1.5},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" VERDICT: ",F>=70?"KEEP DEEPGRAM":"MONITOR"]})," - At ",F,"% accuracy on Fed speeches, capturing $",A.toLocaleString()," in value over 6 months.",e.jsx("span",{style:{color:"#888"},children:" Note: Fed Chair position may change - monitor for new appointments."})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Red Folder News Events"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(255,68,102,0.2)",color:"#ff4466",fontSize:10,fontWeight:600},children:"HIGH IMPACT DATA RELEASES"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Instant economic data releases  30-minute candle OHLC at release time  No transcription (instant release)"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ff4466",fontSize:12,fontWeight:600},children:" PAST RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,68,102,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"ACTUAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"30m OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"})]})}),e.jsxs("tbody",{children:[(((Je=l.economic_calendar)==null?void 0:Je.past)||[]).map((re,a)=>{const m=re.impact==="high"||re.impact==="critical"?"#ff4466":re.impact==="medium"?"#ffaa00":"#888";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:a%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:re.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:re.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:re.event}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:3,fontSize:8,fontWeight:600,background:`${m}20`,color:m,marginTop:4,display:"inline-block"},children:re.impact.toUpperCase()})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:re.actual||re.forecast})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:re.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#666",fontSize:10},children:"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#666",fontSize:10},children:"--"})]},a)}),(!((At=l.economic_calendar)!=null&&At.past)||l.economic_calendar.past.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:20,textAlign:"center",color:"#666"},children:"No past events this month"})})]})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",((J=l.economic_calendar)==null?void 0:J.current_month)||new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]}),((ot=l.economic_calendar)==null?void 0:ot.last_updated)&&e.jsxs("span",{style:{color:"#444",fontSize:9,marginLeft:"auto"},children:["Updated: ",l.economic_calendar.last_updated]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"PREVIOUS"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"IMPACT"})]})}),e.jsxs("tbody",{children:[(((rt=l.economic_calendar)==null?void 0:rt.upcoming)||[]).map((re,a)=>{const m=re.impact==="high"||re.impact==="critical"?"#ff4466":re.impact==="medium"?"#ffaa00":"#888",F=re.is_today;return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:F?"rgba(255,170,0,0.1)":a%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsxs("td",{style:{padding:"10px 8px",color:F?"#ffaa00":"#aaa",fontSize:11,whiteSpace:"nowrap",fontWeight:F?600:400},children:[F&&e.jsx("span",{style:{marginRight:4},children:""}),re.date]}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:re.time}),e.jsx("td",{style:{padding:"10px 8px"},children:e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:re.event})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:re.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:re.previous}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${m}20`,color:m},children:re.impact.toUpperCase()})})]},a)}),(!((Qe=l.economic_calendar)!=null&&Qe.upcoming)||l.economic_calendar.upcoming.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming events"})})]})]})})]})]})]})},Wu=({onResetComplete:t})=>{const[n,i]=I.useState(!1),[o,r]=I.useState(null),[s,l]=I.useState(""),d=async()=>{i(!0),r(null),l("Initiating full system reset...");try{l("Stopping all connections...");const c=await fetch(`${nn}/reset-connection`,{method:"POST",headers:{"Content-Type":"application/json"}});if(c.ok){const g=await c.json();l("Clearing state and reconnecting..."),await new Promise(y=>setTimeout(y,2e3)),l("Verifying connection...");let w=0;for(;w<10;){try{const y=await fetch(`${nn}`);if(y.ok){const u=await y.json();if(u.data_source&&u.data_source!=="DISCONNECTED"){r({type:"success",message:"System reset complete! Live data restored."}),t&&t();break}}}catch{}w++,l(`Waiting for connection... (${w}/10)`),await new Promise(y=>setTimeout(y,1e3))}w>=10&&r({type:"warning",message:"Reset complete. Connection may take a moment to establish."})}else r({type:"error",message:"Failed to reset - backend may need manual restart"})}catch{r({type:"error",message:"Network error - check if backend is running on port 8080"})}l(""),i(!1)};return e.jsxs("div",{children:[e.jsx("button",{onClick:d,disabled:n,style:{width:"100%",padding:"16px 24px",background:n?"linear-gradient(135deg, #555 0%, #333 100%)":"linear-gradient(135deg, #ff4466 0%, #cc2244 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:15,fontWeight:700,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"all 0.2s ease",boxShadow:n?"none":"0 4px 20px rgba(255,68,102,0.3)"},children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"spin 1s linear infinite"},children:""}),s||"Resetting..."]}):e.jsx(e.Fragment,{children:" FULL SYSTEM RESET"})}),o&&e.jsxs("div",{style:{marginTop:12,padding:"12px 16px",borderRadius:8,background:o.type==="success"?"rgba(0,255,136,0.15)":o.type==="warning"?"rgba(255,170,0,0.15)":"rgba(255,68,102,0.15)",border:`1px solid ${o.type==="success"?"#00ff88":o.type==="warning"?"#ffaa00":"#ff4466"}`,color:o.type==="success"?"#00ff88":o.type==="warning"?"#ffaa00":"#ff4466",fontSize:13,textAlign:"center"},children:[o.type==="success"?"":o.type==="warning"?"":""," ",o.message]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(255,68,102,0.05)",borderRadius:8,border:"1px solid rgba(255,68,102,0.1)"},children:[e.jsx("div",{style:{fontSize:11,color:"#ff6688",marginBottom:8,fontWeight:600},children:"THIS WILL:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:16,lineHeight:1.8,fontSize:11,color:"#888"},children:[e.jsx("li",{children:"Kill all active data connections"}),e.jsx("li",{children:"Clear volume, delta, and TPO counters"}),e.jsx("li",{children:"Reset session high/low tracking"}),e.jsx("li",{children:"Restart Databento live feed"}),e.jsx("li",{children:"Re-establish fresh connection"})]})]})]})},Fu=({settings:t,onSettingsChange:n,trades:i=[],dateRange:o,connectionStatus:r,onResetConnection:s})=>{var C,f;const[l,d]=I.useState(t),[c,g]=I.useState(!1),[w,y]=I.useState(!1),[u,L]=I.useState(null),W=(P,S)=>{const T=JSON.parse(JSON.stringify(l)),E=P.split(".");let ie=T;for(let U=0;U<E.length-1;U++)ie=ie[E[U]];ie[E[E.length-1]]=S,d(T),g(!0)},Y=()=>{const P=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,S=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;if(Math.abs(P-100)>.1){alert(`Entry Tier allocations must sum to 100%. Currently: ${P}%`);return}if(Math.abs(S-100)>.1){alert(`Target Tier allocations must sum to 100%. Currently: ${S}%`);return}n(l),g(!1)},Ue=()=>{d(Bp),g(!0)},p=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,b=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;return e.jsxs("div",{style:q.settingsPanel,children:[e.jsxs("div",{style:q.settingsHeader,children:[e.jsx("h2",{style:q.dashboardTitle,children:" Strategy Parameters"}),e.jsx("p",{style:q.settingsSubtitle,children:"Adjust thresholds and allocations to see how analytics change"})]}),e.jsxs("div",{style:q.settingsGrid,children:[e.jsxs("div",{style:q.settingsCard,children:[e.jsx("h3",{style:q.settingsCardTitle,children:" Signal Thresholds"}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"Delta Threshold"}),e.jsx("span",{style:q.sliderValue,children:l.deltaThreshold.toLocaleString()})]}),e.jsx("input",{type:"range",min:"-5000",max:"-1000",step:"100",value:l.deltaThreshold,onChange:P=>W("deltaThreshold",parseInt(P.target.value)),style:q.slider}),e.jsxs("div",{style:q.sliderTicks,children:[e.jsx("span",{children:"-5000"}),e.jsx("span",{children:"-3000"}),e.jsx("span",{children:"-1000"})]})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"Buying Imbalance %"}),e.jsxs("span",{style:q.sliderValue,children:[l.buyingImbalancePct,"%"]})]}),e.jsx("input",{type:"range",min:"200",max:"600",step:"25",value:l.buyingImbalancePct,onChange:P=>W("buyingImbalancePct",parseInt(P.target.value)),style:q.slider}),e.jsxs("div",{style:q.sliderTicks,children:[e.jsx("span",{children:"200%"}),e.jsx("span",{children:"400%"}),e.jsx("span",{children:"600%"})]})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"Divergence Highlight Threshold"}),e.jsx("span",{style:q.sliderValue,children:l.divergenceThreshold||0})]}),e.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:l.divergenceThreshold||0,onChange:P=>W("divergenceThreshold",parseInt(P.target.value)),style:q.slider}),e.jsxs("div",{style:q.sliderTicks,children:[e.jsx("span",{children:"0 (All)"}),e.jsx("span",{children:"100"}),e.jsx("span",{children:"200"})]}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Delta divergence amount required for white glow on candles (0 = always highlight)"})]})]}),e.jsxs("div",{style:q.settingsCard,children:[e.jsx("h3",{style:q.settingsCardTitle,children:" Entry Tier Allocation"}),e.jsxs("p",{style:q.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(p-100)<.1?"#00ff88":"#ff4466"},children:[p,"%"]}),Math.abs(p-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"Tier I (Feeler)  8:45-9:20 ET"}),e.jsxs("span",{style:q.sliderValue,children:[l.entryTiers.tier1,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier1,onChange:P=>W("entryTiers.tier1",parseInt(P.target.value)),style:q.slider})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"Tier II (Builder)  9:35-10:00 ET"}),e.jsxs("span",{style:q.sliderValue,children:[l.entryTiers.tier2,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier2,onChange:P=>W("entryTiers.tier2",parseInt(P.target.value)),style:q.slider})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"Tier III (Runner)  10:15-10:45 ET"}),e.jsxs("span",{style:q.sliderValue,children:[l.entryTiers.tier3,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier3,onChange:P=>W("entryTiers.tier3",parseInt(P.target.value)),style:q.slider})]}),e.jsxs("div",{style:q.tierVisual,children:[e.jsx("div",{style:{...q.tierBar,width:`${l.entryTiers.tier1}%`,background:"#00aaff"}}),e.jsx("div",{style:{...q.tierBar,width:`${l.entryTiers.tier2}%`,background:"#00ff88"}}),e.jsx("div",{style:{...q.tierBar,width:`${l.entryTiers.tier3}%`,background:"#ffaa00"}})]}),e.jsxs("div",{style:q.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00aaff"},children:""})," Tier I"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," Tier II"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," Tier III"]})]})]}),e.jsxs("div",{style:q.settingsCard,children:[e.jsx("h3",{style:q.settingsCardTitle,children:" Target Allocation"}),e.jsxs("p",{style:q.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(b-100)<.1?"#00ff88":"#ff4466"},children:[b,"%"]}),Math.abs(b-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"VWAP Target (88% historical hit rate)"}),e.jsxs("span",{style:q.sliderValue,children:[l.targetTiers.vwap,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.vwap,onChange:P=>W("targetTiers.vwap",parseInt(P.target.value)),style:q.slider})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"IB Mid Target (75% historical hit rate)"}),e.jsxs("span",{style:q.sliderValue,children:[l.targetTiers.ibMid,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibMid,onChange:P=>W("targetTiers.ibMid",parseInt(P.target.value)),style:q.slider})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"IB High Target (40% historical hit rate)"}),e.jsxs("span",{style:q.sliderValue,children:[l.targetTiers.ibHigh,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibHigh,onChange:P=>W("targetTiers.ibHigh",parseInt(P.target.value)),style:q.slider})]}),e.jsxs("div",{style:q.tierVisual,children:[e.jsx("div",{style:{...q.tierBar,width:`${l.targetTiers.vwap}%`,background:"#00ff88"}}),e.jsx("div",{style:{...q.tierBar,width:`${l.targetTiers.ibMid}%`,background:"#ffaa00"}}),e.jsx("div",{style:{...q.tierBar,width:`${l.targetTiers.ibHigh}%`,background:"#ff4466"}})]}),e.jsxs("div",{style:q.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," VWAP"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," IB Mid"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ff4466"},children:""})," IB High"]})]})]}),e.jsxs("div",{style:q.settingsCard,children:[e.jsx("h3",{style:q.settingsCardTitle,children:" Backtest Filters"}),e.jsx("p",{style:q.allocationNote,children:"Filter trades by grade, tier, and R-multiple"}),e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{...q.sliderLabel,fontSize:10},children:"Grade"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:["A","B","C","F"].map(P=>{var S,T;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((T=(S=l.filters)==null?void 0:S.grades)==null?void 0:T[P])??!0,onChange:E=>{const ie={...l.filters};ie.grades||(ie.grades={A:!0,B:!0,C:!0,F:!0}),ie.grades[P]=E.target.checked,W("filters",ie)},style:{width:14,height:14}}),e.jsx("span",{style:{color:P==="A"?"#00ff88":P==="B"?"#ffaa00":"#ff4466",fontWeight:600,fontSize:11},children:P})]},P)})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{...q.sliderLabel,fontSize:10},children:"Tier"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:[1,2,3].map(P=>{var S,T;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((T=(S=l.filters)==null?void 0:S.tiers)==null?void 0:T[P])??!0,onChange:E=>{const ie={...l.filters};ie.tiers||(ie.tiers={1:!0,2:!0,3:!0}),ie.tiers[P]=E.target.checked,W("filters",ie)},style:{width:14,height:14}}),e.jsx("span",{style:{color:P===1?"#00aaff":P===2?"#00ff88":"#ffaa00",fontWeight:600,fontSize:11},children:P===1?"I":P===2?"II":"III"})]},P)})})]})]}),e.jsxs("div",{style:q.sliderGroup,children:[e.jsxs("div",{style:q.sliderHeader,children:[e.jsx("label",{style:q.sliderLabel,children:"Minimum R-Multiple"}),e.jsxs("span",{style:q.sliderValue,children:[(((C=l.filters)==null?void 0:C.minR)??-10).toFixed(1),"R"]})]}),e.jsx("input",{type:"range",min:"-10",max:"5",step:"0.5",value:((f=l.filters)==null?void 0:f.minR)??-10,onChange:P=>{const S={...l.filters,minR:parseFloat(P.target.value)};W("filters",S)},style:q.slider}),e.jsxs("div",{style:q.sliderTicks,children:[e.jsx("span",{children:"-10R (All)"}),e.jsx("span",{children:"0R"}),e.jsx("span",{children:"5R"})]})]})]})]}),e.jsxs("div",{style:q.settingsActions,children:[e.jsx("button",{style:{...q.actionButton,...q.resetButton},onClick:Ue,children:"Reset to Defaults"}),e.jsx("button",{style:{...q.actionButton,...q.applyButton,opacity:c?1:.5,cursor:c?"pointer":"not-allowed"},onClick:Y,disabled:!c,children:c?" Apply Changes & Recalculate":"No Changes"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(138,43,226,0.1) 0%, rgba(75,0,130,0.05) 100%)",border:"2px solid rgba(138,43,226,0.3)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#9370DB",fontSize:18},children:" Project Horizon AI Optimizer"}),e.jsxs("p",{style:{color:"#888",fontSize:13,marginBottom:20},children:["Analyzes ",i.length," trades from ",o==null?void 0:o.start," to ",o==null?void 0:o.end," to find optimal parameters."]}),e.jsx("button",{style:{width:"100%",padding:"16px 32px",background:w?"linear-gradient(135deg, #666 0%, #444 100%)":"linear-gradient(135deg, #9370DB 0%, #8B5CF6 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:16,fontWeight:700,cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10},disabled:w||i.length===0,onClick:()=>{if(i.length===0){alert("No trades available to optimize. Please load trade data first.");return}y(!0),L(null),setTimeout(()=>{const P=[-1500,-2e3,-2500,-3e3,-3500,-4e3],S=[300,350,400,450,500];let T={pnl:-1/0,winRate:0,settings:null,tradesUsed:0};if(P.forEach(h=>{S.forEach(z=>{const Ie=i.filter(_=>!(_.delta!==void 0&&_.delta>h||_.buyingImbalance!==void 0&&_.buyingImbalance<z));if(Ie.length>0){const _=Ie.reduce((Ce,v)=>Ce+(v.pnl||0),0),Oe=Ie.filter(Ce=>(Ce.pnl||0)>0).length/Ie.length*100;(_*(Oe/100)>T.pnl*(T.winRate/100)||_>T.pnl&&Oe>=50)&&(T={pnl:_,winRate:Oe,tradesUsed:Ie.length,settings:{deltaThreshold:h,buyingImbalancePct:z}})}})}),!T.settings){const h=i.reduce((Ie,_)=>Ie+(_.pnl||0),0),z=i.filter(Ie=>(Ie.pnl||0)>0).length;T={pnl:h,winRate:z/i.length*100,tradesUsed:i.length,settings:{deltaThreshold:-2500,buyingImbalancePct:400}}}const E=i.filter(h=>(h.pnl||0)>0),ie=E.length>0?E.reduce((h,z)=>h+(z.r||0),0)/E.length:1.5;let U={tier1:25,tier2:40,tier3:35},j={vwap:50,ibMid:35,ibHigh:15};ie>2?(U={tier1:20,tier2:35,tier3:45},j={vwap:40,ibMid:35,ibHigh:25}):ie<1&&(U={tier1:30,tier2:45,tier3:25},j={vwap:60,ibMid:30,ibHigh:10}),L({...T,entryTiers:U,targetTiers:j,avgR:ie.toFixed(2),totalTrades:i.length}),y(!1)},1500)},children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"pulse 1s infinite"},children:""}),e.jsx("span",{children:"Optimizing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Run AI Optimization"})]})}),u&&e.jsxs("div",{style:{marginTop:20,padding:20,background:"rgba(0,255,136,0.05)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#00ff88",fontSize:14},children:" Optimization Complete"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"PROJECTED P&L"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.pnl>=0?"#00ff88":"#ff4466"},children:["$",u.pnl.toLocaleString()]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"WIN RATE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.winRate>=50?"#00ff88":"#ffaa00"},children:[u.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"TRADES USED"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#fff"},children:[u.tradesUsed,"/",u.totalTrades]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"AVG R-MULTIPLE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#00aaff"},children:[u.avgR,"R"]})]})]}),e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16},children:[e.jsx("strong",{children:"Recommended Settings:"}),e.jsxs("div",{style:{marginTop:8,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:["Delta Threshold: ",e.jsx("span",{style:{color:"#9370DB"},children:u.settings.deltaThreshold.toLocaleString()})]}),e.jsxs("div",{children:["Buy Imbalance: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.settings.buyingImbalancePct,"%"]})]}),e.jsxs("div",{children:["Entry Tiers: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.entryTiers.tier1,"/",u.entryTiers.tier2,"/",u.entryTiers.tier3]})]}),e.jsxs("div",{children:["Targets: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.targetTiers.vwap,"/",u.targetTiers.ibMid,"/",u.targetTiers.ibHigh]})]})]})]}),e.jsx("button",{style:{width:"100%",padding:"12px 20px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:8,color:"#000",fontSize:14,fontWeight:700,cursor:"pointer"},onClick:()=>{const P={...l,deltaThreshold:u.settings.deltaThreshold,buyingImbalancePct:u.settings.buyingImbalancePct,entryTiers:u.entryTiers,targetTiers:u.targetTiers};d(P),n(P),L(null),alert(" Optimal settings applied!")},children:" Apply Optimal Settings"})]}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:"Grid search optimization across Delta & Imbalance parameters"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16},children:" Timezone"}),e.jsx("div",{style:{padding:"14px 20px",background:"rgba(0,170,255,0.1)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:10,color:"#00aaff",fontSize:14,fontWeight:500},children:" New York (ET) - Eastern Time"}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666"},children:"All session times are displayed in Eastern Time (ET). Market hours: 6:00 PM - 5:00 PM ET (Sun-Fri)"})]}),e.jsxs("div",{style:{background:r!=null&&r.connected?"linear-gradient(135deg, rgba(0,255,136,0.05) 0%, rgba(0,200,100,0.02) 100%)":"linear-gradient(135deg, rgba(255,68,102,0.1) 0%, rgba(200,50,80,0.05) 100%)",border:`2px solid ${r!=null&&r.connected?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`,borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:r!=null&&r.connected?"#00ff88":"#ff4466",fontSize:18},children:[r!=null&&r.connected?"":""," Live Data Connection"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:20},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"STATUS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:r!=null&&r.connected?"#00ff88":"#ff4466"},children:r!=null&&r.connected?"LIVE":"OFFLINE"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"UPTIME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:r!=null&&r.connected?"#00aaff":"#888"},children:r!=null&&r.lastSuccessTime?Math.floor((Date.now()-new Date(r.lastSuccessTime).getTime())/1e3)<60?"STABLE":"RECONNECTING":"--"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"ERRORS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:(r==null?void 0:r.errorCount)>0?"#ffaa00":"#00ff88"},children:(r==null?void 0:r.errorCount)||0})]})]}),(r==null?void 0:r.lastError)&&e.jsxs("div",{style:{padding:12,background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:8,marginBottom:16},children:[e.jsx("div",{style:{fontSize:10,color:"#ff4466",marginBottom:4},children:"LAST ERROR"}),e.jsx("div",{style:{fontSize:12,color:"#ffaa00",fontFamily:"monospace",wordBreak:"break-all"},children:r.lastError}),r.reconnectAttempts>0&&e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:8},children:["Auto-reconnect attempts: ",r.reconnectAttempts]})]}),(r==null?void 0:r.lastSuccessTime)&&e.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:16},children:["Last successful data: ",new Date(r.lastSuccessTime).toLocaleTimeString()]}),e.jsx(Wu,{onResetComplete:s})]}),e.jsxs("div",{style:q.settingsInfo,children:[e.jsx("h4",{style:q.infoTitle,children:" How Settings Affect Analytics"}),e.jsxs("ul",{style:q.infoList,children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Delta Threshold:"})," Trades with delta deeper than this value are considered valid setups"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Buying Imbalance %:"})," Minimum imbalance required for entry confirmation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Entry Tier Allocation:"})," How position size is distributed across the three entry phases"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Target Allocation:"})," Distribution of profit-taking across the three target levels"]})]})]})]})};I.memo(({title:t,value:n,subtitle:i,trend:o,color:r})=>{const s=o>0?"#00ff88":o<0?"#ff4466":"#888",l=r||"rgba(255,255,255,0.03)";return e.jsxs("div",{style:{...q.statsCard,background:l},children:[e.jsx("div",{style:q.statsTitle,children:t}),e.jsx("div",{style:q.statsValue,children:n}),i&&e.jsx("div",{style:q.statsSubtitle,children:i}),o!==void 0&&e.jsxs("div",{style:{...q.statsTrend,color:s},children:[o>0?"":o<0?"":""," ",Math.abs(o).toFixed(1),"%"]})]})});const Mu=({metrics:t,settings:n})=>{var w,y;const[i,o]=I.useState(null),[r,s]=I.useState({x:0,y:0}),l=[{name:`Delta < ${((w=n.deltaThreshold)==null?void 0:w.toLocaleString())||"-2500"}`,active:(t.delta_30m||0)<=(n.deltaThreshold||-2500),critical:!0,tooltip:(t.delta_30m||0)<=(n.deltaThreshold||-2500)?` 30m delta (${(t.delta_30m||0).toLocaleString()}) is below threshold (${(n.deltaThreshold||-2500).toLocaleString()}), indicating strong selling pressure`:` 30m delta (${(t.delta_30m||0).toLocaleString()}) is above threshold (${(n.deltaThreshold||-2500).toLocaleString()}), not enough selling pressure`},{name:"Outside IB",active:(t.current_price||0)>(t.ib_high||0)&&(t.ib_high||0)>0||(t.current_price||0)<(t.ib_low||999999)&&(t.ib_low||999999)<999999,critical:!0,tooltip:(()=>{const u=t.current_price||0,L=t.ib_high||0,W=t.ib_low||999999,Y=u>L&&L>0,Ue=u<W&&W<999999;return Y?` Price ($${u.toFixed(2)}) is ABOVE IB High ($${L.toFixed(2)}), potential breakout`:Ue?` Price ($${u.toFixed(2)}) is BELOW IB Low ($${W.toFixed(2)}), potential breakdown`:` Price ($${u.toFixed(2)}) is within IB range ($${W.toFixed(2)} - $${L.toFixed(2)})`})()},{name:"At pdPOC",active:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0,critical:!1,tooltip:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0?` Price is within $2 of previous day POC ($${(t.pdpoc||0).toFixed(2)}), key support level`:` Price is $${Math.abs((t.current_price||0)-(t.pdpoc||0)).toFixed(2)} away from pdPOC ($${(t.pdpoc||0).toFixed(2)})`},{name:"Absorption",active:(t.absorption_ratio||0)>1.2,critical:!0,tooltip:(t.absorption_ratio||0)>1.2?` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)}) > 1.2, buyers absorbing selling pressure`:` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)})  1.2, not enough buying absorption`},{name:`Buy Imb. ${n.buyingImbalancePct||400}%+`,active:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400),critical:!1,tooltip:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400)?` Buying imbalance (${t.buying_imbalance_pct||0}%) meets threshold (${n.buyingImbalancePct||400}%)`:` Buying imbalance (${t.buying_imbalance_pct||0}%) below threshold (${n.buyingImbalancePct||400}%)`},{name:"Stacked Imb. 3+",active:(t.stacked_buy_imbalances||0)>=3,critical:!1,tooltip:(t.stacked_buy_imbalances||0)>=3?` ${t.stacked_buy_imbalances||0} stacked buy imbalances detected, strong buying interest`:` Only ${t.stacked_buy_imbalances||0} stacked imbalances, need 3+ for confirmation`}],d=l.filter(u=>u.active).length,c=(u,L)=>{const W=u.target.getBoundingClientRect();s({x:W.left,y:W.bottom+8}),o(L)},g=()=>{o(null)};return e.jsxs("div",{style:q.signalMatrix,children:[e.jsxs("div",{style:q.signalHeader,children:[e.jsx("h3",{style:q.signalTitle,children:"Signal Matrix"}),e.jsx("div",{style:q.signalCount,children:e.jsxs("span",{style:{color:d>=4?"#00ff88":"#ffaa00"},children:[d,"/6 Active"]})})]}),e.jsx("div",{style:q.signalGrid,children:l.map((u,L)=>e.jsxs("div",{onMouseEnter:W=>c(W,u),onMouseLeave:g,style:{...q.signalItem,background:u.active?"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,255,136,0.05) 100%)":"rgba(255,68,102,0.1)",borderColor:u.active?"#00ff88":"#ff4466",cursor:"help"},children:[e.jsx("div",{style:{...q.signalIndicator,background:u.active?"#00ff88":"#ff4466",boxShadow:u.active?"0 0 10px #00ff88":"none"}}),e.jsx("span",{style:q.signalName,children:u.name}),u.critical&&e.jsx("span",{style:q.criticalBadge,children:"!"})]},L))}),i&&e.jsxs("div",{style:{position:"fixed",left:r.x,top:r.y,background:"rgba(20,20,30,0.98)",border:`2px solid ${i.active?"#00ff88":"#ff4466"}`,borderRadius:12,padding:"14px 18px",maxWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:i.active?"#00ff88":"#ff4466",boxShadow:i.active?"0 0 8px #00ff88":"none"}}),e.jsx("span",{style:{color:i.active?"#00ff88":"#ff4466",fontWeight:700,fontSize:14},children:i.active?"CONDITION MET":"NOT MET"}),i.critical&&e.jsx("span",{style:{background:"#ff4466",color:"#000",padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:700},children:"CRITICAL"})]}),e.jsx("div",{style:{color:"#ddd",fontSize:13,lineHeight:1.5},children:i.tooltip})]}),e.jsxs("div",{style:q.setupStatus,children:[e.jsx("span",{style:q.phaseLabel,children:"Current Phase:"}),e.jsx("span",{style:{...q.phaseValue,color:(y=t.current_phase)!=null&&y.includes("IB")?"#00ff88":t.current_phase==="POST_IB"?"#ffaa00":t.current_phase==="DISCONNECTED"?"#ff4466":"#888"},children:t.current_phase})]})]})},Ou=({trades:t,onDayClick:n})=>{const[i,o]=I.useState(()=>{if(t.length>0){const S=t[t.length-1],T=new Date(S.date);return{year:T.getFullYear(),month:T.getMonth()}}return{year:2025,month:11}}),[r,s]=I.useState(null),[l,d]=I.useState(null),[c,g]=I.useState({x:0,y:0}),w=I.useMemo(()=>{const S={};return t.forEach(T=>{S[T.date]||(S[T.date]=[]),S[T.date].push(T)}),S},[t]),y=(S,T)=>new Date(S,T+1,0).getDate(),u=(S,T)=>new Date(S,T,1).getDay(),L=y(i.year,i.month),W=u(i.year,i.month),Y=["January","February","March","April","May","June","July","August","September","October","November","December"],Ue=()=>{o(S=>S.month===0?{year:S.year-1,month:11}:{...S,month:S.month-1})},p=()=>{o(S=>S.month===11?{year:S.year+1,month:0}:{...S,month:S.month+1})},b=[];for(let S=0;S<W;S++)b.push({day:null,date:null});for(let S=1;S<=L;S++){const T=`${i.year}-${String(i.month+1).padStart(2,"0")}-${String(S).padStart(2,"0")}`,E=w[T]||[],ie=E.reduce((U,j)=>U+j.pnl,0);b.push({day:S,date:T,trades:E,pnl:ie,hasTradeData:E.length>0})}const C=(S,T)=>{if(T.hasTradeData){const E=S.target.getBoundingClientRect();g({x:E.left+E.width/2,y:E.top-10}),s(T)}},f=S=>{S.hasTradeData&&(d(S),n&&n(S))},P=I.useMemo(()=>{const S=t.filter(ie=>{const U=new Date(ie.date);return U.getFullYear()===i.year&&U.getMonth()===i.month}),T=S.reduce((ie,U)=>ie+U.pnl,0),E=S.filter(ie=>ie.pnl>0).length;return{trades:S.length,pnl:T,winRate:S.length>0?(E/S.length*100).toFixed(0):0}},[t,i]);return e.jsxs("div",{style:De.container,children:[e.jsxs("div",{style:De.header,children:[e.jsx("h3",{style:De.title,children:" Daily P&L Calendar"}),e.jsxs("div",{style:De.monthNav,children:[e.jsx("button",{onClick:Ue,style:De.navButton,children:""}),e.jsxs("span",{style:De.monthLabel,children:[Y[i.month]," ",i.year]}),e.jsx("button",{onClick:p,style:De.navButton,children:""})]}),e.jsxs("div",{style:De.monthStats,children:[e.jsxs("span",{children:[P.trades," trades"]}),e.jsxs("span",{style:{color:P.pnl>=0?"#00ff88":"#ff4466"},children:["$",P.pnl.toLocaleString()]}),e.jsxs("span",{style:{color:"#00ff88"},children:[P.winRate,"% WR"]})]})]}),e.jsx("div",{style:De.weekdays,children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>e.jsx("div",{style:De.weekday,children:S},S))}),e.jsx("div",{style:De.grid,children:b.map((S,T)=>e.jsx("div",{style:{...De.day,...S.day?{}:De.emptyDay,...S.hasTradeData?{background:S.pnl>=0?`rgba(0, 255, 136, ${Math.min(.4,Math.abs(S.pnl)/5e4+.1)})`:`rgba(255, 68, 102, ${Math.min(.4,Math.abs(S.pnl)/5e4+.1)})`,cursor:"pointer",border:`1px solid ${S.pnl>=0?"#00ff88":"#ff4466"}`}:{},...(l==null?void 0:l.date)===S.date?{border:"2px solid #fff",boxShadow:"0 0 15px rgba(0,255,136,0.5)"}:{}},onMouseEnter:E=>C(E,S),onMouseLeave:()=>s(null),onClick:()=>S.day&&f(S),children:S.day&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:De.dayNumber,children:S.day}),S.hasTradeData&&e.jsxs("span",{style:{...De.dayPnl,color:S.pnl>=0?"#00ff88":"#ff4466"},children:[S.pnl>=0?"+":"",(S.pnl/1e3).toFixed(1),"k"]}),S.trades.length>1&&e.jsx("span",{style:De.tradeCount,children:S.trades.length})]})},T))}),r&&r.hasTradeData&&e.jsxs("div",{style:{...De.tooltip,left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[e.jsxs("div",{style:De.tooltipHeader,children:[r.date,"  ",r.trades.length," trade(s)"]}),r.trades.map((S,T)=>e.jsxs("div",{style:De.tooltipTrade,children:[e.jsxs("div",{style:De.tooltipRow,children:[e.jsxs("span",{children:["Grade ",S.grade,"  Tier ",S.tier]}),e.jsxs("span",{style:{color:S.pnl>=0?"#00ff88":"#ff4466"},children:["$",S.pnl.toLocaleString()]})]}),e.jsxs("div",{style:De.tooltipRow,children:[e.jsxs("span",{children:["Entry: $",S.entry.toFixed(2)]}),e.jsxs("span",{children:["Exit: $",S.exit.toFixed(2)]})]}),e.jsxs("div",{style:De.tooltipRow,children:[e.jsxs("span",{children:["Delta: ",S.delta]}),e.jsxs("span",{children:["Imb: ",S.buyingImbalance,"%"]})]}),e.jsxs("div",{style:De.tooltipRow,children:[e.jsxs("span",{children:["Conditions: ",S.grade==="A"?"6/6":S.grade==="B"?"5/6":"4/6"]}),e.jsxs("span",{children:[S.r>0?"+":"",S.r,"R"]})]})]},T)),e.jsx("div",{style:De.tooltipFooter,children:"Click for full details"})]}),l&&l.hasTradeData&&e.jsx("div",{style:De.modalOverlay,onClick:()=>d(null),children:e.jsxs("div",{style:De.modal,onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{style:De.modalHeader,children:[e.jsxs("h3",{children:[" Trade Details - ",l.date]}),e.jsx("button",{onClick:()=>d(null),style:De.closeButton,children:""})]}),e.jsx("div",{style:De.modalContent,children:l.trades.map((S,T)=>{var E,ie,U,j,h,z,Ie;return e.jsxs("div",{style:De.tradeDetail,children:[e.jsxs("div",{style:De.tradeHeader,children:[e.jsxs("span",{style:De.tradeBadge,children:["Trade #",S.id]}),e.jsxs("span",{style:{...De.tradePnl,color:S.pnl>=0?"#00ff88":"#ff4466"},children:[S.pnl>=0?"+":"","$",S.pnl.toLocaleString()]})]}),e.jsxs("div",{style:De.tradeSection,children:[e.jsx("h4",{children:"Entry & Exit"}),e.jsxs("div",{style:De.tradeGrid,children:[e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"Entry Price"}),e.jsxs("span",{style:De.tradeValue,children:["$",S.entry.toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"Exit Price"}),e.jsxs("span",{style:De.tradeValue,children:["$",S.exit.toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"Stop Loss"}),e.jsxs("span",{style:De.tradeValue,children:["$",(S.entry-3.5).toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"R-Multiple"}),e.jsxs("span",{style:{...De.tradeValue,color:S.r>=0?"#00ff88":"#ff4466"},children:[S.r>0?"+":"",S.r,"R"]})]})]})]}),e.jsxs("div",{style:De.tradeSection,children:[e.jsx("h4",{children:"Reference Levels"}),e.jsxs("div",{style:De.tradeGrid,children:[e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"IB High"}),e.jsxs("span",{style:De.tradeValue,children:["$",(((E=S.levels)==null?void 0:E.ib_high)||S.entry+15).toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"IB Low"}),e.jsxs("span",{style:De.tradeValue,children:["$",(((ie=S.levels)==null?void 0:ie.ib_low)||S.entry-10).toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"IB Mid"}),e.jsxs("span",{style:De.tradeValue,children:["$",(((U=S.levels)==null?void 0:U.ib_mid)||S.entry+2.5).toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"pdPOC"}),e.jsxs("span",{style:De.tradeValue,children:["$",(((j=S.levels)==null?void 0:j.pdpoc)||S.entry-5).toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"VWAP"}),e.jsxs("span",{style:De.tradeValue,children:["$",(((h=S.levels)==null?void 0:h.vwap)||S.entry+5).toFixed(2)]})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"pd High"}),e.jsxs("span",{style:De.tradeValue,children:["$",(((z=S.levels)==null?void 0:z.pd_high)||S.entry+20).toFixed(2)]})]})]})]}),e.jsxs("div",{style:De.tradeSection,children:[e.jsx("h4",{children:"Entry Criteria Met"}),e.jsx("div",{style:De.criteriaGrid,children:[{name:"Price < IB Low",met:S.entry<(((Ie=S.levels)==null?void 0:Ie.ib_low)||S.entry)},{name:"At pdPOC",met:S.grade!=="C"},{name:`Delta Spike (${S.delta})`,met:S.delta<-2500},{name:"Absorption Detected",met:S.grade==="A"},{name:`Buying Imbalance (${S.buyingImbalance}%)`,met:S.buyingImbalance>=400},{name:"Stacked Imbalances",met:S.grade==="A"||S.grade==="B"}].map((_,Be)=>e.jsxs("div",{style:{...De.criterion,background:_.met?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",borderColor:_.met?"#00ff88":"#ff4466"},children:[e.jsx("span",{style:{...De.criterionIcon,color:_.met?"#00ff88":"#ff4466"},children:_.met?"":""}),e.jsx("span",{style:De.criterionName,children:_.name})]},Be))}),e.jsxs("div",{style:De.criteriaCount,children:["Conditions Met: ",e.jsxs("strong",{children:[S.conditionsMet||(S.grade==="A"?6:S.grade==="B"?5:4),"/6"]})]})]}),e.jsxs("div",{style:De.tradeSection,children:[e.jsx("h4",{children:"Trade Info"}),e.jsxs("div",{style:De.tradeGrid,children:[e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"Grade"}),e.jsx("span",{style:{...De.tradeBadgeSmall,background:S.grade==="A"?"#00ff88":S.grade==="B"?"#ffaa00":"#888"},children:S.grade})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"Tier"}),e.jsx("span",{style:De.tradeValue,children:S.tier})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"Contracts"}),e.jsx("span",{style:De.tradeValue,children:S.contracts})]}),e.jsxs("div",{style:De.tradeItem,children:[e.jsx("span",{style:De.tradeLabel,children:"Exit Reason"}),e.jsx("span",{style:De.tradeValue,children:S.exitReason.replace("target_","").replace("_"," ").toUpperCase()})]})]})]})]},T)})}),e.jsx("div",{style:De.modalFooter,children:e.jsxs("span",{style:{color:l.pnl>=0?"#00ff88":"#ff4466"},children:["Day Total: ",l.pnl>=0?"+":"","$",l.pnl.toLocaleString()]})})]})})]})},De={container:{background:"linear-gradient(180deg, rgba(15,18,25,0.95) 0%, rgba(10,12,18,0.98) 100%)",borderRadius:16,padding:16,marginTop:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",maxWidth:420},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},title:{fontSize:14,fontWeight:600,color:"#fff",margin:0},monthNav:{display:"flex",alignItems:"center",gap:8},navButton:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:11,transition:"all 0.15s ease"},monthLabel:{fontSize:13,fontWeight:600,color:"#fff",minWidth:110,textAlign:"center"},monthStats:{display:"flex",gap:10,fontSize:11,color:"#666"},weekdays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2,marginBottom:4},weekday:{textAlign:"center",color:"#555",fontSize:9,fontWeight:600,padding:4,letterSpacing:"0.5px"},grid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2},day:{aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:6,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)",position:"relative",transition:"all 0.15s ease",minHeight:42,maxHeight:50},emptyDay:{background:"transparent",border:"none"},dayNumber:{fontSize:11,color:"#777",fontWeight:500},dayPnl:{fontSize:9,fontWeight:600,marginTop:1},tradeCount:{position:"absolute",top:2,right:2,background:"rgba(0,170,255,0.9)",color:"#fff",fontSize:8,fontWeight:700,padding:"1px 4px",borderRadius:8,lineHeight:1.2},tooltip:{position:"fixed",background:"rgba(20, 25, 35, 0.98)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:12,padding:16,zIndex:1e3,minWidth:280,maxWidth:350,boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},tooltipHeader:{fontSize:14,fontWeight:600,color:"#fff",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)"},tooltipTrade:{marginBottom:12,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.05)"},tooltipRow:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#aaa",marginBottom:4},tooltipFooter:{fontSize:11,color:"#666",textAlign:"center",marginTop:8},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:20},modal:{background:"linear-gradient(180deg, #1a1f2e 0%, #0d1117 100%)",borderRadius:16,maxWidth:700,width:"100%",maxHeight:"90vh",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 80px rgba(0,0,0,0.6)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,255,136,0.05)"},closeButton:{background:"rgba(255,255,255,0.1)",border:"none",color:"#fff",fontSize:18,width:36,height:36,borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},modalContent:{padding:24,maxHeight:"calc(90vh - 150px)",overflowY:"auto"},modalFooter:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",textAlign:"center",fontSize:16,fontWeight:600},tradeDetail:{background:"rgba(255,255,255,0.03)",borderRadius:12,padding:20,marginBottom:16,border:"1px solid rgba(255,255,255,0.05)"},tradeHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},tradeBadge:{background:"rgba(0,170,255,0.2)",color:"#00aaff",padding:"4px 12px",borderRadius:20,fontSize:12,fontWeight:600},tradePnl:{fontSize:20,fontWeight:700},tradeSection:{marginBottom:16},tradeGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginTop:8},tradeItem:{display:"flex",flexDirection:"column",gap:4},tradeLabel:{fontSize:11,color:"#666",textTransform:"uppercase"},tradeValue:{fontSize:14,color:"#fff",fontWeight:500},tradeBadgeSmall:{display:"inline-block",padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:600,color:"#000"},criteriaGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8,marginTop:8},criterion:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:8,border:"1px solid",fontSize:12},criterionIcon:{fontSize:14,fontWeight:700},criterionName:{color:"#ccc"},criteriaCount:{marginTop:12,textAlign:"center",fontSize:14,color:"#888"}},Pu=()=>{var E,ie,U;const[t,n]=I.useState(null),[i,o]=I.useState(null),[r,s]=I.useState(null),[l,d]=I.useState(!0),[c,g]=I.useState(null),[w,y]=I.useState(!1),[u,L]=I.useState(!1),[W,Y]=I.useState(!1),[Ue,p]=I.useState(!1),[b,C]=I.useState(!0),{isMobile:f}=uo();I.useEffect(()=>{const j=async()=>{try{const z=`_t=${Date.now()}`,Ie={cache:"no-store"},[_,Be,Oe]=await Promise.all([fetch(`${nn}/zones?${z}`,Ie),fetch(`${nn}/?${z}`,Ie),fetch(`${nn}/market-profile?${z}`,Ie)]);if(_.ok&&n(await _.json()),Be.ok){const ne=await Be.json();console.log(" LIVE DATA FROM BACKEND:",{contract:ne.contract,day_open:ne.day_open,weekly_open:ne.weekly_open,current_price:ne.current_price}),o(ne)}Oe.ok&&s(await Oe.json()),g(null)}catch{g("Connection error")}d(!1)};j();const h=setInterval(j,1e3);return()=>clearInterval(h)},[]);const P=I.useMemo(()=>{var He,Le;if(!i)return{phase:"-",signal:"neutral",description:"No data"};const j=((He=i.volume_5m)==null?void 0:He.history)||((Le=i.volume_15m)==null?void 0:Le.history)||[],h=i.current_price||0;if(j.length<3)return{phase:"-",signal:"neutral",description:"Insufficient data"};const z=j.slice(-10),Ie=z.slice(-3),_=z.slice(-5),Be={price_close:h,price_high:i.session_high||h,price_low:i.session_low||h,buy:i.buy_volume||0,sell:i.sell_volume||0,delta:i.cumulative_delta||0},Oe=Ie.map(Je=>Je.delta||0),ne=Ie.map(Je=>(Je.buy||0)+(Je.sell||0)),Ce=Ie.map(Je=>Je.price_close||0),v=Oe.reduce((Je,At)=>Je+At,0)/3,_e=Oe[2]>Oe[1]&&Oe[1]>Oe[0]?"increasing":Oe[2]<Oe[1]&&Oe[1]<Oe[0]?"decreasing":"neutral",le=ne[2]>ne[1]?"increasing":ne[2]<ne[1]?"decreasing":"neutral",Ne=v<0&&le==="decreasing"&&Math.abs(Oe[2])<Math.abs(Oe[0]),it=Ce.length>=3&&Ce[2]>=Ce[0]-2,Rt=v<-10&&it&&ne[2]>50;let Ke=!1,Xe=!1;if(_.length>=5){const Je=_.map(m=>m.price_high||m.price_close||0),At=_.map(m=>m.price_low||m.price_close||0),J=Math.max(...Je),ot=Math.min(...At),rt=J-ot,Qe=_.reduce((m,F)=>m+(F.price_close||0),0)/5,re=rt<Qe*.005;Ke=Be.price_close>J&&re;const a=_.slice(-3).map(m=>m.delta||0);Xe=a[0]<-50&&a[2]>50}const Pe=Ie.map(Je=>((Je.price_high||Je.price_close)+(Je.price_low||Je.price_close))/2),oe=Pe[2]>Pe[1]&&Pe[1]>Pe[0]?"up":Pe[2]<Pe[1]&&Pe[1]<Pe[0]?"down":"neutral",fe=Ie.filter(Je=>(Je.buy||0)>(Je.sell||0)*1.5).length,Se=Be.price_close>Pe[1]&&Be.delta>0;let O="-",ee="neutral",ke="Scanning...";oe==="up"&&fe>=2&&Se?(O="C",ee="bullish",ke="POC Migration Up - Strong Trend"):Ke||Xe?(O="B",ee="bullish",ke=Ke?"Breakout Initiation":"V-Recovery"):Ne||Rt?(O="A",ee="preparing",ke=Ne?"Seller Exhaustion":"Absorption Detected"):oe==="down"&&(ee="bearish",ke="POC Migrating Down");const lt=Math.min(100,Math.max(0,50+(v||0)/5+(oe==="up"?20:oe==="down"?-20:0)+fe*10));return{phase:O,signal:ee,description:ke,momentumScore:lt,deltaTrend:_e,volTrend:le,exhaustion:Ne,absorption:Rt,initiation:Ke,vRecovery:Xe,pocMigration:oe,imbalances:fe}},[i]),S=({zone:j,rank:h})=>{var _,Be,Oe,ne,Ce,v,_e,le,Ne,it,Rt,Ke,Xe,Pe,oe,fe,Se,O,ee,ke;const z={approaching:"#ffaa00",at_zone:"#00ff88",watching:"#888",distant:"#555"},Ie=((_=j.readiness)==null?void 0:_.overall_score)>=80?"#00ff88":((Be=j.readiness)==null?void 0:Be.overall_score)>=60?"#ffaa00":"#ff4466";return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",border:`2px solid ${h===1?"#00ff88":"rgba(255,255,255,0.1)"}`,borderRadius:f?10:12,padding:f?12:20,marginBottom:f?12:16,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:f?"column":"row",justifyContent:"space-between",gap:f?10:0,marginBottom:f?12:16},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{background:h===1?"#00ff88":"#ffaa00",color:"#000",padding:f?"3px 10px":"4px 12px",borderRadius:20,fontSize:f?10:12,fontWeight:700},children:["#",h," PRIORITY"]}),e.jsx("h3",{style:{margin:"8px 0 0",color:"#fff",fontSize:f?15:18},children:j.name}),e.jsxs("span",{style:{color:"#888",fontSize:f?10:12},children:["Session ",j.session_number,"  ",(Oe=j.type)==null?void 0:Oe.toUpperCase()]})]}),e.jsxs("div",{style:{textAlign:f?"left":"right",display:"flex",flexDirection:f?"row":"column",alignItems:f?"center":"flex-end",gap:f?12:0},children:[e.jsx("div",{style:{color:z[j.status]||"#888",fontSize:f?11:14,fontWeight:600},children:(ne=j.status)==null?void 0:ne.toUpperCase()}),e.jsxs("div",{style:{color:"#fff",fontSize:f?18:24,fontFamily:"monospace",fontWeight:700},children:["$",(Ce=j.price)==null?void 0:Ce.toFixed(2)]}),e.jsxs("div",{style:{color:j.distance>0?"#00ff88":"#ff4466",fontSize:f?11:14},children:[j.distance>0?"+":"",(v=j.distance)==null?void 0:v.toFixed(2)," pts"]})]})]}),j.trade&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:f?12:16,marginBottom:f?12:16},children:[e.jsx("div",{style:{color:"#00aaff",fontSize:f?10:12,marginBottom:8,letterSpacing:1},children:"TRADE FRAMEWORK"}),e.jsxs("div",{style:{marginBottom:f?8:12},children:[e.jsx("span",{style:{color:"#888",fontSize:f?9:11},children:"ENTRY TRIGGER"}),e.jsx("div",{style:{color:"#fff",fontSize:f?11:13},children:j.trade.entry_trigger})]}),e.jsxs("div",{style:{display:"flex",flexDirection:f?"column":"row",gap:f?8:20,marginBottom:f?8:12},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:f?9:11},children:"TARGET 1"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:f?11:14},children:[(_e=j.trade.target1)==null?void 0:_e.name,": $",(Ne=(le=j.trade.target1)==null?void 0:le.price)==null?void 0:Ne.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:f?10:12},children:["+",(Rt=(it=j.trade.target1)==null?void 0:it.pts)==null?void 0:Rt.toFixed(2),"pts"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:f?9:11},children:"TARGET 2"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:f?11:14},children:[(Ke=j.trade.target2)==null?void 0:Ke.name,": $",(Pe=(Xe=j.trade.target2)==null?void 0:Xe.price)==null?void 0:Pe.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:f?10:12},children:["+",(fe=(oe=j.trade.target2)==null?void 0:oe.pts)==null?void 0:fe.toFixed(2),"pts"]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:f?9:11},children:"STOP"}),e.jsxs("div",{style:{color:"#ff4466",fontSize:f?11:14},children:["$",(O=(Se=j.trade.stop)==null?void 0:Se.price)==null?void 0:O.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:f?10:12},children:["-",(ke=(ee=j.trade.stop)==null?void 0:ee.pts)==null?void 0:ke.toFixed(2),"pts"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{color:"#888",fontSize:f?9:11},children:"R:R"}),e.jsxs("div",{style:{color:"#ffaa00",fontSize:f?16:18,fontWeight:700},children:[j.trade.r_ratio,":1"]})]})]})]}),j.readiness&&e.jsxs("div",{style:{background:Ie==="#00ff88"?"rgba(0,255,136,0.1)":Ie==="#ffaa00"?"rgba(255,170,0,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${Ie}`,borderRadius:8,padding:f?10:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx("span",{style:{color:Ie,fontWeight:600,fontSize:f?11:14},children:"SETUP READINESS"}),e.jsxs("span",{style:{color:Ie,fontWeight:700,fontSize:f?16:18},children:[j.readiness.overall_score,"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:f?3:4,fontSize:f?9:11},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:j.readiness.price_at_zone?"#00ff88":"#666"},children:[e.jsx("span",{children:j.readiness.price_at_zone?"":""}),e.jsx("span",{children:"Price at Zone"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:j.readiness.tpo_confirmation?"#00ff88":"#666"},children:[e.jsx("span",{children:j.readiness.tpo_confirmation?"":""}),e.jsx("span",{children:"2+ TPO"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:j.readiness.session_context?"#00ff88":"#666"},children:[e.jsx("span",{children:j.readiness.session_context?"":""}),e.jsx("span",{children:"Session OK"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:j.readiness.single_print_nearby?"#00ff88":"#666"},children:[e.jsx("span",{children:j.readiness.single_print_nearby?"":""}),e.jsx("span",{children:"Single Print"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:j.readiness.poc_alignment?"#00ff88":"#666"},children:[e.jsx("span",{children:j.readiness.poc_alignment?"":""}),e.jsx("span",{children:"POC Align"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:j.readiness.ib_intact?"#00ff88":"#666"},children:[e.jsx("span",{children:j.readiness.ib_intact?"":""}),e.jsx("span",{children:"IB Intact"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:P.signal==="bullish"?"#00ff88":P.signal==="preparing"?"#ffaa00":P.signal==="bearish"?"#ff4466":"#666"},children:[e.jsx("span",{children:P.signal==="bullish"||P.signal==="preparing"?"":""}),e.jsx("span",{children:P.phase!=="-"?`Phase ${P.phase}`:"Vol Scan"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:P.momentumScore>=60?"#00ff88":P.momentumScore>=40?"#ffaa00":"#ff4466"},children:[e.jsx("span",{children:P.momentumScore>=50?"":""}),e.jsxs("span",{children:["Momentum ",Math.round(P.momentumScore||50)]})]})]}),P.phase!=="-"&&e.jsx("div",{style:{marginTop:8,padding:"6px 8px",background:P.signal==="bullish"?"rgba(0,255,136,0.1)":P.signal==="preparing"?"rgba(255,170,0,0.1)":P.signal==="bearish"?"rgba(255,68,102,0.1)":"rgba(255,255,255,0.05)",borderRadius:6,border:`1px solid ${P.signal==="bullish"?"#00ff8840":P.signal==="preparing"?"#ffaa0040":P.signal==="bearish"?"#ff446640":"#ffffff20"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:f?9:10,fontWeight:600,color:P.signal==="bullish"?"#00ff88":P.signal==="preparing"?"#ffaa00":P.signal==="bearish"?"#ff4466":"#888"},children:["PHASE ",P.phase,": ",P.description]}),e.jsxs("span",{style:{fontSize:f?8:9,color:"#666",display:"flex",gap:8},children:[e.jsxs("span",{children:[" ",P.deltaTrend==="increasing"?"":P.deltaTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["Vol ",P.volTrend==="increasing"?"":P.volTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["POC ",P.pocMigration==="up"?"":P.pocMigration==="down"?"":""]})]})]})})]})]})},T=({zones:j,buyZones:h,currentPrice:z,compact:Ie=!1})=>{const _=[...j||[]].filter(le=>le.price>z).sort((le,Ne)=>Ne.price-le.price),Be=[...j||[]].filter(le=>le.price<=z).sort((le,Ne)=>Ne.price-le.price),Oe=new Set((h||[]).map(le=>le.id)),ne=le=>le.type==="ib_high"?"#ffaa00":le.type==="ib_low"?"#00ff88":le.type==="poc"?"#9370DB":le.type==="vah"?"#ff6b6b":le.type==="val"?"#4ECDC4":"#888",Ce=le=>Oe.has(le.id)?le.status==="at_zone"?{label:"TRIGGERED",color:"#00ff88",bg:"rgba(0,255,136,0.15)"}:le.status==="approaching"?{label:"APPROACHING",color:"#ffaa00",bg:"rgba(255,170,0,0.15)"}:{label:"VALID",color:"#00aaff",bg:"rgba(0,170,255,0.1)"}:null,v=le=>{const Ne=(h||[]).findIndex(it=>it.id===le.id);return Ne>=0?Ne+1:null},_e=le=>{var Pe;const Ne=Ce(le),it=v(le),Rt=le.price>z,Ke=le.price-z,Xe=Math.abs(Ke)<=2;return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 12px",margin:"2px 8px",borderRadius:6,background:Xe?"rgba(0,255,136,0.1)":Ne?Ne.bg:"transparent",borderLeft:`3px solid ${ne(le)}`,transition:"background 0.2s"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[it&&e.jsxs("span",{style:{background:it===1?"#00ff88":it===2?"#ffaa00":"#00aaff",color:"#000",fontSize:9,fontWeight:700,padding:"1px 5px",borderRadius:3},children:["#",it]}),e.jsx("span",{style:{color:"#fff",fontSize:11,fontWeight:it?600:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:le.name})]}),Ne&&e.jsx("span",{style:{fontSize:9,color:Ne.color,fontWeight:600,letterSpacing:.5},children:Ne.label})]}),e.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[e.jsx("div",{style:{color:"#fff",fontSize:12,fontFamily:"monospace",fontWeight:Xe?700:400},children:(Pe=le.price)==null?void 0:Pe.toFixed(2)}),e.jsxs("div",{style:{fontSize:10,fontFamily:"monospace",color:Rt?"#ff4466":"#00ff88"},children:[Rt?"+":"",Ke==null?void 0:Ke.toFixed(1)]})]})]},le.id)};return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#888",fontSize:11,letterSpacing:1},children:"PRICE LADDER"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{color:"#ff4466",fontSize:10},children:[_.length," above"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#00ff88",fontSize:10},children:[Be.length," below"]})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px 0"},children:[_.map(le=>_e(le)),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 12px",margin:"8px",borderRadius:8,background:"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, rgba(0,255,136,0.05) 50%, rgba(0,255,136,0.2) 100%)",border:"1px solid rgba(0,255,136,0.4)",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",left:12,display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 8px rgba(0,255,136,0.6)"}}),e.jsx("span",{style:{color:"#00ff88",fontSize:10,fontWeight:600},children:"LIVE"})]}),e.jsxs("span",{style:{color:"#00ff88",fontSize:16,fontFamily:"monospace",fontWeight:700,textShadow:"0 0 10px rgba(0,255,136,0.5)"},children:["$",z==null?void 0:z.toFixed(2)]}),e.jsx("span",{style:{position:"absolute",right:12,color:"#888",fontSize:10},children:"CURRENT"})]}),Be.map(le=>_e(le))]}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,0.08)",display:"flex",flexWrap:"wrap",gap:8,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ffaa00",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB High"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#00ff88",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB Low"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#9370DB",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"POC"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ff6b6b",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAH"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#4ECDC4",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAL"})]})]})]})};return l?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#888"},children:"Loading zones..."}):c||!t?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#ff4466"},children:c||"No zone data available"}):e.jsxs("div",{style:{display:"flex",flexDirection:f?"column":"row",gap:f?12:20,padding:f?12:20,height:f?"auto":"100%",overflow:f?"auto":"hidden",position:"relative"},children:[b&&!f&&e.jsxs("div",{onClick:()=>C(!1),style:{position:"fixed",top:80,right:20,background:"rgba(15, 15, 25, 0.98)",borderRadius:10,border:"1px solid rgba(0, 255, 136, 0.4)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 0 15px rgba(0, 255, 136, 0.15)",zIndex:1e3,cursor:"pointer",transition:"all 0.2s ease",padding:"12px 16px"},title:"Click to show Price Ladder",children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"LIVE PRICE"}),e.jsxs("div",{style:{fontSize:22,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace"},children:["$",((E=t==null?void 0:t.current_price)==null?void 0:E.toFixed(2))||"--"]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:6},children:"Click for ladder "})]}),e.jsxs("div",{style:{flex:f?"none":b?1:2,overflowY:f?"visible":"auto"},children:[e.jsx("div",{style:{display:"flex",flexDirection:f?"column":"row",justifyContent:"space-between",alignItems:f?"flex-start":"center",gap:f?8:0,marginBottom:f?12:16},children:e.jsx("h2",{style:{color:"#fff",margin:0,fontSize:f?16:24},children:f?"10pt Buy Setup":"Zone Participation - 10pt Buy Setup"})}),(()=>{var it,Rt,Ke,Xe,Pe;const j=(t==null?void 0:t.current_price)||(i==null?void 0:i.current_price)||0;t!=null&&t.all_zones;const h={monthly:{bias:"NEUTRAL",color:"#ffaa00"},weekly:{bias:"NEUTRAL",color:"#ffaa00"},dayOpen:{position:"--",diff:0,color:"#888"},weeklyOpen:{position:"--",diff:0,color:"#888"},daily:{ib:{level:"--",color:"#888"},pvaLocation:{status:"--",detail:"",color:"#888"},opening:{type:"--",color:"#888"}},critical:{abOverlap:{pct:"--",color:"#888"},buyingTail:!1,sellingTail:!1,tpoBias:{direction:"--",color:"#888"}}};if(i){const oe=i.pd_high||0,fe=i.pd_low||0,Se=(oe+fe)/2,O=i.week_high||0,ee=i.week_low||0,ke=i.weekly_open||0,lt=O-ee;let He=0,Le=[];if(O>0&&ee>0&&lt>0){const a=(j-ee)/lt*100;if(a>=90?(He+=40,Le.push("Near Week High")):a>=70?(He+=30,Le.push("Upper Week Range")):a<=10?(He-=40,Le.push("Near Week Low")):a<=30?(He-=30,Le.push("Lower Week Range")):Le.push("Mid Week Range"),ke>0){const m=j-ke;m<-lt*.1?(He+=35,Le.push("Below Weekly Open")):m>lt*.1?He-=25:He+=10}j>oe?(He+=25,Le.push("Above pd High")):j>Se?He+=15:j<fe?(He-=25,Le.push("Below pd Low")):j<Se&&(He-=15),He>=60?h.weekly={bias:"VERY BULLISH",color:"#00ff88",score:He,factors:Le}:He>=25?h.weekly={bias:"BULLISH",color:"#88ff88",score:He,factors:Le}:He<=-60?h.weekly={bias:"VERY BEARISH",color:"#ff4466",score:He,factors:Le}:He<=-25?h.weekly={bias:"BEARISH",color:"#ff8888",score:He,factors:Le}:h.weekly={bias:"NEUTRAL",color:"#ffaa00",score:He,factors:Le}}else j>oe?h.weekly={bias:"BULLISH",color:"#88ff88",factors:["Above pd High"]}:j<fe&&(h.weekly={bias:"BEARISH",color:"#ff8888",factors:["Below pd Low"]});const Je=i.rolling_20d_high||0,At=i.rolling_20d_low||0,J=Je-At,ot=(Je+At)/2;let rt=0,Qe=[];if(Je>0&&At>0&&J>0){const a=(j-At)/J*100;a>=90?(rt+=50,Qe.push("Near 20d High")):a>=75?(rt+=35,Qe.push("Upper 20d Range")):a>=60?rt+=20:a<=10?(rt-=50,Qe.push("Near 20d Low")):a<=25?(rt-=35,Qe.push("Lower 20d Range")):a<=40&&(rt-=20),O>0&&ee>0&&(O>=Je*.998?(rt+=30,Qe.push("Week at 20d High")):ee<=At*1.002?(rt-=30,Qe.push("Week at 20d Low")):O>ot?rt+=15:ee<ot&&(rt-=15)),ke>0&&(j>ke&&ke>At+J*.4?(rt+=20,Qe.push("Uptrend confirmed")):j<ke&&ke<Je-J*.4&&(rt-=20,Qe.push("Downtrend confirmed"))),rt>=50?h.monthly={bias:"VERY BULLISH",color:"#00ff88",score:rt,factors:Qe}:rt>=20?h.monthly={bias:"BULLISH",color:"#88ff88",score:rt,factors:Qe}:rt<=-50?h.monthly={bias:"VERY BEARISH",color:"#ff4466",score:rt,factors:Qe}:rt<=-20?h.monthly={bias:"BEARISH",color:"#ff8888",score:rt,factors:Qe}:h.monthly={bias:"NEUTRAL",color:"#ffaa00",score:rt,factors:Qe}}else if(O>0&&ee>0){const a=(j-ee)/lt*100;a>=80?h.monthly={bias:"BULLISH",color:"#88ff88",factors:["Near Week High"]}:a<=20&&(h.monthly={bias:"BEARISH",color:"#ff8888",factors:["Near Week Low"]})}const re=i.day_open||0;if(re>0){const a=j-re;a<-2?h.dayOpen={position:"BELOW",diff:a,price:re,color:"#00ff88",bias:"BULLISH"}:a>2?h.dayOpen={position:"ABOVE",diff:a,price:re,color:"#ff4466",bias:"BEARISH"}:h.dayOpen={position:"AT",diff:a,price:re,color:"#ffaa00",bias:"NEUTRAL"}}if(ke>0){const a=j-ke;a<-5?h.weeklyOpen={position:"BELOW",diff:a,price:ke,color:"#00ff88",bias:"BULLISH"}:a>5?h.weeklyOpen={position:"ABOVE",diff:a,price:ke,color:"#ff4466",bias:"BEARISH"}:h.weeklyOpen={position:"AT",diff:a,price:ke,color:"#ffaa00",bias:"NEUTRAL"}}}if(r){const oe=r.ib_range||0,fe=r.avg_daily_range||50,Se=fe>0?oe/fe*100:0;oe===0||!r.ib_complete?h.daily.ib={level:"FORMING",color:"#888",pct:"--"}:Se<35?h.daily.ib={level:"LOW",color:"#00ff88",pct:Se.toFixed(0)}:Se<=75?h.daily.ib={level:"MEDIUM",color:"#ffaa00",pct:Se.toFixed(0)}:h.daily.ib={level:"HIGH",color:"#ff4466",pct:Se.toFixed(0)}}if(i&&r){const oe=i.pd_high||0,fe=i.pd_low||0,Se=oe-fe,O=fe+Se*.85,ee=fe+Se*.15,ke=i.day_open||j,lt=i.session_open||ke;if(j>=ee&&j<=O){const He=lt>=ee&&lt<=O;h.daily.pvaLocation={status:"IN",detail:He?"Accepted":"Returned",color:"#00aaff"}}else if(j>O){const He=j>O+5;h.daily.pvaLocation={status:"OUT",detail:He?"Accepted Above":"Testing VAH",color:He?"#00ff88":"#ffaa00"}}else{const He=j<ee-5;h.daily.pvaLocation={status:"OUT",detail:He?"Accepted Below":"Testing VAL",color:He?"#ff4466":"#ffaa00"}}(Math.abs(j-O)<=3||Math.abs(j-ee)<=3)&&(h.daily.pvaLocation.status="DYNAMIC",h.daily.pvaLocation.color="#ffaa00")}if(r!=null&&r.open_type){const oe=((it=r.open_type)==null?void 0:it.toUpperCase())||"DEVELOPING",fe={OD:{name:"OD",full:"Open Drive",color:"#00ff88"},OPEN_DRIVE:{name:"OD",full:"Open Drive",color:"#00ff88"},OTD:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},OPEN_TEST_DRIVE:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},ORR:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OPEN_REJECTION_REVERSE:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OA:{name:"OA",full:"Open Auction",color:"#ffaa00"},OPEN_AUCTION:{name:"OA",full:"Open Auction",color:"#ffaa00"},DEVELOPING:{name:"DEV",full:"Developing",color:"#888"}},Se=fe[oe]||fe.DEVELOPING;h.daily.opening={type:Se.name,full:Se.full,color:Se.color}}if((r==null?void 0:r.ab_overlap)!==void 0&&(r==null?void 0:r.ab_overlap)!==null){const oe=r.ab_overlap;oe<33?h.critical.abOverlap={pct:oe.toFixed(0),color:"#00ff88",level:"<33%"}:oe<=50?h.critical.abOverlap={pct:oe.toFixed(0),color:"#ffaa00",level:"33-50%"}:h.critical.abOverlap={pct:oe.toFixed(0),color:"#ff4466",level:">50%"}}if(r){const oe=r.single_prints_count||0,fe=(i==null?void 0:i.day_high)||0,Se=(i==null?void 0:i.day_low)||0,O=r.poc||j;oe>0&&(O>(fe+Se)/2?h.critical.buyingTail=!0:h.critical.sellingTail=!0)}if(r){const oe=r.poc||0,fe=r.vah||0,Se=r.val||0,O=(fe+Se)/2;oe>O+2?h.critical.tpoBias={direction:"BULLISH",color:"#00ff88"}:oe<O-2?h.critical.tpoBias={direction:"BEARISH",color:"#ff4466"}:h.critical.tpoBias={direction:"NEUTRAL",color:"#ffaa00"}}const z={rank1:{name:"MACRO",points:3,factors:[],total:0,direction:"NEUTRAL"},rank2:{name:"VOLUME",points:2,factors:[],total:0,direction:"NEUTRAL"},rank3:{name:"STRUCTURE",points:2,factors:[],total:0,direction:"NEUTRAL"},rank4:{name:"TIMING",points:1,factors:[],total:0,direction:"NEUTRAL"},conflicts:[],totalScore:0,confidence:"LOW",positionSize:"25%",direction:"NEUTRAL"};if(i){const oe=i.week_high||0,fe=i.week_low||0,Se=oe-fe;if(Se>0){const O=fe+Se*.7,ee=fe+Se*.3;j>O?(z.rank1.factors.push({name:"Weekly VA",signal:"LONG",reason:"Price above weekly VAH",pts:3}),z.rank1.total+=3):j<ee?(z.rank1.factors.push({name:"Weekly VA",signal:"SHORT",reason:"Price below weekly VAL",pts:-3}),z.rank1.total-=3):z.rank1.factors.push({name:"Weekly VA",signal:"NEUTRAL",reason:"Price inside weekly VA",pts:0})}}if(i){const oe=i.rolling_20d_high||0,fe=i.rolling_20d_low||0,Se=oe-fe;if(Se>0){const O=fe+Se*.75,ee=fe+Se*.25;j>O?(z.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"LONG",reason:"At multi-day highs (breakout zone)",pts:3}),z.rank1.total+=3):j<ee?(z.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"SHORT",reason:"At multi-day lows (breakdown zone)",pts:-3}),z.rank1.total-=3):z.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"NEUTRAL",reason:"Mid-range (fair value)",pts:0})}}if((i==null?void 0:i.weekly_open)>0){const oe=i.weekly_open,fe=j-oe;fe>10?(z.rank1.factors.push({name:"Composite VPOC",signal:"LONG",reason:`+${fe.toFixed(0)}pts above weekly open`,pts:3}),z.rank1.total+=3):fe<-10?(z.rank1.factors.push({name:"Composite VPOC",signal:"SHORT",reason:`${fe.toFixed(0)}pts below weekly open`,pts:-3}),z.rank1.total-=3):z.rank1.factors.push({name:"Composite VPOC",signal:"NEUTRAL",reason:"Near weekly open",pts:0})}if(z.rank1.direction=z.rank1.total>0?"LONG":z.rank1.total<0?"SHORT":"NEUTRAL",i){const oe=i.day_open||0,fe=i.day_high||0,Se=i.day_low||0;if(oe>0){const O=fe-oe,ee=oe-Se;O>ee*1.5?(z.rank2.factors.push({name:"Delta Direction",signal:"LONG",reason:"Buyers dominating (up move > down)",pts:2}),z.rank2.total+=2):ee>O*1.5?(z.rank2.factors.push({name:"Delta Direction",signal:"SHORT",reason:"Sellers dominating (down move > up)",pts:-2}),z.rank2.total-=2):z.rank2.factors.push({name:"Delta Direction",signal:"NEUTRAL",reason:"Balanced volume",pts:0})}}if(r){const oe=r.poc||0,fe=r.vah||0,Se=r.val||0;if(oe>0&&fe>0&&Se>0){const O=fe-Se,ee=(oe-Se)/O;ee>.65?(z.rank2.factors.push({name:"Daily HVN",signal:"LONG",reason:"POC in upper VA (HVN above)",pts:2}),z.rank2.total+=2):ee<.35?(z.rank2.factors.push({name:"Daily HVN",signal:"SHORT",reason:"POC in lower VA (HVN below)",pts:-2}),z.rank2.total-=2):z.rank2.factors.push({name:"Daily HVN",signal:"NEUTRAL",reason:"POC centered",pts:0})}}if(r!=null&&r.vpoc&&(r!=null&&r.poc)){const oe=r.vpoc,fe=r.poc;if(Math.abs(oe-fe)<3){const O=oe>j;z.rank2.factors.push({name:"VPOC/POC Align",signal:O?"SHORT":"LONG",reason:`VPOC & POC aligned at ${oe.toFixed(0)} (strong ${O?"resistance":"support"})`,pts:O?-2:2}),z.rank2.total+=O?-2:2}else r.vpoc>r.poc?(z.rank2.factors.push({name:"VPOC/POC Align",signal:"LONG",reason:"VPOC above POC (volume leads up)",pts:2}),z.rank2.total+=2):(z.rank2.factors.push({name:"VPOC/POC Align",signal:"SHORT",reason:"VPOC below POC (volume leads down)",pts:-2}),z.rank2.total-=2)}else if(r!=null&&r.poc){const oe=r.poc>j?"SHORT":"LONG";z.rank2.factors.push({name:"POC Location",signal:oe,reason:`POC at ${(Rt=r.poc)==null?void 0:Rt.toFixed(0)} (${oe==="LONG"?"support":"resistance"})`,pts:oe==="LONG"?1:-1}),z.rank2.total+=oe==="LONG"?1:-1}if(z.rank2.direction=z.rank2.total>0?"LONG":z.rank2.total<0?"SHORT":"NEUTRAL",r&&(r.single_prints_count||0)>0&&(h.critical.buyingTail&&(z.rank3.factors.push({name:"Buying Tail",signal:"LONG",reason:"Single prints at lows (buyer aggression)",pts:2}),z.rank3.total+=2),h.critical.sellingTail&&(z.rank3.factors.push({name:"Selling Tail",signal:"SHORT",reason:"Single prints at highs (seller aggression)",pts:-2}),z.rank3.total-=2)),r){const oe=r.poc||0,fe=r.vah||0,Se=r.val||0,O=(i==null?void 0:i.day_high)||fe,ee=(i==null?void 0:i.day_low)||Se,ke=O-ee;if(ke>0){const lt=O-fe,He=Se-ee,Le=fe-Se,Je=(oe-ee)/ke;let At="D",J="NEUTRAL",ot="Balanced D-shape profile",rt=0;Je<.4&&lt>Le*.3?(At="P",J="LONG",ot="P-shape (accumulation, buyers loading)",rt=2):Je>.6&&He>Le*.3?(At="b",J="SHORT",ot="b-shape (distribution, sellers unloading)",rt=-2):r.double_distribution&&(At="B",J="NEUTRAL",ot="B-shape (double distribution, range bound)",rt=0),z.rank3.factors.push({name:`Profile Shape (${At})`,signal:J,reason:ot,pts:rt}),z.rank3.total+=rt}}if(r&&i){const oe=r.ib_high||0,fe=r.ib_low||0,Se=i.day_high||0,O=i.day_low||0;if(oe>0&&fe>0){const ee=Se>oe+2,ke=O<fe-2;ee&&!ke?(z.rank3.factors.push({name:"Range Extension",signal:"LONG",reason:"IB broken to upside",pts:2}),z.rank3.total+=2):ke&&!ee?(z.rank3.factors.push({name:"Range Extension",signal:"SHORT",reason:"IB broken to downside",pts:-2}),z.rank3.total-=2):ee&&ke?z.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"IB broken both ways",pts:0}):z.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"Inside IB",pts:0})}}if(z.rank3.direction=z.rank3.total>0?"LONG":z.rank3.total<0?"SHORT":"NEUTRAL",r!=null&&r.open_type){const oe=((Ke=r.open_type)==null?void 0:Ke.toUpperCase())||"",fe=r.open_direction||"";if(oe.includes("OD")||oe.includes("DRIVE")){const Se=fe==="up"?1:fe==="down"?-1:0;z.rank4.factors.push({name:"Open Type",signal:Se>0?"LONG":Se<0?"SHORT":"NEUTRAL",reason:`Open Drive ${fe||""}`,pts:Se}),z.rank4.total+=Se}else if(oe.includes("ORR")||oe.includes("REJECTION")){const Se=fe==="up"?-1:fe==="down"?1:0;z.rank4.factors.push({name:"Open Type",signal:Se>0?"LONG":Se<0?"SHORT":"NEUTRAL",reason:"Open Rejection Reverse",pts:Se}),z.rank4.total+=Se}else if(oe.includes("OTD")||oe.includes("TEST")){const Se=fe==="up"?1:fe==="down"?-1:0;z.rank4.factors.push({name:"Open Type",signal:Se>0?"LONG":Se<0?"SHORT":"NEUTRAL",reason:`Open Test Drive ${fe||""}`,pts:Se*.5}),z.rank4.total+=Se*.5}}if(h.daily.ib.level!=="--"&&h.daily.ib.level!=="FORMING")if(h.daily.ib.level==="LOW"){const oe=z.rank3.direction!=="NEUTRAL"?z.rank3.direction:z.rank2.direction!=="NEUTRAL"?z.rank2.direction:"NEUTRAL";oe==="LONG"?(z.rank4.factors.push({name:"IB Width",signal:"LONG",reason:"Low IB + uptrend = expansion up",pts:1}),z.rank4.total+=1):oe==="SHORT"?(z.rank4.factors.push({name:"IB Width",signal:"SHORT",reason:"Low IB + downtrend = expansion down",pts:-1}),z.rank4.total-=1):z.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"Low IB (breakout pending)",pts:0})}else h.daily.ib.level==="HIGH"&&z.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"High IB (rotational day)",pts:0});if((r==null?void 0:r.single_prints_count)>0){const oe=r.single_print_level||0;oe>j+5?(z.rank4.factors.push({name:"Single Prints",signal:"LONG",reason:`Singles above at ${oe.toFixed(0)} (target)`,pts:1}),z.rank4.total+=1):oe<j-5&&(z.rank4.factors.push({name:"Single Prints",signal:"SHORT",reason:`Singles below at ${oe.toFixed(0)} (target)`,pts:-1}),z.rank4.total-=1)}z.rank4.direction=z.rank4.total>0?"LONG":z.rank4.total<0?"SHORT":"NEUTRAL";const Ie=[{rank:1,name:"MACRO",dir:z.rank1.direction,total:z.rank1.total},{rank:2,name:"VOLUME",dir:z.rank2.direction,total:z.rank2.total},{rank:3,name:"STRUCTURE",dir:z.rank3.direction,total:z.rank3.total},{rank:4,name:"TIMING",dir:z.rank4.direction,total:z.rank4.total}].filter(oe=>oe.dir!=="NEUTRAL");for(let oe=0;oe<Ie.length;oe++)for(let fe=oe+1;fe<Ie.length;fe++)Ie[oe].dir!==Ie[fe].dir&&z.conflicts.push({higher:Ie[oe],lower:Ie[fe],resolution:`${Ie[oe].name} (Rank ${Ie[oe].rank}) overrides ${Ie[fe].name}`});z.totalScore=z.rank1.total+z.rank2.total+z.rank3.total+z.rank4.total;const _=Math.abs(z.totalScore);_>=12?(z.confidence="VERY HIGH",z.positionSize="100%+",z.confidenceColor="#00ff88"):_>=8?(z.confidence="HIGH",z.positionSize="100%",z.confidenceColor="#88ff88"):_>=5?(z.confidence="MED-HIGH",z.positionSize="75%",z.confidenceColor="#ffdd00"):_>=2?(z.confidence="MEDIUM",z.positionSize="50%",z.confidenceColor="#ffaa00"):_>=0?(z.confidence="LOW",z.positionSize="25% or SKIP",z.confidenceColor="#ff8844"):(z.confidence="AVOID",z.positionSize="NO TRADE",z.confidenceColor="#ff4466"),z.direction=z.totalScore>0?"LONG":z.totalScore<0?"SHORT":"NEUTRAL";let Be=0,Oe=0;if(h.monthly.bias.includes("BULLISH")&&(Be+=h.monthly.bias.includes("VERY")?15:10),h.monthly.bias.includes("BEARISH")&&(Oe+=h.monthly.bias.includes("VERY")?15:10),h.weekly.bias.includes("BULLISH")&&(Be+=h.weekly.bias.includes("VERY")?15:10),h.weekly.bias.includes("BEARISH")&&(Oe+=h.weekly.bias.includes("VERY")?15:10),h.dayOpen.bias==="BULLISH"&&(Be+=10),h.dayOpen.bias==="BEARISH"&&(Oe+=10),h.weeklyOpen.bias==="BULLISH"&&(Be+=12),h.weeklyOpen.bias==="BEARISH"&&(Oe+=12),h.daily.ib.level==="LOW"&&(Be+=8),h.daily.ib.level==="HIGH"&&(Oe+=5),(Xe=h.daily.pvaLocation.detail)!=null&&Xe.includes("Above")&&(Be+=10),(Pe=h.daily.pvaLocation.detail)!=null&&Pe.includes("Below")&&(Oe+=10),h.daily.pvaLocation.status==="IN"&&(Be+=3,Oe+=3),h.daily.opening.type==="OD"){const oe=r==null?void 0:r.open_direction;oe==="up"?Be+=12:oe==="down"&&(Oe+=12)}if(h.daily.opening.type==="ORR"){const oe=r==null?void 0:r.open_direction;oe==="up"?Oe+=8:oe==="down"&&(Be+=8)}if(h.critical.abOverlap.pct!=="--"){const oe=parseFloat(h.critical.abOverlap.pct);oe<33&&(Be+=5),oe>50&&(Oe+=3)}h.critical.buyingTail&&(Be+=8),h.critical.sellingTail&&(Oe+=8),h.critical.tpoBias.direction==="BULLISH"&&(Be+=7),h.critical.tpoBias.direction==="BEARISH"&&(Oe+=7);const ne=Be+Oe,Ce=ne>0?Math.round(Be/ne*100):50,v=100-Ce;let _e="NEUTRAL",le="#ffaa00",Ne=50;return Ce>=65?(_e=Ce>=80?"VERY BULLISH":"BULLISH",le=Ce>=80?"#00ff88":"#88ff88",Ne=Ce):v>=65?(_e=v>=80?"VERY BEARISH":"BEARISH",le=v>=80?"#ff4466":"#ff8888",Ne=v):Ne=Math.max(Ce,v),e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:f?10:12,border:`2px solid ${le}40`,padding:f?12:16,marginBottom:f?12:16},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#888",letterSpacing:1,marginBottom:4},children:"SIGNAL ENGINE"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:f?18:22,fontWeight:700,color:le},children:_e}),e.jsxs("span",{style:{fontSize:12,padding:"3px 8px",background:`${le}25`,borderRadius:4,color:le,fontWeight:600},children:[Ne,"%"]})]})]})}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden",marginBottom:16},children:[e.jsxs("div",{onClick:()=>p(!Ue),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:f?12:16,cursor:"pointer",background:`linear-gradient(135deg, ${z.confidenceColor}12 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:Ue?`1px solid ${z.confidenceColor}30`:"none",transition:"all 0.2s ease"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO HTF ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:f?20:26,fontWeight:800,color:z.direction==="LONG"?"#00ff88":z.direction==="SHORT"?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:[z.totalScore>0?"+":"",z.totalScore]}),e.jsx("span",{style:{fontSize:f?14:16,fontWeight:700,color:z.direction==="LONG"?"#00ff88":z.direction==="SHORT"?"#ff4466":"#ffaa00"},children:z.direction})]})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:z.confidenceColor,marginBottom:2},children:z.confidence}),e.jsxs("div",{style:{fontSize:10,padding:"3px 8px",background:`${z.confidenceColor}25`,borderRadius:4,color:z.confidenceColor,fontWeight:600},children:["Size: ",z.positionSize]})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:Ue?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]})]}),Ue&&e.jsxs("div",{style:{padding:f?12:16},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:f?"1fr 1fr":"1fr 1fr 1fr 1fr",gap:8,marginBottom:12},children:[z.rank1,z.rank2,z.rank3,z.rank4].map((oe,fe)=>{var ke,lt;const Se=fe+1,O=oe.direction==="LONG"?"#00ff88":oe.direction==="SHORT"?"#ff4466":"#666",ee=Math.min(100,Math.abs(oe.total)*(Se===1?15:Se<=3?20:30));return e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"8px 10px",borderLeft:`3px solid ${O}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsxs("span",{style:{fontSize:8,color:"#888",letterSpacing:.5},children:["R",Se," ",oe.name]}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:O,fontFamily:"monospace"},children:[oe.total>0?"+":"",oe.total]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${ee}%`,background:O,borderRadius:2}})}),oe.factors.length>0&&e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(ke=oe.factors[0])==null?void 0:ke.name,": ",(lt=oe.factors[0])==null?void 0:lt.signal]})]},oe.name)})}),z.conflicts.length>0&&e.jsxs("details",{style:{padding:"8px 10px",background:"rgba(255,170,0,0.15)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:[e.jsxs("summary",{style:{cursor:"pointer",userSelect:"none",listStyle:"none"},children:[e.jsx("span",{style:{fontWeight:600},children:"Conflict: "}),z.conflicts[0].resolution,z.conflicts.length>1&&e.jsxs("span",{style:{marginLeft:8,opacity:.8},children:["(+",z.conflicts.length-1," more) "]})]}),z.conflicts.length>1&&e.jsx("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid rgba(255,170,0,0.3)"},children:z.conflicts.slice(1).map((oe,fe)=>e.jsxs("div",{style:{marginBottom:4,paddingLeft:8},children:[" ",oe.resolution]},fe))})]})]})]}),(()=>{var a,m,F,B;const oe=(A,H,se)=>Math.min(Math.max(A,H),se),fe=new Date,Se=new Date(fe.toLocaleString("en-US",{timeZone:"America/New_York"})),O=Se.getHours(),ee=Se.getMinutes(),lt=O*100+ee<820,He=A=>A>=75?{score:4,label:"EXTREMELY BULLISH",color:"#00ff88"}:A>=50?{score:3,label:"VERY BULLISH",color:"#88ff88"}:A>=25?{score:1,label:"CHECK ENTRY",color:"#ffaa00"}:{score:0,label:"WAIT",color:"#ff4466"},Le=(i==null?void 0:i.day_high)||0,Je=(i==null?void 0:i.day_low)||0,At=Le-Je,J=lt?j:(r==null?void 0:r.ib_open)||(i==null?void 0:i.day_open)||j,ot=At>0?oe((Le-J)/At*100,0,100):50,rt=He(ot),Qe=rt.label,re=rt.color;return`${rt.score}`,e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3,background:"rgba(20,20,28,0.6)",borderRadius:12,padding:12,border:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${h.monthly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${h.monthly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"MONTHLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.monthly.color,padding:"5px 10px",background:`${h.monthly.color}20`,borderRadius:5,display:"inline-block"},children:h.monthly.bias}),h.monthly.factors&&h.monthly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:h.monthly.factors[0]})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${h.weekly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${h.weekly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"WEEKLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.weekly.color,padding:"5px 10px",background:`${h.weekly.color}20`,borderRadius:5,display:"inline-block"},children:h.weekly.bias}),h.weekly.factors&&h.weekly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:h.weekly.factors[0]})]}),e.jsxs("div",{onClick:()=>y(!w),style:{background:`linear-gradient(135deg, ${re}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${w?re:re+"30"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:4,marginBottom:6},children:[e.jsx("span",{style:{fontSize:9,color:"#888",letterSpacing:1},children:"TPO DAILY"}),e.jsx("span",{style:{fontSize:9,color:"#666",transform:w?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.critical.tpoBias.color||re,padding:"5px 10px",background:`${re}20`,borderRadius:5,display:"inline-block"},children:h.critical.tpoBias.direction||"NEUTRAL"}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:"IB, PVA, Opening"})]})]})}),e.jsxs("div",{onClick:()=>Y(!W),style:{flex:1,background:"linear-gradient(135deg, rgba(0,170,255,0.15) 0%, rgba(0,0,0,0.4) 100%)",borderRadius:12,padding:16,border:`1px solid ${W?"#00aaff":"rgba(0,170,255,0.3)"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8},children:[e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1},children:"INTRADAY"}),e.jsx("span",{style:{fontSize:12,color:"#666",transform:W?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",padding:"6px 14px",background:"rgba(0,170,255,0.2)",borderRadius:6,marginBottom:8},children:Qe}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:[ot.toFixed(0),"% from high"]})]})]}),(w||W)&&e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3},children:w&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(0,170,255,0.3)",padding:12},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:h.dayOpen.bias!=="NEUTRAL"?`1px solid ${h.dayOpen.color}40`:"none"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"DAY OPEN (18:00 ET)"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:f?14:16,fontWeight:700,color:h.dayOpen.color},children:h.dayOpen.position}),h.dayOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(a=h.dayOpen.price)==null?void 0:a.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:h.dayOpen.color},children:["(",h.dayOpen.diff>0?"+":"",(m=h.dayOpen.diff)==null?void 0:m.toFixed(1),"pts)"]})]})]}),h.dayOpen.bias&&h.dayOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:h.dayOpen.color,marginTop:4},children:h.dayOpen.bias==="BULLISH"?"Buying below open":"Selling above open"})]}),e.jsxs("div",{style:{background:h.weeklyOpen.position==="--"?"rgba(50,50,60,0.5)":"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:h.weeklyOpen.bias&&h.weeklyOpen.bias!=="NEUTRAL"?`1px solid ${h.weeklyOpen.color}40`:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"WEEKLY OPEN (Sun 18:00)"}),h.weeklyOpen.position==="--"?e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:f?13:14,fontWeight:600,color:"#666"},children:"N/A"}),e.jsx("div",{style:{fontSize:9,color:"#555",marginTop:4},children:"Not tracked yet - sets on Sunday 18:00 ET"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:f?14:16,fontWeight:700,color:h.weeklyOpen.color},children:h.weeklyOpen.position}),h.weeklyOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(F=h.weeklyOpen.price)==null?void 0:F.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:h.weeklyOpen.color},children:["(",h.weeklyOpen.diff>0?"+":"",(B=h.weeklyOpen.diff)==null?void 0:B.toFixed(1),"pts)"]})]})]}),h.weeklyOpen.bias&&h.weeklyOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:h.weeklyOpen.color,marginTop:4},children:h.weeklyOpen.bias==="BULLISH"?"Buying below weekly open":"Selling above weekly open"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:f?"1fr 1fr":"1fr 1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"INITIAL BALANCE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[e.jsx("span",{style:{fontSize:f?14:16,fontWeight:700,color:h.daily.ib.color},children:h.daily.ib.level}),h.daily.ib.pct!=="--"&&e.jsxs("span",{style:{fontSize:11,color:"#666"},children:[h.daily.ib.pct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"LOCATION wrt PVA"}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:f?14:16,fontWeight:700,color:h.daily.pvaLocation.color},children:h.daily.pvaLocation.status}),h.daily.pvaLocation.detail&&e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:2},children:h.daily.pvaLocation.detail})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",gridColumn:f?"1 / -1":"auto"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"OPENING TYPE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[e.jsx("span",{style:{fontSize:f?14:16,fontWeight:700,color:h.daily.opening.color},children:h.daily.opening.type}),h.daily.opening.full&&e.jsx("span",{style:{fontSize:10,color:"#666"},children:h.daily.opening.full})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"AB OVERLAP"}),e.jsx("div",{style:{fontSize:f?14:16,fontWeight:700,color:h.critical.abOverlap.color},children:h.critical.abOverlap.pct!=="--"?`${h.critical.abOverlap.pct}%`:"--"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TAIL/EXCESS"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:h.critical.buyingTail?"#00ff8830":"rgba(255,255,255,0.05)",color:h.critical.buyingTail?"#00ff88":"#555"},children:"BUY"}),e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:h.critical.sellingTail?"#ff446630":"rgba(255,255,255,0.05)",color:h.critical.sellingTail?"#ff4466":"#555"},children:"SELL"})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO BIAS"}),e.jsx("div",{style:{fontSize:f?14:16,fontWeight:700,color:h.critical.tpoBias.color},children:h.critical.tpoBias.direction})]})]})]})}),e.jsx("div",{style:{flex:1},children:W&&(()=>{const A=new Date,H=new Date(A.toLocaleString("en-US",{timeZone:"America/New_York"})),se=H.getHours(),$=H.getMinutes(),ye=se*100+$,vt=820,ct=930,wt=ye<vt,kt=ye>=vt&&ye<ct,sn=ye>=ct,nt=(i==null?void 0:i.current_price)||(t==null?void 0:t.current_price)||0;i!=null&&i.day_high,i!=null&&i.day_low,i!=null&&i.day_open;const xt=(r==null?void 0:r.ib_high)||0,Ft=(r==null?void 0:r.ib_low)||0,tn=(r==null?void 0:r.ib_range)||xt-Ft||0,Kt=(r==null?void 0:r.ib_complete)||sn,gn=(r==null?void 0:r.vwap)||(i==null?void 0:i.vwap)||0,_n=gn>0?nt-gn:0,ri=_n>=0,$n=(r==null?void 0:r.rth_vwap)||(i==null?void 0:i.rth_vwap)||0,Yt=$n>0?nt-$n:0,xn=Yt>=0,si=(i==null?void 0:i.endedSessions)||(i==null?void 0:i.ended_sessions)||{};let Pn=0,Bn=999999;["pre_asia","asia_open","asia_close","low_volume","london","pre_us"].forEach(Zn=>{const zn=si[Zn];(zn==null?void 0:zn.high)>0&&(Pn=Math.max(Pn,zn.high)),(zn==null?void 0:zn.low)>0&&(zn==null?void 0:zn.low)<999999&&(Bn=Math.min(Bn,zn.low))}),Bn===999999&&(Bn=0);const Tn=Pn||(i==null?void 0:i.overnight_high)||0,Wn=Bn||(i==null?void 0:i.overnight_low)||0,In=Tn>0&&Wn>0?Tn-Wn:0;i!=null&&i.us_ib_vwap;const Jn=nt>Tn;let En=50,Qn=0;In>0&&(En=(Tn-nt)/In*100,Qn=Tn-nt);const _i=Tn-nt,Ci=nt-Wn,Wi=In>0,Gi=nt>xt;let li=0,ai=0;const Fi=Kt&&tn>0&&xt>0&&Ft>0;Fi&&nt>0&&(li=xt-nt,ai=nt-Ft);const Yi=(Zn=>Zn<=20?{label:"V.BULLISH",color:"#00ff88"}:Zn<=40?{label:"BULLISH",color:"#88ff88"}:Zn>=80?{label:"V.BEARISH",color:"#ff4466"}:Zn>=60?{label:"BEARISH",color:"#ff8888"}:{label:"NEUTRAL",color:"#ffaa00"})(En),Xi=H.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(245,158,11,0.08) 100%)",borderRadius:10,border:`1px solid ${re}`,padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#fff",letterSpacing:1},children:"DAY BIAS ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:9,color:"#888",fontFamily:"monospace"},children:[Xi," ET"]}),e.jsx("span",{style:{fontSize:8,padding:"3px 8px",borderRadius:4,background:wt?"rgba(255,170,0,0.2)":kt?"rgba(0,170,255,0.2)":"rgba(0,255,136,0.2)",color:wt?"#ffaa00":kt?"#00aaff":"#00ff88",fontWeight:600},children:wt?"OVERNIGHT":kt?"IB FORMING":"RTH"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(59,130,246,0.2)"},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#3B82F6",marginBottom:8},children:["A. O/N  8:20 ",wt&&e.jsx("span",{style:{color:"#ffaa00",fontWeight:400},children:"(building)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"O/N RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#3B82F6"},children:In>0?In.toFixed(1):"--"}),e.jsx("div",{style:{fontSize:7,color:"#555"},children:Tn>0&&Wn>0?`${Wn.toFixed(1)}-${Tn.toFixed(1)}`:""})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"% FROM HIGH"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Jn?"#00ff88":Yi.color},children:Wi?Jn?"ABOVE":`${Math.max(0,En).toFixed(0)}%`:"--"}),e.jsx("div",{style:{fontSize:10,fontWeight:600,color:Qn>=0?"#ff4466":"#00ff88"},children:Wi?`${Qn>=0?"-":"+"}${Math.abs(Qn).toFixed(1)} pts`:""})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"VWAP"}),gn>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:ri?"#ff4466":"#00ff88"},children:[ri?"+":"-",Math.abs(_n).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:ri?"#ff4466":"#00ff88"},children:ri?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:_i>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:_i>=0?"#00ff88":"#00aaff"},children:[_i>=0?"+":"",_i.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:Ci>=0?"DOWNSIDE":"EXT LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:Ci>=0?"#ff4466":"#00aaff"},children:[Ci>=0?"-":"+",Math.abs(Ci).toFixed(0)]})]})]})]}),e.jsxs("div",{style:{background:sn?"rgba(245,158,11,0.1)":"rgba(255,255,255,0.03)",borderRadius:8,padding:12,border:`1px solid ${sn?"rgba(245,158,11,0.2)":"rgba(255,255,255,0.08)"}`},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:sn?"#F59E0B":"#666",marginBottom:8},children:["B. IB  9:30 ",wt&&e.jsx("span",{style:{color:"#666",fontWeight:400},children:"(waiting)"}),kt&&e.jsx("span",{style:{color:"#00aaff",fontWeight:400},children:"(forming)"})]}),sn&&Fi?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#F59E0B"},children:tn.toFixed(0)})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"FROM IB HIGH"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:Gi?"#00ff88":"#ff4466"},children:[Gi?"+":"",(nt-xt).toFixed(0)," pts"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"RTH VWAP"}),$n>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:xn?"#ff4466":"#00ff88"},children:[xn?"+":"-",Math.abs(Yt).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:xn?"#ff4466":"#00ff88"},children:xn?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:li>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:li>=0?"#00ff88":"#00aaff"},children:[li>=0?"+":"",li.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:ai>=0?"EXT LOW":"DOWNSIDE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:ai>=0?"#ff4466":"#00aaff"},children:[ai>=0?"-":"+",Math.abs(ai).toFixed(0)]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:100,color:"#555"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,opacity:.5},children:wt?"":""}),e.jsx("div",{style:{fontSize:11},children:wt?"Starts 8:20 ET":`IB: ${tn.toFixed(0)} pts`})]})]})]})]})})()})]}),e.jsxs("div",{style:{marginBottom:12,marginTop:12,background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>L(!u),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:`linear-gradient(135deg, ${le}15 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:u?"1px solid rgba(255,255,255,0.08)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:11,fontWeight:600,color:le,letterSpacing:"0.1em"},children:"NON-DISCRETIONARY ANALYSIS"}),!u&&e.jsx("span",{style:{fontSize:10,color:"#666",fontStyle:"italic"},children:"(Detailed reasoning for bias)"})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:u?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),u&&e.jsx("div",{style:{padding:"14px 16px",background:`linear-gradient(135deg, ${le}08 0%, transparent 50%)`},children:e.jsx("div",{style:{fontSize:f?12:13,color:"#bbb",lineHeight:1.85},children:(()=>{var $,ye,vt;const A=[];if(h.monthly.bias!=="NEUTRAL"||h.weekly.bias!=="NEUTRAL"){if(h.weekly.bias!=="NEUTRAL"){const ct=(($=h.weekly.factors)==null?void 0:$.length)>0?` (${h.weekly.factors.slice(0,2).join(", ")})`:"";A.push(`Weekly bias is <span style="color:${h.weekly.color};font-weight:600">${h.weekly.bias}</span>${ct} based on week range, weekly open, and prior day position.`)}if(h.monthly.bias!=="NEUTRAL"){const ct=((ye=h.monthly.factors)==null?void 0:ye.length)>0?` (${h.monthly.factors.slice(0,2).join(", ")})`:"";A.push(`Monthly bias is <span style="color:${h.monthly.color};font-weight:600">${h.monthly.bias}</span>${ct} based on rolling 20-day range analysis.`)}}if(h.dayOpen.price>0&&h.dayOpen.bias!=="NEUTRAL"&&(h.dayOpen.bias==="BULLISH"?A.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(h.dayOpen.diff).toFixed(1)}pts BELOW</span> Day Open ($${h.dayOpen.price.toFixed(2)}) - buying below the open adds bullish confidence.`):A.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(h.dayOpen.diff).toFixed(1)}pts ABOVE</span> Day Open ($${h.dayOpen.price.toFixed(2)}) - selling above the open adds bearish confidence.`)),h.weeklyOpen.price>0&&h.weeklyOpen.bias!=="NEUTRAL"&&(h.weeklyOpen.bias==="BULLISH"?A.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(h.weeklyOpen.diff).toFixed(1)}pts BELOW</span> Weekly Open ($${h.weeklyOpen.price.toFixed(2)}) - buying below weekly open is a key bullish signal.`):A.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(h.weeklyOpen.diff).toFixed(1)}pts ABOVE</span> Weekly Open ($${h.weeklyOpen.price.toFixed(2)}) - selling above weekly open is a key bearish signal.`)),h.daily.ib.level!=="--"&&h.daily.ib.level!=="FORMING"){const ct={LOW:`Initial Balance is <span style="color:#00ff88;font-weight:600">LOW</span> (${h.daily.ib.pct}% of ADR) - expect range extension and directional move.`,MEDIUM:`Initial Balance is <span style="color:#ffaa00;font-weight:600">MEDIUM</span> (${h.daily.ib.pct}% of ADR) - balanced day possible, watch for breakout.`,HIGH:`Initial Balance is <span style="color:#ff4466;font-weight:600">HIGH</span> (${h.daily.ib.pct}% of ADR) - range may be set, rotational day likely.`};A.push(ct[h.daily.ib.level]||"")}if(h.daily.pvaLocation.status!=="--"){const ct={IN:`Price is <span style="color:#00aaff;font-weight:600">INSIDE</span> prior value area (${h.daily.pvaLocation.detail}) - value acceptance, mean reversion favored.`,OUT:(vt=h.daily.pvaLocation.detail)!=null&&vt.includes("Above")?`Price is <span style="color:#00ff88;font-weight:600">ABOVE</span> prior value area (${h.daily.pvaLocation.detail}) - bullish continuation if accepted.`:`Price is <span style="color:#ff4466;font-weight:600">BELOW</span> prior value area (${h.daily.pvaLocation.detail}) - bearish continuation if accepted.`,DYNAMIC:'Price is at <span style="color:#ffaa00;font-weight:600">DYNAMIC</span> boundary of prior value area - key decision point, watch for acceptance or rejection.'};A.push(ct[h.daily.pvaLocation.status]||"")}if(h.daily.opening.type!=="--"&&h.daily.opening.type!=="DEV"){const ct={OD:'Opening type is <span style="color:#00ff88;font-weight:600">Open Drive</span> - strong conviction, trend day likely, fade at your own risk.',OTD:'Opening type is <span style="color:#88ff88;font-weight:600">Open Test Drive</span> - tested and confirmed direction, follow the trend.',ORR:'Opening type is <span style="color:#ff8888;font-weight:600">Open Rejection Reverse</span> - initial move failed, expect reversal to dominate.',OA:'Opening type is <span style="color:#ffaa00;font-weight:600">Open Auction</span> - balanced open, wait for value to establish before trading.'};A.push(ct[h.daily.opening.type]||"")}if(h.critical.abOverlap.pct!=="--"){const ct=parseFloat(h.critical.abOverlap.pct);ct<33?A.push(`AB overlap is <span style="color:#00ff88;font-weight:600">${ct}%</span> (trending) - A and B periods show directional conviction, continuation expected.`):ct<=50?A.push(`AB overlap is <span style="color:#ffaa00;font-weight:600">${ct}%</span> (mixed) - some directional bias but not strong, be selective.`):A.push(`AB overlap is <span style="color:#ff4466;font-weight:600">${ct}%</span> (rotational) - high overlap suggests balance, range-bound trading likely.`)}if((h.critical.buyingTail||h.critical.sellingTail)&&(h.critical.buyingTail&&A.push('<span style="color:#00ff88;font-weight:600">Buying tail/excess</span> detected at lows - aggressive buyers defending, support is strong.'),h.critical.sellingTail&&A.push('<span style="color:#ff4466;font-weight:600">Selling tail/excess</span> detected at highs - aggressive sellers defending, resistance is strong.')),h.critical.tpoBias.direction!=="--"){const ct={BULLISH:'TPO distribution is <span style="color:#00ff88;font-weight:600">BULLISH</span> - POC is above value area midpoint, buyers in control.',BEARISH:'TPO distribution is <span style="color:#ff4466;font-weight:600">BEARISH</span> - POC is below value area midpoint, sellers in control.',NEUTRAL:'TPO distribution is <span style="color:#ffaa00;font-weight:600">NEUTRAL</span> - balanced profile, no clear directional bias from structure.'};A.push(ct[h.critical.tpoBias.direction]||"")}const H=_e.includes("BULLISH")?'<strong style="color:#00ff88">Conclusion:</strong> Multiple factors align bullish. Look for long entries at support zones with proper risk management.':_e.includes("BEARISH")?'<strong style="color:#ff4466">Conclusion:</strong> Multiple factors align bearish. Exercise caution on longs, consider short setups at resistance.':'<strong style="color:#ffaa00">Conclusion:</strong> Mixed signals present. Wait for clearer structure or trade both sides at extremes.';A.push(H);const se=A.map((ct,wt)=>{const kt=wt===A.length-1,sn=kt?le:"rgba(255,255,255,0.1)",nt=kt?`${le}10`:"transparent";return`<div style="margin-bottom: ${kt?"0":"12px"}; margin-top: ${kt?"16px":"0"}; padding: ${kt?"10px 10px 10px 10px":"2px 0 2px 10px"}; border-left: 2px solid ${sn}; background: ${nt}; border-radius: ${kt?"6px":"0"};">${ct}</div>`}).join("");return e.jsx("span",{dangerouslySetInnerHTML:{__html:se}})})()})})]})]})})()]})})(),((ie=t.buy_zones)==null?void 0:ie.length)>0?t.buy_zones.map((j,h)=>e.jsx(S,{zone:j,rank:h+1},j.id)):((U=t.all_zones)==null?void 0:U.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(100,100,100,0.1)",borderRadius:8,padding:12,marginBottom:16,border:"1px dashed rgba(255,255,255,0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:12,color:"#888"},children:" Waiting for price to approach support zones"}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Nearest zones shown below (greyed out until actionable)"})]}),[...t.all_zones].sort((j,h)=>Math.abs(j.distance)-Math.abs(h.distance)).slice(0,3).map((j,h)=>e.jsx("div",{style:{opacity:.5,filter:"grayscale(50%)"},children:e.jsx(S,{zone:j,rank:h+1,isWaiting:!0})},j.id))]}):e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,padding:f?24:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:f?36:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:f?14:16,marginBottom:8},children:"No zones available"}),e.jsx("div",{style:{fontSize:12},children:"Waiting for zone data to load..."})]})]}),(!b||f)&&e.jsx("div",{onClick:()=>!f&&C(!0),style:{flex:f?"none":1,minHeight:f?300:0,height:f?400:"auto",cursor:f?"default":"pointer"},title:f?"":"Click to minimize",children:e.jsx(T,{zones:t.all_zones,buyZones:t.buy_zones,currentPrice:t.current_price})})]})},Du=({selectedContract:t})=>{var se,$,ye,vt,ct,wt,kt,sn,nt,xt,Ft,tn,Kt,gn,_n,ri,$n,Yt,xn,si,Pn,Bn,Tn,Wn,In,Jn,En,Qn,_i,Ci,Wi,Gi,li,ai,Fi,to,Yi,Xi,Zn,zn,xo,yo,mo,bo,vo,jo,te,st;const[n,i]=I.useState(null),[o,r]=I.useState(!1),[s,l]=I.useState("1week"),[d,c]=I.useState(!1),[g,w]=I.useState(null),[y,u]=I.useState(!1),[L,W]=I.useState(!1),[Y,Ue]=I.useState(!1),[p,b]=I.useState(null),[C,f]=I.useState(null),[P,S]=I.useState(0),[T,E]=I.useState(!1),[ie,U]=I.useState("compact"),[j,h]=I.useState(!1),[z,Ie]=I.useState(!1),[_,Be]=I.useState({show:!1,x:0,y:0,price:0,dayIdx:-1,day:null}),[Oe,ne]=I.useState(!1),Ce=Pi.useRef(!1),v=Pi.useRef(!1),_e=Pi.useRef(null),le=Pi.useRef(null),{isMobile:Ne,isTablet:it}=uo(),Rt=k=>{Ce.current=!1,v.current=!1,setTimeout(()=>{if(_e.current){_e.current.scrollLeft=_e.current.scrollWidth-_e.current.clientWidth;const ce=(_e.current.scrollHeight-_e.current.clientHeight)/2;_e.current.scrollTop=ce}if(le.current){le.current.scrollLeft=le.current.scrollWidth-le.current.clientWidth;const ce=(le.current.scrollHeight-le.current.clientHeight)/2;le.current.scrollTop=ce}const M=document.getElementById("price-scale-1w"),pe=document.getElementById("price-scale-4w");M&&_e.current&&(M.scrollTop=_e.current.scrollTop),pe&&le.current&&(pe.scrollTop=le.current.scrollTop)},300)},Ke=Pi.useRef(!1);I.useEffect(()=>{n!=null&&n.current_price&&!Ke.current&&(Rt(n.current_price),Ke.current=!0)},[n==null?void 0:n.current_price]),I.useEffect(()=>{Ke.current=!1},[t]);const Xe=k=>k.length===1?k.charCodeAt(0)-65:26+(k.charCodeAt(0)-65)*26+(k.charCodeAt(1)-65),Pe=31,oe=44,fe=k=>{if(!k)return{};const M={};for(const[pe,ce]of Object.entries(k)){const xe=ce.filter(qe=>{const N=Xe(qe);return N>=Pe&&N<=oe});xe.length>0&&(M[pe]=xe)}return M},Se=k=>{if(!k||Object.keys(k).length===0)return 0;let M=0,pe=0;for(const[ce,xe]of Object.entries(k))xe.length>M&&(M=xe.length,pe=parseFloat(ce));return pe},O=(k,M,pe=.1)=>{var ue,Ge;if(!k||Object.keys(k).length===0)return{vah:0,val:0};const ce=Object.keys(k).map(ze=>parseFloat(ze)).sort((ze,X)=>X-ze),xe=Object.values(k).reduce((ze,X)=>ze+X.length,0),qe=Math.ceil(xe*.7);let N=new Set,ae=0;const we=M.toFixed(1);k[we]&&(N.add(M),ae+=k[we].length);let Te=ce.indexOf(M)-1,$e=ce.indexOf(M)+1;for(;ae<qe&&(Te>=0||$e<ce.length);){const ze=Te>=0?ce[Te]:null,X=$e<ce.length?ce[$e]:null,R=ze&&((ue=k[ze.toFixed(1)])==null?void 0:ue.length)||0,D=X&&((Ge=k[X.toFixed(1)])==null?void 0:Ge.length)||0;if(R>=D&&ze!==null)N.add(ze),ae+=R,Te--;else if(X!==null)N.add(X),ae+=D,$e++;else break}const de=Array.from(N);return{vah:Math.max(...de),val:Math.min(...de)}},ee=(k,M=!1)=>{if(!k||k.length===0)return null;const pe=k.slice(0,20),ce=2,xe={};let qe=[],N=[];pe.forEach(($e,de)=>{const ue=de<26?String.fromCharCode(65+de):"A"+String.fromCharCode(65+de-26),Ge=M&&$e.ib_high||$e.high,ze=M&&$e.ib_low||$e.low;if(Ge&&ze){qe.push(Ge),N.push(ze);for(let X=Math.floor(ze/ce)*ce;X<=Ge;X+=ce){const R=X.toFixed(1);xe[R]||(xe[R]=[]),xe[R].push(ue)}}});const ae=Se(xe),{vah:we,val:Te}=O(xe,ae,ce);return{profiles:xe,poc:ae,vah:we,val:Te,high:Math.max(...qe),low:Math.min(...N),period_count:pe.length,current_letter:pe.length>0?pe.length<26?String.fromCharCode(65+pe.length-1):"T":"A",ib_high:null,ib_low:null,is_composite:!0,days_included:pe.length}};I.useEffect(()=>{i(null),r(!1);const k=async()=>{await new Promise(ce=>setTimeout(ce,3e3));const pe=async()=>{try{const ce=await fetch(`${nn}/market-profile`);if(ce.ok){const xe=await ce.json(),qe=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),N=xe.poc||0,ae=N>5e4;qe===ae||N===0?(i(xe),r(!0)):console.log(`Waiting for backend to switch - got POC ${N} but expected ${qe?"BTC":"non-BTC"}`)}}catch{r(!1)}};return pe(),setInterval(pe,1e3)};let M;return k().then(pe=>{M=pe}),()=>{M&&clearInterval(M)}},[t]);const ke=10,lt=k=>`tpo_historic_cache_${k||"GC"}`;I.useEffect(()=>{w(null),(async()=>{var qe,N,ae;const M=lt(t);try{const we=localStorage.getItem(M);if(we){const Te=JSON.parse(we),$e=new Date().toISOString().split("T")[0],de=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),ue=((N=(qe=Te.data)==null?void 0:qe.profiles)==null?void 0:N.length)>0;if(Te.version===ke&&Te.date===$e&&Te.data&&(ue||de)){w(Te.data);return}else!ue&&!de&&(localStorage.removeItem(M),console.log("Cleared stale cache with empty profiles"))}}catch{console.warn("Invalid cache, fetching fresh data")}await new Promise(we=>setTimeout(we,12e3)),u(!0);let pe=3,ce=null;for(;pe>0;)try{ce=await(await fetch(`${nn}/historic-tpo?days=40`)).json();const Te=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(ce.source==="spot_no_history"&&!Te){console.log(`Historic TPO: Backend still on spot, retrying in 5s... (${pe} left)`),pe--,await new Promise(de=>setTimeout(de,5e3));continue}break}catch(we){console.error("Failed to fetch historic TPO:",we),pe--,await new Promise(Te=>setTimeout(Te,3e3))}if(!ce){u(!1);return}const xe=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(((ae=ce.profiles)==null?void 0:ae.length)>0||xe){const we={version:ke,date:new Date().toISOString().split("T")[0],contract:t,data:ce};try{localStorage.setItem(M,JSON.stringify(we))}catch(Te){console.warn("Failed to cache historic data:",Te)}}w(ce),u(!1)})()},[t]);const He=s==="1week"||s==="1week_rth",Je=He||(s==="4week"||s==="4week_rth");if((!o||!n)&&!(Je&&((se=g==null?void 0:g.profiles)==null?void 0:se.length)>0))return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#8b8b8b"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:18,marginBottom:8},children:"Connecting to Market Profile..."}),e.jsx("div",{style:{fontSize:13},children:"Waiting for TPO data from backend"})]});const J=(()=>{var M;if(!n&&!Je||Je)return null;if(s==="day")return{profiles:n.profiles,poc:n.poc,vah:n.vah,val:n.val,single_prints:n.single_prints||[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:n.period_count,current_letter:n.current_letter,open_price:n.open_price,high:n.high||Math.max(...Object.keys(n.profiles||{}).map(pe=>parseFloat(pe))),low:n.low||Math.min(...Object.keys(n.profiles||{}).map(pe=>parseFloat(pe))),volume:n.volume};if(s==="rth"){const pe=fe(n.profiles),ce=Se(pe),{vah:xe,val:qe}=O(pe,ce),N=Object.keys(pe).map(ae=>parseFloat(ae));return{profiles:pe,poc:ce,vah:xe,val:qe,single_prints:[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:Object.values(pe).flat().filter((ae,we,Te)=>Te.indexOf(ae)===we).length,current_letter:n.current_letter,open_price:n.rth_open||n.open_price,high:N.length>0?Math.max(...N):0,low:N.length>0?Math.min(...N):0,volume:n.volume}}if(s==="4week")return ee(g==null?void 0:g.profiles,!1);if(s==="4week_rth")return ee(g==null?void 0:g.profiles,!0);const k=(M=n.sessions)==null?void 0:M[s];return k?{profiles:k.profiles,poc:k.poc,vah:k.vah,val:k.val,single_prints:k.single_prints||[],ib_high:k.ib_high,ib_low:k.ib_low,period_count:k.period_count,current_letter:k.current_letter,high:k.high,low:k.low,volume:k.volume}:null})(),ot=(n==null?void 0:n.tick_size)||.1,Qe=P===0?(k=>{if(!k||Object.keys(k).length===0)return 1;const M=Object.keys(k).map(ae=>parseFloat(ae)),pe=Math.min(...M),N=(Math.max(...M)-pe)/45;return N<=.1?.1:N<=.5?.5:N<=1?1:N<=2?2:N<=5?5:N<=10?10:Math.ceil(N/10)*10})(J==null?void 0:J.profiles):P,re=(k,M)=>{if(!k||M<=ot)return Object.entries(k).map(([ce,xe])=>({price:parseFloat(ce),letters:xe})).sort((ce,xe)=>xe.price-ce.price);const pe={};return Object.entries(k).forEach(([ce,xe])=>{const qe=parseFloat(ce),N=Math.floor(qe/M)*M;pe[N]||(pe[N]=new Set),xe.forEach(ae=>pe[N].add(ae))}),Object.entries(pe).map(([ce,xe])=>({price:parseFloat(ce),letters:Array.from(xe)})).sort((ce,xe)=>xe.price-ce.price)},a=J!=null&&J.profiles?re(J.profiles,Qe):[],m=a.map(k=>k.price);Math.min(...m),Math.max(...m);const F={developing:"#8b8b8b",normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},B={developing:"#8b8b8b",OA:"#888888",ORR:"#ffaa00",OTD:"#00ff88",OD:"#00aaff"},A={developing:"",D:"D",P:"P",b:"b",B:"B"},H=n||{};return e.jsxs("div",{style:{display:Ne?"flex":"grid",flexDirection:Ne?"column":void 0,gridTemplateColumns:Ne?void 0:it||T?"1fr":"280px 1fr 300px",gap:Ne?12:20,height:Ne?"auto":"100%",padding:Ne?12:0,overflow:Ne?"auto":"hidden"},children:[!T&&e.jsxs("div",{style:{display:"flex",flexDirection:Ne?"row":"column",gap:Ne?8:16,overflowX:Ne?"auto":void 0,flexWrap:Ne?"nowrap":void 0},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"TPO Ranges"}),e.jsxs("div",{style:{display:"flex",marginBottom:12,background:"rgba(20,20,30,0.8)",borderRadius:8,padding:3},children:[e.jsxs("button",{onClick:()=>{s.includes("_rth")&&l(s.replace("_rth","")),Rt()},onMouseEnter:k=>{const M=k.currentTarget.querySelector(".tooltip");M&&(M.style.opacity="1")},onMouseLeave:k=>{const M=k.currentTarget.querySelector(".tooltip");M&&(M.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"transparent":"linear-gradient(135deg, rgba(0,170,255,0.3) 0%, rgba(0,221,255,0.2) 100%)",border:s.includes("_rth")?"1px solid transparent":"1px solid rgba(0,221,255,0.5)",borderRadius:6,color:s.includes("_rth")?"#666":"#00ddff",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["ETH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,221,255,0.3)",borderRadius:6,color:"#00ddff",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"18:00 - 17:00 ET"})]}),e.jsxs("button",{onClick:()=>{s.includes("_rth")||l(s+"_rth"),Rt()},onMouseEnter:k=>{const M=k.currentTarget.querySelector(".tooltip");M&&(M.style.opacity="1")},onMouseLeave:k=>{const M=k.currentTarget.querySelector(".tooltip");M&&(M.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"linear-gradient(135deg, rgba(0,255,136,0.3) 0%, rgba(0,200,100,0.2) 100%)":"transparent",border:s.includes("_rth")?"1px solid rgba(0,255,136,0.5)":"1px solid transparent",borderRadius:6,color:s.includes("_rth")?"#00ff88":"#666",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["RTH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:6,color:"#00ff88",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"09:30 - 16:15 ET"})]})]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{onClick:()=>{const k=s.includes("_rth");l(k?"1week_rth":"1week"),Rt()},style:{flex:1,padding:"12px 8px",background:s==="1week"||s==="1week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="1week"||s==="1week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="1week"||s==="1week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"1 Week"}),e.jsx("button",{onClick:()=>{const k=s.includes("_rth");l(k?"4week_rth":"4week"),Rt()},style:{flex:1,padding:"12px 8px",background:s==="4week"||s==="4week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="4week"||s==="4week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="4week"||s==="4week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"4 Week"})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Key Levels"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#ffaa00",fontWeight:600,fontSize:12},children:"POC"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:(($=J==null?void 0:J.poc)==null?void 0:$.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAH"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((ye=J==null?void 0:J.vah)==null?void 0:ye.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((vt=J==null?void 0:J.val)==null?void 0:vt.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB High"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((ct=J==null?void 0:J.ib_high)==null?void 0:ct.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB Low"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((wt=J==null?void 0:J.ib_low)==null?void 0:wt.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466",fontWeight:600,fontSize:12},children:"Single Prints"}),e.jsx("span",{style:{color:"#ff4466",fontFamily:"monospace",fontSize:12},children:((kt=J==null?void 0:J.single_prints)==null?void 0:kt.length)||0})]})]}),(n==null?void 0:n.confluence)&&e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px",marginTop:8},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Confluence Score"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",background:n.confluence.total_score>=8?"rgba(0,255,136,0.15)":n.confluence.total_score>=5?"rgba(0,170,255,0.15)":n.confluence.total_score>=2?"rgba(255,170,0,0.15)":n.confluence.total_score>=-1?"rgba(139,139,139,0.15)":"rgba(255,68,102,0.15)",borderRadius:6,marginBottom:8,border:`1px solid ${n.confluence.total_score>=8?"rgba(0,255,136,0.3)":n.confluence.total_score>=5?"rgba(0,170,255,0.3)":n.confluence.total_score>=2?"rgba(255,170,0,0.3)":n.confluence.total_score>=-1?"rgba(139,139,139,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.confluence.total_score>=8?"#00ff88":n.confluence.total_score>=5?"#00aaff":n.confluence.total_score>=2?"#ffaa00":n.confluence.total_score>=-1?"#8b8b8b":"#ff4466",fontFamily:"monospace"},children:[n.confluence.total_score>0?"+":"",n.confluence.total_score]}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:n.confluence.confidence})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.confluence.trade_direction==="LONG"?"#00ff88":n.confluence.trade_direction==="SHORT"?"#ff4466":"#8b8b8b"},children:n.confluence.trade_direction==="LONG"?" LONG":n.confluence.trade_direction==="SHORT"?" SHORT":n.confluence.trade_direction}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:["Size: ",n.confluence.position_size_pct,"%"]})]})]}),e.jsx("div",{style:{padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:6,marginBottom:12,fontSize:12,color:(sn=n.confluence.action)!=null&&sn.includes("NO TRADE")||(nt=n.confluence.action)!=null&&nt.includes("SKIP")?"#ff4466":(xt=n.confluence.action)!=null&&xt.includes("ADD")?"#00ff88":"#fff"},children:n.confluence.action}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00ff88"},children:"R1 Macro"}),e.jsxs("span",{style:{color:n.confluence.rank1_score>0?"#00ff88":"#666"},children:[n.confluence.rank1_score>0?"+":"",n.confluence.rank1_score]})]}),((tn=(Ft=n.confluence.factors)==null?void 0:Ft.rank1_macro)==null?void 0:tn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#666"},children:n.confluence.factors.rank1_macro.map((k,M)=>e.jsx("div",{style:{padding:"2px 0"},children:k},M))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00aaff"},children:"R2 Volume"}),e.jsxs("span",{style:{color:n.confluence.rank2_score>0?"#00aaff":"#666"},children:[n.confluence.rank2_score>0?"+":"",n.confluence.rank2_score]})]}),((gn=(Kt=n.confluence.factors)==null?void 0:Kt.rank2_volume)==null?void 0:gn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#00aaff",opacity:.7},children:n.confluence.factors.rank2_volume.map((k,M)=>e.jsx("div",{style:{padding:"2px 0"},children:k},M))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ffaa00"},children:"R3 Structure"}),e.jsxs("span",{style:{color:n.confluence.rank3_score>0?"#ffaa00":"#666"},children:[n.confluence.rank3_score>0?"+":"",n.confluence.rank3_score]})]}),((ri=(_n=n.confluence.factors)==null?void 0:_n.rank3_structure)==null?void 0:ri.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ffaa00",opacity:.7},children:n.confluence.factors.rank3_structure.map((k,M)=>e.jsx("div",{style:{padding:"2px 0"},children:k},M))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#9370DB"},children:"R4 Timing"}),e.jsxs("span",{style:{color:n.confluence.rank4_score>0?"#9370DB":"#666"},children:[n.confluence.rank4_score>0?"+":"",n.confluence.rank4_score]})]}),((Yt=($n=n.confluence.factors)==null?void 0:$n.rank4_timing)==null?void 0:Yt.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#9370DB",opacity:.7},children:n.confluence.factors.rank4_timing.map((k,M)=>e.jsx("div",{style:{padding:"2px 0"},children:k},M))})]}),(n.confluence.conflict_penalty!==0||((si=(xn=n.confluence.factors)==null?void 0:xn.conflicts)==null?void 0:si.length)>0)&&e.jsxs("div",{style:{paddingBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466"},children:"Conflicts"}),e.jsx("span",{style:{color:"#ff4466"},children:n.confluence.conflict_penalty})]}),((Bn=(Pn=n.confluence.factors)==null?void 0:Pn.conflicts)==null?void 0:Bn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ff4466",opacity:.7},children:n.confluence.factors.conflicts.map((k,M)=>e.jsx("div",{style:{padding:"2px 0"},children:k},M))})]})]}),((Wn=(Tn=n.confluence.factors)==null?void 0:Tn.volume_override)==null?void 0:Wn.length)>0&&e.jsx("div",{style:{marginTop:10,padding:"8px",background:"rgba(255,170,0,0.1)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:n.confluence.factors.volume_override[0]}),n.confluence.level_type&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:"#8b8b8b"},children:["At: ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:n.confluence.level_type}),n.confluence.at_key_level&&e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",marginLeft:6},children:n.confluence.at_key_level.toFixed(2)})]})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:20,overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{style:{fontSize:14,color:"#fff",fontWeight:600},children:["TPO Profile - ",s==="day"?"Full Day":(Jn=(In=n==null?void 0:n.sessions)==null?void 0:In[s])==null?void 0:Jn.display]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("button",{onClick:()=>h(!j),style:{padding:"4px 10px",background:j?"rgba(0,170,255,0.25)":"rgba(30,30,40,0.8)",border:j?"1px solid rgba(0,170,255,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:j?"#00aaff":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:j?"Zoomed":"Zoom"}),e.jsx("button",{onClick:()=>Ie(!z),style:{padding:"4px 10px",background:z?"rgba(255,170,0,0.25)":"rgba(30,30,40,0.8)",border:z?"1px solid rgba(255,170,0,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:z?"#ffaa00":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:z?"IB Only":"Hide Non-IB"}),e.jsxs("span",{style:{fontSize:12,color:"#8b8b8b",whiteSpace:"nowrap"},children:["Period: ",e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(J==null?void 0:J.current_letter)||"A"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(30,30,40,0.8)",borderRadius:6,padding:"2px 4px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{fontSize:10,color:"#8b8b8b",paddingLeft:4},children:"View:"}),e.jsx("button",{onClick:()=>U("compact"),style:{padding:"4px 8px",background:ie==="compact"?"rgba(0,255,136,0.2)":"transparent",border:ie==="compact"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:ie==="compact"?"#00ff88":"#888",fontSize:10,fontWeight:ie==="compact"?600:400,cursor:"pointer"},children:"Compact"}),e.jsx("button",{onClick:()=>U("expanded"),style:{padding:"4px 8px",background:ie==="expanded"?"rgba(0,255,136,0.2)":"transparent",border:ie==="expanded"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:ie==="expanded"?"#00ff88":"#888",fontSize:10,fontWeight:ie==="expanded"?600:400,cursor:"pointer"},children:"Expanded"})]}),e.jsx("button",{onClick:()=>E(!T),style:{padding:"4px 10px",background:T?"rgba(0,170,255,0.2)":"rgba(30,30,40,0.8)",border:T?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:T?"#00aaff":"#888",fontSize:11,cursor:"pointer",display:"flex",alignItems:"center",gap:4},title:T?"Collapse TPO chart":"Expand TPO chart",children:T?"":" "})]})]}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:10,position:"relative"},children:Je&&(!g||y)?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16,animation:"pulse 1.5s ease-in-out infinite"},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8,color:"#9370DB"},children:"Loading Historic Data..."}),e.jsxs("div",{style:{fontSize:12},children:["Fetching ",He?"1-week":"4-week"," TPO profiles"]})]}):Je&&((En=g==null?void 0:g.profiles)==null?void 0:En.length)===0?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8},children:"No Historic Data Available"}),e.jsx("div",{style:{fontSize:12},children:"Try refreshing or check backend connection"})]}):(s==="1week"||s==="1week_rth")&&((Qn=g==null?void 0:g.profiles)==null?void 0:Qn.length)>0?(()=>{var k,M,pe,ce,xe,qe,N,ae,we,Te,$e;try{const de=s==="1week_rth",ue=g.profiles[0],ze=((ue==null?void 0:ue.high)||5e3)>1e4,X=ze?j?25:50:j?2:4,R=ze?j?.1:1:j?.05:.3,D=Math.max(2,Math.round(X/R)),x=j?14:11,V=j?11:10,Q=45,K=20,Ve=de?[{key:"us_rth",name:"US RTH",color:"#00ff88",start:31,end:44,time:"09:30-16:15",hasIB:!0,ibStart:31,ibEnd:33},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}]:[{key:"asia",name:"Asia",color:"#00ddff",start:0,end:17,time:"18:00-03:00"},{key:"london",name:"London",color:"#ffaa00",start:18,end:28,time:"03:00-08:20"},{key:"us",name:"US",color:"#00ff88",start:28,end:41,time:"08:20-15:00",hasIB:!0,ibStart:28,ibEnd:30},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}],ht=Z=>Z.length===1?Z.charCodeAt(0)-65:26+(Z.charCodeAt(0)-65)*26+(Z.charCodeAt(1)-65),me=Z=>{if(Z.open_type&&Z.open_type!=="developing")return Z.open_type;const ve=Z.ib_high,_t=Z.ib_low,Ut=Z.open,Zt=Z.close||Z.high;if(!ve||!_t||_t>=999999||!Ut)return"OA";const Ze=ve-_t;if(Ze<=0)return"OA";const pt=(ve+_t)/2,Xt=(Ut-_t)/Ze*100;return Xt<=20&&Zt>pt||Xt>=80&&Zt<pt?"OD":Ut>pt&&Z.low<_t&&Zt>ve||Ut<pt&&Z.high>ve&&Zt<_t?"OTD":Z.high>ve&&Zt<pt||Z.low<_t&&Zt>pt?"ORR":"OA"},be=g.profiles.slice(0,5).filter(Z=>Z.tpo_profiles).reverse(),Ee=Z=>Z<26?String.fromCharCode(65+Z):String.fromCharCode(65+Math.floor(Z/26)-1)+String.fromCharCode(65+Z%26),et=[];be.forEach(Z=>{Ve.forEach(ve=>{var Gt,cn,Pt,qt,gt,Vt;const _t=Z.tpo_profiles||{},Ut=Z.price_volumes||{},Zt=Z.delta_by_price||{},Ze={},pt={},Xt={};let ge=0,yt=0,jt=0,ut=999999,mt=null,zt=null,G=0,Ye=999999;Object.entries(_t).forEach(([Ct,Re])=>{const tt=parseFloat(Ct);Re.filter(en=>{const It=ht(en);return It>=ve.start&&It<=ve.end}).length>0&&(tt>G&&(G=tt),tt<Ye&&(Ye=tt))});const he=ze?100:5,St=G+he,Bt=Ye-he;Object.entries(Ut).forEach(([Ct,Re])=>{const tt=parseFloat(Ct);if(tt>=Bt&&tt<=St){pt[tt]=(pt[tt]||0)+Re;const at=Zt[Ct]||Zt[tt.toFixed(1)]||0;Xt[tt]=(Xt[tt]||0)+at}}),Object.entries(_t).forEach(([Ct,Re])=>{const tt=parseFloat(Ct),at=Math.floor(tt/X)*X,en=Re.filter(It=>{const hn=ht(It);return hn>=ve.start&&hn<=ve.end});en.length>0&&(Ze[at]||(Ze[at]=new Set),en.forEach(It=>{const fn=ht(It)-ve.start,rn=Ee(fn);Ze[at].add(rn),fn>yt&&(yt=fn)}),tt>jt&&(jt=tt),tt<ut&&(ut=tt)),ve.hasIB&&Re.filter(hn=>{const fn=ht(hn);return fn>=ve.ibStart&&fn<=ve.ibEnd}).length>0&&((mt===null||tt>mt)&&(mt=tt),(zt===null||tt<zt)&&(zt=tt))}),Object.values(Ze).forEach(Ct=>{Ct.size>ge&&(ge=Ct.size)});let Ot=0;if(Object.values(pt).forEach(Ct=>{Ct>Ot&&(Ot=Ct)}),Object.keys(Ze).length>0){let Ct=0,Re=0,tt=null;Object.entries(Ze).forEach(([bt,Ae])=>{Ae.size>Re&&(Re=Ae.size,Ct=parseFloat(bt),tt=bt)});const at=Object.keys(Ze).map(bt=>parseFloat(bt)).sort((bt,Ae)=>Ae-bt),en=Object.values(Ze).reduce((bt,Ae)=>bt+Ae.size,0);let It=0,hn=Ct,fn=Ct;const rn=at.indexOf(Math.floor(Ct/X)*X);if(rn>=0){It=((Gt=Ze[at[rn]])==null?void 0:Gt.size)||0;let bt=rn,Ae=rn;for(;It<en*.7&&(bt>0||Ae<at.length-1);){const Et=bt>0&&((cn=Ze[at[bt-1]])==null?void 0:cn.size)||0,an=Ae<at.length-1&&((Pt=Ze[at[Ae+1]])==null?void 0:Pt.size)||0;if(Et>=an&&bt>0)bt--,It+=Et;else if(Ae<at.length-1)Ae++,It+=an;else break}hn=at[bt]||Ct,fn=at[Ae]||Ct}let pn=Ct,qn=0;Object.entries(pt).forEach(([bt,Ae])=>{Ae>qn&&(qn=Ae,pn=parseFloat(bt))});let Mi=pn,ei=pn;const wn=Object.entries(pt).map(([bt,Ae])=>({price:parseFloat(bt),vol:Ae})).sort((bt,Ae)=>bt.price-Ae.price),Ti=wn.reduce((bt,Ae)=>bt+Ae.vol,0)*.7;if(wn.length>0){const bt=wn.findIndex(Un=>Math.abs(Un.price-pn)<R);let Ae=((qt=wn[bt])==null?void 0:qt.vol)||0,Et=bt>=0?bt:0,an=bt>=0?bt:0;for(;Ae<Ti&&(Et<wn.length-1||an>0);){const Un=Et<wn.length-1?wn[Et+1].vol:0,pi=an>0?wn[an-1].vol:0;if(Un>=pi&&Et<wn.length-1)Et++,Ae+=wn[Et].vol;else if(an>0)an--,Ae+=wn[an].vol;else break}Mi=((gt=wn[Et])==null?void 0:gt.price)||pn,ei=((Vt=wn[an])==null?void 0:Vt.price)||pn}const di=Math.max(ge*V+K+Q+40,120),no=Math.max((yt+1)*V+K+Q+40,160);let ci=null,Ki=null,Uo=null,zi=null;const Dt=[],Wt=Ee(yt),Lt=[];if(Object.entries(Ze).forEach(([bt,Ae])=>{const Et=parseFloat(bt);Ae.has("A")&&Dt.push({price:Et,key:bt}),Ae.has(Wt)&&Lt.push({price:Et,key:bt})}),Dt.length>0){const bt=(Math.max(...Dt.map(Et=>Et.price))+Math.min(...Dt.map(Et=>Et.price)))/2;let Ae=Dt[0];Dt.forEach(Et=>{Math.abs(Et.price-bt)<Math.abs(Ae.price-bt)&&(Ae=Et)}),ci=Ae.price,Uo=Ae.key}if(Lt.length>0){const bt=(Math.max(...Lt.map(Et=>Et.price))+Math.min(...Lt.map(Et=>Et.price)))/2;let Ae=Lt[0];Lt.forEach(Et=>{Math.abs(Et.price-bt)<Math.abs(Ae.price-bt)&&(Ae=Et)}),Ki=Ae.price,zi=Ae.key}let ln="D";if(jt>ut&&Ct>0){const bt=jt-ut,Ae=(Ct-ut)/bt,Et=ut+bt*.67,an=ut+bt*.33;Ae>.6?ln="P":Ae<.4?ln="b":ln="D"}let Vn=null;const Fn=[],fi=[];if(Object.entries(Ze).forEach(([bt,Ae])=>{const Et=parseFloat(bt);Ae.has("A")&&Fn.push(Et),Ae.has("B")&&fi.push(Et)}),Fn.length>0&&fi.length>0){const bt=Math.max(...Fn),Ae=Math.min(...Fn),Et=Math.max(...fi),an=Math.min(...fi),Un=bt-Ae,pi=Et-an,So=Math.min(bt,Et),sr=Math.max(Ae,an),wo=Math.max(0,So-sr),io=Math.min(Un,pi);io>0?Vn=Math.round(wo/io*100):wo>0?Vn=100:Vn=0}et.push({date:Z.date,weekday:Z.weekday,sessKey:ve.key,sessName:ve.name,sessTime:ve.time,color:ve.color,lettersByPrice:Ze,volumeByPrice:pt,deltaByPrice:Xt,maxVol:Ot,poc:Ct,pocPriceKey:tt,maxTPOCount:Re,sessionVPOC:pn,vah:hn,val:fn,volVAH:Mi,volVAL:ei,high:jt,low:ut,open:ci,close:Ki,openPriceKey:Uo,closePriceKey:zi,ibHigh:mt,ibLow:zt,hasIB:ve.hasIB,maxLetters:ge,maxPeriod:yt,sessStart:0,width:ie==="expanded"?no:di,day_type:Z.day_type,open_type:me(Z),profile_shape:ln,abOverlap:Vn})}})});const Tt=z?et.filter(Z=>Z.hasIB&&Z.ibHigh&&Z.ibLow):et;if(Tt.length===0)return e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:["No session data",z?" with IB":"","..."]});let Me=0,ft=999999;Tt.forEach(Z=>{Z.high>Me&&(Me=Z.high),Z.low<ft&&(ft=Z.low)}),Me=Math.ceil(Me/X)*X+X*3,ft=Math.floor(ft/X)*X-X*3;const Qt=[];for(let Z=Me;Z>=ft;Z-=X)Qt.push(Z);let Nt=0;const Mt=Tt.map(Z=>{const ve=Nt;return Nt+=Z.width,ve}),Ht=Nt,$t=(Z,ve)=>{if(!ve)return;const _t=ve.getBoundingClientRect(),Ut=ve.scrollLeft,Zt=ve.scrollTop,Ze=Z.clientX-_t.left,pt=Ze+Ut,Xt=Z.clientY-_t.top,ge=Xt-36+Zt;let yt=Tt.length-1;for(let mt=0;mt<Tt.length;mt++)if(pt<Mt[mt]+Tt[mt].width){yt=mt;break}const jt=Math.floor(ge/x),ut=Qt[jt]||0;Be({show:!0,x:Ze,y:Xt,clientX:Z.clientX,clientY:Z.clientY,chartLeft:_t.left,chartTop:_t.top,chartRight:_t.right,chartBottom:_t.bottom,scrollLeft:Ut,scrollTop:Zt,price:ut,dayIdx:yt,day:Tt[yt]})};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[_.show&&_.day&&Oe&&e.jsxs("div",{style:{position:"absolute",left:_.x+65,top:Math.max(10,_.y-140),background:"rgba(20,20,35,0.95)",border:`1px solid ${_.day.color||"rgba(147,112,219,0.5)"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:_.day.color||"#ba68c8",fontWeight:700,marginBottom:4},children:[_.day.sessName," - ",_.day.weekday," ",(k=_.day.date)==null?void 0:k.slice(5)]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:_.day.sessTime||"--"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((M=_.price)==null?void 0:M.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof _.day.poc=="number"?_.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof _.day.vah=="number"?_.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof _.day.val=="number"?_.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof _.day.ibHigh=="number"?_.day.ibHigh.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof _.day.ibLow=="number"?_.day.ibLow.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof _.day.ibHigh=="number"&&typeof _.day.ibLow=="number"&&_.day.high>_.day.low?((_.day.ibHigh-_.day.ibLow)/(_.day.high-_.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof _.day.volVAH=="number"?_.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof _.day.volVAL=="number"?_.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:F[(pe=_.day)==null?void 0:pe.day_type]||"#888",fontWeight:600},children:((xe=(ce=_.day)==null?void 0:ce.day_type)==null?void 0:xe.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((N=(qe=_.day)==null?void 0:qe.open_type)==null?void 0:N.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((we=(ae=_.day)==null?void 0:ae.profile_shape)==null?void 0:we.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:((Te=_.day)==null?void 0:Te.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof(($e=_.day)==null?void 0:$e.abOverlap)=="number"?_.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflow:"hidden",height:"calc(100% - 36px)"},id:"price-scale-1w",children:Qt.map((Z,ve)=>{const _t=Z%10===0,Ut=Z%50===0;return e.jsx("div",{style:{height:x,fontSize:Ut?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:Ut?"rgba(147,112,219,0.9)":_t?"#666":"transparent",fontWeight:Ut?600:400,borderBottom:Ut?"1px solid rgba(147,112,219,0.1)":"none"},children:_t?Z.toFixed(0):""},Z)})})]}),e.jsxs("div",{className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:Z=>{const ve=document.getElementById("price-scale-1w"),_t=document.getElementById("time-scale-1w");ve&&(ve.scrollTop=Z.target.scrollTop),_t&&(_t.scrollLeft=Z.target.scrollLeft)},onMouseMove:Z=>$t(Z,Z.currentTarget),onClick:()=>ne(!Oe),onMouseLeave:()=>{Oe||Be({..._,show:!1})},ref:Z=>{_e.current=Z,Z&&!Ce.current&&Ht>Z.clientWidth&&(Z.scrollLeft=Ht-Z.clientWidth,Ce.current=!0)},children:[_.show&&_.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:_.chartLeft-58,right:window.innerWidth-_.chartRight,height:1,top:_.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:_.clientX,top:_.chartTop,height:_.chartBottom-_.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:10,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:Tt.map((Z,ve)=>{var _t;return e.jsxs("div",{style:{width:Z.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:Z.sessKey==="asia"||de&&Z.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:_.dayIdx===ve?`${Z.color}15`:"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:Z.color,fontWeight:700},children:Z.sessName}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[Z.weekday," ",(_t=Z.date)==null?void 0:_t.slice(5)]})]},`${Z.date}-${Z.sessKey}`)})}),e.jsxs("div",{style:{position:"relative",minHeight:"calc(100% - 36px)"},children:[Tt.map((Z,ve)=>e.jsx("div",{style:{position:"absolute",left:Mt[ve]+Z.width-1,top:0,bottom:0,minHeight:Qt.length*x,width:1,background:"rgba(147,112,219,0.06)",pointerEvents:"none",zIndex:1}},`col-line-${ve}`)),Tt.map((Z,ve)=>Z.sessKey==="asia"||de&&Z.sessKey==="us_rth"?e.jsx("div",{style:{position:"absolute",left:Mt[ve],top:0,bottom:0,minHeight:Qt.length*x,width:2,background:"rgba(255,255,255,0.1)",pointerEvents:"none",zIndex:1}},`day-line-${ve}`):null),Qt.map(Z=>e.jsx("div",{style:{display:"flex",height:x,background:_.price===Z?"rgba(186,104,200,0.04)":"transparent"},children:Tt.map((ve,_t)=>{const Ut=ve.lettersByPrice[Z]?[...ve.lettersByPrice[Z]].sort():[],Zt=ve.vah&&ve.val&&Z<=ve.vah&&Z>=ve.val,Ze=ve.hasIB&&ve.ibHigh&&Math.abs(Z-ve.ibHigh)<X,pt=ve.hasIB&&ve.ibLow&&Math.abs(Z-ve.ibLow)<X,Xt=ve.openPriceKey&&Z.toString()===ve.openPriceKey,ge=ve.maxPeriod>=0?ve.maxPeriod<26?String.fromCharCode(65+ve.maxPeriod):"A"+String.fromCharCode(65+ve.maxPeriod-26):null,yt=ve.closePriceKey&&Z.toString()===ve.closePriceKey,ut=ve.close&&ve.open&&ve.close>=ve.open?"#00ff88":"#ff4466",mt=ve.pocPriceKey&&Z.toString()===ve.pocPriceKey;return e.jsx("div",{style:{width:ve.width,flexShrink:0,height:x,display:"flex",alignItems:"center",borderRight:"none",borderLeft:ve.sessKey==="asia"||de&&ve.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",position:"relative",paddingLeft:21,paddingRight:Q+K+19,background:Ze||pt?"rgba(255,255,255,0.05)":"transparent"},children:ie==="expanded"?e.jsx("div",{style:{position:"relative",width:Math.max((ve.maxPeriod-ve.sessStart+1)*V,50),height:x-2,overflow:"visible"},children:Ut.map((zt,G)=>{const Ye=ht(zt)-ve.sessStart;if(Ye<0)return null;const he=zt==="A"&&Xt,St=zt===ge&&yt&&!he,Bt=mt?"#000":he?"#fff":St?"#000":Zt?ut:"#888",Ot=mt?"#ffffff":he?"rgba(100,100,100,0.6)":St?ut:Zt?`${ut}30`:"rgba(136,136,136,0.25)",Gt=mt||he?"1px solid #fff":St?`1px solid ${ut}`:Zt?`1px solid ${ut}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:Ye*V,width:zt.length>1?V+4:V-1,height:x-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:zt.length>1?7:9,fontWeight:700,color:Bt,background:Ot,borderRadius:2,border:Gt},children:zt},`${zt}-${G}`)})}):Ut.map((zt,G)=>{const Ye=zt==="A"&&Xt,he=zt===ge&&yt&&!Ye,St=mt?"#000":Ye?"#fff":he?"#000":Zt?ut:"#888",Bt=mt?"#ffffff":Ye?"rgba(100,100,100,0.6)":he?ut:Zt?`${ut}30`:"rgba(136,136,136,0.25)",Ot=mt||Ye?"1px solid #fff":he?`1px solid ${ut}`:Zt?`1px solid ${ut}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{minWidth:zt.length>1?V+4:V,height:x-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:zt.length>1?8:10,fontWeight:700,color:St,background:Bt,borderRadius:2,marginRight:1,border:Ot,padding:zt.length>1?"0 2px":0},children:zt},`${zt}-${G}`)})},`${ve.date}-${ve.sessKey}-${Z}`)})},Z)),Tt.map((Z,ve)=>{const _t=Mt[ve],Ut=Qt.length*x,Zt=(Z.high+Z.low)/2,Ze=ge=>{const yt=Math.floor(ge/X)*X,jt=(Me-yt)/X,ut=1-(ge-yt)/X;return(jt+ut)*x},pt=Object.entries(Z.volumeByPrice||{}).map(([ge,yt])=>{var mt,zt;const jt=parseFloat(ge),ut=((mt=Z.deltaByPrice)==null?void 0:mt[ge])??((zt=Z.deltaByPrice)==null?void 0:zt[jt]);return{price:jt,vol:yt,delta:ut}}).filter(ge=>ge.vol>0).sort((ge,yt)=>yt.price-ge.price),Xt=Math.max(...pt.map(ge=>ge.vol),1);return e.jsx("div",{style:{position:"absolute",left:_t+Z.width-Q-15,top:0,width:Q,height:Ut,overflow:"hidden"},children:pt.map((ge,yt)=>{const jt=Ze(ge.price),ut=1,mt=Z.sessionVPOC&&Math.abs(ge.price-Z.sessionVPOC)<1,zt=Z.volVAH&&Math.abs(ge.price-Z.volVAH)<1,G=Z.volVAL&&Math.abs(ge.price-Z.volVAL)<1,he=ge.delta!==void 0&&ge.delta!==null&&ge.delta!==0?ge.delta>0:ge.price>Zt;return e.jsx("div",{style:{position:"absolute",top:jt,left:4,width:`${Math.min(ge.vol/Xt*95,95)}%`,height:ut,background:mt?"#ff9900":zt?"#00ff88":G?"#ff4466":he?"#00dd77":"#cc3366",opacity:.9}},yt)})},`vp-sess-${ve}`)}),Tt.map((Z,ve)=>{const _t=Zt=>{const Ze=Math.floor(Zt/X)*X,pt=(Me-Ze)/X,Xt=1-(Zt-Ze)/X;return(pt+Xt)*x},Ut=Mt[ve];return e.jsxs(Pi.Fragment,{children:[Z.hasIB&&Z.ibHigh&&Z.ibLow&&e.jsx("div",{style:{position:"absolute",left:Ut+7,top:_t(Z.ibHigh)+x/2,width:2,height:_t(Z.ibLow)-_t(Z.ibHigh),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),Z.vah&&e.jsx("div",{style:{position:"absolute",left:Ut+Z.width-12,top:_t(Z.vah)+x/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),Z.val&&e.jsx("div",{style:{position:"absolute",left:Ut+Z.width-12,top:_t(Z.val)+x/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${Z.date}-${Z.sessKey}`)})]})]})]}),e.jsxs("div",{style:{display:"flex",flexShrink:0,background:"rgba(18,18,30,0.98)",borderTop:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{width:58,flexShrink:0,borderRight:"1px solid rgba(147,112,219,0.25)"}}),e.jsx("div",{id:"time-scale-1w",style:{display:"flex",flex:1,overflow:"hidden"},children:Tt.map((Z,ve)=>e.jsx("div",{style:{width:Z.width,flexShrink:0,textAlign:"center",padding:"2px 0",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:Z.sessKey==="asia"||de&&Z.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:_.dayIdx===ve?`${Z.color}15`:"transparent"},children:e.jsx("div",{style:{fontSize:9,color:"#666"},children:Z.sessTime})},`time-${Z.date}-${Z.sessKey}`))})]})]})}catch(de){return console.error("1-Week chart error:",de),e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#ff4466"},children:["Error rendering 1-Week chart: ",de.message]})}})():(s==="4week"||s==="4week_rth")&&((_i=g==null?void 0:g.profiles)==null?void 0:_i.length)>0?(()=>{var et,Tt,Me,ft,Qt,Nt,Mt,Ht,$t,Z,ve,_t,Ut,Zt,Ze,pt,Xt,ge,yt,jt,ut,mt,zt;const k=s==="4week_rth",M=31,pe=45,ce=G=>G.length===1?G.charCodeAt(0)-65:26+(G.charCodeAt(0)-65)*26+(G.charCodeAt(1)-65),xe=G=>k?G.filter(Ye=>{const he=ce(Ye);return he>=M&&he<=pe}):G,qe=new Date().toISOString().split("T")[0],ae=g.profiles.slice(0,20).filter(G=>G.tpo_profiles).map(G=>{let Ye=G;if(G.date===qe&&n&&(Ye={...G,poc:n.poc||G.poc,vah:n.vah||G.vah,val:n.val||G.val,ib_high:n.ib_high||G.ib_high,ib_low:n.ib_low||G.ib_low,high:Math.max(n.high||0,G.high||0),low:Math.min(n.low||999999,G.low||999999),tpo_profiles:n.profiles||G.tpo_profiles,day_type:n.day_type||G.day_type,open_type:n.open_type||G.open_type,profile_shape:n.profile_shape||G.profile_shape}),k&&Ye.tpo_profiles){const he={};Object.entries(Ye.tpo_profiles).forEach(([Bt,Ot])=>{const Gt=xe(Ot);Gt.length>0&&(he[Bt]=Gt)}),Ye={...Ye,tpo_profiles:he};const St=Object.keys(he).map(Bt=>parseFloat(Bt));St.length>0&&(Ye.high=Math.max(...St),Ye.low=Math.min(...St))}return Ye}).reverse(),we=ae.map(G=>G.high||0).filter(G=>G>0);ae.map(G=>G.low||999999).filter(G=>G<999999);const $e=Math.max(...we)>1e4,de=$e?j?50:100:j?2:4,ue=$e?j?.1:1:j?.05:.3,Ge=Math.max(2,Math.round(de/ue)),ze=j?14:11,X=j?12:10,R=50,D=16,x=G=>{const Ye=new Set;return G.forEach(he=>{let St;he.length===1?St=he.charCodeAt(0)-65:St=26+(he.charCodeAt(0)-65)*26+(he.charCodeAt(1)-65);const Bt=Math.floor(St/2);Bt<26?Ye.add(String.fromCharCode(65+Bt)):Ye.add(String.fromCharCode(65+Math.floor((Bt-26)/26))+String.fromCharCode(65+(Bt-26)%26))}),[...Ye].sort()},V=G=>{if(G.open_type&&G.open_type!=="developing")return G.open_type;const Ye=G.ib_high,he=G.ib_low,St=G.open,Bt=G.close||G.high;if(!Ye||!he||he>=999999||!St)return"OA";const Ot=Ye-he;if(Ot<=0)return"OA";const Gt=(Ye+he)/2,cn=(St-he)/Ot*100;return cn<=20&&Bt>Gt||cn>=80&&Bt<Gt?"OD":St>Gt&&G.low<he&&Bt>Ye||St<Gt&&G.high>Ye&&Bt<he?"OTD":G.high>Ye&&Bt<Gt||G.low<he&&Bt>Gt?"ORR":"OA"},Q=ae.map(G=>{var Ki,Uo,zi;const Ye=G.tpo_profiles||{};let he=0,St=0;const Bt={},Ot={},Gt={},cn={},Pt=G.price_volumes&&Object.keys(G.price_volumes).length>0,qt=G.delta_by_price||{};Object.entries(Ye).forEach(([Dt,Wt])=>{const Lt=parseFloat(Dt),ln=Math.floor(Lt/de)*de;if(Bt[ln]||(Bt[ln]=new Set),x(Wt).forEach(Fn=>{Bt[ln].add(Fn);const fi=ce(Fn);fi>St&&(St=fi)}),!Pt){const Fn=Math.floor(Lt/ue)*ue;Ot[Fn]=(Ot[Fn]||0)+Wt.length,Gt[ln]=(Gt[ln]||0)+Wt.length}}),Pt&&Object.entries(G.price_volumes).forEach(([Dt,Wt])=>{const Lt=parseFloat(Dt),ln=Math.floor(Lt/ue)*ue,Vn=Math.floor(Lt/de)*de;Ot[ln]=(Ot[ln]||0)+Wt,Gt[Vn]=(Gt[Vn]||0)+Wt;const Fn=qt[Dt]||qt[Lt.toFixed(1)]||0;cn[ln]=(cn[ln]||0)+Fn});let gt=0,Vt=0,Ct=null;Object.entries(Bt).forEach(([Dt,Wt])=>{Wt.size>Vt&&(Vt=Wt.size,gt=parseFloat(Dt),Ct=Dt),Wt.size>he&&(he=Wt.size)});let Re=G.poc||gt,tt=0;Object.entries(Ot).forEach(([Dt,Wt])=>{Wt>tt&&(tt=Wt,Re=parseFloat(Dt))});let at=Re,en=Re;const It=Object.entries(Ot).map(([Dt,Wt])=>({price:parseFloat(Dt),vol:Wt})).sort((Dt,Wt)=>Dt.price-Wt.price),fn=It.reduce((Dt,Wt)=>Dt+Wt.vol,0)*.7;if(It.length>0){const Dt=It.findIndex(Vn=>Math.abs(Vn.price-Re)<ue);let Wt=((Ki=It[Dt])==null?void 0:Ki.vol)||0,Lt=Dt,ln=Dt;for(;Wt<fn&&(Lt<It.length-1||ln>0);){const Vn=Lt<It.length-1?It[Lt+1].vol:0,Fn=ln>0?It[ln-1].vol:0;if(Vn>=Fn&&Lt<It.length-1)Lt++,Wt+=It[Lt].vol;else if(ln>0)ln--,Wt+=It[ln].vol;else break}at=((Uo=It[Lt])==null?void 0:Uo.price)||Re,en=((zi=It[ln])==null?void 0:zi.price)||Re}const rn=Math.max(he*X+D+R+45,130),pn=Math.max((St+1)*X+D+R+45,180);let qn=null,Mi=null;const ei=[],wn=St,Vo=wn<26?String.fromCharCode(65+wn):"A"+String.fromCharCode(65+wn-26),Ti=[];if(Object.entries(Bt).forEach(([Dt,Wt])=>{const Lt=parseFloat(Dt);Wt.has("A")&&ei.push({price:Lt,key:Dt}),Wt.has(Vo)&&Ti.push({price:Lt,key:Dt})}),ei.length>0){const Dt=(Math.max(...ei.map(Lt=>Lt.price))+Math.min(...ei.map(Lt=>Lt.price)))/2;let Wt=ei[0];ei.forEach(Lt=>{Math.abs(Lt.price-Dt)<Math.abs(Wt.price-Dt)&&(Wt=Lt)}),qn=Wt.key}if(Ti.length>0){const Dt=(Math.max(...Ti.map(Lt=>Lt.price))+Math.min(...Ti.map(Lt=>Lt.price)))/2;let Wt=Ti[0];Ti.forEach(Lt=>{Math.abs(Lt.price-Dt)<Math.abs(Wt.price-Dt)&&(Wt=Lt)}),Mi=Wt.key}let di=null;const no=[],ci=[];if(Object.entries(Bt).forEach(([Dt,Wt])=>{const Lt=parseFloat(Dt);Wt.has("A")&&no.push(Lt),Wt.has("B")&&ci.push(Lt)}),no.length>0&&ci.length>0){const Dt=Math.max(...no),Wt=Math.min(...no),Lt=Math.max(...ci),ln=Math.min(...ci),Vn=Dt-Wt,Fn=Lt-ln,fi=Math.min(Dt,Lt),bt=Math.max(Wt,ln),Ae=Math.max(0,fi-bt),Et=Math.min(Vn,Fn);Et>0?di=Math.round(Ae/Et*100):Ae>0?di=100:di=0}return{...G,lettersByPrice:Bt,volumeByPrice:Ot,volumeByPriceCoarse:Gt,deltaByPrice:cn,maxVol:tt,dayVPOC:Re,tpoPOC:gt,pocPriceKey:Ct,openPriceKey:qn,closePriceKey:Mi,abOverlap:di,volVAH:at,volVAL:en,maxLetters:Math.max(he,1),maxPeriod:St,width:ie==="expanded"?pn:rn,open_type:V(G)}});let K=0,je=999999;ae.forEach(G=>{G.high>K&&(K=G.high),G.low<je&&(je=G.low)}),K=Math.ceil(K/de)*de+de*3,je=Math.floor(je/de)*de-de*3;const We=[];for(let G=K;G>=je;G-=de)We.push(G);let Ve=0;const ht=Q.map(G=>{const Ye=Ve;return Ve+=G.width,Ye}),me=Ve;let be=0;const Ee=(G,Ye)=>{if(!Ye)return;const he=Ye.getBoundingClientRect();be=Ye.scrollLeft;const St=Ye.scrollTop,Bt=G.clientX-he.left,Ot=Bt+be,Gt=G.clientY-he.top,cn=Gt-36+St;let Pt=Q.length-1;for(let Vt=0;Vt<Q.length;Vt++)if(Ot<ht[Vt]+Q[Vt].width){Pt=Vt;break}const qt=Math.floor(cn/ze),gt=We[qt]||0;Be({show:!0,x:Bt,y:Gt,clientX:G.clientX,clientY:G.clientY,chartLeft:he.left,chartTop:he.top,chartRight:he.right,chartBottom:he.bottom,scrollLeft:be,scrollTop:St,price:gt,dayIdx:Pt,day:Q[Pt]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[_.show&&_.day&&Oe&&e.jsxs("div",{style:{position:"absolute",left:_.x+65,top:Math.max(10,_.y-140),background:"rgba(20,20,35,0.95)",border:"1px solid rgba(147,112,219,0.5)",borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:"#ba68c8",fontWeight:700,marginBottom:4},children:[(et=_.day)==null?void 0:et.weekday," ",(Tt=_.day)==null?void 0:Tt.date]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:k?"09:30 - 16:15 ET":"18:00 - 17:00 ET"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((Me=_.price)==null?void 0:Me.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof((ft=_.day)==null?void 0:ft.poc)=="number"?_.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((Qt=_.day)==null?void 0:Qt.vah)=="number"?_.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((Nt=_.day)==null?void 0:Nt.val)=="number"?_.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((Mt=_.day)==null?void 0:Mt.ib_high)=="number"?_.day.ib_high.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((Ht=_.day)==null?void 0:Ht.ib_low)=="number"?_.day.ib_low.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof(($t=_.day)==null?void 0:$t.ib_high)=="number"&&typeof((Z=_.day)==null?void 0:Z.ib_low)=="number"&&((ve=_.day)==null?void 0:ve.high)>((_t=_.day)==null?void 0:_t.low)?((_.day.ib_high-_.day.ib_low)/(_.day.high-_.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((Ut=_.day)==null?void 0:Ut.volVAH)=="number"?_.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((Zt=_.day)==null?void 0:Zt.volVAL)=="number"?_.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:F[(Ze=_.day)==null?void 0:Ze.day_type]||"#888",fontWeight:600},children:((Xt=(pt=_.day)==null?void 0:pt.day_type)==null?void 0:Xt.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((yt=(ge=_.day)==null?void 0:ge.open_type)==null?void 0:yt.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((ut=(jt=_.day)==null?void 0:jt.profile_shape)==null?void 0:ut.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:((mt=_.day)==null?void 0:mt.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((zt=_.day)==null?void 0:zt.abOverlap)=="number"?_.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-4w",children:We.map(G=>{const Ye=G%20===0,he=G%100===0;return e.jsx("div",{style:{height:ze,fontSize:he?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:he?"rgba(147,112,219,0.9)":Ye?"#666":"transparent",fontWeight:he?600:400,borderBottom:he?"1px solid rgba(147,112,219,0.1)":"none"},children:Ye?G.toFixed(0):""},G)})})]}),e.jsxs("div",{id:"tpo-chart-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:G=>{const Ye=document.getElementById("price-scale-4w");Ye&&(Ye.scrollTop=G.target.scrollTop)},onMouseMove:G=>Ee(G,G.currentTarget),onClick:()=>ne(!Oe),onMouseLeave:()=>{Oe||Be({..._,show:!1})},ref:G=>{le.current=G,G&&!v.current&&me>G.clientWidth&&(G.scrollLeft=me-G.clientWidth,v.current=!0)},children:[_.show&&_.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:_.chartLeft+50,right:window.innerWidth-_.chartRight,height:1,top:_.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:_.clientX,top:_.chartTop,height:_.chartBottom-_.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:Q.map((G,Ye)=>e.jsxs("div",{style:{width:G.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.2)",background:_.dayIdx===Ye?"rgba(186,104,200,0.2)":"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:"#ba68c8",fontWeight:700},children:G.weekday}),e.jsx("div",{style:{fontSize:8,color:"#666"},children:G.date.slice(5)})]},G.date))}),e.jsxs("div",{style:{position:"relative"},children:[We.map((G,Ye)=>e.jsx("div",{style:{display:"flex",height:ze,borderBottom:G%20===0?"1px solid rgba(147,112,219,0.12)":"none",background:_.price===G?"rgba(186,104,200,0.06)":"transparent"},children:Q.map((he,St)=>{const Bt=he.lettersByPrice[G]?[...he.lettersByPrice[G]].sort():[],Ot=he.vah&&he.val&&G<=he.vah&&G>=he.val;(he.high+he.low)/2;const Gt=he.openPriceKey&&G.toString()===he.openPriceKey,cn=he.maxPeriod>=0?he.maxPeriod<26?String.fromCharCode(65+he.maxPeriod):"A"+String.fromCharCode(65+he.maxPeriod-26):null,Pt=he.closePriceKey&&G.toString()===he.closePriceKey,qt=he.pocPriceKey&&G.toString()===he.pocPriceKey,Vt=he.close&&he.open&&he.close>=he.open?"#00ff88":"#ff4466";for(let Ct=0;Ct<Ge;Ct++){const Re=G-Ct*ue;he.volumeByPrice[Re],he.dayVPOC&&Math.abs(Re-he.dayVPOC)<ue,he.volVAH&&Math.abs(Re-he.volVAH)<ue,he.volVAL&&Math.abs(Re-he.volVAL)<ue}return e.jsx("div",{style:{width:he.width,flexShrink:0,height:ze,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.15)",position:"relative",paddingLeft:14,paddingRight:R+D+14},children:ie==="expanded"?e.jsx("div",{style:{position:"relative",width:(he.maxPeriod+1)*X,height:ze-2},children:Bt.map((Ct,Re)=>{const tt=Ct.length===1?Ct.charCodeAt(0)-65:26+(Ct.charCodeAt(0)-65)*26+(Ct.charCodeAt(1)-65),at=Ct==="A"&&Gt,en=Ct===cn&&Pt&&!at,It=qt?"#000":at?"#fff":en?"#000":Ot?Vt:"#888",hn=qt?"#ffffff":at?"rgba(100,100,100,0.6)":en?Vt:Ot?`${Vt}30`:"rgba(136,136,136,0.25)",fn=qt||at?"1px solid #fff":en?`1px solid ${Vt}`:Ot?`1px solid ${Vt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:tt*X,width:X-1,height:ze-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:It,background:hn,borderRadius:2,border:fn},children:Ct},Re)})}):Bt.map((Ct,Re)=>{const tt=Ct==="A"&&Gt,at=Ct===cn&&Pt&&!tt,en=qt?"#000":tt?"#fff":at?"#000":Ot?Vt:"#888",It=qt?"#ffffff":tt?"rgba(100,100,100,0.6)":at?Vt:Ot?`${Vt}30`:"rgba(136,136,136,0.25)",hn=qt||tt?"1px solid #fff":at?`1px solid ${Vt}`:Ot?`1px solid ${Vt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{width:X,height:ze-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:700,color:en,background:It,borderRadius:2,marginRight:1,border:hn},children:Ct},Re)})},`${he.date}-${G}`)})},G)),Q.map((G,Ye)=>{const he=ht[Ye],St=We.length*ze,Bt=(G.high+G.low)/2,Ot=Pt=>{const qt=Math.floor(Pt/de)*de,gt=(K-qt)/de,Vt=1-(Pt-qt)/de;return(gt+Vt)*ze},Gt=Object.entries(G.volumeByPrice||{}).map(([Pt,qt])=>{var Ct,Re;const gt=parseFloat(Pt),Vt=((Ct=G.deltaByPrice)==null?void 0:Ct[Pt])??((Re=G.deltaByPrice)==null?void 0:Re[gt]);return{price:gt,vol:qt,delta:Vt}}).filter(Pt=>Pt.vol>0).sort((Pt,qt)=>qt.price-Pt.price),cn=Math.max(...Gt.map(Pt=>Pt.vol),1);return e.jsxs(Pi.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:he+G.width-R-10,top:0,width:R,height:St,borderLeft:"1px solid rgba(147,112,219,0.25)",overflow:"hidden"},children:Gt.map((Pt,qt)=>{const gt=Ot(Pt.price),Vt=1,Ct=G.dayVPOC&&Math.abs(Pt.price-G.dayVPOC)<1,Re=G.volVAH&&Math.abs(Pt.price-G.volVAH)<1,tt=G.volVAL&&Math.abs(Pt.price-G.volVAL)<1,en=Pt.delta!==void 0&&Pt.delta!==null&&Pt.delta!==0?Pt.delta>0:Pt.price>Bt;return e.jsx("div",{style:{position:"absolute",top:gt,left:4,width:`${Math.min(Pt.vol/cn*95,95)}%`,height:Vt,background:Ct?"#ff9900":Re?"#00ff88":tt?"#ff4466":en?"#00dd77":"#cc3366",opacity:.85}},qt)})}),e.jsx("div",{style:{position:"absolute",left:he+G.width-8,top:Ot(G.close||G.low)-5,fontSize:8,color:"#666",fontWeight:500,pointerEvents:"none",zIndex:5},children:"4pm"})]},`vp-${Ye}`)}),Q.map((G,Ye)=>{const he=Bt=>{const Ot=Math.floor(Bt/de)*de,Gt=(K-Ot)/de,cn=1-(Bt-Ot)/de;return(Gt+cn)*ze},St=ht[Ye];return(G.high+G.low)/2,e.jsxs(Pi.Fragment,{children:[G.ib_high&&G.ib_low&&e.jsx("div",{style:{position:"absolute",left:St+7,top:he(G.ib_high),width:2,height:he(G.ib_low)-he(G.ib_high),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),G.volVAH&&e.jsx("div",{style:{position:"absolute",left:St+G.width-8,top:he(G.volVAH)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),G.volVAL&&e.jsx("div",{style:{position:"absolute",left:St+G.width-8,top:he(G.volVAL)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${G.date}`)})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Range ",e.jsx("span",{style:{color:"#9370DB",fontWeight:600},children:(K-je).toFixed(0)})]}),e.jsxs("span",{style:{color:"#666"},children:["Days ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:ae.length})]}),e.jsx("span",{style:{color:"#fff",background:"#fff",padding:"0 4px",borderRadius:2},children:e.jsx("span",{style:{color:"#000"},children:"POC"})}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" IB"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():s==="session_view"&&(n!=null&&n.sessions)?(()=>{var R,D,x,V,Q,K,je,We,Ve,ht;const k=Object.entries((n==null?void 0:n.sessions)||{}).filter(([me,be])=>be.profiles&&Object.keys(be.profiles).length>0);if(k.length===0)return e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No session data yet..."});const M=.5,pe=14,ce=11,xe=45,qe=16,N=11,ae=me=>me.length===1?me.charCodeAt(0)-65:26+(me.charCodeAt(0)-65)*26+(me.charCodeAt(1)-65),we=k.map(([me,be])=>{const Ee=be.profiles||{};let et=0,Tt=0;const Me={},ft={};Object.entries(Ee).forEach(([$t,Z])=>{const ve=Math.floor(parseFloat($t)/M)*M;Me[ve]||(Me[ve]=new Set),Z.forEach(_t=>{Me[ve].add(_t);const Ut=ae(_t);Ut>Tt&&(Tt=Ut)}),ft[ve]=(ft[ve]||0)+Z.length}),Object.values(Me).forEach($t=>{$t.size>et&&(et=$t.size)});let Qt=be.poc,Nt=0;Object.entries(ft).forEach(([$t,Z])=>{Z>Nt&&(Nt=Z,Qt=parseFloat($t))});const Mt=Math.max(et*ce+qe+xe+16,120),Ht=Math.max((Tt+1)*N+qe+xe+16,150);return{key:me,...be,lettersByPrice:Me,volumeByPrice:ft,maxVol:Nt,sessionVPOC:Qt,maxLetters:Math.max(et,1),maxPeriod:Tt,width:ie==="expanded"?Ht:Mt}});let Te=0,$e=999999;k.forEach(([me,be])=>{be.high>Te&&(Te=be.high),be.low<$e&&($e=be.low)}),Te=Math.ceil(Te/M)*M+M*5,$e=Math.floor($e/M)*M-M*5;const de=[];for(let me=Te;me>=$e;me-=M)de.push(me);let ue=0;const Ge=we.map(me=>{const be=ue;return ue+=me.width,be});let ze=0;const X=(me,be)=>{if(!be)return;const Ee=be.getBoundingClientRect();ze=be.scrollLeft;const et=be.scrollTop,Tt=me.clientX-Ee.left,Me=Tt+ze,ft=me.clientY-Ee.top,Qt=ft-36+et;let Nt=we.length-1;for(let $t=0;$t<we.length;$t++)if(Me<Ge[$t]+we[$t].width){Nt=$t;break}const Mt=Math.floor(Qt/pe),Ht=de[Mt]||0;Be({show:!0,x:Tt,y:ft,clientX:me.clientX,clientY:me.clientY,chartLeft:Ee.left,chartTop:Ee.top,chartRight:Ee.right,chartBottom:Ee.bottom,scrollLeft:ze,scrollTop:et,price:Ht,dayIdx:Nt,day:we[Nt]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[_.show&&_.day&&Oe&&e.jsxs("div",{style:{position:"absolute",left:Math.max(60,Math.min(_.x+60,500)),top:Math.max(50,Math.min(_.y,300)),background:"rgba(20,20,35,0.95)",border:`1px solid ${((R=_.day)==null?void 0:R.color)||"#9370DB"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",pointerEvents:"none"},children:[e.jsx("div",{style:{fontSize:12,color:((D=_.day)==null?void 0:D.color)||"#ba68c8",fontWeight:700,marginBottom:6},children:(x=_.day)==null?void 0:x.display}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:(V=_.price)==null?void 0:V.toFixed(1)}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:(K=(Q=_.day)==null?void 0:Q.poc)==null?void 0:K.toFixed(1)}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(We=(je=_.day)==null?void 0:je.vah)==null?void 0:We.toFixed(1)}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:(ht=(Ve=_.day)==null?void 0:Ve.val)==null?void 0:ht.toFixed(1)})]})]}),e.jsxs("div",{style:{width:50,flexShrink:0,background:"rgba(15,15,25,0.95)",borderRight:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{height:36,background:"rgba(147,112,219,0.08)",borderBottom:"1px solid rgba(147,112,219,0.2)"}}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-sess",children:de.map(me=>e.jsx("div",{style:{height:pe,fontSize:9,textAlign:"right",paddingRight:4,color:"#555",lineHeight:`${pe}px`},children:me%10===0?me.toFixed(0):""},me))})]}),e.jsxs("div",{id:"tpo-session-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:me=>{const be=document.getElementById("price-scale-sess");be&&(be.scrollTop=me.target.scrollTop)},onMouseMove:me=>X(me,me.currentTarget),onClick:()=>ne(!Oe),onMouseLeave:()=>{Oe||Be({..._,show:!1})},children:[_.show&&_.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:_.chartLeft+50,right:window.innerWidth-_.chartRight,height:1,top:_.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:_.clientX,top:_.chartTop,height:_.chartBottom-_.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:we.map((me,be)=>e.jsxs("div",{style:{width:me.width,flexShrink:0,textAlign:"center",padding:"8px 4px",borderRight:"1px solid rgba(147,112,219,0.2)",background:_.dayIdx===be?`${me.color}20`:"transparent"},children:[e.jsx("div",{style:{fontSize:11,color:me.color,fontWeight:700},children:me.display}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[me.period_count," periods"]})]},me.key))}),e.jsxs("div",{style:{position:"relative"},children:[de.map((me,be)=>e.jsx("div",{style:{display:"flex",height:pe,borderBottom:me%10===0?"1px solid rgba(147,112,219,0.12)":"none",background:_.price===me?"rgba(186,104,200,0.06)":"transparent"},children:we.map((Ee,et)=>{var Z;const Tt=Ee.lettersByPrice[me]?[...Ee.lettersByPrice[me]].sort():[],Me=Ee.volumeByPrice[me]||0,ft=Ee.maxVol>0?Me/Ee.maxVol*100:0,Qt=Ee.sessionVPOC&&Math.abs(me-Ee.sessionVPOC)<M,Nt=Ee.vah&&Ee.val&&me<=Ee.vah&&me>=Ee.val,Mt=((Z=Ee.deltaByPrice)==null?void 0:Z[me])||0,$t=Ee.deltaByPrice&&Object.keys(Ee.deltaByPrice).length>0?Mt>=0:me>(Ee.high+Ee.low)/2;return e.jsxs("div",{style:{width:Ee.width,flexShrink:0,height:pe,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.1)",position:"relative",paddingLeft:14,paddingRight:xe+qe+14},children:[ie==="expanded"?e.jsx("div",{style:{display:"flex",position:"relative",width:(Ee.maxPeriod+1)*N,height:pe-2},children:Tt.map((ve,_t)=>{const Ut=ae(ve);return e.jsx("span",{style:{position:"absolute",left:Ut*N,width:N-1,height:pe-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Nt?"#00ee88":Ee.color,background:`${Ee.color}30`,borderRadius:2,border:`1px solid ${Ee.color}50`},children:ve},_t)})}):Tt.map((ve,_t)=>e.jsx("span",{style:{width:ce,height:pe-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Nt?"#00ee88":Ee.color,background:`${Ee.color}30`,borderRadius:2,marginRight:1,border:`1px solid ${Ee.color}50`},children:ve},_t)),Me>0&&e.jsx("div",{style:{position:"absolute",right:12,width:xe,height:pe-2,display:"flex",alignItems:"center",paddingLeft:qe,borderLeft:"1px solid rgba(147,112,219,0.15)"},children:e.jsx("div",{style:{width:`${ft}%`,height:1,marginBottom:1,opacity:.9,background:Qt?"#ff9900":$t?"#00ee88":"#ff2266",borderRadius:0}})})]},`${Ee.key}-${me}`)})},me)),we.map((me,be)=>{const Ee=ft=>{const Qt=Math.floor(ft/M)*M,Nt=(Te-Qt)/M,Mt=1-(ft-Qt)/M;return(Nt+Mt)*pe},et=Ge[be],Tt=(me.high+me.low)/2,Me=[];return me.poc&&Me.push({price:me.poc,color:"#ffcc00",label:"",type:"poc"}),Me.push({price:Tt,color:"#00aaff",label:"",type:"mid"}),me.vah&&Me.push({price:me.vah,color:"#00ff88",label:"",type:"vah"}),me.val&&Me.push({price:me.val,color:"#ff4466",label:"",type:"val"}),Me.map(ft=>e.jsx("div",{style:{position:"absolute",left:et+1,top:Ee(ft.price)-5,color:ft.color,fontSize:ft.type==="mid"?10:8,fontWeight:700,zIndex:10,textShadow:"0 0 3px rgba(0,0,0,0.8)",pointerEvents:"none"},children:ft.label},`${me.key}-${ft.type}`))})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Sessions ",e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:we.length})]}),e.jsx("span",{style:{color:"#ffcc00"},children:" POC"}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():a.length===0?e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No TPO data yet. Waiting for trades..."}):e.jsxs(e.Fragment,{children:[(()=>{const k=Math.max(...a.map(we=>we.letters.length),1),M=Math.max(...a.flatMap(we=>we.letters.map(Te=>Xe(Te))),0),pe=11,ce=Qe||(n==null?void 0:n.tick_size)||.1,xe=(J==null?void 0:J.open_price)||(n==null?void 0:n.open_price),qe=Math.max(...a.map(we=>we.price)),N=Math.min(...a.map(we=>we.price)),ae=(qe+N)/2;return a.map(({price:we,letters:Te})=>{const $e=(J==null?void 0:J.poc)&&Math.abs(we-J.poc)<ce,de=(J==null?void 0:J.vah)&&Math.abs(we-J.vah)<ce,ue=(J==null?void 0:J.val)&&Math.abs(we-J.val)<ce,Ge=(J==null?void 0:J.vah)&&(J==null?void 0:J.val)&&we<=J.vah&&we>=J.val,ze=(J==null?void 0:J.ib_high)&&(J==null?void 0:J.ib_low)&&we<=J.ib_high&&we>=J.ib_low;J!=null&&J.ib_high&&Math.abs(we-J.ib_high)<ce,J!=null&&J.ib_low&&Math.abs(we-J.ib_low)<ce;const X=Te.length===1,R=(n==null?void 0:n.current_price)&&Math.abs(we-n.current_price)<ce,D=xe&&Math.abs(we-xe)<ce,x=Math.abs(we-ae)<ce;return e.jsxs("div",{style:{display:"flex",alignItems:"center",height:16,position:"relative",background:ze?"rgba(0, 188, 212, 0.08)":"transparent"},children:[e.jsx("div",{style:{width:55,textAlign:"right",paddingRight:6,fontSize:9,color:$e?"#fff":R?"#00ff88":"#555",fontWeight:$e||R?700:400,flexShrink:0},children:we.toFixed(1)}),e.jsxs("div",{style:{width:40,fontSize:8,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:4,flexShrink:0,gap:2},children:[de&&!$e&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAH"}),ue&&!$e&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAL"}),x&&!$e&&e.jsx("span",{style:{color:"#ff9800",fontSize:7},children:"Mid"}),D&&!$e&&e.jsx("span",{style:{color:"#888",fontSize:7},children:"Open"}),R&&e.jsx("span",{style:{color:"#00ff88"},children:""})]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",gap:ie==="compact"?1:0,position:"relative",minHeight:14,minWidth:ie==="expanded"?(M+1)*pe:"auto",overflowX:ie==="expanded"?"visible":"hidden"},children:ie==="compact"?Te.map((V,Q)=>{const K=V==="A"&&D;return e.jsx("div",{style:{width:13,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:$e?"#ffffff":K?"rgba(100,100,100,0.6)":X?"rgba(255,68,102,0.9)":Ge?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:8,fontWeight:600,color:$e?"#1a1a2e":"#fff",flexShrink:0,border:$e?"none":K?"1px solid #fff":Ge?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:V},`${we}-${V}-${Q}`)}):e.jsx("div",{style:{position:"relative",width:(M+1)*pe,height:14},children:Te.map((V,Q)=>{const K=Xe(V),je=V==="A"&&D;return e.jsx("div",{style:{position:"absolute",left:K*pe,width:pe-1,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:$e?"#ffffff":je?"rgba(100,100,100,0.6)":X?"rgba(255,68,102,0.9)":Ge?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:7,fontWeight:600,color:$e?"#1a1a2e":"#fff",border:$e?"none":je?"1px solid #fff":Ge?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:V},`${we}-${V}-${Q}`)})})}),e.jsx("div",{style:{width:60,height:12,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:4,flexShrink:0},children:e.jsx("div",{style:{height:10,width:`${Te.length/k*100}%`,background:$e?"rgba(255,255,255,0.6)":Ge?"rgba(186, 104, 200, 0.5)":"rgba(100,100,120,0.4)",borderRadius:1}})})]},we)})})(),(J==null?void 0:J.ib_high)&&(J==null?void 0:J.ib_low)&&e.jsxs("div",{style:{marginTop:8,padding:"6px 10px",background:"rgba(0, 188, 212, 0.15)",borderRadius:4,border:"1px solid rgba(0, 188, 212, 0.3)",display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:"#00bcd4"},children:"IB Range"}),e.jsxs("span",{style:{color:"#fff"},children:[(Ci=J.ib_high)==null?void 0:Ci.toFixed(1)," - ",(Wi=J.ib_low)==null?void 0:Wi.toFixed(1),e.jsxs("span",{style:{color:"#888",marginLeft:8},children:["(",(J.ib_high-J.ib_low||0).toFixed(1)," pts)"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(20,20,28,0.6)",borderRadius:8,border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"HL range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.high&&(J!=null&&J.low)?(J.high-J.low).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VA range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.vah&&(J!=null&&J.val)?(J.vah-J.val).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAH"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:((Gi=J==null?void 0:J.vah)==null?void 0:Gi.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAL"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:((li=J==null?void 0:J.val)==null?void 0:li.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"POC"}),e.jsx("div",{style:{color:"#ffaa00",fontFamily:"monospace"},children:((ai=J==null?void 0:J.poc)==null?void 0:ai.toFixed(1))||"--"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,fontSize:11,marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"Total vol"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.volume?J.volume>=1e3?(J.volume/1e3).toFixed(2)+"K":J.volume:"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB high"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((Fi=J==null?void 0:J.ib_high)==null?void 0:Fi.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB low"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((to=J==null?void 0:J.ib_low)==null?void 0:to.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.ib_high&&(J!=null&&J.ib_low)?(J.ib_high-J.ib_low).toFixed(1):"--"})]})]})]})]})})]}),!T&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Day Type"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("div",{style:{padding:"8px 16px",background:`${F[H.day_type]||"#888"}20`,border:`1px solid ${F[H.day_type]||"#888"}`,borderRadius:8,color:F[H.day_type]||"#888",fontWeight:700,fontSize:14},children:H.day_type_name||"Developing"}),e.jsxs("div",{style:{color:"#8b8b8b",fontSize:12},children:[H.day_type_confidence||0,"%"]})]}),H.day_type_scores&&Object.entries(H.day_type_scores).map(([k,M])=>e.jsxs("div",{style:{marginBottom:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,marginBottom:2},children:[e.jsx("span",{style:{color:"#aaa",textTransform:"capitalize"},children:k.replace("_"," ")}),e.jsxs("span",{style:{color:F[k]||"#888"},children:[M,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min(M,100)}%`,background:F[k]||"#888",borderRadius:2}})})]},k)),H.trade_setup&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"rgba(0,255,136,0.08)",borderRadius:6,border:"1px solid rgba(0,255,136,0.2)"},children:[e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:4},children:"TRADE SETUP"}),e.jsx("div",{style:{fontSize:12,color:"#ccc"},children:H.trade_setup})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Open Type (RTH)"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:e.jsx("div",{style:{padding:"8px 16px",background:`${B[H.open_type]||"#888"}20`,border:`1px solid ${B[H.open_type]||"#888"}`,borderRadius:8,color:B[H.open_type]||"#888",fontWeight:700,fontSize:14},children:((Yi=H.open_type_info)==null?void 0:Yi.name)||"Developing"})}),H.open_type_info&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:12,color:"#aaa",marginBottom:8},children:H.open_type_info.description}),e.jsxs("div",{style:{display:"flex",gap:16,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Conviction: "}),e.jsx("span",{style:{color:B[H.open_type]||"#888",fontWeight:600},children:((Xi=H.open_type_info)==null?void 0:Xi.conviction)||"N/A"})]}),(n==null?void 0:n.open_direction)&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Direction: "}),e.jsx("span",{style:{color:(n==null?void 0:n.open_direction)==="up"?"#00ff88":"#ff4466",fontWeight:600},children:(Zn=n==null?void 0:n.open_direction)==null?void 0:Zn.toUpperCase()})]})]})]}),(n==null?void 0:n.ab_overlap)!==void 0&&e.jsxs("div",{style:{marginTop:12,fontSize:11},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"AB Overlap"}),e.jsxs("span",{style:{color:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88"},children:[n==null?void 0:n.ab_overlap,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min((n==null?void 0:n.ab_overlap)||0,100)}%`,background:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88",borderRadius:2}})})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Profile Shape"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("div",{style:{width:48,height:48,background:"rgba(255,255,255,0.05)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:800,color:((zn=H.profile_shape_info)==null?void 0:zn.sentiment)==="Bullish"?"#00ff88":((xo=H.profile_shape_info)==null?void 0:xo.sentiment)==="Bearish"?"#ff4466":"#888"},children:A[H.profile_shape]||""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((yo=H.profile_shape_info)==null?void 0:yo.sentiment)==="Bullish"?"#00ff88":((mo=H.profile_shape_info)==null?void 0:mo.sentiment)==="Bearish"?"#ff4466":"#aaa"},children:((bo=H.profile_shape_info)==null?void 0:bo.name)||"Developing"}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b"},children:((vo=H.profile_shape_info)==null?void 0:vo.sentiment)||"N/A"})]})]}),((jo=H.profile_shape_info)==null?void 0:jo.description)&&e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:H.profile_shape_info.description})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Metrics"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"IB Range %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[n!=null&&n.ib_range?(n.ib_range/n.avg_daily_range*100).toFixed(0):"--","%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"Range Ext %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[((te=n==null?void 0:n.range_extension_pct)==null?void 0:te.toFixed(0))||"--","%"]})]})]}),(n==null?void 0:n.ib_high)&&(n==null?void 0:n.ib_low)&&(n==null?void 0:n.ib_range)&&(()=>{const k=n.ib_range,M=H.day_type||"normal",pe=M==="trend"?2:M==="normal_var"?1.5:M==="neutral"?.5:1,ce=k*pe,xe=n.high||n.ib_high,qe=n.low||n.ib_low,N=Math.max(0,xe-n.ib_high),ae=Math.max(0,n.ib_low-qe),we=Math.max(0,ce-N),Te=Math.max(0,ce-ae),$e=n.ib_high+ce,de=n.ib_low-ce;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",marginBottom:12}}),e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Price Targets"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",marginBottom:2},children:"Upside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#00ff88"},children:["$",$e.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["+",we.toFixed(1)," pts remaining"]})]}),e.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#ff4466",marginBottom:2},children:"Downside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#ff4466"},children:["$",de.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["-",Te.toFixed(1)," pts remaining"]})]})]}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:8,textAlign:"center"},children:["Based on ",pe,"x IB (",M.replace("_"," "),")"]})]})})()]})]}),e.jsx("div",{style:{gridColumn:"1 / -1",marginTop:20},children:e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>W(!L),style:{width:"100%",padding:"16px 20px",background:"transparent",border:"none",borderBottom:L?"1px solid rgba(255,255,255,0.08)":"none",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{children:"Historic TPO Profiles (Last 8 Weeks)"}),g&&e.jsxs("span",{style:{fontSize:11,color:"#8b8b8b",fontWeight:400},children:[g.days," trading days"]})]}),e.jsx("span",{style:{fontSize:18,transform:L?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"},children:""})]}),L&&e.jsx("div",{style:{padding:20},children:y?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading historic TPO data..."]}):((st=g==null?void 0:g.profiles)==null?void 0:st.length)>0?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("button",{onClick:()=>Ue(!Y),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"#aaa",cursor:"pointer",fontSize:12,fontWeight:500},children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,background:Y?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.1)",color:Y?"#00ff88":"#888",fontSize:12,fontWeight:700},children:Y?"":"+"}),e.jsxs("span",{style:{color:Y?"#fff":"#888"},children:[Y?"Hide":"Show"," Data Table"]}),e.jsxs("span",{style:{fontSize:10,color:"#666"},children:["(",g.profiles.length," rows)"]})]}),e.jsxs("button",{onClick:()=>{const k=["Date","Day","Open","High","Low","Close","POC","VAH","VAL","IB_High","IB_Low","IB_Range","Range","Day_Type","Shape"],M=g.profiles.map(N=>{var ae,we,Te,$e,de,ue,Ge,ze,X,R,D;return[N.date,N.weekday,((ae=N.open)==null?void 0:ae.toFixed(2))||"",((we=N.high)==null?void 0:we.toFixed(2))||"",((Te=N.low)==null?void 0:Te.toFixed(2))||"",(($e=N.close)==null?void 0:$e.toFixed(2))||"",((de=N.poc)==null?void 0:de.toFixed(2))||"",((ue=N.vah)==null?void 0:ue.toFixed(2))||"",((Ge=N.val)==null?void 0:Ge.toFixed(2))||"",((ze=N.ib_high)==null?void 0:ze.toFixed(2))||"",((X=N.ib_low)==null?void 0:X.toFixed(2))||"",((R=N.ib_range)==null?void 0:R.toFixed(2))||"",((D=N.range)==null?void 0:D.toFixed(2))||"",N.day_type||"",N.profile_shape||""].join(",")}),pe=[k.join(","),...M].join(`
`),ce=new Blob([pe],{type:"text/csv"}),xe=URL.createObjectURL(ce),qe=document.createElement("a");qe.href=xe,qe.download=`tpo_historic_${new Date().toISOString().slice(0,10)}.csv`,qe.click(),URL.revokeObjectURL(xe)},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(0,170,255,0.15)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:6,color:"#00aaff",cursor:"pointer",fontSize:11,fontWeight:600},children:[e.jsx("span",{children:""})," Export CSV"]})]}),Y&&e.jsx("div",{style:{overflowX:"auto",marginBottom:20},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,255,255,0.15)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#8b8b8b",fontWeight:500},children:"Date"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b",fontWeight:500},children:"Day"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontWeight:600},children:"POC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAH"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB H"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB L"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"High"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"Low"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b"},children:"Range"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Type"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Shape"})]})}),e.jsx("tbody",{children:g.profiles.map((k,M)=>{var qe,N,ae,we,Te,$e,de,ue;const pe={normal:"#00aaff",trend:"#ff6600",normal_var:"#00ff88",neutral:"#9370DB",non_trend:"#888888",double_dist:"#ff4466"},ce={normal:"Normal",trend:"Trend",normal_var:"NV",neutral:"Neutral",non_trend:"Non-Tr",double_dist:"DD"},xe={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"};return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.06)",background:M===0?"rgba(0,255,136,0.05)":"transparent"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"monospace"},children:k.date}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:k.weekday}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontFamily:"monospace",fontWeight:600},children:((qe=k.poc)==null?void 0:qe.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((N=k.vah)==null?void 0:N.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((ae=k.val)==null?void 0:ae.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((we=k.ib_high)==null?void 0:we.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((Te=k.ib_low)==null?void 0:Te.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:(($e=k.high)==null?void 0:$e.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((de=k.low)==null?void 0:de.toFixed(2))||"--"}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b",fontFamily:"monospace"},children:["$",((ue=k.range)==null?void 0:ue.toFixed(2))||"--"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,background:`${pe[k.day_type]||"#888"}30`,color:pe[k.day_type]||"#888",border:`1px solid ${pe[k.day_type]||"#888"}50`},children:ce[k.day_type]||k.day_type})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",width:22,height:22,lineHeight:"22px",textAlign:"center",borderRadius:4,fontSize:12,fontWeight:700,background:`${xe[k.profile_shape]||"#888"}20`,color:xe[k.profile_shape]||"#888",border:`1px solid ${xe[k.profile_shape]||"#888"}50`},children:k.profile_shape})})]},k.date)})})]})}),(()=>{const k=g.profiles,M=k.reduce((N,ae)=>N+(ae.poc||0),0)/k.length||0,pe=k.reduce((N,ae)=>N+(ae.range||0),0)/k.length||0,ce=k.filter(N=>N.ib_range),xe=ce.reduce((N,ae)=>N+ae.ib_range,0)/ce.length||0,qe=pe>0?xe/pe*100:0;return e.jsxs("div",{style:{marginTop:20,padding:16,background:"rgba(30,30,40,0.6)",borderRadius:8,display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg POC"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#ffaa00",fontFamily:"monospace"},children:["$",M.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",pe.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",xe.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB %"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[qe.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Trend Days"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#ff6600"},children:k.filter(N=>N.day_type==="trend").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Normal Var"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#00ff88"},children:k.filter(N=>N.day_type==="normal_var").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Non-Trend"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#888"},children:k.filter(N=>N.day_type==="non_trend").length})]})]})})(),(()=>{const k=g.profiles,M=["Mon","Tue","Wed","Thu","Fri"],pe={normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},ce={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"},xe={};M.forEach(N=>xe[N]=[]),k.forEach(N=>{xe[N.weekday]&&xe[N.weekday].push(N)});const qe=M.map(N=>{const ae=xe[N];if(ae.length===0)return{day:N,count:0};const we={},Te={};ae.forEach(X=>{we[X.day_type]=(we[X.day_type]||0)+1,Te[X.profile_shape]=(Te[X.profile_shape]||0)+1});const $e=Object.entries(we).sort((X,R)=>R[1]-X[1])[0],de=Object.entries(Te).sort((X,R)=>R[1]-X[1])[0],ue=ae.reduce((X,R)=>X+(R.range||0),0)/ae.length,Ge=ae.filter(X=>X.ib_range).reduce((X,R)=>X+R.ib_range,0)/ae.filter(X=>X.ib_range).length||0,ze=ue>0?Ge/ue*100:0;return{day:N,count:ae.length,profiles:ae,mostCommonType:$e?$e[0]:"N/A",typePercent:$e?Math.round($e[1]/ae.length*100):0,mostCommonShape:de?de[0]:"N/A",shapePercent:de?Math.round(de[1]/ae.length*100):0,avgRange:ue.toFixed(2),avgIbRange:Ge.toFixed(2),ibPct:ze.toFixed(1),typeCounts:we,shapeCounts:Te}});return e.jsxs("div",{style:{marginTop:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,marginBottom:16,color:"#fff",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Day of Week Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:qe.map(N=>e.jsxs("div",{style:{background:"rgba(30,30,40,0.8)",borderRadius:8,padding:12,border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#fff",marginBottom:8},children:N.day}),e.jsxs("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:[N.count," samples"]}),N.count>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:8,marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Most Common Type"}),e.jsxs("div",{style:{display:"inline-block",padding:"2px 8px",borderRadius:4,background:`${pe[N.mostCommonType]||"#666"}22`,border:`1px solid ${pe[N.mostCommonType]||"#666"}`,color:pe[N.mostCommonType]||"#666",fontSize:10,fontWeight:600},children:[N.mostCommonType==="normal_var"?"N-Var":N.mostCommonType==="double_dist"?"Dbl-D":N.mostCommonType==="non_trend"?"Non-T":N.mostCommonType.charAt(0).toUpperCase()+N.mostCommonType.slice(1),e.jsxs("span",{style:{marginLeft:4,opacity:.7},children:[N.typePercent,"%"]})]})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Shape"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:4,background:`${ce[N.mostCommonShape]||"#666"}22`,border:`1px solid ${ce[N.mostCommonShape]||"#666"}44`,color:ce[N.mostCommonShape]||"#888",fontSize:11,fontWeight:700},children:[N.mostCommonShape,e.jsxs("span",{style:{fontSize:9,fontWeight:400,opacity:.7},children:[N.shapePercent,"%"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4,marginTop:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:11,color:"#fff",fontFamily:"monospace"},children:["$",N.avgRange]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontFamily:"monospace"},children:[N.ibPct,"%"]})]})]})]})]},N.day))}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Trading Day Heatmap",e.jsx("span",{style:{fontSize:10,color:"#666",marginLeft:"auto"},children:"Most recent at top"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:20},children:qe.map(N=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#fff",marginBottom:10,textAlign:"center",fontWeight:600,padding:"6px 0",background:"rgba(255,255,255,0.05)",borderRadius:6},children:N.day}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:3,minHeight:90},children:N.profiles.slice(0,12).map((ae,we)=>{var Ge;const Te=ae.vah&&ae.val?ae.vah-ae.val:0,$e=ae.range>0?Te/ae.range*100:0,de=ae.range>0&&ae.ib_range?ae.ib_range/ae.range*100:0,ue=pe[ae.day_type]||"#666";return e.jsxs("div",{style:{aspectRatio:"1",borderRadius:4,background:`linear-gradient(135deg, ${ue} 0%, ${ue}99 100%)`,cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 2px 8px ${ue}33`,transition:"all 0.2s ease",border:`1px solid ${ue}44`},onMouseEnter:ze=>{ze.currentTarget.style.transform="scale(1.1)",ze.currentTarget.style.boxShadow=`0 4px 20px ${ue}66`,ze.currentTarget.style.zIndex="10"},onMouseMove:ze=>{b({...ae,vaRange:Te,vaPct:$e,ibPct:de,baseColor:ue,x:ze.clientX,y:ze.clientY})},onMouseLeave:ze=>{ze.currentTarget.style.transform="scale(1)",ze.currentTarget.style.boxShadow=`0 2px 8px ${ue}33`,ze.currentTarget.style.zIndex="1",b(null)},children:[e.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:ae.profile_shape}),e.jsx("span",{style:{position:"absolute",bottom:1,right:2,fontSize:7,color:"rgba(255,255,255,0.6)"},children:(Ge=ae.date)==null?void 0:Ge.slice(8)})]},we)})}),N.count>12&&e.jsxs("div",{style:{fontSize:8,color:"#666",textAlign:"center",marginTop:4},children:["+",N.count-12," more"]})]},N.day))}),e.jsx("div",{style:{display:"flex",gap:20,marginTop:20,paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.08)",flexWrap:"wrap",justifyContent:"center"},children:Object.entries(pe).map(([N,ae])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:`${ae}15`,borderRadius:20,border:`1px solid ${ae}33`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:`linear-gradient(135deg, ${ae} 0%, ${ae}aa 100%)`,boxShadow:`0 0 6px ${ae}66`}}),e.jsx("span",{style:{fontSize:10,color:"#bbb",fontWeight:500},children:N==="normal_var"?"Normal Var":N==="double_dist"?"Double Dist":N==="non_trend"?"Non-Trend":N.charAt(0).toUpperCase()+N.slice(1)})]},N))}),p&&(()=>{var we,Te,$e,de,ue,Ge,ze,X,R,D,x,V;const N=p.close>p.open,ae=N?"#00ff88":"#ff4466";return e.jsxs("div",{style:{position:"fixed",left:p.x+15,top:p.y+15,transform:p.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:260,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px ${p.baseColor}44, 0 0 20px ${p.baseColor}22`,zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${p.baseColor}33 0%, ${p.baseColor}11 100%)`,borderBottom:`1px solid ${p.baseColor}44`,padding:"10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:p.date}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:p.weekday})]})]}),e.jsx("span",{style:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,fontSize:13,fontWeight:800,background:"rgba(255,255,255,0.1)",color:"#fff"},children:p.profile_shape})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${p.baseColor}33`,color:p.baseColor,border:`1px solid ${p.baseColor}55`,textTransform:"uppercase"},children:(we=p.day_type)==null?void 0:we.replace("_"," ")}),p.open_type&&p.open_type!=="developing"&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.4)",textTransform:"uppercase"},children:p.open_type})]})]}),e.jsxs("div",{style:{margin:"10px 14px",padding:"10px 12px",borderRadius:8,background:`${ae}15`,border:`1px solid ${ae}30`},children:[e.jsxs("div",{style:{fontSize:10,color:ae,marginBottom:8,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{children:N?"":""}),"PRICE ACTION"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:[{label:"O",value:p.open,color:"#fff"},{label:"H",value:p.high,color:N?"#00ff88":"#fff"},{label:"L",value:p.low,color:N?"#fff":"#ff4466"},{label:"C",value:p.close,color:"#fff"}].map(Q=>{var K;return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:7,color:"#888",marginBottom:2},children:Q.label}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:Q.color,fontFamily:"monospace"},children:["$",(K=Q.value)==null?void 0:K.toFixed(2)]})]},Q.label)})})]}),e.jsxs("div",{style:{padding:"0 14px 10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00ff88",fontFamily:"monospace"},children:["$",(Te=p.high)==null?void 0:Te.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"DAY RANGE"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#fff",fontFamily:"monospace"},children:["$",($e=p.range)==null?void 0:$e.toFixed(2)]}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:2},children:"100%"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#ff4466",fontFamily:"monospace"},children:["$",(de=p.low)==null?void 0:de.toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB HIGH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((ue=p.ib_high)==null?void 0:ue.toFixed(2))||"N/A"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#9370DB",fontFamily:"monospace"},children:["$",((Ge=p.ib_range)==null?void 0:Ge.toFixed(2))||"N/A"]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(ze=p.ibPct)==null?void 0:ze.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB LOW"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((X=p.ib_low)==null?void 0:X.toFixed(2))||"N/A"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(R=p.vah)==null?void 0:R.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"VA RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#00aaff",fontFamily:"monospace"},children:["$",(D=p.vaRange)==null?void 0:D.toFixed(2)]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(x=p.vaPct)==null?void 0:x.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAL"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(V=p.val)==null?void 0:V.toFixed(2)]})]})]})]})]})})()]}),e.jsxs("div",{style:{marginTop:20,background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Day Type Distribution by Weekday"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:qe.map(N=>{var $e,de;const ae=N.count;let we=0;const Te=Object.entries(N.typeCounts||{}).sort((ue,Ge)=>Ge[1]-ue[1]).map(([ue,Ge])=>{const ze=ae>0?Ge/ae*100:0,X=we;return we+=ze,{type:ue,count:Ge,percent:ze,startPercent:X}});return e.jsxs("div",{style:{textAlign:"center",position:"relative"},children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:8,fontWeight:600},children:N.day}),e.jsx("div",{style:{width:70,height:70,borderRadius:"50%",margin:"0 auto",background:ae>0?`conic-gradient(${Te.map(ue=>`${pe[ue.type]} ${ue.startPercent}% ${ue.startPercent+ue.percent}%`).join(", ")})`:"rgba(50,50,60,0.5)",position:"relative",boxShadow:"0 2px 12px rgba(0,0,0,0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:ue=>{ue.currentTarget.style.transform="scale(1.1)",ue.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)"},onMouseMove:ue=>{f({day:N.day,total:ae,segments:Te,avgRange:N.avgRange,avgIbRange:N.avgIbRange,ibPct:N.ibPct,x:ue.clientX,y:ue.clientY})},onMouseLeave:ue=>{ue.currentTarget.style.transform="scale(1)",ue.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.3)",f(null)},children:e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:40,height:40,borderRadius:"50%",background:"linear-gradient(135deg, #1a1a2e 0%, #252540 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#fff"},children:ae})}),Te[0]&&e.jsxs("div",{style:{marginTop:8,fontSize:9,color:pe[Te[0].type],fontWeight:600},children:[Te[0].type==="normal_var"?"N-Var":Te[0].type==="double_dist"?"Dbl-D":Te[0].type==="non_trend"?"Non-T":(($e=Te[0].type)==null?void 0:$e.charAt(0).toUpperCase())+((de=Te[0].type)==null?void 0:de.slice(1)),e.jsxs("span",{style:{color:"#666",marginLeft:4},children:[Te[0].percent.toFixed(0),"%"]})]})]},N.day)})}),C&&e.jsxs("div",{style:{position:"fixed",left:C.x+15,top:C.y+15,transform:C.x>window.innerWidth-260?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:200,boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1)",zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:C.day})]}),e.jsxs("span",{style:{fontSize:11,color:"#888",background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:10},children:[C.total," days"]})]}),e.jsxs("div",{style:{padding:"12px 14px"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:8,fontWeight:600,textTransform:"uppercase"},children:"Day Type Distribution"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:C.segments.map((N,ae)=>{var Te,$e;const we=N.type==="normal_var"?"Normal Var":N.type==="double_dist"?"Double Dist":N.type==="non_trend"?"Non-Trend":((Te=N.type)==null?void 0:Te.charAt(0).toUpperCase())+(($e=N.type)==null?void 0:$e.slice(1));return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:3,background:pe[N.type],boxShadow:`0 0 6px ${pe[N.type]}66`}}),e.jsx("span",{style:{fontSize:11,color:"#ccc",flex:1},children:we}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:pe[N.type]},children:N.count}),e.jsx("div",{style:{width:50,height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${N.percent}%`,height:"100%",background:pe[N.type],borderRadius:2}})}),e.jsxs("span",{style:{fontSize:10,color:"#888",width:32,textAlign:"right"},children:[N.percent.toFixed(0),"%"]})]},ae)})}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.08)",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG RANGE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",C.avgRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG IB"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",C.avgIbRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[C.ibPct,"%"]})]})]})]})]})]})]})})()]}):e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No historic data available"})})]})})]})},Nu=({settings:t,onSettingsChange:n})=>{const[i,o]=I.useState({ticker:"GC1!",current_price:0,delta_5m:0,delta_30m:0,cumulative_delta:0,ib_high:0,ib_low:0,ib_midpoint:0,ib_range:0,pdpoc:0,pd_high:0,pd_low:0,vwap:0,session_high:0,session_low:0,buying_imbalance_pct:0,absorption_ratio:0,stacked_buy_imbalances:0,current_phase:"CONNECTING...",conditions_met:0,entry_signal:!1,last_update:"",market_open:!1,candle_30m_stats:{avg:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},max:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},min:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0}}}),[r,s]=I.useState(!1),[l,d]=I.useState(0),[c,g]=I.useState(new Date),[w,y]=I.useState([]),[u,L]=I.useState({gamma_environment:"UNKNOWN",gamma_regime:"UNKNOWN",total_gex:0,zero_gamma:0,max_pain:0,key_levels:[],gex_profile:[],gex_levels:[],call_wall:0,put_wall:0,hvl:0,gamma_flip:0,beta_spx:0,beta_dxy:0,ib_locked:!1,ib_session_name:"",pd_high:0,pd_low:0,pdpoc:0,session_high:0,session_low:0,data_source:"CONNECTING"}),[W,Y]=I.useState({etfs:[],total_flow_1d_mm:0,total_flow_5d_mm:0,timestamp:null}),[Ue,p]=I.useState({gold:{overall_sentiment:"neutral",signals:[]},bitcoin:{overall_sentiment:"neutral",signals:[],etf_flow_1d:0},timestamp:null}),[b,C]=I.useState({btc_options:{put_call_ratio:0,max_pain:0,call_wall:0,put_wall:0,sentiment:"neutral"}}),[f,P]=I.useState({funding_rates:{average:0,annualized:0,sentiment:"neutral"}}),{isMobile:S}=uo();I.useEffect(()=>{const U=async()=>{const h=performance.now();try{const z=await fetch(nn);if(z.ok){const Ie=await z.json(),_=performance.now(),Be=Math.round(_-h);o(Ie),L(Oe=>({...Oe,...Ie})),s(!0),d(Be),g(new Date)}else throw new Error("Backend error")}catch{s(!1),d(0),o(Ie=>({...Ie,current_phase:"DISCONNECTED"})),L(Ie=>({...Ie,data_source:"DISCONNECTED"}))}};U();const j=setInterval(U,300);return()=>clearInterval(j)},[]),I.useEffect(()=>{const U=async()=>{try{if((i==null?void 0:i.contract)==="BTC-SPOT"){const Ie=await fetch(`${nn.replace("?","/etf-flows?")}`);if(Ie.ok){const Oe=await Ie.json();Y(Oe)}const _=await fetch(`${nn.replace("?","/deribit-options?")}`);if(_.ok){const Oe=await _.json();C(Oe)}const Be=await fetch(`${nn.replace("?","/funding-rates?")}`);if(Be.ok){const Oe=await Be.json();P(Oe)}}const z=await fetch(`${nn.replace("?","/institutional?")}`);if(z.ok){const Ie=await z.json();p(Ie)}}catch(h){console.error("Error fetching institutional data:",h)}};U();const j=setInterval(U,6e4);return()=>clearInterval(j)},[i==null?void 0:i.contract]);const T=(U,j=5)=>!U||U<=0||!i.current_price||i.current_price<=0?!1:Math.abs(U-i.current_price)<=j,E=(U,j,h=5)=>T(U,h)?{color:"#ffffff",textShadow:"0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(255,255,255,0.5)",fontWeight:700}:{color:j},ie=({active:U,conditionsMet:j})=>e.jsxs("div",{style:{padding:16,borderRadius:12,background:U?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.02)",border:`2px solid ${U?"#00ff88":"rgba(255,255,255,0.1)"}`,textAlign:"center",animation:U?"glow 1s infinite alternate":"none"},children:[e.jsx("div",{style:{fontSize:14,color:"#888",marginBottom:8},children:"ENTRY SIGNAL"}),e.jsx("div",{style:{fontSize:36,fontWeight:700,color:U?"#00ff88":"#444"},children:U?" READY":" WAITING"}),e.jsxs("div",{style:{fontSize:14,color:U?"#00ff88":"#666",marginTop:8},children:[j,"/6 Conditions Met"]})]});return e.jsxs("div",{style:{...q.liveDashboard,maxWidth:S?"100%":"1000px",padding:S?"12px":"0"},children:[e.jsx(bu,{}),e.jsx("div",{style:{marginBottom:S?16:24},children:e.jsx(ie,{active:i.entry_signal,conditionsMet:i.conditions_met})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:S?12:16,padding:S?12:20,marginBottom:S?12:16},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#888",fontSize:S?12:14},children:"Initial Balance Sessions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(2, 1fr)",gap:12},children:u.ibs&&["japan","london","us","ny"].map(U=>{const j=u.ibs[U];if(!j)return null;const h=j.status==="ACTIVE",z=j.status==="ENDED",Ie=j.high>0&&j.low>0;return e.jsxs("div",{style:{background:h?"rgba(0,255,136,0.05)":"rgba(255,255,255,0.02)",border:`2px solid ${h?"rgba(0,255,136,0.6)":z?"rgba(255,170,0,0.4)":"rgba(136,136,136,0.2)"}`,borderRadius:12,padding:12,position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:h?"#00ff88":z?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:j.name}),e.jsxs("div",{style:{fontSize:10,color:"#666",marginTop:2},children:[j.start," - ",j.end," ET"]})]}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:9,fontWeight:700,letterSpacing:1,background:h?"#001a00":z?"#1a1000":"#111",color:h?"#00ff88":z?"#ffaa00":"#666",border:`1px solid ${h?"#00ff88":z?"#ffaa00":"#333"}`,animation:h?"pulse 1.5s ease-in-out infinite":"none"},children:h?" ACTIVE":z?" ENDED":" WAITING"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:6},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"HIGH"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...E(Ie?j.high:0,Ie?"#ff4466":"#444")},children:Ie?`$${j.high.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"MID"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...E(Ie?j.mid:0,Ie?"#ffaa00":"#444")},children:Ie?`$${j.mid.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"LOW"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...E(Ie?j.low:0,Ie?"#00ff88":"#444")},children:Ie?`$${j.low.toFixed(2)}`:"--"})]})]})]},U)})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(136,136,136,0.3)",borderRadius:16,padding:20,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{margin:0,color:"#888",fontSize:14},children:" Previous Day Levels"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:"rgba(136,136,136,0.15)",color:"#aaa",fontFamily:"monospace"},children:u.pd_date_range||"Loading..."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(3, 1fr)",gap:S?8:16},children:[e.jsxs("div",{style:q.levelCard,children:[e.jsx("div",{style:q.levelLabel,children:"pd High"}),e.jsxs("div",{style:{...q.levelValue,...E(u.pd_high,"#ff4466")},children:["$",u.pd_high&&u.pd_high>0?u.pd_high.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:q.levelCard,children:[e.jsx("div",{style:q.levelLabel,children:"pdPOC"}),e.jsxs("div",{style:{...q.levelValue,...E(u.pdpoc||i.pdpoc,"#ffaa00")},children:["$",u.pdpoc&&u.pdpoc>0?u.pdpoc.toFixed(2):i.pdpoc&&i.pdpoc>0?i.pdpoc.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:q.levelCard,children:[e.jsx("div",{style:q.levelLabel,children:"pd Low"}),e.jsxs("div",{style:{...q.levelValue,...E(u.pd_low,"#00ff88")},children:["$",u.pd_low&&u.pd_low<999999?u.pd_low.toFixed(2):"0.00"]})]})]})]}),e.jsx(Mu,{metrics:i,settings:t}),(()=>{const U=i.dayHigh||i.day_high||0,j=i.dayLow||i.day_low||0,h=U-j,z=i.pd_high||0,Ie=i.pd_low||0,_=z-Ie,Be=h<100&&_>100,Oe=Be?z:U,ne=Be?Ie:j,Ce=i.current_price||0,v=Oe-ne;if(v<=0)return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(249,115,22,0.05) 0%, rgba(255,68,102,0.05) 100%)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:16,padding:20,marginTop:20,textAlign:"center"},children:[e.jsx("h3",{style:{margin:0,color:"#f97316",fontSize:14,marginBottom:8},children:" Fibonacci Levels & Range Analysis"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Awaiting market data..."})]});const _e=(Oe+ne)/2,le=i.pd_close||0,Ne=i.pd_open||0,it=Be?le>0&&Ne>0?le<Ne:!0:Ce>0?Ce<_e:!0,Rt=it?[{level:"100%",price:Oe,color:"#ff4466",desc:"Day High"},{level:"78.6%",price:ne+v*.786,color:"#ff6b6b",desc:"Deep Retracement"},{level:"61.8%",price:ne+v*.618,color:"#ffd93d",desc:"Golden Ratio"},{level:"50%",price:ne+v*.5,color:"#f97316",desc:"Mid Point"},{level:"38.2%",price:ne+v*.382,color:"#00bcd4",desc:"Shallow Retracement"},{level:"23.6%",price:ne+v*.236,color:"#10B981",desc:"Minor Retracement"},{level:"0%",price:ne,color:"#00ff88",desc:"Day Low"},{level:"-27%",price:ne-v*.27,color:"#ff1744",desc:"Extension"},{level:"-62%",price:ne-v*.618,color:"#d50000",desc:"Deep Extension"}]:[{level:"0%",price:Oe,color:"#ff4466",desc:"Day High"},{level:"23.6%",price:Oe-v*.236,color:"#ff6b6b",desc:"Minor Retracement"},{level:"38.2%",price:Oe-v*.382,color:"#ffd93d",desc:"Shallow Retracement"},{level:"50%",price:Oe-v*.5,color:"#f97316",desc:"Mid Point"},{level:"61.8%",price:Oe-v*.618,color:"#00bcd4",desc:"Golden Ratio"},{level:"78.6%",price:Oe-v*.786,color:"#10B981",desc:"Deep Retracement"},{level:"100%",price:ne,color:"#00ff88",desc:"Day Low"},{level:"-27%",price:Oe+v*.27,color:"#00e676",desc:"Extension"},{level:"-62%",price:Oe+v*.618,color:"#00c853",desc:"Deep Extension"}],Ke=(i==null?void 0:i.swing)||{},Xe=Ke.swing_high||0,Pe=Ke.swing_low||0,oe=Ke.swing_direction||"neutral";Ke.extensions_direction;const fe=Xe-Pe,Se=(Ce-ne)/v,O=Math.min(1,Math.max(0,Se)),ee=(re,a=re)=>a>1||a<0?{zone:"Outside Range",color:"#a855f7",bg:"rgba(168,85,247,0.15)"}:re>=.75?{zone:"Highly Premium",color:"#ff4466",bg:"rgba(255,68,102,0.15)"}:re>=.5?{zone:"Premium",color:"#f97316",bg:"rgba(249,115,22,0.15)"}:re>=.25?{zone:"Discount",color:"#00bcd4",bg:"rgba(0,188,212,0.15)"}:{zone:"Highly Discount",color:"#00ff88",bg:"rgba(0,255,136,0.15)"},ke=ee(O,Se);i.ib_high,i.ib_low;const lt=new Date,He=new Date(lt.toLocaleString("en-US",{timeZone:"America/New_York"})).getHours(),Le=new Date(lt.toLocaleString("en-US",{timeZone:"America/New_York"})).getMinutes(),Je=He*100+Le,At=Je>=300&&Je<600,J=Je>=820&&Je<930,ot=Je>=930&&Je<1030,rt=Je>=1030&&Je<1130,Qe=Rt.reduce((re,a)=>{const m=Math.abs(Ce-a.price);return m<re.dist?{...a,dist:m}:re},{dist:1/0});return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(249,115,22,0.05) 0%, rgba(255,68,102,0.05) 100%)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:16,padding:20,marginTop:20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{margin:0,color:"#f97316",fontSize:14},children:" Fibonacci Levels & Range Analysis"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:ke.bg,color:ke.color},children:ke.zone})]}),e.jsxs("div",{style:{display:"flex",gap:20},children:[e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:8},children:"Day Range"}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:7,textAlign:"right",color:"#666"},children:[e.jsx("span",{style:{color:"#ff4466"},children:"PREM"}),e.jsx("span",{children:"75%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{style:{color:"#00ff88"},children:"DISC"})]}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #f97316 25%, #666 50%, #00bcd4 75%, #00ff88 100%)",opacity:.5}}),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-O)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #fff",zIndex:10}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:9},children:[e.jsx("div",{style:{color:"#ff4466"},children:Oe.toFixed(2)}),e.jsxs("div",{style:{padding:"4px 6px",background:ke.bg,borderRadius:4,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:ke.color,fontWeight:600},children:ke.zone}),e.jsxs("div",{style:{fontSize:9,color:"#fff"},children:[(Se*100).toFixed(0),"%"]})]}),e.jsx("div",{style:{color:"#00ff88"},children:ne.toFixed(2)})]})]})]}),e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsxs("div",{style:{fontSize:10,color:"#888",marginBottom:8},children:["Day Fibonacci ",it?"(Bearish)":"(Bullish)"]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:8,textAlign:"right",width:28},children:Rt.map((re,a)=>e.jsx("span",{style:{color:re.color,fontWeight:500,lineHeight:1},children:re.level},a))}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #ff6b6b 16%, #ffd93d 33%, #f97316 50%, #00bcd4 66%, #10B981 83%, #00ff88 100%)",opacity:.5}}),Rt.map((re,a)=>e.jsx("div",{style:{position:"absolute",top:`${a/(Rt.length-1)*100}%`,left:0,width:"100%",height:1,background:`${re.color}80`,transform:"translateY(-50%)"}},a)),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-O)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #fff",zIndex:10}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420},children:Rt.map((re,a)=>{const m=Math.abs(Ce-re.price)<v*.025;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,lineHeight:1},children:[e.jsx("span",{style:{fontSize:10,color:m?"#fff":"#777",fontWeight:m?600:400,background:m?`${re.color}30`:"transparent",padding:m?"1px 3px":0,borderRadius:2},children:re.price.toFixed(2)}),e.jsx("span",{style:{fontSize:7,color:"#555"},children:re.desc}),m&&e.jsx("span",{style:{color:re.color,fontSize:8},children:""})]},a)})})]})]}),fe>30&&e.jsxs("div",{style:{flex:"0 0 auto",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:16},children:[e.jsxs("div",{style:{fontSize:10,color:"#A78BFA",marginBottom:8},children:["Swing Fib ",oe==="up"?"":oe==="down"?"":""]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:8,textAlign:"right",width:28},children:(oe==="up"?[{level:"-62%",price:Xe+fe*.618,color:"#00E676"},{level:"-27%",price:Xe+fe*.27,color:"#69F0AE"},{level:"0%",price:Xe,color:"#A78BFA"},{level:"23.6%",price:Xe-fe*.236,color:"#8B5CF6"},{level:"38.2%",price:Xe-fe*.382,color:"#7C3AED"},{level:"50%",price:Xe-fe*.5,color:"#6D28D9"},{level:"61.8%",price:Xe-fe*.618,color:"#5B21B6"},{level:"78.6%",price:Xe-fe*.786,color:"#4C1D95"},{level:"100%",price:Pe,color:"#3B0764"}]:[{level:"100%",price:Xe,color:"#3B0764"},{level:"78.6%",price:Pe+fe*.786,color:"#4C1D95"},{level:"61.8%",price:Pe+fe*.618,color:"#5B21B6"},{level:"50%",price:Pe+fe*.5,color:"#6D28D9"},{level:"38.2%",price:Pe+fe*.382,color:"#7C3AED"},{level:"23.6%",price:Pe+fe*.236,color:"#8B5CF6"},{level:"0%",price:Pe,color:"#A78BFA"},{level:"-27%",price:Pe-fe*.27,color:"#ff1744"},{level:"-62%",price:Pe-fe*.618,color:"#d50000"}]).map((re,a)=>e.jsx("span",{style:{color:re.color,fontWeight:500,lineHeight:1},children:re.level},a))}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #A78BFA 0%, #6D28D9 40%, #3B0764 70%, #E040FB 85%, #AA00FF 100%)",opacity:.5}}),(()=>{const re=fe>0?(Ce-Pe)/fe:.5;return e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-re)*100*.78))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #A78BFA",zIndex:10}})})()]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420},children:(oe==="up"?[{level:"-62%",price:Xe+fe*.618,color:"#00E676",desc:"Deep Ext"},{level:"-27%",price:Xe+fe*.27,color:"#69F0AE",desc:"Extension"},{level:"0%",price:Xe,color:"#A78BFA",desc:"Swing High"},{level:"23.6%",price:Xe-fe*.236,color:"#8B5CF6",desc:""},{level:"38.2%",price:Xe-fe*.382,color:"#7C3AED",desc:""},{level:"50%",price:Xe-fe*.5,color:"#6D28D9",desc:""},{level:"61.8%",price:Xe-fe*.618,color:"#5B21B6",desc:"Golden"},{level:"78.6%",price:Xe-fe*.786,color:"#4C1D95",desc:""},{level:"100%",price:Pe,color:"#3B0764",desc:"Swing Low"}]:[{level:"100%",price:Xe,color:"#3B0764",desc:"Swing High"},{level:"78.6%",price:Pe+fe*.786,color:"#4C1D95",desc:""},{level:"61.8%",price:Pe+fe*.618,color:"#5B21B6",desc:"Golden"},{level:"50%",price:Pe+fe*.5,color:"#6D28D9",desc:""},{level:"38.2%",price:Pe+fe*.382,color:"#7C3AED",desc:""},{level:"23.6%",price:Pe+fe*.236,color:"#8B5CF6",desc:""},{level:"0%",price:Pe,color:"#A78BFA",desc:"Swing Low"},{level:"-27%",price:Pe-fe*.27,color:"#ff1744",desc:"Extension"},{level:"-62%",price:Pe-fe*.618,color:"#d50000",desc:"Deep Ext"}]).map((re,a)=>{const m=Math.abs(Ce-re.price)<fe*.03;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,lineHeight:1},children:[e.jsx("span",{style:{fontSize:10,color:m?"#fff":"#777",fontWeight:m?600:400,background:m?`${re.color}30`:"transparent",padding:m?"1px 3px":0,borderRadius:2},children:re.price.toFixed(2)}),e.jsx("span",{style:{fontSize:7,color:"#555"},children:re.desc}),m&&e.jsx("span",{style:{color:re.color,fontSize:8},children:""})]},a)})})]})]}),e.jsxs("div",{style:{flex:1,borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:20},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:10},children:"Session Range Location"}),(()=>{const re=({name:$n,timeRange:Yt,color:xn,isActive:si,high:Pn,low:Bn,hasData:Tn})=>{const Wn=Pn-Bn,In=Wn>0?(Ce-Bn)/Wn:null,Jn=In!==null?Math.min(1,Math.max(0,In)):null,En=In!==null?ee(Jn,In):null,Qn=Tn&&Pn>0&&Bn>0&&Wn>0;return e.jsxs("div",{style:{background:si?`${xn}12`:"rgba(0,0,0,0.25)",border:`1px solid ${si?`${xn}60`:"rgba(255,255,255,0.06)"}`,borderRadius:8,padding:"8px 10px",flex:"1 1 0",minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:xn,fontWeight:600},children:$n}),e.jsx("div",{style:{fontSize:7,color:"#555"},children:Yt})]}),si&&e.jsx("span",{style:{fontSize:6,background:xn,color:"#000",padding:"2px 4px",borderRadius:3,fontWeight:700},children:"LIVE"})]}),Qn?e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",width:6,height:140,borderRadius:3,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #f97316 25%, #666 50%, #00bcd4 75%, #00ff88 100%)",opacity:.5}}),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-Jn)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:10,height:3,background:xn,borderRadius:2,boxShadow:`0 0 4px ${xn}`}})]}),e.jsxs("div",{style:{flex:1,fontSize:8,display:"flex",flexDirection:"column",justifyContent:"space-between",height:140},children:[e.jsx("div",{style:{color:"#ff4466",fontWeight:500},children:Pn.toFixed(2)}),e.jsxs("div",{children:[e.jsx("div",{style:{color:En==null?void 0:En.color,fontWeight:600,fontSize:7},children:En==null?void 0:En.zone}),e.jsxs("div",{style:{color:"#888",fontSize:7},children:[(Jn*100).toFixed(0),"%"]})]}),e.jsx("div",{style:{color:"#00ff88",fontWeight:500},children:Bn.toFixed(2)})]})]}):e.jsx("div",{style:{fontSize:8,color:"#444",textAlign:"center",padding:"45px 0"},children:si?"Building...":Tn?"No data":"Waiting"})]})},a=i.ended_sessions||i.endedSessions||{},m=i.ibs||{},F=a.london||{};let B=F.high||0,A=F.low&&F.low>0&&F.low<999999?F.low:0;const H=m.london||{};H.high>0&&(B=Math.max(B,H.high)),H.low>0&&H.low<999999&&(A=A>0?Math.min(A,H.low):H.low),At&&i.sessionHigh>0&&(B=Math.max(B,i.sessionHigh)),At&&i.sessionLow>0&&i.sessionLow<999999&&(A=A>0?Math.min(A,i.sessionLow):i.sessionLow);const se=a.ny_1h||{},$=se.high||(ot?i.sessionHigh:0),ye=se.low||(ot?i.sessionLow:0),vt=a.ny_2h||{},ct=vt.high||(rt?i.sessionHigh:0),wt=vt.low||(rt?i.sessionLow:0),kt=m.us||{},sn=a.us_ib||{},nt=kt.high||sn.high||0,xt=kt.low&&kt.low>0&&kt.low<999999?kt.low:sn.low&&sn.low>0?sn.low:0;let Ft=0,tn=999999;["pre_asia","asia_open","asia_close","low_volume","london","pre_us"].forEach($n=>{const Yt=a[$n];(Yt==null?void 0:Yt.high)>0&&(Ft=Math.max(Ft,Yt.high)),(Yt==null?void 0:Yt.low)>0&&(Yt==null?void 0:Yt.low)<999999&&(tn=Math.min(tn,Yt.low))});const Kt=Je>=1800||Je<820;Kt&&i.sessionHigh>0&&(Ft=Math.max(Ft,i.sessionHigh)),Kt&&i.sessionLow>0&&i.sessionLow<999999&&(tn=Math.min(tn,i.sessionLow)),tn===999999&&(tn=0);let gn=0,_n=999999;["ny_1h","ny_2h","lunch","ny_pm","ny_close"].forEach($n=>{const Yt=a[$n];(Yt==null?void 0:Yt.high)>0&&(gn=Math.max(gn,Yt.high)),(Yt==null?void 0:Yt.low)>0&&(Yt==null?void 0:Yt.low)<999999&&(_n=Math.min(_n,Yt.low))});const ri=Je>=930&&Je<1700;return ri&&i.sessionHigh>0&&(gn=Math.max(gn,i.sessionHigh)),ri&&i.sessionLow>0&&i.sessionLow<999999&&(_n=Math.min(_n,i.sessionLow)),_n===999999&&(_n=0),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(re,{name:"Overnight",timeRange:"18:00-8:20",color:"#8b5cf6",isActive:Kt,high:Ft,low:tn,hasData:Ft>0}),e.jsx(re,{name:"NY Session",timeRange:"9:30-17:00",color:"#f59e0b",isActive:ri,high:gn,low:_n,hasData:gn>0})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(re,{name:"London",timeRange:"3:00-6:00",color:"#a855f7",isActive:At,high:B,low:A,hasData:B>0}),e.jsx(re,{name:"US IB",timeRange:"8:20-9:30",color:"#ffaa00",isActive:J,high:nt,low:xt,hasData:nt>0}),e.jsx(re,{name:"NY 1H",timeRange:"9:30-10:30",color:"#10B981",isActive:ot,high:$,low:ye,hasData:$>0}),e.jsx(re,{name:"NY 2H",timeRange:"10:30-11:30",color:"#06B6D4",isActive:rt,high:ct,low:wt,hasData:ct>0})]})]})})()]})]}),Qe.price&&v>0&&e.jsxs("div",{style:{marginTop:16,padding:12,background:`${Qe.color}15`,border:`1px solid ${Qe.color}50`,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Nearest Fibonacci Level"}),e.jsxs("div",{style:{fontSize:14,color:Qe.color,fontWeight:700},children:[Qe.level," @ ",Qe.price.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Distance"}),e.jsxs("div",{style:{fontSize:14,color:Ce>Qe.price?"#00ff88":"#ff4466",fontWeight:700},children:[Ce>Qe.price?"+":"",(Ce-Qe.price).toFixed(2)]})]})]})]})})(),e.jsx("div",{style:{marginTop:20},children:e.jsx(vu,{gexData:u,currentPrice:i.current_price})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(mu,{gexData:u,currentPrice:i.current_price})}),(()=>{const U=i.rollover||{};return e.jsxs("div",{style:{marginTop:20,padding:16,background:"linear-gradient(135deg, rgba(30,30,35,0.95) 0%, rgba(20,20,25,0.98) 100%)",borderRadius:12,border:`1px solid ${U.roll_signal==="ROLL"?"#ef4444":U.roll_signal==="CONSIDER"?"#f59e0b":"#333"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff"},children:"CONTRACT ROLLOVER"})]}),e.jsx("div",{style:{padding:"4px 12px",borderRadius:6,fontSize:11,fontWeight:700,background:U.roll_signal==="ROLL"?"rgba(239,68,68,0.2)":U.roll_signal==="CONSIDER"?"rgba(245,158,11,0.2)":"rgba(34,197,94,0.2)",color:U.roll_signal==="ROLL"?"#ef4444":U.roll_signal==="CONSIDER"?"#f59e0b":"#22c55e",border:`1px solid ${U.roll_signal==="ROLL"?"#ef4444":U.roll_signal==="CONSIDER"?"#f59e0b":"#22c55e"}40`},children:U.roll_signal==="ROLL"?" ROLL NOW":U.roll_signal==="CONSIDER"?" CONSIDER ROLLING":" HOLD"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 1fr",gap:16,alignItems:"center"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"CURRENT"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff"},children:U.front_month||i.contract||"GCG26"}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:2},children:U.front_month_name||"Gold Feb 2026"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:U.front_month_oi>0?"#fff":"#555",marginTop:8,fontFamily:"monospace"},children:U.front_month_oi>0?U.front_month_oi.toLocaleString():""}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:U.front_month_oi>0?"Open Interest":"Loading OI..."})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,color:U.oi_ratio>=1?"#ef4444":U.oi_ratio>=.75?"#f59e0b":"#22c55e"},children:U.oi_ratio>=1?"":""}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:U.oi_ratio>=1?"#ef4444":U.oi_ratio>=.75?"#f59e0b":"#22c55e",fontFamily:"monospace"},children:[((U.oi_ratio||0)*100).toFixed(0),"%"]}),e.jsx("div",{style:{fontSize:8,color:"#666"},children:"Next/Current"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"NEXT"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:U.oi_ratio>=1?"#ef4444":"#f59e0b"},children:U.next_month||"GCJ26"}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:2},children:U.next_month_name||"Gold Apr 2026"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:U.next_month_oi>0?"#fff":"#555",marginTop:8,fontFamily:"monospace"},children:U.next_month_oi>0?U.next_month_oi.toLocaleString():""}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:U.next_month_oi>0?"Open Interest":"Loading OI..."})]})]}),e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:[e.jsx("div",{style:{width:`${Math.min((U.oi_ratio||0)*100,100)}%`,height:"100%",background:U.oi_ratio>=1?"linear-gradient(90deg, #ef4444, #dc2626)":U.oi_ratio>=.75?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #22c55e, #16a34a)",transition:"width 0.5s ease"}}),e.jsx("div",{style:{position:"absolute",left:"75%",top:0,bottom:0,width:2,background:"#f59e0b",opacity:.5}}),e.jsx("div",{style:{position:"absolute",left:"100%",top:0,bottom:0,width:2,background:"#ef4444",opacity:.5}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:4},children:[e.jsx("span",{style:{fontSize:8,color:"#666"},children:"0%"}),e.jsx("span",{style:{fontSize:8,color:"#f59e0b"},children:"75% Consider"}),e.jsx("span",{style:{fontSize:8,color:"#ef4444"},children:"100% Roll"})]})]}),U.last_update&&e.jsxs("div",{style:{marginTop:12,textAlign:"center",fontSize:9,color:"#555"},children:["OI Updated: ",U.last_update]})]})})()]})},Hu=({data:t,trades:n,dateRange:i,setDateRange:o,extendedData:r})=>{var He,Le,Je,At,J,ot,rt,Qe,re;const[s,l]=I.useState(2025),[d,c]=I.useState(i),[g,w]=I.useState("overview"),[y,u]=I.useState(null),[L,W]=I.useState(null),[Y,Ue]=I.useState(null),{metadata:p,sessions:b,volumeProfiles:C,bigVolumeDays:f,supportResistance:P,seasonality:S,dailyCandles:T,featureStatistics:E,distributions:ie}=r||{};I.useEffect(()=>{var a;((a=t.yearly_pnl)==null?void 0:a.length)>0&&!t.yearly_pnl.find(m=>m.year===s)&&l(t.yearly_pnl[t.yearly_pnl.length-1].year)},[t.yearly_pnl,s]);const U=()=>o(d),j=()=>{var m,F;const a={start:((m=p==null?void 0:p.data_range)==null?void 0:m.start)||"2021-01-27",end:((F=p==null?void 0:p.data_range)==null?void 0:F.end)||"2026-01-27"};c(a),o(a)},h=(b==null?void 0:b.length)||0,z=(b==null?void 0:b.filter(a=>a.direction==="bullish").length)||0,Ie=(b==null?void 0:b.filter(a=>a.direction==="bearish").length)||0;b!=null&&b.length&&(b.reduce((a,m)=>a+(m.range||0),0)/b.length).toFixed(2),b!=null&&b.length&&Math.round(b.reduce((a,m)=>a+(m.volume||0),0)/b.length);const _=I.useMemo(()=>{if(!(n!=null&&n.length))return[];let a=1e5,m=a,F=0;return n.map((B,A)=>{a+=B.pnl||0,m=Math.max(m,a);const H=m-a,se=m>0?H/m*100:0;F=Math.max(F,se);const $=a-1e5,ye=$/1e5*100;return{date:B.date,equity:a,peak:m,fromPeak:H,drawdown:se,maxDrawdownSoFar:F,totalProfit:$,totalProfitPct:ye,pnl:B.pnl,trade:B,index:A}})},[n]),Be=_.length?Math.max(..._.map(a=>a.drawdown)):0,Oe=_.length?_[_.length-1].equity:1e5,ne=(Oe-1e5)/1e5*100,Ce=(n==null?void 0:n.filter(a=>a.pnl>0))||[],v=(n==null?void 0:n.filter(a=>a.pnl<=0))||[],_e=Ce.length?Ce.reduce((a,m)=>a+m.pnl,0)/Ce.length:0,le=v.length?Math.abs(v.reduce((a,m)=>a+m.pnl,0)/v.length):0;n!=null&&n.length&&n.reduce((a,m)=>a+Math.abs((m.entry||0)-(m.stop_loss||0)),0)/n.length*100;const Ne=[{id:"overview",label:"Overview",icon:""},{id:"analytics",label:"Deep Analytics",icon:""},{id:"features",label:"Feature Analysis",icon:""},{id:"phase",label:"Phase Detection",icon:""},{id:"matrix",label:"Matrix Analysis",icon:""},{id:"seasonality",label:"Seasonality",icon:""},{id:"trades",label:"Trade Log",icon:""}],it=({label:a,value:m,color:F,sub:B})=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:8,padding:"10px 12px",borderLeft:`3px solid ${F}`},children:[e.jsx("div",{style:{fontSize:9,color:"#666",textTransform:"uppercase",letterSpacing:.5},children:a}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:F},children:m}),B&&e.jsx("div",{style:{fontSize:9,color:"#555"},children:B})]}),Rt=({type:a,count:m,total:F,setHoveredTpo:B})=>{const H={"P-shape":{desc:"Rally Day - Close near high. Price spent most time in upper range, indicating buying pressure.",signal:"Bullish",color:"#00ff88",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"40",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("rect",{x:"20",y:"28",width:"10",height:"18",fill:"#8b5cf6",opacity:"0.5",rx:"1"}),e.jsx("rect",{x:"32",y:"12",width:"10",height:"32",fill:"#8b5cf6",opacity:"0.8",rx:"1"}),e.jsx("rect",{x:"44",y:"6",width:"10",height:"22",fill:"#8b5cf6",rx:"1"}),e.jsx("path",{d:"M8 44 Q35 50 58 12",stroke:"#00ff88",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"58",cy:"12",r:"3",fill:"#00ff88"})]})},"b-shape":{desc:"Selloff Day - Close near low. Price spent most time in lower range, indicating selling pressure.",signal:"Bearish",color:"#ff4466",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"6",width:"10",height:"22",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"20",y:"12",width:"10",height:"32",fill:"#8b5cf6",opacity:"0.8",rx:"1"}),e.jsx("rect",{x:"32",y:"28",width:"10",height:"18",fill:"#8b5cf6",opacity:"0.5",rx:"1"}),e.jsx("rect",{x:"44",y:"40",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("path",{d:"M8 12 Q35 6 58 44",stroke:"#ff4466",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"58",cy:"44",r:"3",fill:"#ff4466"})]})},"D-shape":{desc:"Balanced Day - Normal bell curve distribution. Market in equilibrium, fair value found.",signal:"Neutral",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"35",width:"10",height:"10",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("rect",{x:"20",y:"22",width:"10",height:"22",fill:"#8b5cf6",opacity:"0.6",rx:"1"}),e.jsx("rect",{x:"32",y:"10",width:"10",height:"35",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"44",y:"22",width:"10",height:"22",fill:"#8b5cf6",opacity:"0.6",rx:"1"}),e.jsx("line",{x1:"5",y1:"27",x2:"65",y2:"27",stroke:"#f97316",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:"35",y:"52",fontSize:"8",fill:"#f97316",textAnchor:"middle",children:"POC"})]})},"B-shape":{desc:"Double Distribution - Two value areas formed. Often signals trend change or balance break.",signal:"Reversal",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"8",width:"10",height:"16",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"20",y:"14",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.4",rx:"1"}),e.jsx("rect",{x:"32",y:"22",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.2",rx:"1"}),e.jsx("rect",{x:"44",y:"32",width:"10",height:"16",fill:"#8b5cf6",rx:"1"}),e.jsx("circle",{cx:"13",cy:"16",r:"4",fill:"none",stroke:"#f97316",strokeWidth:"2"}),e.jsx("circle",{cx:"49",cy:"40",r:"4",fill:"none",stroke:"#f97316",strokeWidth:"2"}),e.jsx("text",{x:"35",y:"52",fontSize:"7",fill:"#888",textAnchor:"middle",children:"2 Value Areas"})]})},elongated_up:{desc:"Strong Uptrend - Elongated profile showing sustained buying. Very bullish momentum.",signal:"Very Bullish",color:"#00ff88",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"15",y:"6",width:"40",height:"10",fill:"#00ff88",rx:"2"}),e.jsx("rect",{x:"20",y:"18",width:"30",height:"8",fill:"#00ff88",opacity:"0.7",rx:"1"}),e.jsx("rect",{x:"25",y:"28",width:"20",height:"6",fill:"#00ff88",opacity:"0.4",rx:"1"}),e.jsx("path",{d:"M10 48 L60 8",stroke:"#00ff88",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("polygon",{points:"60,8 52,12 56,16",fill:"#00ff88"})]})},elongated_down:{desc:"Strong Downtrend - Elongated profile showing sustained selling. Very bearish momentum.",signal:"Very Bearish",color:"#ff4466",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"25",y:"6",width:"20",height:"6",fill:"#ff4466",opacity:"0.4",rx:"1"}),e.jsx("rect",{x:"20",y:"14",width:"30",height:"8",fill:"#ff4466",opacity:"0.7",rx:"1"}),e.jsx("rect",{x:"15",y:"24",width:"40",height:"10",fill:"#ff4466",rx:"2"}),e.jsx("path",{d:"M10 8 L60 48",stroke:"#ff4466",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("polygon",{points:"60,48 52,44 56,40",fill:"#ff4466"})]})},single_print:{desc:"Single Print Gap - Low volume area indicating weak support/resistance. Often gets filled.",signal:"Gap Fill",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"20",y:"6",width:"30",height:"14",fill:"#8b5cf6",rx:"2"}),e.jsx("rect",{x:"30",y:"24",width:"4",height:"6",fill:"#f97316",opacity:"0.5"}),e.jsx("rect",{x:"20",y:"34",width:"30",height:"14",fill:"#8b5cf6",rx:"2"}),e.jsx("text",{x:"35",y:"29",fontSize:"9",fill:"#f97316",textAnchor:"middle",fontWeight:"bold",children:"GAP"}),e.jsx("path",{d:"M50 20 L55 27 L50 34",stroke:"#f97316",strokeWidth:"1.5",fill:"none",strokeDasharray:"2"})]})}}[a]||{desc:"Market profile type",signal:"N/A",color:"#888",svg:e.jsx("svg",{width:"70",height:"55",children:e.jsx("text",{x:"35",y:"30",fontSize:"12",fill:"#666",textAnchor:"middle",children:"?"})})},se=F>0?(m/F*100).toFixed(1):0;return e.jsx("div",{style:{display:"inline-block",cursor:"context-menu"},onContextMenu:$=>{$.preventDefault(),B({type:a,count:m,pct:se,visual:H,x:$.clientX,y:$.clientY})},children:e.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:8,padding:10,textAlign:"center",border:"1px solid rgba(139,92,246,0.3)"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#8b5cf6"},children:m}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:Xe(a)})]})})},Ke=({phase:a,count:m,total:F,setHoveredWyckoff:B})=>{const A={accumulation:{desc:"Smart money buying at lows after downtrend. Price consolidates in range while institutions accumulate positions quietly.",signal:"Bullish Setup",color:"#00ff88",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 8 L20 38",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"32",width:"50",height:"14",fill:"rgba(0,255,136,0.1)",stroke:"#00ff88",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M25 38 L35 35 L45 40 L55 36 L65 42",stroke:"#888",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M65 35 L75 15",stroke:"#00ff88",strokeWidth:"2",strokeDasharray:"4",fill:"none"}),e.jsx("polygon",{points:"75,15 70,22 73,20",fill:"#00ff88"})]})},distribution:{desc:"Smart money selling at highs after uptrend. Price consolidates while institutions distribute positions to retail.",signal:"Bearish Setup",color:"#ff4466",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 42 L20 12",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"6",width:"50",height:"14",fill:"rgba(255,68,102,0.1)",stroke:"#ff4466",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M25 12 L35 15 L45 10 L55 14 L65 8",stroke:"#888",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M65 15 L75 35",stroke:"#ff4466",strokeWidth:"2",strokeDasharray:"4",fill:"none"}),e.jsx("polygon",{points:"75,35 70,28 73,30",fill:"#ff4466"})]})},markup:{desc:"Uptrend phase following accumulation. Strong buying pressure with higher highs and higher lows.",signal:"Buy & Hold",color:"#00ff88",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 45 L20 38 L35 42 L50 30 L65 25 L75 10",stroke:"#00ff88",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M5 48 L75 20",stroke:"#00ff88",strokeWidth:"1",opacity:"0.3",strokeDasharray:"4"}),e.jsx("polygon",{points:"75,10 68,15 70,18",fill:"#00ff88"}),e.jsx("text",{x:"40",y:"48",fontSize:"8",fill:"#00ff88",textAnchor:"middle",fontWeight:"bold",children:"MARKUP "})]})},markdown:{desc:"Downtrend phase following distribution. Strong selling pressure with lower highs and lower lows.",signal:"Sell & Avoid",color:"#ff4466",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 10 L20 15 L35 12 L50 25 L65 30 L75 45",stroke:"#ff4466",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M5 7 L75 35",stroke:"#ff4466",strokeWidth:"1",opacity:"0.3",strokeDasharray:"4"}),e.jsx("polygon",{points:"75,45 68,40 70,37",fill:"#ff4466"}),e.jsx("text",{x:"40",y:"8",fontSize:"8",fill:"#ff4466",textAnchor:"middle",fontWeight:"bold",children:"MARKDOWN "})]})},re_accumulation:{desc:"Pause within uptrend for more accumulation. Institutions adding to long positions before next leg up.",signal:"Continue Long",color:"#00bcd4",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 42 L22 28",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"22",y:"22",width:"30",height:"12",fill:"rgba(0,188,212,0.15)",stroke:"#00bcd4",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M52 25 L75 8",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("polygon",{points:"75,8 68,12 70,15",fill:"#00ff88"})]})},re_distribution:{desc:"Pause within downtrend for more distribution. Institutions adding to short positions before next leg down.",signal:"Continue Short",color:"#f97316",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 8 L22 22",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"22",y:"18",width:"30",height:"12",fill:"rgba(249,115,22,0.15)",stroke:"#f97316",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M52 25 L75 42",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("polygon",{points:"75,42 68,38 70,35",fill:"#ff4466"})]})},trending:{desc:"Clear directional movement with strong momentum. Follow the trend until signs of exhaustion.",signal:"Follow Trend",color:"#00bcd4",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 40 L75 10",stroke:"#00bcd4",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M5 44 L75 14",stroke:"#00bcd4",strokeWidth:"1",opacity:"0.4"}),e.jsx("path",{d:"M5 36 L75 6",stroke:"#00bcd4",strokeWidth:"1",opacity:"0.4"}),e.jsx("polygon",{points:"75,10 68,14 70,17",fill:"#00bcd4"})]})},consolidation:{desc:"Sideways range-bound price action. Market undecided, wait for breakout direction.",signal:"Wait for Break",color:"#888",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("line",{x1:"5",y1:"15",x2:"75",y2:"15",stroke:"#666",strokeWidth:"1.5",strokeDasharray:"4"}),e.jsx("line",{x1:"5",y1:"35",x2:"75",y2:"35",stroke:"#666",strokeWidth:"1.5",strokeDasharray:"4"}),e.jsx("path",{d:"M8 25 L20 20 L32 28 L44 22 L56 30 L68 24 L75 26",stroke:"#f97316",strokeWidth:"2",fill:"none"}),e.jsx("text",{x:"40",y:"46",fontSize:"7",fill:"#888",textAnchor:"middle",children:"RANGE BOUND"})]})},unknown:{desc:"Unclear market structure. Avoid trading until clearer pattern emerges.",signal:"No Trade",color:"#666",svg:e.jsx("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:e.jsx("text",{x:"40",y:"32",fontSize:"24",fill:"#666",textAnchor:"middle",children:"?"})})}},H=A[a]||A.unknown,se=F>0?(m/F*100).toFixed(1):0;return e.jsx("div",{style:{display:"inline-block",cursor:"context-menu"},onContextMenu:$=>{$.preventDefault(),B({phase:a,count:m,pct:se,visual:H,x:$.clientX,y:$.clientY})},children:e.jsxs("div",{style:{background:"rgba(0,188,212,0.1)",borderRadius:8,padding:10,textAlign:"center",border:"1px solid rgba(0,188,212,0.3)"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#00bcd4"},children:m}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:a.replace(/_/g," ")})]})})},Xe=a=>a?{"P-shape":"P-Shape (Rally)","b-shape":"b-Shape (Selloff)","D-shape":"D-Shape (Balanced)","B-shape":"B-Shape (Double)",elongated_up:"Elongated Up",elongated_down:"Elongated Down",single_print:"Single Print",no_demand:"No Demand",no_supply:"No Supply",climax_bullish:"Bullish Climax",climax_bearish:"Bearish Climax",high_volume:"High Volume",low_volume:"Low Volume",absorption:"Absorption",exhaustion:"Exhaustion",normal:"Normal",trending:"Trending",consolidation:"Consolidation",accumulation:"Accumulation",distribution:"Distribution",markup:"Markup",markdown:"Markdown",re_accumulation:"Re-Accumulation",re_distribution:"Re-Distribution",unknown:"Unknown",vsa_no_effort_result:"VSA: No Effort Result",vsa_effort_no_result:"VSA: Effort No Result",cvd_bearish_divergence:"CVD Bearish Divergence",cvd_bullish_divergence:"CVD Bullish Divergence",big_trade_bullish:"Big Trade (Bullish)",big_trade_bearish:"Big Trade (Bearish)",delta_imbalance_bullish:"Delta Imbalance (Bull)",delta_imbalance_bearish:"Delta Imbalance (Bear)",absorption_bullish:"Absorption (Bullish)",absorption_bearish:"Absorption (Bearish)",institutional_accumulation:"Institutional Activity",stop_hunt:"Stop Hunt",TARGET:"Target Hit",STOP_LOSS:"Stop Loss",TIME_EXIT:"Time Exit"}[a]||a.replace(/_/g," ").replace(/\b\w/g,F=>F.toUpperCase()):"",Pe={"P-shape":"Close near high, rally day. Often bullish continuation.","b-shape":"Close near low, selloff day. Often bearish continuation.","D-shape":"Balanced day, close near middle. Market in equilibrium.","B-shape":"Double distribution - two value areas. Trend change signal.",elongated_up:"Strong upward momentum, close in upper range.",elongated_down:"Strong downward momentum, close in lower range.",no_demand:"Low volume on up move - lack of buying interest.",no_supply:"Low volume on down move - lack of selling pressure.",climax_bullish:"Extreme volume on up move - potential exhaustion.",climax_bearish:"Extreme volume on down move - potential exhaustion.",absorption:"High volume, small range - large orders absorbed.",exhaustion:"Decreasing volume on trend - momentum fading.",normal:"Average volume with typical price action.",high_volume:"Above average volume - increased participation.",accumulation:"Smart money buying at lows. Bullish setup forming.",distribution:"Smart money selling at highs. Bearish setup forming.",markup:"Uptrend phase - prices rising with momentum.",markdown:"Downtrend phase - prices falling with momentum.",re_accumulation:"Pause in uptrend for more accumulation.",re_distribution:"Pause in downtrend for more distribution.",vsa_no_effort_result:"Volume Spread Analysis: Price moved without matching volume effort.",cvd_bearish_divergence:"Cumulative Volume Delta diverges bearish from price.",cvd_bullish_divergence:"Cumulative Volume Delta diverges bullish from price.",stop_hunt:"Price spiked to trigger stop losses then reversed.",absorption_bullish:"Large buy orders absorbing selling pressure.",absorption_bearish:"Large sell orders absorbing buying pressure.",institutional_accumulation:"Signs of institutional buying activity.",delta_imbalance_bullish:"Strong buying pressure shown by delta imbalance.",delta_imbalance_bearish:"Strong selling pressure shown by delta imbalance.",big_trade_bullish:"Large institutional buy order detected.",big_trade_bearish:"Large institutional sell order detected.",TARGET:"Trade hit profit target - always a winner.",STOP_LOSS:"Trade hit stop loss - always a loss (risk management).",TIME_EXIT:"Trade closed at max holding period."},[oe,fe]=I.useState(null),Se=({label:a,wins:m,total:F,pnl:B,color:A})=>{const H=F>0?(m/F*100).toFixed(0):0,se=Xe(a),$=Pe[a];return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",cursor:"help"},onMouseMove:ye=>fe({label:a,formattedLabel:se,wr:H,total:F,pnl:B,color:A,tooltip:$,x:ye.clientX,y:ye.clientY}),onMouseLeave:()=>fe(null),children:[e.jsx("div",{style:{width:150,fontSize:11,color:"#ccc"},children:se}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative",overflow:"hidden",minWidth:80},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${H}%`,background:A,borderRadius:4}}),e.jsxs("div",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:600,color:"#fff"},children:[H,"%"]})]}),e.jsx("div",{style:{width:40,fontSize:10,color:"#888",textAlign:"right"},children:F}),e.jsxs("div",{style:{width:65,fontSize:10,color:B>=0?"#00ff88":"#ff4466",textAlign:"right",fontWeight:600},children:["$",(B/1e3).toFixed(1),"K"]})]})},[O,ee]=I.useState(null),ke=({id:a,title:m,content:F,color:B})=>e.jsx("span",{style:{cursor:"pointer",fontSize:12,color:"#666",opacity:.7,marginLeft:8},onMouseMove:A=>ee({id:a,title:m,content:F,color:B,x:A.clientX,y:A.clientY}),onMouseLeave:()=>ee(null),children:""}),lt={tpo:{title:"TPO Profile Types",content:"Time Price Opportunity (TPO) profiles show where price spent the most time. P-shape = rally day (close near high). b-shape = selloff day (close near low). D-shape = balanced day. B-shape = double distribution with two value areas."},volume:{title:"Volume Patterns",content:"Volume analysis reveals institutional activity. Climax = extreme volume with large range. Absorption = high volume but small range (accumulation). No Demand/Supply = low volume indicating lack of interest. Exhaustion = decreasing volume on trend continuation."},wyckoff:{title:"Wyckoff Phases",content:"Market cycle phases based on Wyckoff methodology. Accumulation = institutional buying at lows. Distribution = institutional selling at highs. Markup = uptrend phase. Markdown = downtrend phase. Re-accumulation/Re-distribution = pauses within trends."},orderflow:{title:"Order Flow Patterns",content:"Order flow detects institutional footprints. Big Trades = large volume spikes indicating institutional activity. CVD Divergence = price vs cumulative delta mismatch. Delta Imbalance = strong directional buying/selling pressure. Stop Hunt = price spikes to trigger stops then reverses."},exit:{title:"Exit Reasons",content:"How trades were closed. TARGET = price hit profit target (best outcome). TIME_EXIT = closed after max holding period. STOP_LOSS = protective stop triggered (controlled loss). Each exit type has different win rate implications."}};return e.jsxs("div",{style:{background:"#0a0a0f",minHeight:"100vh",padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:12},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:20,fontWeight:800,color:"#fff",margin:0},children:"Horizon Backtest Analytics"}),e.jsxs("p",{style:{fontSize:11,color:"#666",margin:0},children:[(He=p==null?void 0:p.data_range)==null?void 0:He.start," to ",(Le=p==null?void 0:p.data_range)==null?void 0:Le.end," | ",(n==null?void 0:n.length)||0," trades"]})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"date",value:d.start,onChange:a=>c({...d,start:a.target.value}),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"6px 10px",color:"#fff",fontSize:11}}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"to"}),e.jsx("input",{type:"date",value:d.end,onChange:a=>c({...d,end:a.target.value}),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"6px 10px",color:"#fff",fontSize:11}}),e.jsx("button",{onClick:U,style:{background:"#00ff88",border:"none",borderRadius:6,padding:"6px 12px",color:"#000",fontWeight:600,cursor:"pointer",fontSize:11},children:"Apply"}),e.jsx("button",{onClick:j,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:6,padding:"6px 12px",color:"#888",cursor:"pointer",fontSize:11},children:"Reset"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 1fr)",gap:8,marginBottom:16},children:[e.jsx(it,{label:"Trades",value:(n==null?void 0:n.length)||0,color:"#00ff88"}),e.jsx(it,{label:"Win Rate",value:`${((((Je=t.summary)==null?void 0:Je.win_rate)||0)*100).toFixed(1)}%`,color:(((At=t.summary)==null?void 0:At.win_rate)||0)>=.5?"#00ff88":"#ff4466",sub:`${Ce.length}W / ${v.length}L`}),e.jsx(it,{label:"Profit Factor",value:(((J=t.summary)==null?void 0:J.profit_factor)||0).toFixed(2),color:((ot=t.summary)==null?void 0:ot.profit_factor)>=1.5?"#00ff88":"#ffaa00"}),e.jsx(it,{label:"Total P&L",value:`$${((((rt=t.summary)==null?void 0:rt.total_pnl)||0)/1e3).toFixed(0)}K`,color:((Qe=t.summary)==null?void 0:Qe.total_pnl)>=0?"#00ff88":"#ff4466"}),e.jsx(it,{label:"Max DD",value:`${Be.toFixed(1)}%`,color:Be>20?"#ff4466":"#ffaa00"}),e.jsx(it,{label:"Avg Win",value:`$${(_e/1e3).toFixed(1)}K`,color:"#00ff88"}),e.jsx(it,{label:"Avg Loss",value:`$${(le/1e3).toFixed(1)}K`,color:"#ff4466"}),e.jsx(it,{label:"Avg R",value:`${(((re=t.summary)==null?void 0:re.avg_r)||0).toFixed(2)}R`,color:"#8b5cf6"}),e.jsx(it,{label:"Return",value:`${ne.toFixed(1)}%`,color:ne>=0?"#00ff88":"#ff4466"}),e.jsx(it,{label:"Final Equity",value:`$${(Oe/1e3).toFixed(0)}K`,color:"#f97316"})]}),e.jsx("div",{style:{display:"flex",gap:6,marginBottom:16},children:Ne.map(a=>e.jsxs("button",{onClick:()=>w(a.id),style:{background:g===a.id?"#00ff88":"rgba(255,255,255,0.05)",border:"none",borderRadius:6,padding:"8px 16px",color:g===a.id?"#000":"#888",fontWeight:600,cursor:"pointer",fontSize:11},children:[a.icon," ",a.label]},a.id))}),g==="overview"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(0,20,10,0.8) 0%, rgba(0,0,0,0.95) 100%)",borderRadius:16,padding:20,border:"1px solid rgba(0,255,136,0.15)",boxShadow:"0 4px 24px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{fontSize:14,fontWeight:700,color:"#fff",margin:0,letterSpacing:.5},children:"Equity Curve"}),e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[_.length," trades"]})]}),e.jsx("div",{style:{height:220,position:"relative"},onMouseLeave:()=>u(null),children:_.length>0?(()=>{const a=Math.max(..._.map($=>$.equity)),m=Math.min(..._.map($=>$.equity)),F=a-m||1,B=$=>200-($-m)/F*170,A=$=>20+$/(_.length-1)*560,H=_.map(($,ye)=>`${ye===0?"M":"L"} ${A(ye)} ${B($.equity)}`).join(" "),se=`${H} L ${A(_.length-1)} 200 L 20 200 Z`;return e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 600 220",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"eqGradPremium",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#00ff88",stopOpacity:"0.25"}),e.jsx("stop",{offset:"50%",stopColor:"#00cc66",stopOpacity:"0.1"}),e.jsx("stop",{offset:"100%",stopColor:"#00ff88",stopOpacity:"0"})]}),e.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"lineGrad",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#00cc66"}),e.jsx("stop",{offset:"50%",stopColor:"#00ff88"}),e.jsx("stop",{offset:"100%",stopColor:"#00ffaa"})]})]}),[.25,.5,.75].map($=>e.jsx("line",{x1:"20",y1:200-$*170,x2:"580",y2:200-$*170,stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"},$)),e.jsx("line",{x1:"20",y1:B(1e5),x2:"580",y2:B(1e5),stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",strokeDasharray:"4,4"}),e.jsx("text",{x:"585",y:B(1e5)+4,fontSize:"8",fill:"#666",children:"$100K"}),e.jsx("path",{d:se,fill:"url(#eqGradPremium)"}),e.jsx("path",{d:H,fill:"none",stroke:"url(#lineGrad)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow)"}),_.map(($,ye)=>e.jsx("rect",{x:A(ye)-5,y:0,width:10,height:220,fill:"transparent",style:{cursor:"crosshair"},onMouseEnter:()=>u(ye)},ye)),y!==null&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:A(y),y1:0,x2:A(y),y2:200,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",strokeDasharray:"2,2"}),e.jsx("circle",{cx:A(y),cy:B(_[y].equity),r:8,fill:"none",stroke:"#00ff88",strokeWidth:"2"}),e.jsx("circle",{cx:A(y),cy:B(_[y].equity),r:4,fill:_[y].pnl>=0?"#00ff88":"#ff4466"})]}),e.jsxs("text",{x:"5",y:"15",fontSize:"9",fill:"#666",children:["$",(a/1e3).toFixed(0),"K"]}),e.jsxs("text",{x:"5",y:"200",fontSize:"9",fill:"#666",children:["$",(m/1e3).toFixed(0),"K"]})]}),y!==null&&_[y]&&(()=>{var ye;const $=_[y];return e.jsxs("div",{style:{position:"absolute",top:10,right:10,background:"linear-gradient(135deg, rgba(0,30,20,0.98) 0%, rgba(0,0,0,0.98) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,padding:14,fontSize:11,minWidth:180,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{fontWeight:700,color:"#00ff88",marginBottom:8,fontSize:12,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:8},children:$.date}),e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Equity"}),e.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["$",($.equity/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Trade P&L"}),e.jsxs("span",{style:{color:$.pnl>=0?"#00ff88":"#ff4466",fontWeight:600},children:[$.pnl>=0?"+":"","$",(ye=$.pnl)==null?void 0:ye.toFixed(0)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Total Profit"}),e.jsxs("span",{style:{color:$.totalProfit>=0?"#00ff88":"#ff4466",fontWeight:700},children:[$.totalProfit>=0?"+":"","$",($.totalProfit/1e3).toFixed(1),"K ",e.jsxs("span",{style:{fontSize:9,opacity:.7},children:["(",$.totalProfitPct>=0?"+":"",$.totalProfitPct.toFixed(0),"%)"]})]})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:6,marginTop:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Peak"}),e.jsxs("span",{style:{color:"#fff"},children:["$",($.peak/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"From Peak"}),e.jsx("span",{style:{color:$.fromPeak>0?"#ff4466":"#00ff88",fontWeight:600},children:$.fromPeak>0?`-$${($.fromPeak/1e3).toFixed(1)}K (${$.drawdown.toFixed(1)}%)`:"AT HIGH"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Max DD"}),e.jsxs("span",{style:{color:$.maxDrawdownSoFar>10?"#ff4466":"#ffaa00",fontWeight:600},children:[$.maxDrawdownSoFar.toFixed(1),"%"]})]})]}),e.jsxs("div",{style:{fontSize:9,color:"#555",textAlign:"right",marginTop:2},children:["Trade #",y+1]})]})]})})()]})})():e.jsx("div",{style:{color:"#666",textAlign:"center",paddingTop:100},children:"No data"})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Yearly Performance"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:(t.yearly_pnl||[]).map(a=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:10,textAlign:"center",border:s===a.year?"2px solid #00ff88":"1px solid transparent",cursor:"pointer"},onClick:()=>l(a.year),children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#fff"},children:a.year}),e.jsxs("div",{style:{fontSize:14,fontWeight:800,color:a.pnl>=0?"#00ff88":"#ff4466"},children:["$",(a.pnl/1e3).toFixed(0),"K"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:[a.trades," trades | ",((a.win_rate||0)*100).toFixed(1),"%"]})]},a.year))})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Winners vs Losers"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(0,255,136,0.3)"},children:[e.jsxs("div",{style:{fontSize:10,color:"#00ff88",marginBottom:8},children:["WINNERS (",Ce.length,")"]}),e.jsxs("div",{style:{fontSize:9,color:"#888",display:"grid",gap:4},children:[e.jsxs("div",{children:["Avg P&L: ",e.jsxs("span",{style:{color:"#00ff88",fontWeight:600},children:["$",_e.toFixed(0)]})]}),e.jsxs("div",{children:["Best: ",e.jsxs("span",{style:{color:"#00ff88"},children:["$",Math.max(...Ce.map(a=>a.pnl||0)).toFixed(0)]})]}),e.jsxs("div",{children:["Avg R: ",e.jsxs("span",{style:{color:"#00ff88"},children:[(Ce.reduce((a,m)=>a+(m.r||0),0)/Ce.length).toFixed(2),"R"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(255,68,102,0.3)"},children:[e.jsxs("div",{style:{fontSize:10,color:"#ff4466",marginBottom:8},children:["LOSERS (",v.length,")"]}),e.jsxs("div",{style:{fontSize:9,color:"#888",display:"grid",gap:4},children:[e.jsxs("div",{children:["Avg P&L: ",e.jsxs("span",{style:{color:"#ff4466",fontWeight:600},children:["-$",le.toFixed(0)]})]}),e.jsxs("div",{children:["Worst: ",e.jsxs("span",{style:{color:"#ff4466"},children:["$",Math.min(...v.map(a=>a.pnl||0)).toFixed(0)]})]}),e.jsxs("div",{children:["Avg R: ",e.jsxs("span",{style:{color:"#ff4466"},children:[(v.reduce((a,m)=>a+(m.r||0),0)/v.length).toFixed(2),"R"]})]})]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Market Direction (5Y)"}),e.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8},children:[e.jsx("div",{style:{flex:z,background:"#00ff88",height:20,borderRadius:4}}),e.jsx("div",{style:{flex:Ie,background:"#ff4466",height:20,borderRadius:4}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsxs("span",{style:{color:"#00ff88"},children:[z," Bullish (",(z/h*100).toFixed(1),"%)"]}),e.jsxs("span",{style:{color:"#ff4466"},children:[Ie," Bearish (",(Ie/h*100).toFixed(1),"%)"]})]})]})]}),g==="analytics"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#8b5cf6",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO Profile Types",e.jsx(ke,{id:"tpo",title:lt.tpo.title,content:lt.tpo.content,color:"#8b5cf6"})]}),Object.entries((E==null?void 0:E.by_tpo_type)||{}).sort((a,m)=>m[1].total-a[1].total).map(([a,m])=>e.jsx(Se,{label:a,wins:m.wins,total:m.total,pnl:m.pnl,color:"#8b5cf6"},a))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Volume Patterns",e.jsx(ke,{id:"volume",title:lt.volume.title,content:lt.volume.content,color:"#f97316"})]}),Object.entries((E==null?void 0:E.by_volume_pattern)||{}).sort((a,m)=>m[1].total-a[1].total).slice(0,8).map(([a,m])=>e.jsx(Se,{label:a,wins:m.wins,total:m.total,pnl:m.pnl,color:"#f97316"},a))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00bcd4",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phases",e.jsx(ke,{id:"wyckoff",title:lt.wyckoff.title,content:lt.wyckoff.content,color:"#00bcd4"})]}),Object.entries((E==null?void 0:E.by_wyckoff_phase)||{}).sort((a,m)=>m[1].total-a[1].total).map(([a,m])=>e.jsx(Se,{label:a,wins:m.wins,total:m.total,pnl:m.pnl,color:"#00bcd4"},a))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Order Flow Patterns",e.jsx(ke,{id:"orderflow",title:lt.orderflow.title,content:lt.orderflow.content,color:"#ff4466"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px 32px"},children:Object.entries((E==null?void 0:E.by_order_flow)||{}).sort((a,m)=>m[1].total-a[1].total).map(([a,m])=>e.jsx(Se,{label:a,wins:m.wins,total:m.total,pnl:m.pnl,color:"#ff4466"},a))})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Exit Reasons",e.jsx(ke,{id:"exit",title:lt.exit.title,content:lt.exit.content,color:"#00ff88"})]}),(()=>{const a=(E==null?void 0:E.by_exit_reason)||{},m=Object.values(a).reduce((F,B)=>F+B.total,0);return Object.entries(a).sort((F,B)=>B[1].total-F[1].total).map(([F,B])=>{const A=m>0?(B.total/m*100).toFixed(0):0,H=Xe(F),se=F==="TARGET"?"#00ff88":F==="STOP_LOSS"?"#ff4466":"#f97316";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:100,fontSize:11,color:"#ccc"},children:H}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative",overflow:"hidden",minWidth:100},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${A}%`,background:se,borderRadius:4}}),e.jsxs("div",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:600,color:"#fff"},children:[A,"%"]})]}),e.jsx("div",{style:{width:45,fontSize:10,color:"#888",textAlign:"right"},children:B.total}),e.jsxs("div",{style:{width:70,fontSize:10,color:B.pnl>=0?"#00ff88":"#ff4466",textAlign:"right",fontWeight:600},children:["$",(B.pnl/1e3).toFixed(1),"K"]})]},F)})})()]})]}),g==="features"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO Type Distribution (All Sessions)",e.jsx(ke,{id:"tpo_dist",title:"TPO Distribution",content:"Total count of each TPO profile type across all trading sessions. TPO (Time Price Opportunity) profiles show where price spent the most time.",color:"#8b5cf6"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:(()=>{const a=Object.values((ie==null?void 0:ie.tpo_types)||{}).reduce((m,F)=>m+F,0);return Object.entries((ie==null?void 0:ie.tpo_types)||{}).sort((m,F)=>F[1]-m[1]).map(([m,F])=>e.jsx(Rt,{type:m,count:F,total:a,setHoveredTpo:W},m))})()})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phase Distribution",e.jsx(ke,{id:"wyckoff_dist",title:"Wyckoff Distribution",content:"Market cycle phases based on Wyckoff methodology. Shows institutional accumulation/distribution patterns.",color:"#00bcd4"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:(()=>{const a=Object.values((ie==null?void 0:ie.wyckoff_phases)||{}).reduce((m,F)=>m+F,0);return Object.entries((ie==null?void 0:ie.wyckoff_phases)||{}).sort((m,F)=>F[1]-m[1]).map(([m,F])=>e.jsx(Ke,{phase:m,count:F,total:a,setHoveredWyckoff:Ue},m))})()})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Performing Setups",e.jsx(ke,{id:"best_setups",title:"Best Setups",content:"TPO profile types with the highest win rates (minimum 5 trades). These patterns historically produced the most consistent winning trades. Consider prioritizing entries during these market structures.",color:"#00ff88"})]}),Object.entries((E==null?void 0:E.by_tpo_type)||{}).filter(([,a])=>a.total>=5).sort((a,m)=>m[1].win_rate-a[1].win_rate).slice(0,5).map(([a,m])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:11},children:[e.jsx("span",{style:{color:"#888"},children:a}),e.jsxs("span",{style:{color:"#00ff88",fontWeight:600},children:[m.win_rate,"% WR | $",(m.pnl/1e3).toFixed(1),"K"]})]},a))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Worst Performing Setups",e.jsx(ke,{id:"worst_setups",title:"Worst Setups",content:"TPO profile types with the lowest win rates (minimum 5 trades). These patterns historically produced more losing trades. Consider avoiding or using tighter stops when trading during these market structures.",color:"#ff4466"})]}),Object.entries((E==null?void 0:E.by_tpo_type)||{}).filter(([,a])=>a.total>=5).sort((a,m)=>a[1].win_rate-m[1].win_rate).slice(0,5).map(([a,m])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:11},children:[e.jsx("span",{style:{color:"#888"},children:a}),e.jsxs("span",{style:{color:"#ff4466",fontWeight:600},children:[m.win_rate,"% WR | $",(m.pnl/1e3).toFixed(1),"K"]})]},a))]})]}),g==="phase"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00bcd4",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phase Detection",e.jsx(ke,{id:"phase_detect",title:"Phase Detection",content:"Market phases identified using Wyckoff methodology across 5 years of historical data. Shows how price moves through accumulation, markup, distribution, and markdown cycles.",color:"#00bcd4"})]}),(()=>{const a=(ie==null?void 0:ie.wyckoff_phases)||{},m=Object.values(a).reduce((B,A)=>B+A,0),F={accumulation:"#00ff88",markup:"#22c55e",distribution:"#ff4466",markdown:"#ef4444",consolidation:"#f97316",trending:"#a855f7",re_accumulation:"#10b981",re_distribution:"#f43f5e",unknown:"#666"};return Object.entries(a).sort((B,A)=>A[1]-B[1]).map(([B,A])=>{const H=m>0?(A/m*100).toFixed(1):0,se=F[B]||"#888";return e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:11,color:"#ccc"},children:Xe(B)}),e.jsxs("span",{style:{fontSize:11,color:se,fontWeight:600},children:[A," (",H,"%)"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:4,height:8,overflow:"hidden"},children:e.jsx("div",{style:{width:`${H}%`,height:"100%",background:se,borderRadius:4}})})]},B)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#a855f7",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Phase Performance Analysis",e.jsx(ke,{id:"phase_perf",title:"Phase Performance",content:"Trading performance breakdown by Wyckoff phase. Shows win rate and P&L for each market phase to identify which phases are most profitable to trade.",color:"#a855f7"})]}),(()=>{const a=(E==null?void 0:E.by_wyckoff_phase)||{};return Object.entries(a).sort((m,F)=>F[1].pnl-m[1].pnl).map(([m,F])=>{const B=F.win_rate||0,A=B>=65?"#00ff88":B>=50?"#f97316":"#ff4466";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:90,fontSize:10,color:"#aaa"},children:Xe(m)}),e.jsxs("div",{style:{width:50,fontSize:10,color:A,fontWeight:600},children:[B.toFixed(0),"% WR"]}),e.jsx("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:12,position:"relative"},children:e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Math.min(100,B)}%`,background:A,borderRadius:4}})}),e.jsxs("div",{style:{width:70,fontSize:10,color:F.pnl>=0?"#00ff88":"#ff4466",fontWeight:600,textAlign:"right"},children:["$",(F.pnl/1e3).toFixed(1),"K"]})]},m)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Order Flow Pattern Detection",e.jsx(ke,{id:"orderflow_detect",title:"Order Flow Detection",content:"Detected order flow patterns: CVD divergences, VSA no-effort results, delta imbalances, and absorption patterns identified across historical sessions.",color:"#ff4466"})]}),(()=>{const a=(E==null?void 0:E.by_order_flow)||{},m=Object.values(a).reduce((B,A)=>B+A.total,0),F={cvd_bullish_divergence:"#00ff88",cvd_bearish_divergence:"#ff4466",vsa_no_effort_result:"#f97316",delta_imbalance:"#a855f7",absorption:"#00bcd4",normal:"#666"};return Object.entries(a).sort((B,A)=>A[1].total-B[1].total).map(([B,A])=>{const H=m>0?(A.total/m*100).toFixed(1):0,se=F[B]||"#888";return e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:10,color:"#ccc"},children:Xe(B)}),e.jsxs("span",{style:{fontSize:10,color:"#888"},children:[A.total," trades (",H,"%)"]})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:8,overflow:"hidden"},children:e.jsx("div",{style:{width:`${H}%`,height:"100%",background:se,borderRadius:4}})}),e.jsxs("span",{style:{fontSize:9,color:A.win_rate>=60?"#00ff88":"#f97316",fontWeight:600,width:45},children:[A.win_rate.toFixed(0),"% WR"]})]})]},B)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Volume Pattern Detection",e.jsx(ke,{id:"volume_detect",title:"Volume Patterns",content:"Volume patterns detected using VSA (Volume Spread Analysis): climax, exhaustion, absorption, no demand/supply signals across 1,257 trading sessions.",color:"#f97316"})]}),(()=>{const a=(ie==null?void 0:ie.volume_patterns)||{},m=Object.values(a).reduce((B,A)=>B+A,0),F={climax_bullish:"#00ff88",climax_bearish:"#ff4466",exhaustion:"#f97316",absorption:"#a855f7",no_demand:"#ff6b6b",no_supply:"#22c55e",high_volume:"#00bcd4",low_volume:"#888",normal:"#666"};return Object.entries(a).sort((B,A)=>A[1]-B[1]).map(([B,A])=>{const H=m>0?(A/m*100).toFixed(1):0,se=F[B]||"#888";return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:10,color:"#ccc"},children:Xe(B)}),e.jsxs("span",{style:{fontSize:10,color:se,fontWeight:600},children:[A," (",H,"%)"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:3,height:6,overflow:"hidden"},children:e.jsx("div",{style:{width:`${H}%`,height:"100%",background:se,borderRadius:3}})})]},B)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#22c55e",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Historical GEX Regime Analysis (Simulated from Price Action)",e.jsx(ke,{id:"gex_regime",title:"GEX Regimes",content:"GEX regime classification derived from historical price volatility and range patterns. High GEX (>$5B) correlates with mean-reverting conditions, Low GEX (<$1B) with trending/volatile markets.",color:"#22c55e"})]}),(()=>{const a=(t==null?void 0:t.daily_candles)||[];let m=0,F=0,B=0,A=0;a.forEach($=>{const ye=$.high-$.low,vt=($.high+$.low)/2,ct=vt>0?ye/vt*100:0;ct<.5?m++:ct<1?F++:ct<2?B++:A++});const H=m+F+B+A||1,se=[{name:"High GEX (>$5B)",count:m,pct:(m/H*100).toFixed(1),color:"#00ff88",desc:"Mean-reverting, low volatility"},{name:"Medium GEX ($1-5B)",count:F,pct:(F/H*100).toFixed(1),color:"#f97316",desc:"Normal conditions"},{name:"Low GEX (<$1B)",count:B,pct:(B/H*100).toFixed(1),color:"#ff4466",desc:"Trending, higher volatility"},{name:"Negative GEX",count:A,pct:(A/H*100).toFixed(1),color:"#a855f7",desc:"Extreme volatility, dealer short gamma"}];return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:se.map($=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:12,textAlign:"center",borderTop:`3px solid ${$.color}`},children:[e.jsx("div",{style:{fontSize:22,fontWeight:800,color:$.color},children:$.count}),e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:$.name}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#fff"},children:[$.pct,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:4},children:$.desc})]},$.name))})})()]})]}),g==="matrix"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#a855f7",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO-Wyckoff Phase Correlation Matrix",e.jsx(ke,{id:"tpo_wyckoff_matrix",title:"Correlation Matrix",content:"Heat map showing which TPO profile types occur during which Wyckoff phases. Helps identify market structure patterns and optimal entry conditions.",color:"#a855f7"})]}),(()=>{const a=["P-shape","b-shape","D-shape","B-shape","elongated_up","elongated_down","single_print"],m=["accumulation","markup","distribution","markdown","consolidation","trending","re_accumulation","re_distribution"],F={};a.forEach(A=>{F[A]={},m.forEach(H=>{F[A][H]=0})}),(n||[]).forEach(A=>{const H=A.tpo_type||"unknown",se=A.wyckoff_phase||"unknown";F[H]&&F[H][se]!==void 0&&F[H][se]++});let B=1;return a.forEach(A=>m.forEach(H=>{F[A][H]>B&&(B=F[A][H])})),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:6,textAlign:"left",color:"#888",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"TPO / Phase"}),m.map(A=>e.jsx("th",{style:{padding:6,textAlign:"center",color:"#00bcd4",borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:8},children:Xe(A).split(" ")[0]},A))]})}),e.jsx("tbody",{children:a.map(A=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6,color:"#8b5cf6",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:A}),m.map(H=>{const se=F[A][H],$=se/B,ye=se>0?`rgba(168,85,247,${.1+$*.6})`:"transparent";return e.jsx("td",{style:{padding:6,textAlign:"center",background:ye,color:se>0?"#fff":"#333",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:se>0?se:"-"},H)})]},A))})]})})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Win Rate Matrix (TPO + Wyckoff Combinations)",e.jsx(ke,{id:"wr_matrix",title:"Win Rate Matrix",content:"Historical win rates for each TPO-Wyckoff combination. Green cells indicate high-probability setups (>65% WR), red cells indicate setups to avoid (<45% WR).",color:"#00ff88"})]}),(()=>{const a=["P-shape","b-shape","D-shape","B-shape","elongated_up","elongated_down"],m=["accumulation","markup","distribution","markdown","consolidation","trending"],F={};return a.forEach(B=>{F[B]={},m.forEach(A=>{F[B][A]={wins:0,total:0}})}),(n||[]).forEach(B=>{const A=B.tpo_type||"unknown",H=B.wyckoff_phase||"unknown";F[A]&&F[A][H]&&(F[A][H].total++,B.pnl>0&&F[A][H].wins++)}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:6,textAlign:"left",color:"#888",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"TPO / Phase"}),m.map(B=>e.jsx("th",{style:{padding:6,textAlign:"center",color:"#00bcd4",borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:8},children:Xe(B).split(" ")[0]},B))]})}),e.jsx("tbody",{children:a.map(B=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6,color:"#8b5cf6",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:B}),m.map(A=>{const{wins:H,total:se}=F[B][A],$=se>0?(H/se*100).toFixed(0):null,ye=$===null?"#333":$>=65?"#00ff88":$>=50?"#f97316":"#ff4466",vt=$===null?"transparent":$>=65?"rgba(0,255,136,0.15)":$>=50?"rgba(249,115,22,0.1)":"rgba(255,68,102,0.15)";return e.jsxs("td",{style:{padding:6,textAlign:"center",background:vt,color:ye,fontWeight:$!==null?600:400,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[$!==null?`${$}%`:"-",se>0&&e.jsxs("div",{style:{fontSize:7,color:"#666"},children:["n=",se]})]},A)})]},B))})]})})})(),e.jsxs("div",{style:{marginTop:12,display:"flex",gap:16,justifyContent:"center",fontSize:9},children:[e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(0,255,136,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," High WR (65%+)"]}),e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(249,115,22,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," Medium WR (50-65%)"]}),e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(255,68,102,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," Low WR (<50%)"]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Order Flow + TPO Combinations",e.jsx(ke,{id:"of_tpo",title:"Order Flow + TPO",content:"Most profitable combinations of order flow signals with TPO profile types. These combinations showed the highest win rates in backtesting.",color:"#ff4466"})]}),(()=>{const a={};return(n||[]).forEach(m=>{const F=`${m.order_flow||"normal"}|${m.tpo_type||"unknown"}`;a[F]||(a[F]={wins:0,total:0,pnl:0}),a[F].total++,a[F].pnl+=m.pnl||0,m.pnl>0&&a[F].wins++}),Object.entries(a).filter(([,m])=>m.total>=5).map(([m,F])=>({key:m,...F,wr:F.wins/F.total*100})).sort((m,F)=>F.wr-m.wr).slice(0,8).map(m=>{const[F,B]=m.key.split("|");return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{flex:1,fontSize:10,color:"#ccc"},children:[e.jsx("span",{style:{color:"#ff4466"},children:Xe(F)})," + ",e.jsx("span",{style:{color:"#8b5cf6"},children:B})]}),e.jsxs("div",{style:{fontSize:10,color:m.wr>=65?"#00ff88":"#f97316",fontWeight:600},children:[m.wr.toFixed(0),"%"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:["n=",m.total]})]},m.key)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Volume + Wyckoff Combinations",e.jsx(ke,{id:"vol_wyckoff",title:"Volume + Wyckoff",content:"Most profitable combinations of volume patterns with Wyckoff phases. Identifies which volume signals work best in specific market cycles.",color:"#f97316"})]}),(()=>{const a={};return(n||[]).forEach(m=>{const F=`${m.volume_pattern||"normal"}|${m.wyckoff_phase||"unknown"}`;a[F]||(a[F]={wins:0,total:0,pnl:0}),a[F].total++,a[F].pnl+=m.pnl||0,m.pnl>0&&a[F].wins++}),Object.entries(a).filter(([,m])=>m.total>=5).map(([m,F])=>({key:m,...F,wr:F.wins/F.total*100})).sort((m,F)=>F.wr-m.wr).slice(0,8).map(m=>{const[F,B]=m.key.split("|");return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{flex:1,fontSize:10,color:"#ccc"},children:[e.jsx("span",{style:{color:"#f97316"},children:Xe(F)})," + ",e.jsx("span",{style:{color:"#00bcd4"},children:Xe(B)})]}),e.jsxs("div",{style:{fontSize:10,color:m.wr>=65?"#00ff88":"#f97316",fontWeight:600},children:[m.wr.toFixed(0),"%"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:["n=",m.total]})]},m.key)})})()]})]}),g==="seasonality"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Monthly Seasonality"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:8},children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(a=>{var F;const m=((F=S==null?void 0:S.monthly)==null?void 0:F[a])||{win_rate:50,avg_return:0};return e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666"},children:a.slice(0,3)}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:m.avg_return>=0?"#00ff88":"#ff4466"},children:[m.win_rate,"%"]}),e.jsxs("div",{style:{fontSize:8,color:m.avg_return>=0?"#00ff88":"#ff4466"},children:[m.avg_return>=0?"+":"",m.avg_return.toFixed(2),"%"]})]},a)})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Day of Week"}),["Monday","Tuesday","Wednesday","Thursday","Friday"].map(a=>{var F;const m=((F=S==null?void 0:S.day_of_week)==null?void 0:F[a])||{win_rate:50,avg_return:0};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:60,fontSize:10,color:"#888"},children:a.slice(0,3)}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${m.win_rate}%`,background:m.avg_return>=0?"#00ff88":"#ff4466",borderRadius:4}}),e.jsxs("span",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:9,color:"#fff",fontWeight:600},children:[m.win_rate,"%"]})]})]},a)})]})]}),g==="trades"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16},children:[e.jsx(Ip,{trades:n,dateRange:i}),e.jsx(Ou,{trades:n})]}),oe&&e.jsxs("div",{style:{position:"fixed",left:oe.x+15,top:oe.y+15,transform:oe.x>window.innerWidth-340?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(20,20,25,0.98) 0%, rgba(10,10,15,0.98) 100%)",border:`1px solid ${oe.color}44`,borderRadius:10,padding:"12px 14px",minWidth:240,maxWidth:320,boxShadow:`0 12px 32px rgba(0,0,0,0.8), 0 0 15px ${oe.color}22`,zIndex:9999,pointerEvents:"none"},children:[e.jsx("div",{style:{fontWeight:700,color:oe.color,marginBottom:8,fontSize:13},children:oe.formattedLabel}),e.jsx("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.6},children:oe.tooltip||`Win rate: ${oe.wr}% across ${oe.total} trades with ${oe.pnl>=0?"profit":"loss"} of $${(oe.pnl/1e3).toFixed(1)}K`}),e.jsxs("div",{style:{marginTop:10,padding:"6px 8px",background:"rgba(255,255,255,0.05)",borderRadius:6,fontSize:10,display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Win Rate"}),e.jsxs("span",{style:{color:oe.color,fontWeight:700},children:[oe.wr,"%"]})]})]}),O&&e.jsxs("div",{style:{position:"fixed",left:O.x+15,top:O.y+15,transform:O.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(15,15,20,0.98) 0%, rgba(5,5,10,0.98) 100%)",border:`1px solid ${O.color}40`,borderRadius:12,padding:16,width:280,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 20px ${O.color}20`,zIndex:9999,pointerEvents:"none"},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:O.color,marginBottom:10,borderBottom:`1px solid ${O.color}30`,paddingBottom:8},children:O.title}),e.jsx("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.6},children:O.content})]}),(L||Y)&&e.jsx("div",{onClick:()=>{W(null),Ue(null)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,cursor:"default"}}),L&&e.jsxs("div",{onClick:()=>W(null),style:{position:"fixed",left:L.x+15,top:L.y+15,transform:L.x>window.innerWidth-280?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(20,15,30,0.98) 0%, rgba(10,8,20,0.98) 100%)",border:"1px solid rgba(139,92,246,0.4)",borderRadius:14,padding:16,minWidth:240,boxShadow:"0 12px 40px rgba(0,0,0,0.8), 0 0 20px rgba(139,92,246,0.2)",zIndex:9999,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:12},children:[e.jsx("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:10,padding:8,border:"1px solid rgba(139,92,246,0.2)"},children:L.visual.svg}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#8b5cf6",marginBottom:4},children:Xe(L.type)}),e.jsx("div",{style:{fontSize:11,color:L.visual.color,fontWeight:600,padding:"2px 8px",background:`${L.visual.color}22`,borderRadius:4,display:"inline-block"},children:L.visual.signal})]})]}),e.jsx("div",{style:{fontSize:11,color:"#bbb",lineHeight:1.6,marginBottom:12},children:L.visual.desc}),e.jsxs("div",{style:{padding:"8px 10px",background:"rgba(139,92,246,0.1)",borderRadius:8,fontSize:10,color:"#888",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Occurrences"}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#8b5cf6",fontWeight:700,fontSize:12},children:L.count})," (",L.pct,"%)"]})]}),e.jsx("div",{style:{fontSize:9,color:"#555",textAlign:"center",marginTop:8},children:"Click anywhere to dismiss"})]}),Y&&e.jsxs("div",{onClick:()=>Ue(null),style:{position:"fixed",left:Y.x+15,top:Y.y+15,transform:Y.x>window.innerWidth-300?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(15,25,30,0.98) 0%, rgba(8,15,20,0.98) 100%)",border:"1px solid rgba(0,188,212,0.4)",borderRadius:14,padding:16,width:260,boxShadow:"0 12px 40px rgba(0,0,0,0.8), 0 0 20px rgba(0,188,212,0.2)",zIndex:9999,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:12},children:[e.jsx("div",{style:{background:"rgba(0,188,212,0.1)",borderRadius:10,padding:8,border:"1px solid rgba(0,188,212,0.2)"},children:Y.visual.svg}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00bcd4",marginBottom:4,textTransform:"capitalize"},children:Y.phase.replace(/_/g," ")}),e.jsx("div",{style:{fontSize:11,color:Y.visual.color,fontWeight:600,padding:"2px 8px",background:`${Y.visual.color}22`,borderRadius:4,display:"inline-block"},children:Y.visual.signal})]})]}),e.jsx("div",{style:{fontSize:11,color:"#bbb",lineHeight:1.6,marginBottom:12},children:Y.visual.desc}),e.jsxs("div",{style:{padding:"8px 10px",background:"rgba(0,188,212,0.1)",borderRadius:8,fontSize:10,color:"#888",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Occurrences"}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00bcd4",fontWeight:700,fontSize:12},children:Y.count})," (",Y.pct,"%)"]})]}),e.jsx("div",{style:{fontSize:9,color:"#555",textAlign:"center",marginTop:8},children:"Click anywhere to dismiss"})]})]})},Ip=({trades:t,dateRange:n})=>{const i=t.filter(l=>l.date>=n.start&&l.date<=n.end).sort((l,d)=>new Date(d.date)-new Date(l.date)),o=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"],d=i.map(u=>{var L,W,Y,Ue,p;return[u.date,((L=u.entry)==null?void 0:L.toFixed(2))||"",((W=u.exit)==null?void 0:W.toFixed(2))||"",((Y=u.stop_loss)==null?void 0:Y.toFixed(2))||"",((Ue=u.pnl)==null?void 0:Ue.toFixed(2))||"",((p=u.r)==null?void 0:p.toFixed(2))||"",u.grade||"",u.tier||"",u.exitReason||"",u.delta||"",u.contracts||""]}),c=[l.join(","),...d.map(u=>u.join(","))].join(`
`),g=new Blob([c],{type:"text/csv"}),w=URL.createObjectURL(g),y=document.createElement("a");y.href=w,y.download=`trade_log_${n.start}_to_${n.end}.csv`,y.click(),URL.revokeObjectURL(w)},r=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"];let d='<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?>';d+='<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">',d+='<Worksheet ss:Name="Trades"><Table>',d+="<Row>"+l.map(y=>`<Cell><Data ss:Type="String">${y}</Data></Cell>`).join("")+"</Row>",i.forEach(y=>{d+="<Row>",d+=`<Cell><Data ss:Type="String">${y.date||""}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.entry||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.exit||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.stop_loss||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.pnl||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.r||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="String">${y.grade||""}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.tier||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="String">${y.exitReason||""}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.delta||0}</Data></Cell>`,d+=`<Cell><Data ss:Type="Number">${y.contracts||0}</Data></Cell>`,d+="</Row>"}),d+="</Table></Worksheet></Workbook>";const c=new Blob([d],{type:"application/vnd.ms-excel"}),g=URL.createObjectURL(c),w=document.createElement("a");w.href=g,w.download=`trade_log_${n.start}_to_${n.end}.xls`,w.click(),URL.revokeObjectURL(g)},s=i.slice(0,50);return e.jsxs("div",{style:q.tradeLog,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:q.dashboardTitle,children:"Trade Log"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:o,style:{background:"rgba(0,255,136,0.1)",border:"1px solid #00ff88",color:"#00ff88",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" CSV (",i.length,")"]}),e.jsxs("button",{onClick:r,style:{background:"rgba(0,170,255,0.1)",border:"1px solid #00aaff",color:"#00aaff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" Excel (",i.length,")"]})]})]}),e.jsxs("p",{style:q.tradeLogInfo,children:["Showing ",s.length," of ",i.length," filtered trades (most recent first)"]}),e.jsxs("table",{style:q.tradeTable,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:q.th,children:"Date"}),e.jsx("th",{style:q.th,children:"Entry"}),e.jsx("th",{style:q.th,children:"Exit"}),e.jsx("th",{style:q.th,children:"P&L"}),e.jsx("th",{style:q.th,children:"R-Multiple"}),e.jsx("th",{style:q.th,children:"Grade"}),e.jsx("th",{style:q.th,children:"Tier"}),e.jsx("th",{style:q.th,children:"Exit Reason"})]})}),e.jsx("tbody",{children:s.map(l=>{var d;return e.jsxs("tr",{style:q.tr,children:[e.jsx("td",{style:q.td,children:l.date}),e.jsxs("td",{style:q.td,children:["$",l.entry.toFixed(2)]}),e.jsxs("td",{style:q.td,children:["$",l.exit.toFixed(2)]}),e.jsxs("td",{style:{...q.td,color:l.pnl>=0?"#00ff88":"#ff4466"},children:["$",l.pnl.toLocaleString()]}),e.jsxs("td",{style:{...q.td,color:l.r>=0?"#00ff88":"#ff4466"},children:[l.r.toFixed(1),"R"]}),e.jsx("td",{style:q.td,children:e.jsx("span",{style:{...q.gradeBadge,background:l.grade==="A"?"#00ff88":l.grade==="B"?"#ffaa00":"#ff4466"},children:l.grade})}),e.jsx("td",{style:q.td,children:l.tier}),e.jsx("td",{style:q.td,children:e.jsx("span",{style:{fontSize:"11px",color:l.exitReason==="STOP_LOSS"?"#ff4466":"#00ff88"},children:((d=l.exitReason)==null?void 0:d.replace("_"," "))||""})})]},l.id)})})]})]})},Vr={"BTC-SPOT":{symbol:"BTC-SPOT",name:"Bitcoin Spot 24/7",ticker:"BTCUSDT",asset:"BTC-SPOT",icon:"",isSpot:!0},ESH26:{symbol:"ESH26",name:"E-mini S&P Mar 2026",ticker:"ES1!",asset:"ES",icon:""},NQH26:{symbol:"NQH26",name:"Nasdaq Mar 2026",ticker:"NQ1!",asset:"NQ",icon:""},GCJ26:{symbol:"GCJ26",name:"Gold Apr 2026",ticker:"GC1!",asset:"GC",icon:""},BTCG26:{symbol:"BTCG26",name:"Bitcoin CME Feb 2026",ticker:"BTC1!",asset:"BTC",icon:""},CLG26:{symbol:"CLG26",name:"Crude Oil Feb 2026",ticker:"CL1!",asset:"CL",icon:""}},h0=({selectedContract:t,onContractChange:n,contracts:i,isMobile:o})=>{var c;const[r,s]=I.useState(!1),l=I.useRef(null),d=i[t];return I.useEffect(()=>{const g=w=>{l.current&&!l.current.contains(w.target)&&s(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),e.jsxs("div",{ref:l,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>s(!r),style:{display:"flex",alignItems:"center",gap:o?6:10,padding:o?"6px 10px":"10px 16px",background:"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,170,255,0.1) 100%)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:8,cursor:"pointer",transition:"all 0.2s ease",outline:"none"},children:[e.jsx("span",{style:{fontSize:o?14:18},children:(d==null?void 0:d.icon)||""}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:o?12:14,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace",letterSpacing:.5},children:(d==null?void 0:d.symbol)||"SELECT"}),!o&&e.jsx("div",{style:{fontSize:9,color:"#888",marginTop:1},children:((c=d==null?void 0:d.name)==null?void 0:c.split(" ").slice(0,2).join(" "))||"Contract"})]}),e.jsx("svg",{width:o?10:12,height:o?10:12,viewBox:"0 0 12 12",fill:"none",style:{marginLeft:o?2:6,transform:r?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:e.jsx("path",{d:"M2 4L6 8L10 4",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),r&&e.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,marginBottom:8,minWidth:o?180:240,background:"linear-gradient(180deg, rgba(20,20,30,0.98) 0%, rgba(10,10,18,0.99) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,overflow:"hidden",boxShadow:"0 -10px 40px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",zIndex:2e3,animation:"slideUp 0.2s ease"},children:[e.jsx("div",{style:{padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,0.08)",background:"rgba(0,255,136,0.05)"},children:e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1,textTransform:"uppercase"},children:"Select Contract"})}),e.jsx("div",{style:{maxHeight:280,overflowY:"auto"},children:Object.entries(i).map(([g,w])=>{const y=g===t,L=!(g.startsWith("GC")||g==="BTC-SPOT");return e.jsxs("div",{onClick:()=>{L||(n(g),s(!1))},style:{display:"flex",alignItems:"center",gap:12,padding:"12px 14px",cursor:L?"not-allowed":"pointer",opacity:L?.4:1,background:y?"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, transparent 100%)":"transparent",borderLeft:y?"3px solid #00ff88":"3px solid transparent",transition:"all 0.15s ease"},onMouseEnter:W=>{!y&&!L&&(W.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseLeave:W=>{!y&&!L&&(W.currentTarget.style.background="transparent")},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:y?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,filter:L?"grayscale(100%)":"none"},children:w.icon||""}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:y?"#00ff88":L?"#555":"#fff",fontFamily:"'JetBrains Mono', monospace",marginBottom:2,display:"flex",alignItems:"center",gap:8},children:[w.symbol,L&&e.jsx("span",{style:{fontSize:8,padding:"2px 6px",background:"rgba(255,170,0,0.2)",color:"#ffaa00",borderRadius:4,fontWeight:600,letterSpacing:.5},children:"COMING SOON"})]}),e.jsx("div",{style:{fontSize:10,color:L?"#444":"#888"},children:w.name})]}),y&&e.jsx("div",{style:{width:20,height:20,borderRadius:"50%",background:"#00ff88",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M2 6L5 9L10 3",stroke:"#000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},g)})}),e.jsx("div",{style:{padding:"8px 14px",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.2)"},children:e.jsx("span",{style:{fontSize:9,color:"#555"},children:"Live data from Databento"})})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbars for Windows users */
        .tpo-scroll-container::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }

        .tpo-scroll-container::-webkit-scrollbar-track {
          background: rgba(20, 20, 28, 0.8);
          border-radius: 5px;
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb {
          background: linear-gradient(180deg, rgba(100, 100, 120, 0.6) 0%, rgba(70, 70, 90, 0.6) 100%);
          border-radius: 5px;
          border: 2px solid rgba(20, 20, 28, 0.8);
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(180deg, rgba(130, 130, 150, 0.8) 0%, rgba(100, 100, 120, 0.8) 100%);
        }

        .tpo-scroll-container::-webkit-scrollbar-corner {
          background: rgba(20, 20, 28, 0.8);
        }

        /* Firefox scrollbar support */
        .tpo-scroll-container {
          scrollbar-width: thin;
          scrollbar-color: rgba(100, 100, 120, 0.6) rgba(20, 20, 28, 0.8);
        }
      `})]})},$u=({globalData:t,selectedContract:n,onContractChange:i,contracts:o,isMobile:r})=>{var y,u,L,W;const s=["DISCONNECTED","NO_DATABENTO_LIB","NO_API_KEY","ERROR"],l=["INITIALIZING","SWITCHING...","WAITING_CONNECTION_SLOT","RESETTING..."],d=((y=t==null?void 0:t.data_source)==null?void 0:y.includes("RECONNECTING"))||l.includes(t==null?void 0:t.data_source),c=(t==null?void 0:t.data_source)&&!s.includes(t.data_source)&&!d,g=c?"LIVE":d?"RECONNECTING":"OFFLINE",w=c?"#00ff88":d?"#ffaa00":"#ff4466";return r?e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.98) 0%, rgba(5,5,10,1) 100%)",borderTop:"1px solid rgba(0,255,136,0.3)",padding:"8px 12px",zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[e.jsx(h0,{selectedContract:n,onContractChange:i,contracts:o,isMobile:!0}),e.jsx("div",{style:{padding:"6px 14px",background:c?"rgba(0,255,136,0.15)":d?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${c?"rgba(0,255,136,0.4)":d?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:8},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:c?"#00ff88":d?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace"},children:["$",((u=t==null?void 0:t.current_price)==null?void 0:u.toFixed(2))||"----.--"]})}),e.jsx("div",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6},children:e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff",fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.current_et_time)||"--:--"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"4px 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:w,boxShadow:`0 0 6px ${w}`,animation:c||d?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{fontSize:9,fontWeight:700,color:w},children:g})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsxs("span",{style:{fontSize:9,color:"#666"},children:["LATENCY: ",e.jsx("span",{style:{color:c?"#00ff88":"#666"},children:c?"~10ms":d?"...":"--"})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsx("span",{style:{fontSize:9,color:c?"#00aaff":d?"#ffaa00":"#666"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]}):e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.95) 0%, rgba(5,5,10,0.98) 100%)",borderTop:"1px solid rgba(0,255,136,0.2)",padding:"12px 24px",display:"flex",alignItems:"center",justifyContent:"center",gap:24,zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.5)"},children:[e.jsx(h0,{selectedContract:n,onContractChange:i,contracts:o,isMobile:!1}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{padding:"8px 16px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666"},children:"ET"}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:(t==null?void 0:t.current_et_time)||"--:--:--"})]})}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666",textTransform:"uppercase",letterSpacing:1},children:"Price"}),e.jsx("div",{style:{padding:"8px 20px",background:c?"rgba(0,255,136,0.15)":d?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${c?"rgba(0,255,136,0.4)":d?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:6,boxShadow:c?"0 0 20px rgba(0,255,136,0.2)":d?"0 0 15px rgba(255,170,0,0.15)":"none"},children:e.jsxs("span",{style:{fontSize:20,fontWeight:700,color:c?"#00ff88":d?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",textShadow:c?"0 0 10px rgba(0,255,136,0.5)":"none"},children:["$",((L=t==null?void 0:t.current_price)==null?void 0:L.toFixed(2))||"----.--"]})})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(255,255,255,0.02)",borderRadius:4,fontSize:11,color:"#888"},children:((W=o[n])==null?void 0:W.name)||"Gold Apr 2026"}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 14px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:w,boxShadow:`0 0 6px ${w}`,animation:c||d?"pulse 2s infinite":"none"}}),e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:w,boxShadow:`0 0 6px ${w}`,animation:c||d?"pulse 2s infinite 0.3s":"none"}}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:w,marginLeft:4,textTransform:"uppercase",letterSpacing:1},children:g})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"LATENCY:"}),e.jsx("span",{style:{fontSize:11,color:w,fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:c?"~10ms":d?"...":"--"}),c&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(0,255,136,0.2)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:3,color:"#00ff88",fontWeight:600},children:"EXCELLENT"}),d&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(255,170,0,0.2)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:3,color:"#ffaa00",fontWeight:600},children:"WAITING"})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"SOURCE:"}),e.jsx("span",{style:{fontSize:11,color:c?"#00aaff":d?"#ffaa00":"#666",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]})]})},Vu=({selectedContract:t})=>{var Be,Oe,ne,Ce,v,_e,le,Ne,it,Rt,Ke,Xe,Pe,oe,fe,Se,O,ee,ke,lt,He,Le,Je,At,J,ot,rt,Qe,re;const[n,i]=I.useState(null),[o,r]=I.useState(null),[s,l]=I.useState(!0),[d,c]=I.useState(null),[g,w]=I.useState("all"),[y,u]=I.useState("performance"),[L,W]=I.useState("all"),[Y,Ue]=I.useState({start:"",end:""}),[p,b]=I.useState("all"),[C,f]=I.useState(null),[P,S]=I.useState({x:0,y:0}),{isMobile:T}=uo();if(I.useEffect(()=>{const a=m=>{S({x:m.clientX,y:m.clientY})};return window.addEventListener("mousemove",a),()=>window.removeEventListener("mousemove",a)},[]),I.useEffect(()=>{const a=async()=>{try{const[F,B]=await Promise.all([fetch(`${nn}/trade-analytics?_t=${Date.now()}`),fetch(`${nn}/zone-clawd-comparison?_t=${Date.now()}`)]);if(F.ok){const A=await F.json();i(A),c(null)}else c("Failed to fetch analytics");if(B.ok){const A=await B.json();r(A)}}catch(F){c("Connection error: "+F.message)}l(!1)};a();const m=setInterval(a,3e4);return()=>clearInterval(m)},[t]),s)return e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:400,color:"#888"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:40,marginBottom:16},children:""}),e.jsx("div",{children:"Loading Clawd Analytics..."})]})});if(d)return e.jsxs("div",{style:{padding:24,background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:12,color:"#ff6b6b"},children:[" ",d]});if(!n)return null;const{summary:E,by_confidence:ie,by_direction:U,target_hit_rates:j,drawdown:h,trades:z}=n,Ie=g==="all"?z:z.filter(a=>a.confidence===g.toUpperCase()),_=g==="all"?E:ie[g.toUpperCase()];return e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:T?16:24},children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("span",{style:{fontSize:28},children:""}),e.jsx("h1",{style:{fontSize:24,fontWeight:700,color:"#fff",margin:0},children:"Clawd Bot Analytics"})]}),e.jsx("p",{style:{color:"#888",fontSize:14},children:"Deep performance analysis of AI-generated trade signals"})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16},children:[e.jsx("button",{onClick:()=>u("performance"),style:{padding:"10px 20px",borderRadius:8,border:y==="performance"?"2px solid #00aaff":"1px solid rgba(255,255,255,0.1)",background:y==="performance"?"rgba(0,170,255,0.15)":"transparent",color:y==="performance"?"#00aaff":"#888",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:" Performance"}),e.jsx("button",{onClick:()=>u("comparison"),style:{padding:"10px 20px",borderRadius:8,border:y==="comparison"?"2px solid #9370DB":"1px solid rgba(255,255,255,0.1)",background:y==="comparison"?"rgba(147,112,219,0.15)":"transparent",color:y==="comparison"?"#9370DB":"#888",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:" Zone vs Clawd"})]}),y==="performance"&&e.jsx("div",{style:{display:"flex",gap:8,marginBottom:24},children:[{id:"all",label:"All Signals",count:E.evaluated},{id:"high",label:"HIGH Confidence",count:((Be=ie.HIGH)==null?void 0:Be.count)||0,color:"#00ff88"},{id:"medium",label:"MEDIUM Confidence",count:((Oe=ie.MEDIUM)==null?void 0:Oe.count)||0,color:"#ffaa00"}].map(a=>e.jsxs("button",{onClick:()=>w(a.id),style:{padding:"10px 16px",borderRadius:8,border:g===a.id?`2px solid ${a.color||"#00ff88"}`:"1px solid rgba(255,255,255,0.1)",background:g===a.id?`${a.color||"#00ff88"}15`:"transparent",color:g===a.id?a.color||"#00ff88":"#888",fontSize:13,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:[a.label,e.jsx("span",{style:{background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:4,fontSize:11},children:a.count})]},a.id))}),y==="comparison"&&o&&e.jsxs("div",{children:[e.jsxs("div",{style:{padding:24,background:"linear-gradient(135deg, rgba(147,112,219,0.1) 0%, rgba(100,80,180,0.05) 100%)",border:"2px solid rgba(147,112,219,0.3)",borderRadius:16,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[e.jsx("span",{style:{fontSize:28},children:""}),e.jsx("h2",{style:{fontSize:20,fontWeight:700,color:"#9370DB",margin:0},children:"Zone Participation vs Clawd Bot"})]}),e.jsx("p",{style:{color:"#888",fontSize:14,marginBottom:16},children:"1:1 comparison of zone-aligned entries vs overall Clawd performance"}),e.jsxs("div",{style:{padding:16,background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{fontSize:12,color:"#9370DB",fontWeight:600,marginBottom:8},children:" KEY INSIGHT"}),e.jsx("div",{style:{fontSize:14,color:"#fff"},children:((ne=o.insights)==null?void 0:ne.zone_vs_random)||"Analyzing zone alignment..."}),e.jsx("div",{style:{fontSize:12,color:"#888",marginTop:8},children:((Ce=o.insights)==null?void 0:Ce.recommendation)||""})]})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:20,padding:16,background:"rgba(255,255,255,0.02)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:12,color:"#888",marginRight:8},children:" Filter by Date:"}),[{id:"all",label:"All Time"},{id:"today",label:"Today"},{id:"7d",label:"7 Days"},{id:"30d",label:"30 Days"},{id:"custom",label:"Custom Range"}].map(a=>e.jsx("button",{onClick:()=>W(a.id),style:{padding:"6px 12px",borderRadius:6,border:L===a.id?"1px solid #9370DB":"1px solid rgba(255,255,255,0.1)",background:L===a.id?"rgba(147,112,219,0.2)":"transparent",color:L===a.id?"#9370DB":"#888",fontSize:12,fontWeight:500,cursor:"pointer"},children:a.label},a.id)),L==="custom"&&e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginLeft:12},children:[e.jsx("input",{type:"date",value:Y.start,onChange:a=>Ue(m=>({...m,start:a.target.value})),style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(147,112,219,0.3)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:12}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"to"}),e.jsx("input",{type:"date",value:Y.end,onChange:a=>Ue(m=>({...m,end:a.target.value})),style:{padding:"6px 10px",borderRadius:6,border:"1px solid rgba(147,112,219,0.3)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:12}})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"1fr":"repeat(2, 1fr)",gap:24,marginBottom:24},children:[e.jsxs("div",{style:{padding:24,background:"linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(0,180,100,0.05) 100%)",border:"2px solid rgba(0,255,136,0.3)",borderRadius:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#00ff88"}}),e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#00ff88"},children:"Zone-Aligned Entries"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"TRADES"}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"#fff"},children:((v=o.summary)==null?void 0:v.zone_aligned_trades)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"WIN RATE"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#00ff88"},children:[((_e=o.summary)==null?void 0:_e.zone_aligned_win_rate)||0,"%"]})]})]}),e.jsx("div",{style:{marginTop:16,padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Entries within 20pts of zone boundary"})})]}),e.jsxs("div",{style:{padding:24,background:"linear-gradient(135deg, rgba(255,170,0,0.1) 0%, rgba(200,130,0,0.05) 100%)",border:"2px solid rgba(255,170,0,0.3)",borderRadius:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#ffaa00"}}),e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#ffaa00"},children:"Mid-Session Entries"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"TRADES"}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"#fff"},children:((le=o.summary)==null?void 0:le.zone_misaligned_trades)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"WIN RATE"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#ffaa00"},children:[((Ne=o.summary)==null?void 0:Ne.zone_misaligned_win_rate)||0,"%"]})]})]}),e.jsx("div",{style:{marginTop:16,padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Entries not aligned with zone boundaries"})})]})]}),o.summary&&e.jsxs("div",{style:{padding:20,background:o.summary.win_rate_advantage>0?"rgba(0,255,136,0.08)":"rgba(255,68,102,0.08)",border:`2px solid ${o.summary.win_rate_advantage>0?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`,borderRadius:12,textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{fontSize:12,color:"#888",marginBottom:8},children:"ZONE ALIGNMENT ADVANTAGE"}),e.jsxs("div",{style:{fontSize:40,fontWeight:700,color:o.summary.win_rate_advantage>0?"#00ff88":"#ff4466"},children:[o.summary.win_rate_advantage>0?"+":"",o.summary.win_rate_advantage,"%"]}),e.jsx("div",{style:{fontSize:13,color:"#888",marginTop:8},children:o.summary.win_rate_advantage>0?"Zone-aligned entries outperform mid-session entries":"Mid-session entries currently performing better"})]}),o.entry_accuracy&&e.jsxs("div",{style:{padding:24,background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:16,marginBottom:24},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#00aaff",marginBottom:16},children:" Entry Accuracy Analysis"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"repeat(2, 1fr)":"repeat(4, 1fr)",gap:16},children:[e.jsxs("div",{style:{textAlign:"center",padding:16,background:"rgba(0,255,136,0.1)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#00ff88"},children:o.entry_accuracy.within_5pts||0}),e.jsx("div",{style:{fontSize:11,color:"#888"},children:"Within 5 pts"})]}),e.jsxs("div",{style:{textAlign:"center",padding:16,background:"rgba(0,200,200,0.1)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#00cccc"},children:o.entry_accuracy.within_10pts||0}),e.jsx("div",{style:{fontSize:11,color:"#888"},children:"Within 10 pts"})]}),e.jsxs("div",{style:{textAlign:"center",padding:16,background:"rgba(255,170,0,0.1)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#ffaa00"},children:o.entry_accuracy.within_20pts||0}),e.jsx("div",{style:{fontSize:11,color:"#888"},children:"Within 20 pts"})]}),e.jsxs("div",{style:{textAlign:"center",padding:16,background:"rgba(255,68,102,0.1)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#ff4466"},children:o.entry_accuracy.missed||0}),e.jsx("div",{style:{fontSize:11,color:"#888"},children:"Missed Zone"})]})]})]}),o.by_session&&Object.keys(o.by_session).length>0&&e.jsxs("div",{style:{padding:24,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,marginBottom:24},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#fff",marginBottom:16},children:" Performance by Session"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:T?"1fr":"repeat(3, 1fr)",gap:12},children:Object.entries(o.by_session).map(([a,m])=>{var F;return e.jsxs("div",{style:{padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,border:`1px solid ${m.pnl>=0?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)"}`},children:[e.jsx("div",{style:{fontSize:12,fontWeight:600,color:"#00aaff",marginBottom:8},children:a}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:11,color:"#888"},children:"Trades"}),e.jsx("span",{style:{fontSize:12,color:"#fff"},children:m.total})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:11,color:"#888"},children:"Win Rate"}),e.jsxs("span",{style:{fontSize:12,color:m.win_rate>=50?"#00ff88":"#ff4466"},children:[m.win_rate,"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:11,color:"#888"},children:"P&L"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:m.pnl>=0?"#00ff88":"#ff4466"},children:["$",((F=m.pnl)==null?void 0:F.toLocaleString())||0]})]})]},a)})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"1fr":"repeat(2, 1fr)",gap:16,marginBottom:24},children:[e.jsxs("div",{style:{padding:20,background:"rgba(0,255,136,0.05)",border:"1px solid rgba(0,255,136,0.2)",borderRadius:12},children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:8},children:" BEST SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#00ff88"},children:((it=o.insights)==null?void 0:it.best_session)||"N/A"})]}),e.jsxs("div",{style:{padding:20,background:"rgba(255,68,102,0.05)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:12},children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:8},children:" NEEDS IMPROVEMENT"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#ff4466"},children:((Rt=o.insights)==null?void 0:Rt.worst_session)||"N/A"})]})]}),o.trades&&o.trades.length>0&&e.jsxs("div",{style:{padding:24,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:"Trade Entries Comparison"}),e.jsxs("span",{style:{fontSize:12,color:"#888"},children:["(",o.trades.length," trades)"]})]}),e.jsx("div",{style:{display:"flex",gap:8},children:[{id:"all",label:"All",color:"#00aaff"},{id:"zone_aligned",label:"Zone-Aligned",color:"#00ff88"},{id:"mid_session",label:"Mid-Session",color:"#ffaa00"}].map(a=>e.jsx("button",{onClick:()=>b(a.id),style:{padding:"4px 10px",borderRadius:4,border:p===a.id?`1px solid ${a.color}`:"1px solid rgba(255,255,255,0.1)",background:p===a.id?`${a.color}20`:"transparent",color:p===a.id?a.color:"#666",fontSize:11,fontWeight:500,cursor:"pointer"},children:a.label},a.id))})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8,maxHeight:400,overflowY:"auto"},children:o.trades.filter(a=>{if(p==="zone_aligned"&&!a.zone_aligned||p==="mid_session"&&a.zone_aligned)return!1;if(L!=="all"&&a.timestamp){const m=new Date(a.timestamp),F=new Date;if(L==="today"){const B=new Date(F.getFullYear(),F.getMonth(),F.getDate());if(m<B)return!1}else if(L==="7d"){const B=new Date(F.getTime()-6048e5);if(m<B)return!1}else if(L==="30d"){const B=new Date(F.getTime()-2592e6);if(m<B)return!1}else if(L==="custom"){if(Y.start){const B=new Date(Y.start);if(m<B)return!1}if(Y.end){const B=new Date(Y.end);if(B.setHours(23,59,59,999),m>B)return!1}}}return!0}).map((a,m)=>{var F,B,A,H,se,$,ye,vt;return e.jsxs("div",{style:{padding:16,background:a.zone_aligned?"rgba(0,255,136,0.05)":"rgba(255,170,0,0.05)",border:`1px solid ${a.zone_aligned?"rgba(0,255,136,0.2)":"rgba(255,170,0,0.2)"}`,borderRadius:12,position:"relative",cursor:"pointer"},onMouseEnter:()=>f(m),onMouseLeave:()=>f(null),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsxs("span",{style:{fontSize:14,padding:"2px 8px",borderRadius:4,background:a.direction==="LONG"?"rgba(0,200,100,0.2)":"rgba(255,100,100,0.2)",color:a.direction==="LONG"?"#00cc66":"#ff6666",fontWeight:600},children:[a.direction==="LONG"?"":""," ",a.direction]}),e.jsx("span",{style:{fontSize:12,color:"#888"},children:a.signal_time}),e.jsx("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:4,background:a.zone_aligned?"rgba(0,255,136,0.2)":"rgba(255,170,0,0.2)",color:a.zone_aligned?"#00ff88":"#ffaa00"},children:a.zone_aligned?" Zone-Aligned":" Mid-Session"})]}),e.jsxs("div",{style:{padding:"4px 12px",borderRadius:6,background:a.result==="WIN"?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:a.result==="WIN"?"#00ff88":"#ff4466",fontWeight:700,fontSize:13},children:[a.result," ",a.pnl_dollars>=0?"+":"","$",((F=a.pnl_dollars)==null?void 0:F.toLocaleString())||0]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,marginBottom:8},children:[e.jsxs("div",{style:{textAlign:"center",padding:8,background:"rgba(0,170,255,0.1)",borderRadius:6},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:2},children:"ENTRY"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#00aaff"},children:["$",(B=a.entry_price)==null?void 0:B.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center",padding:8,background:"rgba(255,68,102,0.1)",borderRadius:6},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:2},children:"STOP LOSS"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#ff4466"},children:["$",(A=a.stop)==null?void 0:A.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center",padding:8,background:"rgba(0,255,136,0.1)",borderRadius:6},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:2},children:"T1"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:a.t1_hit?"#00ff88":"#666"},children:["$",((se=(H=a.targets)==null?void 0:H[0])==null?void 0:se.toFixed(2))||"-",a.t1_hit&&e.jsx("span",{style:{marginLeft:4,fontSize:10},children:""})]})]}),e.jsxs("div",{style:{textAlign:"center",padding:8,background:"rgba(0,255,136,0.08)",borderRadius:6},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:2},children:"T2"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:a.t2_hit?"#00ff88":"#666"},children:["$",((ye=($=a.targets)==null?void 0:$[1])==null?void 0:ye.toFixed(2))||"-",a.t2_hit&&e.jsx("span",{style:{marginLeft:4,fontSize:10},children:""})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:11,color:"#666"},children:[e.jsxs("span",{children:[a.closest_zone?` ${a.closest_zone}`:" No zone nearby",a.entry_distance_from_zone!==void 0&&` (${a.entry_distance_from_zone}pts away)`]}),e.jsxs("span",{children:["MAE: ",a.mae,"pts | MFE: ",a.mfe,"pts | R:R ",(vt=a.rr)==null?void 0:vt.toFixed(1),":1"]})]})]},m)})}),C!==null&&o.trades[C]&&ReactDOM.createPortal(e.jsx("div",{style:{position:"fixed",left:P.x+20,top:P.y-100,zIndex:99999,padding:20,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",border:"2px solid rgba(147,112,219,0.5)",borderRadius:16,boxShadow:"0 12px 48px rgba(0,0,0,0.8), 0 0 20px rgba(147,112,219,0.2)",minWidth:340,maxWidth:400,pointerEvents:"none"},children:(()=>{var se,$,ye,vt,ct,wt,kt,sn,nt,xt,Ft,tn,Kt,gn;const a=o.trades[C],m=a.zone_aligned?`Entry at ${a.closest_zone} zone (${a.entry_distance_from_zone}pts from level)`:"Mid-session entry based on momentum/structure",F=a.direction==="LONG"?`Stop below ${a.closest_zone||"session support"} (-${Math.abs(a.entry_price-a.stop).toFixed(1)}pts risk)`:`Stop above ${a.closest_zone||"session resistance"} (-${Math.abs(a.entry_price-a.stop).toFixed(1)}pts risk)`,B=`T1: 1R target (+${Math.abs(((se=a.targets)==null?void 0:se[0])-a.entry_price).toFixed(1)}pts)`,A=($=a.targets)!=null&&$[1]?`T2: 2R extension (+${Math.abs(((ye=a.targets)==null?void 0:ye[1])-a.entry_price).toFixed(1)}pts)`:null,H=(vt=a.targets)!=null&&vt[2]?`T3: Runner target (+${Math.abs(((ct=a.targets)==null?void 0:ct[2])-a.entry_price).toFixed(1)}pts)`:null;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:16},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{fontSize:15,fontWeight:700,color:"#9370DB"},children:"Trade Strategy Details"}),e.jsx("span",{style:{marginLeft:"auto",padding:"3px 10px",borderRadius:6,background:a.result==="WIN"?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:a.result==="WIN"?"#00ff88":"#ff4466",fontWeight:700,fontSize:12},children:a.result})]}),e.jsxs("div",{style:{marginBottom:14,padding:12,background:"rgba(0,170,255,0.1)",borderRadius:10,border:"1px solid rgba(0,170,255,0.2)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:"#888",fontWeight:600},children:"ENTRY IDEA"}),e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:"#00aaff"},children:["$",(wt=a.entry_price)==null?void 0:wt.toFixed(2)]})]}),e.jsxs("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.4},children:[" ",m]})]}),e.jsxs("div",{style:{marginBottom:14,padding:12,background:"rgba(255,68,102,0.1)",borderRadius:10,border:"1px solid rgba(255,68,102,0.2)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:"#888",fontWeight:600},children:"STOP LOSS"}),e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:"#ff4466"},children:["$",(kt=a.stop)==null?void 0:kt.toFixed(2)]})]}),e.jsxs("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.4},children:[" ",F]})]}),e.jsxs("div",{style:{marginBottom:14,padding:12,background:"rgba(0,255,136,0.08)",borderRadius:10,border:"1px solid rgba(0,255,136,0.2)"},children:[e.jsx("div",{style:{fontSize:11,color:"#888",fontWeight:600,marginBottom:10},children:"TARGET LEVELS"}),e.jsxs("div",{style:{display:"grid",gap:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:12,color:a.t1_hit?"#00ff88":"#888"},children:[" ",B]}),e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:a.t1_hit?"#00ff88":"#666"},children:["$",(nt=(sn=a.targets)==null?void 0:sn[0])==null?void 0:nt.toFixed(2)," ",a.t1_hit&&""]})]}),A&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:12,color:a.t2_hit?"#00ff88":"#888"},children:[" ",A]}),e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:a.t2_hit?"#00ff88":"#666"},children:["$",(Ft=(xt=a.targets)==null?void 0:xt[1])==null?void 0:Ft.toFixed(2)," ",a.t2_hit&&""]})]}),H&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:12,color:a.t3_hit?"#00ff88":"#888"},children:[" ",H]}),e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:a.t3_hit?"#00ff88":"#666"},children:["$",(Kt=(tn=a.targets)==null?void 0:tn[2])==null?void 0:Kt.toFixed(2)," ",a.t3_hit&&""]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10},children:[e.jsxs("div",{style:{textAlign:"center",padding:8,background:"rgba(255,255,255,0.03)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Session"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,color:"#00aaff"},children:a.session||"N/A"})]}),e.jsxs("div",{style:{textAlign:"center",padding:8,background:"rgba(255,255,255,0.03)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Confidence"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,color:a.confidence==="HIGH"?"#00ff88":"#ffaa00"},children:a.confidence})]}),e.jsxs("div",{style:{textAlign:"center",padding:8,background:"rgba(255,255,255,0.03)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"R:R Achieved"}),e.jsxs("div",{style:{fontSize:12,fontWeight:600,color:"#fff"},children:[(gn=a.rr)==null?void 0:gn.toFixed(1),":1"]})]})]}),e.jsxs("div",{style:{marginTop:14,padding:10,background:"rgba(147,112,219,0.1)",borderRadius:8,border:"1px solid rgba(147,112,219,0.2)"},children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#9370DB",marginBottom:6},children:[a.zone_aligned?" ZONE PARTICIPATION":" CLAWD BOT"," STRATEGY"]}),e.jsx("div",{style:{fontSize:11,color:"#aaa"},children:a.zone_aligned?`Entry at key zone level (${a.closest_zone}). Zone Participation method seeks entries at session/PD boundaries for optimal R:R.`:"Momentum-based entry from Clawd Bot signal. Entry based on price action and structure analysis."})]})]})})()}),document.body)]}),o.trades&&o.trades.length>0&&(()=>{var se,$,ye,vt,ct,wt,kt,sn;const a=o.trades,m={},F={};a.forEach(nt=>{const xt=nt.zone_aligned?m:F;xt[nt.session]||(xt[nt.session]={wins:0,losses:0,pnl:0}),nt.result==="WIN"?xt[nt.session].wins++:xt[nt.session].losses++,xt[nt.session].pnl+=nt.pnl_dollars||0});const B=[];Object.entries(m).forEach(([nt,xt])=>{const Ft=xt.wins+xt.losses;Ft>=2&&B.push({type:"Zone-Aligned",session:nt,winRate:Math.round(xt.wins/Ft*100),trades:Ft,pnl:xt.pnl,color:"#00ff88"})}),Object.entries(F).forEach(([nt,xt])=>{const Ft=xt.wins+xt.losses;Ft>=2&&B.push({type:"Mid-Session",session:nt,winRate:Math.round(xt.wins/Ft*100),trades:Ft,pnl:xt.pnl,color:"#ffaa00"})}),B.sort((nt,xt)=>xt.winRate-nt.winRate);const A=B.slice(0,5),H=B.slice(-3).reverse();return e.jsxs("div",{style:{padding:24,background:"linear-gradient(135deg, rgba(147,112,219,0.08) 0%, rgba(100,80,180,0.02) 100%)",border:"1px solid rgba(147,112,219,0.2)",borderRadius:16,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#9370DB"},children:"Accuracy Trends Analysis"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"1fr":"1fr 1fr",gap:24},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#00ff88",marginBottom:12},children:" Highest Win Rate Scenarios"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[A.map((nt,xt)=>e.jsxs("div",{style:{padding:12,background:"rgba(0,255,136,0.08)",border:"1px solid rgba(0,255,136,0.2)",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:nt.color,fontWeight:600,fontSize:12},children:nt.type}),e.jsx("span",{style:{color:"#888",fontSize:12},children:" + "}),e.jsx("span",{style:{color:"#00aaff",fontWeight:500,fontSize:12},children:nt.session})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("span",{style:{color:"#00ff88",fontWeight:700,fontSize:14},children:[nt.winRate,"%"]}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",nt.trades," trades)"]}),e.jsxs("span",{style:{color:nt.pnl>=0?"#00ff88":"#ff4466",fontWeight:600,fontSize:12},children:[nt.pnl>=0?"+":"","$",nt.pnl.toLocaleString()]})]})]},xt)),A.length===0&&e.jsx("div",{style:{color:"#666",fontSize:12,padding:12},children:"Need more trade data to analyze trends"})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#ff4466",marginBottom:12},children:" Lowest Win Rate Scenarios"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[H.map((nt,xt)=>e.jsxs("div",{style:{padding:12,background:"rgba(255,68,102,0.08)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:8,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:nt.color,fontWeight:600,fontSize:12},children:nt.type}),e.jsx("span",{style:{color:"#888",fontSize:12},children:" + "}),e.jsx("span",{style:{color:"#00aaff",fontWeight:500,fontSize:12},children:nt.session})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("span",{style:{color:"#ff4466",fontWeight:700,fontSize:14},children:[nt.winRate,"%"]}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",nt.trades," trades)"]}),e.jsxs("span",{style:{color:nt.pnl>=0?"#00ff88":"#ff4466",fontWeight:600,fontSize:12},children:[nt.pnl>=0?"+":"","$",nt.pnl.toLocaleString()]})]})]},xt)),H.length===0&&e.jsx("div",{style:{color:"#666",fontSize:12,padding:12},children:"Need more trade data to analyze trends"})]})]})]}),A.length>0&&e.jsxs("div",{style:{marginTop:20,padding:16,background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{fontSize:12,color:"#9370DB",fontWeight:600,marginBottom:8},children:" TREND RECOMMENDATION"}),e.jsxs("div",{style:{fontSize:13,color:"#fff"},children:["Focus on ",e.jsx("span",{style:{color:(se=A[0])==null?void 0:se.color,fontWeight:600},children:($=A[0])==null?void 0:$.type})," entries during ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:(ye=A[0])==null?void 0:ye.session})," session for highest probability setups (",(vt=A[0])==null?void 0:vt.winRate,"% win rate).",H.length>0&&((ct=H[0])==null?void 0:ct.winRate)<40&&e.jsxs("span",{children:[" Avoid ",e.jsxs("span",{style:{color:"#ff4466"},children:[(wt=H[0])==null?void 0:wt.type," + ",(kt=H[0])==null?void 0:kt.session]})," (",(sn=H[0])==null?void 0:sn.winRate,"% WR)."]})]})]})]})})()]}),y==="performance"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"repeat(2, 1fr)":"repeat(5, 1fr)",gap:16,marginBottom:24},children:[e.jsxs("div",{style:{padding:20,background:"linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(0,200,100,0.05) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12},children:[e.jsx("div",{style:{fontSize:11,color:"#888",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Win Rate"}),e.jsxs("div",{style:{fontSize:32,fontWeight:700,color:"#00ff88"},children:[(_==null?void 0:_.win_rate)||E.win_rate,"%"]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:4},children:[(_==null?void 0:_.wins)||E.wins,"W - ",(_==null?void 0:_.losses)||E.losses,"L"]})]}),e.jsxs("div",{style:{padding:20,background:E.total_pnl>=0?"rgba(0,255,136,0.05)":"rgba(255,68,102,0.05)",border:`1px solid ${E.total_pnl>=0?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)"}`,borderRadius:12},children:[e.jsx("div",{style:{fontSize:11,color:"#888",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Total P&L"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:E.total_pnl>=0?"#00ff88":"#ff4466"},children:["$",((_==null?void 0:_.pnl)||E.total_pnl).toLocaleString()]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:4},children:[(((_==null?void 0:_.pnl)||E.total_pnl)/10).toFixed(0)," pts"]})]}),e.jsxs("div",{style:{padding:20,background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:12},children:[e.jsx("div",{style:{fontSize:11,color:"#888",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Avg R:R"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#00aaff"},children:[(_==null?void 0:_.avg_rr)||0,":1"]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:4},children:"Risk/Reward"})]}),e.jsxs("div",{style:{padding:20,background:"rgba(255,170,0,0.05)",border:"1px solid rgba(255,170,0,0.2)",borderRadius:12},children:[e.jsx("div",{style:{fontSize:11,color:"#888",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Avg Drawdown"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#ffaa00"},children:["$",(Ke=h.avg_mae_dollars)==null?void 0:Ke.toLocaleString()]}),e.jsxs("div",{style:{fontSize:12,color:"#666",marginTop:4},children:[h.avg_mae_pts," pts MAE"]})]}),e.jsxs("div",{style:{padding:20,background:"rgba(255,68,102,0.05)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:12},children:[e.jsx("div",{style:{fontSize:11,color:"#888",textTransform:"uppercase",letterSpacing:1,marginBottom:8},children:"Max Drawdown"}),e.jsxs("div",{style:{fontSize:28,fontWeight:700,color:"#ff4466"},children:["$",(Xe=h.max_mae_dollars)==null?void 0:Xe.toLocaleString()]}),e.jsx("div",{style:{fontSize:12,color:"#666",marginTop:4},children:"Worst MAE"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"1fr":"repeat(2, 1fr)",gap:24,marginBottom:24},children:[e.jsxs("div",{style:{padding:24,background:"linear-gradient(135deg, rgba(0,255,136,0.08) 0%, rgba(0,200,100,0.02) 100%)",border:"2px solid rgba(0,255,136,0.3)",borderRadius:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#00ff88"}}),e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#00ff88"},children:"HIGH Confidence Trades"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"Count"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#fff"},children:((Pe=ie.HIGH)==null?void 0:Pe.count)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"Win Rate"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#00ff88"},children:[((oe=ie.HIGH)==null?void 0:oe.win_rate)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"P&L"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#00ff88"},children:["$",(((fe=ie.HIGH)==null?void 0:fe.pnl)||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"Avg R:R"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#00aaff"},children:[((Se=ie.HIGH)==null?void 0:Se.avg_rr)||0,":1"]})]})]})]}),e.jsxs("div",{style:{padding:24,background:"linear-gradient(135deg, rgba(255,170,0,0.08) 0%, rgba(200,130,0,0.02) 100%)",border:"2px solid rgba(255,170,0,0.3)",borderRadius:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:20},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#ffaa00"}}),e.jsx("span",{style:{fontSize:16,fontWeight:700,color:"#ffaa00"},children:"MEDIUM Confidence Trades"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"Count"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#fff"},children:((O=ie.MEDIUM)==null?void 0:O.count)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"Win Rate"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#ffaa00"},children:[((ee=ie.MEDIUM)==null?void 0:ee.win_rate)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"P&L"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#ffaa00"},children:["$",(((ke=ie.MEDIUM)==null?void 0:ke.pnl)||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:4},children:"Avg R:R"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:"#00aaff"},children:[((lt=ie.MEDIUM)==null?void 0:lt.avg_rr)||0,":1"]})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"1fr":"repeat(3, 1fr)",gap:16,marginBottom:24},children:[e.jsxs("div",{style:{padding:20,background:"rgba(0,200,100,0.05)",border:"1px solid rgba(0,200,100,0.2)",borderRadius:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontSize:14,fontWeight:600,color:"#00cc66"},children:"LONG Trades"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Wins"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#00ff88"},children:((He=U.LONG)==null?void 0:He.wins)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"P&L"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#00ff88"},children:["$",(((Le=U.LONG)==null?void 0:Le.pnl)||0).toLocaleString()]})]})]})]}),e.jsxs("div",{style:{padding:20,background:"rgba(255,100,100,0.05)",border:"1px solid rgba(255,100,100,0.2)",borderRadius:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontSize:14,fontWeight:600,color:"#ff6666"},children:"SHORT Trades"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Wins"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#00ff88"},children:((Je=U.SHORT)==null?void 0:Je.wins)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"P&L"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#00ff88"},children:["$",(((At=U.SHORT)==null?void 0:At.pnl)||0).toLocaleString()]})]})]})]}),e.jsxs("div",{style:{padding:20,background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsx("span",{style:{fontSize:14,fontWeight:600,color:"#00aaff"},children:"Target Hit Rates"})]}),e.jsx("div",{style:{display:"flex",gap:16,justifyContent:"space-between"},children:[{label:"T1",rate:j.t1,color:"#00ff88"},{label:"T2",rate:j.t2,color:"#00aaff"},{label:"T3",rate:j.t3,color:"#ffaa00"}].map(a=>e.jsxs("div",{style:{textAlign:"center",flex:1},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:a.label}),e.jsxs("div",{style:{fontSize:22,fontWeight:700,color:a.color},children:[a.rate,"%"]})]},a.label))})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:600,color:"#fff"},children:"Trade Log"}),e.jsxs("span",{style:{fontSize:12,color:"#888"},children:[Ie.length," trades"]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:900},children:[e.jsx("thead",{children:e.jsx("tr",{style:{background:"rgba(0,0,0,0.3)"},children:["Time","Contract","Dir","Conf","Entry","Result","P&L","MAE","MFE","R:R","T1","T2","T3"].map(a=>e.jsx("th",{style:{padding:"12px 16px",textAlign:"left",fontSize:10,color:"#666",textTransform:"uppercase",letterSpacing:1,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:a},a))})}),e.jsx("tbody",{children:Ie.map((a,m)=>{var F,B,A,H;return e.jsxs("tr",{style:{background:m%2===0?"transparent":"rgba(255,255,255,0.01)",transition:"background 0.2s"},children:[e.jsx("td",{style:{padding:"12px 16px",fontSize:12,color:"#888"},children:a.signal_time||new Date(a.timestamp).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{style:{padding:"12px 16px",fontSize:12,color:"#fff",fontWeight:500},children:a.contract}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:a.direction==="LONG"?"rgba(0,200,100,0.2)":"rgba(255,100,100,0.2)",color:a.direction==="LONG"?"#00cc66":"#ff6666"},children:a.direction})}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:a.confidence==="HIGH"?"rgba(0,255,136,0.2)":"rgba(255,170,0,0.2)",color:a.confidence==="HIGH"?"#00ff88":"#ffaa00"},children:a.confidence})}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:13,color:"#fff",fontFamily:"monospace"},children:["$",(F=a.entry)==null?void 0:F.toFixed(1)]}),e.jsx("td",{style:{padding:"12px 16px"},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:4,fontSize:11,fontWeight:700,background:a.result==="WIN"?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:a.result==="WIN"?"#00ff88":"#ff4466"},children:a.result})}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:13,fontWeight:600,color:a.pnl_dollars>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[a.pnl_dollars>=0?"+":"","$",(B=a.pnl_dollars)==null?void 0:B.toLocaleString()]}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:12,color:"#ff8866",fontFamily:"monospace"},children:[(A=a.mae)==null?void 0:A.toFixed(0)," pts"]}),e.jsxs("td",{style:{padding:"12px 16px",fontSize:12,color:"#66ff88",fontFamily:"monospace"},children:[(H=a.mfe)==null?void 0:H.toFixed(0)," pts"]}),e.jsx("td",{style:{padding:"12px 16px",fontSize:12,color:"#00aaff",fontFamily:"monospace"},children:a.rr>0?a.rr.toFixed(1):"-"}),e.jsx("td",{style:{padding:"12px 16px"},children:a.t1_hit?e.jsx("span",{style:{color:"#00ff88"},children:""}):e.jsx("span",{style:{color:"#444"},children:"-"})}),e.jsx("td",{style:{padding:"12px 16px"},children:a.t2_hit?e.jsx("span",{style:{color:"#00ff88"},children:""}):e.jsx("span",{style:{color:"#444"},children:"-"})}),e.jsx("td",{style:{padding:"12px 16px"},children:a.t3_hit?e.jsx("span",{style:{color:"#00ff88"},children:""}):e.jsx("span",{style:{color:"#444"},children:"-"})})]},m)})})]})})]}),e.jsxs("div",{style:{marginTop:24,padding:20,background:"linear-gradient(135deg, rgba(0,170,255,0.08) 0%, rgba(0,100,200,0.02) 100%)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:12},children:[e.jsx("h3",{style:{margin:"0 0 16px",fontSize:14,fontWeight:600,color:"#00aaff"},children:" Key Insights"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:T?"1fr":"repeat(2, 1fr)",gap:16,fontSize:13,color:"#ccc"},children:[e.jsxs("div",{children:[" ",e.jsx("strong",{style:{color:"#00ff88"},children:"HIGH confidence"})," trades: ",((J=ie.HIGH)==null?void 0:J.count)||0," signals, $",(((ot=ie.HIGH)==null?void 0:ot.pnl)||0).toLocaleString()," profit"]}),e.jsxs("div",{children:[" ",e.jsx("strong",{style:{color:"#ffaa00"},children:"MEDIUM confidence"})," trades: ",((rt=ie.MEDIUM)==null?void 0:rt.count)||0," signals, $",(((Qe=ie.MEDIUM)==null?void 0:Qe.pnl)||0).toLocaleString()," profit"]}),e.jsxs("div",{children:[" Target 1 hit rate: ",e.jsxs("strong",{style:{color:"#00ff88"},children:[j.t1,"%"]})," - highly reliable first targets"]}),e.jsxs("div",{children:[" Avg MFE: ",e.jsxs("strong",{style:{color:"#66ff88"},children:[h.avg_mfe_pts," pts"]})," - maximum favorable excursion"]}),e.jsxs("div",{children:[" Avg MAE: ",e.jsxs("strong",{style:{color:"#ff8866"},children:[h.avg_mae_pts," pts"]})," - expect temporary drawdowns"]}),e.jsxs("div",{children:[" Max drawdown: ",e.jsxs("strong",{style:{color:"#ff4466"},children:["$",(re=h.max_mae_dollars)==null?void 0:re.toLocaleString()]})," - worst case scenario"]})]})]})]})]})},Uu=()=>{var Se;const{isMobile:t}=uo(),[n,i]=ua("horizon_user",null),[o,r]=I.useState("backtest"),[s,l]=ua("horizon_settings",Bp),[d,c]=I.useState({start:"2021-01-01",end:"2026-12-31"}),[g,w]=ua("horizon_contract","GCJ26");I.useEffect(()=>{(async()=>{let ee;g==="BTC-SPOT"?ee="BTC-SPOT":g.startsWith("BTC")?ee="BTC":g.startsWith("GC")?ee="GC":g.startsWith("NQ")?ee="NQ":g.startsWith("ES")?ee="ES":g.startsWith("CL")?ee="CL":ee="GC";try{await fetch(`${nn}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:ee})}),console.log(`Synced backend to ${g} (${ee})`)}catch(ke){console.error("Failed to sync contract on load:",ke)}})()},[]);const[y,u]=I.useState({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),L=I.useRef(0),[W,Y]=I.useState({contract:"GCJ26",contract_name:"Gold Apr 2026",current_price:0,current_et_time:"--:--:--",current_et_date:""}),[Ue,p]=I.useState(!1),[b,C]=I.useState([{role:"assistant",content:"Welcome to Horizon AI! I can help you analyze market structure, interpret TPO profiles, and provide trading insights based on live data."}]),[f,P]=I.useState(""),[S,T]=I.useState(!1),E=I.useRef(null);I.useEffect(()=>{var O;(O=E.current)==null||O.scrollIntoView({behavior:"smooth"})},[b]),I.useEffect(()=>{const O=["/live","/tpo","/zones","/market-overview","/historical-sessions?week=current"];console.log("Warming up caches..."),O.forEach(ee=>{fetch(`${nn}${ee}`).then(()=>console.log(`Warmed up ${ee}`)).catch(()=>{})})},[]),I.useEffect(()=>{const ee={backtest:["/live"],live:["/tpo","/zones"],tpo:["/zones"],zones:["/live"],treemap:[],vsi:[],priceladder:["/tpo"]}[o]||[];o!=="treemap"&&ee.push("/market-overview");const ke=setTimeout(()=>{ee.forEach(lt=>{fetch(`${nn}${lt}`).then(()=>console.log(`Preloaded ${lt}`)).catch(()=>{})})},500);return()=>clearTimeout(ke)},[o]);const ie=async()=>{if(!f.trim()||S)return;const O=f.trim();P(""),C(He=>[...He,{role:"user",content:O}]),T(!0);let ee={};try{const He=await fetch(`${nn}/live`);He.ok&&(ee=await He.json())}catch{}let ke={};try{const He=await fetch(`${nn}/session-ohlc?week=current`);He.ok&&(ke=await He.json())}catch{}const lt={currentPrice:W.current_price,contract:W.contract,contractName:W.contract_name,currentTime:W.current_et_time,liveSession:ee.current_session||null,sessionHigh:ee.session_high||null,sessionLow:ee.session_low||null,dayHigh:ee.day_high||null,dayLow:ee.day_low||null,pdHigh:ee.pd_high||null,pdLow:ee.pd_low||null,pdPOC:ee.pd_poc||null,cumulativeDelta:ee.cumulative_delta||null,buyVolume:ee.buy_volume||null,sellVolume:ee.sell_volume||null,sessionData:ke.days?ke.days.slice(0,2):null};try{const He=await fetch(`${nn}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:O,context:lt,provider:"claude"})});if(He.ok){const Le=await He.json();C(Je=>[...Je,{role:"assistant",content:Le.response,error:!1}])}else{const Le=await He.json();C(Je=>[...Je,{role:"assistant",content:Le.error||"Sorry, I encountered an error. Please try again.",error:!0}])}}catch{C(Le=>[...Le,{role:"assistant",content:"Connection error. Please check your connection and try again.",error:!0}])}T(!1)};I.useEffect(()=>{let O=0,ee=!1;const ke=3,lt=1e3,He=async()=>{if(!ee){ee=!0,console.log(" Auto-reconnecting to backend...");try{(await fetch(`${nn}/reconnect`,{method:"POST"})).ok&&console.log(" Auto-reconnect triggered successfully")}catch{console.log(" Auto-reconnect request failed, backend may be restarting")}await new Promise(J=>setTimeout(J,2e3)),ee=!1}},Le=async()=>{try{const J=new AbortController,ot=setTimeout(()=>J.abort(),3e3),rt=await fetch(nn,{signal:J.signal});if(clearTimeout(ot),rt.ok){const Qe=await rt.json(),re=["INITIALIZING","SWITCHING...","WAITING_CONNECTION_SLOT","RESETTING...","DISCONNECTED"],a=Qe.data_source&&!re.includes(Qe.data_source)&&!Qe.data_source.includes("RECONNECTING"),m=Qe.data_source&&(Qe.data_source.includes("RECONNECTING")||Qe.data_source==="WAITING_CONNECTION_SLOT"||Qe.data_source==="INITIALIZING");Y({contract:Qe.contract||"GCJ26",contract_name:Qe.contract_name||"Gold Apr 2026",current_price:Qe.current_price||0,current_et_time:Qe.current_et_time||"--:--:--",current_et_date:Qe.current_et_date||"",available_contracts:Qe.available_contracts||{},data_source:Qe.data_source||"DISCONNECTED"}),a?(O=0,u(F=>({...F,connected:!0,lastSuccessTime:new Date().toISOString(),reconnectAttempts:0,lastError:null}))):(m||(O++,O>=ke&&!ee&&He()),u(F=>({...F,connected:m?"reconnecting":!1,lastError:`Data source: ${Qe.data_source||"DISCONNECTED"}`,reconnectAttempts:m?F.reconnectAttempts:F.reconnectAttempts+1})))}else throw new Error(`HTTP ${rt.status}`)}catch(J){O++;const ot=J.name==="AbortError"?"Request timeout":J.message||"Unknown error",rt=ot.includes("ECONNRESET")||ot.includes("connection reset")||ot.includes("Failed to fetch")||ot.includes("NetworkError")||ot.includes("timeout");u(Qe=>({...Qe,connected:!1,lastError:rt?`Network: ${ot}`:ot,errorCount:Qe.errorCount+1,reconnectAttempts:Qe.reconnectAttempts+1})),O>=ke&&!ee&&He()}};Le();let Je=setInterval(Le,lt);const At=setInterval(()=>{O>0&&console.log(` Health check: ${O} consecutive failures`)},3e4);return()=>{clearInterval(Je),clearInterval(At)}},[L.current]);const U=async O=>{var ke,lt;let ee;O==="BTC-SPOT"?ee="BTC-SPOT":O.startsWith("BTC")?ee="BTC":O.startsWith("GC")?ee="GC":O.startsWith("NQ")?ee="NQ":O.startsWith("ES")?ee="ES":O.startsWith("CL")?ee="CL":ee=((ke=Vr[O])==null?void 0:ke.asset)||"GC",w(O),Y(He=>({...He,data_source:"SWITCHING...",current_price:0}));try{if((await fetch(`${nn}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:ee})})).ok){localStorage.removeItem("tpo_historic_cache"),console.log(`Switched to ${O} (${ee})`);const Le=O==="BTC-SPOT"?"BTC-SPOT":((lt=Vr[O])==null?void 0:lt.symbol)||O;let Je=0;const At=20,J=async()=>{var ot;try{const rt=await fetch(nn);if(rt.ok){const Qe=await rt.json();if(Qe.contract===Le||Qe.asset_class===ee||Je>=At){Y({contract:Qe.contract||O,contract_name:Qe.contract_name||((ot=Vr[O])==null?void 0:ot.name)||O,current_price:Qe.current_price||0,current_et_time:Qe.current_et_time||"--:--:--",current_et_date:Qe.current_et_date||"",available_contracts:Qe.available_contracts||{},data_source:Qe.data_source||"SWITCHING..."});return}}}catch{console.log("Polling for new contract data...")}Je++,Je<At&&setTimeout(J,500)};setTimeout(J,500)}}catch(He){console.error("Failed to switch contract:",He),Y(Le=>({...Le,data_source:"ERROR"}))}},j=async()=>{u({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),L.current+=1,console.log("Connection reset triggered");try{const O=await fetch(`${nn}/reconnect`,{method:"POST"});if(O.ok){const ee=await O.json();console.log("Backend reconnect:",ee.message)}}catch(O){console.error("Failed to trigger backend reconnect:",O)}},{trades:h,stats:z,source:Ie,metadata:_,sessions:Be,volumeProfiles:Oe,bigVolumeDays:ne,supportResistance:Ce,seasonality:v,dailyCandles:_e,hourlyCandles:le,featureStatistics:Ne,distributions:it}=_u(),Rt=I.useMemo(()=>({metadata:_,sessions:Be,volumeProfiles:Oe,bigVolumeDays:ne,supportResistance:Ce,seasonality:v,dailyCandles:_e,hourlyCandles:le,featureStatistics:Ne,distributions:it}),[_,Be,Oe,ne,Ce,v,_e,le,Ne,it]),Ke=I.useMemo(()=>h&&h.length>0?h:ku(),[h,s]);I.useEffect(()=>{if(h&&h.length>0){const O=h.map(ee=>ee.date).sort();c({start:O[0],end:O[O.length-1]})}},[h]);const Xe=I.useMemo(()=>Ke.filter(O=>{var ee,ke,lt;return!(O.date<d.start||O.date>d.end||O.delta!==void 0&&O.delta>s.deltaThreshold||O.pnl>0&&O.buyingImbalance!==void 0&&O.buyingImbalance<s.buyingImbalancePct||(ee=s.filters)!=null&&ee.grades&&O.grade&&s.filters.grades[O.grade]===!1||(ke=s.filters)!=null&&ke.tiers&&O.tier&&!s.filters.tiers[O.tier]||((lt=s.filters)==null?void 0:lt.minR)!==void 0&&O.r!==void 0&&O.r<s.filters.minR)}),[Ke,d,s.deltaThreshold,s.buyingImbalancePct,s.filters]),Pe=I.useMemo(()=>Cu(Xe,s),[Xe,s]);new Date().toISOString();const oe=O=>i(O),fe=()=>i(null);return n?e.jsx(Rp.Provider,{value:s,children:e.jsx(Su.Provider,{value:n,children:e.jsxs("div",{style:q.app,children:[e.jsx(Lu,{activeTab:o,setActiveTab:r,onLogout:fe}),e.jsxs("main",{style:{...q.main,padding:t?"12px":"24px",paddingBottom:t?"85px":"80px"},children:[o==="backtest"&&e.jsx(Hu,{data:Pe,trades:Xe,dateRange:d,setDateRange:c,extendedData:Rt}),o==="live"&&e.jsx(Nu,{settings:s,onSettingsChange:l}),o==="tpo"&&e.jsx(Du,{selectedContract:g}),o==="zones"&&e.jsx(Pu,{}),o==="clawd"&&e.jsx(Vu,{selectedContract:g}),o==="treemap"&&e.jsx(Ru,{}),o==="vsi"&&e.jsx(Eu,{selectedContract:g}),o==="trades"&&e.jsx(Ip,{trades:Ke,dateRange:d}),o==="priceladder"&&e.jsx(Bu,{selectedContract:g}),o==="settings"&&e.jsx(Fu,{settings:s,onSettingsChange:l,trades:Xe,dateRange:d,connectionStatus:y,onResetConnection:j}),o==="redfolder"&&e.jsx(Au,{})]}),e.jsxs("footer",{style:q.footer,children:[e.jsx("span",{children:"Project Horizon v2.0 | Underground Setup Strategy"}),e.jsxs("span",{children:[((Se=Vr[g])==null?void 0:Se.name)||"GC Futures"," | 2025 Market Regime"]})]}),Ue&&e.jsxs("div",{style:{position:"fixed",bottom:t?70:100,right:t?10:24,left:t?10:"auto",width:t?"auto":380,height:t?"calc(100vh - 150px)":500,maxHeight:t?"70vh":500,background:"linear-gradient(180deg, rgba(12,12,18,0.98) 0%, rgba(8,8,14,1) 100%)",borderRadius:16,border:"1px solid rgba(0,255,136,0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(0,255,136,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:8,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"#000"},children:"H"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:14,color:"#fff"},children:"Horizon AI"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88"},children:"Trading Assistant"})]})]}),e.jsx("button",{onClick:()=>p(!1),style:{background:"transparent",border:"none",color:"#666",fontSize:20,cursor:"pointer",padding:4},children:""})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:16,display:"flex",flexDirection:"column",gap:12},children:[b.map((O,ee)=>e.jsx("div",{style:{alignSelf:O.role==="user"?"flex-end":"flex-start",maxWidth:O.role==="user"?"85%":"95%",width:O.role==="user"?"auto":"95%"},children:e.jsx("div",{style:{padding:O.role==="assistant"?"14px 16px":"10px 14px",borderRadius:O.role==="user"?"14px 14px 4px 14px":"14px 14px 14px 4px",background:O.role==="user"?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.06)",border:O.role==="user"?"none":"1px solid rgba(255,255,255,0.1)",color:O.role==="user"?"#000":O.error?"#ff6b6b":"#e8e8e8",fontSize:13,lineHeight:1.6,fontWeight:O.role==="user"?500:400},children:O.role==="assistant"?e.jsx("div",{dangerouslySetInnerHTML:{__html:O.content.replace(/\*\*(.+?)\*\*/g,'<strong style="color:#00ff88">$1</strong>').replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,'<code style="background:rgba(0,255,136,0.15);padding:2px 6px;border-radius:4px;font-family:monospace;font-size:12px">$1</code>').replace(/\n- /g,"<br/> ").replace(/\n\d+\. /g,ke=>"<br/>"+ke.trim()+" ").replace(/\n\n/g,'</p><p style="margin:8px 0">').replace(/\n/g,"<br/>")}}):O.content})},ee)),S&&e.jsx("div",{style:{alignSelf:"flex-start",width:"95%"},children:e.jsxs("div",{style:{padding:"14px 16px",borderRadius:"14px 14px 14px 4px",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",fontSize:13,display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite"}}),"Analyzing..."]})}),e.jsx("div",{ref:E})]}),e.jsxs("div",{style:{padding:12,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:f,onChange:O=>P(O.target.value),onKeyPress:O=>O.key==="Enter"&&ie(),placeholder:"Ask about trading...",style:{flex:1,padding:"10px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:13,outline:"none"}}),e.jsx("button",{onClick:ie,disabled:S||!f.trim(),style:{padding:"10px 16px",borderRadius:10,border:"none",background:f.trim()&&!S?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.1)",color:f.trim()&&!S?"#000":"#666",fontWeight:600,fontSize:13,cursor:f.trim()&&!S?"pointer":"not-allowed"},children:"Send"})]})]}),e.jsx("button",{onClick:()=>p(!Ue),style:{position:"fixed",bottom:t?75:24,right:t?12:24,width:Ue?48:"auto",height:t?40:48,padding:Ue?0:t?"0 14px":"0 20px",borderRadius:Ue?"50%":24,border:"none",background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",color:"#000",fontWeight:700,fontSize:t?12:14,cursor:"pointer",boxShadow:"0 4px 20px rgba(0,255,136,0.4)",zIndex:1001,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},children:Ue?"":e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:18},children:"H"}),e.jsx("span",{children:"Horizon"})]})}),e.jsx($u,{globalData:W,selectedContract:g,onContractChange:U,contracts:Vr,isMobile:t}),e.jsx(yu,{})]})})}):e.jsx(zu,{onLogin:oe})},q={app:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",color:"#e0e0e0",fontFamily:"'JetBrains Mono', 'Fira Code', monospace",overflowX:"hidden",width:"100%",maxWidth:"100vw"},main:{padding:"24px",paddingBottom:"80px",maxWidth:"1600px",margin:"0 auto",overflowX:"hidden"},footer:{display:"flex",justifyContent:"space-between",padding:"16px 24px",paddingBottom:"70px",borderTop:"1px solid rgba(255,255,255,0.05)",fontSize:"12px",color:"#666"},loginContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",padding:"20px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginCard:{width:"100%",maxWidth:"420px",background:"rgba(20,20,28,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:"48px 40px",boxShadow:"0 25px 50px rgba(0,0,0,0.5)",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginHeader:{textAlign:"center",marginBottom:"40px"},logo:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"16px"},logoIcon:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},logoText:{fontSize:"22px",fontWeight:"700",color:"#fff",letterSpacing:"3px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, sans-serif"},loginSubtitle:{color:"#888",fontSize:"13px",fontFamily:"'Inter', sans-serif",letterSpacing:"0.5px"},loginForm:{display:"flex",flexDirection:"column",gap:"20px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},inputLabel:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"1px",fontFamily:"'Inter', sans-serif"},input:{padding:"14px 16px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",fontSize:"15px",outline:"none",transition:"border-color 0.2s",fontFamily:"'Inter', sans-serif"},error:{padding:"12px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:"8px",color:"#ff4466",fontSize:"13px",fontFamily:"'Inter', sans-serif"},loginButton:{padding:"16px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:"8px",color:"#000",fontSize:"13px",fontWeight:"700",cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s",fontFamily:"'Inter', sans-serif"},loginFooter:{textAlign:"center",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,0.05)"},footerText:{color:"#555",fontSize:"11px",margin:"4px 0",fontFamily:"'Inter', sans-serif"},nav:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)"},navBrand:{display:"flex",alignItems:"center",gap:"10px"},navTabs:{display:"flex",gap:"8px"},settingsPanel:{maxWidth:"1200px",margin:"0 auto"},settingsHeader:{marginBottom:"32px"},settingsSubtitle:{color:"#666",fontSize:"14px",marginTop:"8px"},settingsGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},settingsCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px"},settingsCardTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",marginBottom:"14px"},sliderGroup:{marginBottom:"16px"},sliderHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},sliderLabel:{fontSize:"11px",color:"#aaa"},sliderValue:{fontSize:"13px",fontWeight:"700",color:"#00ff88"},slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer",WebkitAppearance:"none"},sliderTicks:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#555",marginTop:"4px"},allocationNote:{fontSize:"12px",color:"#888",marginBottom:"16px"},tierVisual:{display:"flex",height:"8px",borderRadius:"4px",overflow:"hidden",marginTop:"16px"},tierBar:{height:"100%",transition:"width 0.3s"},tierLegend:{display:"flex",justifyContent:"space-around",fontSize:"11px",color:"#888",marginTop:"12px"},settingsActions:{display:"flex",gap:"16px",justifyContent:"center",marginBottom:"32px"},actionButton:{padding:"14px 32px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",border:"none"},resetButton:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"#888"},applyButton:{background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000"},settingsInfo:{padding:"24px",background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:"12px"},infoTitle:{fontSize:"14px",color:"#00aaff",marginBottom:"16px"},infoList:{listStyle:"none",padding:0,margin:0,fontSize:"13px",color:"#888",lineHeight:"1.8"},statsCard:{padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},statsTitle:{fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},statsValue:{fontSize:"24px",fontWeight:"700",color:"#fff"},statsSubtitle:{fontSize:"12px",color:"#666",marginTop:"4px"},statsTrend:{fontSize:"12px",marginTop:"8px",fontWeight:"600"},liveDashboard:{maxWidth:"1000px",margin:"0 auto"},levelCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px",textAlign:"center"},levelLabel:{fontSize:"11px",color:"#666",textTransform:"uppercase",marginBottom:"8px"},levelValue:{fontSize:"18px",fontWeight:"600",color:"#fff"},signalMatrix:{padding:"24px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",marginBottom:"24px"},signalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},signalTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",margin:0},signalCount:{fontSize:"14px",fontWeight:"600"},signalGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px"},signalItem:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",borderRadius:"8px",border:"1px solid"},signalIndicator:{width:"10px",height:"10px",borderRadius:"50%"},signalName:{fontSize:"12px",color:"#ddd"},criticalBadge:{marginLeft:"auto",fontSize:"10px",fontWeight:"700",color:"#ffaa00",background:"rgba(255,170,0,0.2)",padding:"2px 6px",borderRadius:"4px"},setupStatus:{display:"flex",alignItems:"center",gap:"12px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.05)"},phaseLabel:{fontSize:"12px",color:"#666"},phaseValue:{fontSize:"14px",fontWeight:"700"},dashboardTitle:{fontSize:"20px",fontWeight:"700",color:"#fff",margin:0},tradeLog:{maxWidth:"1200px",margin:"0 auto"},tradeLogInfo:{fontSize:"13px",color:"#666",marginTop:"8px",marginBottom:"16px"},tradeTable:{width:"100%",borderCollapse:"collapse",marginTop:"16px"},th:{padding:"14px 16px",textAlign:"left",fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",borderBottom:"1px solid rgba(255,255,255,0.1)"},tr:{transition:"background 0.2s"},td:{padding:"14px 16px",fontSize:"14px",borderBottom:"1px solid rgba(255,255,255,0.03)"},gradeBadge:{display:"inline-block",padding:"4px 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"700",color:"#000"}},Ep=document.createElement("style");Ep.textContent=`
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  input:focus {
    border-color: #00ff88 !important;
  }
  button:hover:not(:disabled) {
    transform: translateY(-1px);
  }
  tr:hover {
    background: rgba(255,255,255,0.02);
  }
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255,255,255,0.1);
    height: 8px;
    border-radius: 4px;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    cursor: pointer;
  }
`;document.head.appendChild(Ep);xa.createRoot(document.getElementById("root")).render(e.jsx(Pi.StrictMode,{children:e.jsx(Uu,{})}));
