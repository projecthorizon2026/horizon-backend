(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();function Wp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g0={exports:{}},Cl={},x0={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=Symbol.for("react.element"),Mp=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Pp=Symbol.for("react.strict_mode"),Np=Symbol.for("react.profiler"),Dp=Symbol.for("react.provider"),Hp=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Up=Symbol.for("react.memo"),Gp=Symbol.for("react.lazy"),ic=Symbol.iterator;function Yp(t){return t===null||typeof t!="object"?null:(t=ic&&t[ic]||t["@@iterator"],typeof t=="function"?t:null)}var y0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m0=Object.assign,b0={};function Lr(t,n,o){this.props=t,this.context=n,this.refs=b0,this.updater=o||y0}Lr.prototype.isReactComponent={};Lr.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};Lr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v0(){}v0.prototype=Lr.prototype;function cd(t,n,o){this.props=t,this.context=n,this.refs=b0,this.updater=o||y0}var fd=cd.prototype=new v0;fd.constructor=cd;m0(fd,Lr.prototype);fd.isPureReactComponent=!0;var rc=Array.isArray,j0=Object.prototype.hasOwnProperty,pd={current:null},S0={key:!0,ref:!0,__self:!0,__source:!0};function w0(t,n,o){var i,r={},s=null,l=null;if(n!=null)for(i in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(s=""+n.key),n)j0.call(n,i)&&!S0.hasOwnProperty(i)&&(r[i]=n[i]);var a=arguments.length-2;if(a===1)r.children=o;else if(1<a){for(var d=Array(a),p=0;p<a;p++)d[p]=arguments[p+2];r.children=d}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:js,type:t,key:s,ref:l,props:r,_owner:pd.current}}function Xp(t,n){return{$$typeof:js,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function hd(t){return typeof t=="object"&&t!==null&&t.$$typeof===js}function Kp(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(o){return n[o]})}var sc=/\/+/g;function Hl(t,n){return typeof t=="object"&&t!==null&&t.key!=null?Kp(""+t.key):n.toString(36)}function $s(t,n,o,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case js:case Mp:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+Hl(l,0):i,rc(r)?(o="",t!=null&&(o=t.replace(sc,"$&/")+"/"),$s(r,n,o,"",function(p){return p})):r!=null&&(hd(r)&&(r=Xp(r,o+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(sc,"$&/")+"/")+t)),n.push(r)),1;if(l=0,i=i===""?".":i+":",rc(t))for(var a=0;a<t.length;a++){s=t[a];var d=i+Hl(s,a);l+=$s(s,n,o,d,r)}else if(d=Yp(t),typeof d=="function")for(t=d.call(t),a=0;!(s=t.next()).done;)s=s.value,d=i+Hl(s,a++),l+=$s(s,n,o,d,r);else if(s==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function _s(t,n,o){if(t==null)return t;var i=[],r=0;return $s(t,i,"","",function(s){return n.call(o,s,r++)}),i}function Jp(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(o){(t._status===0||t._status===-1)&&(t._status=1,t._result=o)},function(o){(t._status===0||t._status===-1)&&(t._status=2,t._result=o)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var oo={current:null},Vs={transition:null},Qp={ReactCurrentDispatcher:oo,ReactCurrentBatchConfig:Vs,ReactCurrentOwner:pd};function k0(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:_s,forEach:function(t,n,o){_s(t,function(){n.apply(this,arguments)},o)},count:function(t){var n=0;return _s(t,function(){n++}),n},toArray:function(t){return _s(t,function(n){return n})||[]},only:function(t){if(!hd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Gt.Component=Lr;Gt.Fragment=Op;Gt.Profiler=Np;Gt.PureComponent=cd;Gt.StrictMode=Pp;Gt.Suspense=Vp;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qp;Gt.act=k0;Gt.cloneElement=function(t,n,o){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m0({},t.props),r=t.key,s=t.ref,l=t._owner;if(n!=null){if(n.ref!==void 0&&(s=n.ref,l=pd.current),n.key!==void 0&&(r=""+n.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(d in n)j0.call(n,d)&&!S0.hasOwnProperty(d)&&(i[d]=n[d]===void 0&&a!==void 0?a[d]:n[d])}var d=arguments.length-2;if(d===1)i.children=o;else if(1<d){a=Array(d);for(var p=0;p<d;p++)a[p]=arguments[p+2];i.children=a}return{$$typeof:js,type:t.type,key:r,ref:s,props:i,_owner:l}};Gt.createContext=function(t){return t={$$typeof:Hp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Dp,_context:t},t.Consumer=t};Gt.createElement=w0;Gt.createFactory=function(t){var n=w0.bind(null,t);return n.type=t,n};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(t){return{$$typeof:$p,render:t}};Gt.isValidElement=hd;Gt.lazy=function(t){return{$$typeof:Gp,_payload:{_status:-1,_result:t},_init:Jp}};Gt.memo=function(t,n){return{$$typeof:Up,type:t,compare:n===void 0?null:n}};Gt.startTransition=function(t){var n=Vs.transition;Vs.transition={};try{t()}finally{Vs.transition=n}};Gt.unstable_act=k0;Gt.useCallback=function(t,n){return oo.current.useCallback(t,n)};Gt.useContext=function(t){return oo.current.useContext(t)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(t){return oo.current.useDeferredValue(t)};Gt.useEffect=function(t,n){return oo.current.useEffect(t,n)};Gt.useId=function(){return oo.current.useId()};Gt.useImperativeHandle=function(t,n,o){return oo.current.useImperativeHandle(t,n,o)};Gt.useInsertionEffect=function(t,n){return oo.current.useInsertionEffect(t,n)};Gt.useLayoutEffect=function(t,n){return oo.current.useLayoutEffect(t,n)};Gt.useMemo=function(t,n){return oo.current.useMemo(t,n)};Gt.useReducer=function(t,n,o){return oo.current.useReducer(t,n,o)};Gt.useRef=function(t){return oo.current.useRef(t)};Gt.useState=function(t){return oo.current.useState(t)};Gt.useSyncExternalStore=function(t,n,o){return oo.current.useSyncExternalStore(t,n,o)};Gt.useTransition=function(){return oo.current.useTransition()};Gt.version="18.3.1";x0.exports=Gt;var B=x0.exports;const No=Wp(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=B,qp=Symbol.for("react.element"),eh=Symbol.for("react.fragment"),th=Object.prototype.hasOwnProperty,nh=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oh={key:!0,ref:!0,__self:!0,__source:!0};function C0(t,n,o){var i,r={},s=null,l=null;o!==void 0&&(s=""+o),n.key!==void 0&&(s=""+n.key),n.ref!==void 0&&(l=n.ref);for(i in n)th.call(n,i)&&!oh.hasOwnProperty(i)&&(r[i]=n[i]);if(t&&t.defaultProps)for(i in n=t.defaultProps,n)r[i]===void 0&&(r[i]=n[i]);return{$$typeof:qp,type:t,key:s,ref:l,props:r,_owner:nh.current}}Cl.Fragment=eh;Cl.jsx=C0;Cl.jsxs=C0;g0.exports=Cl;var e=g0.exports,xa={},_0={exports:{}},ko={},T0={exports:{}},R0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(ne,ze){var b=ne.length;ne.push(ze);e:for(;0<b;){var _e=b-1>>>1,re=ne[_e];if(0<r(re,ze))ne[_e]=ze,ne[b]=re,b=_e;else break e}}function o(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var ze=ne[0],b=ne.pop();if(b!==ze){ne[0]=b;e:for(var _e=0,re=ne.length,He=re>>>1;_e<He;){var rt=2*(_e+1)-1,zt=ne[rt],Je=rt+1,Xe=ne[Je];if(0>r(zt,b))Je<re&&0>r(Xe,zt)?(ne[_e]=Xe,ne[Je]=b,_e=Je):(ne[_e]=zt,ne[rt]=b,_e=rt);else if(Je<re&&0>r(Xe,b))ne[_e]=Xe,ne[Je]=b,_e=Je;else break e}}return ze}function r(ne,ze){var b=ne.sortIndex-ze.sortIndex;return b!==0?b:ne.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var d=[],p=[],w=1,y=null,u=3,W=!1,L=!1,Z=!1,Ge=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ne){for(var ze=o(p);ze!==null;){if(ze.callback===null)i(p);else if(ze.startTime<=ne)i(p),ze.sortIndex=ze.expirationTime,n(d,ze);else break;ze=o(p)}}function c(ne){if(Z=!1,C(ne),!L)if(o(d)!==null)L=!0,Ie(F);else{var ze=o(p);ze!==null&&Pe(c,ze.startTime-ne)}}function F(ne,ze){L=!1,Z&&(Z=!1,f(I),I=-1),W=!0;var b=u;try{for(C(ze),y=o(d);y!==null&&(!(y.expirationTime>ze)||ne&&!v());){var _e=y.callback;if(typeof _e=="function"){y.callback=null,u=y.priorityLevel;var re=_e(y.expirationTime<=ze);ze=t.unstable_now(),typeof re=="function"?y.callback=re:y===o(d)&&i(d),C(ze)}else i(d);y=o(d)}if(y!==null)var He=!0;else{var rt=o(p);rt!==null&&Pe(c,rt.startTime-ze),He=!1}return He}finally{y=null,u=b,W=!1}}var S=!1,R=null,I=-1,de=5,G=-1;function v(){return!(t.unstable_now()-G<de)}function h(){if(R!==null){var ne=t.unstable_now();G=ne;var ze=!0;try{ze=R(!0,ne)}finally{ze?T():(S=!1,R=null)}}else S=!1}var T;if(typeof m=="function")T=function(){m(h)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,z=Le.port2;Le.port1.onmessage=h,T=function(){z.postMessage(null)}}else T=function(){Ge(h,0)};function Ie(ne){R=ne,S||(S=!0,T())}function Pe(ne,ze){I=Ge(function(){ne(t.unstable_now())},ze)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){L||W||(L=!0,Ie(F))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return o(d)},t.unstable_next=function(ne){switch(u){case 1:case 2:case 3:var ze=3;break;default:ze=u}var b=u;u=ze;try{return ne()}finally{u=b}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,ze){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var b=u;u=ne;try{return ze()}finally{u=b}},t.unstable_scheduleCallback=function(ne,ze,b){var _e=t.unstable_now();switch(typeof b=="object"&&b!==null?(b=b.delay,b=typeof b=="number"&&0<b?_e+b:_e):b=_e,ne){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=b+re,ne={id:w++,callback:ze,priorityLevel:ne,startTime:b,expirationTime:re,sortIndex:-1},b>_e?(ne.sortIndex=b,n(p,ne),o(d)===null&&ne===o(p)&&(Z?(f(I),I=-1):Z=!0,Pe(c,b-_e))):(ne.sortIndex=re,n(d,ne),L||W||(L=!0,Ie(F))),ne},t.unstable_shouldYield=v,t.unstable_wrapCallback=function(ne){var ze=u;return function(){var b=u;u=ze;try{return ne.apply(this,arguments)}finally{u=b}}}})(R0);T0.exports=R0;var ih=T0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh=B,wo=ih;function Fe(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z0=new Set,is={};function ir(t,n){_r(t,n),_r(t+"Capture",n)}function _r(t,n){for(is[t]=n,t=0;t<n.length;t++)z0.add(n[t])}var ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ya=Object.prototype.hasOwnProperty,sh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lc={},ac={};function lh(t){return ya.call(ac,t)?!0:ya.call(lc,t)?!1:sh.test(t)?ac[t]=!0:(lc[t]=!0,!1)}function ah(t,n,o,i){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return i?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dh(t,n,o,i){if(n===null||typeof n>"u"||ah(t,n,o,i))return!0;if(i)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function io(t,n,o,i,r,s,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=o,this.propertyName=t,this.type=n,this.sanitizeURL=s,this.removeEmptyString=l}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new io(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Hn[n]=new io(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new io(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new io(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new io(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new io(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new io(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new io(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new io(t,5,!1,t.toLowerCase(),null,!1,!1)});var ud=/[\-:]([a-z])/g;function gd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(ud,gd);Hn[n]=new io(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(ud,gd);Hn[n]=new io(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(ud,gd);Hn[n]=new io(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new io(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new io("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new io(t,1,!1,t.toLowerCase(),null,!0,!0)});function xd(t,n,o,i){var r=Hn.hasOwnProperty(n)?Hn[n]:null;(r!==null?r.type!==0:i||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(dh(n,o,r,i)&&(o=null),i||r===null?lh(n)&&(o===null?t.removeAttribute(n):t.setAttribute(n,""+o)):r.mustUseProperty?t[r.propertyName]=o===null?r.type===3?!1:"":o:(n=r.attributeName,i=r.attributeNamespace,o===null?t.removeAttribute(n):(r=r.type,o=r===3||r===4&&o===!0?"":""+o,i?t.setAttributeNS(i,n,o):t.setAttribute(n,o))))}var ui=rh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=Symbol.for("react.element"),ar=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),yd=Symbol.for("react.strict_mode"),ma=Symbol.for("react.profiler"),B0=Symbol.for("react.provider"),I0=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),ba=Symbol.for("react.suspense"),va=Symbol.for("react.suspense_list"),bd=Symbol.for("react.memo"),ki=Symbol.for("react.lazy"),E0=Symbol.for("react.offscreen"),dc=Symbol.iterator;function Wr(t){return t===null||typeof t!="object"?null:(t=dc&&t[dc]||t["@@iterator"],typeof t=="function"?t:null)}var Sn=Object.assign,$l;function Ur(t){if($l===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);$l=n&&n[1]||""}return`
`+$l+t}var Vl=!1;function Ul(t,n){if(!t||Vl)return"";Vl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(p){var i=p}Reflect.construct(t,[],n)}else{try{n.call()}catch(p){i=p}t.call(n.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),s=i.stack.split(`
`),l=r.length-1,a=s.length-1;1<=l&&0<=a&&r[l]!==s[a];)a--;for(;1<=l&&0<=a;l--,a--)if(r[l]!==s[a]){if(l!==1||a!==1)do if(l--,a--,0>a||r[l]!==s[a]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=a);break}}}finally{Vl=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?Ur(t):""}function ch(t){switch(t.tag){case 5:return Ur(t.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 2:case 15:return t=Ul(t.type,!1),t;case 11:return t=Ul(t.type.render,!1),t;case 1:return t=Ul(t.type,!0),t;default:return""}}function ja(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dr:return"Fragment";case ar:return"Portal";case ma:return"Profiler";case yd:return"StrictMode";case ba:return"Suspense";case va:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case I0:return(t.displayName||"Context")+".Consumer";case B0:return(t._context.displayName||"Context")+".Provider";case md:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bd:return n=t.displayName||null,n!==null?n:ja(t.type)||"Memo";case ki:n=t._payload,t=t._init;try{return ja(t(n))}catch{}}return null}function fh(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ja(n);case 8:return n===yd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function L0(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ph(t){var n=L0(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),i=""+t[n];if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var r=o.get,s=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,s.call(this,l)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Rs(t){t._valueTracker||(t._valueTracker=ph(t))}function A0(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var o=n.getValue(),i="";return t&&(i=L0(t)?t.checked?"true":"false":t.value),t=i,t!==o?(n.setValue(t),!0):!1}function tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sa(t,n){var o=n.checked;return Sn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function cc(t,n){var o=n.defaultValue==null?"":n.defaultValue,i=n.checked!=null?n.checked:n.defaultChecked;o=Oi(n.value!=null?n.value:o),t._wrapperState={initialChecked:i,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function F0(t,n){n=n.checked,n!=null&&xd(t,"checked",n,!1)}function wa(t,n){F0(t,n);var o=Oi(n.value),i=n.type;if(o!=null)i==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?ka(t,n.type,o):n.hasOwnProperty("defaultValue")&&ka(t,n.type,Oi(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function fc(t,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var i=n.type;if(!(i!=="submit"&&i!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,o||n===t.value||(t.value=n),t.defaultValue=n}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function ka(t,n,o){(n!=="number"||tl(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Gr=Array.isArray;function vr(t,n,o,i){if(t=t.options,n){n={};for(var r=0;r<o.length;r++)n["$"+o[r]]=!0;for(o=0;o<t.length;o++)r=n.hasOwnProperty("$"+t[o].value),t[o].selected!==r&&(t[o].selected=r),r&&i&&(t[o].defaultSelected=!0)}else{for(o=""+Oi(o),n=null,r=0;r<t.length;r++){if(t[r].value===o){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}n!==null||t[r].disabled||(n=t[r])}n!==null&&(n.selected=!0)}}function Ca(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Sn({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pc(t,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(Fe(92));if(Gr(o)){if(1<o.length)throw Error(Fe(93));o=o[0]}n=o}n==null&&(n=""),o=n}t._wrapperState={initialValue:Oi(o)}}function W0(t,n){var o=Oi(n.value),i=Oi(n.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),n.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),i!=null&&(t.defaultValue=""+i)}function hc(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function M0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?M0(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zs,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,i,r){MSApp.execUnsafeLocalFunction(function(){return t(n,o,i,r)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(zs=zs||document.createElement("div"),zs.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=zs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function rs(t,n){if(n){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=n;return}}t.textContent=n}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hh=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(t){hh.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Kr[n]=Kr[t]})});function P0(t,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||Kr.hasOwnProperty(t)&&Kr[t]?(""+n).trim():n+"px"}function N0(t,n){t=t.style;for(var o in n)if(n.hasOwnProperty(o)){var i=o.indexOf("--")===0,r=P0(o,n[o],i);o==="float"&&(o="cssFloat"),i?t.setProperty(o,r):t[o]=r}}var uh=Sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(t,n){if(n){if(uh[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Fe(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Fe(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Fe(62))}}function Ra(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var za=null;function vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ba=null,jr=null,Sr=null;function uc(t){if(t=ks(t)){if(typeof Ba!="function")throw Error(Fe(280));var n=t.stateNode;n&&(n=Bl(n),Ba(t.stateNode,t.type,n))}}function D0(t){jr?Sr?Sr.push(t):Sr=[t]:jr=t}function H0(){if(jr){var t=jr,n=Sr;if(Sr=jr=null,uc(t),n)for(t=0;t<n.length;t++)uc(n[t])}}function $0(t,n){return t(n)}function V0(){}var Gl=!1;function U0(t,n,o){if(Gl)return t(n,o);Gl=!0;try{return $0(t,n,o)}finally{Gl=!1,(jr!==null||Sr!==null)&&(V0(),H0())}}function ss(t,n){var o=t.stateNode;if(o===null)return null;var i=Bl(o);if(i===null)return null;o=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(Fe(231,n,typeof o));return o}var Ia=!1;if(ci)try{var Mr={};Object.defineProperty(Mr,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",Mr,Mr),window.removeEventListener("test",Mr,Mr)}catch{Ia=!1}function gh(t,n,o,i,r,s,l,a,d){var p=Array.prototype.slice.call(arguments,3);try{n.apply(o,p)}catch(w){this.onError(w)}}var Jr=!1,nl=null,ol=!1,Ea=null,xh={onError:function(t){Jr=!0,nl=t}};function yh(t,n,o,i,r,s,l,a,d){Jr=!1,nl=null,gh.apply(xh,arguments)}function mh(t,n,o,i,r,s,l,a,d){if(yh.apply(this,arguments),Jr){if(Jr){var p=nl;Jr=!1,nl=null}else throw Error(Fe(198));ol||(ol=!0,Ea=p)}}function rr(t){var n=t,o=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(o=n.return),t=n.return;while(t)}return n.tag===3?o:null}function G0(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function gc(t){if(rr(t)!==t)throw Error(Fe(188))}function bh(t){var n=t.alternate;if(!n){if(n=rr(t),n===null)throw Error(Fe(188));return n!==t?null:t}for(var o=t,i=n;;){var r=o.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){o=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===o)return gc(r),t;if(s===i)return gc(r),n;s=s.sibling}throw Error(Fe(188))}if(o.return!==i.return)o=r,i=s;else{for(var l=!1,a=r.child;a;){if(a===o){l=!0,o=r,i=s;break}if(a===i){l=!0,i=r,o=s;break}a=a.sibling}if(!l){for(a=s.child;a;){if(a===o){l=!0,o=s,i=r;break}if(a===i){l=!0,i=s,o=r;break}a=a.sibling}if(!l)throw Error(Fe(189))}}if(o.alternate!==i)throw Error(Fe(190))}if(o.tag!==3)throw Error(Fe(188));return o.stateNode.current===o?t:n}function Y0(t){return t=bh(t),t!==null?X0(t):null}function X0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=X0(t);if(n!==null)return n;t=t.sibling}return null}var K0=wo.unstable_scheduleCallback,xc=wo.unstable_cancelCallback,vh=wo.unstable_shouldYield,jh=wo.unstable_requestPaint,_n=wo.unstable_now,Sh=wo.unstable_getCurrentPriorityLevel,jd=wo.unstable_ImmediatePriority,J0=wo.unstable_UserBlockingPriority,il=wo.unstable_NormalPriority,wh=wo.unstable_LowPriority,Q0=wo.unstable_IdlePriority,_l=null,ei=null;function kh(t){if(ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(_l,t,void 0,(t.current.flags&128)===128)}catch{}}var Vo=Math.clz32?Math.clz32:Th,Ch=Math.log,_h=Math.LN2;function Th(t){return t>>>=0,t===0?32:31-(Ch(t)/_h|0)|0}var Bs=64,Is=4194304;function Yr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rl(t,n){var o=t.pendingLanes;if(o===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,l=o&268435455;if(l!==0){var a=l&~r;a!==0?i=Yr(a):(s&=l,s!==0&&(i=Yr(s)))}else l=o&~r,l!==0?i=Yr(l):s!==0&&(i=Yr(s));if(i===0)return 0;if(n!==0&&n!==i&&!(n&r)&&(r=i&-i,s=n&-n,r>=s||r===16&&(s&4194240)!==0))return n;if(i&4&&(i|=o&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=i;0<n;)o=31-Vo(n),r=1<<o,i|=t[o],n&=~r;return i}function Rh(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zh(t,n){for(var o=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Vo(s),a=1<<l,d=r[l];d===-1?(!(a&o)||a&i)&&(r[l]=Rh(a,n)):d<=n&&(t.expiredLanes|=a),s&=~a}}function La(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z0(){var t=Bs;return Bs<<=1,!(Bs&4194240)&&(Bs=64),t}function Yl(t){for(var n=[],o=0;31>o;o++)n.push(t);return n}function Ss(t,n,o){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Vo(n),t[n]=o}function Bh(t,n){var o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<o;){var r=31-Vo(o),s=1<<r;n[r]=0,i[r]=-1,t[r]=-1,o&=~s}}function Sd(t,n){var o=t.entangledLanes|=n;for(t=t.entanglements;o;){var i=31-Vo(o),r=1<<i;r&n|t[i]&n&&(t[i]|=n),o&=~r}}var an=0;function q0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ef,wd,tf,nf,of,Aa=!1,Es=[],Bi=null,Ii=null,Ei=null,ls=new Map,as=new Map,_i=[],Ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yc(t,n){switch(t){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":ls.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":as.delete(n.pointerId)}}function Or(t,n,o,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:n,domEventName:o,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},n!==null&&(n=ks(n),n!==null&&wd(n)),t):(t.eventSystemFlags|=i,n=t.targetContainers,r!==null&&n.indexOf(r)===-1&&n.push(r),t)}function Eh(t,n,o,i,r){switch(n){case"focusin":return Bi=Or(Bi,t,n,o,i,r),!0;case"dragenter":return Ii=Or(Ii,t,n,o,i,r),!0;case"mouseover":return Ei=Or(Ei,t,n,o,i,r),!0;case"pointerover":var s=r.pointerId;return ls.set(s,Or(ls.get(s)||null,t,n,o,i,r)),!0;case"gotpointercapture":return s=r.pointerId,as.set(s,Or(as.get(s)||null,t,n,o,i,r)),!0}return!1}function rf(t){var n=Xi(t.target);if(n!==null){var o=rr(n);if(o!==null){if(n=o.tag,n===13){if(n=G0(o),n!==null){t.blockedOn=n,of(t.priority,function(){tf(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Us(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var o=Fa(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var i=new o.constructor(o.type,o);za=i,o.target.dispatchEvent(i),za=null}else return n=ks(o),n!==null&&wd(n),t.blockedOn=o,!1;n.shift()}return!0}function mc(t,n,o){Us(t)&&o.delete(n)}function Lh(){Aa=!1,Bi!==null&&Us(Bi)&&(Bi=null),Ii!==null&&Us(Ii)&&(Ii=null),Ei!==null&&Us(Ei)&&(Ei=null),ls.forEach(mc),as.forEach(mc)}function Pr(t,n){t.blockedOn===n&&(t.blockedOn=null,Aa||(Aa=!0,wo.unstable_scheduleCallback(wo.unstable_NormalPriority,Lh)))}function ds(t){function n(r){return Pr(r,t)}if(0<Es.length){Pr(Es[0],t);for(var o=1;o<Es.length;o++){var i=Es[o];i.blockedOn===t&&(i.blockedOn=null)}}for(Bi!==null&&Pr(Bi,t),Ii!==null&&Pr(Ii,t),Ei!==null&&Pr(Ei,t),ls.forEach(n),as.forEach(n),o=0;o<_i.length;o++)i=_i[o],i.blockedOn===t&&(i.blockedOn=null);for(;0<_i.length&&(o=_i[0],o.blockedOn===null);)rf(o),o.blockedOn===null&&_i.shift()}var wr=ui.ReactCurrentBatchConfig,sl=!0;function Ah(t,n,o,i){var r=an,s=wr.transition;wr.transition=null;try{an=1,kd(t,n,o,i)}finally{an=r,wr.transition=s}}function Fh(t,n,o,i){var r=an,s=wr.transition;wr.transition=null;try{an=4,kd(t,n,o,i)}finally{an=r,wr.transition=s}}function kd(t,n,o,i){if(sl){var r=Fa(t,n,o,i);if(r===null)oa(t,n,i,ll,o),yc(t,i);else if(Eh(r,t,n,o,i))i.stopPropagation();else if(yc(t,i),n&4&&-1<Ih.indexOf(t)){for(;r!==null;){var s=ks(r);if(s!==null&&ef(s),s=Fa(t,n,o,i),s===null&&oa(t,n,i,ll,o),s===r)break;r=s}r!==null&&i.stopPropagation()}else oa(t,n,i,null,o)}}var ll=null;function Fa(t,n,o,i){if(ll=null,t=vd(i),t=Xi(t),t!==null)if(n=rr(t),n===null)t=null;else if(o=n.tag,o===13){if(t=G0(n),t!==null)return t;t=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return ll=t,null}function sf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sh()){case jd:return 1;case J0:return 4;case il:case wh:return 16;case Q0:return 536870912;default:return 16}default:return 16}}var Ri=null,Cd=null,Gs=null;function lf(){if(Gs)return Gs;var t,n=Cd,o=n.length,i,r="value"in Ri?Ri.value:Ri.textContent,s=r.length;for(t=0;t<o&&n[t]===r[t];t++);var l=o-t;for(i=1;i<=l&&n[o-i]===r[s-i];i++);return Gs=r.slice(t,1<i?1-i:void 0)}function Ys(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ls(){return!0}function bc(){return!1}function Co(t){function n(o,i,r,s,l){this._reactName=o,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(o=t[a],this[a]=o?o(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ls:bc,this.isPropagationStopped=bc,this}return Sn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),n}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_d=Co(Ar),ws=Sn({},Ar,{view:0,detail:0}),Wh=Co(ws),Xl,Kl,Nr,Tl=Sn({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Td,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nr&&(Nr&&t.type==="mousemove"?(Xl=t.screenX-Nr.screenX,Kl=t.screenY-Nr.screenY):Kl=Xl=0,Nr=t),Xl)},movementY:function(t){return"movementY"in t?t.movementY:Kl}}),vc=Co(Tl),Mh=Sn({},Tl,{dataTransfer:0}),Oh=Co(Mh),Ph=Sn({},ws,{relatedTarget:0}),Jl=Co(Ph),Nh=Sn({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),Dh=Co(Nh),Hh=Sn({},Ar,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$h=Co(Hh),Vh=Sn({},Ar,{data:0}),jc=Co(Vh),Uh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xh(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Yh[t])?!!n[t]:!1}function Td(){return Xh}var Kh=Sn({},ws,{key:function(t){if(t.key){var n=Uh[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ys(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Td,charCode:function(t){return t.type==="keypress"?Ys(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ys(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jh=Co(Kh),Qh=Sn({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sc=Co(Qh),Zh=Sn({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Td}),qh=Co(Zh),eu=Sn({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=Co(eu),nu=Sn({},Tl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ou=Co(nu),iu=[9,13,27,32],Rd=ci&&"CompositionEvent"in window,Qr=null;ci&&"documentMode"in document&&(Qr=document.documentMode);var ru=ci&&"TextEvent"in window&&!Qr,af=ci&&(!Rd||Qr&&8<Qr&&11>=Qr),wc=" ",kc=!1;function df(t,n){switch(t){case"keyup":return iu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cr=!1;function su(t,n){switch(t){case"compositionend":return cf(n);case"keypress":return n.which!==32?null:(kc=!0,wc);case"textInput":return t=n.data,t===wc&&kc?null:t;default:return null}}function lu(t,n){if(cr)return t==="compositionend"||!Rd&&df(t,n)?(t=lf(),Gs=Cd=Ri=null,cr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return af&&n.locale!=="ko"?null:n.data;default:return null}}var au={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!au[t.type]:n==="textarea"}function ff(t,n,o,i){D0(i),n=al(n,"onChange"),0<n.length&&(o=new _d("onChange","change",null,o,i),t.push({event:o,listeners:n}))}var Zr=null,cs=null;function du(t){Sf(t,0)}function Rl(t){var n=hr(t);if(A0(n))return t}function cu(t,n){if(t==="change")return n}var pf=!1;if(ci){var Ql;if(ci){var Zl="oninput"in document;if(!Zl){var _c=document.createElement("div");_c.setAttribute("oninput","return;"),Zl=typeof _c.oninput=="function"}Ql=Zl}else Ql=!1;pf=Ql&&(!document.documentMode||9<document.documentMode)}function Tc(){Zr&&(Zr.detachEvent("onpropertychange",hf),cs=Zr=null)}function hf(t){if(t.propertyName==="value"&&Rl(cs)){var n=[];ff(n,cs,t,vd(t)),U0(du,n)}}function fu(t,n,o){t==="focusin"?(Tc(),Zr=n,cs=o,Zr.attachEvent("onpropertychange",hf)):t==="focusout"&&Tc()}function pu(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rl(cs)}function hu(t,n){if(t==="click")return Rl(n)}function uu(t,n){if(t==="input"||t==="change")return Rl(n)}function gu(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Go=typeof Object.is=="function"?Object.is:gu;function fs(t,n){if(Go(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var o=Object.keys(t),i=Object.keys(n);if(o.length!==i.length)return!1;for(i=0;i<o.length;i++){var r=o[i];if(!ya.call(n,r)||!Go(t[r],n[r]))return!1}return!0}function Rc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zc(t,n){var o=Rc(t);t=0;for(var i;o;){if(o.nodeType===3){if(i=t+o.textContent.length,t<=n&&i>=n)return{node:o,offset:n-t};t=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Rc(o)}}function uf(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?uf(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function gf(){for(var t=window,n=tl();n instanceof t.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)t=n.contentWindow;else break;n=tl(t.document)}return n}function zd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function xu(t){var n=gf(),o=t.focusedElem,i=t.selectionRange;if(n!==o&&o&&o.ownerDocument&&uf(o.ownerDocument.documentElement,o)){if(i!==null&&zd(o)){if(n=i.start,t=i.end,t===void 0&&(t=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(t,o.value.length);else if(t=(n=o.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var r=o.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=zc(o,s);var l=zc(o,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(n),t.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),t.addRange(n)))}}for(n=[],t=o;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)t=n[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yu=ci&&"documentMode"in document&&11>=document.documentMode,fr=null,Wa=null,qr=null,Ma=!1;function Bc(t,n,o){var i=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ma||fr==null||fr!==tl(i)||(i=fr,"selectionStart"in i&&zd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),qr&&fs(qr,i)||(qr=i,i=al(Wa,"onSelect"),0<i.length&&(n=new _d("onSelect","select",null,n,o),t.push({event:n,listeners:i}),n.target=fr)))}function As(t,n){var o={};return o[t.toLowerCase()]=n.toLowerCase(),o["Webkit"+t]="webkit"+n,o["Moz"+t]="moz"+n,o}var pr={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionend:As("Transition","TransitionEnd")},ql={},xf={};ci&&(xf=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function zl(t){if(ql[t])return ql[t];if(!pr[t])return t;var n=pr[t],o;for(o in n)if(n.hasOwnProperty(o)&&o in xf)return ql[t]=n[o];return t}var yf=zl("animationend"),mf=zl("animationiteration"),bf=zl("animationstart"),vf=zl("transitionend"),jf=new Map,Ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,n){jf.set(t,n),ir(n,[t])}for(var ea=0;ea<Ic.length;ea++){var ta=Ic[ea],mu=ta.toLowerCase(),bu=ta[0].toUpperCase()+ta.slice(1);Ni(mu,"on"+bu)}Ni(yf,"onAnimationEnd");Ni(mf,"onAnimationIteration");Ni(bf,"onAnimationStart");Ni("dblclick","onDoubleClick");Ni("focusin","onFocus");Ni("focusout","onBlur");Ni(vf,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Ec(t,n,o){var i=t.type||"unknown-event";t.currentTarget=o,mh(i,n,void 0,t),t.currentTarget=null}function Sf(t,n){n=(n&4)!==0;for(var o=0;o<t.length;o++){var i=t[o],r=i.event;i=i.listeners;e:{var s=void 0;if(n)for(var l=i.length-1;0<=l;l--){var a=i[l],d=a.instance,p=a.currentTarget;if(a=a.listener,d!==s&&r.isPropagationStopped())break e;Ec(r,a,p),s=d}else for(l=0;l<i.length;l++){if(a=i[l],d=a.instance,p=a.currentTarget,a=a.listener,d!==s&&r.isPropagationStopped())break e;Ec(r,a,p),s=d}}}if(ol)throw t=Ea,ol=!1,Ea=null,t}function gn(t,n){var o=n[Ha];o===void 0&&(o=n[Ha]=new Set);var i=t+"__bubble";o.has(i)||(wf(n,t,2,!1),o.add(i))}function na(t,n,o){var i=0;n&&(i|=4),wf(o,t,i,n)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function ps(t){if(!t[Fs]){t[Fs]=!0,z0.forEach(function(o){o!=="selectionchange"&&(vu.has(o)||na(o,!1,t),na(o,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Fs]||(n[Fs]=!0,na("selectionchange",!1,n))}}function wf(t,n,o,i){switch(sf(n)){case 1:var r=Ah;break;case 4:r=Fh;break;default:r=kd}o=r.bind(null,n,o,t),r=void 0,!Ia||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(n,o,{capture:!0,passive:r}):t.addEventListener(n,o,!0):r!==void 0?t.addEventListener(n,o,{passive:r}):t.addEventListener(n,o,!1)}function oa(t,n,o,i,r){var s=i;if(!(n&1)&&!(n&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;a!==null;){if(l=Xi(a),l===null)return;if(d=l.tag,d===5||d===6){i=s=l;continue e}a=a.parentNode}}i=i.return}U0(function(){var p=s,w=vd(o),y=[];e:{var u=jf.get(t);if(u!==void 0){var W=_d,L=t;switch(t){case"keypress":if(Ys(o)===0)break e;case"keydown":case"keyup":W=Jh;break;case"focusin":L="focus",W=Jl;break;case"focusout":L="blur",W=Jl;break;case"beforeblur":case"afterblur":W=Jl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=vc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=qh;break;case yf:case mf:case bf:W=Dh;break;case vf:W=tu;break;case"scroll":W=Wh;break;case"wheel":W=ou;break;case"copy":case"cut":case"paste":W=$h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Sc}var Z=(n&4)!==0,Ge=!Z&&t==="scroll",f=Z?u!==null?u+"Capture":null:u;Z=[];for(var m=p,C;m!==null;){C=m;var c=C.stateNode;if(C.tag===5&&c!==null&&(C=c,f!==null&&(c=ss(m,f),c!=null&&Z.push(hs(m,c,C)))),Ge)break;m=m.return}0<Z.length&&(u=new W(u,L,null,o,w),y.push({event:u,listeners:Z}))}}if(!(n&7)){e:{if(u=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",u&&o!==za&&(L=o.relatedTarget||o.fromElement)&&(Xi(L)||L[fi]))break e;if((W||u)&&(u=w.window===w?w:(u=w.ownerDocument)?u.defaultView||u.parentWindow:window,W?(L=o.relatedTarget||o.toElement,W=p,L=L?Xi(L):null,L!==null&&(Ge=rr(L),L!==Ge||L.tag!==5&&L.tag!==6)&&(L=null)):(W=null,L=p),W!==L)){if(Z=vc,c="onMouseLeave",f="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(Z=Sc,c="onPointerLeave",f="onPointerEnter",m="pointer"),Ge=W==null?u:hr(W),C=L==null?u:hr(L),u=new Z(c,m+"leave",W,o,w),u.target=Ge,u.relatedTarget=C,c=null,Xi(w)===p&&(Z=new Z(f,m+"enter",L,o,w),Z.target=C,Z.relatedTarget=Ge,c=Z),Ge=c,W&&L)t:{for(Z=W,f=L,m=0,C=Z;C;C=lr(C))m++;for(C=0,c=f;c;c=lr(c))C++;for(;0<m-C;)Z=lr(Z),m--;for(;0<C-m;)f=lr(f),C--;for(;m--;){if(Z===f||f!==null&&Z===f.alternate)break t;Z=lr(Z),f=lr(f)}Z=null}else Z=null;W!==null&&Lc(y,u,W,Z,!1),L!==null&&Ge!==null&&Lc(y,Ge,L,Z,!0)}}e:{if(u=p?hr(p):window,W=u.nodeName&&u.nodeName.toLowerCase(),W==="select"||W==="input"&&u.type==="file")var F=cu;else if(Cc(u))if(pf)F=uu;else{F=pu;var S=fu}else(W=u.nodeName)&&W.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(F=hu);if(F&&(F=F(t,p))){ff(y,F,o,w);break e}S&&S(t,u,p),t==="focusout"&&(S=u._wrapperState)&&S.controlled&&u.type==="number"&&ka(u,"number",u.value)}switch(S=p?hr(p):window,t){case"focusin":(Cc(S)||S.contentEditable==="true")&&(fr=S,Wa=p,qr=null);break;case"focusout":qr=Wa=fr=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,Bc(y,o,w);break;case"selectionchange":if(yu)break;case"keydown":case"keyup":Bc(y,o,w)}var R;if(Rd)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else cr?df(t,o)&&(I="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(I="onCompositionStart");I&&(af&&o.locale!=="ko"&&(cr||I!=="onCompositionStart"?I==="onCompositionEnd"&&cr&&(R=lf()):(Ri=w,Cd="value"in Ri?Ri.value:Ri.textContent,cr=!0)),S=al(p,I),0<S.length&&(I=new jc(I,t,null,o,w),y.push({event:I,listeners:S}),R?I.data=R:(R=cf(o),R!==null&&(I.data=R)))),(R=ru?su(t,o):lu(t,o))&&(p=al(p,"onBeforeInput"),0<p.length&&(w=new jc("onBeforeInput","beforeinput",null,o,w),y.push({event:w,listeners:p}),w.data=R))}Sf(y,n)})}function hs(t,n,o){return{instance:t,listener:n,currentTarget:o}}function al(t,n){for(var o=n+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ss(t,o),s!=null&&i.unshift(hs(t,s,r)),s=ss(t,n),s!=null&&i.push(hs(t,s,r))),t=t.return}return i}function lr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lc(t,n,o,i,r){for(var s=n._reactName,l=[];o!==null&&o!==i;){var a=o,d=a.alternate,p=a.stateNode;if(d!==null&&d===i)break;a.tag===5&&p!==null&&(a=p,r?(d=ss(o,s),d!=null&&l.unshift(hs(o,d,a))):r||(d=ss(o,s),d!=null&&l.push(hs(o,d,a)))),o=o.return}l.length!==0&&t.push({event:n,listeners:l})}var ju=/\r\n?/g,Su=/\u0000|\uFFFD/g;function Ac(t){return(typeof t=="string"?t:""+t).replace(ju,`
`).replace(Su,"")}function Ws(t,n,o){if(n=Ac(n),Ac(t)!==n&&o)throw Error(Fe(425))}function dl(){}var Oa=null,Pa=null;function Na(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Da=typeof setTimeout=="function"?setTimeout:void 0,wu=typeof clearTimeout=="function"?clearTimeout:void 0,Fc=typeof Promise=="function"?Promise:void 0,ku=typeof queueMicrotask=="function"?queueMicrotask:typeof Fc<"u"?function(t){return Fc.resolve(null).then(t).catch(Cu)}:Da;function Cu(t){setTimeout(function(){throw t})}function ia(t,n){var o=n,i=0;do{var r=o.nextSibling;if(t.removeChild(o),r&&r.nodeType===8)if(o=r.data,o==="/$"){if(i===0){t.removeChild(r),ds(n);return}i--}else o!=="$"&&o!=="$?"&&o!=="$!"||i++;o=r}while(o);ds(n)}function Li(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Wc(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return t;n--}else o==="/$"&&n++}t=t.previousSibling}return null}var Fr=Math.random().toString(36).slice(2),qo="__reactFiber$"+Fr,us="__reactProps$"+Fr,fi="__reactContainer$"+Fr,Ha="__reactEvents$"+Fr,_u="__reactListeners$"+Fr,Tu="__reactHandles$"+Fr;function Xi(t){var n=t[qo];if(n)return n;for(var o=t.parentNode;o;){if(n=o[fi]||o[qo]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(t=Wc(t);t!==null;){if(o=t[qo])return o;t=Wc(t)}return n}t=o,o=t.parentNode}return null}function ks(t){return t=t[qo]||t[fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Bl(t){return t[us]||null}var $a=[],ur=-1;function Di(t){return{current:t}}function xn(t){0>ur||(t.current=$a[ur],$a[ur]=null,ur--)}function hn(t,n){ur++,$a[ur]=t.current,t.current=n}var Pi={},Kn=Di(Pi),xo=Di(!1),qi=Pi;function Tr(t,n){var o=t.type.contextTypes;if(!o)return Pi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in o)r[s]=n[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=r),r}function yo(t){return t=t.childContextTypes,t!=null}function cl(){xn(xo),xn(Kn)}function Mc(t,n,o){if(Kn.current!==Pi)throw Error(Fe(168));hn(Kn,n),hn(xo,o)}function kf(t,n,o){var i=t.stateNode;if(n=n.childContextTypes,typeof i.getChildContext!="function")return o;i=i.getChildContext();for(var r in i)if(!(r in n))throw Error(Fe(108,fh(t)||"Unknown",r));return Sn({},o,i)}function fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,qi=Kn.current,hn(Kn,t),hn(xo,xo.current),!0}function Oc(t,n,o){var i=t.stateNode;if(!i)throw Error(Fe(169));o?(t=kf(t,n,qi),i.__reactInternalMemoizedMergedChildContext=t,xn(xo),xn(Kn),hn(Kn,t)):xn(xo),hn(xo,o)}var si=null,Il=!1,ra=!1;function Cf(t){si===null?si=[t]:si.push(t)}function Ru(t){Il=!0,Cf(t)}function Hi(){if(!ra&&si!==null){ra=!0;var t=0,n=an;try{var o=si;for(an=1;t<o.length;t++){var i=o[t];do i=i(!0);while(i!==null)}si=null,Il=!1}catch(r){throw si!==null&&(si=si.slice(t+1)),K0(jd,Hi),r}finally{an=n,ra=!1}}return null}var gr=[],xr=0,pl=null,hl=0,Bo=[],Io=0,er=null,li=1,ai="";function Gi(t,n){gr[xr++]=hl,gr[xr++]=pl,pl=t,hl=n}function _f(t,n,o){Bo[Io++]=li,Bo[Io++]=ai,Bo[Io++]=er,er=t;var i=li;t=ai;var r=32-Vo(i)-1;i&=~(1<<r),o+=1;var s=32-Vo(n)+r;if(30<s){var l=r-r%5;s=(i&(1<<l)-1).toString(32),i>>=l,r-=l,li=1<<32-Vo(n)+r|o<<r|i,ai=s+t}else li=1<<s|o<<r|i,ai=t}function Bd(t){t.return!==null&&(Gi(t,1),_f(t,1,0))}function Id(t){for(;t===pl;)pl=gr[--xr],gr[xr]=null,hl=gr[--xr],gr[xr]=null;for(;t===er;)er=Bo[--Io],Bo[Io]=null,ai=Bo[--Io],Bo[Io]=null,li=Bo[--Io],Bo[Io]=null}var So=null,jo=null,yn=!1,$o=null;function Tf(t,n){var o=Eo(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=t,n=t.deletions,n===null?(t.deletions=[o],t.flags|=16):n.push(o)}function Pc(t,n){switch(t.tag){case 5:var o=t.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,So=t,jo=Li(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,So=t,jo=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=er!==null?{id:li,overflow:ai}:null,t.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=Eo(18,null,null,0),o.stateNode=n,o.return=t,t.child=o,So=t,jo=null,!0):!1;default:return!1}}function Va(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ua(t){if(yn){var n=jo;if(n){var o=n;if(!Pc(t,n)){if(Va(t))throw Error(Fe(418));n=Li(o.nextSibling);var i=So;n&&Pc(t,n)?Tf(i,o):(t.flags=t.flags&-4097|2,yn=!1,So=t)}}else{if(Va(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,yn=!1,So=t}}}function Nc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;So=t}function Ms(t){if(t!==So)return!1;if(!yn)return Nc(t),yn=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Na(t.type,t.memoizedProps)),n&&(n=jo)){if(Va(t))throw Rf(),Error(Fe(418));for(;n;)Tf(t,n),n=Li(n.nextSibling)}if(Nc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(n===0){jo=Li(t.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}t=t.nextSibling}jo=null}}else jo=So?Li(t.stateNode.nextSibling):null;return!0}function Rf(){for(var t=jo;t;)t=Li(t.nextSibling)}function Rr(){jo=So=null,yn=!1}function Ed(t){$o===null?$o=[t]:$o.push(t)}var zu=ui.ReactCurrentBatchConfig;function Dr(t,n,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(Fe(309));var i=o.stateNode}if(!i)throw Error(Fe(147,t));var r=i,s=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===s?n.ref:(n=function(l){var a=r.refs;l===null?delete a[s]:a[s]=l},n._stringRef=s,n)}if(typeof t!="string")throw Error(Fe(284));if(!o._owner)throw Error(Fe(290,t))}return t}function Os(t,n){throw t=Object.prototype.toString.call(n),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Dc(t){var n=t._init;return n(t._payload)}function zf(t){function n(f,m){if(t){var C=f.deletions;C===null?(f.deletions=[m],f.flags|=16):C.push(m)}}function o(f,m){if(!t)return null;for(;m!==null;)n(f,m),m=m.sibling;return null}function i(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function r(f,m){return f=Mi(f,m),f.index=0,f.sibling=null,f}function s(f,m,C){return f.index=C,t?(C=f.alternate,C!==null?(C=C.index,C<m?(f.flags|=2,m):C):(f.flags|=2,m)):(f.flags|=1048576,m)}function l(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,m,C,c){return m===null||m.tag!==6?(m=pa(C,f.mode,c),m.return=f,m):(m=r(m,C),m.return=f,m)}function d(f,m,C,c){var F=C.type;return F===dr?w(f,m,C.props.children,c,C.key):m!==null&&(m.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ki&&Dc(F)===m.type)?(c=r(m,C.props),c.ref=Dr(f,m,C),c.return=f,c):(c=el(C.type,C.key,C.props,null,f.mode,c),c.ref=Dr(f,m,C),c.return=f,c)}function p(f,m,C,c){return m===null||m.tag!==4||m.stateNode.containerInfo!==C.containerInfo||m.stateNode.implementation!==C.implementation?(m=ha(C,f.mode,c),m.return=f,m):(m=r(m,C.children||[]),m.return=f,m)}function w(f,m,C,c,F){return m===null||m.tag!==7?(m=Zi(C,f.mode,c,F),m.return=f,m):(m=r(m,C),m.return=f,m)}function y(f,m,C){if(typeof m=="string"&&m!==""||typeof m=="number")return m=pa(""+m,f.mode,C),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ts:return C=el(m.type,m.key,m.props,null,f.mode,C),C.ref=Dr(f,null,m),C.return=f,C;case ar:return m=ha(m,f.mode,C),m.return=f,m;case ki:var c=m._init;return y(f,c(m._payload),C)}if(Gr(m)||Wr(m))return m=Zi(m,f.mode,C,null),m.return=f,m;Os(f,m)}return null}function u(f,m,C,c){var F=m!==null?m.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return F!==null?null:a(f,m,""+C,c);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ts:return C.key===F?d(f,m,C,c):null;case ar:return C.key===F?p(f,m,C,c):null;case ki:return F=C._init,u(f,m,F(C._payload),c)}if(Gr(C)||Wr(C))return F!==null?null:w(f,m,C,c,null);Os(f,C)}return null}function W(f,m,C,c,F){if(typeof c=="string"&&c!==""||typeof c=="number")return f=f.get(C)||null,a(m,f,""+c,F);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Ts:return f=f.get(c.key===null?C:c.key)||null,d(m,f,c,F);case ar:return f=f.get(c.key===null?C:c.key)||null,p(m,f,c,F);case ki:var S=c._init;return W(f,m,C,S(c._payload),F)}if(Gr(c)||Wr(c))return f=f.get(C)||null,w(m,f,c,F,null);Os(m,c)}return null}function L(f,m,C,c){for(var F=null,S=null,R=m,I=m=0,de=null;R!==null&&I<C.length;I++){R.index>I?(de=R,R=null):de=R.sibling;var G=u(f,R,C[I],c);if(G===null){R===null&&(R=de);break}t&&R&&G.alternate===null&&n(f,R),m=s(G,m,I),S===null?F=G:S.sibling=G,S=G,R=de}if(I===C.length)return o(f,R),yn&&Gi(f,I),F;if(R===null){for(;I<C.length;I++)R=y(f,C[I],c),R!==null&&(m=s(R,m,I),S===null?F=R:S.sibling=R,S=R);return yn&&Gi(f,I),F}for(R=i(f,R);I<C.length;I++)de=W(R,f,I,C[I],c),de!==null&&(t&&de.alternate!==null&&R.delete(de.key===null?I:de.key),m=s(de,m,I),S===null?F=de:S.sibling=de,S=de);return t&&R.forEach(function(v){return n(f,v)}),yn&&Gi(f,I),F}function Z(f,m,C,c){var F=Wr(C);if(typeof F!="function")throw Error(Fe(150));if(C=F.call(C),C==null)throw Error(Fe(151));for(var S=F=null,R=m,I=m=0,de=null,G=C.next();R!==null&&!G.done;I++,G=C.next()){R.index>I?(de=R,R=null):de=R.sibling;var v=u(f,R,G.value,c);if(v===null){R===null&&(R=de);break}t&&R&&v.alternate===null&&n(f,R),m=s(v,m,I),S===null?F=v:S.sibling=v,S=v,R=de}if(G.done)return o(f,R),yn&&Gi(f,I),F;if(R===null){for(;!G.done;I++,G=C.next())G=y(f,G.value,c),G!==null&&(m=s(G,m,I),S===null?F=G:S.sibling=G,S=G);return yn&&Gi(f,I),F}for(R=i(f,R);!G.done;I++,G=C.next())G=W(R,f,I,G.value,c),G!==null&&(t&&G.alternate!==null&&R.delete(G.key===null?I:G.key),m=s(G,m,I),S===null?F=G:S.sibling=G,S=G);return t&&R.forEach(function(h){return n(f,h)}),yn&&Gi(f,I),F}function Ge(f,m,C,c){if(typeof C=="object"&&C!==null&&C.type===dr&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Ts:e:{for(var F=C.key,S=m;S!==null;){if(S.key===F){if(F=C.type,F===dr){if(S.tag===7){o(f,S.sibling),m=r(S,C.props.children),m.return=f,f=m;break e}}else if(S.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ki&&Dc(F)===S.type){o(f,S.sibling),m=r(S,C.props),m.ref=Dr(f,S,C),m.return=f,f=m;break e}o(f,S);break}else n(f,S);S=S.sibling}C.type===dr?(m=Zi(C.props.children,f.mode,c,C.key),m.return=f,f=m):(c=el(C.type,C.key,C.props,null,f.mode,c),c.ref=Dr(f,m,C),c.return=f,f=c)}return l(f);case ar:e:{for(S=C.key;m!==null;){if(m.key===S)if(m.tag===4&&m.stateNode.containerInfo===C.containerInfo&&m.stateNode.implementation===C.implementation){o(f,m.sibling),m=r(m,C.children||[]),m.return=f,f=m;break e}else{o(f,m);break}else n(f,m);m=m.sibling}m=ha(C,f.mode,c),m.return=f,f=m}return l(f);case ki:return S=C._init,Ge(f,m,S(C._payload),c)}if(Gr(C))return L(f,m,C,c);if(Wr(C))return Z(f,m,C,c);Os(f,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,m!==null&&m.tag===6?(o(f,m.sibling),m=r(m,C),m.return=f,f=m):(o(f,m),m=pa(C,f.mode,c),m.return=f,f=m),l(f)):o(f,m)}return Ge}var zr=zf(!0),Bf=zf(!1),ul=Di(null),gl=null,yr=null,Ld=null;function Ad(){Ld=yr=gl=null}function Fd(t){var n=ul.current;xn(ul),t._currentValue=n}function Ga(t,n,o){for(;t!==null;){var i=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),t===o)break;t=t.return}}function kr(t,n){gl=t,Ld=yr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(go=!0),t.firstContext=null)}function Ao(t){var n=t._currentValue;if(Ld!==t)if(t={context:t,memoizedValue:n,next:null},yr===null){if(gl===null)throw Error(Fe(308));yr=t,gl.dependencies={lanes:0,firstContext:t}}else yr=yr.next=t;return n}var Ki=null;function Wd(t){Ki===null?Ki=[t]:Ki.push(t)}function If(t,n,o,i){var r=n.interleaved;return r===null?(o.next=o,Wd(n)):(o.next=r.next,r.next=o),n.interleaved=o,pi(t,i)}function pi(t,n){t.lanes|=n;var o=t.alternate;for(o!==null&&(o.lanes|=n),o=t,t=t.return;t!==null;)t.childLanes|=n,o=t.alternate,o!==null&&(o.childLanes|=n),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ci=!1;function Md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ef(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function di(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Ai(t,n,o){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,tn&2){var r=i.pending;return r===null?n.next=n:(n.next=r.next,r.next=n),i.pending=n,pi(t,o)}return r=i.interleaved,r===null?(n.next=n,Wd(i)):(n.next=r.next,r.next=n),i.interleaved=n,pi(t,o)}function Xs(t,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var i=n.lanes;i&=t.pendingLanes,o|=i,n.lanes=o,Sd(t,o)}}function Hc(t,n){var o=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,o===i)){var r=null,s=null;if(o=o.firstBaseUpdate,o!==null){do{var l={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};s===null?r=s=l:s=s.next=l,o=o.next}while(o!==null);s===null?r=s=n:s=s.next=n}else r=s=n;o={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=n:t.next=n,o.lastBaseUpdate=n}function xl(t,n,o,i){var r=t.updateQueue;Ci=!1;var s=r.firstBaseUpdate,l=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var d=a,p=d.next;d.next=null,l===null?s=p:l.next=p,l=d;var w=t.alternate;w!==null&&(w=w.updateQueue,a=w.lastBaseUpdate,a!==l&&(a===null?w.firstBaseUpdate=p:a.next=p,w.lastBaseUpdate=d))}if(s!==null){var y=r.baseState;l=0,w=p=d=null,a=s;do{var u=a.lane,W=a.eventTime;if((i&u)===u){w!==null&&(w=w.next={eventTime:W,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var L=t,Z=a;switch(u=n,W=o,Z.tag){case 1:if(L=Z.payload,typeof L=="function"){y=L.call(W,y,u);break e}y=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=Z.payload,u=typeof L=="function"?L.call(W,y,u):L,u==null)break e;y=Sn({},y,u);break e;case 2:Ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,u=r.effects,u===null?r.effects=[a]:u.push(a))}else W={eventTime:W,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},w===null?(p=w=W,d=y):w=w.next=W,l|=u;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;u=a,a=u.next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}while(!0);if(w===null&&(d=y),r.baseState=d,r.firstBaseUpdate=p,r.lastBaseUpdate=w,n=r.shared.interleaved,n!==null){r=n;do l|=r.lane,r=r.next;while(r!==n)}else s===null&&(r.shared.lanes=0);nr|=l,t.lanes=l,t.memoizedState=y}}function $c(t,n,o){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var i=t[n],r=i.callback;if(r!==null){if(i.callback=null,i=o,typeof r!="function")throw Error(Fe(191,r));r.call(i)}}}var Cs={},ti=Di(Cs),gs=Di(Cs),xs=Di(Cs);function Ji(t){if(t===Cs)throw Error(Fe(174));return t}function Od(t,n){switch(hn(xs,n),hn(gs,t),hn(ti,Cs),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:_a(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=_a(n,t)}xn(ti),hn(ti,n)}function Br(){xn(ti),xn(gs),xn(xs)}function Lf(t){Ji(xs.current);var n=Ji(ti.current),o=_a(n,t.type);n!==o&&(hn(gs,t),hn(ti,o))}function Pd(t){gs.current===t&&(xn(ti),xn(gs))}var vn=Di(0);function yl(t){for(var n=t;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var sa=[];function Nd(){for(var t=0;t<sa.length;t++)sa[t]._workInProgressVersionPrimary=null;sa.length=0}var Ks=ui.ReactCurrentDispatcher,la=ui.ReactCurrentBatchConfig,tr=0,jn=null,Ln=null,Mn=null,ml=!1,es=!1,ys=0,Bu=0;function Gn(){throw Error(Fe(321))}function Dd(t,n){if(n===null)return!1;for(var o=0;o<n.length&&o<t.length;o++)if(!Go(t[o],n[o]))return!1;return!0}function Hd(t,n,o,i,r,s){if(tr=s,jn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ks.current=t===null||t.memoizedState===null?Au:Fu,t=o(i,r),es){s=0;do{if(es=!1,ys=0,25<=s)throw Error(Fe(301));s+=1,Mn=Ln=null,n.updateQueue=null,Ks.current=Wu,t=o(i,r)}while(es)}if(Ks.current=bl,n=Ln!==null&&Ln.next!==null,tr=0,Mn=Ln=jn=null,ml=!1,n)throw Error(Fe(300));return t}function $d(){var t=ys!==0;return ys=0,t}function Zo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?jn.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function Fo(){if(Ln===null){var t=jn.alternate;t=t!==null?t.memoizedState:null}else t=Ln.next;var n=Mn===null?jn.memoizedState:Mn.next;if(n!==null)Mn=n,Ln=t;else{if(t===null)throw Error(Fe(310));Ln=t,t={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},Mn===null?jn.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function ms(t,n){return typeof n=="function"?n(t):n}function aa(t){var n=Fo(),o=n.queue;if(o===null)throw Error(Fe(311));o.lastRenderedReducer=t;var i=Ln,r=i.baseQueue,s=o.pending;if(s!==null){if(r!==null){var l=r.next;r.next=s.next,s.next=l}i.baseQueue=r=s,o.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=l=null,d=null,p=s;do{var w=p.lane;if((tr&w)===w)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var y={lane:w,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(a=d=y,l=i):d=d.next=y,jn.lanes|=w,nr|=w}p=p.next}while(p!==null&&p!==s);d===null?l=i:d.next=a,Go(i,n.memoizedState)||(go=!0),n.memoizedState=i,n.baseState=l,n.baseQueue=d,o.lastRenderedState=i}if(t=o.interleaved,t!==null){r=t;do s=r.lane,jn.lanes|=s,nr|=s,r=r.next;while(r!==t)}else r===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function da(t){var n=Fo(),o=n.queue;if(o===null)throw Error(Fe(311));o.lastRenderedReducer=t;var i=o.dispatch,r=o.pending,s=n.memoizedState;if(r!==null){o.pending=null;var l=r=r.next;do s=t(s,l.action),l=l.next;while(l!==r);Go(s,n.memoizedState)||(go=!0),n.memoizedState=s,n.baseQueue===null&&(n.baseState=s),o.lastRenderedState=s}return[s,i]}function Af(){}function Ff(t,n){var o=jn,i=Fo(),r=n(),s=!Go(i.memoizedState,r);if(s&&(i.memoizedState=r,go=!0),i=i.queue,Vd(Of.bind(null,o,i,t),[t]),i.getSnapshot!==n||s||Mn!==null&&Mn.memoizedState.tag&1){if(o.flags|=2048,bs(9,Mf.bind(null,o,i,r,n),void 0,null),On===null)throw Error(Fe(349));tr&30||Wf(o,n,r)}return r}function Wf(t,n,o){t.flags|=16384,t={getSnapshot:n,value:o},n=jn.updateQueue,n===null?(n={lastEffect:null,stores:null},jn.updateQueue=n,n.stores=[t]):(o=n.stores,o===null?n.stores=[t]:o.push(t))}function Mf(t,n,o,i){n.value=o,n.getSnapshot=i,Pf(n)&&Nf(t)}function Of(t,n,o){return o(function(){Pf(n)&&Nf(t)})}function Pf(t){var n=t.getSnapshot;t=t.value;try{var o=n();return!Go(t,o)}catch{return!0}}function Nf(t){var n=pi(t,1);n!==null&&Uo(n,t,1,-1)}function Vc(t){var n=Zo();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},n.queue=t,t=t.dispatch=Lu.bind(null,jn,t),[n.memoizedState,t]}function bs(t,n,o,i){return t={tag:t,create:n,destroy:o,deps:i,next:null},n=jn.updateQueue,n===null?(n={lastEffect:null,stores:null},jn.updateQueue=n,n.lastEffect=t.next=t):(o=n.lastEffect,o===null?n.lastEffect=t.next=t:(i=o.next,o.next=t,t.next=i,n.lastEffect=t)),t}function Df(){return Fo().memoizedState}function Js(t,n,o,i){var r=Zo();jn.flags|=t,r.memoizedState=bs(1|n,o,void 0,i===void 0?null:i)}function El(t,n,o,i){var r=Fo();i=i===void 0?null:i;var s=void 0;if(Ln!==null){var l=Ln.memoizedState;if(s=l.destroy,i!==null&&Dd(i,l.deps)){r.memoizedState=bs(n,o,s,i);return}}jn.flags|=t,r.memoizedState=bs(1|n,o,s,i)}function Uc(t,n){return Js(8390656,8,t,n)}function Vd(t,n){return El(2048,8,t,n)}function Hf(t,n){return El(4,2,t,n)}function $f(t,n){return El(4,4,t,n)}function Vf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Uf(t,n,o){return o=o!=null?o.concat([t]):null,El(4,4,Vf.bind(null,n,t),o)}function Ud(){}function Gf(t,n){var o=Fo();n=n===void 0?null:n;var i=o.memoizedState;return i!==null&&n!==null&&Dd(n,i[1])?i[0]:(o.memoizedState=[t,n],t)}function Yf(t,n){var o=Fo();n=n===void 0?null:n;var i=o.memoizedState;return i!==null&&n!==null&&Dd(n,i[1])?i[0]:(t=t(),o.memoizedState=[t,n],t)}function Xf(t,n,o){return tr&21?(Go(o,n)||(o=Z0(),jn.lanes|=o,nr|=o,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,go=!0),t.memoizedState=o)}function Iu(t,n){var o=an;an=o!==0&&4>o?o:4,t(!0);var i=la.transition;la.transition={};try{t(!1),n()}finally{an=o,la.transition=i}}function Kf(){return Fo().memoizedState}function Eu(t,n,o){var i=Wi(t);if(o={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null},Jf(t))Qf(n,o);else if(o=If(t,n,o,i),o!==null){var r=no();Uo(o,t,i,r),Zf(o,n,i)}}function Lu(t,n,o){var i=Wi(t),r={lane:i,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jf(t))Qf(n,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=n.lastRenderedReducer,s!==null))try{var l=n.lastRenderedState,a=s(l,o);if(r.hasEagerState=!0,r.eagerState=a,Go(a,l)){var d=n.interleaved;d===null?(r.next=r,Wd(n)):(r.next=d.next,d.next=r),n.interleaved=r;return}}catch{}finally{}o=If(t,n,r,i),o!==null&&(r=no(),Uo(o,t,i,r),Zf(o,n,i))}}function Jf(t){var n=t.alternate;return t===jn||n!==null&&n===jn}function Qf(t,n){es=ml=!0;var o=t.pending;o===null?n.next=n:(n.next=o.next,o.next=n),t.pending=n}function Zf(t,n,o){if(o&4194240){var i=n.lanes;i&=t.pendingLanes,o|=i,n.lanes=o,Sd(t,o)}}var bl={readContext:Ao,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},Au={readContext:Ao,useCallback:function(t,n){return Zo().memoizedState=[t,n===void 0?null:n],t},useContext:Ao,useEffect:Uc,useImperativeHandle:function(t,n,o){return o=o!=null?o.concat([t]):null,Js(4194308,4,Vf.bind(null,n,t),o)},useLayoutEffect:function(t,n){return Js(4194308,4,t,n)},useInsertionEffect:function(t,n){return Js(4,2,t,n)},useMemo:function(t,n){var o=Zo();return n=n===void 0?null:n,t=t(),o.memoizedState=[t,n],t},useReducer:function(t,n,o){var i=Zo();return n=o!==void 0?o(n):n,i.memoizedState=i.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},i.queue=t,t=t.dispatch=Eu.bind(null,jn,t),[i.memoizedState,t]},useRef:function(t){var n=Zo();return t={current:t},n.memoizedState=t},useState:Vc,useDebugValue:Ud,useDeferredValue:function(t){return Zo().memoizedState=t},useTransition:function(){var t=Vc(!1),n=t[0];return t=Iu.bind(null,t[1]),Zo().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,o){var i=jn,r=Zo();if(yn){if(o===void 0)throw Error(Fe(407));o=o()}else{if(o=n(),On===null)throw Error(Fe(349));tr&30||Wf(i,n,o)}r.memoizedState=o;var s={value:o,getSnapshot:n};return r.queue=s,Uc(Of.bind(null,i,s,t),[t]),i.flags|=2048,bs(9,Mf.bind(null,i,s,o,n),void 0,null),o},useId:function(){var t=Zo(),n=On.identifierPrefix;if(yn){var o=ai,i=li;o=(i&~(1<<32-Vo(i)-1)).toString(32)+o,n=":"+n+"R"+o,o=ys++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=Bu++,n=":"+n+"r"+o.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Fu={readContext:Ao,useCallback:Gf,useContext:Ao,useEffect:Vd,useImperativeHandle:Uf,useInsertionEffect:Hf,useLayoutEffect:$f,useMemo:Yf,useReducer:aa,useRef:Df,useState:function(){return aa(ms)},useDebugValue:Ud,useDeferredValue:function(t){var n=Fo();return Xf(n,Ln.memoizedState,t)},useTransition:function(){var t=aa(ms)[0],n=Fo().memoizedState;return[t,n]},useMutableSource:Af,useSyncExternalStore:Ff,useId:Kf,unstable_isNewReconciler:!1},Wu={readContext:Ao,useCallback:Gf,useContext:Ao,useEffect:Vd,useImperativeHandle:Uf,useInsertionEffect:Hf,useLayoutEffect:$f,useMemo:Yf,useReducer:da,useRef:Df,useState:function(){return da(ms)},useDebugValue:Ud,useDeferredValue:function(t){var n=Fo();return Ln===null?n.memoizedState=t:Xf(n,Ln.memoizedState,t)},useTransition:function(){var t=da(ms)[0],n=Fo().memoizedState;return[t,n]},useMutableSource:Af,useSyncExternalStore:Ff,useId:Kf,unstable_isNewReconciler:!1};function Do(t,n){if(t&&t.defaultProps){n=Sn({},n),t=t.defaultProps;for(var o in t)n[o]===void 0&&(n[o]=t[o]);return n}return n}function Ya(t,n,o,i){n=t.memoizedState,o=o(i,n),o=o==null?n:Sn({},n,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var Ll={isMounted:function(t){return(t=t._reactInternals)?rr(t)===t:!1},enqueueSetState:function(t,n,o){t=t._reactInternals;var i=no(),r=Wi(t),s=di(i,r);s.payload=n,o!=null&&(s.callback=o),n=Ai(t,s,r),n!==null&&(Uo(n,t,r,i),Xs(n,t,r))},enqueueReplaceState:function(t,n,o){t=t._reactInternals;var i=no(),r=Wi(t),s=di(i,r);s.tag=1,s.payload=n,o!=null&&(s.callback=o),n=Ai(t,s,r),n!==null&&(Uo(n,t,r,i),Xs(n,t,r))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var o=no(),i=Wi(t),r=di(o,i);r.tag=2,n!=null&&(r.callback=n),n=Ai(t,r,i),n!==null&&(Uo(n,t,i,o),Xs(n,t,i))}};function Gc(t,n,o,i,r,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,l):n.prototype&&n.prototype.isPureReactComponent?!fs(o,i)||!fs(r,s):!0}function qf(t,n,o){var i=!1,r=Pi,s=n.contextType;return typeof s=="object"&&s!==null?s=Ao(s):(r=yo(n)?qi:Kn.current,i=n.contextTypes,s=(i=i!=null)?Tr(t,r):Pi),n=new n(o,s),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Ll,t.stateNode=n,n._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),n}function Yc(t,n,o,i){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,i),n.state!==t&&Ll.enqueueReplaceState(n,n.state,null)}function Xa(t,n,o,i){var r=t.stateNode;r.props=o,r.state=t.memoizedState,r.refs={},Md(t);var s=n.contextType;typeof s=="object"&&s!==null?r.context=Ao(s):(s=yo(n)?qi:Kn.current,r.context=Tr(t,s)),r.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Ya(t,n,s,o),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(n=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),n!==r.state&&Ll.enqueueReplaceState(r,r.state,null),xl(t,o,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ir(t,n){try{var o="",i=n;do o+=ch(i),i=i.return;while(i);var r=o}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:n,stack:r,digest:null}}function ca(t,n,o){return{value:t,source:null,stack:o??null,digest:n??null}}function Ka(t,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var Mu=typeof WeakMap=="function"?WeakMap:Map;function ep(t,n,o){o=di(-1,o),o.tag=3,o.payload={element:null};var i=n.value;return o.callback=function(){jl||(jl=!0,rd=i),Ka(t,n)},o}function tp(t,n,o){o=di(-1,o),o.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=n.value;o.payload=function(){return i(r)},o.callback=function(){Ka(t,n)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(o.callback=function(){Ka(t,n),typeof i!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),o}function Xc(t,n,o){var i=t.pingCache;if(i===null){i=t.pingCache=new Mu;var r=new Set;i.set(n,r)}else r=i.get(n),r===void 0&&(r=new Set,i.set(n,r));r.has(o)||(r.add(o),t=Qu.bind(null,t,n,o),n.then(t,t))}function Kc(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Jc(t,n,o,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===n?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=di(-1,1),n.tag=2,Ai(o,n,1))),o.lanes|=1),t)}var Ou=ui.ReactCurrentOwner,go=!1;function to(t,n,o,i){n.child=t===null?Bf(n,null,o,i):zr(n,t.child,o,i)}function Qc(t,n,o,i,r){o=o.render;var s=n.ref;return kr(n,r),i=Hd(t,n,o,i,s,r),o=$d(),t!==null&&!go?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r,hi(t,n,r)):(yn&&o&&Bd(n),n.flags|=1,to(t,n,i,r),n.child)}function Zc(t,n,o,i,r){if(t===null){var s=o.type;return typeof s=="function"&&!qd(s)&&s.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=s,np(t,n,s,i,r)):(t=el(o.type,null,i,n,n.mode,r),t.ref=n.ref,t.return=n,n.child=t)}if(s=t.child,!(t.lanes&r)){var l=s.memoizedProps;if(o=o.compare,o=o!==null?o:fs,o(l,i)&&t.ref===n.ref)return hi(t,n,r)}return n.flags|=1,t=Mi(s,i),t.ref=n.ref,t.return=n,n.child=t}function np(t,n,o,i,r){if(t!==null){var s=t.memoizedProps;if(fs(s,i)&&t.ref===n.ref)if(go=!1,n.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(go=!0);else return n.lanes=t.lanes,hi(t,n,r)}return Ja(t,n,o,i,r)}function op(t,n,o){var i=n.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},hn(br,vo),vo|=o;else{if(!(o&1073741824))return t=s!==null?s.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,hn(br,vo),vo|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:o,hn(br,vo),vo|=i}else s!==null?(i=s.baseLanes|o,n.memoizedState=null):i=o,hn(br,vo),vo|=i;return to(t,n,r,o),n.child}function ip(t,n){var o=n.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function Ja(t,n,o,i,r){var s=yo(o)?qi:Kn.current;return s=Tr(n,s),kr(n,r),o=Hd(t,n,o,i,s,r),i=$d(),t!==null&&!go?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r,hi(t,n,r)):(yn&&i&&Bd(n),n.flags|=1,to(t,n,o,r),n.child)}function qc(t,n,o,i,r){if(yo(o)){var s=!0;fl(n)}else s=!1;if(kr(n,r),n.stateNode===null)Qs(t,n),qf(n,o,i),Xa(n,o,i,r),i=!0;else if(t===null){var l=n.stateNode,a=n.memoizedProps;l.props=a;var d=l.context,p=o.contextType;typeof p=="object"&&p!==null?p=Ao(p):(p=yo(o)?qi:Kn.current,p=Tr(n,p));var w=o.getDerivedStateFromProps,y=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==i||d!==p)&&Yc(n,l,i,p),Ci=!1;var u=n.memoizedState;l.state=u,xl(n,i,l,r),d=n.memoizedState,a!==i||u!==d||xo.current||Ci?(typeof w=="function"&&(Ya(n,o,w,i),d=n.memoizedState),(a=Ci||Gc(n,o,a,i,u,d,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=d),l.props=i,l.state=d,l.context=p,i=a):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{l=n.stateNode,Ef(t,n),a=n.memoizedProps,p=n.type===n.elementType?a:Do(n.type,a),l.props=p,y=n.pendingProps,u=l.context,d=o.contextType,typeof d=="object"&&d!==null?d=Ao(d):(d=yo(o)?qi:Kn.current,d=Tr(n,d));var W=o.getDerivedStateFromProps;(w=typeof W=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==y||u!==d)&&Yc(n,l,i,d),Ci=!1,u=n.memoizedState,l.state=u,xl(n,i,l,r);var L=n.memoizedState;a!==y||u!==L||xo.current||Ci?(typeof W=="function"&&(Ya(n,o,W,i),L=n.memoizedState),(p=Ci||Gc(n,o,p,i,u,L,d)||!1)?(w||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,L,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,L,d)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=L),l.props=i,l.state=L,l.context=d,i=p):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=1024),i=!1)}return Qa(t,n,o,i,s,r)}function Qa(t,n,o,i,r,s){ip(t,n);var l=(n.flags&128)!==0;if(!i&&!l)return r&&Oc(n,o,!1),hi(t,n,s);i=n.stateNode,Ou.current=n;var a=l&&typeof o.getDerivedStateFromError!="function"?null:i.render();return n.flags|=1,t!==null&&l?(n.child=zr(n,t.child,null,s),n.child=zr(n,null,a,s)):to(t,n,a,s),n.memoizedState=i.state,r&&Oc(n,o,!0),n.child}function rp(t){var n=t.stateNode;n.pendingContext?Mc(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Mc(t,n.context,!1),Od(t,n.containerInfo)}function e0(t,n,o,i,r){return Rr(),Ed(r),n.flags|=256,to(t,n,o,i),n.child}var Za={dehydrated:null,treeContext:null,retryLane:0};function qa(t){return{baseLanes:t,cachePool:null,transitions:null}}function sp(t,n,o){var i=n.pendingProps,r=vn.current,s=!1,l=(n.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),hn(vn,r&1),t===null)return Ua(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=i.children,t=i.fallback,s?(i=n.mode,s=n.child,l={mode:"hidden",children:l},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Wl(l,i,0,null),t=Zi(t,i,o,null),s.return=n,t.return=n,s.sibling=t,n.child=s,n.child.memoizedState=qa(o),n.memoizedState=Za,t):Gd(n,l));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Pu(t,n,l,i,a,r,o);if(s){s=i.fallback,l=n.mode,r=t.child,a=r.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&n.child!==r?(i=n.child,i.childLanes=0,i.pendingProps=d,n.deletions=null):(i=Mi(r,d),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Mi(a,s):(s=Zi(s,l,o,null),s.flags|=2),s.return=n,i.return=n,i.sibling=s,n.child=i,i=s,s=n.child,l=t.child.memoizedState,l=l===null?qa(o):{baseLanes:l.baseLanes|o,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~o,n.memoizedState=Za,i}return s=t.child,t=s.sibling,i=Mi(s,{mode:"visible",children:i.children}),!(n.mode&1)&&(i.lanes=o),i.return=n,i.sibling=null,t!==null&&(o=n.deletions,o===null?(n.deletions=[t],n.flags|=16):o.push(t)),n.child=i,n.memoizedState=null,i}function Gd(t,n){return n=Wl({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Ps(t,n,o,i){return i!==null&&Ed(i),zr(n,t.child,null,o),t=Gd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Pu(t,n,o,i,r,s,l){if(o)return n.flags&256?(n.flags&=-257,i=ca(Error(Fe(422))),Ps(t,n,l,i)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(s=i.fallback,r=n.mode,i=Wl({mode:"visible",children:i.children},r,0,null),s=Zi(s,r,l,null),s.flags|=2,i.return=n,s.return=n,i.sibling=s,n.child=i,n.mode&1&&zr(n,t.child,null,l),n.child.memoizedState=qa(l),n.memoizedState=Za,s);if(!(n.mode&1))return Ps(t,n,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Fe(419)),i=ca(s,i,void 0),Ps(t,n,l,i)}if(a=(l&t.childLanes)!==0,go||a){if(i=On,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,pi(t,r),Uo(i,t,r,-1))}return Zd(),i=ca(Error(Fe(421))),Ps(t,n,l,i)}return r.data==="$?"?(n.flags|=128,n.child=t.child,n=Zu.bind(null,t),r._reactRetry=n,null):(t=s.treeContext,jo=Li(r.nextSibling),So=n,yn=!0,$o=null,t!==null&&(Bo[Io++]=li,Bo[Io++]=ai,Bo[Io++]=er,li=t.id,ai=t.overflow,er=n),n=Gd(n,i.children),n.flags|=4096,n)}function t0(t,n,o){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n),Ga(t.return,n,o)}function fa(t,n,o,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:o,tailMode:r}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=o,s.tailMode=r)}function lp(t,n,o){var i=n.pendingProps,r=i.revealOrder,s=i.tail;if(to(t,n,i.children,o),i=vn.current,i&2)i=i&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t0(t,o,n);else if(t.tag===19)t0(t,o,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(hn(vn,i),!(n.mode&1))n.memoizedState=null;else switch(r){case"forwards":for(o=n.child,r=null;o!==null;)t=o.alternate,t!==null&&yl(t)===null&&(r=o),o=o.sibling;o=r,o===null?(r=n.child,n.child=null):(r=o.sibling,o.sibling=null),fa(n,!1,r,o,s);break;case"backwards":for(o=null,r=n.child,n.child=null;r!==null;){if(t=r.alternate,t!==null&&yl(t)===null){n.child=r;break}t=r.sibling,r.sibling=o,o=r,r=t}fa(n,!0,o,null,s);break;case"together":fa(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Qs(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function hi(t,n,o){if(t!==null&&(n.dependencies=t.dependencies),nr|=n.lanes,!(o&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(Fe(153));if(n.child!==null){for(t=n.child,o=Mi(t,t.pendingProps),n.child=o,o.return=n;t.sibling!==null;)t=t.sibling,o=o.sibling=Mi(t,t.pendingProps),o.return=n;o.sibling=null}return n.child}function Nu(t,n,o){switch(n.tag){case 3:rp(n),Rr();break;case 5:Lf(n);break;case 1:yo(n.type)&&fl(n);break;case 4:Od(n,n.stateNode.containerInfo);break;case 10:var i=n.type._context,r=n.memoizedProps.value;hn(ul,i._currentValue),i._currentValue=r;break;case 13:if(i=n.memoizedState,i!==null)return i.dehydrated!==null?(hn(vn,vn.current&1),n.flags|=128,null):o&n.child.childLanes?sp(t,n,o):(hn(vn,vn.current&1),t=hi(t,n,o),t!==null?t.sibling:null);hn(vn,vn.current&1);break;case 19:if(i=(o&n.childLanes)!==0,t.flags&128){if(i)return lp(t,n,o);n.flags|=128}if(r=n.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),hn(vn,vn.current),i)break;return null;case 22:case 23:return n.lanes=0,op(t,n,o)}return hi(t,n,o)}var ap,ed,dp,cp;ap=function(t,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};ed=function(){};dp=function(t,n,o,i){var r=t.memoizedProps;if(r!==i){t=n.stateNode,Ji(ti.current);var s=null;switch(o){case"input":r=Sa(t,r),i=Sa(t,i),s=[];break;case"select":r=Sn({},r,{value:void 0}),i=Sn({},i,{value:void 0}),s=[];break;case"textarea":r=Ca(t,r),i=Ca(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=dl)}Ta(o,i);var l;o=null;for(p in r)if(!i.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var a=r[p];for(l in a)a.hasOwnProperty(l)&&(o||(o={}),o[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(is.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in i){var d=i[p];if(a=r!=null?r[p]:void 0,i.hasOwnProperty(p)&&d!==a&&(d!=null||a!=null))if(p==="style")if(a){for(l in a)!a.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(o||(o={}),o[l]="");for(l in d)d.hasOwnProperty(l)&&a[l]!==d[l]&&(o||(o={}),o[l]=d[l])}else o||(s||(s=[]),s.push(p,o)),o=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,a=a?a.__html:void 0,d!=null&&a!==d&&(s=s||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(is.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&gn("scroll",t),s||a===d||(s=[])):(s=s||[]).push(p,d))}o&&(s=s||[]).push("style",o);var p=s;(n.updateQueue=p)&&(n.flags|=4)}};cp=function(t,n,o,i){o!==i&&(n.flags|=4)};function Hr(t,n){if(!yn)switch(t.tailMode){case"hidden":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var i=null;o!==null;)o.alternate!==null&&(i=o),o=o.sibling;i===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Yn(t){var n=t.alternate!==null&&t.alternate.child===t.child,o=0,i=0;if(n)for(var r=t.child;r!==null;)o|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)o|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=o,n}function Du(t,n,o){var i=n.pendingProps;switch(Id(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(n),null;case 1:return yo(n.type)&&cl(),Yn(n),null;case 3:return i=n.stateNode,Br(),xn(xo),xn(Kn),Nd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ms(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,$o!==null&&(ad($o),$o=null))),ed(t,n),Yn(n),null;case 5:Pd(n);var r=Ji(xs.current);if(o=n.type,t!==null&&n.stateNode!=null)dp(t,n,o,i,r),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!i){if(n.stateNode===null)throw Error(Fe(166));return Yn(n),null}if(t=Ji(ti.current),Ms(n)){i=n.stateNode,o=n.type;var s=n.memoizedProps;switch(i[qo]=n,i[us]=s,t=(n.mode&1)!==0,o){case"dialog":gn("cancel",i),gn("close",i);break;case"iframe":case"object":case"embed":gn("load",i);break;case"video":case"audio":for(r=0;r<Xr.length;r++)gn(Xr[r],i);break;case"source":gn("error",i);break;case"img":case"image":case"link":gn("error",i),gn("load",i);break;case"details":gn("toggle",i);break;case"input":cc(i,s),gn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},gn("invalid",i);break;case"textarea":pc(i,s),gn("invalid",i)}Ta(o,s),r=null;for(var l in s)if(s.hasOwnProperty(l)){var a=s[l];l==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ws(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ws(i.textContent,a,t),r=["children",""+a]):is.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&gn("scroll",i)}switch(o){case"input":Rs(i),fc(i,s,!0);break;case"textarea":Rs(i),hc(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=dl)}i=r,n.updateQueue=i,i!==null&&(n.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M0(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(o,{is:i.is}):(t=l.createElement(o),o==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,o),t[qo]=n,t[us]=i,ap(t,n,!1,!1),n.stateNode=t;e:{switch(l=Ra(o,i),o){case"dialog":gn("cancel",t),gn("close",t),r=i;break;case"iframe":case"object":case"embed":gn("load",t),r=i;break;case"video":case"audio":for(r=0;r<Xr.length;r++)gn(Xr[r],t);r=i;break;case"source":gn("error",t),r=i;break;case"img":case"image":case"link":gn("error",t),gn("load",t),r=i;break;case"details":gn("toggle",t),r=i;break;case"input":cc(t,i),r=Sa(t,i),gn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Sn({},i,{value:void 0}),gn("invalid",t);break;case"textarea":pc(t,i),r=Ca(t,i),gn("invalid",t);break;default:r=i}Ta(o,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var d=a[s];s==="style"?N0(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&O0(t,d)):s==="children"?typeof d=="string"?(o!=="textarea"||d!=="")&&rs(t,d):typeof d=="number"&&rs(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(is.hasOwnProperty(s)?d!=null&&s==="onScroll"&&gn("scroll",t):d!=null&&xd(t,s,d,l))}switch(o){case"input":Rs(t),fc(t,i,!1);break;case"textarea":Rs(t),hc(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Oi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?vr(t,!!i.multiple,s,!1):i.defaultValue!=null&&vr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=dl)}switch(o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Yn(n),null;case 6:if(t&&n.stateNode!=null)cp(t,n,t.memoizedProps,i);else{if(typeof i!="string"&&n.stateNode===null)throw Error(Fe(166));if(o=Ji(xs.current),Ji(ti.current),Ms(n)){if(i=n.stateNode,o=n.memoizedProps,i[qo]=n,(s=i.nodeValue!==o)&&(t=So,t!==null))switch(t.tag){case 3:Ws(i.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ws(i.nodeValue,o,(t.mode&1)!==0)}s&&(n.flags|=4)}else i=(o.nodeType===9?o:o.ownerDocument).createTextNode(i),i[qo]=n,n.stateNode=i}return Yn(n),null;case 13:if(xn(vn),i=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yn&&jo!==null&&n.mode&1&&!(n.flags&128))Rf(),Rr(),n.flags|=98560,s=!1;else if(s=Ms(n),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=n.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[qo]=n}else Rr(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Yn(n),s=!1}else $o!==null&&(ad($o),$o=null),s=!0;if(!s)return n.flags&65536?n:null}return n.flags&128?(n.lanes=o,n):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(n.child.flags|=8192,n.mode&1&&(t===null||vn.current&1?An===0&&(An=3):Zd())),n.updateQueue!==null&&(n.flags|=4),Yn(n),null);case 4:return Br(),ed(t,n),t===null&&ps(n.stateNode.containerInfo),Yn(n),null;case 10:return Fd(n.type._context),Yn(n),null;case 17:return yo(n.type)&&cl(),Yn(n),null;case 19:if(xn(vn),s=n.memoizedState,s===null)return Yn(n),null;if(i=(n.flags&128)!==0,l=s.rendering,l===null)if(i)Hr(s,!1);else{if(An!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(l=yl(t),l!==null){for(n.flags|=128,Hr(s,!1),i=l.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),n.subtreeFlags=0,i=o,o=n.child;o!==null;)s=o,t=i,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return hn(vn,vn.current&1|2),n.child}t=t.sibling}s.tail!==null&&_n()>Er&&(n.flags|=128,i=!0,Hr(s,!1),n.lanes=4194304)}else{if(!i)if(t=yl(l),t!==null){if(n.flags|=128,i=!0,o=t.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),Hr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!yn)return Yn(n),null}else 2*_n()-s.renderingStartTime>Er&&o!==1073741824&&(n.flags|=128,i=!0,Hr(s,!1),n.lanes=4194304);s.isBackwards?(l.sibling=n.child,n.child=l):(o=s.last,o!==null?o.sibling=l:n.child=l,s.last=l)}return s.tail!==null?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.renderingStartTime=_n(),n.sibling=null,o=vn.current,hn(vn,i?o&1|2:o&1),n):(Yn(n),null);case 22:case 23:return Qd(),i=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(n.flags|=8192),i&&n.mode&1?vo&1073741824&&(Yn(n),n.subtreeFlags&6&&(n.flags|=8192)):Yn(n),null;case 24:return null;case 25:return null}throw Error(Fe(156,n.tag))}function Hu(t,n){switch(Id(n),n.tag){case 1:return yo(n.type)&&cl(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Br(),xn(xo),xn(Kn),Nd(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return Pd(n),null;case 13:if(xn(vn),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(Fe(340));Rr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return xn(vn),null;case 4:return Br(),null;case 10:return Fd(n.type._context),null;case 22:case 23:return Qd(),null;case 24:return null;default:return null}}var Ns=!1,Xn=!1,$u=typeof WeakSet=="function"?WeakSet:Set,it=null;function mr(t,n){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(i){kn(t,n,i)}else o.current=null}function td(t,n,o){try{o()}catch(i){kn(t,n,i)}}var n0=!1;function Vu(t,n){if(Oa=sl,t=gf(),zd(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var i=o.getSelection&&o.getSelection();if(i&&i.rangeCount!==0){o=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{o.nodeType,s.nodeType}catch{o=null;break e}var l=0,a=-1,d=-1,p=0,w=0,y=t,u=null;t:for(;;){for(var W;y!==o||r!==0&&y.nodeType!==3||(a=l+r),y!==s||i!==0&&y.nodeType!==3||(d=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(W=y.firstChild)!==null;)u=y,y=W;for(;;){if(y===t)break t;if(u===o&&++p===r&&(a=l),u===s&&++w===i&&(d=l),(W=y.nextSibling)!==null)break;y=u,u=y.parentNode}y=W}o=a===-1||d===-1?null:{start:a,end:d}}else o=null}o=o||{start:0,end:0}}else o=null;for(Pa={focusedElem:t,selectionRange:o},sl=!1,it=n;it!==null;)if(n=it,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,it=t;else for(;it!==null;){n=it;try{var L=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var Z=L.memoizedProps,Ge=L.memoizedState,f=n.stateNode,m=f.getSnapshotBeforeUpdate(n.elementType===n.type?Z:Do(n.type,Z),Ge);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var C=n.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(c){kn(n,n.return,c)}if(t=n.sibling,t!==null){t.return=n.return,it=t;break}it=n.return}return L=n0,n0=!1,L}function ts(t,n,o){var i=n.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&td(n,o,s)}r=r.next}while(r!==i)}}function Al(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var i=o.create;o.destroy=i()}o=o.next}while(o!==n)}}function nd(t){var n=t.ref;if(n!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof n=="function"?n(t):n.current=t}}function fp(t){var n=t.alternate;n!==null&&(t.alternate=null,fp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[qo],delete n[us],delete n[Ha],delete n[_u],delete n[Tu])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pp(t){return t.tag===5||t.tag===3||t.tag===4}function o0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function od(t,n,o){var i=t.tag;if(i===5||i===6)t=t.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(t,n):o.insertBefore(t,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(t,o)):(n=o,n.appendChild(t)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=dl));else if(i!==4&&(t=t.child,t!==null))for(od(t,n,o),t=t.sibling;t!==null;)od(t,n,o),t=t.sibling}function id(t,n,o){var i=t.tag;if(i===5||i===6)t=t.stateNode,n?o.insertBefore(t,n):o.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(id(t,n,o),t=t.sibling;t!==null;)id(t,n,o),t=t.sibling}var Nn=null,Ho=!1;function wi(t,n,o){for(o=o.child;o!==null;)hp(t,n,o),o=o.sibling}function hp(t,n,o){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(_l,o)}catch{}switch(o.tag){case 5:Xn||mr(o,n);case 6:var i=Nn,r=Ho;Nn=null,wi(t,n,o),Nn=i,Ho=r,Nn!==null&&(Ho?(t=Nn,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Nn.removeChild(o.stateNode));break;case 18:Nn!==null&&(Ho?(t=Nn,o=o.stateNode,t.nodeType===8?ia(t.parentNode,o):t.nodeType===1&&ia(t,o),ds(t)):ia(Nn,o.stateNode));break;case 4:i=Nn,r=Ho,Nn=o.stateNode.containerInfo,Ho=!0,wi(t,n,o),Nn=i,Ho=r;break;case 0:case 11:case 14:case 15:if(!Xn&&(i=o.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&td(o,n,l),r=r.next}while(r!==i)}wi(t,n,o);break;case 1:if(!Xn&&(mr(o,n),i=o.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=o.memoizedProps,i.state=o.memoizedState,i.componentWillUnmount()}catch(a){kn(o,n,a)}wi(t,n,o);break;case 21:wi(t,n,o);break;case 22:o.mode&1?(Xn=(i=Xn)||o.memoizedState!==null,wi(t,n,o),Xn=i):wi(t,n,o);break;default:wi(t,n,o)}}function i0(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new $u),n.forEach(function(i){var r=qu.bind(null,t,i);o.has(i)||(o.add(i),i.then(r,r))})}}function Po(t,n){var o=n.deletions;if(o!==null)for(var i=0;i<o.length;i++){var r=o[i];try{var s=t,l=n,a=l;e:for(;a!==null;){switch(a.tag){case 5:Nn=a.stateNode,Ho=!1;break e;case 3:Nn=a.stateNode.containerInfo,Ho=!0;break e;case 4:Nn=a.stateNode.containerInfo,Ho=!0;break e}a=a.return}if(Nn===null)throw Error(Fe(160));hp(s,l,r),Nn=null,Ho=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(p){kn(r,n,p)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)up(n,t),n=n.sibling}function up(t,n){var o=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Po(n,t),Qo(t),i&4){try{ts(3,t,t.return),Al(3,t)}catch(Z){kn(t,t.return,Z)}try{ts(5,t,t.return)}catch(Z){kn(t,t.return,Z)}}break;case 1:Po(n,t),Qo(t),i&512&&o!==null&&mr(o,o.return);break;case 5:if(Po(n,t),Qo(t),i&512&&o!==null&&mr(o,o.return),t.flags&32){var r=t.stateNode;try{rs(r,"")}catch(Z){kn(t,t.return,Z)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,l=o!==null?o.memoizedProps:s,a=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&F0(r,s),Ra(a,l);var p=Ra(a,s);for(l=0;l<d.length;l+=2){var w=d[l],y=d[l+1];w==="style"?N0(r,y):w==="dangerouslySetInnerHTML"?O0(r,y):w==="children"?rs(r,y):xd(r,w,y,p)}switch(a){case"input":wa(r,s);break;case"textarea":W0(r,s);break;case"select":var u=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var W=s.value;W!=null?vr(r,!!s.multiple,W,!1):u!==!!s.multiple&&(s.defaultValue!=null?vr(r,!!s.multiple,s.defaultValue,!0):vr(r,!!s.multiple,s.multiple?[]:"",!1))}r[us]=s}catch(Z){kn(t,t.return,Z)}}break;case 6:if(Po(n,t),Qo(t),i&4){if(t.stateNode===null)throw Error(Fe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(Z){kn(t,t.return,Z)}}break;case 3:if(Po(n,t),Qo(t),i&4&&o!==null&&o.memoizedState.isDehydrated)try{ds(n.containerInfo)}catch(Z){kn(t,t.return,Z)}break;case 4:Po(n,t),Qo(t);break;case 13:Po(n,t),Qo(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Kd=_n())),i&4&&i0(t);break;case 22:if(w=o!==null&&o.memoizedState!==null,t.mode&1?(Xn=(p=Xn)||w,Po(n,t),Xn=p):Po(n,t),Qo(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!w&&t.mode&1)for(it=t,w=t.child;w!==null;){for(y=it=w;it!==null;){switch(u=it,W=u.child,u.tag){case 0:case 11:case 14:case 15:ts(4,u,u.return);break;case 1:mr(u,u.return);var L=u.stateNode;if(typeof L.componentWillUnmount=="function"){i=u,o=u.return;try{n=i,L.props=n.memoizedProps,L.state=n.memoizedState,L.componentWillUnmount()}catch(Z){kn(i,o,Z)}}break;case 5:mr(u,u.return);break;case 22:if(u.memoizedState!==null){s0(y);continue}}W!==null?(W.return=u,it=W):s0(y)}w=w.sibling}e:for(w=null,y=t;;){if(y.tag===5){if(w===null){w=y;try{r=y.stateNode,p?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,a.style.display=P0("display",l))}catch(Z){kn(t,t.return,Z)}}}else if(y.tag===6){if(w===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(Z){kn(t,t.return,Z)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;w===y&&(w=null),y=y.return}w===y&&(w=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Po(n,t),Qo(t),i&4&&i0(t);break;case 21:break;default:Po(n,t),Qo(t)}}function Qo(t){var n=t.flags;if(n&2){try{e:{for(var o=t.return;o!==null;){if(pp(o)){var i=o;break e}o=o.return}throw Error(Fe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(rs(r,""),i.flags&=-33);var s=o0(t);id(t,s,r);break;case 3:case 4:var l=i.stateNode.containerInfo,a=o0(t);od(t,a,l);break;default:throw Error(Fe(161))}}catch(d){kn(t,t.return,d)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Uu(t,n,o){it=t,gp(t)}function gp(t,n,o){for(var i=(t.mode&1)!==0;it!==null;){var r=it,s=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||Ns;if(!l){var a=r.alternate,d=a!==null&&a.memoizedState!==null||Xn;a=Ns;var p=Xn;if(Ns=l,(Xn=d)&&!p)for(it=r;it!==null;)l=it,d=l.child,l.tag===22&&l.memoizedState!==null?l0(r):d!==null?(d.return=l,it=d):l0(r);for(;s!==null;)it=s,gp(s),s=s.sibling;it=r,Ns=a,Xn=p}r0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,it=s):r0(t)}}function r0(t){for(;it!==null;){var n=it;if(n.flags&8772){var o=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Xn||Al(5,n);break;case 1:var i=n.stateNode;if(n.flags&4&&!Xn)if(o===null)i.componentDidMount();else{var r=n.elementType===n.type?o.memoizedProps:Do(n.type,o.memoizedProps);i.componentDidUpdate(r,o.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=n.updateQueue;s!==null&&$c(n,s,i);break;case 3:var l=n.updateQueue;if(l!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}$c(n,l,o)}break;case 5:var a=n.stateNode;if(o===null&&n.flags&4){o=a;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&o.focus();break;case"img":d.src&&(o.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var p=n.alternate;if(p!==null){var w=p.memoizedState;if(w!==null){var y=w.dehydrated;y!==null&&ds(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Xn||n.flags&512&&nd(n)}catch(u){kn(n,n.return,u)}}if(n===t){it=null;break}if(o=n.sibling,o!==null){o.return=n.return,it=o;break}it=n.return}}function s0(t){for(;it!==null;){var n=it;if(n===t){it=null;break}var o=n.sibling;if(o!==null){o.return=n.return,it=o;break}it=n.return}}function l0(t){for(;it!==null;){var n=it;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{Al(4,n)}catch(d){kn(n,o,d)}break;case 1:var i=n.stateNode;if(typeof i.componentDidMount=="function"){var r=n.return;try{i.componentDidMount()}catch(d){kn(n,r,d)}}var s=n.return;try{nd(n)}catch(d){kn(n,s,d)}break;case 5:var l=n.return;try{nd(n)}catch(d){kn(n,l,d)}}}catch(d){kn(n,n.return,d)}if(n===t){it=null;break}var a=n.sibling;if(a!==null){a.return=n.return,it=a;break}it=n.return}}var Gu=Math.ceil,vl=ui.ReactCurrentDispatcher,Yd=ui.ReactCurrentOwner,Lo=ui.ReactCurrentBatchConfig,tn=0,On=null,zn=null,Dn=0,vo=0,br=Di(0),An=0,vs=null,nr=0,Fl=0,Xd=0,ns=null,uo=null,Kd=0,Er=1/0,ri=null,jl=!1,rd=null,Fi=null,Ds=!1,zi=null,Sl=0,os=0,sd=null,Zs=-1,qs=0;function no(){return tn&6?_n():Zs!==-1?Zs:Zs=_n()}function Wi(t){return t.mode&1?tn&2&&Dn!==0?Dn&-Dn:zu.transition!==null?(qs===0&&(qs=Z0()),qs):(t=an,t!==0||(t=window.event,t=t===void 0?16:sf(t.type)),t):1}function Uo(t,n,o,i){if(50<os)throw os=0,sd=null,Error(Fe(185));Ss(t,o,i),(!(tn&2)||t!==On)&&(t===On&&(!(tn&2)&&(Fl|=o),An===4&&Ti(t,Dn)),mo(t,i),o===1&&tn===0&&!(n.mode&1)&&(Er=_n()+500,Il&&Hi()))}function mo(t,n){var o=t.callbackNode;zh(t,n);var i=rl(t,t===On?Dn:0);if(i===0)o!==null&&xc(o),t.callbackNode=null,t.callbackPriority=0;else if(n=i&-i,t.callbackPriority!==n){if(o!=null&&xc(o),n===1)t.tag===0?Ru(a0.bind(null,t)):Cf(a0.bind(null,t)),ku(function(){!(tn&6)&&Hi()}),o=null;else{switch(q0(i)){case 1:o=jd;break;case 4:o=J0;break;case 16:o=il;break;case 536870912:o=Q0;break;default:o=il}o=wp(o,xp.bind(null,t))}t.callbackPriority=n,t.callbackNode=o}}function xp(t,n){if(Zs=-1,qs=0,tn&6)throw Error(Fe(327));var o=t.callbackNode;if(Cr()&&t.callbackNode!==o)return null;var i=rl(t,t===On?Dn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||n)n=wl(t,i);else{n=i;var r=tn;tn|=2;var s=mp();(On!==t||Dn!==n)&&(ri=null,Er=_n()+500,Qi(t,n));do try{Ku();break}catch(a){yp(t,a)}while(!0);Ad(),vl.current=s,tn=r,zn!==null?n=0:(On=null,Dn=0,n=An)}if(n!==0){if(n===2&&(r=La(t),r!==0&&(i=r,n=ld(t,r))),n===1)throw o=vs,Qi(t,0),Ti(t,i),mo(t,_n()),o;if(n===6)Ti(t,i);else{if(r=t.current.alternate,!(i&30)&&!Yu(r)&&(n=wl(t,i),n===2&&(s=La(t),s!==0&&(i=s,n=ld(t,s))),n===1))throw o=vs,Qi(t,0),Ti(t,i),mo(t,_n()),o;switch(t.finishedWork=r,t.finishedLanes=i,n){case 0:case 1:throw Error(Fe(345));case 2:Yi(t,uo,ri);break;case 3:if(Ti(t,i),(i&130023424)===i&&(n=Kd+500-_n(),10<n)){if(rl(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){no(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Da(Yi.bind(null,t,uo,ri),n);break}Yi(t,uo,ri);break;case 4:if(Ti(t,i),(i&4194240)===i)break;for(n=t.eventTimes,r=-1;0<i;){var l=31-Vo(i);s=1<<l,l=n[l],l>r&&(r=l),i&=~s}if(i=r,i=_n()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Gu(i/1960))-i,10<i){t.timeoutHandle=Da(Yi.bind(null,t,uo,ri),i);break}Yi(t,uo,ri);break;case 5:Yi(t,uo,ri);break;default:throw Error(Fe(329))}}}return mo(t,_n()),t.callbackNode===o?xp.bind(null,t):null}function ld(t,n){var o=ns;return t.current.memoizedState.isDehydrated&&(Qi(t,n).flags|=256),t=wl(t,n),t!==2&&(n=uo,uo=o,n!==null&&ad(n)),t}function ad(t){uo===null?uo=t:uo.push.apply(uo,t)}function Yu(t){for(var n=t;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var i=0;i<o.length;i++){var r=o[i],s=r.getSnapshot;r=r.value;try{if(!Go(s(),r))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ti(t,n){for(n&=~Xd,n&=~Fl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var o=31-Vo(n),i=1<<o;t[o]=-1,n&=~i}}function a0(t){if(tn&6)throw Error(Fe(327));Cr();var n=rl(t,0);if(!(n&1))return mo(t,_n()),null;var o=wl(t,n);if(t.tag!==0&&o===2){var i=La(t);i!==0&&(n=i,o=ld(t,i))}if(o===1)throw o=vs,Qi(t,0),Ti(t,n),mo(t,_n()),o;if(o===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Yi(t,uo,ri),mo(t,_n()),null}function Jd(t,n){var o=tn;tn|=1;try{return t(n)}finally{tn=o,tn===0&&(Er=_n()+500,Il&&Hi())}}function or(t){zi!==null&&zi.tag===0&&!(tn&6)&&Cr();var n=tn;tn|=1;var o=Lo.transition,i=an;try{if(Lo.transition=null,an=1,t)return t()}finally{an=i,Lo.transition=o,tn=n,!(tn&6)&&Hi()}}function Qd(){vo=br.current,xn(br)}function Qi(t,n){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,wu(o)),zn!==null)for(o=zn.return;o!==null;){var i=o;switch(Id(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&cl();break;case 3:Br(),xn(xo),xn(Kn),Nd();break;case 5:Pd(i);break;case 4:Br();break;case 13:xn(vn);break;case 19:xn(vn);break;case 10:Fd(i.type._context);break;case 22:case 23:Qd()}o=o.return}if(On=t,zn=t=Mi(t.current,null),Dn=vo=n,An=0,vs=null,Xd=Fl=nr=0,uo=ns=null,Ki!==null){for(n=0;n<Ki.length;n++)if(o=Ki[n],i=o.interleaved,i!==null){o.interleaved=null;var r=i.next,s=o.pending;if(s!==null){var l=s.next;s.next=r,i.next=l}o.pending=i}Ki=null}return t}function yp(t,n){do{var o=zn;try{if(Ad(),Ks.current=bl,ml){for(var i=jn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ml=!1}if(tr=0,Mn=Ln=jn=null,es=!1,ys=0,Yd.current=null,o===null||o.return===null){An=1,vs=n,zn=null;break}e:{var s=t,l=o.return,a=o,d=n;if(n=Dn,a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,w=a,y=w.tag;if(!(w.mode&1)&&(y===0||y===11||y===15)){var u=w.alternate;u?(w.updateQueue=u.updateQueue,w.memoizedState=u.memoizedState,w.lanes=u.lanes):(w.updateQueue=null,w.memoizedState=null)}var W=Kc(l);if(W!==null){W.flags&=-257,Jc(W,l,a,s,n),W.mode&1&&Xc(s,p,n),n=W,d=p;var L=n.updateQueue;if(L===null){var Z=new Set;Z.add(d),n.updateQueue=Z}else L.add(d);break e}else{if(!(n&1)){Xc(s,p,n),Zd();break e}d=Error(Fe(426))}}else if(yn&&a.mode&1){var Ge=Kc(l);if(Ge!==null){!(Ge.flags&65536)&&(Ge.flags|=256),Jc(Ge,l,a,s,n),Ed(Ir(d,a));break e}}s=d=Ir(d,a),An!==4&&(An=2),ns===null?ns=[s]:ns.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,n&=-n,s.lanes|=n;var f=ep(s,d,n);Hc(s,f);break e;case 1:a=d;var m=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Fi===null||!Fi.has(C)))){s.flags|=65536,n&=-n,s.lanes|=n;var c=tp(s,a,n);Hc(s,c);break e}}s=s.return}while(s!==null)}vp(o)}catch(F){n=F,zn===o&&o!==null&&(zn=o=o.return);continue}break}while(!0)}function mp(){var t=vl.current;return vl.current=bl,t===null?bl:t}function Zd(){(An===0||An===3||An===2)&&(An=4),On===null||!(nr&268435455)&&!(Fl&268435455)||Ti(On,Dn)}function wl(t,n){var o=tn;tn|=2;var i=mp();(On!==t||Dn!==n)&&(ri=null,Qi(t,n));do try{Xu();break}catch(r){yp(t,r)}while(!0);if(Ad(),tn=o,vl.current=i,zn!==null)throw Error(Fe(261));return On=null,Dn=0,An}function Xu(){for(;zn!==null;)bp(zn)}function Ku(){for(;zn!==null&&!vh();)bp(zn)}function bp(t){var n=Sp(t.alternate,t,vo);t.memoizedProps=t.pendingProps,n===null?vp(t):zn=n,Yd.current=null}function vp(t){var n=t;do{var o=n.alternate;if(t=n.return,n.flags&32768){if(o=Hu(o,n),o!==null){o.flags&=32767,zn=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{An=6,zn=null;return}}else if(o=Du(o,n,vo),o!==null){zn=o;return}if(n=n.sibling,n!==null){zn=n;return}zn=n=t}while(n!==null);An===0&&(An=5)}function Yi(t,n,o){var i=an,r=Lo.transition;try{Lo.transition=null,an=1,Ju(t,n,o,i)}finally{Lo.transition=r,an=i}return null}function Ju(t,n,o,i){do Cr();while(zi!==null);if(tn&6)throw Error(Fe(327));o=t.finishedWork;var r=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=o.lanes|o.childLanes;if(Bh(t,s),t===On&&(zn=On=null,Dn=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||Ds||(Ds=!0,wp(il,function(){return Cr(),null})),s=(o.flags&15990)!==0,o.subtreeFlags&15990||s){s=Lo.transition,Lo.transition=null;var l=an;an=1;var a=tn;tn|=4,Yd.current=null,Vu(t,o),up(o,t),xu(Pa),sl=!!Oa,Pa=Oa=null,t.current=o,Uu(o),jh(),tn=a,an=l,Lo.transition=s}else t.current=o;if(Ds&&(Ds=!1,zi=t,Sl=r),s=t.pendingLanes,s===0&&(Fi=null),kh(o.stateNode),mo(t,_n()),n!==null)for(i=t.onRecoverableError,o=0;o<n.length;o++)r=n[o],i(r.value,{componentStack:r.stack,digest:r.digest});if(jl)throw jl=!1,t=rd,rd=null,t;return Sl&1&&t.tag!==0&&Cr(),s=t.pendingLanes,s&1?t===sd?os++:(os=0,sd=t):os=0,Hi(),null}function Cr(){if(zi!==null){var t=q0(Sl),n=Lo.transition,o=an;try{if(Lo.transition=null,an=16>t?16:t,zi===null)var i=!1;else{if(t=zi,zi=null,Sl=0,tn&6)throw Error(Fe(331));var r=tn;for(tn|=4,it=t.current;it!==null;){var s=it,l=s.child;if(it.flags&16){var a=s.deletions;if(a!==null){for(var d=0;d<a.length;d++){var p=a[d];for(it=p;it!==null;){var w=it;switch(w.tag){case 0:case 11:case 15:ts(8,w,s)}var y=w.child;if(y!==null)y.return=w,it=y;else for(;it!==null;){w=it;var u=w.sibling,W=w.return;if(fp(w),w===p){it=null;break}if(u!==null){u.return=W,it=u;break}it=W}}}var L=s.alternate;if(L!==null){var Z=L.child;if(Z!==null){L.child=null;do{var Ge=Z.sibling;Z.sibling=null,Z=Ge}while(Z!==null)}}it=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,it=l;else e:for(;it!==null;){if(s=it,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ts(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,it=f;break e}it=s.return}}var m=t.current;for(it=m;it!==null;){l=it;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,it=C;else e:for(l=m;it!==null;){if(a=it,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Al(9,a)}}catch(F){kn(a,a.return,F)}if(a===l){it=null;break e}var c=a.sibling;if(c!==null){c.return=a.return,it=c;break e}it=a.return}}if(tn=r,Hi(),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(_l,t)}catch{}i=!0}return i}finally{an=o,Lo.transition=n}}return!1}function d0(t,n,o){n=Ir(o,n),n=ep(t,n,1),t=Ai(t,n,1),n=no(),t!==null&&(Ss(t,1,n),mo(t,n))}function kn(t,n,o){if(t.tag===3)d0(t,t,o);else for(;n!==null;){if(n.tag===3){d0(n,t,o);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fi===null||!Fi.has(i))){t=Ir(o,t),t=tp(n,t,1),n=Ai(n,t,1),t=no(),n!==null&&(Ss(n,1,t),mo(n,t));break}}n=n.return}}function Qu(t,n,o){var i=t.pingCache;i!==null&&i.delete(n),n=no(),t.pingedLanes|=t.suspendedLanes&o,On===t&&(Dn&o)===o&&(An===4||An===3&&(Dn&130023424)===Dn&&500>_n()-Kd?Qi(t,0):Xd|=o),mo(t,n)}function jp(t,n){n===0&&(t.mode&1?(n=Is,Is<<=1,!(Is&130023424)&&(Is=4194304)):n=1);var o=no();t=pi(t,n),t!==null&&(Ss(t,n,o),mo(t,o))}function Zu(t){var n=t.memoizedState,o=0;n!==null&&(o=n.retryLane),jp(t,o)}function qu(t,n){var o=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(o=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Fe(314))}i!==null&&i.delete(n),jp(t,o)}var Sp;Sp=function(t,n,o){if(t!==null)if(t.memoizedProps!==n.pendingProps||xo.current)go=!0;else{if(!(t.lanes&o)&&!(n.flags&128))return go=!1,Nu(t,n,o);go=!!(t.flags&131072)}else go=!1,yn&&n.flags&1048576&&_f(n,hl,n.index);switch(n.lanes=0,n.tag){case 2:var i=n.type;Qs(t,n),t=n.pendingProps;var r=Tr(n,Kn.current);kr(n,o),r=Hd(null,n,i,t,r,o);var s=$d();return n.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,yo(i)?(s=!0,fl(n)):s=!1,n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Md(n),r.updater=Ll,n.stateNode=r,r._reactInternals=n,Xa(n,i,t,o),n=Qa(null,n,i,!0,s,o)):(n.tag=0,yn&&s&&Bd(n),to(null,n,r,o),n=n.child),n;case 16:i=n.elementType;e:{switch(Qs(t,n),t=n.pendingProps,r=i._init,i=r(i._payload),n.type=i,r=n.tag=tg(i),t=Do(i,t),r){case 0:n=Ja(null,n,i,t,o);break e;case 1:n=qc(null,n,i,t,o);break e;case 11:n=Qc(null,n,i,t,o);break e;case 14:n=Zc(null,n,i,Do(i.type,t),o);break e}throw Error(Fe(306,i,""))}return n;case 0:return i=n.type,r=n.pendingProps,r=n.elementType===i?r:Do(i,r),Ja(t,n,i,r,o);case 1:return i=n.type,r=n.pendingProps,r=n.elementType===i?r:Do(i,r),qc(t,n,i,r,o);case 3:e:{if(rp(n),t===null)throw Error(Fe(387));i=n.pendingProps,s=n.memoizedState,r=s.element,Ef(t,n),xl(n,i,null,o);var l=n.memoizedState;if(i=l.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=s,n.memoizedState=s,n.flags&256){r=Ir(Error(Fe(423)),n),n=e0(t,n,i,o,r);break e}else if(i!==r){r=Ir(Error(Fe(424)),n),n=e0(t,n,i,o,r);break e}else for(jo=Li(n.stateNode.containerInfo.firstChild),So=n,yn=!0,$o=null,o=Bf(n,null,i,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Rr(),i===r){n=hi(t,n,o);break e}to(t,n,i,o)}n=n.child}return n;case 5:return Lf(n),t===null&&Ua(n),i=n.type,r=n.pendingProps,s=t!==null?t.memoizedProps:null,l=r.children,Na(i,r)?l=null:s!==null&&Na(i,s)&&(n.flags|=32),ip(t,n),to(t,n,l,o),n.child;case 6:return t===null&&Ua(n),null;case 13:return sp(t,n,o);case 4:return Od(n,n.stateNode.containerInfo),i=n.pendingProps,t===null?n.child=zr(n,null,i,o):to(t,n,i,o),n.child;case 11:return i=n.type,r=n.pendingProps,r=n.elementType===i?r:Do(i,r),Qc(t,n,i,r,o);case 7:return to(t,n,n.pendingProps,o),n.child;case 8:return to(t,n,n.pendingProps.children,o),n.child;case 12:return to(t,n,n.pendingProps.children,o),n.child;case 10:e:{if(i=n.type._context,r=n.pendingProps,s=n.memoizedProps,l=r.value,hn(ul,i._currentValue),i._currentValue=l,s!==null)if(Go(s.value,l)){if(s.children===r.children&&!xo.current){n=hi(t,n,o);break e}}else for(s=n.child,s!==null&&(s.return=n);s!==null;){var a=s.dependencies;if(a!==null){l=s.child;for(var d=a.firstContext;d!==null;){if(d.context===i){if(s.tag===1){d=di(-1,o&-o),d.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var w=p.pending;w===null?d.next=d:(d.next=w.next,w.next=d),p.pending=d}}s.lanes|=o,d=s.alternate,d!==null&&(d.lanes|=o),Ga(s.return,o,n),a.lanes|=o;break}d=d.next}}else if(s.tag===10)l=s.type===n.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(Fe(341));l.lanes|=o,a=l.alternate,a!==null&&(a.lanes|=o),Ga(l,o,n),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===n){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}to(t,n,r.children,o),n=n.child}return n;case 9:return r=n.type,i=n.pendingProps.children,kr(n,o),r=Ao(r),i=i(r),n.flags|=1,to(t,n,i,o),n.child;case 14:return i=n.type,r=Do(i,n.pendingProps),r=Do(i.type,r),Zc(t,n,i,r,o);case 15:return np(t,n,n.type,n.pendingProps,o);case 17:return i=n.type,r=n.pendingProps,r=n.elementType===i?r:Do(i,r),Qs(t,n),n.tag=1,yo(i)?(t=!0,fl(n)):t=!1,kr(n,o),qf(n,i,r),Xa(n,i,r,o),Qa(null,n,i,!0,t,o);case 19:return lp(t,n,o);case 22:return op(t,n,o)}throw Error(Fe(156,n.tag))};function wp(t,n){return K0(t,n)}function eg(t,n,o,i){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(t,n,o,i){return new eg(t,n,o,i)}function qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tg(t){if(typeof t=="function")return qd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===bd)return 14}return 2}function Mi(t,n){var o=t.alternate;return o===null?(o=Eo(t.tag,n,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=n,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,n=t.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function el(t,n,o,i,r,s){var l=2;if(i=t,typeof t=="function")qd(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case dr:return Zi(o.children,r,s,n);case yd:l=8,r|=8;break;case ma:return t=Eo(12,o,n,r|2),t.elementType=ma,t.lanes=s,t;case ba:return t=Eo(13,o,n,r),t.elementType=ba,t.lanes=s,t;case va:return t=Eo(19,o,n,r),t.elementType=va,t.lanes=s,t;case E0:return Wl(o,r,s,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B0:l=10;break e;case I0:l=9;break e;case md:l=11;break e;case bd:l=14;break e;case ki:l=16,i=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return n=Eo(l,o,n,r),n.elementType=t,n.type=i,n.lanes=s,n}function Zi(t,n,o,i){return t=Eo(7,t,i,n),t.lanes=o,t}function Wl(t,n,o,i){return t=Eo(22,t,i,n),t.elementType=E0,t.lanes=o,t.stateNode={isHidden:!1},t}function pa(t,n,o){return t=Eo(6,t,null,n),t.lanes=o,t}function ha(t,n,o){return n=Eo(4,t.children!==null?t.children:[],t.key,n),n.lanes=o,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function ng(t,n,o,i,r){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ec(t,n,o,i,r,s,l,a,d){return t=new ng(t,n,o,a,d),n===1?(n=1,s===!0&&(n|=8)):n=0,s=Eo(3,null,null,n),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(s),t}function og(t,n,o){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ar,key:i==null?null:""+i,children:t,containerInfo:n,implementation:o}}function kp(t){if(!t)return Pi;t=t._reactInternals;e:{if(rr(t)!==t||t.tag!==1)throw Error(Fe(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(yo(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Fe(171))}if(t.tag===1){var o=t.type;if(yo(o))return kf(t,o,n)}return n}function Cp(t,n,o,i,r,s,l,a,d){return t=ec(o,i,!0,t,r,s,l,a,d),t.context=kp(null),o=t.current,i=no(),r=Wi(o),s=di(i,r),s.callback=n??null,Ai(o,s,r),t.current.lanes=r,Ss(t,r,i),mo(t,i),t}function Ml(t,n,o,i){var r=n.current,s=no(),l=Wi(r);return o=kp(o),n.context===null?n.context=o:n.pendingContext=o,n=di(s,l),n.payload={element:t},i=i===void 0?null:i,i!==null&&(n.callback=i),t=Ai(r,n,l),t!==null&&(Uo(t,r,l,s),Xs(t,r,l)),l}function kl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function c0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<n?o:n}}function tc(t,n){c0(t,n),(t=t.alternate)&&c0(t,n)}function ig(){return null}var _p=typeof reportError=="function"?reportError:function(t){console.error(t)};function nc(t){this._internalRoot=t}Ol.prototype.render=nc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(Fe(409));Ml(t,n,null,null)};Ol.prototype.unmount=nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;or(function(){Ml(null,t,null,null)}),n[fi]=null}};function Ol(t){this._internalRoot=t}Ol.prototype.unstable_scheduleHydration=function(t){if(t){var n=nf();t={blockedOn:null,target:t,priority:n};for(var o=0;o<_i.length&&n!==0&&n<_i[o].priority;o++);_i.splice(o,0,t),o===0&&rf(t)}};function oc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f0(){}function rg(t,n,o,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var p=kl(l);s.call(p)}}var l=Cp(n,i,t,0,null,!1,!1,"",f0);return t._reactRootContainer=l,t[fi]=l.current,ps(t.nodeType===8?t.parentNode:t),or(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var p=kl(d);a.call(p)}}var d=ec(t,0,!1,null,null,!1,!1,"",f0);return t._reactRootContainer=d,t[fi]=d.current,ps(t.nodeType===8?t.parentNode:t),or(function(){Ml(n,d,o,i)}),d}function Nl(t,n,o,i,r){var s=o._reactRootContainer;if(s){var l=s;if(typeof r=="function"){var a=r;r=function(){var d=kl(l);a.call(d)}}Ml(n,l,t,r)}else l=rg(o,n,t,r,i);return kl(l)}ef=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var o=Yr(n.pendingLanes);o!==0&&(Sd(n,o|1),mo(n,_n()),!(tn&6)&&(Er=_n()+500,Hi()))}break;case 13:or(function(){var i=pi(t,1);if(i!==null){var r=no();Uo(i,t,1,r)}}),tc(t,1)}};wd=function(t){if(t.tag===13){var n=pi(t,134217728);if(n!==null){var o=no();Uo(n,t,134217728,o)}tc(t,134217728)}};tf=function(t){if(t.tag===13){var n=Wi(t),o=pi(t,n);if(o!==null){var i=no();Uo(o,t,n,i)}tc(t,n)}};nf=function(){return an};of=function(t,n){var o=an;try{return an=t,n()}finally{an=o}};Ba=function(t,n,o){switch(n){case"input":if(wa(t,o),n=o.name,o.type==="radio"&&n!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var i=o[n];if(i!==t&&i.form===t.form){var r=Bl(i);if(!r)throw Error(Fe(90));A0(i),wa(i,r)}}}break;case"textarea":W0(t,o);break;case"select":n=o.value,n!=null&&vr(t,!!o.multiple,n,!1)}};$0=Jd;V0=or;var sg={usingClientEntryPoint:!1,Events:[ks,hr,Bl,D0,H0,Jd]},$r={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lg={bundleType:$r.bundleType,version:$r.version,rendererPackageName:$r.rendererPackageName,rendererConfig:$r.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Y0(t),t===null?null:t.stateNode},findFiberByHostInstance:$r.findFiberByHostInstance||ig,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hs.isDisabled&&Hs.supportsFiber)try{_l=Hs.inject(lg),ei=Hs}catch{}}ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sg;ko.createPortal=function(t,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oc(n))throw Error(Fe(200));return og(t,n,null,o)};ko.createRoot=function(t,n){if(!oc(t))throw Error(Fe(299));var o=!1,i="",r=_p;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),n=ec(t,1,!1,null,null,o,!1,i,r),t[fi]=n.current,ps(t.nodeType===8?t.parentNode:t),new nc(n)};ko.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=Y0(n),t=t===null?null:t.stateNode,t};ko.flushSync=function(t){return or(t)};ko.hydrate=function(t,n,o){if(!Pl(n))throw Error(Fe(200));return Nl(null,t,n,!0,o)};ko.hydrateRoot=function(t,n,o){if(!oc(t))throw Error(Fe(405));var i=o!=null&&o.hydratedSources||null,r=!1,s="",l=_p;if(o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(s=o.identifierPrefix),o.onRecoverableError!==void 0&&(l=o.onRecoverableError)),n=Cp(n,null,t,1,o??null,r,!1,s,l),t[fi]=n.current,ps(t),i)for(t=0;t<i.length;t++)o=i[t],r=o._getVersion,r=r(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,r]:n.mutableSourceEagerHydrationData.push(o,r);return new Ol(n)};ko.render=function(t,n,o){if(!Pl(n))throw Error(Fe(200));return Nl(null,t,n,!1,o)};ko.unmountComponentAtNode=function(t){if(!Pl(t))throw Error(Fe(40));return t._reactRootContainer?(or(function(){Nl(null,null,t,!1,function(){t._reactRootContainer=null,t[fi]=null})}),!0):!1};ko.unstable_batchedUpdates=Jd;ko.unstable_renderSubtreeIntoContainer=function(t,n,o,i){if(!Pl(o))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return Nl(t,n,o,!1,i)};ko.version="18.3.1-next-f1338f8080-20240426";function Tp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tp)}catch(t){console.error(t)}}Tp(),_0.exports=ko;var ag=_0.exports,p0=ag;xa.createRoot=p0.createRoot,xa.hydrateRoot=p0.hydrateRoot;var h0={},dg="@vercel/speed-insights",cg="1.3.1",fg=()=>{window.si||(window.si=function(...n){(window.siq=window.siq||[]).push(n)})};function pg(){return typeof window<"u"}function hg(){try{const t="production"}catch{}return"production"}function Rp(){return hg()==="development"}function ug(t){return t.scriptSrc?t.scriptSrc:Rp()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function gg(t={}){var n;if(!pg()||t.route===null)return null;fg();const o=ug(t);if(document.head.querySelector(`script[src*="${o}"]`))return null;t.beforeSend&&((n=window.si)==null||n.call(window,"beforeSend",t.beforeSend));const i=document.createElement("script");return i.src=o,i.defer=!0,i.dataset.sdkn=dg+(t.framework?`/${t.framework}`:""),i.dataset.sdkv=cg,t.sampleRate&&(i.dataset.sampleRate=t.sampleRate.toString()),t.route&&(i.dataset.route=t.route),t.endpoint?i.dataset.endpoint=t.endpoint:t.basePath&&(i.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(i.dataset.dsn=t.dsn),Rp()&&t.debug===!1&&(i.dataset.debug="false"),i.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${o}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(i),{setRoute:r=>{i.dataset.route=r??void 0}}}function xg(){if(!(typeof process>"u"||typeof h0>"u"))return h0.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function yg(t){B.useEffect(()=>{var o;t.beforeSend&&((o=window.si)==null||o.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const n=B.useRef(null);return B.useEffect(()=>{if(n.current)t.route&&n.current(t.route);else{const o=gg({framework:t.framework??"react",basePath:t.basePath??xg(),...t});o&&(n.current=o.setRoute)}},[t.route]),null}const mg=({gexData:t,currentPrice:n})=>{const[o,i]=B.useState("table"),[r,s]=B.useState(10),[l,a]=B.useState(null),[d,p]=B.useState(null),w=(t==null?void 0:t.gex_profile)||[];t!=null&&t.gex_levels;const y=(t==null?void 0:t.gamma_regime)||"UNKNOWN",u=(t==null?void 0:t.total_gex)||0,W=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0,L=(t==null?void 0:t.max_pain)||0;t!=null&&t.call_wall,t!=null&&t.put_wall,t!=null&&t.hvl;const Z=w.filter(b=>Math.abs(b.gex)>.1).sort((b,_e)=>_e.strike-b.strike).slice(0,r).map(b=>{const _e=b.gex<0,re=n?Math.round(b.strike-n):0,He=Math.round(50+Math.abs(b.gex)*10),rt=100-He;return{strike:b.strike,gex:b.gex,type:_e?"CALL":"PUT",wallType:Math.abs(b.gex)>.5?"WALL":"LEVEL",role:_e?b.strike>n?"POT. RESISTANCE":"POT. RESISTANCE (EX-SUPP)":(b.strike<n,"POT. SUPPORT"),distance:re,holdPct:Math.min(He,85),breakPct:Math.max(rt,15),callPct:_e?70+Math.random()*20:10+Math.random()*20,putPct:_e?30-Math.random()*20:80+Math.random()*10,mass:Math.abs(b.gex).toFixed(1),effective:Math.abs(b.gex*.9).toFixed(1),integrity:Math.round(85+Math.random()*15),fieldHigh:b.strike+8,fieldLow:b.strike-8,influence:Math.round(15+Math.random()*10)}}),Ge=n?n*1.015:0,f=n?n*.985:0,m=n?n*1.012:0,C=n?n*.988:0,c={cyan:"#22d3ee",green:"#22c55e",red:"#ef4444",amber:"#f59e0b",purple:"#a855f7",magenta:"#ec4899",border:"rgba(34, 211, 238, 0.2)",text:"#f4f4f5",textMuted:"#71717a"},F=b=>{const _e=Z.findIndex(rt=>rt.strike===b.strike),re=Z[_e+1],He=Z[_e-1];return{nextLevel:re,prevLevel:He}},S=({level:b,onClose:_e})=>{if(!b)return null;const{nextLevel:re,prevLevel:He}=F(b),rt=W?Math.round(b.strike-W):0,zt=b.gex<0,Je=zt?b.strike>n?"Continuation Short":"Reversal Long":b.strike<n?"Continuation Long":"Reversal Short";return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:_e,children:e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20, 22, 35, 0.98) 0%, rgba(15, 17, 28, 0.99) 100%)",borderRadius:16,width:560,maxWidth:"90vw",maxHeight:"85vh",overflow:"auto",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},onClick:Xe=>Xe.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("span",{style:{fontSize:32,fontWeight:700,color:b.type==="PUT"?c.cyan:c.magenta,fontFamily:"'JetBrains Mono', monospace"},children:b.strike}),e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:b.type==="PUT"?c.cyan:c.magenta},children:[b.type," ",b.wallType]}),e.jsx("span",{style:{padding:"4px 10px",background:b.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${b.role.includes("SUPPORT")?c.green:c.red}`,borderRadius:4,fontSize:10,fontWeight:600,color:b.role.includes("SUPPORT")?c.green:c.red},children:b.role.includes("SUPPORT")?"POTENTIAL SUPPORT":"POTENTIAL RESISTANCE"})]}),e.jsxs("div",{style:{fontSize:11,color:c.textMuted},children:[e.jsx("span",{style:{color:zt?c.red:c.green},children:zt?"NEGATIVE GAMMA":"POSITIVE GAMMA"}),e.jsx("span",{style:{margin:"0 8px"},children:"|"}),"ZG Dist: ",rt>0?"+":"",rt]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,marginBottom:4},children:"DISTANCE FROM SPOT"}),e.jsxs("div",{style:{fontSize:28,fontWeight:600,color:b.distance>0?c.green:c.red},children:[b.distance>0?"+":"",b.distance,e.jsx("span",{style:{fontSize:14,color:c.textMuted,marginLeft:4},children:"pts"})]}),e.jsx("button",{onClick:_e,style:{position:"absolute",top:16,right:16,background:"transparent",border:"none",color:c.textMuted,fontSize:24,cursor:"pointer",padding:4},children:""})]})]}),e.jsxs("div",{style:{padding:24},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,letterSpacing:"0.1em",marginBottom:4},children:" REGIME EXPECTED REACTION"}),e.jsx("div",{style:{fontSize:24,fontWeight:600,color:Je.includes("Long")?c.cyan:c.magenta,fontFamily:"'JetBrains Mono', monospace"},children:Je})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:c.cyan,letterSpacing:"0.1em",textAlign:"center",marginBottom:16},children:"DEALER POSITIONING & GREEKS"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:c.textMuted},children:"TOT GEX PROFILE"}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,color:b.gex<0?c.magenta:c.cyan},children:[(b.gex*1e3).toFixed(1),"M"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{width:`${Math.min(Math.abs(b.gex)*100,90)}%`,height:"100%",background:b.gex<0?"linear-gradient(90deg, rgba(236,72,153,0.8), rgba(236,72,153,0.4))":"linear-gradient(90deg, rgba(34,211,238,0.8), rgba(34,211,238,0.4))",borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:16},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"SPEED"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:c.text},children:[(Math.abs(b.gex)*60).toFixed(1),"K"]})]}),e.jsxs("div",{style:{textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"VANNA"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:c.cyan},children:[(Math.abs(b.gex)*25).toFixed(1),"M"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"CHARM"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:c.magenta},children:[(b.gex*-500).toFixed(1),"M"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,letterSpacing:"0.1em",textAlign:"center",marginBottom:12},children:"HOLD / BREAK PROBABILITIES"}),e.jsxs("div",{style:{display:"flex",height:28,borderRadius:6,overflow:"hidden",fontSize:11,fontWeight:600},children:[e.jsxs("div",{style:{width:`${b.holdPct}%`,background:c.green,display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:["Hold ",b.holdPct,"%"]}),e.jsxs("div",{style:{width:`${b.breakPct}%`,background:c.red,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:["Break ",b.breakPct,"%"]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,borderLeft:`3px solid ${c.amber}`},children:[e.jsxs("div",{style:{fontSize:12,color:c.text,marginBottom:8},children:[e.jsx("strong",{children:"High Sensitivity."})," Dealer hedging activity increases rapidly here, creating potential for sharp reactions or rejection."]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(245,158,11,0.2)",border:`1px solid ${c.amber}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.amber},children:"REACTIVE ZONE"})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,letterSpacing:"0.1em",marginBottom:16},children:"STRUCTURAL CONTEXT"}),re&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(239,68,68,0.2)",border:`1px solid ${c.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.red},children:"IF BREAK"}),e.jsxs("span",{style:{fontSize:12,color:c.text},children:["Next: ",re.type," ",re.wallType," (@ ",re.strike,")"]})]}),He&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.green},children:"IF HOLD"}),e.jsxs("span",{style:{fontSize:12,color:c.text},children:["Target: ",He.type," ",He.wallType," (@ ",He.strike,")"]})]})]})]})]})})},R=({label:b,value:_e,color:re=c.textMuted})=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 16px",background:"rgba(40, 40, 50, 0.4)",borderRadius:6,marginBottom:8},children:e.jsxs("span",{style:{fontSize:12,color:re,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.1em"},children:[" ",b,": ",_e," "]})}),I=()=>e.jsxs("div",{style:{background:"linear-gradient(90deg, rgba(34,211,238,0.1) 0%, rgba(34,211,238,0.2) 50%, rgba(34,211,238,0.1) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",border:"1px solid rgba(34,211,238,0.3)"},children:[e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:c.cyan,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" ZERO GAMMA FLIP: ",W.toFixed(2)," "]}),e.jsx("div",{style:{marginTop:4},children:e.jsxs("span",{style:{fontSize:10,color:c.textMuted},children:["Above: Dealers dampen volatility (",e.jsx("span",{style:{color:c.cyan},children:"Reversal Playbook"}),")"]})}),e.jsx("div",{style:{marginTop:2},children:e.jsxs("span",{style:{fontSize:10,color:c.textMuted},children:["Below: Dealers amplify volatility (",e.jsx("span",{style:{color:c.amber},children:"Trend/Breakout Playbook"}),")"]})})]}),de=()=>e.jsx("div",{style:{background:"linear-gradient(90deg, rgba(234,179,8,0.2) 0%, rgba(234,179,8,0.4) 50%, rgba(234,179,8,0.2) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",boxShadow:"0 0 20px rgba(234,179,8,0.3)"},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:"#eab308",fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" CURRENT SPOT: ",(n==null?void 0:n.toFixed(2))||""," "]})}),G=({pts:b})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"8px 16px",background:"rgba(0,0,0,0.4)",borderRadius:6,margin:"8px 0"},children:[e.jsx("span",{style:{fontSize:14,color:c.textMuted,letterSpacing:"0.15em"},children:"LOW DENSITY"}),e.jsx("span",{style:{width:60,height:1,background:c.textMuted}}),e.jsxs("span",{style:{fontSize:12,color:c.textMuted},children:[b," PTS"]}),e.jsx("span",{style:{fontSize:12,color:c.amber,fontWeight:600},children:"FAST LANE"})]}),v=({holdPct:b,breakPct:_e,size:re="normal"})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsxs("span",{style:{fontSize:re==="small"?9:11,color:c.green},children:["H:",b,"%"]}),e.jsx("div",{style:{flex:1,height:re==="small"?4:6,background:c.red,borderRadius:3,overflow:"hidden",display:"flex"},children:e.jsx("div",{style:{width:`${b}%`,height:"100%",background:c.green}})}),e.jsxs("span",{style:{fontSize:re==="small"?9:11,color:c.red},children:["B:",_e,"%"]})]}),h=({value:b,maxVal:_e=1e3})=>{const re=Math.min(Math.abs(b)/_e*100,100),He=b>0;return e.jsx("div",{style:{width:"100%",height:6,background:"rgba(255,255,255,0.1)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${re}%`,height:"100%",background:He?"linear-gradient(90deg, #22c55e, #4ade80)":"linear-gradient(90deg, #22d3ee, #67e8f9)",borderRadius:3}})})},T=()=>e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:8},children:["LEVEL","TOT. GEX PROFILE","ROLE","CONFLUENCES","WARNING","HOLD / BREAK PROB."].map(b=>e.jsx("span",{style:{fontSize:10,color:c.textMuted,fontWeight:600,letterSpacing:"0.05em"},children:b},b))}),e.jsx(R,{label:"EM HIGH",value:Ge.toFixed(2)}),e.jsx(R,{label:"VOL BAND HIGH",value:m.toFixed(2)}),Z.filter(b=>b.strike>n).map((b,_e)=>{const re=l===`above-${_e}`;return e.jsxs("div",{onMouseEnter:()=>a(`above-${_e}`),onMouseLeave:()=>a(null),onClick:()=>p(b),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:re?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${b.type==="CALL"?c.green:c.magenta}`,transform:re?"translateX(4px)":"none",boxShadow:re?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[re&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:c.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:b.type==="CALL"?c.green:c.magenta},children:b.strike}),e.jsxs("div",{style:{fontSize:10,color:b.type==="CALL"?c.green:c.magenta},children:[b.type," WALL"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:c.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:c.text,marginBottom:4},children:[(b.gex*1e3).toFixed(1),"M"]}),e.jsx(h,{value:b.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:b.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${b.role.includes("SUPPORT")?c.green:c.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:b.role.includes("SUPPORT")?c.green:c.red},children:b.role})}),e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${c.amber}40`,borderRadius:4,color:c.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(v,{holdPct:b.holdPct,breakPct:b.breakPct})]},_e)}),e.jsx(I,{}),e.jsx(R,{label:"VOL BAND LOW",value:C.toFixed(2)}),e.jsx(R,{label:"MAX PAIN",value:L.toFixed(2)}),Z.filter(b=>b.strike<=n).slice(0,3).map((b,_e)=>{const re=l===`below-${_e}`;return e.jsxs("div",{onMouseEnter:()=>a(`below-${_e}`),onMouseLeave:()=>a(null),onClick:()=>p(b),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:re?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${c.cyan}`,transform:re?"translateX(4px)":"none",boxShadow:re?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[re&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:c.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:c.cyan},children:b.strike}),e.jsx("div",{style:{fontSize:10,color:c.cyan},children:"PUT WALL"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:c.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:c.text,marginBottom:4},children:[(b.gex*1e3).toFixed(1),"M"]}),e.jsx(h,{value:b.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.green},children:"POT. SUPPORT"})}),e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${c.amber}40`,borderRadius:4,color:c.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(v,{holdPct:b.holdPct,breakPct:b.breakPct})]},_e)}),e.jsx(de,{}),e.jsx(R,{label:"EM LOW",value:f.toFixed(2)})]}),Le=()=>e.jsxs("div",{children:[e.jsx(R,{label:"EM HIGH",value:Ge.toFixed(2)}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:Z.filter(b=>b.strike>n).slice(0,3).map((b,_e)=>e.jsxs("div",{onClick:()=>p(b),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:b.type==="CALL"?c.green:c.magenta},children:b.strike}),e.jsxs("div",{style:{fontSize:10,color:c.cyan},children:[b.type," WALL"]})]}),e.jsx("span",{style:{padding:"4px 8px",background:b.role.includes("RESISTANCE")?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",border:`1px solid ${b.role.includes("RESISTANCE")?c.red:c.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:b.role.includes("RESISTANCE")?c.red:c.green},children:b.role})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:10,color:c.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:c.text},children:[b.gex.toFixed(1),"M"]})]}),e.jsx(h,{value:b.gex*100})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(v,{holdPct:b.holdPct,breakPct:b.breakPct,size:"small"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:c.cyan},children:"BREAK"}),e.jsx("span",{style:{color:c.textMuted},children:"Open Space"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginTop:4},children:[e.jsx("span",{style:{color:c.green},children:"HOLD"}),e.jsx("span",{style:{color:c.textMuted},children:"Hold"})]})]})]},_e))}),e.jsx(I,{}),e.jsx(de,{}),e.jsx(G,{pts:42}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:Z.filter(b=>b.strike<=n).slice(0,3).map((b,_e)=>e.jsxs("div",{onClick:()=>p(b),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:c.cyan},children:b.strike}),e.jsx("div",{style:{fontSize:10,color:c.cyan},children:"PUT WALL"})]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:c.green},children:"POT. SUPPORT"})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:10,color:c.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:c.text},children:[b.gex.toFixed(1),"M"]})]}),e.jsx(h,{value:b.gex*100})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(v,{holdPct:b.holdPct,breakPct:b.breakPct,size:"small"})]})]},_e))})]}),z=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,padding:"12px 16px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:c.textMuted}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:"FIELD"}),e.jsx("div",{style:{fontSize:12,color:c.text,fontWeight:600},children:"NEUTRAL"})]})]}),e.jsx("span",{style:{padding:"6px 16px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:12,color:c.text},children:"WAIT"}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:"MID"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:40,height:4,background:c.green,borderRadius:2}}),e.jsx("div",{style:{width:20,height:4,background:c.red,borderRadius:2}}),e.jsx("span",{style:{fontSize:11,color:c.text},children:"67%"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:11,color:c.purple},children:""}),e.jsx("span",{style:{fontSize:10,color:c.text},children:"QUANTUM FIELD"}),e.jsx("span",{style:{padding:"2px 6px",background:c.cyan,borderRadius:4,fontSize:8,color:"#000",fontWeight:600},children:"BETA"})]}),["EXPANDED","NAV","BOUNDS"].map(b=>e.jsx("span",{style:{padding:"4px 12px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:10,color:c.text},children:b},b)),e.jsxs("div",{style:{marginLeft:"auto",fontSize:11,color:c.textMuted},children:["LEVELS: ",r," | SPOT: ",e.jsx("span",{style:{color:c.amber},children:n==null?void 0:n.toFixed(2)})]})]}),Z.slice(0,r).map((b,_e)=>{const re=b.strike>n,He=Math.abs(b.strike-n)<10;return e.jsxs("div",{children:[He&&re&&e.jsx(de,{}),e.jsxs("div",{onClick:()=>p(b),style:{background:`linear-gradient(90deg, rgba(139,92,246,${.1+Math.abs(b.gex)*.05}) 0%, rgba(139,92,246,${.2+Math.abs(b.gex)*.1}) 50%, rgba(139,92,246,${.1+Math.abs(b.gex)*.05}) 100%)`,padding:"20px 24px",marginBottom:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("div",{style:{width:4,height:30,background:b.type==="CALL"?c.green:c.cyan,borderRadius:2}}),e.jsx("span",{style:{fontSize:32,fontWeight:700,color:c.cyan,fontFamily:"'JetBrains Mono', monospace"},children:b.strike})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flex:1,justifyContent:"center"},children:[e.jsxs("span",{style:{fontSize:11,color:b.type==="CALL"?c.green:c.magenta},children:[b.type," | WALL"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.green},children:["POT. ","SUPPORT"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(255,255,255,0.1)",borderRadius:4,fontSize:9,color:c.textMuted},children:[Math.abs(b.distance),"pt ",b.distance>0?"above":"below"," spot"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"2px 8px",background:"rgba(0,0,0,0.3)",borderRadius:4},children:[e.jsxs("span",{style:{fontSize:9,color:c.green},children:["H:",b.holdPct,"%"]}),e.jsx("div",{style:{width:30,height:4,background:c.green,borderRadius:2}}),e.jsx("div",{style:{width:15,height:4,background:c.red,borderRadius:2}}),e.jsxs("span",{style:{fontSize:9,color:c.red},children:["B:",b.breakPct,"%"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:28,fontWeight:600,color:c.text},children:Math.abs(b.gex*100).toFixed(1)}),e.jsx("span",{style:{fontSize:14,color:c.textMuted},children:"M"}),e.jsxs("div",{style:{fontSize:10,color:c.textMuted},children:["18PT | L ",b.fieldHigh.toFixed(1)," - L ",b.fieldLow.toFixed(1)]})]})]}),_e===2&&e.jsx(G,{pts:42})]},_e)})]});Math.max(...w.map(b=>Math.abs(b.gex||0)),.01);const[Ie,Pe]=B.useState(null),[ne,ze]=B.useState({x:0,y:0});return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(11, 17, 32, 0.98) 0%, rgba(8, 12, 24, 0.99) 100%)",borderRadius:16,border:`1px solid ${c.border}`,padding:24,fontFamily:"'Inter', -apple-system, sans-serif",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h3",{style:{margin:0,color:c.text,fontSize:18,fontWeight:600},children:"GEX Profile"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:c.cyan,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:10,color:c.cyan,letterSpacing:"0.05em"},children:"LIVE"})]})]}),e.jsx("div",{style:{padding:"6px 12px",borderRadius:6,background:y==="POSITIVE"?"rgba(34,197,94,0.15)":y==="NEGATIVE"?"rgba(239,68,68,0.15)":"rgba(161,161,170,0.15)",border:`1px solid ${y==="POSITIVE"?c.green:y==="NEGATIVE"?c.red:c.textMuted}40`},children:e.jsxs("span",{style:{color:y==="POSITIVE"?c.green:y==="NEGATIVE"?c.red:c.textMuted,fontSize:12,fontWeight:600},children:[y," GEX: ",u>0?"+":"",u.toFixed(3),"B"]})})]}),e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.95)",borderRadius:12,padding:"16px 0",marginBottom:24,position:"relative",border:"1px solid rgba(255,255,255,0.05)",cursor:Ie?"none":"default"},children:[e.jsx("div",{style:{position:"relative",display:"flex"},children:(()=>{const b=W||n||4600,He=[...w].filter(te=>Math.abs(te.strike-b)<=300).sort((te,ke)=>Math.abs(te.strike-b)-Math.abs(ke.strike-b)).slice(0,40).sort((te,ke)=>ke.strike-te.strike),rt=Math.max(...He.map(te=>Math.abs(te.gex||0)),.01);n&&He.reduce((te,ke)=>Math.abs(ke.strike-n)<Math.abs(te.strike-n)?ke:te,He[0]),W&&He.reduce((te,ke)=>Math.abs(ke.strike-W)<Math.abs(te.strike-W)?ke:te,He[0]);const zt=He.map(te=>te.strike),Je=Math.min(...zt),Xe=Math.max(...zt),Ne=Math.ceil((Xe+20)/10)*10,oe=Math.floor((Je-20)/10)*10,fe=Ne-oe,we=900,A=[];for(let te=Ne;te>=oe;te-=10)A.push(te);return e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsx("div",{style:{width:55,height:we,position:"relative",borderRight:"1px solid rgba(255,255,255,0.1)",marginRight:8,flexShrink:0},children:A.map((te,ke)=>{const at=(Ne-te)/fe*we;return e.jsx("div",{style:{position:"absolute",top:at-6,right:8,fontSize:10,fontFamily:"'JetBrains Mono', monospace",color:"rgba(148,163,184,0.5)"},children:te},te)})}),e.jsxs("div",{style:{flex:1,height:we,position:"relative"},children:[A.map(te=>{const ke=(Ne-te)/fe*we;return e.jsx("div",{style:{position:"absolute",top:ke,left:0,right:0,height:1,background:"rgba(255,255,255,0.04)",pointerEvents:"none"}},`grid-${te}`)}),n&&e.jsx("div",{style:{position:"absolute",top:(Ne-n)/fe*we,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(132,204,22,0.8) 0%, rgba(132,204,22,0.2) 100%)",zIndex:5},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(132,204,22,0.2)",border:"1px solid rgba(132,204,22,0.4)",padding:"2px 6px",borderRadius:3,color:"#84cc16",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["SPOT ",n==null?void 0:n.toFixed(2)]})}),W&&Math.abs(W-n)>5&&e.jsx("div",{style:{position:"absolute",top:(Ne-W)/fe*we,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(34,211,238,0.6) 0%, rgba(34,211,238,0.1) 100%)",zIndex:4},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(34,211,238,0.15)",border:"1px solid rgba(34,211,238,0.35)",padding:"2px 6px",borderRadius:3,color:"#22d3ee",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["ZG ",W==null?void 0:W.toFixed(0)]})}),He.map((te,ke)=>{const at=(te.gex||0)<0,$e=Math.min(Math.abs(te.gex||0)/rt*60,60),Me=(Ie==null?void 0:Ie.strike)===te.strike,Qe=Math.abs(te.gex||0),Ft=Qe>=1?`${Qe.toFixed(1)}B`:`${(Qe*1e3).toFixed(0)}M`,J=Qe>rt*.25,st=n?Math.abs(Math.round(te.strike-n)):0,lt=te.call_oi||0,et=te.put_oi||0,ie=lt+et||1,g=Math.round(lt/ie*100),j=100-g,V=at?"#22d3ee":"#f472b6",M=(Ne-te.strike)/fe*we;return e.jsxs("div",{onMouseEnter:N=>{ze({x:N.clientX,y:N.clientY}),Pe({strike:te.strike,gex:te.gex,isCall:at,gexLabel:Ft,isWall:J,callPct:g,putPct:j,callOI:lt,putOI:et,distance:n?Math.round(te.strike-n):0})},onMouseMove:N=>ze({x:N.clientX,y:N.clientY}),onMouseLeave:()=>Pe(null),style:{position:"absolute",top:M-12,left:0,right:0,display:"flex",alignItems:"center",height:24,cursor:Ie?"none":"pointer",zIndex:Me?10:1},children:[e.jsx("div",{style:{width:`${$e}%`,minWidth:$e>3?10:0,height:Me?28:22,background:at?"rgba(34, 211, 238, 0.5)":"rgba(244, 114, 182, 0.5)",backdropFilter:"blur(4px)",borderRadius:"3px 8px 8px 3px",border:at?"1px solid rgba(34, 211, 238, 0.3)":"1px solid rgba(244, 114, 182, 0.3)",boxShadow:Me?at?"0 0 12px rgba(34,211,238,0.7), 0 0 30px rgba(34,211,238,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 0 12px rgba(244,114,182,0.7), 0 0 30px rgba(244,114,182,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 2px 6px rgba(0,0,0,0.25)",transition:"all 0.15s ease-out",transform:Me?"scale(1.02)":"none",flexShrink:0}}),e.jsxs("div",{style:{marginLeft:8,display:"flex",alignItems:"center",gap:4,fontSize:10,fontFamily:"'Inter', sans-serif",whiteSpace:"nowrap"},children:[e.jsx("span",{style:{color:"rgba(148,163,184,0.6)"},children:""}),e.jsx("span",{style:{color:"rgba(255,255,255,0.85)",fontWeight:500},children:J?"WALL":"LEVEL"}),e.jsxs("span",{style:{color:V,fontWeight:600,background:at?"rgba(34,211,238,0.12)":"rgba(244,114,182,0.12)",padding:"1px 5px",borderRadius:3},children:["(",at?"CALL":"PUT",")"]}),e.jsx("span",{style:{color:"#fff",fontWeight:700,marginLeft:2},children:Ft}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.5)",fontSize:9},children:["[",st,"pts]"]}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.4)",fontSize:9},children:["C:",g,"% P:",j,"%"]})]})]},ke)})]})]})})()}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:24,marginTop:14,paddingTop:10,paddingLeft:70,borderTop:"1px solid rgba(255,255,255,0.04)",fontSize:9,color:"rgba(148,163,184,0.5)",fontFamily:"'Inter', sans-serif"},children:[e.jsx("span",{children:" MAGNET (attractor)"}),e.jsx("span",{children:" WALL (barrier)"}),e.jsx("span",{children:"Glow = Field Width"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{margin:0,color:c.text,fontSize:18,fontWeight:600},children:"Strategic Levels"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(255,255,255,0.05)",borderRadius:6},children:[e.jsx("span",{style:{fontSize:11,color:c.textMuted},children:"LEVELS"}),e.jsx("select",{value:r,onChange:b=>s(Number(b.target.value)),style:{background:"transparent",border:"none",color:c.text,fontSize:12,cursor:"pointer"},children:[5,10,15,20].map(b=>e.jsx("option",{value:b,children:b},b))})]}),e.jsx("div",{style:{display:"flex",background:"rgba(255,255,255,0.05)",borderRadius:6,overflow:"hidden"},children:[{id:"table",icon:""},{id:"card",icon:""},{id:"quantum",icon:""}].map(b=>e.jsx("button",{onClick:()=>i(b.id),style:{padding:"8px 12px",background:o===b.id?c.purple:"transparent",border:"none",color:o===b.id?"#fff":c.textMuted,fontSize:14,cursor:"pointer",transition:"all 0.2s ease"},children:b.icon},b.id))})]})]}),o==="table"&&e.jsx(T,{}),o==="card"&&e.jsx(Le,{}),o==="quantum"&&e.jsx(z,{}),d&&e.jsx(S,{level:d,onClose:()=>p(null)}),Ie&&(()=>{var Xe;const b=Ie.isCall?"#22d3ee":"#f472b6",_e=Ie.isCall?"rgba(34,211,238,0.1)":"rgba(244,114,182,0.1)",re=Ie.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)",He=Ie.isCall?71:48,rt=100-He;let zt=ne.x+8,Je=ne.y-8;return zt+240>window.innerWidth-10&&(zt=ne.x-248),Je<10&&(Je=10),Je+340>window.innerHeight-10&&(Je=window.innerHeight-350),e.jsxs("div",{style:{position:"fixed",left:zt,top:Je,width:240,background:"rgba(15, 23, 42, 0.98)",border:`1px solid ${re}`,borderRadius:12,padding:16,zIndex:99999,pointerEvents:"none",boxShadow:`0 0 20px ${Ie.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)"}, 0 8px 32px rgba(0,0,0,0.5)`,fontFamily:"'Inter', sans-serif",transform:"translateZ(0)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[e.jsx("span",{style:{fontSize:30,fontWeight:700,color:b,fontFamily:"'JetBrains Mono', monospace"},children:(Xe=Ie.strike)==null?void 0:Xe.toFixed(0)}),e.jsxs("span",{style:{fontSize:11,fontWeight:600,color:b,background:_e,padding:"4px 10px",borderRadius:5,border:`1px solid ${re}`},children:[" ",Ie.isWall?"WALL":"LEVEL"," (",Ie.isCall?"CALL":"PUT",")"]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.6)",marginBottom:5},children:[e.jsx("span",{children:"OPEN INTEREST"}),e.jsx("span",{style:{color:"#e2e8f0"},children:((Ie.callOI||0)+(Ie.putOI||0)).toLocaleString()})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsxs("span",{children:["C: ",(Ie.callOI||0).toLocaleString()]}),e.jsxs("span",{children:["P: ",(Ie.putOI||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${Ie.callPct}%`,background:"#22d3ee"}}),e.jsx("div",{style:{width:`${Ie.putPct}%`,background:"#f472b6"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:9,marginTop:3},children:[e.jsxs("span",{style:{color:"#22d3ee"},children:[Ie.callPct,"%"]}),e.jsxs("span",{style:{color:"#f472b6"},children:[Ie.putPct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",border:"1px solid rgba(139,92,246,0.2)",borderRadius:8,padding:10,marginBottom:14},children:[e.jsx("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:5},children:"QUANTUM FIELD"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#e2e8f0"},children:[e.jsxs("span",{children:["L ",(Ie.strike+9).toFixed(0)]}),e.jsx("span",{style:{color:"rgba(148,163,184,0.4)"},children:""}),e.jsxs("span",{children:[(Ie.strike-9).toFixed(0)," L"]})]}),e.jsx("div",{style:{fontSize:11,color:"#a855f7",textAlign:"center",marginTop:5},children:"18.4 pts influence"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:14},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"MASS"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:Ie.gexLabel})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"EFFECTIVE"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:Ie.gexLabel})]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"INTEGRITY"}),e.jsx("span",{style:{color:"#e2e8f0"},children:"100%"})]}),e.jsx("div",{style:{height:5,background:"rgba(0,0,0,0.4)",borderRadius:3},children:e.jsx("div",{style:{width:"100%",height:"100%",background:b,borderRadius:3}})})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"HOLD / BREAK"}),e.jsxs("span",{children:["H:",He,"% B:",rt,"%"]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${He}%`,background:"#22c55e"}}),e.jsx("div",{style:{width:`${rt}%`,background:"#ef4444"}})]})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:12,color:"rgba(148,163,184,0.6)",paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[Ie.distance>0?"+":"",Ie.distance," pts (",(Math.abs(Ie.distance)/(n||1)*100).toFixed(2),"%)"]})]})})()]})},bg=()=>{const[t,n]=B.useState(new Date),[o,i]=B.useState(null);B.useEffect(()=>{const d=setInterval(()=>n(new Date),1e3);return()=>clearInterval(d)},[]);const r=[{id:"japan",name:"Japan",time:"19:00-20:00",color:"#9370DB",start:1900,end:2e3},{id:"china",name:"China",time:"20:00-23:00",color:"#F472B6",start:2e3,end:2300},{id:"deadzone",name:"Deadzone",time:"02:00-03:00",color:"#6B7280",start:200,end:300},{id:"london",name:"London",time:"03:00-06:00",color:"#3B82F6",start:300,end:600},{id:"us_ib",name:"US IB",time:"08:20-09:30",color:"#F59E0B",start:820,end:930},{id:"ny_1h",name:"NY 1H",time:"09:30-10:30",color:"#10B981",start:930,end:1030},{id:"ny_2h",name:"NY 2H",time:"10:30-11:30",color:"#06B6D4",start:1030,end:1130},{id:"lunch",name:"Lunch",time:"11:30-13:30",color:"#8B5CF6",start:1130,end:1330},{id:"ny_pm",name:"NY PM",time:"13:30-16:00",color:"#EF4444",start:1330,end:1600}],l=(()=>{const d=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),p=d.getHours(),w=d.getMinutes(),y=p*100+w;return y>=1900&&y<2e3?"japan":y>=2e3&&y<2300?"china":y>=200&&y<300?"deadzone":y>=300&&y<600?"london":y>=820&&y<930?"us_ib":y>=930&&y<1030?"ny_1h":y>=1030&&y<1130?"ny_2h":y>=1130&&y<1330?"lunch":y>=1330&&y<1600?"ny_pm":null})(),a=l!==null;return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",marginBottom:16,padding:"24px 16px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative",width:"100%"},children:[e.jsx("div",{style:{position:"absolute",top:60,left:50,right:50,height:1,background:"rgba(255,255,255,0.1)",zIndex:0}}),r.map((d,p)=>{const w=d.id===l,y=o===d.id,u=(()=>{if(!a)return!1;const L=r.findIndex(Z=>Z.id===l);return p<L})(),W=90;return e.jsx("div",{onMouseEnter:()=>i(d.id),onMouseLeave:()=>i(null),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",zIndex:y?10:1,cursor:"pointer",minWidth:80,height:120},children:e.jsxs("div",{style:{width:W,height:W,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,background:w?"linear-gradient(135deg, rgba(20,20,28,1) 0%, rgba(15,15,22,1) 100%)":y?"linear-gradient(135deg, rgba(30,30,40,1) 0%, rgba(25,25,35,1) 100%)":"rgb(20, 20, 28)",border:w?`2px solid ${d.color}`:y?`2px solid ${d.color}80`:"1px solid rgba(255,255,255,0.08)",opacity:a?u?.5:1:.7,transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:w?`0 0 25px ${d.color}50, 0 8px 32px rgba(0,0,0,0.4)`:y?`0 0 30px ${d.color}40, 0 12px 40px rgba(0,0,0,0.5)`:"0 4px 12px rgba(0,0,0,0.3)",position:"relative",transform:y?"scale(1.2) translateY(-5px)":"scale(1) translateY(0)",zIndex:y?5:1},children:[e.jsx("div",{style:{width:y?12:10,height:y?12:10,borderRadius:"50%",background:d.color,boxShadow:w||y?`0 0 12px ${d.color}`:"none",animation:w?"sessionDotPulse 1.5s ease-in-out infinite":"none",transition:"all 0.3s ease"}}),e.jsx("span",{style:{fontSize:y?16:14,color:w?d.color:y?"#fff":a?"#e5e5e5":"#888",fontWeight:600,textAlign:"center",lineHeight:1.1,transition:"all 0.3s ease",textShadow:y?`0 0 10px ${d.color}60`:"none"},children:d.name}),e.jsx("span",{style:{fontSize:y?9:8,color:w||y?d.color:a?"#666":"#555",fontFamily:"'JetBrains Mono', monospace",opacity:.9,transition:"all 0.3s ease"},children:d.time}),w&&a&&e.jsx("div",{style:{position:"absolute",bottom:-10,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000",fontSize:8,fontWeight:700,padding:"3px 10px",borderRadius:10,letterSpacing:"0.05em",boxShadow:"0 4px 12px rgba(0,255,136,0.6)",animation:"liveBadgePulse 2s ease-in-out infinite"},children:"LIVE"})]})},d.id)})]})}),e.jsx("style",{children:`
        @keyframes sessionDotPulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.7; transform: scale(1.2); }
        }
        @keyframes liveBadgePulse {
          0%, 100% { box-shadow: 0 4px 12px rgba(0,255,136,0.6); }
          50% { box-shadow: 0 4px 20px rgba(0,255,136,0.9); }
        }
      `})]})},vg=({gexData:t,currentPrice:n})=>{const[o,i]=B.useState(!1),[r,s]=B.useState(!1),l=(t==null?void 0:t.gamma_regime)||"UNKNOWN",a=(t==null?void 0:t.total_gex)||0,d=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0,p=(t==null?void 0:t.hvl)||0,w=n?(n-d).toFixed(1):0,y=n>d,u=54.09,W=17.73,L=94.8,Z=85,Ge=1.75,f={green:"#22c55e",red:"#ef4444",cyan:"#22d3ee",purple:"#a855f7",amber:"#f59e0b",text:"#f4f4f5",textMuted:"#71717a"};return o?e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:"16px 24px",marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:f.purple,fontSize:16,fontWeight:600},children:"Market Pulse"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:600,background:l==="NEGATIVE"?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",color:l==="NEGATIVE"?f.red:f.green},children:l})]}),e.jsx("button",{onClick:()=>i(!1),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:f.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"+ EXPAND"})]}):e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:f.purple,fontSize:18,fontWeight:600},children:"Market Pulse"})]}),e.jsx("button",{onClick:()=>i(!0),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:f.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:" COLLAPSE"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",gap:24},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:8},children:"GAMMA REGIME"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:l==="NEGATIVE"?f.red:f.green,boxShadow:`0 0 10px ${l==="NEGATIVE"?f.red:f.green}`}}),e.jsxs("span",{style:{fontSize:18,fontWeight:700,color:l==="NEGATIVE"?f.red:f.green,letterSpacing:"0.05em"},children:["CONFIRMED ",l]})]}),e.jsxs("div",{style:{fontSize:12,color:f.textMuted,marginBottom:16},children:["Net GEX: ",e.jsxs("span",{style:{color:a<0?f.red:f.green,fontWeight:600},children:[a.toFixed(2),"B"]})]}),e.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:8,marginTop:24},children:"VOLATILITY REGIME"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:f.text,marginBottom:4},children:l==="NEGATIVE"?"EXPANSION":"CONTRACTION"}),e.jsxs("div",{style:{fontSize:12,color:f.cyan},children:["GVI Magnitude: ",e.jsx("span",{style:{fontWeight:600},children:Ge})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginBottom:16,fontSize:13,color:f.textMuted,lineHeight:1.6},children:["Spot price is ",e.jsxs("span",{style:{color:f.text,fontWeight:600},children:[Math.abs(w)," points ",y?"above":"below"," Zero Gamma"]}),".",l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[" Dealers hedge against explosive moves by amplifying volatility and reinforcing trend continuation. Requires ",e.jsx("span",{style:{color:f.amber},children:"extreme caution"})," around breakouts."]}):e.jsxs(e.Fragment,{children:[" Dealers hedge by dampening volatility and providing mean reversion. Expect ",e.jsx("span",{style:{color:f.green},children:"range-bound"})," price action."]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:[{label:"ATR",value:u.toFixed(2)},{label:"VIX",value:W.toFixed(2)},{label:"EXP. MOVE",value:L.toFixed(1)}].map(({label:m,value:C})=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:6},children:m}),e.jsx("div",{style:{fontSize:20,fontWeight:600,color:f.text},children:C})]},m))}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:f.textMuted},children:"REALIZED VS EXPECTED RANGE"}),e.jsxs("span",{style:{fontSize:11,color:f.text},children:[Z," / ",L.toFixed(1)," (",Math.round(Z/L*100),"%)"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(Z/L*100,100)}%`,height:"100%",background:f.amber,borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Sentiment (Skew):"}),e.jsx("span",{style:{color:f.text},children:"Neutral (-0.01)"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Stability (Speed):"}),e.jsx("span",{style:{color:f.text},children:"Normal"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Vanna:"}),e.jsx("span",{style:{color:f.cyan},children:"Vol Support"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Charm:"}),e.jsx("span",{style:{color:f.text},children:"Price Pressure"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Magnete Charm:"}),e.jsxs("span",{style:{color:f.purple},children:["Pressione (",d.toFixed(2),")"]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,background:"rgba(34,197,94,0.1)",borderRadius:8,marginTop:20,border:"1px solid rgba(34,197,94,0.3)"},children:[e.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:f.green,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:f.green,fontWeight:600,marginBottom:2},children:"VOLATILITY DIAGNOSIS"}),e.jsx("div",{style:{fontSize:12,color:f.textMuted},children:"Confirmation: The multi-factor analysis (Speed/Convexity) confirms the detected regime."})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"rgba(168,85,247,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,color:f.text,fontWeight:600},children:"AI Deep Analysis"}),e.jsx("div",{style:{fontSize:11,color:f.textMuted},children:"Market Structure & 0DTE Strategy"})]})]}),e.jsx("button",{onClick:()=>s(!r),style:{padding:"10px 20px",background:r?"rgba(168,85,247,0.3)":"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)",border:r?"1px solid #a855f7":"none",borderRadius:8,color:"#fff",fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:r?" CLOSE":" VIEW ANALYSIS"})]}),r&&e.jsxs("div",{style:{marginTop:16,padding:20,background:"linear-gradient(135deg, rgba(168,85,247,0.1) 0%, rgba(124,58,237,0.1) 100%)",border:"1px solid rgba(168,85,247,0.3)",borderRadius:12},children:[e.jsxs("div",{style:{fontSize:14,color:f.purple,fontWeight:600,marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," AI Market Structure Analysis"]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:f.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"MARKET CONTEXT"}),e.jsx("div",{style:{fontSize:13,color:f.text,lineHeight:1.7},children:l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.red,fontWeight:600},children:" High Volatility Environment:"})," The market is in a negative gamma regime, meaning dealers are short gamma and must hedge in the same direction as price moves. This creates a",e.jsx("span",{style:{color:f.amber},children:" feedback loop that amplifies volatility"}),"."]}),e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.cyan,fontWeight:600},children:"Key Implications:"}),e.jsx("br",{})," Breakouts tend to extend further than expected",e.jsx("br",{})," Mean reversion strategies carry higher risk",e.jsx("br",{})," Gamma squeezes can occur at key levels",e.jsx("br",{})," Stop runs are more likely"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.green,fontWeight:600},children:" Stable Environment:"})," The market is in a positive gamma regime, meaning dealers are long gamma and hedge against price moves. This creates a",e.jsx("span",{style:{color:f.green},children:" dampening effect that reduces volatility"}),"."]}),e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.cyan,fontWeight:600},children:"Key Implications:"}),e.jsx("br",{})," Price tends to revert to mean (VWAP, HVL)",e.jsx("br",{})," Range-bound trading strategies favored",e.jsx("br",{})," Breakout attempts often fade",e.jsx("br",{})," Options premium selling has edge"]})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:f.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"0DTE STRATEGY RECOMMENDATION"}),e.jsxs("div",{style:{padding:16,background:l==="NEGATIVE"?"rgba(239,68,68,0.1)":"rgba(34,197,94,0.1)",border:`1px solid ${l==="NEGATIVE"?"rgba(239,68,68,0.3)":"rgba(34,197,94,0.3)"}`,borderRadius:8},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:l==="NEGATIVE"?f.red:f.green,marginBottom:8},children:l==="NEGATIVE"?" TREND FOLLOWING / BREAKOUT":" MEAN REVERSION / RANGE"}),e.jsx("div",{style:{fontSize:12,color:f.text,lineHeight:1.6},children:l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[" Trade with momentum, not against it",e.jsx("br",{})," Use wider stops due to increased volatility",e.jsx("br",{})," Consider strangles/straddles for directional plays",e.jsx("br",{})," Watch for gamma squeeze at ",d.toFixed(2)," (Zero Gamma)"]}):e.jsxs(e.Fragment,{children:[" Fade moves away from VWAP and HVL",e.jsx("br",{})," Iron condors and butterflies have edge",e.jsx("br",{})," Tighter stops acceptable in low-vol environment",e.jsx("br",{})," Expect reversion to ",p>0?p.toFixed(2):d.toFixed(2)," (HVL/ZG)"]})})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:f.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"KEY GAMMA LEVELS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"ZERO GAMMA"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.amber},children:["$",d.toFixed(2)]}),e.jsxs("div",{style:{fontSize:9,color:n>d?f.green:f.red},children:[n>d?"":""," ",Math.abs(w)," pts"]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"HVL"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.cyan},children:["$",p>0?p.toFixed(2):"--"]}),e.jsx("div",{style:{fontSize:9,color:f.textMuted},children:"High Volume Level"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"NET GEX"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:a<0?f.red:f.green},children:[a.toFixed(2),"B"]}),e.jsx("div",{style:{fontSize:9,color:f.textMuted},children:a<0?"Dealer Short Gamma":"Dealer Long Gamma"})]})]})]})]})]})},on="https://projecthorizon-production.up.railway.app",ua="https://projecthorizon-production.up.railway.app/redfolder",jg="18.7.0";console.log("Horizon v"+jg);const Sg=B.createContext(null),zp=B.createContext(null),wg=()=>B.useContext(zp);B.createContext({isMobile:!1,isTablet:!1,screenWidth:1200});const $i=()=>{const[t,n]=B.useState({width:typeof window<"u"?window.innerWidth:1200,height:typeof window<"u"?window.innerHeight:800});return B.useEffect(()=>{const o=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",o),o(),()=>window.removeEventListener("resize",o)},[]),{isMobile:t.width<768,isTablet:t.width>=768&&t.width<1024,isDesktop:t.width>=1024,screenWidth:t.width,screenHeight:t.height}},Bp={deltaThreshold:-2500,buyingImbalancePct:400,entryTiers:{tier1:25,tier2:40,tier3:35},targetTiers:{vwap:50,ibMid:35,ibHigh:15},filters:{grades:{A:!0,B:!0,C:!0,F:!0},tiers:{1:!0,2:!0,3:!0},minR:-10},divergenceThreshold:0},kg=t=>{const n=[],o=new Date("2025-08-20"),i=new Date("2025-12-28");let r=12345;const s=()=>(r=(r*9301+49297)%233280,r/233280);let l=1,a=new Date(o);for(;a<=i;){if(s()<.35){const d=s()<.35?"A":s()<.65?"B":"C",p=s()<.25?1:s()<.65?2:3,w=["I","II","III"][p-1],y=d==="A"?.82:d==="B"?.71:.52,u=s()<y,W=u?s()<.5?"VWAP":s()<.7?"IB_MID":"IB_HIGH":"STOP_LOSS",L=Math.ceil(s()*8)+2,Z=W==="STOP_LOSS"?-1:1.5+s()*2,f=3320+(a-o)/(1e3*60*60*24)*.5+(s()-.5)*40,m=Math.round(Z*35*10*L);n.push({id:l++,date:a.toISOString().split("T")[0],entry:Math.round(f*100)/100,exit:Math.round((f+(u?Z*3.5:-3.5))*100)/100,stop_loss:Math.round((f-3.5)*100)/100,pnl:m,r:Math.round(Z*10)/10,grade:d,tier:p,tierRoman:w,exitReason:W,contracts:L,delta:-1500-Math.floor(s()*3500),buyingImbalance:250+Math.floor(s()*400),conditionsMet:d==="A"?6:d==="B"?5:4,levels:{ib_high:Math.round((f+15)*100)/100,ib_low:Math.round((f-10)*100)/100,ib_mid:Math.round((f+2.5)*100)/100,pdpoc:Math.round((f-5)*100)/100,vwap:Math.round((f+5)*100)/100,pd_high:Math.round((f+20)*100)/100,pd_low:Math.round((f-15)*100)/100}})}for(a.setDate(a.getDate()+1);a.getDay()===0||a.getDay()===6;)a.setDate(a.getDate()+1)}return n},Cg=()=>{const[t,n]=B.useState({trades:null,stats:null,source:"loading",metadata:null,sessions:null,volumeProfiles:null,bigVolumeDays:null,supportResistance:null,seasonality:null,dailyCandles:null,hourlyCandles:null,featureStatistics:null,distributions:null});return B.useEffect(()=>{(async()=>{var i,r,s,l;try{const a=await fetch("/backtest_data.json");if(a.ok){const d=await a.json();if(d.trades&&d.trades.length>0){console.log(` Loaded ${d.trades.length} trades from ${((r=(i=d.metadata)==null?void 0:i.data_range)==null?void 0:r.start)||"backtest_data.json"} to ${(l=(s=d.metadata)==null?void 0:s.data_range)==null?void 0:l.end}`),n({trades:d.trades,stats:d.statistics||d.stats,source:"historical_5y",metadata:d.metadata,sessions:d.sessions,volumeProfiles:d.volume_profiles,bigVolumeDays:d.big_volume_days,supportResistance:d.support_resistance,seasonality:d.seasonality,dailyCandles:d.daily_candles,hourlyCandles:d.hourly_candles,featureStatistics:d.feature_statistics,distributions:d.distributions});return}}}catch(a){console.log("No backtest_data.json found:",a)}console.log("Using generated mock data (run generate_backtest.py for real data)"),n({trades:null,stats:null,source:"mock"})})()},[]),t},_g=(t,n)=>{var F,S,R,I,de,G;if(t.length===0)return{summary:{total_trades:0,winners:0,losers:0,win_rate:0,total_pnl:0,adjusted_pnl:0,gross_profit:0,gross_loss:0,profit_factor:0,avg_win:0,avg_loss:0,avg_r_multiple:0,max_drawdown:0,max_drawdown_pct:0,final_equity:1e6},yearly_pnl:[],weekly_pnl:[],exit_reasons:{VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0},grade_stats:{A:{trades:0,winners:0,pnl:0,win_rate:0},B:{trades:0,winners:0,pnl:0,win_rate:0},C:{trades:0,winners:0,pnl:0,win_rate:0}},tier_stats:{TIER_I:{trades:0,winners:0,pnl:0,win_rate:0},TIER_II:{trades:0,winners:0,pnl:0,win_rate:0},TIER_III:{trades:0,winners:0,pnl:0,win_rate:0}}};const o={1:(((F=n.entryTiers)==null?void 0:F.tier1)||25)/25,2:(((S=n.entryTiers)==null?void 0:S.tier2)||40)/40,3:(((R=n.entryTiers)==null?void 0:R.tier3)||35)/35},i={VWAP:(((I=n.targetTiers)==null?void 0:I.vwap)||50)/50,IB_MID:(((de=n.targetTiers)==null?void 0:de.ibMid)||35)/35,IB_HIGH:(((G=n.targetTiers)==null?void 0:G.ibHigh)||15)/15,STOP_LOSS:1},r=t.map(v=>{const h=o[v.tier]||1,T=v.pnl>0&&i[v.exitReason]||1,Le=v.pnl*h*T;return{...v,adjustedPnl:Le,originalPnl:v.pnl}}),s=r.filter(v=>v.adjustedPnl>0),l=r.filter(v=>v.adjustedPnl<=0),a=s.reduce((v,h)=>v+h.adjustedPnl,0),d=Math.abs(l.reduce((v,h)=>v+h.adjustedPnl,0)),p=a-d,w=t.reduce((v,h)=>v+h.pnl,0);let y=1e6,u=y,W=0;r.forEach(v=>{y+=v.adjustedPnl,y>u&&(u=y);const h=u-y;h>W&&(W=h)});const L={};r.forEach(v=>{const h=parseInt(v.date.split("-")[0]);L[h]||(L[h]={year:h,trades:0,winners:0,losers:0,pnl:0}),L[h].trades++,v.adjustedPnl>0?L[h].winners++:L[h].losers++,L[h].pnl+=v.adjustedPnl});const Z=Object.values(L).map(v=>({...v,win_rate:v.trades>0?v.winners/v.trades:0})).sort((v,h)=>v.year-h.year),Ge={};r.forEach(v=>{const h=new Date(v.date),T=h.getFullYear(),Le=Math.ceil((h-new Date(T,0,1))/(7*24*60*60*1e3)),z=`${T}-W${Le}`;Ge[z]||(Ge[z]={week:Le,year:T,trades:0,pnl:0,winners:0}),Ge[z].trades++,Ge[z].pnl+=v.adjustedPnl,v.adjustedPnl>0&&Ge[z].winners++});const f=Object.values(Ge).map(v=>({...v,win_rate:v.trades>0?v.winners/v.trades:0})),m={VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0};t.forEach(v=>{m[v.exitReason]!==void 0&&m[v.exitReason]++});const C={A:{trades:0,winners:0,pnl:0},B:{trades:0,winners:0,pnl:0},C:{trades:0,winners:0,pnl:0}};r.forEach(v=>{C[v.grade]&&(C[v.grade].trades++,v.adjustedPnl>0&&C[v.grade].winners++,C[v.grade].pnl+=v.adjustedPnl)}),Object.keys(C).forEach(v=>{C[v].win_rate=C[v].trades>0?C[v].winners/C[v].trades:0});const c={TIER_I:{trades:0,winners:0,pnl:0},TIER_II:{trades:0,winners:0,pnl:0},TIER_III:{trades:0,winners:0,pnl:0}};return r.forEach(v=>{const h=["TIER_I","TIER_II","TIER_III"][v.tier-1]||"TIER_I";c[h].trades++,v.adjustedPnl>0&&c[h].winners++,c[h].pnl+=v.adjustedPnl}),Object.keys(c).forEach(v=>{c[v].win_rate=c[v].trades>0?c[v].winners/c[v].trades:0}),{summary:{total_trades:t.length,winners:s.length,losers:l.length,win_rate:t.length>0?s.length/t.length:0,total_pnl:p,original_pnl:w,pnl_difference:p-w,gross_profit:a,gross_loss:-d,profit_factor:d>0?a/d:a>0?1/0:0,avg_win:s.length>0?a/s.length:0,avg_loss:l.length>0?-d/l.length:0,avg_r_multiple:t.length>0?t.reduce((v,h)=>v+h.r,0)/t.length:0,max_drawdown:W,max_drawdown_pct:u>0?W/u:0,final_equity:1e6+p},yearly_pnl:Z,weekly_pnl:f,exit_reasons:m,grade_stats:C,tier_stats:c}},ga=(t,n)=>{const[o,i]=B.useState(()=>{try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):n}catch{return n}});return B.useEffect(()=>{window.localStorage.setItem(t,JSON.stringify(o))},[t,o]),[o,i]},dd="JBSWY3DPEHPK3PXP",Tg=async(t,n=dd)=>{const o=[-1,0,1];for(const i of o){const r=Math.floor(Date.now()/1e3/30)+i,s=new Uint8Array(8);let l=r;for(let d=7;d>=0;d--)s[d]=l&255,l=Math.floor(l/256);const a=d=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let w="";for(let u=0;u<d.length;u++){const W=p.indexOf(d.charAt(u).toUpperCase());W!==-1&&(w+=W.toString(2).padStart(5,"0"))}const y=[];for(let u=0;u+8<=w.length;u+=8)y.push(parseInt(w.substr(u,8),2));return new Uint8Array(y)};try{const d=a(n),p=await crypto.subtle.importKey("raw",d,{name:"HMAC",hash:"SHA-1"},!1,["sign"]),w=new Uint8Array(await crypto.subtle.sign("HMAC",p,s)),y=w[w.length-1]&15,W=(((w[y]&127)<<24|(w[y+1]&255)<<16|(w[y+2]&255)<<8|w[y+3]&255)%1e6).toString().padStart(6,"0");if(t===W)return!0}catch(d){console.error("TOTP verification error:",d)}}return!1},Rg=({onLogin:t})=>{const[n,o]=B.useState({username:"",password:""}),[i,r]=B.useState(""),[s,l]=B.useState(1),[a,d]=B.useState(!1),[p,w]=B.useState(""),[y,u]=B.useState(!1),W=async f=>{f.preventDefault(),u(!0),w(""),await new Promise(m=>setTimeout(m,500)),n.username==="horizon"&&n.password==="[i68E[4S1k,4"?l(2):w("Invalid credentials"),u(!1)},L=async f=>{f.preventDefault(),u(!0),w(""),await Tg(i)?t({username:n.username,role:"trader"}):w("Invalid 2FA code. Please try again."),u(!1)},Z=`otpauth://totp/ProjectHorizon:horizon?secret=${dd}&issuer=ProjectHorizon&algorithm=SHA1&digits=6&period=30`,Ge=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(Z)}`;return e.jsx("div",{style:Q.loginContainer,children:e.jsxs("div",{style:Q.loginCard,children:[e.jsxs("div",{style:Q.loginHeader,children:[e.jsxs("div",{style:Q.logo,children:[e.jsx("div",{style:Q.logoIcon,children:e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 40 40",fill:"none",children:[e.jsx("rect",{x:"4",y:"4",width:"32",height:"32",rx:"8",stroke:"#00ff88",strokeWidth:"2",fill:"rgba(0,255,136,0.1)"}),e.jsx("path",{d:"M20 12L28 20L20 28L12 20L20 12Z",fill:"#00ff88"}),e.jsx("circle",{cx:"20",cy:"20",r:"4",fill:"#0a0a0f"})]})}),e.jsx("span",{style:Q.logoText,children:"PROJECT HORIZON"})]}),e.jsx("p",{style:Q.loginSubtitle,children:"Not the, 1%."})]}),s===1?e.jsxs("form",{onSubmit:W,style:Q.loginForm,children:[e.jsxs("div",{style:Q.inputGroup,children:[e.jsx("label",{style:Q.inputLabel,children:"Username"}),e.jsx("input",{type:"text",value:n.username,onChange:f=>o({...n,username:f.target.value}),style:Q.input,placeholder:"Enter username"})]}),e.jsxs("div",{style:Q.inputGroup,children:[e.jsx("label",{style:Q.inputLabel,children:"Password"}),e.jsx("input",{type:"password",value:n.password,onChange:f=>o({...n,password:f.target.value}),style:Q.input,placeholder:"Enter password"})]}),p&&e.jsx("div",{style:Q.error,children:p}),e.jsx("button",{type:"submit",style:Q.loginButton,disabled:y,children:y?"Verifying...":"Continue"})]}):e.jsx("div",{style:Q.loginForm,children:a?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{color:"#888",marginBottom:16,fontSize:13},children:"Scan this QR code with your authenticator app:"}),e.jsx("img",{src:Ge,alt:"2FA QR Code",style:{width:180,height:180,borderRadius:8,marginBottom:16,background:"#fff",padding:8}}),e.jsxs("p",{style:{color:"#666",fontSize:11,marginBottom:8},children:["Or enter manually: ",e.jsx("code",{style:{color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"2px 6px",borderRadius:4},children:dd})]}),e.jsx("button",{onClick:()=>d(!1),style:{...Q.loginButton,marginTop:16},children:"I've Added It"})]}):e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",background:"rgba(0,255,136,0.1)",border:"2px solid #00ff88",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),e.jsx("p",{style:{color:"#fff",fontSize:15,fontWeight:600,fontFamily:"'Inter', sans-serif",marginBottom:6},children:"Two-Factor Authentication"}),e.jsx("p",{style:{color:"#888",fontSize:12,fontFamily:"'Inter', sans-serif"},children:"Enter the 6-digit code from your authenticator app"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:8,marginBottom:20},children:[0,1,2,3,4,5].map(f=>e.jsx("input",{id:`totp-${f}`,type:"text",inputMode:"numeric",maxLength:1,value:i[f]||"",onChange:m=>{var c;const C=m.target.value.replace(/\D/g,"");if(C.length<=1){const F=i.split("");F[f]=C,r(F.join("").slice(0,6)),C&&f<5&&((c=document.getElementById(`totp-${f+1}`))==null||c.focus())}},onKeyDown:m=>{var C;m.key==="Backspace"&&!i[f]&&f>0&&((C=document.getElementById(`totp-${f-1}`))==null||C.focus())},onPaste:m=>{var F;m.preventDefault();const C=m.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);r(C);const c=Math.min(C.length,5);(F=document.getElementById(`totp-${c}`))==null||F.focus()},style:{width:48,height:56,textAlign:"center",fontSize:24,fontFamily:'"SF Mono", "JetBrains Mono", "Fira Code", Consolas, monospace',fontWeight:600,background:"rgba(0,0,0,0.5)",border:i[f]?"2px solid #00ff88":"2px solid rgba(255,255,255,0.15)",borderRadius:10,color:"#fff",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",boxShadow:i[f]?"0 0 10px rgba(0,255,136,0.2)":"none"},onFocus:m=>m.target.style.borderColor="#00ff88",onBlur:m=>m.target.style.borderColor=i[f]?"#00ff88":"rgba(255,255,255,0.15)",autoFocus:f===0},f))}),p&&e.jsx("div",{style:Q.error,children:p}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("button",{type:"submit",style:{...Q.loginButton,width:"200px"},disabled:y||i.length!==6,children:y?"Verifying...":"VERIFY & LOGIN"}),e.jsx("div",{style:{width:"200px",display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx("button",{type:"button",onClick:()=>{l(1),w(""),r("")},style:{background:"transparent",border:"none",color:"#666",fontSize:11,cursor:"pointer",fontFamily:"'Inter', sans-serif"},children:" Back to login"})})]})]})}),e.jsx("div",{style:Q.loginFooter,children:e.jsx("p",{style:Q.footerText,children:"2FA Protected"})})]})})},zg=()=>{var S;const[t,n]=B.useState(null),[o,i]=B.useState(!0),[r,s]=B.useState(null),[l,a]=B.useState("1D"),[d,p]=B.useState("1M"),[w,y]=B.useState(null),[u,W]=B.useState({x:0,y:0}),{isMobile:L}=$i(),Z={"1D":{GC:{GC:1,SI:.92,CHF:.7,JPY:.66,US10Y:-.44,DXY:-.82},SI:{GC:.92,SI:1,CHF:.62,JPY:.56,US10Y:-.38,DXY:-.74},CHF:{GC:.7,SI:.62,CHF:1,JPY:.76,US10Y:-.32,DXY:-.86},JPY:{GC:.66,SI:.56,JPY:1,CHF:.76,US10Y:-.28,DXY:-.72},US10Y:{GC:-.44,SI:-.38,CHF:-.32,JPY:-.28,US10Y:1,DXY:.54},DXY:{GC:-.82,SI:-.74,CHF:-.86,JPY:-.72,US10Y:.54,DXY:1}},"1W":{GC:{GC:1,SI:.94,CHF:.74,JPY:.7,US10Y:-.48,DXY:-.85},SI:{GC:.94,SI:1,CHF:.66,JPY:.6,US10Y:-.42,DXY:-.78},CHF:{GC:.74,SI:.66,CHF:1,JPY:.8,US10Y:-.36,DXY:-.9},JPY:{GC:.7,SI:.6,JPY:1,CHF:.8,US10Y:-.32,DXY:-.76},US10Y:{GC:-.48,SI:-.42,CHF:-.36,JPY:-.32,US10Y:1,DXY:.58},DXY:{GC:-.85,SI:-.78,CHF:-.9,JPY:-.76,US10Y:.58,DXY:1}},"1M":{GC:{GC:1,SI:.96,CHF:.78,JPY:.74,US10Y:-.52,DXY:-.88},SI:{GC:.96,SI:1,CHF:.7,JPY:.64,US10Y:-.46,DXY:-.82},CHF:{GC:.78,SI:.7,CHF:1,JPY:.84,US10Y:-.4,DXY:-.92},JPY:{GC:.74,SI:.64,JPY:1,CHF:.84,US10Y:-.36,DXY:-.8},US10Y:{GC:-.52,SI:-.46,CHF:-.4,JPY:-.36,US10Y:1,DXY:.62},DXY:{GC:-.88,SI:-.82,CHF:-.92,JPY:-.8,US10Y:.62,DXY:1}}};B.useEffect(()=>{let R=!0;const I=async()=>{try{i(!0);const G=await fetch(`${on}/market-overview`);if(!G.ok)throw new Error("Failed to fetch market data");const v=await G.json();if(v.error)throw new Error(v.error);if(R&&v.sectors){const h=v.correlations||Z;n({sectors:v.sectors,correlationsByTimeframe:h}),s(null)}}catch(G){console.error("Market data fetch error:",G),R&&s(G.message)}finally{R&&i(!1)}};I();const de=setInterval(I,3e4);return()=>{R=!1,clearInterval(de)}},[]);const Ge=R=>l==="1D"?R.change1D||0:l==="1W"?R.change1W||0:R.change1M||0,f=R=>l==="1D"?R.prev1D:l==="1W"?R.prev1W:R.prev1M,m=R=>R>2?"#00ff88":R>0?"#4ade80":R>-1?"#f87171":R>-2?"#ef4444":"#dc2626",C=(R,I)=>!R||isNaN(R)?"":I!=null&&I.includes("6J")||I!=null&&I.includes("6")||I!=null&&I.includes("DX")?R.toFixed(4):I!=null&&I.includes("US")&&!(I!=null&&I.includes("USD"))?R.toFixed(2)+"%":R>1e3||R>10?R.toFixed(2):R.toFixed(4),c=()=>l==="1D"?"vs Yesterday":l==="1W"?"vs Last Week":"vs Last Month",F=()=>l==="1D"?"Yesterday":l==="1W"?"Last Week":"Last Month";return o&&!t?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading live market data..."]}):t?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:L?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:L?"column":"row",justifyContent:"space-between",alignItems:L?"flex-start":"center",marginBottom:L?16:24,gap:L?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:L?16:20},children:L?"Correlation Matrix":" Correlation Matrix"}),e.jsxs("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:L?11:13},children:["Futures price change ",c(),"  Color = % Change"]})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(R=>e.jsx("button",{onClick:()=>a(R),style:{padding:L?"6px 12px":"8px 16px",borderRadius:6,border:l===R?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",background:l===R?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.03)",color:l===R?"#00ff88":"#888",fontWeight:600,fontSize:L?10:12,cursor:"pointer",transition:"all 0.2s"},children:R},R))})]}),r&&e.jsxs("div",{style:{padding:16,marginBottom:16,background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,color:"#ff6b6b",fontSize:13},children:[" ",r," - Install yfinance: pip install yfinance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:L?"1fr":"repeat(2, 1fr)",gap:L?8:12,marginBottom:L?16:24},children:(S=t==null?void 0:t.sectors)==null?void 0:S.map(R=>e.jsxs("div",{style:{padding:14,background:"rgba(255,255,255,0.02)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",borderLeft:`3px solid ${R.color}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:R.color}}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:R.color,textTransform:"uppercase",letterSpacing:.5},children:R.name})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min(R.stocks.length,5)}, 1fr)`,gap:6},children:R.stocks.map(I=>{const de=Ge(I),G=(w==null?void 0:w.symbol)===I.symbol;return e.jsxs("div",{style:{position:"relative",padding:"8px 10px",borderRadius:6,background:m(de),cursor:"pointer",transition:"all 0.2s ease",transform:G?"scale(1.05)":"scale(1)",boxShadow:G?"0 4px 20px rgba(0,0,0,0.4)":"none",textAlign:"center"},onMouseEnter:v=>{const h=v.currentTarget.getBoundingClientRect();y({...I,sectorName:R.name,sectorColor:R.color}),W({x:h.left+h.width/2,y:h.top})},onMouseLeave:()=>y(null),children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#000",marginBottom:2},children:I.symbol}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#000"},children:[de>=0?"+":"",de.toFixed(2),"%"]})]},I.symbol)})})]},R.name))}),w&&e.jsxs("div",{style:{position:"fixed",left:Math.max(20,Math.min(u.x-150,window.innerWidth-320)),top:u.y+60,background:"linear-gradient(135deg, rgba(20,20,28,0.98) 0%, rgba(15,15,20,0.98) 100%)",border:`1px solid ${w.sectorColor}40`,borderRadius:12,padding:0,zIndex:1e3,boxShadow:`0 8px 32px rgba(0,0,0,0.6), 0 0 20px ${w.sectorColor}20`,minWidth:280,maxWidth:300,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:`${w.sectorColor}15`,borderBottom:`1px solid ${w.sectorColor}30`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#fff"},children:w.name}),e.jsx("div",{style:{fontSize:11,color:w.sectorColor,marginTop:2},children:w.sectorName})]}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:Ge(w)>=0?"#00ff88":"#ff4466"},children:[Ge(w)>=0?"+":"",Ge(w).toFixed(2),"%"]})]}),e.jsxs("div",{style:{padding:"12px 16px"},children:[(()=>{const R=w.current||{},I=R.c>=R.o,de=I?"#00ff88":"#ff4466";return e.jsxs("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:6,background:I?"rgba(0,255,136,0.08)":"rgba(255,68,102,0.08)",border:`1px solid ${de}30`},children:[e.jsxs("div",{style:{fontSize:9,color:de,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,fontWeight:600},children:[I?"":""," Current"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(G=>{const v=R[G.toLowerCase()],h=G==="H"&&I?"#00ff88":G==="L"&&!I?"#ff4466":"#fff";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:G}),e.jsx("div",{style:{fontSize:10,color:h,fontFamily:"monospace",fontWeight:600},children:C(v,w.symbol)})]},G)})})]})})(),(()=>{const R=f(w)||{},I=R.c>=R.o,de=I?"#00ff88":"#ff4466";return e.jsxs("div",{style:{padding:"8px 10px",borderRadius:6,background:I?"rgba(0,255,136,0.05)":"rgba(255,68,102,0.05)",border:`1px solid ${de}20`},children:[e.jsxs("div",{style:{fontSize:9,color:de,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,opacity:.8,fontWeight:600},children:[I?"":""," ",F()]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(G=>{const v=R[G.toLowerCase()],h=G==="H"&&I?"#00ff88":G==="L"&&!I?"#ff4466":"#aaa";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:G}),e.jsx("div",{style:{fontSize:10,color:h,fontFamily:"monospace"},children:C(v,w.symbol)})]},G)})})]})})()]}),e.jsx("div",{style:{padding:"8px 16px",background:"rgba(0,0,0,0.3)",fontSize:10,color:"#666",textAlign:"center"},children:"Live data from Yahoo Finance"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,padding:16,background:"rgba(255,255,255,0.02)",borderRadius:12,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#dc2626"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"< -2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#f87171"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"-2% to 0%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#4ade80"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"0% to +2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#00ff88"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:">+2%"})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:16,padding:24,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:10},children:[" GC & SI Correlation Matrix (",d==="30m"?"30 Minutes":d==="1H"?"1 Hour":d==="4H"?"4 Hours":d==="1D"?"1 Day":d==="1W"?"1 Week":"1 Month",")",e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"3px 8px",borderRadius:4,border:"1px solid rgba(0,255,136,0.3)",letterSpacing:.5},children:" LIVE"})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(R=>e.jsx("button",{onClick:()=>p(R),style:{padding:"6px 12px",borderRadius:6,border:d===R?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",background:d===R?"rgba(0,170,255,0.15)":"rgba(255,255,255,0.03)",color:d===R?"#00aaff":"#888",fontWeight:600,fontSize:11,cursor:"pointer",transition:"all 0.2s"},children:R},R))})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:500},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:12,textAlign:"left",color:"#888",fontSize:12}}),["GC","SI","CHF","JPY","US10Y","DXY"].map(R=>e.jsx("th",{style:{padding:12,textAlign:"center",color:R==="GC"?"#FFD700":R==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:R==="CHF"?" CHF":R==="JPY"?" JPY":R==="US10Y"?" 10Y":R==="DXY"?" DXY":R==="GC"?" GC":" SI"},R))]})}),e.jsx("tbody",{children:["GC","SI","CHF","JPY","US10Y","DXY"].map(R=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:12,color:R==="GC"?"#FFD700":R==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:R==="CHF"?" Swiss":R==="JPY"?" Yen":R==="US10Y"?" Yield":R==="DXY"?" DXY":R==="GC"?" Gold":" Silver"}),["GC","SI","CHF","JPY","US10Y","DXY"].map(I=>{var T,Le,z;const de=((z=(Le=(T=t.correlationsByTimeframe)==null?void 0:T[d])==null?void 0:Le[R])==null?void 0:z[I])??0,G=Math.abs(de),v=de<0,h=de===1?"rgba(100,100,100,0.3)":v?`rgba(255,68,102,${G*.4})`:de>.7?`rgba(0,255,136,${G*.4})`:de>.3?`rgba(0,255,136,${G*.25})`:`rgba(255,170,0,${G*.3})`;return e.jsxs("td",{style:{padding:12,textAlign:"center",background:h,color:de===1?"#888":v?"#ff4466":de>.5?"#00ff88":"#ffaa00",fontSize:13,fontWeight:600,border:"1px solid rgba(255,255,255,0.05)"},children:[de>=0?"+":"",de.toFixed(2)]},I)})]},R))})]})}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:" Green = Positive correlation |  Red = Negative correlation (inverse relationship)"})]})]}):e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No market data available"]})},bo=({children:t,content:n,position:o="top"})=>{const[i,r]=B.useState(!1),[s,l]=B.useState({x:0,y:0}),a=No.useRef(null),d=p=>{const w=p.currentTarget.getBoundingClientRect();l({x:w.left+w.width/2,y:o==="top"?w.top:w.bottom}),r(!0)};return e.jsxs("div",{ref:a,onMouseEnter:d,onMouseLeave:()=>r(!1),style:{position:"relative",display:"inline-block",width:"100%"},children:[t,i&&n&&e.jsxs("div",{style:{position:"fixed",left:s.x,top:o==="top"?s.y-8:s.y+8,transform:o==="top"?"translate(-50%, -100%)":"translate(-50%, 0)",background:"rgba(20, 22, 28, 0.98)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:6,padding:"8px 12px",fontSize:10,color:"#ccc",whiteSpace:"pre-line",zIndex:9999,pointerEvents:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",minWidth:150,maxWidth:280,lineHeight:1.5},children:[n,e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",...o==="top"?{bottom:-6,borderTop:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}:{top:-6,borderBottom:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"},width:0,height:0}})]})]})},Bg=({selectedContract:t})=>{const n=()=>{try{const l=localStorage.getItem("metrics_cache");if(l){const a=JSON.parse(l);if(a.timestamp&&Date.now()-a.timestamp<3e5)return a.data||{}}}catch{}return{}},[o,i]=B.useState(n),[r,s]=B.useState(n);return B.useEffect(()=>{n().contract!==t&&(i({}),s({}));const a=async()=>{try{const w=await(await fetch(on)).json();i(w),s(w);try{localStorage.setItem("metrics_cache",JSON.stringify({data:w,timestamp:Date.now()}))}catch{}}catch(p){console.error("PriceLadder fetch error:",p)}};a();const d=setInterval(a,300);return()=>clearInterval(d)},[t]),e.jsx(Ig,{metrics:o,gexData:r})},Ig=({metrics:t={},gexData:n={}})=>{var Bn,Tn,Fn,In,Jn,En,Qn,_o,To,Wo,Yo,lo,ao,Mo,ni,Xo,Ko,Zn,Rn,gi,xi,yi,mi,bi,vi,ee,nt,k,E,pe,ae,xe,Ze,P,se,Se,Ce,De,le,ge,Ue,Te,$,_,O;wg();const[o,i]=B.useState("5m"),[r,s]=B.useState("all"),[l,a]=B.useState(!1),[d,p]=B.useState(!1),[w,y]=B.useState(!0),[u,W]=B.useState(null),L=B.useRef(null),Z=B.useRef(null),[Ge,f]=B.useState(!1),[m,C]=B.useState(!1),[c,F]=B.useState(null),[S,R]=B.useState(null),[I,de]=B.useState(!1),[G,v]=B.useState(1),[h,T]=B.useState(1),[Le,z]=B.useState(1),[Ie,Pe]=B.useState({}),[ne,ze]=B.useState({}),[b,_e]=B.useState({etfs:[]}),[re,He]=B.useState({}),[rt,zt]=B.useState({}),{isMobile:Je,isTablet:Xe}=$i(),Ne=t.current_price||0,oe=B.useCallback(x=>{Z.current&&(clearTimeout(Z.current),Z.current=null),L.current=x,W(x)},[]),fe=B.useCallback(()=>{Z.current=setTimeout(()=>{(L.current===null||Z.current!==null)&&(L.current=null,W(null))},100)},[]);B.useEffect(()=>()=>{Z.current&&clearTimeout(Z.current)},[]),B.useEffect(()=>{const x=async()=>{try{const X=await fetch(`${on}/institutional`);if(X.ok){const U=await X.json();ze(U)}}catch(X){console.log("Institutional data fetch error:",X)}};x();const D=setInterval(x,6e4);return()=>clearInterval(D)},[]),B.useEffect(()=>{if((t==null?void 0:t.contract)!=="BTC-SPOT")return;const x=async()=>{try{const X=await fetch("https://fapi.binance.com/fapi/v1/fundingRate?symbol=BTCUSDT&limit=1");if(X.ok){const Ve=await X.json();if(Ve&&Ve.length>0){const pt=parseFloat(Ve[0].fundingRate)*100,ye=pt*3*365;zt({funding_rates:{average:pt,annualized:ye,sentiment:pt>.01?"bullish_extreme":pt>0?"bullish":pt<-.01?"bearish_extreme":pt<0?"bearish":"neutral"}})}}try{const Ve=await fetch("https://www.deribit.com/api/v2/public/get_book_summary_by_currency?currency=BTC&kind=option");if(Ve.ok){const pt=await Ve.json();if(pt!=null&&pt.result){let ye=0,me=0,Be=0,qe=0,St=0,We=0;pt.result.forEach(Lt=>{const Pt=Lt.instrument_name.includes("-C"),Nt=Lt.open_interest||0,K=parseFloat(Lt.instrument_name.split("-")[2])||0;Pt?(ye+=Nt,Nt>St&&(St=Nt,Be=K)):(me+=Nt,Nt>We&&(We=Nt,qe=K))});const dt=ye>0?me/ye:0,Yt=dt>1.2?"bearish":dt<.7?"bullish":"neutral",Ot=Math.round((Be+qe)/2);He({btc_options:{max_pain:Ot,put_call_ratio:dt,sentiment:Yt,call_wall:Be,put_wall:qe}})}}}catch(Ve){console.log("Deribit fetch error:",Ve)}const U=t.current_price||0,je=(U-(t.session_open||U))/(t.session_open||U)*100,Ae=je>0?Math.round(je*50):Math.round(je*30);_e({total_flow_1d_mm:Ae,total_flow_5d_mm:Ae*3,etfs:[{symbol:"IBIT",price:U*5e-4,price_change_1d:je*.9},{symbol:"FBTC",price:U*48e-5,price_change_1d:je*.95},{symbol:"GBTC",price:U*9e-4,price_change_1d:je*.85},{symbol:"ARKB",price:U*47e-5,price_change_1d:je*.92}]})}catch(X){console.error("Error fetching BTC data:",X)}};x();const D=setInterval(x,6e4);return()=>clearInterval(D)},[t==null?void 0:t.contract,t==null?void 0:t.current_price,t==null?void 0:t.session_open]);const A=(()=>{const x={buy:0,sell:0,delta:0,prev_buy:0,prev_sell:0,prev_delta:0};switch(o){case"5m":return{...x,...t.volume_5m};case"15m":return{...x,...t.volume_15m};case"30m":return{...x,...t.volume_30m};case"1h":return{...x,...t.volume_1h};default:return{buy:t.buy_volume||0,sell:t.sell_volume||0,delta:t.cumulative_delta||0,prev_buy:0,prev_sell:0,prev_delta:0}}})(),te=A.history||[],ke=()=>{const x=t.asset_class||n.asset_class||"GC";return{GC:2650,ES:5200,NQ:18500,BTC:95e3,"BTC-SPOT":93e3,CL:75}[x]||2650},at=Ne>0?Ne:ke();B.useMemo(()=>{const x=at,D=100,X=[];let U=x,je=0;const Ae=o==="5m"?300:o==="15m"?900:o==="30m"?1800:3600,Ve=Math.floor(Date.now()/1e3),pt=Math.floor(Ve/Ae)*Ae-D*Ae;let ye=Math.round(x)*100+12345;const me=()=>(ye=(ye*9301+49297)%233280,ye/233280),Be=.1,qe=8;for(let St=0;St<D;St++){const We=(me()-.5)*Be*2;U=x+We+(me()-.5)*Be*4;const dt=me()>.45,Yt=150+me()*100,Ot=dt?20+me()*60:-(20+me()*60),Lt=Math.max(0,(Yt+Ot)/2),Pt=Math.max(0,(Yt-Ot)/2),Nt=Be*qe/2,K=U+(me()-.5)*Nt,be=U+(me()-.5)*Nt,vt=Math.max(K,be)+me()*Be*2,Ht=Math.min(K,be)-me()*Be*2;je+=Ot,X.push({ts:pt+St*Ae,buy:Math.round(Lt),sell:Math.round(Pt),delta:Math.round(Ot),price_open:K,price_high:vt,price_low:Ht,price_close:be,delta_open:je-Ot,delta_high:je+Math.abs(Ot)*.2,delta_low:je-Math.abs(Ot)*.2,delta_close:je})}return X},[Math.round(at/10)*10,o]);const $e=te,Me=A.buy+A.sell||($e.length>0?((Bn=$e[$e.length-1])==null?void 0:Bn.buy)+((Tn=$e[$e.length-1])==null?void 0:Tn.sell):0);(A.prev_buy||0)+(A.prev_sell||0);const Qe=(x,D)=>D===0?null:((x-D)/D*100).toFixed(1);o!=="session"&&Qe(A.buy,A.prev_buy),o!=="session"&&Qe(A.sell,A.prev_sell);const Ft=(t==null?void 0:t.current_session_name)||(t==null?void 0:t.sessionId)||"Session",J=new Date(new Date().toLocaleString("en-US",{timeZone:"America/New_York"})),st=J.getHours()*100+J.getMinutes(),lt=[((In=(Fn=t==null?void 0:t.ibs)==null?void 0:Fn.japan)==null?void 0:In.high)>0&&{price:t.ibs.japan.high,name:st<1900&&st>=1800?"(pd) Japan IB High":"Japan IB High",color:"#9370DB"},((En=(Jn=t==null?void 0:t.ibs)==null?void 0:Jn.japan)==null?void 0:En.low)>0&&((_o=(Qn=t==null?void 0:t.ibs)==null?void 0:Qn.japan)==null?void 0:_o.low)<999999&&{price:t.ibs.japan.low,name:st<1900&&st>=1800?"(pd) Japan IB Low":"Japan IB Low",color:"#9370DB"},((Wo=(To=t==null?void 0:t.ibs)==null?void 0:To.japan)==null?void 0:Wo.poc)>0&&{price:t.ibs.japan.poc,name:st<1900&&st>=1800?"(pd) Japan IB POC":"Japan IB POC",color:"#B8A3D9"},((lo=(Yo=t==null?void 0:t.ibs)==null?void 0:Yo.london)==null?void 0:lo.high)>0&&{price:t.ibs.london.high,name:st<300||st>=1800?"(pd) London IB High":"London IB High",color:"#a855f7"},((Mo=(ao=t==null?void 0:t.ibs)==null?void 0:ao.london)==null?void 0:Mo.low)>0&&((Xo=(ni=t==null?void 0:t.ibs)==null?void 0:ni.london)==null?void 0:Xo.low)<999999&&{price:t.ibs.london.low,name:st<300||st>=1800?"(pd) London IB Low":"London IB Low",color:"#a855f7"},((Zn=(Ko=t==null?void 0:t.ibs)==null?void 0:Ko.london)==null?void 0:Zn.poc)>0&&{price:t.ibs.london.poc,name:st<300||st>=1800?"(pd) London IB POC":"London IB POC",color:"#C084FC"},((gi=(Rn=t==null?void 0:t.ibs)==null?void 0:Rn.us)==null?void 0:gi.high)>0&&{price:t.ibs.us.high,name:st<820?"(pd) US IB High":"US IB High",color:"#F59E0B"},((yi=(xi=t==null?void 0:t.ibs)==null?void 0:xi.us)==null?void 0:yi.low)>0&&((bi=(mi=t==null?void 0:t.ibs)==null?void 0:mi.us)==null?void 0:bi.low)<999999&&{price:t.ibs.us.low,name:st<820?"(pd) US IB Low":"US IB Low",color:"#F59E0B"},((ee=(vi=t==null?void 0:t.ibs)==null?void 0:vi.us)==null?void 0:ee.mid)>0&&{price:t.ibs.us.mid,name:st<820?"(pd) US IB Mid":"US IB Mid",color:"#F59E0B"},((k=(nt=t==null?void 0:t.ibs)==null?void 0:nt.us)==null?void 0:k.poc)>0&&{price:t.ibs.us.poc,name:st<820?"(pd) US IB POC":"US IB POC",color:"#FBBF24"},((pe=(E=t==null?void 0:t.ibs)==null?void 0:E.ny)==null?void 0:pe.high)>0&&{price:t.ibs.ny.high,name:st<930?"(pd) NY IB High":"NY IB High",color:"#10B981"},((xe=(ae=t==null?void 0:t.ibs)==null?void 0:ae.ny)==null?void 0:xe.low)>0&&((P=(Ze=t==null?void 0:t.ibs)==null?void 0:Ze.ny)==null?void 0:P.low)<999999&&{price:t.ibs.ny.low,name:st<930?"(pd) NY IB Low":"NY IB Low",color:"#10B981"},((Se=(se=t==null?void 0:t.ibs)==null?void 0:se.ny)==null?void 0:Se.mid)>0&&{price:t.ibs.ny.mid,name:st<930?"(pd) NY IB Mid":"NY IB Mid",color:"#10B981"},((De=(Ce=t==null?void 0:t.ibs)==null?void 0:Ce.ny)==null?void 0:De.poc)>0&&{price:t.ibs.ny.poc,name:st<930?"(pd) NY IB POC":"NY IB POC",color:"#34D399"}],et=(t==null?void 0:t.tpo_poc)>0?{price:t.tpo_poc,name:`${Ft} POC`,color:"#ffaa00"}:null,ie=(t==null?void 0:t.dayHigh)||(t==null?void 0:t.day_high)||0,g=(t==null?void 0:t.dayLow)||(t==null?void 0:t.day_low)||0,j=ie-g,V=(t==null?void 0:t.pd_high)||0,M=(t==null?void 0:t.pd_low)||0,N=V-M,q=j<100&&N>100,ce=q?V:ie,Y=q?M:g,ve=ce-Y,Tt=(ce+Y)/2,ut=(t==null?void 0:t.pd_close)||0,Ct=(t==null?void 0:t.pd_open)||0,_t=q?ut>0&&Ct>0?ut<Ct:!0:Ne>0?Ne<Tt:!0,mn=ve>0?_t?[{price:Y-ve*.618,name:"Day Fib -62%",color:"#d50000"},{price:Y-ve*.27,name:"Day Fib -27%",color:"#ff1744"},{price:Y,name:"Day Fib 0%",color:"#10B981"},{price:Y+ve*.236,name:"Day Fib 23.6%",color:"#22c55e"},{price:Y+ve*.382,name:"Day Fib 38.2%",color:"#00bcd4"},{price:Y+ve*.5,name:"Day Fib 50%",color:"#f97316"},{price:Y+ve*.618,name:"Day Fib 61.8%",color:"#ffd93d"},{price:Y+ve*.786,name:"Day Fib 78.6%",color:"#ff6b6b"},{price:ce,name:"Day Fib 100%",color:"#ff4466"}]:[{price:ce+ve*.618,name:"Day Fib -62%",color:"#00c853"},{price:ce+ve*.27,name:"Day Fib -27%",color:"#00e676"},{price:ce,name:"Day Fib 0%",color:"#10B981"},{price:ce-ve*.236,name:"Day Fib 23.6%",color:"#22c55e"},{price:ce-ve*.382,name:"Day Fib 38.2%",color:"#00bcd4"},{price:ce-ve*.5,name:"Day Fib 50%",color:"#f97316"},{price:ce-ve*.618,name:"Day Fib 61.8%",color:"#ffd93d"},{price:ce-ve*.786,name:"Day Fib 78.6%",color:"#ff6b6b"},{price:Y,name:"Day Fib 100%",color:"#ff4466"}]:[],Qt=(t==null?void 0:t.swing)||{},Zt=Qt.swing_high||0,qt=Qt.swing_low||0,rn=Qt.swing_direction||"neutral";Qt.extensions_direction;const en=Zt-qt,bn=en>50?rn==="up"?[{price:Zt+en*.618,name:"Swing -62%",color:"#00E676"},{price:Zt+en*.27,name:"Swing -27%",color:"#69F0AE"},{price:Zt,name:"Swing 0%",color:"#A78BFA"},{price:Zt-en*.236,name:"Swing 23.6%",color:"#A78BFA"},{price:Zt-en*.382,name:"Swing 38.2%",color:"#8B5CF6"},{price:Zt-en*.5,name:"Swing 50%",color:"#7C3AED"},{price:Zt-en*.618,name:"Swing 61.8%",color:"#6D28D9"},{price:Zt-en*.786,name:"Swing 78.6%",color:"#5B21B6"},{price:qt,name:"Swing 100%",color:"#4C1D95"}]:rn==="down"?[{price:Zt,name:"Swing 100%",color:"#AA00FF"},{price:qt+en*.786,name:"Swing 78.6%",color:"#5B21B6"},{price:qt+en*.618,name:"Swing 61.8%",color:"#6D28D9"},{price:qt+en*.5,name:"Swing 50%",color:"#7C3AED"},{price:qt+en*.382,name:"Swing 38.2%",color:"#8B5CF6"},{price:qt+en*.236,name:"Swing 23.6%",color:"#A78BFA"},{price:qt,name:"Swing 0%",color:"#E040FB"},{price:qt-en*.27,name:"Swing -27%",color:"#ff1744"},{price:qt-en*.618,name:"Swing -62%",color:"#d50000"}]:[]:[],Cn=[n.pd_high>0&&{price:n.pd_high,name:"pd High",color:"#ff4466"},l&&n.hvl>0&&{price:n.hvl,name:"HVL",color:"#00aaff"},l&&{price:Ne+50,name:"R3",color:"#ff6b6b"},l&&{price:Ne+30,name:"R2",color:"#ff8c8c"},l&&{price:Ne+15,name:"R1",color:"#ffaaaa"},l&&n.zero_gamma>0&&{price:n.zero_gamma,name:"Zero Gamma",color:"#00ff88"},t.vwap>0&&{price:t.vwap,name:`${Ft} VWAP`,color:"#00ddff"},t.day_vwap>0&&{price:t.day_vwap,name:"Day VWAP",color:"#E879F9"},t.us_ib_vwap>0&&{price:t.us_ib_vwap,name:st<820?"(pd) US IB VWAP":"US IB VWAP",color:"#F59E0B"},t.ny_1h_vwap>0&&{price:t.ny_1h_vwap,name:st<930?"(pd) NY 1H VWAP":"NY 1H VWAP",color:"#10B981"},et,t.day_vah>0&&{price:t.day_vah,name:"Day VAH",color:"#E879F9"},t.day_val>0&&{price:t.day_val,name:"Day VAL",color:"#E879F9"},t.day_poc>0&&{price:t.day_poc,name:"Day POC",color:"#E879F9"},l&&{price:Ne-15,name:"S1",color:"#88ff88"},l&&{price:Ne-30,name:"S2",color:"#66dd66"},l&&{price:Ne-50,name:"S3",color:"#44bb44"},n.pdpoc>0&&{price:n.pdpoc,name:"pd POC",color:"#ffaa00"},t.pd_vah>0&&{price:t.pd_vah,name:"pd VAH",color:"#ffaa00"},t.pd_val>0&&{price:t.pd_val,name:"pd VAL",color:"#ffaa00"},n.pd_low>0&&{price:n.pd_low,name:"pd Low",color:"#00ff88"},((le=t==null?void 0:t.pd_us_ib)==null?void 0:le.high)>0&&{price:t.pd_us_ib.high,name:"pd US IB High",color:"#F59E0B"},((ge=t==null?void 0:t.pd_us_ib)==null?void 0:ge.low)>0&&{price:t.pd_us_ib.low,name:"pd US IB Low",color:"#F59E0B"},((Ue=t==null?void 0:t.pd_us_ib)==null?void 0:Ue.poc)>0&&{price:t.pd_us_ib.poc,name:"pd US IB POC",color:"#FBBF24"},((Te=t==null?void 0:t.pd_ny_1h)==null?void 0:Te.high)>0&&{price:t.pd_ny_1h.high,name:"pd NY 1H High",color:"#10B981"},(($=t==null?void 0:t.pd_ny_1h)==null?void 0:$.low)>0&&{price:t.pd_ny_1h.low,name:"pd NY 1H Low",color:"#10B981"},((_=t==null?void 0:t.pd_ny_1h)==null?void 0:_.poc)>0&&{price:t.pd_ny_1h.poc,name:"pd NY 1H POC",color:"#34D399"},...mn,...bn,...lt].filter(Boolean).sort((x,D)=>D.price-x.price),ro=Cn.filter(x=>x.price>Ne).slice(-10),$n=Cn.filter(x=>x.price<=Ne).slice(0,10),Vt=Me>0?(A.buy/Me*100).toFixed(1):50,un=Me>0?(A.sell/Me*100).toFixed(1):50,so={session:"Session","5m":"5 Min","15m":"15 Min","30m":"30 Min","1h":"1 Hour"},Pn=({level:x,position:D})=>{const X=Math.abs(x.price-Ne).toFixed(2),U=Math.abs(x.price-Ne)<20;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",background:U?`${x.color}15`:"transparent",borderLeft:`3px solid ${x.color}`,marginBottom:2,transition:"all 0.3s ease",opacity:U?1:.7,flexWrap:"nowrap",whiteSpace:"nowrap"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,minWidth:90,flex:"0 0 auto"},children:e.jsx("span",{style:{color:x.color,fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:1},children:x.name})}),e.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:700,color:x.color,textShadow:U?`0 0 10px ${x.color}`:"none",minWidth:110,textAlign:"right",flex:"0 0 auto"},children:["$",x.price.toFixed(2)]}),e.jsxs("div",{style:{fontSize:11,color:"#666",minWidth:90,textAlign:"right",flex:"0 0 auto"},children:[D==="above"?"":""," $",X]})]})};return e.jsxs("div",{style:{padding:Je?12:24},children:[e.jsxs("div",{style:{display:"flex",flexDirection:Je?"column":"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:Je?16:24,gap:Je?12:0},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#fff",marginBottom:8,display:"flex",alignItems:"center",gap:12,fontSize:Je?18:24},children:Je?"Price Ladder":" Price Ladder"}),e.jsx("p",{style:{color:"#888",fontSize:Je?11:13},children:"Live price with reference levels  Updates in real-time"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:Je?8:12,background:"rgba(255,255,255,0.05)",padding:Je?"6px 12px":"8px 16px",borderRadius:8,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{color:"#888",fontSize:Je?10:12},children:"Gamma Levels"}),e.jsx("button",{onClick:()=>a(!l),style:{width:Je?40:48,height:Je?20:24,borderRadius:12,border:"none",background:l?"#00ff88":"rgba(255,255,255,0.2)",cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:e.jsx("div",{style:{width:Je?14:18,height:Je?14:18,borderRadius:"50%",background:"#fff",position:"absolute",top:3,left:l?Je?23:27:3,transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})]}),e.jsxs("div",{style:{display:Je?"flex":"grid",flexDirection:Je?"column":void 0,gridTemplateColumns:Je?void 0:Xe?"1fr":"550px 1fr",gap:Je?12:20,maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,170,255,0.08)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:8,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:8,letterSpacing:1},children:"SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",fontFamily:"'JetBrains Mono', monospace"},children:n.current_session_name||"Loading..."})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#555",fontSize:9},children:[n.current_session_start," - ",n.current_session_end]}),e.jsx("div",{style:{color:"#666",fontSize:8},children:"ET"})]})]}),e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20,20,30,0.95) 0%, rgba(10,10,15,0.98) 100%)",border:"2px solid rgba(255,255,255,0.1)",borderRadius:16,overflow:"hidden",flex:1},children:[e.jsx("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:ro.map((x,D)=>e.jsx(Pn,{level:x,position:"above"},D))}),e.jsxs("div",{style:{padding:"16px 12px",background:"linear-gradient(180deg, rgba(0,170,255,0.2) 0%, rgba(0,100,200,0.1) 100%)",borderTop:"2px solid #00aaff",borderBottom:"2px solid #00aaff",textAlign:"center"},children:[e.jsx("div",{style:{color:"#888",fontSize:9,letterSpacing:2,marginBottom:4},children:"CURRENT PRICE"}),e.jsxs("div",{style:{fontSize:36,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",textShadow:"0 0 30px rgba(0,170,255,0.5)"},children:["$",Ne.toFixed(2)]}),e.jsxs("div",{style:{marginTop:4,fontSize:11,color:t.cumulative_delta>=0?"#00ff88":"#ff4466",fontWeight:600},children:[t.cumulative_delta>=0?"":""," Delta: ",((O=t.cumulative_delta)==null?void 0:O.toLocaleString())||0]})]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)"},children:$n.map((x,D)=>e.jsx(Pn,{level:x,position:"below"},D))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,minWidth:0,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx("div",{style:{display:"flex",gap:4,alignItems:"center"},children:["5m","15m","30m","1h"].map(x=>e.jsx("button",{onClick:()=>i(x),style:{padding:"6px 12px",borderRadius:6,border:"none",background:o===x?"#00ff88":"rgba(255,255,255,0.1)",color:o===x?"#000":"#888",fontSize:10,fontWeight:600,cursor:"pointer"},children:so[x]},x))}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(0,255,136,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"BUY"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",fontFamily:"monospace"},children:A.buy>999?`${(A.buy/1e3).toFixed(1)}k`:A.buy}),e.jsxs("span",{style:{fontSize:9,color:"#00ff88",opacity:.7},children:[Vt,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"SELL"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#ff4466",fontFamily:"monospace"},children:A.sell>999?`${(A.sell/1e3).toFixed(1)}k`:A.sell}),e.jsxs("span",{style:{fontSize:9,color:"#ff4466",opacity:.7},children:[un,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:A.delta>=0?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"DELTA"}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:A.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[A.delta>=0?"+":"",Math.abs(A.delta)>999?`${(A.delta/1e3).toFixed(1)}k`:A.delta]}),e.jsx("span",{style:{fontSize:9,color:A.delta>=0?"#00ff88":"#ff4466",opacity:.7},children:Me>0?`${(A.delta/Me*100).toFixed(0)}%`:"0%"})]})]})]}),(()=>{var K,be,vt,Ht,Xt;const x=Math.min(200,Math.round(100/h)),D=[...$e].slice(-x),X=$e.length>0?$e[$e.length-1]:null,U={price_open:A.price_open||(X==null?void 0:X.price_open)||Ne,price_high:A.price_high||(X==null?void 0:X.price_high)||Ne,price_low:A.price_low||(X==null?void 0:X.price_low)||Ne,price_close:Ne||(X==null?void 0:X.price_close)||0,buy:A.buy||(X==null?void 0:X.buy)||100,sell:A.sell||(X==null?void 0:X.sell)||80,delta:A.delta||(X==null?void 0:X.delta)||20,volume:Me||(X?X.buy+X.sell:180)},je=[...D,U],Ae=je.slice(-10),Ve=()=>{if(Ae.length<3)return{exhaustion:!1,absorption:!1,deltaTrend:"neutral",volTrend:"neutral"};const Ke=Ae.slice(-3),ct=Ke.map(ue=>ue.delta||0),Ut=Ke.map(ue=>(ue.buy||0)+(ue.sell||0)),he=Ke.map(ue=>ue.price_close||0),gt=ct[2]>ct[1]&&ct[1]>ct[0]?"increasing":ct[2]<ct[1]&&ct[1]<ct[0]?"decreasing":"neutral",mt=Ut[2]>Ut[1]?"increasing":Ut[2]<Ut[1]?"decreasing":"neutral",ht=ct.reduce((ue,bt)=>ue+bt,0)/3,xt=ht<0&&mt==="decreasing"&&Math.abs(ct[2])<Math.abs(ct[0]),wt=he[2]>=he[0]-2,Ye=ht<-10&&wt&&Ut[2]>50;return{exhaustion:xt,absorption:Ye,deltaTrend:gt,volTrend:mt,avgDelta:ht}},pt=()=>{if(Ae.length<5)return{microRange:null,initiation:!1,vRecovery:!1};const Ke=Ae.slice(-5),ct=Ke.map(ue=>ue.price_high||ue.price_close||0),Ut=Ke.map(ue=>ue.price_low||ue.price_close||0),he=Math.max(...ct),gt=Math.min(...Ut),mt=he-gt,ht=Ke.reduce((ue,bt)=>ue+(bt.price_close||0),0)/5,xt=mt<ht*.005,wt=U.price_close>he&&xt,H=Ke.slice(-3).map(ue=>ue.delta||0),Ye=H[0]<-50&&H[2]>50;return{microRange:xt?{high:he,low:gt}:null,initiation:wt,vRecovery:Ye,rangeSize:mt}},ye=()=>{if(Ae.length<3)return{pocMigration:"neutral",imbalances:0,bullishClose:!1};const Ke=Ae.slice(-3),ct=Ke.map(mt=>((mt.price_high||mt.price_close)+(mt.price_low||mt.price_close))/2),Ut=ct[2]>ct[1]&&ct[1]>ct[0]?"up":ct[2]<ct[1]&&ct[1]<ct[0]?"down":"neutral",he=Ke.filter(mt=>(mt.buy||0)>(mt.sell||0)*1.5).length,gt=U.price_close>ct[1]&&U.delta>0;return{pocMigration:Ut,imbalances:he,bullishClose:gt,pocs:ct}},me=Ve(),Be=pt(),qe=ye(),We=qe.pocMigration==="up"&&qe.imbalances>=2&&qe.bullishClose?"C":Be.initiation||Be.vRecovery?"B":me.exhaustion||me.absorption?"A":"-",dt=Math.min(100,Math.max(0,50+(me.avgDelta||0)/5+(qe.pocMigration==="up"?20:qe.pocMigration==="down"?-20:0)+qe.imbalances*10)),Ot=Math.min(x,Math.round(50/h)),Lt=je.slice(-Ot),Pt=Lt.map((Ke,ct)=>({...Ke,isEmpty:!1,isCurrent:ct===Lt.length-1})),Nt=Pt.filter(Ke=>!Ke.isEmpty&&Ke.price_close>0);return Nt.length>0&&Math.max(...Nt.map(Ke=>Ke.price_high||Ke.price_close)),Nt.length>0&&Math.min(...Nt.map(Ke=>Ke.price_low||Ke.price_close)),Math.max(...Nt.map(Ke=>Math.abs(Ke.delta||0)),1),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{color:"#888",fontSize:11,fontWeight:600,letterSpacing:1},children:"EXECUTION ANALYSIS"}),e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[e.jsxs("div",{style:{padding:"3px 10px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"help",background:We==="C"?"rgba(0,255,136,0.2)":We==="B"?"rgba(255,170,0,0.2)":We==="A"?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",color:We==="C"?"#00ff88":We==="B"?"#ffaa00":We==="A"?"#00aaff":"#666",border:`1px solid ${We==="C"?"#00ff8850":We==="B"?"#ffaa0050":We==="A"?"#00aaff50":"#ffffff20"}`},children:["PHASE ",We]}),Ge&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:8,background:"linear-gradient(135deg, rgba(20,22,30,0.98), rgba(15,17,23,0.98))",border:"1px solid rgba(255,255,255,0.15)",borderRadius:10,padding:14,minWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:10,marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:We==="C"?"#00ff88":We==="B"?"#ffaa00":We==="A"?"#00aaff":"#888",marginBottom:4},children:We==="A"?"PHASE A: Exhaustion & Absorption":We==="B"?"PHASE B: Micro Range & Initiation":We==="C"?"PHASE C: POC Migration & Imbalances":"NO CLEAR PHASE"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:We==="A"?"Sell pressure ending, watching for reversal setup":We==="B"?"Consolidation detected, preparing for breakout":We==="C"?"Strong directional move confirmed with buying pressure":"Market in transition between phases"})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:We==="A"?"#00aaff":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:me.exhaustion||me.absorption?"#00aaff":"#333"}}),"PHASE A METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Avg Delta (3 bars):"}),e.jsx("div",{style:{color:(me.avgDelta||0)<0?"#ff4466":"#00ff88",fontFamily:"monospace",fontWeight:600},children:(me.avgDelta||0).toFixed(0)}),e.jsx("div",{style:{color:"#666"},children:"Delta Trend:"}),e.jsx("div",{style:{color:me.deltaTrend==="increasing"?"#00ff88":me.deltaTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((K=me.deltaTrend)==null?void 0:K.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Volume Trend:"}),e.jsx("div",{style:{color:me.volTrend==="increasing"?"#00ff88":me.volTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((be=me.volTrend)==null?void 0:be.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Exhaustion:"}),e.jsx("div",{style:{color:me.exhaustion?"#00aaff":"#444",fontWeight:600},children:me.exhaustion?"DETECTED":"No"}),e.jsx("div",{style:{color:"#666"},children:"Absorption:"}),e.jsx("div",{style:{color:me.absorption?"#00aaff":"#444",fontWeight:600},children:me.absorption?"DETECTED":"No"})]})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:We==="B"?"#ffaa00":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:Be.initiation||Be.vRecovery?"#ffaa00":"#333"}}),"PHASE B METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Range Size:"}),e.jsxs("div",{style:{color:"#ccc",fontFamily:"monospace",fontWeight:600},children:["$",(Be.rangeSize||0).toFixed(2)]}),e.jsx("div",{style:{color:"#666"},children:"Micro Range:"}),e.jsx("div",{style:{color:Be.microRange?"#ffaa00":"#444",fontWeight:600},children:Be.microRange?`H:$${(vt=Be.microRange.high)==null?void 0:vt.toFixed(2)} L:$${(Ht=Be.microRange.low)==null?void 0:Ht.toFixed(2)}`:"No tight range"}),e.jsx("div",{style:{color:"#666"},children:"Initiation:"}),e.jsx("div",{style:{color:Be.initiation?"#ffaa00":"#444",fontWeight:600},children:Be.initiation?"BREAKOUT":"No"}),e.jsx("div",{style:{color:"#666"},children:"V-Recovery:"}),e.jsx("div",{style:{color:Be.vRecovery?"#ffaa00":"#444",fontWeight:600},children:Be.vRecovery?"DETECTED":"No"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:9,color:We==="C"?"#00ff88":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:qe.pocMigration==="up"&&qe.imbalances>=2?"#00ff88":"#333"}}),"PHASE C METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"POC Migration:"}),e.jsxs("div",{style:{color:qe.pocMigration==="up"?"#00ff88":qe.pocMigration==="down"?"#ff4466":"#888",fontWeight:600},children:[((Xt=qe.pocMigration)==null?void 0:Xt.toUpperCase())||"NEUTRAL"," ",qe.pocMigration==="up"?"":qe.pocMigration==="down"?"":""]}),e.jsx("div",{style:{color:"#666"},children:"Buy Imbalances:"}),e.jsxs("div",{style:{color:qe.imbalances>=2?"#00ff88":"#888",fontFamily:"monospace",fontWeight:600},children:[qe.imbalances||0,"/3 bars"]}),e.jsx("div",{style:{color:"#666"},children:"Bullish Close:"}),e.jsx("div",{style:{color:qe.bullishClose?"#00ff88":"#444",fontWeight:600},children:qe.bullishClose?"YES":"No"}),e.jsx("div",{style:{color:"#666"},children:"POC Levels:"}),e.jsx("div",{style:{color:"#888",fontFamily:"monospace",fontSize:8},children:qe.pocs?qe.pocs.map(Ke=>`$${Ke==null?void 0:Ke.toFixed(0)}`).join("  "):"N/A"})]})]}),e.jsxs("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:"Momentum Score:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:80,height:4,background:"#222",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${dt}%`,height:"100%",background:dt>60?"#00ff88":dt<40?"#ff4466":"#ffaa00",borderRadius:2}})}),e.jsx("span",{style:{fontSize:11,fontWeight:700,fontFamily:"monospace",color:dt>60?"#00ff88":dt<40?"#ff4466":"#ffaa00"},children:dt.toFixed(0)})]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:so[o]}),e.jsx("button",{onClick:()=>p(!d),style:{background:d?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:d?"Hide Chart":"Show Chart"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"MOMENTUM"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:dt>60?"#00ff88":dt<40?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:dt.toFixed(0)}),e.jsx("div",{style:{height:3,background:"rgba(255,255,255,0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${dt}%`,height:"100%",background:dt>60?"#00ff88":dt<40?"#ff4466":"#ffaa00",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"DELTA"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:me.deltaTrend==="increasing"?"#00ff88":me.deltaTrend==="decreasing"?"#ff4466":"#888"},children:me.deltaTrend==="increasing"?" UP":me.deltaTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VOLUME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:me.volTrend==="increasing"?"#00aaff":me.volTrend==="decreasing"?"#ff8800":"#888"},children:me.volTrend==="increasing"?" UP":me.volTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"POC"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:qe.pocMigration==="up"?"#00ff88":qe.pocMigration==="down"?"#ff4466":"#888"},children:qe.pocMigration==="up"?" UP":qe.pocMigration==="down"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IMBAL"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:qe.imbalances>=2?"#00ff88":qe.imbalances===1?"#ffaa00":"#666",fontFamily:"monospace"},children:[qe.imbalances,"/3"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:6,marginBottom:10,flexWrap:"wrap"},children:[me.exhaustion&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,170,255,0.2)",color:"#00aaff",border:"1px solid rgba(0,170,255,0.3)"},children:" EXHAUSTION"}),me.absorption&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(138,43,226,0.2)",color:"#a855f7",border:"1px solid rgba(138,43,226,0.3)"},children:" ABSORPTION"}),Be.microRange&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.3)"},children:" MICRO RANGE"}),Be.initiation&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" INITIATION"}),Be.vRecovery&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" V-RECOVERY"}),qe.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" BULLISH CLOSE"}),!me.exhaustion&&!me.absorption&&!Be.microRange&&!Be.initiation&&!Be.vRecovery&&!qe.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,255,255,0.05)",color:"#666",border:"1px solid rgba(255,255,255,0.1)"},children:"SCANNING..."})]}),d&&e.jsx(e.Fragment,{children:(()=>{const Ke=t.asset_class||"GC",ct=Ke==="BTC-SPOT"?10:Ke==="BTC"?5:Ke==="ES"||Ke==="NQ"?.25:.1,Ut=(Ke.includes("BTC"),2),he=ct*Ut,mt=Math.round((I?52:40)*h),ht=I?window.innerHeight-150:340,xt=55,wt=Pt.filter(Re=>!Re.isEmpty&&Re.price_close>0),H=wt.map(Re=>Re.price_high||Re.price_close),Ye=wt.map(Re=>Re.price_low||Re.price_close),ue=H.length>0?Math.max(...H):Ne+5,bt=Ye.length>0?Math.min(...Ye):Ne-5,kt=ue-bt,At=(ue+bt)/2,$t=kt/G,dn=Math.ceil((At+$t/2+he*10)/he)*he,Wt=Math.floor((At-$t/2-he*10)/he)*he,Kt=Pt.length*mt,ft=ht-10,Dt=Re=>(dn-Re)/(dn-Wt)*ft,jt=Re=>Re?new Date(Re*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"America/New_York"}):"";return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,20,0.99) 0%, rgba(8,8,14,1) 100%)",borderRadius:I?0:8,border:I?"none":"1px solid rgba(255,255,255,0.08)",position:I?"fixed":"relative",top:I?0:void 0,left:I?0:void 0,right:I?0:void 0,bottom:I?0:void 0,zIndex:I?9999:1,overflow:"hidden",width:I?"100vw":"100%",height:I?"100vh":void 0,maxWidth:"100%",boxSizing:"border-box"},children:[I&&e.jsx("button",{onClick:()=>de(!1),style:{position:"absolute",top:20,right:20,background:"rgba(255,100,100,0.5)",border:"1px solid rgba(255,100,100,0.7)",borderRadius:6,padding:"10px 20px",cursor:"pointer",fontSize:14,fontWeight:600,color:"#fff",zIndex:1e4},children:" Close Fullscreen"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%"},children:[e.jsxs("div",{style:{display:"flex",maxWidth:"100%"},children:[e.jsx("div",{ref:Re=>{Re&&Kt>Re.clientWidth&&(Re.scrollLeft=Kt-Re.clientWidth)},style:{flex:1,maxWidth:`calc(100% - ${xt}px)`,height:ht,overflow:"auto",position:"relative"},children:e.jsx("div",{style:{width:Math.max(Kt+80,400),height:ht-10,position:"relative",background:"rgba(8,8,14,1)",paddingRight:60},children:Pt.map((Re,tt)=>{if(Re.isEmpty)return null;const ot=Re.buy||0,Jt=Re.sell||0,Rt=Re.price_high||Re.price_close||Ne+1,pn=Re.price_low||Re.price_close||Ne-1,cn=Re.price_open||Re.price_close||Ne,nn=Re.price_close||Ne,fn=nn>=cn,qn=Dt(Rt),Oo=Dt(pn),eo=Dt(cn),wn=Dt(nn),Vi=Math.min(eo,wn),Ro=Math.max(Math.abs(wn-eo),2),co=Math.max(Rt-pn,he),oi=Math.max(Oo-qn,20),fo=I?12:10,Jo=Math.max(2,Math.floor(oi/fo)),Ui=co/Jo,zo=[],Mt=(Re.ts||tt)*9301+49297;for(let Ee=0;Ee<Jo;Ee++){const Bt=Rt-(Ee+.5)*Ui,ln=Math.abs(Bt-nn)/(co||1),Un=Math.exp(-ln*2)*.6+.3,ho=(Mt+Ee*7919)%233280/233280,sr=ho>.1?ho>.7?1.8:ho>.4?1.2:.8:0,Si=Un*sr,ii=(Bt-pn)/(co||1),Dl=fn?ii>.5?1.3:.8:ii<.5?1.3:.8,Lp=fn?ii<.5?1.3:.8:ii>.5?1.3:.8,Ap=Math.round(ot*Si*Dl/Jo),Fp=Math.round(Jt*Si*Lp/Jo);zo.push({price:Bt,sell:Fp,buy:Ap})}const Et=Math.max(...zo.map(Ee=>Ee.sell+Ee.buy),1),It=Math.max(...zo.map(Ee=>Ee.sell),1),sn=Math.max(...zo.map(Ee=>Ee.buy),1);zo.forEach(Ee=>Ee.isPOC=Ee.sell+Ee.buy===Et&&Et>0);const Vn=(Ee,Bt)=>{if(Bt)return{bg:"#ffffff",border:"2px solid #fff"};if(Ee===0)return{bg:"rgba(60,40,40,0.4)",border:"1px solid rgba(80,60,60,0.3)"};const ln=Math.min(1,Ee/It),Un=255,ho=Math.round(255-ln*200),ji=Math.round(255-ln*200);return{bg:`rgb(${Un},${ho},${ji})`,border:`1px solid rgba(255,${80+(1-ln)*120},${80+(1-ln)*120},0.8)`}},Wn=(Ee,Bt)=>{if(Bt)return{bg:"#ffffff",border:"2px solid #fff"};if(Ee===0)return{bg:"rgba(40,50,45,0.4)",border:"1px solid rgba(60,80,70,0.3)"};const ln=Math.min(1,Ee/sn),Un=Math.round(255-ln*200),ho=255,ji=Math.round(255-ln*180);return{bg:`rgb(${Un},${ho},${ji})`,border:`1px solid rgba(${100+(1-ln)*100},255,${100+(1-ln)*100},0.8)`}},po=12,yt=(mt-po)/2;return e.jsxs("div",{style:{position:"absolute",left:tt*mt,top:0,width:mt,height:ft,borderRight:"1px solid rgba(40,40,50,0.5)"},children:[zo.map((Ee,Bt)=>{const ln=qn+Bt*fo,Un=14,ho=Ee.sell===0?Un:Math.max(Un,yt*.3+yt*.7*(Ee.sell/It)),ji=Ee.buy===0?Un:Math.max(Un,yt*.3+yt*.7*(Ee.buy/sn)),sr=Vn(Ee.sell,Ee.isPOC),Si=Wn(Ee.buy,Ee.isPOC),ii=Ee.isPOC?"#000":"#8b0000",Dl=Ee.isPOC?"#000":"#006400";return e.jsxs(No.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:yt-ho,top:ln,width:ho,height:fo-1,background:sr.bg,border:sr.border,borderRadius:"2px 0 0 2px",boxShadow:Ee.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:2,fontSize:8,fontFamily:"monospace",color:Ee.sell===0?"#666":ii,fontWeight:Ee.isPOC?700:600,textShadow:"none",overflow:"hidden"},children:I&&Ee.sell}),e.jsx("div",{style:{position:"absolute",left:yt+po,top:ln,width:ji,height:fo-1,background:Si.bg,border:Si.border,borderRadius:"0 2px 2px 0",boxShadow:Ee.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:2,fontSize:8,fontFamily:"monospace",color:Ee.buy===0?"#666":Dl,fontWeight:Ee.isPOC?700:400,textShadow:Ee.isPOC||Ee.buy===0?"none":"0 0 2px rgba(0,0,0,0.8)",overflow:"hidden"},children:I&&Ee.buy})]},Bt)}),e.jsx("div",{style:{position:"absolute",left:yt+po/2-1,top:qn,width:2,height:Math.max(Oo-qn,1),background:fn?"rgba(0,255,200,0.6)":"rgba(255,0,150,0.6)",boxShadow:fn?"0 0 3px rgba(0,255,255,0.5)":"0 0 3px rgba(255,0,150,0.5)"}}),e.jsx("div",{style:{position:"absolute",left:yt+1,top:Vi,width:po-2,height:Math.max(Ro,3),background:fn?"rgba(100,255,200,0.7)":"rgba(255,100,150,0.7)",border:fn?"1px solid rgba(0,255,255,0.9)":"1px solid rgba(255,0,150,0.9)",borderRadius:2,boxShadow:fn?"0 0 4px rgba(0,255,255,0.6)":"0 0 4px rgba(255,0,150,0.6)"}}),tt===Pt.length-1&&Re.ts&&e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Math.min(Oo+10,ft-25),background:"#00cccc",border:"2px solid #00ffff",borderRadius:4,padding:"4px 12px",fontSize:12,fontWeight:700,color:"#000",whiteSpace:"nowrap",boxShadow:"0 0 15px rgba(0,255,255,0.9)",zIndex:500},children:jt(Re.ts)})]},tt)})})}),e.jsx("div",{style:{width:xt,height:ht,overflow:"hidden",borderLeft:"1px solid rgba(255,255,255,0.2)",background:"rgba(20,20,30,0.95)",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"4px 0",cursor:"ns-resize",userSelect:"none"},onMouseDown:Re=>{const tt=Re.clientY,ot=G,Jt=pn=>{const cn=(tt-pn.clientY)/100,nn=Math.max(.5,Math.min(5,ot+cn));v(nn)},Rt=()=>{document.removeEventListener("mousemove",Jt),document.removeEventListener("mouseup",Rt)};document.addEventListener("mousemove",Jt),document.addEventListener("mouseup",Rt)},onWheel:Re=>{Re.preventDefault();const tt=Re.deltaY>0?-.1:.1;v(ot=>Math.max(.5,Math.min(5,ot+tt)))},children:[...Array(8)].map((Re,tt)=>{const ot=dn-tt*(dn-Wt)/7;return e.jsx("div",{style:{fontSize:9,fontFamily:"monospace",color:"#aaa",paddingLeft:4,lineHeight:1},children:ot.toFixed(1)},tt)})})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.4)",maxWidth:"100%",overflowX:"auto"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Pt.map((Re,tt)=>e.jsx("div",{style:{width:mt,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",color:"#777",padding:"2px 0"},children:Re.isEmpty?"":(Re.buy||0)+(Re.sell||0)},tt))}),e.jsx("div",{style:{width:xt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Pt.map((Re,tt)=>{const ot=Re.delta||(Re.buy||0)-(Re.sell||0),Jt=ot>=0;return e.jsx("div",{style:{width:mt,flexShrink:0,textAlign:"center",padding:"2px 1px"},children:!Re.isEmpty&&e.jsxs("span",{style:{fontSize:8,fontFamily:"monospace",fontWeight:600,color:"#000",background:Jt?"#40dd80":"#ff5555",padding:"1px 4px",borderRadius:2},children:[Jt?"+":"",typeof ot=="number"?ot.toFixed(0):ot]})},tt)})}),e.jsx("div",{style:{width:xt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Pt.map((Re,tt)=>{const ot=Re.delta||(Re.buy||0)-(Re.sell||0),Jt=(Re.buy||0)+(Re.sell||0),Rt=Jt>0?ot/Jt*100:0;return e.jsx("div",{style:{width:mt,flexShrink:0,textAlign:"center",fontSize:7,fontFamily:"monospace",color:Rt>=0?"#40dd80":"#ff5555",padding:"1px 0"},children:Re.isEmpty?"":`${Rt.toFixed(1)}%`},tt)})}),e.jsx("div",{style:{width:xt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",cursor:"ew-resize",userSelect:"none"},onMouseDown:Re=>{const tt=Re.clientX,ot=h,Jt=pn=>{const cn=(tt-pn.clientX)/100,nn=Math.max(.5,Math.min(3,ot+cn));T(nn)},Rt=()=>{document.removeEventListener("mousemove",Jt),document.removeEventListener("mouseup",Rt)};document.addEventListener("mousemove",Jt),document.addEventListener("mouseup",Rt)},onWheel:Re=>{Re.preventDefault();const tt=Re.deltaY>0?-.1:.1;T(ot=>Math.max(.5,Math.min(3,ot+tt)))},children:[e.jsxs("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",position:"relative",paddingRight:60},children:[Pt.map((Re,tt)=>{const ot=tt===Pt.length-1;return e.jsx("div",{style:{width:mt,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",padding:"3px 0"},children:Re.isEmpty?"":e.jsx("span",{style:{color:ot?"#00ffff":"#555",fontWeight:ot?700:400,background:ot?"rgba(0,255,255,0.25)":"transparent",padding:ot?"2px 6px":0,borderRadius:ot?4:0,border:ot?"1px solid rgba(0,255,255,0.7)":"none",boxShadow:ot?"0 0 6px rgba(0,255,255,0.5)":"none"},children:jt(Re.ts)})},tt)}),Pt.length>0&&!Pt[Pt.length-1].isEmpty&&e.jsxs("div",{style:{position:"absolute",right:0,top:-20,background:"rgba(0,255,255,0.3)",border:"1px solid rgba(0,255,255,0.8)",borderRadius:4,padding:"2px 8px",fontSize:9,fontWeight:700,color:"#00ffff",boxShadow:"0 0 8px rgba(0,255,255,0.5)",zIndex:100},children:["LIVE: ",jt(Pt[Pt.length-1].ts)]})]}),e.jsx("div",{style:{width:xt,flexShrink:0}})]})]})]}),!I&&e.jsx("button",{onClick:()=>de(!0),style:{position:"absolute",top:8,right:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:10,color:"#888",zIndex:200},children:" Expand"})]})})()})]})})(),(t==null?void 0:t.contract)==="BTC-SPOT"&&e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10,marginTop:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"BTC ETF FLOWS & INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"TOTAL ETF FLOWS"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"1D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:b.total_flow_1d_mm>0?"#00ff88":b.total_flow_1d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(b.total_flow_1d_mm||0).toFixed(0),"M",b.total_flow_1d_mm>0?" IN":b.total_flow_1d_mm<0?" OUT":""]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"5D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:b.total_flow_5d_mm>0?"#00ff88":b.total_flow_5d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(b.total_flow_5d_mm||0).toFixed(0),"M"]})]})]}),(b.etfs||[]).slice(0,4).map((x,D)=>{var X,U;return e.jsxs("div",{style:{flex:"1 1 120px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#ffaa00",fontWeight:700,marginBottom:4},children:x.symbol}),e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#fff",marginBottom:2},children:["$",((X=x.price)==null?void 0:X.toFixed(2))||"--"]}),e.jsxs("div",{style:{fontSize:9,color:x.price_change_1d>0?"#00ff88":x.price_change_1d<0?"#ff4466":"#888"},children:[x.price_change_1d>0?"+":"",((U=x.price_change_1d)==null?void 0:U.toFixed(2))||"0","%"]})]},D)}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"INSTITUTIONAL SENTIMENT"}),(()=>{const x=(ne==null?void 0:ne.bitcoin)||{},D=x.overall_sentiment||"neutral",X=D==="bullish"?"#00ff88":D==="bearish"?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Overall"}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:X,textTransform:"uppercase"},children:D})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"ETF Trend"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:x.etf_flow_trend==="bullish"?"#00ff88":x.etf_flow_trend==="bearish"?"#ff4466":"#888"},children:x.etf_flow_trend||"neutral"})]})]})})()]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#ff6b6b",fontWeight:700,marginBottom:6},children:"DERIBIT OPTIONS"}),(()=>{const x=(re==null?void 0:re.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Max Pain"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:"#ffaa00"},children:["$",(x.max_pain||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"P/C Ratio"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:x.put_call_ratio>1?"#ff4466":x.put_call_ratio<.7?"#00ff88":"#888"},children:(x.put_call_ratio||0).toFixed(2)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Sentiment"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:x.sentiment==="bullish"?"#00ff88":x.sentiment==="bearish"?"#ff4466":"#888"},children:x.sentiment||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",fontWeight:700,marginBottom:6},children:"GAMMA LEVELS"}),(()=>{const x=(re==null?void 0:re.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#00ff88"},children:"Call Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(x.call_wall||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#ff4466"},children:"Put Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(x.put_wall||0).toLocaleString()]})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"PERP FUNDING RATE"}),(()=>{var U,je,Ae;const x=(rt==null?void 0:rt.funding_rates)||{},D=x.average||0,X=D>.01?"#00ff88":D<-.01?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"8H Rate"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:X},children:[D>0?"+":"",(D||0).toFixed(4),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Annual"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:X},children:[x.annualized>0?"+":"",(x.annualized||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:(U=x.sentiment)!=null&&U.includes("bullish")?"#00ff88":(je=x.sentiment)!=null&&je.includes("bearish")?"#ff4466":"#888"},children:((Ae=x.sentiment)==null?void 0:Ae.replace("_"," "))||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CME BASIS"}),(()=>{var X;const D=(((X=ne==null?void 0:ne.bitcoin)==null?void 0:X.cme_basis)||{}).basis_pct||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Futures vs Spot"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:D>0?"#00ff88":"#ff4466"},children:[D>0?"+":"",D.toFixed(2),"%"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Premium tracking"})]})})()]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:8},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var Be;const x=((Be=ne==null?void 0:ne.bitcoin)==null?void 0:Be.cot)||{},D=x.sentiment||"neutral",X=D==="bullish"?"#00ff88":D==="bearish"?"#ff4466":"#888",U=x.asset_mgr_net||0,je=x.asset_mgr_net_prev||0,Ae=x.asset_mgr_change||U-je,Ve=x.lev_funds_net||0,pt=x.lev_funds_net_prev||0,ye=x.lev_funds_change||Ve-pt,me=x.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Asset Managers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466",fontWeight:600},children:[(U/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(je/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:Ae>0?"#00ff88":"#ff4466",fontWeight:600},children:[Ae>0?"+":"",(Ae/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",me]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Asset Mgrs"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:U>0?"#00ff88":"#ff4466"},children:[U>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:Ae>0?"#00ff88":"#ff4466"},children:["(",Ae>0?"+":"",(Ae/1e3).toFixed(1),"K)"]})]})]})}),e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Leveraged Funds Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Ve>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Ve/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(pt/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:ye>0?"#00ff88":"#ff4466",fontWeight:600},children:[ye>0?"+":"",(ye/1e3).toFixed(1),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Lev Funds"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Ve>0?"#00ff88":"#ff4466"},children:[Ve>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:ye>0?"#00ff88":"#ff4466"},children:["(",ye>0?"+":"",(ye/1e3).toFixed(1),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:X,textTransform:"capitalize"},children:D})]})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"CME OPEN INTEREST"}),(()=>{var je;const x=((je=ne==null?void 0:ne.bitcoin)==null?void 0:je.open_interest)||{},D=x.total||0,X=x.total_prev||0,U=x.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"CME Bitcoin Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(D/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(X/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466"},children:[U>0?"+":"",U.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(D/1e3).toFixed(1),"K BTC"]})]})}),e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466"},children:[U>0?"+":"",U.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",fontWeight:700,marginBottom:6},children:"GBTC PREMIUM"}),(()=>{var je;const x=((je=ne==null?void 0:ne.bitcoin)==null?void 0:je.gbtc)||{},D=x.premium_pct||0,X=x.premium_pct_prev||0,U=D-X;return e.jsxs(e.Fragment,{children:[e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#888",fontWeight:600,marginBottom:4},children:"GBTC NAV Premium/Discount"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:D>0?"#00ff88":"#ff4466",fontWeight:600},children:[D>0?"+":"",D.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[X>0?"+":"",X.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Change:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466"},children:[U>0?"+":"",U.toFixed(2),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Premium = bullish demand"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Discount = bearish pressure"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"NAV Premium"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:D>0?"#00ff88":"#ff4466"},children:[D>0?"+":"",D.toFixed(2),"%"]})]})}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Institutional demand"})]})})()]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"CFTC COT Report"}),e.jsx("div",{style:{marginBottom:4,color:"#aaa"},children:"Commitments of Traders"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Data as of:"}),e.jsx("span",{style:{color:"#fff"},children:"Tuesday"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Released:"}),e.jsx("span",{style:{color:"#fff"},children:"Friday 3:30pm ET"})]}),e.jsx("div",{style:{marginTop:6,fontSize:9,color:"#666"},children:"Shows institutional positioning in CME Bitcoin futures"})]}),children:e.jsxs("div",{style:{cursor:"help"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CFTC REPORT"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Weekly Tuesday"}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"Released Fri 3:30pm"})]})})})]})]}),(()=>{const D=[...$e].slice(0,21).reverse(),X=3,U=180;let je=0;const Ae=D.map((he,gt,mt)=>{const ht=he.delta??0,xt=(he.buy||0)+(he.sell||0),wt=xt>0?ht/xt*100:0,H=gt>0&&mt[gt-1].delta||0,Ye=ht-H,ue=je;je+=ht;const bt=je,kt=Math.abs(ht)*.15,At=Math.max(ue,bt)+kt,$t=Math.min(ue,bt)-kt;return{price_open:he.price_open||0,price_high:he.price_high||0,price_low:he.price_low||0,price_close:he.price_close||0,delta_open:ue,delta_high:At,delta_low:$t,delta_close:bt,delta:ht,deltaPct:wt,deltaChange:Ye,volume:xt,ts:he.ts||0,isCurrent:!1,isEmpty:!1}});if(A.buy>0||A.sell>0||A.price_open>0){const he=A.delta??0,gt=Me>0?he/Me*100:0,mt=D.length>0&&D[D.length-1].delta||0,ht=he-mt,xt=Ae.length>0?Ae[Ae.length-1].delta_close:0,wt=xt,H=xt+he,Ye=Math.abs(he)*.15,ue=Math.max(wt,H)+Ye,bt=Math.min(wt,H)-Ye;Ae.push({price_open:A.price_open||0,price_high:A.price_high||Ne,price_low:A.price_low||Ne,price_close:Ne,delta_open:wt,delta_high:ue,delta_low:bt,delta_close:H,delta:he,deltaPct:gt,deltaChange:ht,volume:Me,ts:A.candle_start||Date.now()/1e3,isCurrent:!0,isEmpty:!1})}const Ve=Ae,pt=Ve.filter(he=>he.price_open>0),ye=pt.map(he=>he.price_high),me=pt.map(he=>he.price_low),Be=ye.length>0?Math.max(...ye):0,qe=me.length>0?Math.min(...me):0,St=Be-qe||1,We=Be+St*.1,dt=qe-St*.1,Yt=We-dt||1,Ot=Ve,Lt=Ot.map(he=>he.delta_high),Pt=Ot.map(he=>he.delta_low),Nt=Lt.length>0?Math.max(...Lt):0,K=Pt.length>0?Math.min(...Pt):0,be=Nt-K||50,vt=Nt+be*.15,Ht=K-be*.15,Xt=vt-Ht||1,Ke=he=>(We-he)/Yt*U,ct=he=>(vt-he)/Xt*U,Ut=he=>he?new Date(he*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",hour12:!1}):"";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{color:"#888",fontSize:10,fontWeight:600,letterSpacing:1},children:"PRICE & DELTA CHARTS"}),e.jsx("button",{onClick:()=>y(!w),style:{background:w?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:w?"Hide Charts":"Show Charts"})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"PRICE OHLC"}),e.jsxs("div",{style:{display:"flex",gap:X,height:U,overflow:"hidden",position:"relative"},children:[Ve.map((he,gt)=>{if(he.price_open<=0)return null;const mt=he.price_close>=he.price_open,ht=Ke(Math.max(he.price_open,he.price_close)),xt=Math.max(Math.abs(Ke(he.price_open)-Ke(he.price_close)),2),wt=Ke(he.price_high),H=Ke(he.price_low)-wt,Ye=mt?"#00ff88":"#ff4466",ue=he.isCurrent?1:.5+gt/Ve.length*.5,bt=c===gt;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:U,opacity:bt?1:ue,cursor:"crosshair"},onMouseEnter:()=>F(gt),onMouseLeave:()=>F(null),children:[bt&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:wt,width:1,height:H,background:Ye,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:ht,width:he.isCurrent?"90%":"70%",height:xt,background:Ye,borderRadius:1,border:he.isCurrent?"1px solid rgba(255,255,255,0.5)":"none"}}),bt&&he.ts&&!he.isCurrent&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"2px 6px",fontSize:9,color:"#aaa",whiteSpace:"nowrap",pointerEvents:"none",zIndex:100},children:Ut(he.ts)}),he.isCurrent&&he.ts&&e.jsx("div",{style:{position:"absolute",bottom:-16,left:"50%",transform:"translateX(-50%)",background:"rgba(0,170,255,0.3)",border:"1px solid rgba(0,170,255,0.6)",borderRadius:3,padding:"1px 4px",fontSize:8,fontWeight:600,color:"#00aaff",whiteSpace:"nowrap",pointerEvents:"none",zIndex:50},children:Ut(he.ts)})]},gt)}),(()=>{var Kt;const he=t.big_trades||[],gt=t.big_trades_historical||[],mt=new Set(he.map(ft=>ft.ts)),xt=[...he,...gt.filter(ft=>!mt.has(ft.ts))].sort((ft,Dt)=>Dt.ts-ft.ts);if(xt.length===0)return null;const wt=100/Ve.length,H=o==="5m"?300:o==="15m"?900:o==="30m"?1800:3600,Ye=Ve.filter(ft=>ft.ts>0),ue=Ye.length>0?Math.min(...Ye.map(ft=>ft.ts)):0,bt=Ye.length>0?Math.max(...Ye.map(ft=>ft.ts))+H*2:0,kt=xt.filter(ft=>ft.ts>=ue&&ft.ts<=bt),At={GC:100,NQ:20,ES:50,CL:1e3,BTC:1},$t=t.asset_class||"GC",dn=At[$t]||100,Wt=((Kt=t.threshold_stats)==null?void 0:Kt.avg_size)||3;return t.big_trade_threshold,e.jsxs(e.Fragment,{children:[e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:U,pointerEvents:"none",zIndex:25,overflow:"visible"},children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"buyGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#88ffcc",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#00ff88",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#006633",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"buyGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ccffee",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#44ffaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#00cc66",stopOpacity:"0.7"})]}),e.jsxs("radialGradient",{id:"sellGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffaaaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#ff4466",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#881133",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"sellGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffdddd",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#ff6688",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#cc2244",stopOpacity:"0.7"})]}),e.jsxs("filter",{id:"buyGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"sellGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),kt.map((ft,Dt)=>{const jt=ft.ts,Re=Ve.findIndex((Vi,Ro)=>{if(!Vi.ts)return!1;const co=Vi.ts,fo=Ro===Ve.length-1?co+H*2:co+H;return jt>=co&&jt<fo});if(Re===-1)return null;const tt=(Re+.5)*wt,ot=Ke(ft.price),Jt=o==="5m"?2:o==="15m"?1.5:o==="30m"?1.2:.8,pn=Math.min(o==="1h"?14:o==="30m"?16:22,Math.max(6,Math.sqrt(ft.size)*Jt)),cn=ft.ts,nn=u===cn,fn=nn?pn*1.5:pn,qn=ft.side==="BUY",Oo=qn?nn?"url(#buyGradientHover)":"url(#buyGradient)":nn?"url(#sellGradientHover)":"url(#sellGradient)",eo=qn?"#00ff88":"#ff4466",wn=qn?"#00ff88":"#ff4466";return e.jsxs("g",{style:{cursor:"pointer",pointerEvents:"all"},onMouseEnter:()=>oe(cn),onMouseLeave:fe,children:[e.jsx("circle",{cx:`${tt}%`,cy:ot,r:fn+15,fill:"transparent",style:{pointerEvents:"visiblePainted",cursor:"pointer"}}),e.jsx("circle",{cx:`${tt}%`,cy:ot,r:fn+(nn?12:4),fill:"none",stroke:eo,strokeWidth:nn?3:1,strokeOpacity:nn?.5:.2,style:{transition:"all 0.2s ease",pointerEvents:"none"}}),e.jsx("circle",{cx:`${tt}%`,cy:ot,r:fn+(nn?6:2),fill:eo,fillOpacity:nn?.25:.1,style:{transition:"all 0.2s ease"}}),e.jsx("circle",{cx:`${tt}%`,cy:ot,r:fn,fill:Oo,stroke:nn?"#ffffff":wn,strokeWidth:nn?2:1,filter:nn?qn?"url(#buyGlow)":"url(#sellGlow)":"none",style:{transition:"all 0.2s ease"}}),e.jsx("ellipse",{cx:`${tt}%`,cy:ot-fn*.35,rx:fn*.5,ry:fn*.25,fill:"rgba(255,255,255,0.4)",style:{transition:"all 0.2s ease"}}),(ft.size>=10||nn)&&e.jsx("text",{x:`${tt}%`,y:ot+(nn?4:3),textAnchor:"middle",fontSize:nn?11:8,fontWeight:"bold",fill:"#fff",style:{transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:ft.size>=1e3?`${(ft.size/1e3).toFixed(1)}K`:ft.size})]},cn)}),kt.length===0&&xt.length>0&&e.jsxs("text",{x:"50%",y:"20",textAnchor:"middle",fontSize:9,fill:"#666",children:[xt.length," big trades (",gt.length," historical) - scroll to see"]})]}),u!==null&&(()=>{const ft=kt.find(Rt=>Rt.ts===u);if(!ft)return null;const Dt=ft.ts,Re=Ve.findIndex((Rt,pn)=>{if(!Rt.ts)return!1;const cn=Rt.ts,fn=pn===Ve.length-1?cn+H*2:cn+H;return Dt>=cn&&Dt<fn})>=Ve.length*.7,tt=ft.size*ft.price*dn,ot=Wt>0?(ft.size/Wt).toFixed(1):"",Jt=new Date(ft.ts*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return e.jsxs("div",{style:{position:"absolute",top:4,...Re?{left:4}:{right:4},background:"rgba(10,10,20,0.95)",border:`2px solid ${ft.side==="BUY"?"#00ff88":"#ff4466"}`,borderRadius:8,padding:10,zIndex:100,minWidth:180,boxShadow:`0 4px 20px ${ft.side==="BUY"?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:ft.side==="BUY"?"#00ff88":"#ff4466",marginBottom:6},children:ft.side==="BUY"?" BIG BUY":" BIG SELL"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr",gap:"3px 8px",fontSize:10},children:[e.jsx("span",{style:{color:"#666"},children:"Size:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:700},children:[ft.size," contracts"]}),e.jsx("span",{style:{color:"#666"},children:"Price:"}),e.jsxs("span",{style:{color:"#fff"},children:["$",ft.price.toFixed(2)]}),e.jsx("span",{style:{color:"#666"},children:"Notional:"}),e.jsxs("span",{style:{color:"#ffaa00",fontWeight:600},children:["$",(tt/1e6).toFixed(2),"M"]}),e.jsx("span",{style:{color:"#666"},children:"vs Average:"}),e.jsxs("span",{style:{color:parseFloat(ot)>2?"#00ff88":"#fff"},children:[ot,"x larger"]}),e.jsx("span",{style:{color:"#666"},children:"Time:"}),e.jsxs("span",{style:{color:"#888"},children:[Jt," ET"]}),ft.date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#666"},children:"Date:"}),e.jsx("span",{style:{color:"#888"},children:ft.date})]})]}),e.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#666"},children:["Top 10% of trades by size ",ft.date?"(historical)":"(live)"]})]})})()]})})()]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",alignItems:"center",marginTop:4,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG BUY"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ff4466",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG SELL"})]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("div",{style:{color:"#f97316"},children:[(t.big_trades||[]).length," live + ",(t.big_trades_historical||[]).length," historical ",t.big_trade_threshold||10," (P90)"]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"DELTA OHLC  DIVERGENCE GLOW"}),e.jsx("div",{style:{display:"flex",gap:X,height:U,overflow:"hidden",position:"relative"},children:Ve.map((he,gt)=>{const mt=he.delta_open,ht=he.delta_high,xt=he.delta_low,wt=he.delta_close,H=he.price_open,Ye=he.price_close,ue=wt>=mt,bt=Ye>=H,kt=ue!==bt,At=ct(Math.max(mt,wt)),$t=Math.max(Math.abs(ct(mt)-ct(wt)),2),dn=ct(ht),Wt=ct(xt)-dn,Kt=ue?"#00ff88":"#ff4466",ft=he.isCurrent?1:.5+gt/Ve.length*.5,Dt=c===gt;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:U,opacity:Dt?1:ft,cursor:"crosshair"},onMouseEnter:()=>F(gt),onMouseLeave:()=>F(null),children:[Dt&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:dn,width:1,height:Math.max(Wt,0),background:Kt,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:At,width:he.isCurrent?"90%":"70%",height:$t,background:Kt,borderRadius:1,border:he.isCurrent?"1px solid rgba(255,255,255,0.5)":"none",boxShadow:kt?`0 0 8px ${Kt}, 0 0 12px ${Kt}`:"none"}})]},gt)})}),e.jsx("div",{style:{display:"flex",gap:X,marginTop:6},children:Ve.map((he,gt)=>{const mt=he.delta>=0?"#00ff88":"#ff4466",ht=he.isCurrent?1:.5+gt/Ve.length*.5,xt=H=>Math.abs(H)>=1e3?`${(H/1e3).toFixed(1)}k`:Math.round(H),wt=c===gt;return e.jsxs("div",{onMouseEnter:()=>F(gt),onMouseLeave:()=>F(null),style:{flex:"1 1 0",minWidth:0,textAlign:"center",opacity:wt?1:ht,background:he.isCurrent?"rgba(0,170,255,0.12)":wt?"rgba(255,255,255,0.05)":"transparent",borderRadius:4,padding:"3px 1px",border:he.isCurrent?"1px solid rgba(0,170,255,0.25)":"none",cursor:"pointer",transition:"opacity 0.15s"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",fontFamily:"monospace",overflow:"hidden",textOverflow:"ellipsis"},children:Ut(he.ts)}),e.jsxs("div",{style:{fontSize:10,color:mt,fontFamily:"monospace",fontWeight:700},children:[he.deltaPct>=0?"+":"",(he.deltaPct||0).toFixed(0),"%"]}),e.jsx("div",{style:{fontSize:8,color:"#888",fontFamily:"monospace"},children:xt(he.volume||0)})]},gt)})})]})]})]})})(),(()=>{var Ht,Xt,Ke,ct,Ut,he,gt,mt;const x=((Ht=t.volume_5m)==null?void 0:Ht.history)||[],D=x.length<5,X=x.slice(0,10),U=x.slice(10,20),je=X.reduce((ht,xt)=>ht+(xt.delta||0),0),Ae=U.reduce((ht,xt)=>ht+(xt.delta||0),0),Ve=je-Ae,pt=((Xt=X[X.length-1])==null?void 0:Xt.price_open)||0,ye=((Ke=X[0])==null?void 0:Ke.price_close)||0,me=ye-pt,Be=pt>0?me/pt*100:0,qe=500,St=.1;let We="BALANCED";Math.abs(Ve)>qe&&(Ve<-qe&&Be>-St?We="DISTRIBUTION":Ve>qe&&Be<St&&(We="ACCUMULATION"));const dt=X[0]||{},Yt=Math.abs((dt.price_high||0)-(dt.price_low||0)),Ot=dt.delta||0;let Lt="NEUTRAL";Math.abs(Ot)>100&&Yt<5?Lt=Ot>0?"BULL_ABSORPTION":"BEAR_ABSORPTION":Yt>10&&Math.abs(Ot)>100&&(Lt=Ot>0?"BULL_FOLLOW":"BEAR_FOLLOW");const Pt=Ve*me<0&&Math.abs(Ve)>qe,Nt=X.length>0?je/X.length:0;U.length>0&&Ae/U.length;const K=t.big_trades_buy||0,be=t.big_trades_sell||0,vt=(t.big_trades||[]).length;return e.jsxs("div",{style:{marginTop:8,background:D?"rgba(255,255,255,0.02)":We==="DISTRIBUTION"?"rgba(255,68,102,0.08)":We==="ACCUMULATION"?"rgba(0,255,136,0.08)":"rgba(255,255,255,0.02)",border:`1px solid ${D?"rgba(255,255,255,0.08)":We==="DISTRIBUTION"?"rgba(255,68,102,0.3)":We==="ACCUMULATION"?"rgba(0,255,136,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:8,padding:10},children:[e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",gap:6},onClick:()=>C(!m),children:["ORDER FLOW ANALYSIS",e.jsx("span",{style:{fontSize:10,color:m?"#00aaff":"#555",background:m?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",borderRadius:10,padding:"1px 6px",transition:"all 0.2s"},children:""}),D&&e.jsxs("span",{style:{color:"#ffaa00"},children:[" Collecting data (",x.length,"/5 candles)"]})]}),m&&e.jsxs("div",{style:{marginTop:12,background:"#0a0a12",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:12,marginBottom:12},children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:We==="DISTRIBUTION"?"#ff4466":We==="ACCUMULATION"?"#00ff88":"#00aaff",marginBottom:6},children:We==="DISTRIBUTION"?" DISTRIBUTION DETECTED":We==="ACCUMULATION"?" ACCUMULATION DETECTED":" BALANCED / NO CLEAR REGIME"}),e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:We==="DISTRIBUTION"?"Sellers building pressure while price holds - expect downside breakout":We==="ACCUMULATION"?"Buyers building pressure while price holds - expect upside breakout":"CVD and price moving together or no significant pressure detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#00aaff",borderRadius:"50%"}}),"CVD ANALYSIS (Cumulative Volume Delta)"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Session CVD:"}),e.jsxs("div",{style:{color:(t.cumulative_delta||0)>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[(t.cumulative_delta||0)>=0?"+":"",(t.cumulative_delta||0).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Recent CVD (10 bars):"}),e.jsxs("div",{style:{color:je>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[je>=0?"+":"",je.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Prior CVD (10 bars):"}),e.jsxs("div",{style:{color:Ae>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[Ae>=0?"+":"",Ae.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"CVD Trend ():"}),e.jsxs("div",{style:{color:Ve>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[Ve>=0?"+":"",Ve.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Avg Delta/Bar:"}),e.jsxs("div",{style:{color:Nt>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[Nt>=0?"+":"",Nt.toFixed(0)]}),e.jsx("div",{style:{color:"#777"},children:"Regime Threshold:"}),e.jsxs("div",{style:{color:"#999",fontFamily:"monospace"},children:["",qe]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#ffaa00",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#ffaa00",borderRadius:"50%"}}),"PRICE ANALYSIS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Current Price:"}),e.jsxs("div",{style:{color:"#00aaff",fontFamily:"monospace",fontWeight:700,fontSize:13},children:["$",(t.current_price||0).toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"50m Start Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:pt>0?`$${pt.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"50m End Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:ye>0?`$${ye.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"Price Change (50m):"}),e.jsx("div",{style:{color:me>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:pt>0?`${me>=0?"+":""}${me.toFixed(2)} (${Be>=0?"+":""}${Be.toFixed(3)}%)`:""})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#a855f7",borderRadius:"50%"}}),"VSA (Volume Spread Analysis) - Last 5m Bar"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Price Spread:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:["$",Yt.toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"Bar Delta:"}),e.jsxs("div",{style:{color:Ot>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[Ot>=0?"+":"",Ot.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Buy Volume:"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:(dt.buy||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Sell Volume:"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:(dt.sell||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Signal:"}),e.jsx("div",{style:{color:Lt.includes("BULL")?"#00ff88":Lt.includes("BEAR")?"#ff4466":"#888",fontWeight:700},children:Lt.replace("_"," ")})]}),e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:8,padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6,marginLeft:14},children:Lt.includes("ABSORPTION")?" High delta + Low spread = Strong hands absorbing pressure":Lt.includes("FOLLOW")?" High delta + High spread = Momentum follow-through":" No significant volume-price relationship detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#f97316",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#f97316",borderRadius:"50%"}}),"BIG TRADES (",t.big_trade_threshold||10," contracts) - Institutional Activity"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Big Buy Volume:"}),e.jsxs("div",{style:{color:"#00ff88",fontFamily:"monospace",fontWeight:600},children:[K.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Big Sell Volume:"}),e.jsxs("div",{style:{color:"#ff4466",fontFamily:"monospace",fontWeight:600},children:[be.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Net Big Delta:"}),e.jsxs("div",{style:{color:K-be>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:14},children:[K-be>=0?"+":"",(K-be).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Trade Count:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[vt," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Imbalance:"}),e.jsx("div",{style:{color:K>be?"#00ff88":be>K?"#ff4466":"#888",fontWeight:600},children:K>be?" BUYERS dominant":be>K?" SELLERS dominant":" Balanced"})]}),e.jsxs("div",{style:{background:"rgba(249,115,22,0.1)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:6,padding:10,marginTop:12,marginLeft:14},children:[e.jsx("div",{style:{fontSize:10,color:"#f97316",fontWeight:600,marginBottom:6},children:"THRESHOLD CALCULATION (90th Percentile)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"110px 1fr",gap:"4px 12px",fontSize:10},children:[e.jsx("div",{style:{color:"#777"},children:"Sample Size:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((ct=t.threshold_stats)==null?void 0:ct.sample_count)||0).toLocaleString()," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Average Trade:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((Ut=t.threshold_stats)==null?void 0:Ut.avg_size)||0).toFixed(1)," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"90th Percentile:"}),e.jsxs("div",{style:{color:"#f97316",fontFamily:"monospace",fontWeight:700},children:[((he=t.threshold_stats)==null?void 0:he.p90_size)||t.big_trade_threshold||10," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Trade Range:"}),e.jsxs("div",{style:{color:"#888",fontFamily:"monospace"},children:[((gt=t.threshold_stats)==null?void 0:gt.min_size)||1," - ",((mt=t.threshold_stats)==null?void 0:mt.max_size)||"?"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:8,fontStyle:"italic"},children:"Trades above 90th percentile are flagged as institutional activity"})]})]}),e.jsxs("div",{style:{background:Pt?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.1)",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontSize:11,color:Pt?"#ffaa00":"#00ff88",fontWeight:600,marginBottom:6},children:Pt?" DIVERGENCE DETECTED":" CVD & PRICE ALIGNED"}),e.jsx("div",{style:{fontSize:10,color:"#999",lineHeight:1.4},children:Pt?`CVD trending ${Ve>0?"UP":"DOWN"} while price moving ${me>0?"UP":"DOWN"} - potential reversal signal`:"CVD direction matches price direction - trend continuation likely"})]}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:10,color:"#666",textAlign:"center"},children:["Order Flow Analysis  ",x.length," candles analyzed"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{flex:"0 0 auto",background:We==="DISTRIBUTION"?"rgba(255,68,102,0.15)":We==="ACCUMULATION"?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.05)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:`1px solid ${We==="DISTRIBUTION"?"#ff446650":We==="ACCUMULATION"?"#00ff8850":"#ffffff10"}`},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"REGIME"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:We==="DISTRIBUTION"?"#ff4466":We==="ACCUMULATION"?"#00ff88":"#888"},children:[We==="DISTRIBUTION"?"":We==="ACCUMULATION"?"":""," ",We]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CVD TREND (50m)"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:Ve>=0?"#00ff88":"#ff4466"},children:[Ve>=0?"+":"",Ve.toLocaleString()]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"PRICE "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:me>=0?"#00ff88":"#ff4466"},children:[me>=0?"+":"",me.toFixed(2)]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:Pt?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.08)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:Pt?"1px solid #ffaa0050":"1px solid #00ff8830"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"DIVERGENCE"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:Pt?"#ffaa00":"#00ff88"},children:Pt?" DETECTED":" ALIGNED"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:Lt.includes("ABSORPTION")?"rgba(0,170,255,0.1)":Lt.includes("FOLLOW")?"rgba(0,255,136,0.1)":"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"VSA SIGNAL"}),e.jsx("div",{style:{fontSize:11,fontWeight:700,color:Lt.includes("BULL")?"#00ff88":Lt.includes("BEAR")?"#ff4466":"#888"},children:Lt==="BULL_ABSORPTION"?" ABSORPTION":Lt==="BEAR_ABSORPTION"?" ABSORPTION":Lt==="BULL_FOLLOW"?" FOLLOW":Lt==="BEAR_FOLLOW"?" FOLLOW":" NEUTRAL"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"BIG TRADES "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:(t.big_trades_delta||0)>=0?"#00ff88":"#ff4466"},children:[(t.big_trades_delta||0)>=0?"+":"",(t.big_trades_delta||0).toLocaleString()]})]})]})]})})(),(t==null?void 0:t.contract)!=="BTC-SPOT"&&e.jsxs("div",{style:{marginTop:8,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"GOLD INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CENTRAL BANKS"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:2},children:"Net Buyers 15+ Years"}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:"Accumulating gold reserves"})]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var Be,qe;const x=((Be=ne==null?void 0:ne.gold)==null?void 0:Be.cot)||{},D=x.sentiment||((qe=ne==null?void 0:ne.gold)==null?void 0:qe.cot_sentiment)||"neutral",X=D==="bullish"?"#00ff88":D==="bearish"?"#ff4466":"#888",U=x.managed_money_net||0,je=x.managed_money_net_prev||0,Ae=x.managed_money_change||U-je,Ve=x.swap_dealers_net||0,pt=x.swap_dealers_net_prev||0,ye=x.swap_dealers_change||Ve-pt,me=x.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Managed Money Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466",fontWeight:600},children:[(U/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(je/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:Ae>0?"#00ff88":"#ff4466",fontWeight:600},children:[Ae>0?"+":"",(Ae/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",me]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Managed Money"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:U>0?"#00ff88":"#ff4466"},children:[U>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:Ae>0?"#00ff88":"#ff4466"},children:["(",Ae>0?"+":"",(Ae/1e3).toFixed(0),"K)"]})]})]})}),e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Swap Dealers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Ve>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Ve/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(pt/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:ye>0?"#00ff88":"#ff4466",fontWeight:600},children:[ye>0?"+":"",(ye/1e3).toFixed(0),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Swap Dealers"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Ve>0?"#00ff88":"#ff4466"},children:[Ve>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:ye>0?"#00ff88":"#ff4466"},children:["(",ye>0?"+":"",(ye/1e3).toFixed(0),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:X,textTransform:"capitalize"},children:D})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"COMEX OPEN INTEREST"}),(()=>{var je;const x=((je=ne==null?void 0:ne.gold)==null?void 0:je.open_interest)||{},D=x.total||0,X=x.total_prev||0,U=x.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"COMEX Gold Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(D/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(X/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466"},children:[U>0?"+":"",U.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(D/1e3).toFixed(0),"K Contracts"]})]})}),e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466"},children:[U>0?"+":"",U.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(x.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(x.change_pct||0)>0?"+":"",(x.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"GOLD ETF FLOWS"}),(()=>{var Ve;const x=((Ve=ne==null?void 0:ne.gold)==null?void 0:Ve.etf)||{},D=x.gld_holdings||0,X=x.gld_holdings_prev||0,U=D-X,je=x.monthly_flow||0,Ae=x.weekly_flow||0;return e.jsxs(e.Fragment,{children:[e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"GLD ETF Holdings"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(D/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(X/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:U>0?"#00ff88":"#ff4466"},children:[U>0?"+":"",(U/1e3).toFixed(0),"K oz"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"GLD Holdings"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(D/1e6).toFixed(1),"M oz"]})]})}),e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"ETF Flow Data"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Weekly:"}),e.jsxs("span",{style:{color:Ae>0?"#00ff88":"#ff4466"},children:[Ae>0?"+":"",Ae," tons"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Monthly:"}),e.jsxs("span",{style:{color:je>0?"#00ff88":"#ff4466"},children:[je>0?"+":"",je," tons"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Positive = inflows (bullish)"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Negative = outflows (bearish)"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Weekly Flow"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:Ae>0?"#00ff88":"#ff4466"},children:[Ae>0?"+":"",Ae.toFixed(0)," tons"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:[e.jsx(bo,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:600,marginBottom:6},children:"Signal Composition"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"COT Positioning:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"Central Banks:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"ETF Flows:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:4},children:[e.jsx("span",{style:{color:"#888"},children:"Options Gamma:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:4,marginTop:4},children:[e.jsx("div",{style:{fontSize:9,color:"#666"},children:"CFTC Report: Tuesday data"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Released: Friday 3:30pm ET"})]})]}),children:e.jsx("div",{style:{cursor:"help"},children:e.jsx("div",{style:{fontSize:9,color:"#888",marginBottom:4},children:"OVERALL SIGNAL"})})}),(()=>{const x=(ne==null?void 0:ne.gold)||{},D=x.overall_sentiment||"neutral";x.confidence;const X=D==="bullish"?"#00ff88":D==="bearish"?"#ff4466":"#ffaa00";return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:X,textTransform:"uppercase",marginBottom:4},children:D}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"CFTC Fri 3:30pm"})]})})()]})]})]})]})]})]})},Eg=({selectedContract:t="ES"})=>{const[n,o]=B.useState("horizon"),[i,r]=B.useState(null),[s,l]=B.useState(!1),[a,d]=B.useState(null),[p,w]=B.useState(null),[y,u]=B.useState(null),[W,L]=B.useState({x:0,y:0}),[Z,Ge]=B.useState("current"),[f,m]=B.useState(null),[C,c]=B.useState(null),{isMobile:F}=$i(),[S,R]=B.useState(!1),[I,de]=B.useState("japan_ib"),[G,v]=B.useState(10),[h,T]=B.useState("long"),[Le,z]=B.useState(new Set),[Ie,Pe]=B.useState("all"),[ne,ze]=B.useState("all"),[b,_e]=B.useState(null),[re,He]=B.useState(!1),[rt,zt]=B.useState(!0),Xe=(()=>{const M=new Date,q=(ve=>{const Tt=new Date(Date.UTC(ve.getFullYear(),ve.getMonth(),ve.getDate())),ut=Tt.getUTCDay()||7;Tt.setUTCDate(Tt.getUTCDate()+4-ut);const Ct=new Date(Date.UTC(Tt.getUTCFullYear(),0,1));return Math.ceil(((Tt-Ct)/864e5+1)/7)})(M),ce=M.getFullYear(),Y=[];for(let ve=5;ve>=1;ve--){let Tt=q-ve,ut=ce;Tt<=0&&(Tt=52+Tt,ut=ce-1),Y.push({id:`w${ve}`,label:`W${Tt}`,weekNum:Tt,year:ut})}return Y.push({id:"current",label:"Current",weekNum:q,year:ce}),Y})(),oe=(()=>{const M=[{id:"all",label:"All 12 Months"}],N=new Date;for(let q=0;q<12;q++){const ce=new Date(N.getFullYear(),N.getMonth()-q,1),Y=`${ce.getFullYear()}-${String(ce.getMonth()+1).padStart(2,"0")}`,ve=ce.toLocaleDateString("en-US",{month:"short",year:"2-digit"});M.push({id:Y,label:ve,year:ce.getFullYear(),month:ce.getMonth()+1})}return M})(),fe=[{id:"pre_asia",name:"Pre Asia",start:"18:00",end:"19:00",color:"#4B5563",horizon:!1},{id:"japan_ib",name:"Japan",start:"19:00",end:"20:00",color:"#9370DB",horizon:!0},{id:"china",name:"China",start:"20:00",end:"23:00",color:"#F472B6",horizon:!0},{id:"asia_close",name:"Asia Close",start:"23:00",end:"02:00",color:"#4B5563",horizon:!1},{id:"deadzone",name:"Dead Zone",start:"02:00",end:"03:00",color:"#6B7280",horizon:!0},{id:"london",name:"London",start:"03:00",end:"06:00",color:"#3B82F6",horizon:!0},{id:"low_volume",name:"Low Vol",start:"06:00",end:"08:20",color:"#4B5563",horizon:!1},{id:"us_ib",name:"US IB",start:"08:20",end:"09:30",color:"#F59E0B",horizon:!0},{id:"ny_1h",name:"NY 1H",start:"09:30",end:"10:30",color:"#10B981",horizon:!0},{id:"ny_2h",name:"NY 2H",start:"10:30",end:"11:30",color:"#06B6D4",horizon:!0},{id:"lunch",name:"Lunch",start:"11:30",end:"13:30",color:"#8B5CF6",horizon:!0},{id:"ny_pm",name:"NY PM",start:"13:30",end:"16:00",color:"#EF4444",horizon:!0},{id:"ny_close",name:"NY Close",start:"16:00",end:"17:00",color:"#4B5563",horizon:!1},{id:"market_closed",name:"Market Closed",start:"17:00",end:"18:00",color:"#1F2937",horizon:!1}],we=(n==="horizon"?fe.filter(M=>M.horizon):fe).filter(M=>M.id!=="market_closed"),te=(()=>{const M=new Date,N=M.getTime()+M.getTimezoneOffset()*6e4,q=new Date(N-5*36e5),ce=q.getHours(),Y=q.getMinutes(),ve=ce*100+Y;return ve>=1900&&ve<2e3?"japan_ib":ve>=2e3&&ve<2300?"china":ve>=2300||ve<200?"asia_close":ve>=200&&ve<300?"deadzone":ve>=300&&ve<600?"london":ve>=600&&ve<820?"low_volume":ve>=820&&ve<930?"us_ib":ve>=930&&ve<1030?"ny_1h":ve>=1030&&ve<1130?"ny_2h":ve>=1130&&ve<1330?"lunch":ve>=1330&&ve<1600?"ny_pm":ve>=1600&&ve<1700?"ny_close":ve>=1700&&ve<1800?"market_closed":ve>=1800&&ve<1900?"pre_asia":null})(),ke=["pre_asia","japan_ib","china","asia_close","deadzone","london","low_volume","us_ib","ny_1h","ny_2h","lunch","ny_pm","ny_close","market_closed"],at=M=>{if(M===te)return"NOW";const N=ke.indexOf(te),q=ke.indexOf(M);return N===-1?"WAITING":q<N?"ENDED":"WAITING"},Me=(()=>{const M=new Date,N={timeZone:"America/New_York"},ce=new Intl.DateTimeFormat("en-US",{...N,weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}).formatToParts(M),Y=ce.find(Ct=>Ct.type==="weekday").value,ve=parseInt(ce.find(Ct=>Ct.type==="hour").value),Tt=parseInt(ce.find(Ct=>Ct.type==="minute").value),ut=ve*100+Tt;return Y==="Saturday"?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:Y==="Sunday"&&ut<1800?{closed:!0,isWeekend:!0,reopenDay:"Today",reopenTime:"18:00 ET"}:Y==="Friday"&&ut>=1700?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:ut>=1700&&ut<1800?{closed:!0,isWeekend:!1,reopenTime:"18:00 ET"}:{closed:!1,isWeekend:!1}})(),[Qe,Ft]=B.useState(!0),[J,st]=B.useState(null);B.useEffect(()=>{let M=!0;const N=async()=>{try{const ce=await fetch(on);if(ce.ok&&M){const Y=await ce.json();w({sessionHigh:Y.session_high||0,sessionLow:Y.session_low||0,sessionOpen:Y.session_open||0,currentPrice:Y.current_price||0,sessionId:Y.current_session_id,current_session_name:Y.current_session_name||"",vwap:Y.vwap||0,dayOpen:Y.day_open||0,dayHigh:Y.day_high||0,dayLow:Y.day_low||0,totalVolume:Y.total_volume||0,sessionVolume:Y.session_volume||Y.total_volume||0,sessionDelta:Y.session_delta||Y.cumulative_delta||0,cumulativeDelta:Y.cumulative_delta||0,endedSessions:Y.ended_sessions||{},ibs:Y.ibs||{},currentIB:Y.current_ib||null,ibHigh:Y.ib_high||0,ibLow:Y.ib_low||0,overnightHigh:Y.overnight_high||Y.globex_high||0,overnightLow:Y.overnight_low||Y.globex_low||0,tpo_poc:Y.tpo_poc||0,tpo_vah:Y.tpo_vah||0,tpo_val:Y.tpo_val||0,us_ib_vwap:Y.us_ib_vwap||0,ny_1h_vwap:Y.ny_1h_vwap||0,day_vwap:Y.day_vwap||0})}}catch(ce){console.error("Live data fetch error:",ce)}};N();const q=setInterval(N,2e3);return()=>{M=!1,clearInterval(q)}},[]),B.useEffect(()=>{let M=!0,N=null;const q=async()=>{if(M){Ft(!0),st(null);try{const ce=await fetch(`${on}/session-history`);if(!ce.ok)throw new Error(`HTTP ${ce.status}: ${ce.statusText}`);const Y=await ce.json();if(Y.loading){N=setTimeout(()=>{M&&q()},2e3);return}const ve={japan_ib:"japan_ib",china:"china",london:"london",us_ib:"us_ib",ny_1h:"ny_1h"},Tt={};fe.forEach(ut=>{const Ct=Y[ut.id];if(Ct)Tt[ut.id]={todayRange:Ct.todayRange||0,pDR:Ct.pDR||0,avgRange:Ct.avgRange||0,cW:Ct.cW||0,pW:Ct.pW||0,CM:Ct.CM||0,PM:Ct.PM||0,max:Ct.max||0,min:Ct.min||0};else{let _t=ut.id.split("").reduce((en,bn)=>en+bn.charCodeAt(0),0);const mn=()=>(_t=(_t*9301+49297)%233280,_t/233280),Qt=ut.horizon?5+mn()*10:3+mn()*5,Zt=Array.from({length:40},()=>Qt*(.8+mn()*.4)),qt=en=>en.length>0?en.reduce((bn,Cn)=>bn+Cn,0)/en.length:0,rn=Zt.slice(1,11);Tt[ut.id]={todayRange:Zt[0]||0,pDR:Zt[1]||0,avgRange:qt(rn),cW:qt(Zt.slice(0,5)),pW:qt(Zt.slice(5,10))||0,CM:qt(Zt.slice(0,20)),PM:qt(Zt.slice(20,40))||0,max:rn.length>0?Math.max(...rn):0,min:rn.length>0?Math.min(...rn):0}}}),r(Tt)}catch(ce){console.error("Failed to fetch session history:",ce),st(ce.message)}finally{Ft(!1)}}};return q(),()=>{M=!1,N&&clearTimeout(N)}},[]);const lt=M=>`horizon_sessions_${t}_${M}`,et=M=>{try{const N=localStorage.getItem(lt(M));if(N){const{data:q,timestamp:ce}=JSON.parse(N),Y=M==="current"?3e5:36e5;if(Date.now()-ce<Y)return q}}catch{}return null},ie=(M,N)=>{try{localStorage.setItem(lt(M),JSON.stringify({data:N,timestamp:Date.now()}))}catch{}},g={ES:[5500,6500],GC:[2500,3100],BTC:[75e3,13e4]},j=(M,N)=>{if(!M||!M.length)return!1;const q=(N==null?void 0:N.substring(0,2))||"",ce=g[q];if(!ce)return!0;for(const Y of M)if(Y.sessions)for(const ve of Object.keys(Y.sessions)){const Tt=Y.sessions[ve];if((Tt==null?void 0:Tt.h)>0)return Tt.h>=ce[0]&&Tt.h<=ce[1]?!0:(console.warn(`Data validation failed: price ${Tt.h} not in expected range ${ce[0]}-${ce[1]} for ${N}`),!1)}return!0},V=async()=>{try{["current","w1","w2","w3","w4","w5"].forEach(q=>localStorage.removeItem(lt(q))),d(null);const N=await fetch(`${on}/historical-sessions?week=${Z}&stock=${t}&nocache=${Date.now()}`);if(N.ok){const q=await N.json();q.days&&!q.loading&&(j(q.days,t)?(d(q.days),ie(Z,q.days)):(console.error("Received data for wrong contract, not caching"),d(q.days)))}}catch(M){console.error("Failed to refresh:",M)}};return B.useEffect(()=>{const M=async()=>{const q=et(Z);q&&j(q,t)?d(q):q&&localStorage.removeItem(lt(Z));try{const ce=await fetch(`${on}/historical-sessions?week=${Z}&stock=${t}`);if(ce.ok){const Y=await ce.json();Y.days&&!Y.loading&&(j(Y.days,t)?(d(Y.days),ie(Z,Y.days)):(d(Y.days),console.error(`Backend returned wrong data for ${t}. Backend needs to clear its cache.`)))}}catch(ce){console.error("Failed to fetch historical sessions:",ce)}};M();const N=setInterval(M,Z==="current"?3e5:36e5);return()=>clearInterval(N)},[Z,t]),B.useEffect(()=>{(async()=>{const N=`horizon_strategy_${t}_12m`;try{const q=localStorage.getItem(N);if(q){const{data:ce,timestamp:Y}=JSON.parse(q);if(Date.now()-Y<864e5&&j(ce,t)){_e(ce);return}}}catch{}He(!0);try{const q=await fetch(`${on}/historical-sessions?months=12&stock=${t}`);if(q.ok){const ce=await q.json();ce.days&&!ce.loading&&(j(ce.days,t)?(_e(ce.days),localStorage.setItem(N,JSON.stringify({data:ce.days,timestamp:Date.now()}))):_e(ce.days))}}catch(q){console.error("Failed to fetch strategy data:",q)}He(!1)})()},[t]),Qe?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading session history from Databento..."]}):J?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,color:"#ff4466"},children:""}),e.jsx("div",{style:{color:"#ff4466",marginBottom:8},children:"Failed to load session data"}),e.jsx("div",{style:{color:"#666",fontSize:12},children:J})]}):i?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:F?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:F?"column":"row",justifyContent:"space-between",alignItems:F?"flex-start":"center",marginBottom:F?16:24,gap:F?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:F?16:20},children:F?"Session Analysis":" Session Analysis"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:F?11:13},children:"Historical Session Range Analysis  Range = High - Low"})]}),e.jsx("div",{style:{display:"flex",gap:F?8:12,alignItems:"center",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>o("horizon"),style:{padding:F?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="horizon"?"#8B5CF6":"rgba(255,255,255,0.1)",color:n==="horizon"?"#fff":"#888",fontSize:F?10:11,fontWeight:600,cursor:"pointer"},children:"Horizon"}),e.jsx("button",{onClick:()=>o("universe"),style:{padding:F?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="universe"?"#3B82F6":"rgba(255,255,255,0.1)",color:n==="universe"?"#fff":"#888",fontSize:F?10:11,fontWeight:600,cursor:"pointer"},children:"Universe"})]})})]}),Me.closed&&e.jsxs("div",{style:{background:Me.isWeekend?"linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)":"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:Me.isWeekend?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,padding:"16px 24px",marginBottom:20,display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:Me.isWeekend?"":""}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:Me.isWeekend?"#A78BFA":"#00ff88",fontSize:14,fontWeight:700,letterSpacing:1,textTransform:"uppercase"},children:Me.isWeekend?"Weekend":"Market Closed"}),e.jsx("div",{style:{color:"#888",fontSize:12,marginTop:4},children:Me.isWeekend?`Market Reopens ${Me.reopenDay} ${Me.reopenTime}`:`Reopens ${Me.reopenTime}`})]})]}),(()=>{var ao,Mo,ni,Xo,Ko,Zn,Rn,gi,xi,yi,mi,bi,vi;let M=0,N=1/0,q=null,ce=null,Y=null,ve=null;const Tt=new Set(we.map(ee=>ee.id));a&&a.length>0&&a.forEach(ee=>{Object.entries(ee.sessions||{}).forEach(([nt,k])=>{Tt.has(nt)&&k&&k.h>0&&(k.h>M&&(M=k.h,q=ee.date,ce=nt),k.l>0&&k.l<N&&(N=k.l,Y=ee.date,ve=nt))})});const ut=(()=>{const ee=new Date;return`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}-${String(ee.getDate()).padStart(2,"0")}`})(),Ct=Me.closed&&a&&a.length>0,_t=Ct?a[0]:null,mn=_t?Object.fromEntries(Object.entries(_t.sessions||{}).map(([ee,nt])=>[ee,{open:nt.o,high:nt.h,low:nt.l,close:nt.c,volume:nt.v||0,delta:nt.d||0}])):{},Qt=Ct?mn:(p==null?void 0:p.endedSessions)||{},Zt=Ct?((ao=_t==null?void 0:_t.day)==null?void 0:ao.c)||0:(p==null?void 0:p.currentPrice)||0,qt=Ct?((Mo=_t==null?void 0:_t.day)==null?void 0:Mo.o)||0:(p==null?void 0:p.dayOpen)||0,rn=Ct?((ni=_t==null?void 0:_t.day)==null?void 0:ni.h)||0:(p==null?void 0:p.dayHigh)||0,en=Ct?((Xo=_t==null?void 0:_t.day)==null?void 0:Xo.l)||0:(p==null?void 0:p.dayLow)||0,bn=Ct?((Ko=_t==null?void 0:_t.day)==null?void 0:Ko.v)||0:(p==null?void 0:p.totalVolume)||0,Cn=Ct?((Zn=_t==null?void 0:_t.day)==null?void 0:Zn.d)||0:(p==null?void 0:p.cumulativeDelta)||0,$n=Ct?(_t==null?void 0:_t.label)||"Friday":(()=>{const ee=new Date,nt=String(ee.getMonth()+1).padStart(2,"0"),k=String(ee.getDate()).padStart(2,"0");return`${nt}-${k} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][ee.getDay()]}`})(),Vt=we.map(ee=>{const nt=at(ee.id),k=Qt[ee.id]||{},E=nt==="NOW",pe=i[ee.id]||{},ae=E?(p==null?void 0:p.sessionOpen)||0:k.open||0,xe=E?(p==null?void 0:p.sessionHigh)||0:k.high||0,Ze=E?(p==null?void 0:p.sessionLow)||0:k.low||0,P=E?Zt:k.close||0,se=E?(p==null?void 0:p.sessionVolume)||0:k.volume||0,Se=E?(p==null?void 0:p.sessionDelta)||0:k.delta||0,Ce=xe>0&&Ze>0?xe-Ze:0,De=se>0?Se/se*100:0;return{...ee,status:nt,open:ae,high:xe,low:Ze,close:P,volume:se,delta:Se,deltaPct:De,range:Ce,hasData:xe>0||E,pdr:pe.pDR||0,avg10d:pe.avgRange||0,cW:pe.cW||0,pW:pe.pW||0,cM:pe.CM||0,pM:pe.PM||0,max:pe.max||0,min:pe.min||0,todayRange:pe.todayRange||0}});Z==="current"&&Vt.forEach(ee=>{ee.high>0&&(ee.high>M&&(M=ee.high,q=ut,ce=ee.id),ee.low>0&&ee.low<N&&(N=ee.low,Y=ut,ve=ee.id))});const un=ee=>{const nt=Object.values(i||{}).map(k=>k[ee]||0).filter(k=>k>0);return nt.length>0?nt.reduce((k,E)=>k+E,0)/nt.length:0},so=Zt>0?Zt:((Rn=Qt.ny_close)==null?void 0:Rn.close)||((gi=Qt.ny_pm)==null?void 0:gi.close)||rn,Pn={id:"1d",name:"1D",color:"#FFFFFF",open:qt,high:rn,low:en,close:so,volume:bn,delta:Cn,deltaPct:bn>0?Cn/bn*100:0,range:rn>0&&en>0?rn-en:0,hasData:qt>0,pdr:un("pDR"),avg10d:un("avgRange"),cW:un("cW"),pW:un("pW"),cM:un("CM"),pM:un("PM"),max:un("max"),min:un("min")},Bn=[Pn.low,...Vt.filter(ee=>ee.hasData).map(ee=>ee.low)].filter(ee=>ee>0),Tn=[Pn.high,...Vt.filter(ee=>ee.hasData).map(ee=>ee.high)].filter(ee=>ee>0),Fn=Bn.length>0?Math.min(...Bn):0,In=Tn.length>0?Math.max(...Tn):0,Jn=In-Fn||1,En=Fn-Jn*.08,Qn=In+Jn*.08,_o=Qn-En,To=180,Wo=[Pn,...Vt],Yo=138,lo=(ee,nt,k=!1,E=null,pe=null,ae=null)=>{let xe=En,Ze=Qn,P=_o;const se=k?To:Yo;if(!k&&ee){const ge=ee.day,Ue=Object.values(ee.sessions||{}).filter(_=>_&&_.h>0),Te=Ue.map(_=>_.h),$=Ue.map(_=>_.l);if((ge==null?void 0:ge.h)>0&&(Te.push(ge.h),$.push(ge.l)),Te.length>0){const _=Math.max(...Te),O=Math.min(...$),x=_-O||1;xe=O-x*.08,Ze=_+x*.08,P=Ze-xe}}const Se=k?Wo:(()=>{if(!ee)return[];const ge=ee.day||{},Ue={id:"1d",name:"1D",color:"#FFFFFF",open:ge.o||0,high:ge.h||0,low:ge.l||0,close:ge.c||0,hasData:ge.h>0},Te=we.map($=>{var O;const _=((O=ee.sessions)==null?void 0:O[$.id])||{};return{...$,open:_.o||0,high:_.h||0,low:_.l||0,close:_.c||0,hasData:_.h>0}});return[Ue,...Te]})(),Ce=Se.slice(1).filter(ge=>ge.hasData&&ge.high>0);let De=null,le=null;if(Ce.length>0){const ge=Math.max(...Ce.map(_=>_.high)),Ue=Math.min(...Ce.map(_=>_.low)),Te=Ce.find(_=>_.high===ge),$=Ce.find(_=>_.low===Ue);Te&&(De=Te.id),$&&(le=$.id)}return e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"8px 12px",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",background:k?"rgba(0,255,136,0.02)":"rgba(255,255,255,0.02)",overflow:"hidden"},children:[e.jsx("div",{style:{width:70,minWidth:70,padding:"8px 12px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRight:"1px solid rgba(255,255,255,0.05)",background:k&&Me.closed?"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)":k?"rgba(0, 255, 136, 0.05)":"transparent"},children:k&&Me.closed?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:16,marginBottom:4},children:""}),e.jsx("div",{style:{color:"#A78BFA",fontSize:11,fontWeight:700,letterSpacing:.5},children:nt}),e.jsx("div",{style:{color:"#666",fontSize:9,marginTop:2},children:"(Closed)"})]}):k?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#00ff88",fontSize:12,fontWeight:600,lineHeight:1.2},children:nt.split(" ")[0]}),e.jsxs("div",{style:{color:"#00ff88",fontSize:10,fontWeight:500,marginTop:2,display:"flex",alignItems:"center",gap:4},children:[nt.split(" ")[1]||"",e.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 6px rgba(0, 255, 136, 0.6)"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#A78BFA",fontSize:12,fontWeight:600,lineHeight:1.2},children:nt.split(" ")[0]}),e.jsx("div",{style:{color:"#8B7FC7",fontSize:10,fontWeight:500,marginTop:2},children:nt.split(" ")[1]||""})]})}),e.jsx("div",{style:{flex:1,display:"flex",height:se,position:"relative"},children:Se.map((ge,Ue)=>{const Te=Ue===0,$=`${nt}-${ge.id||ge.name}`,_=!Te&&ge.id===De,O=!Te&&ge.id===le,x=!Te&&pe&&pe.dayDate===E&&pe.sessionId===ge.id,D=!Te&&ae&&ae.dayDate===E&&ae.sessionId===ge.id,X=Te?"rgba(255,255,255,0.02)":`${ge.color}06`;return e.jsxs("div",{style:{flex:Te?"0 0 8%":1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:_||x?14:0,paddingBottom:O||D?14:0,background:X,borderLeft:Ue>0?"1px solid rgba(255,255,255,0.02)":"none"},onMouseEnter:U=>{if(ge.hasData&&ge.high>0){u({...ge,label:`${nt} - ${ge.name||"1D"}`,isHOD:_,isLOD:O,isHOW:x,isLOW:D});const je=U.currentTarget.getBoundingClientRect();L({x:je.left+je.width/2,y:je.top})}},onMouseLeave:()=>u(null),children:[_&&!x&&e.jsx("div",{style:{position:"absolute",top:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #10B981"}}),O&&!D&&e.jsx("div",{style:{position:"absolute",bottom:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #EF4444"}}),x&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 4px #00ff88)"}}),D&&e.jsx("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 4px #ff4466)"}}),ge.hasData&&ge.high>0&&(()=>{const U=ge.close>=ge.open,je=U?"#00ff88":"#ff4466",Ae=U?"#00ff88":"#ff4466",Ve=1.5,pt=7,ye=2,me=1,Be=se-(ge.high-xe)/P*se,qe=se-(ge.low-xe)/P*se,St=se-(ge.open-xe)/P*se,We=se-(ge.close-xe)/P*se;return e.jsxs("svg",{width:"100%",height:se,viewBox:`0 0 40 ${se}`,preserveAspectRatio:"xMidYMid meet",style:{overflow:"visible",cursor:"pointer"},children:[e.jsx("line",{x1:"20",y1:Math.max(2,Be),x2:"20",y2:Math.min(se-2,qe),stroke:x?"#00ff88":D?"#ff4466":je,strokeWidth:Ve,strokeLinecap:"butt",style:{filter:`drop-shadow(0 0 2px ${je}60)`}}),e.jsx("rect",{x:20-me-pt,y:Math.max(0,Math.min(se-ye,St-ye/2)),width:pt,height:ye,fill:"#FFFFFF",style:{opacity:.9}}),e.jsx("rect",{x:20+me,y:Math.max(0,Math.min(se-ye,We-ye/2)),width:pt,height:ye,fill:Ae,style:{filter:`drop-shadow(0 0 2px ${Ae}60)`}})]})})()]},$)})})]})};return e.jsxs("div",{className:"hide-scrollbar",style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 8px 32px rgba(0,0,0,0.6)",position:"relative",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden"},children:[e.jsx("div",{style:{position:"sticky",top:0,zIndex:20,background:"linear-gradient(180deg, rgba(12,12,16,1) 0%, rgba(12,12,16,0.98) 100%)",padding:"12px 12px 8px 12px",borderBottom:"1px solid rgba(255,255,255,0.06)",borderTopLeftRadius:16,borderTopRightRadius:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"0 12px",borderRadius:12},children:[e.jsx("div",{style:{width:70,minWidth:70}}),e.jsx("div",{style:{flex:1,display:"flex",position:"relative"},children:Wo.map((ee,nt)=>{var se,Se;const k=nt===0,E=ee.status==="NOW",pe=ee.status==="WAITING",ae=k?"#FFFFFF":ee.color||"#FFFFFF",xe=C===(ee.id||nt),Ze=(se=ee.name)!=null&&se.includes(" ")?ee.name.split(" "):[ee.name],P=Ze.length>1;return e.jsx("div",{onMouseEnter:()=>c(ee.id||nt),onMouseLeave:()=>c(null),style:{flex:k?"0 0 8%":1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",position:"relative",cursor:"pointer",paddingBottom:8},children:e.jsxs("div",{style:{width:73,height:73,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,padding:10,background:E&&!Me.closed?`linear-gradient(135deg, ${ae}30 0%, ${ae}15 100%)`:xe?`linear-gradient(135deg, ${ae}20 0%, ${ae}10 100%)`:"rgba(20, 20, 28, 0.9)",border:E&&!Me.closed?`2px solid ${ae}`:xe?`2px solid ${ae}60`:"1px solid rgba(255,255,255,0.1)",opacity:pe?.4:Me.closed&&!k?.6:1,transition:"all 0.2s ease",boxShadow:E&&!Me.closed?`0 0 12px ${ae}50`:xe?`0 0 10px ${ae}30`:"0 2px 8px rgba(0,0,0,0.3)",position:"relative"},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:k?"#888":Me.closed?"#555":ae,boxShadow:E&&!Me.closed||xe?`0 0 6px ${ae}`:"none",animation:E&&!Me.closed?"sessionDotPulse 1.5s ease-in-out infinite":"none"}}),P?e.jsxs("div",{style:{textAlign:"center",lineHeight:1.1},children:[e.jsx("div",{style:{fontSize:11,color:E&&!Me.closed||xe?ae:Me.closed&&!k?"#666":"#e5e5e5",fontWeight:600},children:Ze[0]}),e.jsx("div",{style:{fontSize:10,color:E&&!Me.closed||xe?ae:Me.closed&&!k?"#555":"#bbb",fontWeight:500},children:Ze.slice(1).join(" ")})]}):e.jsx("span",{style:{fontSize:((Se=ee.name)==null?void 0:Se.length)>6?10:12,color:k?xe?"#ccc":"#999":E&&!Me.closed||xe?ae:Me.closed?"#666":"#e5e5e5",fontWeight:600,textAlign:"center",lineHeight:1.1},children:ee.name}),E&&!Me.closed&&e.jsx("div",{style:{position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 6px",borderRadius:8,letterSpacing:"0.05em",boxShadow:"0 2px 6px rgba(0,255,136,0.4)"},children:"LIVE"}),xe&&!k&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:12,background:"linear-gradient(135deg, rgba(12, 12, 18, 0.98) 0%, rgba(18, 18, 28, 0.98) 100%)",border:`1px solid ${ae}30`,borderRadius:12,padding:"14px 18px",minWidth:200,zIndex:100,boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.05) inset",pointerEvents:"none"},children:[e.jsx("div",{style:{position:"absolute",top:-6,left:"50%",width:10,height:10,background:"rgba(12, 12, 18, 0.98)",border:`1px solid ${ae}30`,borderRight:"none",borderBottom:"none",transform:"translateX(-50%) rotate(45deg)"}}),e.jsxs("div",{style:{textAlign:"center",marginBottom:10,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:ae,boxShadow:`0 0 8px ${ae}`}}),e.jsx("span",{style:{color:ae,fontWeight:700,fontSize:14,letterSpacing:.5},children:ee.name}),E&&!Me.closed&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 5px",borderRadius:4},children:"LIVE"})]}),ee.start&&ee.end&&e.jsxs("div",{style:{fontSize:10,color:"#666",fontFamily:"'JetBrains Mono', monospace",marginTop:4},children:[ee.start," - ",ee.end," ET"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px 16px",fontSize:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#8B5CF6"},children:"VOL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.volume?ee.volume>=1e3?(ee.volume/1e3).toFixed(1)+"K":ee.volume:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:ee.delta>=0?"#00ff88":"#ff4466"},children:"DELTA"}),e.jsx("span",{style:{color:ee.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:ee.delta?Math.abs(ee.delta)>=1e3?(ee.delta/1e3).toFixed(1)+"K":ee.delta:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#6366F1"},children:"pDR"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.pdr>0?ee.pdr.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#06B6D4"},children:"10D"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.avg10d>0?ee.avg10d.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#84CC16"},children:"cW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.cW>0?ee.cW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#22C55E"},children:"pW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.pW>0?ee.pW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#F97316"},children:"cM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.cM>0?ee.cM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#FB923C"},children:"pM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.pM>0?ee.pM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#10B981"},children:"MAX"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.max>0?ee.max.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#EF4444"},children:"MIN"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ee.min>0?ee.min.toFixed(1):""})]})]}),e.jsx("div",{style:{marginTop:10,paddingTop:8,borderTop:"1px solid rgba(255,255,255,0.06)",fontSize:9,color:E&&!Me.closed?"#00ff88":pe?"#555":"#666",textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center"},children:E&&!Me.closed?" Active Session":pe?" Upcoming":" Ended"})]})]})},ee.id||nt)})})]})}),lo(null,$n,!0,ut,{dayDate:q,sessionId:ce},{dayDate:Y,sessionId:ve}),e.jsxs("div",{style:{padding:"8px 12px",borderTop:"1px solid rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:12,background:"rgba(15, 15, 20, 0.5)"},children:[e.jsx("div",{style:{display:"flex",gap:4},children:Xe.map(ee=>e.jsx("button",{onClick:()=>Ge(ee.id),style:{padding:"6px 10px",background:Z===ee.id?"rgba(59, 130, 246, 0.2)":"rgba(255,255,255,0.03)",border:Z===ee.id?"1px solid rgba(59, 130, 246, 0.4)":"1px solid rgba(255,255,255,0.08)",borderRadius:4,color:Z===ee.id?"#60A5FA":"#666",fontSize:10,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease",letterSpacing:"0.5px"},children:ee.label},ee.id))}),e.jsx("button",{onClick:V,title:`Clear cached data for ${((xi=Xe.find(ee=>ee.id===Z))==null?void 0:xi.label)||Z} and refresh from server`,style:{padding:"6px 8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:4,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer",transition:"all 0.15s ease",display:"flex",alignItems:"center",gap:4},children:" Refresh"})]}),e.jsx("div",{children:a&&a.length>0?(()=>{const ee=new Date,nt=`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}-${String(ee.getDate()).padStart(2,"0")}`;return(Z==="current"?a.filter(E=>E.date!==nt):a).map((E,pe)=>{let ae=E.label||`Day ${pe+1}`;if(E.date){const P=E.date.split("-"),se=new Date(E.date+"T12:00:00"),Se=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ce=`${P[1]}-${P[2]}`,De=Se[se.getDay()];ae=`${Ce} ${De}`}const xe={dayDate:q,sessionId:ce},Ze={dayDate:Y,sessionId:ve};return lo(E,ae,!1,E.date,xe,Ze)})})():e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading historical data..."})}),e.jsxs("div",{style:{padding:"10px 16px",margin:"0 12px",background:"rgba(0,0,0,0.3)",borderRadius:8,display:"flex",gap:16,justifyContent:"center",alignItems:"center",flexWrap:"wrap",fontSize:11,color:"#555"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#10B981",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#10B981"},children:"High of Day"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#EF4444"},children:"Low of Day"})]}),e.jsx("span",{style:{borderLeft:"1px solid #333",height:16,margin:"0 4px"}}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 3px #00ff88)"}}),e.jsx("span",{style:{color:"#00ff88"},children:"High of Week"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 3px #ff4466)"}}),e.jsx("span",{style:{color:"#ff4466"},children:"Low of Week"})]})]}),e.jsxs("div",{style:{margin:"12px",background:"rgba(20, 20, 30, 0.8)",borderRadius:12,border:"1px solid rgba(139, 92, 246, 0.3)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>R(!S),style:{padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:S?"rgba(139, 92, 246, 0.15)":"transparent",borderBottom:S?"1px solid rgba(139, 92, 246, 0.2)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{color:"#A78BFA",fontWeight:600,fontSize:13},children:"Session Trade Calculator"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:" Entry  Target Analysis"})]}),e.jsx("span",{style:{color:"#8B5CF6",fontSize:12,transform:S?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),S&&e.jsxs("div",{style:{padding:16},children:[e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:16},children:[e.jsxs("div",{style:{flex:"1 1 180px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"ENTRY SESSION"}),e.jsx("select",{value:I,onChange:ee=>de(ee.target.value),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,cursor:"pointer",outline:"none"},children:we.map(ee=>e.jsx("option",{value:ee.id,style:{background:"#1a1a2e"},children:ee.name},ee.id))})]}),e.jsxs("div",{style:{flex:"1 1 120px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"TARGET POINTS"}),e.jsx("input",{type:"number",value:G,onChange:ee=>v(Math.max(0,parseFloat(ee.target.value)||0)),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,outline:"none",textAlign:"center"},min:"0",step:"0.5"})]}),e.jsxs("div",{style:{flex:"1 1 160px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"DIRECTION"}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>T("long"),style:{flex:1,padding:"10px 16px",background:h==="long"?"rgba(0, 255, 136, 0.2)":"rgba(0,0,0,0.3)",border:h==="long"?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px 0 0 8px",color:h==="long"?"#00ff88":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" LONG"}),e.jsx("button",{onClick:()=>T("short"),style:{flex:1,padding:"10px 16px",background:h==="short"?"rgba(255, 68, 102, 0.2)":"rgba(0,0,0,0.3)",border:h==="short"?"1px solid #ff4466":"1px solid rgba(255,255,255,0.1)",borderRadius:"0 8px 8px 0",color:h==="short"?"#ff4466":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" SHORT"})]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:8,letterSpacing:"0.5px"},children:["FILTER SESSIONS ",e.jsx("span",{style:{color:"#666"},children:" Click to exclude from analysis"})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[we.map(ee=>{const nt=Le.has(ee.id),k=ee.id===I;return e.jsxs("button",{onClick:()=>{if(k)return;const E=new Set(Le);nt?E.delete(ee.id):E.add(ee.id),z(E)},style:{padding:"6px 12px",background:k?"rgba(139, 92, 246, 0.3)":nt?"rgba(255,255,255,0.02)":`${ee.color}22`,border:k?"1px solid #8B5CF6":nt?"1px solid rgba(255,255,255,0.1)":`1px solid ${ee.color}66`,borderRadius:6,color:k?"#A78BFA":nt?"#444":ee.color,fontSize:10,fontWeight:500,cursor:k?"not-allowed":"pointer",transition:"all 0.15s ease",textDecoration:nt?"line-through":"none",opacity:nt?.5:1},title:k?"Entry session (cannot exclude)":nt?"Click to include":"Click to exclude",children:[k&&" ",ee.name]},ee.id)}),Le.size>0&&e.jsx("button",{onClick:()=>z(new Set),style:{padding:"6px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:6,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer"},children:"Reset All"})]})]}),a&&a.length>0&&(()=>{var se,Se,Ce,De;const ee=we.findIndex(le=>le.id===I),nt=we.slice(ee+1).filter(le=>!Le.has(le.id)),k=a.map(le=>{var X;const ge=(X=le.sessions)==null?void 0:X[I];if(!ge||!ge.o||ge.o<=0)return null;const Ue=ge.o,Te=h==="long"?Ue+G:Ue-G;let $=0,_=h==="long"?1/0:0,O=-1;const x=nt.map((U,je)=>{var ye;const Ae=(ye=le.sessions)==null?void 0:ye[U.id];if(!Ae||!Ae.h||Ae.h<=0)return{session:U,hit:!1,noData:!0,drawdownAtSession:0};const Ve=h==="long"?Ae.h>=Te:Ae.l<=Te;if(O===-1)if(h==="long"){_=Math.min(_,Ae.l);const me=Ue-_;$=Math.max($,me)}else{_=Math.max(_,Ae.h);const me=_-Ue;$=Math.max($,me)}Ve&&O===-1&&(O=je);const pt=h==="long"?Ae.h:Ae.l;return{session:U,hit:Ve,hitPrice:pt,high:Ae.h,low:Ae.l,overshoot:Ve?h==="long"?Ae.h-Te:Te-Ae.l:0,drawdownAtSession:h==="long"?Math.max(0,Ue-Ae.l):Math.max(0,Ae.h-Ue)}}),D=x.find(U=>U.hit);return{date:le.date,label:le.label,entryPrice:Ue,targetPrice:Te,sessionResults:x,firstHit:D,hitAny:x.some(U=>U.hit),maxDrawdown:$>0?$:0}}).filter(Boolean),E=k.length>0?(k.filter(le=>le.hitAny).length/k.length*100).toFixed(0):0,pe={};k.forEach(le=>{le.firstHit&&(pe[le.firstHit.session.id]=(pe[le.firstHit.session.id]||0)+1)});const ae=Object.entries(pe).sort((le,ge)=>ge[1]-le[1])[0],xe=k.map(le=>le.maxDrawdown).filter(le=>le>0),Ze=xe.length>0?xe.reduce((le,ge)=>le+ge,0)/xe.length:0,P=xe.length>0?Math.max(...xe):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16,padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"SUCCESS RATE"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:E>=70?"#00ff88":E>=50?"#F59E0B":"#ff4466"},children:[E,"%"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"MOST LIKELY HIT"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#A78BFA"},children:ae&&((se=we.find(le=>le.id===ae[0]))==null?void 0:se.name)||""}),ae&&e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[ae[1]," of ",k.length," days"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"ENTRY SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((Se=we.find(le=>le.id===I))==null?void 0:Se.color)||"#fff"},children:((Ce=we.find(le=>le.id===I))==null?void 0:Ce.name)||I}),e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[" +",G," pts ",h==="long"?"":""]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"AVG DRAWDOWN"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#F59E0B"},children:Ze>0?Ze.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"points"})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"WORST DD"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#EF4444"},children:P>0?P.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"max risk"})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Target"}),nt.map(le=>e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:le.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",minWidth:60},children:le.name.split(" ")[0]},le.id)),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max DD"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Result"})]})}),e.jsx("tbody",{children:k.map((le,ge)=>e.jsxs("tr",{style:{background:ge%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:le.label||le.date}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:le.entryPrice.toFixed(2)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:h==="long"?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:le.targetPrice.toFixed(2)}),le.sessionResults.map(Ue=>{var Te;return e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",background:Ue.hit&&((Te=le.firstHit)==null?void 0:Te.session.id)===Ue.session.id?"rgba(0, 255, 136, 0.1)":"transparent",verticalAlign:"middle"},children:Ue.noData?e.jsx("span",{style:{color:"#444"},children:""}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[Ue.hit?e.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["",Ue.overshoot>0&&e.jsxs("span",{style:{fontSize:9,marginLeft:2},children:["+",Ue.overshoot.toFixed(1)]})]}):e.jsx("span",{style:{color:"#ff4466",opacity:.5},children:""}),Ue.drawdownAtSession>0&&e.jsxs("span",{style:{fontSize:8,color:"#F59E0B",opacity:.8},children:["DD: ",Ue.drawdownAtSession.toFixed(1)]})]})},Ue.session.id)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontFamily:"monospace"},children:e.jsx("span",{style:{color:le.maxDrawdown>G?"#EF4444":le.maxDrawdown>G*.5?"#F59E0B":"#888",fontWeight:le.maxDrawdown>G?700:400},children:le.maxDrawdown>0?le.maxDrawdown.toFixed(1):"0"})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:le.hitAny?e.jsx("span",{style:{color:"#00ff88",fontWeight:600,fontSize:10},children:le.firstHit.session.name}):e.jsx("span",{style:{color:"#ff4466",fontSize:10},children:"NO HIT"})})]},le.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[" Analysis based on ",k.length," trading days  Entry at ",(De=we.find(le=>le.id===I))==null?void 0:De.name," session open price  Target: ",h==="long"?"+":"-",G," points"]})]})})()]})]}),a&&a.length>0&&(()=>{const ee=fe.filter($=>$.horizon);let nt=1/0,k=0;a.forEach($=>{ee.forEach(_=>{var x;const O=(x=$.sessions)==null?void 0:x[_.id];(O==null?void 0:O.h)>0&&(k=Math.max(k,O.h)),(O==null?void 0:O.l)>0&&(O==null?void 0:O.l)<1/0&&(nt=Math.min(nt,O.l))})});const E={min:nt===1/0?0:nt,max:k},pe={ES:[5500,7e3],GC:[4500,6e3],NQ:[18e3,25e3],CL:[60,120],BTC:[8e4,15e4],BT:[8e4,15e4]},ae=(t==null?void 0:t.substring(0,2))||"",xe=pe[ae],Ze=xe&&(E.max<xe[0]||E.min>xe[1]),P=ee.map($=>{const _=a.map(X=>{var je;const U=(je=X.sessions)==null?void 0:je[$.id];return!U||!U.o||!U.c||U.o<=0?null:U.c>=U.o?"bullish":"bearish"}).filter(Boolean),O=_.filter(X=>X==="bullish").length,x=_.filter(X=>X==="bearish").length,D=_.length;return{session:$,trends:a.map(X=>{var je;const U=(je=X.sessions)==null?void 0:je[$.id];return!U||!U.o||!U.c||U.o<=0?null:U.c>=U.o?"bullish":"bearish"}),bullishPct:D>0?Math.round(O/D*100):0,bullishCount:O,bearishCount:x,total:D}}),se=ee.map($=>{const _=a.map(X=>{var je;const U=(je=X.sessions)==null?void 0:je[$.id];return!U||!U.h||!U.l||U.h<=0?null:U.h-U.l}).filter(X=>X!==null&&X>0),O=_.length>0?_.reduce((X,U)=>X+U,0)/_.length:0,x=_.length>0?Math.min(..._):0,D=_.length>0?Math.max(..._):0;return{session:$,avgRange:O,minRange:x,maxRange:D,rangeCount:_.length}}),Se=a.map($=>{let _=0,O=1/0;return ee.forEach(x=>{var X;const D=(X=$.sessions)==null?void 0:X[x.id];D&&D.h>0&&D.l>0&&(_=Math.max(_,D.h),O=Math.min(O,D.l))}),O<1/0?_-O:0}).filter($=>$>0),Ce=Se.length>0?Se.reduce(($,_)=>$+_,0)/Se.length:0,le=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],ge=ee.slice(0,-1).map($=>{const _=le.map(O=>{let x=0,D=0,X=0,U=0;return a.forEach(je=>{var qe;const Ae=(qe=je.sessions)==null?void 0:qe[$.id];if(!Ae||!Ae.o||Ae.o<=0)return;const Ve=Ae.o,pt=Ve+O;let ye=!1,me=0;const Be=ee.findIndex(St=>St.id===$.id);ee.slice(Be+1).forEach(St=>{var dt;const We=(dt=je.sessions)==null?void 0:dt[St.id];!We||!We.h||We.h<=0||ye||(me=Math.max(me,Ve-We.l),We.h>=pt&&(ye=!0))}),ye&&x++,D+=me,X=Math.max(X,me),U++}),{target:O,winRate:U>0?Math.round(x/U*100):0,avgDD:U>0?D/U:0,maxDD:X,validDays:U,riskReward:U>0&&D>0?(O/(D/U)).toFixed(1):""}});return{session:$,results:_}}),Ue=le[1];ge.reduce(($,_)=>{var D;const O=_.results.find(X=>X.target===Ue),x=(D=$==null?void 0:$.results)==null?void 0:D.find(X=>X.target===Ue);return!x||O.winRate>x.winRate||O.winRate===x.winRate&&O.avgDD<x.avgDD?_:$},null),a.forEach($=>{var x,D;const _=(x=$.sessions)==null?void 0:x.japan_ib,O=(D=$.sessions)==null?void 0:D.china;(_==null?void 0:_.h)>0&&(_==null?void 0:_.l)>0&&(O==null?void 0:O.h)>0&&(O==null?void 0:O.l)>0&&(O.h>_.h||O.l<_.l)}),a.forEach($=>{var x,D;const _=(x=$.sessions)==null?void 0:x.china,O=(D=$.sessions)==null?void 0:D.london;(_==null?void 0:_.h)>0&&(_==null?void 0:_.l)>0&&(O==null?void 0:O.h)>0&&(O==null?void 0:O.l)>0&&(O.h>_.h||O.l<_.l)}),a.forEach($=>{var x,D;const _=(x=$.sessions)==null?void 0:x.london,O=(D=$.sessions)==null?void 0:D.ny_1h;(_==null?void 0:_.o)>0&&(_==null?void 0:_.c)>0&&(O==null?void 0:O.o)>0&&(O==null?void 0:O.c)>0&&(_.c>_.o,O.c>O.o)}),a.forEach($=>{var x,D;const _=(x=$.sessions)==null?void 0:x.us_ib,O=(D=$.sessions)==null?void 0:D.ny_pm;(_==null?void 0:_.o)>0&&(_==null?void 0:_.c)>0&&(O==null?void 0:O.o)>0&&(O==null?void 0:O.c)>0&&(_.c>_.o,O.c>O.o)});const Te={};return ee.forEach($=>Te[$.id]={hod:0,lod:0}),a.forEach($=>{let _=0,O=1/0,x=null,D=null;ee.forEach(X=>{var je;const U=(je=$.sessions)==null?void 0:je[X.id];U&&U.h>0&&U.l>0&&(U.h>_&&(_=U.h,x=X.id),U.l<O&&(O=U.l,D=X.id))}),x&&Te[x].hod++,D&&Te[D].lod++}),Ze?e.jsx("div",{style:{marginTop:20},children:e.jsxs("div",{style:{padding:"20px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:12},children:""}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#EF4444",marginBottom:8},children:"DATA MISMATCH - Wrong Contract Data"}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginBottom:12},children:["Received prices: ",e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",E.min.toFixed(0)," - $",E.max.toFixed(0)]}),e.jsx("br",{}),"Expected for ",ae,": ",e.jsxs("span",{style:{color:"#10B981",fontFamily:"monospace"},children:["$",xe==null?void 0:xe[0]," - $",xe==null?void 0:xe[1]]})]}),e.jsxs("div",{style:{fontSize:11,color:"#666",marginBottom:16},children:["The backend is returning cached data for a different contract.",e.jsx("br",{}),"This requires clearing the backend cache or redeploying."]}),e.jsx("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:e.jsx("button",{onClick:V,style:{padding:"8px 16px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:6,color:"#EF4444",fontSize:11,fontWeight:600,cursor:"pointer"},children:" Try Refresh Again"})})]})}):e.jsxs("div",{style:{marginTop:20},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",marginBottom:12,background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:8,fontSize:10},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#10B981"},children:" DATA OK"}),e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsx("span",{style:{color:"#888"},children:"Price Range:"}),e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",E.min.toFixed(2)," - $",E.max.toFixed(2)]}),xe&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsxs("span",{style:{color:"#666"},children:["Expected ",ae,":"]}),e.jsxs("span",{style:{color:"#666",fontFamily:"monospace"},children:["$",xe[0]," - $",xe[1]]})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16,overflow:"hidden"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#A78BFA",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION TREND DIRECTION"]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),a.map(($,_)=>{var O;return e.jsx("th",{style:{padding:"6px 4px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:((O=$.label)==null?void 0:O.split(" ")[0])||`Day ${_+1}`},_)}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#00ff88",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Bullish"})]})}),e.jsx("tbody",{children:P.map(($,_)=>e.jsxs("tr",{style:{background:_%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:$.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:$.session.name}),$.trends.map((O,x)=>e.jsx("td",{style:{padding:"4px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:O==="bullish"?e.jsx("span",{style:{color:"#00ff88",fontSize:14},children:""}):O==="bearish"?e.jsx("span",{style:{color:"#ff4466",fontSize:14},children:""}):e.jsx("span",{style:{color:"#333"},children:""})},x)),e.jsxs("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontWeight:700,color:$.bullishPct>=70?"#00ff88":$.bullishPct>=50?"#F59E0B":"#ff4466"},children:[$.bullishPct,"%"]})]},$.session.id))})]})}),(()=>{const $=P.reduce((O,x)=>O.bullishPct>x.bullishPct?O:x),_=P.reduce((O,x)=>O.bullishPct<x.bullishPct?O:x);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:$.session.name})," most bullish (",$.bullishPct,"%) ",e.jsx("span",{style:{color:"#ff4466",fontWeight:600,marginLeft:4},children:_.session.name})," most bearish (",100-_.bullishPct,"%)"]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#EC4899",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"RANGE ANALYSIS",e.jsxs("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:["Avg Daily: ",e.jsxs("span",{style:{color:"#EC4899"},children:[Ce.toFixed(1)," pts"]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Avg"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Min"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"% Daily"})]})}),e.jsx("tbody",{children:se.filter($=>$.avgRange>0).sort(($,_)=>_.avgRange-$.avgRange).map(($,_)=>e.jsxs("tr",{style:{background:_%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:$.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:$.session.name}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:$.avgRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#666",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:$.minRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:$.maxRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{background:`rgba(236, 72, 153, ${Math.min(.8,$.avgRange/Ce*.6)})`,padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,color:"#fff"},children:[Ce>0?Math.round($.avgRange/Ce*100):0,"%"]})})]},$.session.id))})]})}),(()=>{const $=se.reduce((_,O)=>_.avgRange>O.avgRange?_:O);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(236, 72, 153, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:$.session.color,fontWeight:600},children:$.session.name})," has largest avg range (",$.avgRange.toFixed(1)," pts) ",e.jsxs("span",{style:{color:"#EC4899"},children:[" ",Math.round($.avgRange/Ce*100),"%"]})," of daily range"]})})()]})]})]})})(),a&&a.length>0&&(()=>{const ee=["japan_ib","china","asia_close","deadzone","london","low_volume"];fe.filter(E=>E.horizon);const nt=a.map(E=>{if(!E.sessions)return null;let pe=0,ae=1/0,xe=0,Ze=0;ee.forEach(ye=>{const me=E.sessions[ye];if(me&&me.h>0&&me.l>0){pe=Math.max(pe,me.h),ae=Math.min(ae,me.l);const Be=(me.h+me.l+me.c)/3,qe=me.v||1;Ze+=Be*qe,xe+=qe}});const P=E.sessions.us_ib,se=(P==null?void 0:P.o)||0;if(pe===0||ae===1/0||se===0)return null;const Se=pe-ae,Ce=Se>0?((pe-se)/Se*100).toFixed(1):0,De=xe>0?Ze/xe:(pe+ae)/2,le=(se-De).toFixed(1),ge=se>=De;let Ue="NEUTRAL";const Te=parseFloat(Ce);Te<=20?Ue="VERY BULLISH":Te<=40?Ue="BULLISH":Te>=80?Ue="VERY BEARISH":Te>=60&&(Ue="BEARISH");const $=(P==null?void 0:P.h)||0,_=(P==null?void 0:P.l)||0,O=$-_,x=E.sessions.ny_1h,D=(x==null?void 0:x.o)||0,X=O>0&&D>0?(($-D)/O*100).toFixed(1):"";let U="NEUTRAL";const je=parseFloat(X);isNaN(je)||(je<=20?U="VERY BULLISH":je<=40?U="BULLISH":je>=80?U="VERY BEARISH":je>=60&&(U="BEARISH"));const Ae=ye=>ye==="VERY BULLISH"?2:ye==="BULLISH"?1:ye==="BEARISH"?-1:ye==="VERY BEARISH"?-2:0,Ve=(Ae(Ue)+Ae(U))/2;let pt="NEUTRAL";return Ve>=1.5?pt="VERY BULLISH":Ve>=.5?pt="BULLISH":Ve<=-1.5?pt="VERY BEARISH":Ve<=-.5&&(pt="BEARISH"),{date:E.date,label:E.label,overnightHigh:pe,overnightLow:ae,overnightRange:Se,usIbOpen:se,pctFromHigh:Ce,estimatedVwap:De,vwapDistance:Math.abs(parseFloat(le)),aboveVwap:ge,biasA:Ue,ibHigh:$,ibLow:_,ibRange:O,nyOpen:D,pctFromIbHigh:X,biasB:U,combinedBias:pt}}).filter(Boolean);if(nt.length===0)return null;const k=nt[0];return e.jsxs("div",{style:{margin:"12px",background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(59, 130, 246, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:600,color:"#10B981"},children:"DAY BIAS"}),e.jsx("span",{style:{fontSize:10,color:"#666"},children:" Overnight & IB Range Analysis"})]}),k&&e.jsx("div",{style:{padding:"4px 12px",borderRadius:6,background:k.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":k.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",border:`1px solid ${k.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.3)":k.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.3)":"rgba(255,255,255,0.1)"}`,color:k.combinedBias.includes("BULLISH")?"#00ff88":k.combinedBias.includes("BEARISH")?"#ff4466":"#888",fontSize:11,fontWeight:700},children:k.combinedBias})]}),e.jsxs("div",{style:{padding:16},children:[k&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#3B82F6"},children:"A. OVERNIGHT  8:20 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:k.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":k.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:k.biasA.includes("BULLISH")?"#00ff88":k.biasA.includes("BEARISH")?"#ff4466":"#888"},children:k.biasA})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"O/N RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#3B82F6"},children:k.overnightRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",k.overnightHigh.toFixed(0)," L: ",k.overnightLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"8:20 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(k.pctFromHigh)<=50?"#00ff88":"#ff4466"},children:[k.pctFromHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from O/N high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"PRICE vs VWAP"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:k.aboveVwap?"#00ff88":"#ff4466",padding:"4px 8px",borderRadius:4,background:k.aboveVwap?"rgba(0, 255, 136, 0.15)":"rgba(255, 68, 102, 0.15)"},children:k.aboveVwap?"ABOVE":"BELOW"}),e.jsxs("div",{style:{fontSize:8,color:"#555",marginTop:2},children:[k.vwapDistance.toFixed(1)," pts"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#F59E0B"},children:"B. US IB  9:30 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:k.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":k.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:k.biasB.includes("BULLISH")?"#00ff88":k.biasB.includes("BEARISH")?"#ff4466":"#888"},children:k.biasB})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#F59E0B"},children:k.ibRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",k.ibHigh.toFixed(0)," L: ",k.ibLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"9:30 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(k.pctFromIbHigh)<=50?"#00ff88":"#ff4466"},children:[k.pctFromIbHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from IB high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"NY OPEN"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#fff"},children:k.nyOpen>0?k.nyOpen.toFixed(2):""}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"9:30 ET"})]})]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"rgba(0,0,0,0.4)"},children:[e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#3B82F6",fontWeight:600,borderBottom:"1px solid rgba(59,130,246,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(59,130,246,0.08)"},children:"A: Overnight  8:20"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(245,158,11,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(245,158,11,0.08)"},children:"B: US IB  9:30"}),e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"center",color:"#10B981",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Combined"})]}),e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"VWAP"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"9:30"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"})]})]}),e.jsx("tbody",{children:nt.map((E,pe)=>e.jsxs("tr",{style:{background:pe%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 10px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)",fontSize:10},children:E.label||E.date}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(E.pctFromHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(E.pctFromHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(E.pctFromHigh)<=30?"#00ff88":parseFloat(E.pctFromHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[E.pctFromHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{color:E.aboveVwap?"#00ff88":"#ff4466",fontSize:9,fontWeight:500},children:E.aboveVwap?"ABOVE":"BELOW"})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:E.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":E.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:E.biasA.includes("BULLISH")?"#00ff88":E.biasA.includes("BEARISH")?"#ff4466":"#666"},children:E.biasA.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(E.pctFromIbHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(E.pctFromIbHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(E.pctFromIbHigh)<=30?"#00ff88":parseFloat(E.pctFromIbHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[E.pctFromIbHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:9},children:E.nyOpen>0?E.nyOpen.toFixed(0):""}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:E.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":E.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:E.biasB.includes("BULLISH")?"#00ff88":E.biasB.includes("BEARISH")?"#ff4466":"#666"},children:E.biasB.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:E.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":E.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:E.combinedBias.includes("BULLISH")?"#00ff88":E.combinedBias.includes("BEARISH")?"#ff4466":"#888"},children:E.combinedBias.replace("VERY ","V.")})})]},E.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(16, 185, 129, 0.1)",borderRadius:6,fontSize:9,color:"#888"},children:[e.jsx("strong",{style:{color:"#10B981"},children:"Bias Logic:"})," 0-20% from high = Very Bullish  20-40% = Bullish  40-60% = Neutral  60-80% = Bearish  80-100% = Very Bearish"]})]})]})})(),rt&&e.jsxs("div",{style:{marginTop:24,background:"rgba(0,0,0,0.4)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#A78BFA"},children:"STRATEGY ANALYTICS"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Optimal entry points & session patterns"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("span",{style:{fontSize:10,color:"#666"},children:"Using data from selected week above"})})]}),(()=>{var $;const ee=a;if(!ee||ee.length===0)return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No historical data available. Select a week above first."]});const nt=fe.filter(_=>_.horizon),E=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],pe=nt.slice(0,-1).map(_=>{const O=E.map(x=>{let D=0,X=0,U=0,je=0;return ee.forEach(Ae=>{var St;const Ve=(St=Ae.sessions)==null?void 0:St[_.id];if(!Ve||!Ve.o||Ve.o<=0)return;const pt=Ve.o,ye=pt+x;let me=!1,Be=0;const qe=nt.findIndex(We=>We.id===_.id);nt.slice(qe+1).forEach(We=>{var Yt;const dt=(Yt=Ae.sessions)==null?void 0:Yt[We.id];!dt||!dt.h||dt.h<=0||me||(Be=Math.max(Be,pt-dt.l),dt.h>=ye&&(me=!0))}),me&&D++,X+=Be,U=Math.max(U,Be),je++}),{target:x,winRate:je>0?Math.round(D/je*100):0,avgDD:je>0?X/je:0,maxDD:U,validDays:je,riskReward:je>0&&X>0?(x/(X/je)).toFixed(1):""}});return{session:_,results:O}}),ae=E[1],xe=pe.reduce((_,O)=>{var X;const x=O.results.find(U=>U.target===ae),D=(X=_==null?void 0:_.results)==null?void 0:X.find(U=>U.target===ae);return!D||x.winRate>D.winRate||x.winRate===D.winRate&&x.avgDD<D.avgDD?O:_},null),Ze=[];let P=0,se=0;ee.forEach(_=>{var D,X;const O=(D=_.sessions)==null?void 0:D.japan_ib,x=(X=_.sessions)==null?void 0:X.china;(O==null?void 0:O.h)>0&&(O==null?void 0:O.l)>0&&(x==null?void 0:x.h)>0&&(x==null?void 0:x.l)>0&&(se++,(x.h>O.h||x.l<O.l)&&P++)}),se>0&&Ze.push({name:"China breaks Japan range",occurrences:P,total:se,pct:Math.round(P/se*100),color:"#F472B6"});let Se=0,Ce=0;ee.forEach(_=>{var D,X;const O=(D=_.sessions)==null?void 0:D.china,x=(X=_.sessions)==null?void 0:X.london;(O==null?void 0:O.h)>0&&(O==null?void 0:O.l)>0&&(x==null?void 0:x.h)>0&&(x==null?void 0:x.l)>0&&(Ce++,(x.h>O.h||x.l<O.l)&&Se++)}),Ce>0&&Ze.push({name:"London breaks China range",occurrences:Se,total:Ce,pct:Math.round(Se/Ce*100),color:"#3B82F6"});let De=0,le=0;ee.forEach(_=>{var D,X;const O=(D=_.sessions)==null?void 0:D.london,x=(X=_.sessions)==null?void 0:X.ny_1h;(O==null?void 0:O.o)>0&&(O==null?void 0:O.c)>0&&(x==null?void 0:x.o)>0&&(x==null?void 0:x.c)>0&&(le++,O.c>O.o==x.c>x.o&&De++)}),le>0&&Ze.push({name:"NY 1H continues London trend",occurrences:De,total:le,pct:Math.round(De/le*100),color:"#10B981"});let ge=0,Ue=0;ee.forEach(_=>{var D,X;const O=(D=_.sessions)==null?void 0:D.us_ib,x=(X=_.sessions)==null?void 0:X.ny_pm;(O==null?void 0:O.o)>0&&(O==null?void 0:O.c)>0&&(x==null?void 0:x.o)>0&&(x==null?void 0:x.c)>0&&(Ue++,O.c>O.o==x.c>x.o&&ge++)}),Ue>0&&Ze.push({name:"US IB direction = NY PM direction",occurrences:ge,total:Ue,pct:Math.round(ge/Ue*100),color:"#F59E0B"});const Te={};return nt.forEach(_=>Te[_.id]={hod:0,lod:0}),ee.forEach(_=>{let O=0,x=1/0,D=null,X=null;nt.forEach(U=>{var Ae;const je=(Ae=_.sessions)==null?void 0:Ae[U.id];je&&je.h>0&&je.l>0&&(je.h>O&&(O=je.h,D=U.id),je.l<x&&(x=je.l,X=U.id))}),D&&Te[D].hod++,X&&Te[X].lod++}),e.jsxs("div",{style:{padding:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16,padding:"10px 16px",background:"rgba(139, 92, 246, 0.1)",borderRadius:8,fontSize:11},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" ",ee.length," trading days"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#888"},children:[Ie==="all"?"All available data":`${(($=oe.find(_=>_.id===Ie))==null?void 0:$.label)||Ie}`,ne!=="all"&&`  Week ${ne}`]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#10B981",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"OPTIMAL ENTRY FINDER",e.jsx("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:"Long entries  Target capture"})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),E.map(_=>e.jsxs("th",{style:{padding:"6px 6px",textAlign:"center",color:_===ae?"#10B981":"#666",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:10},children:["+",_,"pt"]},_))]})}),e.jsx("tbody",{children:pe.map((_,O)=>e.jsxs("tr",{style:{background:(xe==null?void 0:xe.session.id)===_.session.id?"rgba(16, 185, 129, 0.1)":O%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsxs("td",{style:{padding:"6px 8px",color:_.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:[_.session.name,(xe==null?void 0:xe.session.id)===_.session.id&&e.jsx("span",{style:{marginLeft:6,color:"#00ff88",fontSize:10},children:""})]}),_.results.map(x=>e.jsxs("td",{style:{padding:"4px 6px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:x.winRate>=70?"#00ff88":x.winRate>=50?"#F59E0B":"#ff4466"},children:[x.winRate,"%"]}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:["DD: ",x.avgDD.toFixed(1)]})]},x.target))]},_.session.id))})]})}),xe&&(()=>{const _=E[1],O=xe.results.find(x=>x.target===_);return e.jsxs("div",{style:{marginTop:12,padding:"10px 12px",background:"rgba(16, 185, 129, 0.15)",borderRadius:6,borderLeft:"3px solid #10B981"},children:[e.jsx("div",{style:{fontSize:10,color:"#10B981",fontWeight:700,marginBottom:4},children:" RECOMMENDED ENTRY"}),e.jsxs("div",{style:{fontSize:11,color:"#fff"},children:[e.jsx("span",{style:{color:xe.session.color,fontWeight:600},children:xe.session.name})," offers best risk-adjusted entry for ",_,"pt long targets"]}),e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4},children:[O.winRate,"% win rate  ",O.avgDD.toFixed(1)," pts avg drawdown  ",O.riskReward,":1 R:R"]})]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(245, 158, 11, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#F59E0B",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION PATTERNS & BEHAVIOR"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:Ze.map((_,O)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:8,borderLeft:`3px solid ${_.color}`},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:11,color:"#fff",fontWeight:500},children:_.name}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:2},children:[_.occurrences,"/",_.total," days"]})]}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:_.pct>=70?"#00ff88":_.pct>=50?"#F59E0B":"#888"},children:[_.pct,"%"]})]},O))}),e.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:8,fontWeight:600},children:"WHO SETS HIGH/LOW OF DAY"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#10B981",marginBottom:6,fontWeight:600},children:"HIGH OF DAY"}),Object.entries(Te).filter(([_,O])=>O.hod>0).sort((_,O)=>O[1].hod-_[1].hod).slice(0,3).map(([_,O])=>{const x=nt.find(D=>D.id===_);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(x==null?void 0:x.color)||"#888"},children:(x==null?void 0:x.name)||_}),e.jsxs("span",{style:{color:"#10B981",fontWeight:600},children:[Math.round(O.hod/ee.length*100),"%"]})]},_)})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#EF4444",marginBottom:6,fontWeight:600},children:"LOW OF DAY"}),Object.entries(Te).filter(([_,O])=>O.lod>0).sort((_,O)=>O[1].lod-_[1].lod).slice(0,3).map(([_,O])=>{const x=nt.find(D=>D.id===_);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(x==null?void 0:x.color)||"#888"},children:(x==null?void 0:x.name)||_}),e.jsxs("span",{style:{color:"#EF4444",fontWeight:600},children:[Math.round(O.lod/ee.length*100),"%"]})]},_)})]})]})]})]})]})]})})()]}),y&&e.jsxs("div",{style:{position:"fixed",left:W.x,top:W.y-10,transform:"translate(-50%, -100%)",background:"rgba(0,0,0,0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,padding:"10px 14px",zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.8)",minWidth:140,pointerEvents:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:11,fontWeight:700,color:y.close>=y.open?"#00ff88":"#ff4466",marginBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:6},children:[e.jsx("span",{children:y.label||y.name}),y.isHOD&&e.jsx("span",{style:{background:"#10B981",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"HIGH OF DAY"}),y.isLOD&&e.jsx("span",{style:{background:"#EF4444",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"LOW OF DAY"}),y.isHOW&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #00ff88"},children:"HIGH OF WEEK"}),y.isLOW&&e.jsx("span",{style:{background:"#ff4466",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #ff4466"},children:"LOW OF WEEK"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"4px 12px",fontSize:10},children:[e.jsx("span",{style:{color:"#3B82F6"},children:"O"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((yi=y.open)==null?void 0:yi.toFixed(2))||""}),e.jsx("span",{style:{color:(y.isHOD,"#10B981")},children:"H"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:y.isHOD?"rgba(16, 185, 129, 0.2)":"transparent",padding:y.isHOD?"1px 4px":0,borderRadius:3},children:((mi=y.high)==null?void 0:mi.toFixed(2))||""}),e.jsx("span",{style:{color:(y.isLOD,"#EF4444")},children:"L"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:y.isLOD?"rgba(239, 68, 68, 0.2)":"transparent",padding:y.isLOD?"1px 4px":0,borderRadius:3},children:((bi=y.low)==null?void 0:bi.toFixed(2))||""}),e.jsx("span",{style:{color:"#F59E0B"},children:"C"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((vi=y.close)==null?void 0:vi.toFixed(2))||""})]}),y.high>0&&y.low>0&&e.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#888"},children:["Range: ",e.jsx("span",{style:{color:"#EC4899"},children:(y.high-y.low).toFixed(2)})]})]})]})})()]}):e.jsx("div",{style:{padding:40,textAlign:"center",color:"#888"},children:"No data available"})},Lg=({activeTab:t,setActiveTab:n,onLogout:o})=>{var y;const{isMobile:i,isTablet:r}=$i(),[s,l]=B.useState(!1),[a,d]=B.useState(!1),p=[{id:"backtest",icon:"",label:"Backtest",fullLabel:"Backtest Analytics"},{id:"live",icon:"",label:"Live",fullLabel:"Live Metrics",iconColor:"#ef4444"},{id:"tpo",icon:"",label:"TPO",fullLabel:"Market Profile",iconColor:"#ffaa00"},{id:"zones",icon:"",label:"Zones",fullLabel:"Zone Participation",iconColor:"#00ff88"},{id:"treemap",icon:"",label:"Matrix",fullLabel:"Correlation Matrix"},{id:"vsi",icon:"",label:"Sessions",fullLabel:"Session Analysis"},{id:"trades",icon:"",label:"Trades",fullLabel:"Trade Log"},{id:"priceladder",icon:"",label:"Ladder",fullLabel:"Price Ladder"},{id:"redfolder",icon:"",label:"Red",fullLabel:"Red Folder",iconColor:"#ff4466",accent:"#ff4466"}],w=u=>{n(u),l(!1)};return i?e.jsxs(e.Fragment,{children:[e.jsxs("nav",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"rgba(0,0,0,0.4)",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",letterSpacing:"2px"},children:"HORIZON"})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(0,255,136,0.1)",borderRadius:6,border:"1px solid rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{color:"#00ff88",fontSize:11,fontWeight:600},children:((y=p.find(u=>u.id===t))==null?void 0:y.label)||"Menu"})}),e.jsxs("button",{onClick:()=>l(!s),style:{width:40,height:40,background:s?"rgba(0,255,136,0.15)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:5,transition:"all 0.2s"},children:[e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(45deg) translateY(7px)":"none"}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",opacity:s?0:1}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(-45deg) translateY(-7px)":"none"}})]})]}),s&&e.jsxs("div",{style:{position:"fixed",top:57,left:0,right:0,bottom:0,background:"rgba(10,10,15,0.98)",zIndex:999,padding:16,overflowY:"auto",animation:"slideIn 0.2s ease"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:p.map(u=>{const W=t===u.id,L=u.accent||"#00ff88";return e.jsxs("button",{onClick:()=>w(u.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,padding:"20px 12px",background:W?`linear-gradient(180deg, ${L}20 0%, ${L}08 100%)`:"rgba(255,255,255,0.03)",border:W?`2px solid ${L}`:"1px solid rgba(255,255,255,0.08)",borderRadius:12,color:W?L:"#aaa",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("span",{style:{fontSize:24,color:W?L:u.iconColor||"#666",filter:W?`drop-shadow(0 0 8px ${L})`:"none"},children:u.icon}),e.jsx("span",{style:{fontSize:12,fontWeight:W?700:500},children:u.fullLabel})]},u.id)})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:20},children:[e.jsxs("button",{onClick:()=>{n("settings"),l(!1)},style:{flex:1,padding:"16px",background:"rgba(0,255,136,0.1)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:12,color:"#00ff88",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Settings"]}),e.jsxs("button",{onClick:o,style:{flex:1,padding:"16px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.4)",borderRadius:12,color:"#ff4466",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Logout"]})]})]})]}):r?e.jsxs("nav",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)",gap:16},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexShrink:0},children:e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})})}),e.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",flex:1,WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:p.map(u=>{const W=t===u.id,L=u.accent||"#00ff88";return e.jsxs("button",{onClick:()=>n(u.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",background:W?`${L}15`:"transparent",border:W?`1px solid ${L}`:"1px solid transparent",borderRadius:6,color:W?L:"#888",fontSize:11,fontWeight:W?600:500,cursor:"pointer",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx("span",{style:{color:W?L:u.iconColor||"#666"},children:u.icon}),e.jsx("span",{children:u.label})]},u.id)})}),e.jsxs("div",{style:{position:"relative",flexShrink:0},children:[e.jsx("button",{onClick:()=>d(!a),style:{width:36,height:36,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:14,color:"#fff",boxShadow:a?"0 0 15px rgba(0,255,136,0.5)":"none"},children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>d(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:10,padding:6,minWidth:150,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",zIndex:999},children:[e.jsxs("button",{onClick:()=>{n("settings"),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ccc",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Settings"]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 6px"}}),e.jsxs("button",{onClick:()=>{o(),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ff4466",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Logout"]})]})]})]})]}):e.jsxs("nav",{style:Q.nav,children:[e.jsxs("div",{style:Q.navBrand,children:[e.jsx("div",{style:{width:36,height:36,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{fontSize:18,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[e.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#fff",letterSpacing:"1.5px"},children:"PROJECT"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",letterSpacing:"3px"},children:"HORIZON"})]})]}),e.jsx("div",{style:{...Q.navTabs,marginLeft:24},children:p.map(u=>{const W=t===u.id,L=u.accent||"#00ff88";return e.jsxs("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 18px",background:W?`linear-gradient(180deg, ${L}20 0%, ${L}05 100%)`:"transparent",border:W?`1px solid ${L}`:"1px solid transparent",borderRadius:8,color:W?L:"#8b8b8b",fontSize:13,fontWeight:W?600:500,cursor:"pointer",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},onClick:()=>n(u.id),onMouseEnter:Z=>{W||(Z.target.style.background="rgba(255,255,255,0.05)",Z.target.style.color="#ccc")},onMouseLeave:Z=>{W||(Z.target.style.background="transparent",Z.target.style.color="#8b8b8b")},children:[e.jsx("span",{style:{fontSize:u.icon.length===1?14:15,color:W?L:u.iconColor||"#8b8b8b",filter:W&&u.iconColor?`drop-shadow(0 0 4px ${u.iconColor})`:"none"},children:u.icon}),e.jsx("span",{children:u.fullLabel}),W&&e.jsx("div",{style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"60%",height:2,background:L,borderRadius:"2px 2px 0 0",boxShadow:`0 0 10px ${L}`}})]},u.id)})}),e.jsxs("div",{style:{position:"relative",marginLeft:16},children:[e.jsx("button",{onClick:()=>d(!a),style:{width:40,height:40,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:18,color:"#fff",boxShadow:a?"0 0 15px rgba(0,255,136,0.5)":"none"},onMouseEnter:u=>{u.currentTarget.style.borderColor="#00ff88",u.currentTarget.style.boxShadow="0 0 15px rgba(0,255,136,0.5)"},onMouseLeave:u=>{a||(u.currentTarget.style.borderColor="rgba(255,255,255,0.5)",u.currentTarget.style.boxShadow="none")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>d(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:8,minWidth:180,boxShadow:"0 10px 40px rgba(0,0,0,0.5)",zIndex:999,backdropFilter:"blur(20px)"},children:[e.jsxs("button",{onClick:()=>{n("settings"),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ccc",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,255,255,0.08)",u.currentTarget.style.color="#fff"},onMouseLeave:u=>{u.currentTarget.style.background="transparent",u.currentTarget.style.color="#ccc"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 8px"}}),e.jsxs("button",{onClick:()=>{o(),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ff4466",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,68,102,0.15)"},onMouseLeave:u=>{u.currentTarget.style.background="transparent"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Logout"})]})]})]})]})]})},Ag=()=>{var Z,Ge,f,m,C,c,F,S,R,I,de,G,v,h,T,Le,z,Ie,Pe,ne,ze,b,_e,re,He,rt,zt,Je,Xe,Ne,oe,fe,we,A,te,ke,at,$e,Me,Qe,Ft,J,st,lt,et;const[t,n]=B.useState(""),[o,i]=B.useState(!1),[r,s]=B.useState(!1),[l,a]=B.useState({stream_active:!1,stream_title:"",transcript_buffer:[],current_segment:"",sentiment:{current:"neutral",score:0,confidence:0,history:[]},voice_tone:{confidence_level:0,hesitation_count:0,stress_indicators:0,speaking_rate:0},keywords:{},market_direction:{signal:"neutral",strength:0,components:{sentiment_weight:0,tone_weight:0,keyword_weight:0}},error:null}),d=B.useRef(null);B.useEffect(()=>{const ie=async()=>{try{const V=await(await fetch(ua)).json();a(V),i(V.stream_active),s(!0)}catch{s(!1)}};ie();const g=setInterval(ie,300);return()=>clearInterval(g)},[]),B.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[l.transcript_buffer]);const p=async()=>{if(t)try{await fetch(`${ua}/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})})}catch(ie){console.error("Failed to start stream:",ie)}},w=async()=>{try{await fetch(`${ua}/stop`,{method:"POST"})}catch(ie){console.error("Failed to stop stream:",ie)}},y=ie=>{if(!ie)return ie;const g=Object.keys(l.keywords||{});let j=ie;return g.forEach(V=>{const M=new RegExp(`\\b(${V})\\b`,"gi");j=j.replace(M,'<span style="background: rgba(0,255,136,0.2); color: #00ff88; padding: 2px 4px; border-radius: 4px; font-weight: 600;">$1</span>')}),j},u=ie=>ie>.05?"#00ff88":ie<-.05?"#ff4466":"#ffaa00",L=(ie=>{switch(ie){case"bullish":return{color:"#00ff88",icon:"",glow:"rgba(0,255,136,0.3)"};case"bearish":return{color:"#ff4466",icon:"",glow:"rgba(255,68,102,0.3)"};default:return{color:"#ffaa00",icon:"",glow:"rgba(255,170,0,0.3)"}}})((Z=l.market_direction)==null?void 0:Z.signal);return e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},children:[e.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:""}),e.jsx("span",{children:"Red Folder"}),e.jsx("span",{style:{fontSize:14,color:"#888",fontWeight:400},children:"Live Event Transcription & Analysis"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 16px",borderRadius:8,background:r?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${r?"#00ff88":"#ff4466"}`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r?"#00ff88":"#ff4466",boxShadow:r?"0 0 10px #00ff88":"none",animation:r&&o?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{color:r?"#00ff88":"#ff4466",fontSize:12,fontWeight:600},children:o?"LIVE TRANSCRIBING":r?"SERVICE ONLINE":"SERVICE OFFLINE"})]})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",placeholder:"Enter YouTube Live URL (e.g., https://youtube.com/watch?v=...)",value:t,onChange:ie=>n(ie.target.value),style:{flex:1,minWidth:300,padding:"12px 16px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"#fff",fontSize:14,fontFamily:"'JetBrains Mono', monospace"}}),e.jsx("button",{onClick:p,disabled:o||!t,style:{padding:"12px 24px",borderRadius:8,background:o?"rgba(255,255,255,0.05)":"linear-gradient(135deg, #00ff88, #00cc6a)",border:"none",color:o?"#666":"#000",fontWeight:700,cursor:o?"not-allowed":"pointer",transition:"all 0.2s"},children:" START"}),e.jsx("button",{onClick:w,disabled:!o,style:{padding:"12px 24px",borderRadius:8,background:o?"linear-gradient(135deg, #ff4466, #cc3355)":"rgba(255,255,255,0.05)",border:"none",color:o?"#fff":"#666",fontWeight:700,cursor:o?"pointer":"not-allowed",transition:"all 0.2s"},children:" STOP"})]}),l.stream_title&&e.jsxs("div",{style:{marginTop:12,color:"#888",fontSize:13},children:[e.jsx("span",{style:{color:"#00aaff"},children:"Now transcribing:"})," ",l.stream_title]}),l.error&&e.jsxs("div",{style:{marginTop:12,color:"#ff4466",fontSize:13},children:["Error: ",l.error]}),l.scheduler&&e.jsxs("div",{style:{marginTop:16,padding:"12px 16px",borderRadius:8,background:l.scheduler.event_active?"rgba(255,170,0,0.1)":"rgba(0,170,255,0.05)",border:`1px solid ${l.scheduler.event_active?"#ffaa00":"rgba(0,170,255,0.2)"}`,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:l.scheduler.event_active?"":""}),e.jsx("span",{style:{color:"#888",fontSize:12,fontWeight:600},children:"AUTO-SCHEDULER"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:l.scheduler.enabled?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:l.scheduler.enabled?"#00ff88":"#ff4466"},children:l.scheduler.enabled?"ENABLED":"DISABLED"})]}),l.scheduler.next_event&&e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#666",fontSize:11},children:"Next:"}),e.jsx("span",{style:{color:l.scheduler.event_active?"#ffaa00":"#00aaff",fontSize:12,fontWeight:600},children:l.scheduler.next_event}),e.jsx("span",{style:{color:"#888",fontSize:11},children:l.scheduler.next_time}),l.scheduler.event_active&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",animation:"pulse 2s infinite"},children:"EVENT ACTIVE"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:24},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:24,height:600,display:"flex",flexDirection:"column"},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Live Transcript",o&&e.jsx("span",{style:{fontSize:11,color:"#00ff88",marginLeft:"auto"},children:" RECORDING"})]}),e.jsx("div",{ref:d,style:{flex:1,overflowY:"auto",fontFamily:"'JetBrains Mono', monospace",fontSize:14,lineHeight:1.8},children:((Ge=l.transcript_buffer)==null?void 0:Ge.length)===0&&!l.current_segment?e.jsx("div",{style:{color:"#666",textAlign:"center",padding:40},children:o?"Waiting for speech...":"Start a stream to begin transcription"}):e.jsxs(e.Fragment,{children:[(f=l.transcript_buffer)==null?void 0:f.map((ie,g)=>e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.03)",opacity:ie.is_final?1:.6},children:[e.jsx("span",{style:{color:"#666",marginRight:12,fontSize:12},children:ie.timestamp}),e.jsx("span",{style:{color:"#e0e0e0"},dangerouslySetInnerHTML:{__html:y(ie.text)}})]},g)),l.current_segment&&e.jsxs("div",{style:{padding:"8px 0",opacity:.6,color:"#888"},children:[e.jsx("span",{style:{marginRight:12,fontSize:12},children:"..."}),l.current_segment]})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${((m=l.sentiment)==null?void 0:m.score)>.1?"rgba(0,255,136,0.3)":((C=l.sentiment)==null?void 0:C.score)<-.1?"rgba(255,68,102,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:16,padding:20,textAlign:"center",transition:"border-color 0.5s ease, box-shadow 0.5s ease",boxShadow:((c=l.sentiment)==null?void 0:c.score)>.1?"0 0 20px rgba(0,255,136,0.1)":((F=l.sentiment)==null?void 0:F.score)<-.1?"0 0 20px rgba(255,68,102,0.1)":"none"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"SENTIMENT GAUGE"}),e.jsxs("svg",{width:"200",height:"110",viewBox:"0 0 200 110",style:{margin:"0 auto",display:"block"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"12"}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 60 35",fill:"none",stroke:"#ff4466",strokeWidth:"12",opacity:((S=l.sentiment)==null?void 0:S.score)<-.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 60 35 A 80 80 0 0 1 140 35",fill:"none",stroke:"#ffaa00",strokeWidth:"12",opacity:Math.abs(((R=l.sentiment)==null?void 0:R.score)||0)<=.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 140 35 A 80 80 0 0 1 180 100",fill:"none",stroke:"#00ff88",strokeWidth:"12",opacity:((I=l.sentiment)==null?void 0:I.score)>.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("g",{style:{transform:`rotate(${((((de=l.sentiment)==null?void 0:de.score)||0)+1)*90-180}deg)`,transformOrigin:"100px 100px",transition:"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e.jsx("line",{x1:"100",y1:"100",x2:"165",y2:"100",stroke:u(((G=l.sentiment)==null?void 0:G.score)||0),strokeWidth:"3",strokeLinecap:"round",filter:"url(#glow)"})}),e.jsx("circle",{cx:"100",cy:"100",r:"10",fill:u(((v=l.sentiment)==null?void 0:v.score)||0),style:{transition:"fill 0.5s"}}),e.jsx("circle",{cx:"100",cy:"100",r:"5",fill:"#1a1a1a"}),e.jsx("text",{x:"20",y:"108",fill:"#ff4466",fontSize:"10",fontWeight:"600",children:"BEAR"}),e.jsx("text",{x:"160",y:"108",fill:"#00ff88",fontSize:"10",fontWeight:"600",children:"BULL"})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("span",{style:{fontSize:28,fontWeight:800,color:u(((h=l.sentiment)==null?void 0:h.score)||0),textShadow:((T=l.sentiment)==null?void 0:T.current)!=="neutral"?`0 0 20px ${u(((Le=l.sentiment)==null?void 0:Le.score)||0)}40`:"none",transition:"color 0.5s, text-shadow 0.5s"},children:(((z=l.sentiment)==null?void 0:z.current)||"neutral").toUpperCase()}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginTop:6},children:["Score: ",e.jsxs("span",{style:{color:u(((Ie=l.sentiment)==null?void 0:Ie.score)||0),fontWeight:600},children:[((((Pe=l.sentiment)==null?void 0:Pe.score)||0)*100).toFixed(0),"%"]})," | Confidence: ",e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[((((ne=l.sentiment)==null?void 0:ne.confidence)||0)*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"VOICE ANALYSIS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Confidence"}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((ze=l.voice_tone)==null?void 0:ze.confidence_level)||0}%`,height:"100%",borderRadius:4,background:(((b=l.voice_tone)==null?void 0:b.confidence_level)||0)>70?"#00ff88":(((_e=l.voice_tone)==null?void 0:_e.confidence_level)||0)>40?"#ffaa00":"#ff4466",transition:"width 0.3s"}})}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",marginTop:4},children:[(((re=l.voice_tone)==null?void 0:re.confidence_level)||0).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Speaking Rate"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#00aaff"},children:(((He=l.voice_tone)==null?void 0:He.speaking_rate)||0).toFixed(0)}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"WPM"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Hesitations"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((rt=l.voice_tone)==null?void 0:rt.hesitation_count)||0)>5?"#ff4466":"#888"},children:((zt=l.voice_tone)==null?void 0:zt.hesitation_count)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Stress Signs"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((Je=l.voice_tone)==null?void 0:Je.stress_indicators)||0)>3?"#ff4466":"#888"},children:((Xe=l.voice_tone)==null?void 0:Xe.stress_indicators)||0})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"KEYWORD TRACKING"}),e.jsxs("div",{style:{maxHeight:150,overflowY:"auto"},children:[Object.entries(l.keywords||{}).filter(([ie,g])=>g.count>0).sort((ie,g)=>g[1].count-ie[1].count).slice(0,8).map(([ie,g])=>{const j=Math.max(...Object.values(l.keywords||{}).map(q=>q.count||0),1),V=["growth","dovish","easing","employment","jobs"],M=["inflation","hawkish","tightening","recession","rates"],N=V.includes(ie)?"#00ff88":M.includes(ie)?"#ff4466":"#00aaff";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsx("span",{style:{minWidth:70,fontSize:11,color:N,fontWeight:600,textTransform:"capitalize"},children:ie}),e.jsx("div",{style:{flex:1,height:6,background:"rgba(255,255,255,0.05)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${g.count/j*100}%`,height:"100%",background:N,borderRadius:3,transition:"width 0.3s"}})}),e.jsx("span",{style:{fontSize:12,color:"#888",minWidth:24,textAlign:"right"},children:g.count})]},ie)}),Object.values(l.keywords||{}).every(ie=>ie.count===0)&&e.jsx("div",{style:{color:"#666",fontSize:12,textAlign:"center",padding:20},children:"No keywords detected yet"})]})]}),(()=>{var M,N,q,ce;const ie=(((M=l.sentiment)==null?void 0:M.score)||0)>.05?"bullish":(((N=l.sentiment)==null?void 0:N.score)||0)<-.05?"bearish":"neutral",g=((q=l.market_direction)==null?void 0:q.signal)||"neutral",j=ie!=="neutral"&&g!=="neutral"&&ie!==g,V=ie!=="neutral"&&g==="neutral"||ie==="neutral"&&g!=="neutral";if(j)return e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,170,0,0.15) 0%, rgba(255,170,0,0.05) 100%)",border:"2px solid #ffaa00",borderRadius:12,padding:16,marginBottom:16,animation:"pulse 1.5s infinite"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:700,fontSize:14},children:"DIVERGENCE ALERT"}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment: ",e.jsx("span",{style:{color:ie==="bullish"?"#00ff88":"#ff4466"},children:ie.toUpperCase()})," vs ","Direction: ",e.jsx("span",{style:{color:g==="bullish"?"#00ff88":"#ff4466"},children:g.toUpperCase()})]}),e.jsx("div",{style:{color:"#ffaa00",fontSize:10,marginTop:4},children:"Voice tone or keywords offsetting text sentiment"})]})]})});if(V)return e.jsx("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{style:{color:"#888",fontSize:11},children:["Mixed signals: Sentiment ",ie.toUpperCase()," | Direction ",g.toUpperCase()]})]})});if(ie!=="neutral"&&ie===g){const Y=((ce=l.market_direction)==null?void 0:ce.strength)||0,ve=ie==="bullish"?"#00ff88":"#ff4466";return e.jsx("div",{style:{background:`linear-gradient(135deg, ${ve}20 0%, ${ve}08 100%)`,border:`2px solid ${ve}`,borderRadius:12,padding:16,marginBottom:16,boxShadow:`0 0 20px ${ve}30`},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:ie==="bullish"?"":""}),e.jsxs("div",{children:[e.jsxs("div",{style:{color:ve,fontWeight:700,fontSize:14},children:["STRONG ",ie.toUpperCase()," SIGNAL"]}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment + Direction aligned | Strength: ",Y.toFixed(0),"%"]})]})]})})}return null})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`2px solid ${L.color}`,borderRadius:16,padding:24,textAlign:"center",boxShadow:`0 0 30px ${L.glow}`},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"MARKET DIRECTION"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"20px 0",transition:"transform 0.5s ease"},children:[e.jsx("span",{style:{fontSize:56,color:L.color,textShadow:`0 0 30px ${L.color}`,transition:"color 0.5s, text-shadow 0.5s, transform 0.3s",animation:((Ne=l.market_direction)==null?void 0:Ne.signal)!=="neutral"?"pulse 2s infinite":"none"},children:L.icon}),e.jsx("span",{style:{fontSize:36,fontWeight:800,color:L.color,letterSpacing:4,transition:"color 0.5s ease",textShadow:`0 0 15px ${L.color}40`},children:(((oe=l.market_direction)==null?void 0:oe.signal)||"neutral").toUpperCase()})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Strength"}),e.jsx("div",{style:{height:10,background:"rgba(255,255,255,0.1)",borderRadius:5,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((fe=l.market_direction)==null?void 0:fe.strength)||0}%`,height:"100%",borderRadius:5,background:`linear-gradient(90deg, ${L.color}80 0%, ${L.color} 100%)`,transition:"width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:`0 0 10px ${L.color}`}})}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:L.color,marginTop:6,transition:"color 0.5s"},children:[(((we=l.market_direction)==null?void 0:we.strength)||0).toFixed(0),"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Sentiment"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((te=(A=l.market_direction)==null?void 0:A.components)==null?void 0:te.sentiment_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Voice"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((at=(ke=l.market_direction)==null?void 0:ke.components)==null?void 0:at.tone_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Keywords"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((Me=($e=l.market_direction)==null?void 0:$e.components)==null?void 0:Me.keyword_weight)||0)*100).toFixed(0),"%"]})]})]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Fed Speech Transcription Analysis"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(139,92,246,0.2)",color:"#A78BFA",fontSize:10,fontWeight:600},children:"DEEPGRAM LIVE TRANSCRIPTION"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Real-time sentiment analysis of Fed Chair, FOMC Press Conferences & Presidential speeches  OHLC during speech duration"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#A78BFA",fontSize:12,fontWeight:600},children:" PAST SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Last 6 Months)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(139,92,246,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SENTIMENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SIGNAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"RESULT"})]})}),e.jsx("tbody",{children:[{date:"Tue, Jan 28",dateStr:"2026-01-28",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.12,direction:"bearish",o:2765.8,h:2772.4,l:2748.5,c:2752.2},{date:"Tue, Jan 28",dateStr:"2026-01-28",time:"14:00",event:"FOMC Rate Decision",speaker:"Fed",duration:25,sentiment:-.05,direction:"neutral",o:2768.5,h:2775.2,l:2762.8,c:2765.8},{date:"Wed, Jan 8",dateStr:"2026-01-08",time:"14:00",event:"FOMC Minutes Release Discussion",speaker:"Fed Officials",duration:45,sentiment:-.08,direction:"bearish",o:4495,h:4498.5,l:4486.2,c:4488.8},{date:"Wed, Dec 18",dateStr:"2025-12-18",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:52,sentiment:.15,direction:"bullish",o:4425,h:4452.3,l:4420.5,c:4448.6},{date:"Fri, Dec 6",dateStr:"2025-12-06",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:38,sentiment:-.12,direction:"bearish",o:4380,h:4385.4,l:4358.2,c:4362.5},{date:"Wed, Nov 26",dateStr:"2025-11-26",time:"14:30",event:"FOMC Minutes Discussion",speaker:"Fed Officials",duration:42,sentiment:.05,direction:"neutral",o:4320,h:4328.5,l:4315.8,c:4322.4},{date:"Thu, Nov 14",dateStr:"2025-11-14",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:55,sentiment:.22,direction:"bullish",o:4285.5,h:4318.2,l:4282,c:4312.8},{date:"Mon, Nov 4",dateStr:"2025-11-04",time:"15:00",event:"U.S. President Trump Speaks",speaker:"Trump",duration:28,sentiment:.18,direction:"bullish",o:4245,h:4272.5,l:4242.3,c:4268.9},{date:"Wed, Oct 22",dateStr:"2025-10-22",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:48,sentiment:-.15,direction:"bearish",o:4195,h:4202.8,l:4168.5,c:4175.2},{date:"Tue, Oct 8",dateStr:"2025-10-08",time:"09:30",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:35,sentiment:.08,direction:"bullish",o:4150,h:4168.4,l:4145.2,c:4162.5},{date:"Wed, Sep 17",dateStr:"2025-09-17",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:58,sentiment:.28,direction:"bullish",o:4085,h:4135.6,l:4080.5,c:4128.4},{date:"Fri, Sep 5",dateStr:"2025-09-05",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:42,sentiment:-.05,direction:"neutral",o:4055,h:4068.2,l:4048.5,c:4058.8},{date:"Fri, Aug 22",dateStr:"2025-08-22",time:"10:00",event:"Jackson Hole - Powell Speaks",speaker:"Powell",duration:65,sentiment:.35,direction:"bullish",o:3985,h:4058.5,l:3978.2,c:4045.8},{date:"Thu, Aug 7",dateStr:"2025-08-07",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:50,sentiment:.12,direction:"bullish",o:3925,h:3958.4,l:3920.5,c:3952.2},{date:"Wed, Jul 30",dateStr:"2025-07-30",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.18,direction:"bearish",o:3895,h:3902.5,l:3858.2,c:3865.4},{date:"Tue, Jul 15",dateStr:"2025-07-15",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:40,sentiment:.1,direction:"bullish",o:3845,h:3872.8,l:3840.5,c:3868.2}].map((g,j)=>{const V=g.h-g.l,M=g.c>g.o+3?"bullish":g.c<g.o-3?"bearish":"neutral",N=g.direction===M||g.direction==="neutral"&&Math.abs(g.c-g.o)<=3,q=g.sentiment>.1?"#00ff88":g.sentiment<-.1?"#ff4466":"#ffaa00",ce=g.direction==="bullish"?"#00ff88":g.direction==="bearish"?"#ff4466":"#ffaa00",Y=g.speaker==="Powell"?"#A78BFA":g.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:j%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:g.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:g.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:g.event}),e.jsx("div",{style:{color:Y,fontSize:10,marginTop:2},children:g.speaker})]}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[g.duration,"m"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:`${q}15`,border:`1px solid ${q}30`},children:e.jsxs("span",{style:{color:q,fontWeight:600,fontSize:11},children:[(g.sentiment*100).toFixed(0),"%"]})})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("span",{style:{color:ce,fontWeight:600,fontSize:11,display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx("span",{children:g.direction==="bullish"?"":g.direction==="bearish"?"":""}),g.direction.toUpperCase()]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("div",{style:{fontSize:9,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.4},children:[e.jsx("span",{style:{color:"#888"},children:"O:"}),e.jsx("span",{style:{color:"#fff"},children:g.o.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"H:"}),e.jsx("span",{style:{color:"#00ff88"},children:g.h.toFixed(0)}),e.jsx("br",{}),e.jsx("span",{style:{color:"#888"},children:"L:"}),e.jsx("span",{style:{color:"#ff4466"},children:g.l.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"C:"}),e.jsx("span",{style:{color:g.c>=g.o?"#00ff88":"#ff4466"},children:g.c.toFixed(0)})]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right"},children:e.jsxs("span",{style:{color:"#FFD700",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:12},children:["$",V.toFixed(2)]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:"50%",background:N?"rgba(0,255,136,0.15)":"rgba(255,68,102,0.15)",color:N?"#00ff88":"#ff4466",fontSize:12,fontWeight:700},children:N?"":""})})]},j)})})]})})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Scheduled for Transcription)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EST. DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"STATUS"})]})}),e.jsx("tbody",{children:(()=>{const ie=[{date:"Fri, Feb 7",dateStr:"2026-02-07",time:"10:00",durationMin:40,event:"Fed Chair Powell Speaks",speaker:"Powell",estDuration:"~40m"},{date:"Wed, Feb 12",dateStr:"2026-02-12",time:"15:00",durationMin:30,event:"U.S. President Trump Speaks",speaker:"Trump",estDuration:"~30m"},{date:"Wed, Mar 19",dateStr:"2026-03-19",time:"14:30",durationMin:55,event:"FOMC Press Conference",speaker:"Powell",estDuration:"~55m"}],g=new Date,j=new Date(g.toLocaleString("en-US",{timeZone:"America/New_York"})),V=ie.map(M=>{const[N,q]=M.time.split(":").map(Number),ce=new Date(M.dateStr+"T"+M.time+":00"),Y=new Date(ce.toLocaleString("en-US",{timeZone:"America/New_York"})),ve=new Date(Y.getTime()+M.durationMin*60*1e3);let Tt="SCHEDULED",ut="#A78BFA",Ct="rgba(139,92,246,0.2)";return j>=Y&&j<=ve?(Tt=" LIVE",ut="#ff4466",Ct="rgba(255,68,102,0.3)"):j>ve&&(Tt="ENDED",ut="#666",Ct="rgba(100,100,100,0.2)"),{...M,status:Tt,statusColor:ut,statusBg:Ct,eventEnd:ve}}).filter(M=>M.status!=="ENDED");return V.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming speeches scheduled"})}):V.map((M,N)=>{const q=M.speaker==="Powell"?"#A78BFA":M.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:M.status===" LIVE"?"rgba(255,68,102,0.05)":N%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:M.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:M.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:M.event}),e.jsx("div",{style:{color:q,fontSize:10,marginTop:2},children:M.speaker})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:M.estDuration}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:M.statusBg,color:M.statusColor,animation:M.status===" LIVE"?"pulse 1.5s infinite":"none"},children:M.status})})]},N)})})()})]})})]}),(()=>{const ie=[{sentiment:-.08,direction:"bearish",o:4495,c:4488.8},{sentiment:.15,direction:"bullish",o:4425,c:4448.6},{sentiment:-.12,direction:"bearish",o:4380,c:4362.5},{sentiment:.05,direction:"neutral",o:4320,c:4322.4},{sentiment:.22,direction:"bullish",o:4285.5,c:4312.8},{sentiment:.18,direction:"bullish",o:4245,c:4268.9},{sentiment:-.15,direction:"bearish",o:4195,c:4175.2},{sentiment:.08,direction:"bullish",o:4150,c:4162.5},{sentiment:.28,direction:"bullish",o:4085,c:4128.4},{sentiment:-.05,direction:"neutral",o:4055,c:4058.8},{sentiment:.35,direction:"bullish",o:3985,c:4045.8},{sentiment:.12,direction:"bullish",o:3925,c:3952.2},{sentiment:-.18,direction:"bearish",o:3895,c:3865.4},{sentiment:.1,direction:"bullish",o:3845,c:3868.2}];let g=0,j=0;ie.forEach(q=>{const ce=q.c-q.o,Y=ce>3?"bullish":ce<-3?"bearish":"neutral";(q.direction===Y||q.direction==="neutral"&&Math.abs(ce)<=3)&&(g++,j+=Math.abs(ce))});const V=Math.round(g/ie.length*100),M=(ie.reduce((q,ce)=>q+Math.abs(ce.c-ce.o),0)/ie.length).toFixed(2),N=Math.round(j*100);return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.1) 0%, rgba(0,170,255,0.05) 100%)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:12,padding:20,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:"#fff",fontSize:14,fontWeight:600},children:"Deepgram Speech Analysis ROI (6 Months)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"SPEECHES"}),e.jsx("div",{style:{color:"#fff",fontSize:24,fontWeight:700},children:ie.length})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"CORRECT"}),e.jsx("div",{style:{color:"#00ff88",fontSize:24,fontWeight:700},children:g})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"ACCURACY"}),e.jsxs("div",{style:{color:V>=70?"#00ff88":"#ffaa00",fontSize:24,fontWeight:700},children:[V,"%"]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"AVG MOVE"}),e.jsxs("div",{style:{color:"#00aaff",fontSize:24,fontWeight:700},children:["$",M]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"$ VALUE"}),e.jsxs("div",{style:{color:"#FFD700",fontSize:24,fontWeight:700},children:["$",N.toLocaleString()]})]})]}),e.jsx("div",{style:{marginTop:16,padding:"12px 16px",background:"rgba(139,92,246,0.1)",borderRadius:8,border:"1px solid rgba(139,92,246,0.2)"},children:e.jsxs("p",{style:{color:"#aaa",fontSize:11,margin:0,lineHeight:1.5},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" VERDICT: ",V>=70?"KEEP DEEPGRAM":"MONITOR"]})," - At ",V,"% accuracy on Fed speeches, capturing $",N.toLocaleString()," in value over 6 months.",e.jsx("span",{style:{color:"#888"},children:" Note: Fed Chair position may change - monitor for new appointments."})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Red Folder News Events"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(255,68,102,0.2)",color:"#ff4466",fontSize:10,fontWeight:600},children:"HIGH IMPACT DATA RELEASES"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Instant economic data releases  30-minute candle OHLC at release time  No transcription (instant release)"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ff4466",fontSize:12,fontWeight:600},children:" PAST RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,68,102,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"ACTUAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"30m OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"})]})}),e.jsxs("tbody",{children:[(((Qe=l.economic_calendar)==null?void 0:Qe.past)||[]).map((ie,g)=>{const j=ie.impact==="high"||ie.impact==="critical"?"#ff4466":ie.impact==="medium"?"#ffaa00":"#888";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:g%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:ie.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:ie.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:ie.event}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:3,fontSize:8,fontWeight:600,background:`${j}20`,color:j,marginTop:4,display:"inline-block"},children:ie.impact.toUpperCase()})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:ie.actual||ie.forecast})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:ie.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#666",fontSize:10},children:"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#666",fontSize:10},children:"--"})]},g)}),(!((Ft=l.economic_calendar)!=null&&Ft.past)||l.economic_calendar.past.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:20,textAlign:"center",color:"#666"},children:"No past events this month"})})]})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",((J=l.economic_calendar)==null?void 0:J.current_month)||new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]}),((st=l.economic_calendar)==null?void 0:st.last_updated)&&e.jsxs("span",{style:{color:"#444",fontSize:9,marginLeft:"auto"},children:["Updated: ",l.economic_calendar.last_updated]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"PREVIOUS"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"IMPACT"})]})}),e.jsxs("tbody",{children:[(((lt=l.economic_calendar)==null?void 0:lt.upcoming)||[]).map((ie,g)=>{const j=ie.impact==="high"||ie.impact==="critical"?"#ff4466":ie.impact==="medium"?"#ffaa00":"#888",V=ie.is_today;return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:V?"rgba(255,170,0,0.1)":g%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsxs("td",{style:{padding:"10px 8px",color:V?"#ffaa00":"#aaa",fontSize:11,whiteSpace:"nowrap",fontWeight:V?600:400},children:[V&&e.jsx("span",{style:{marginRight:4},children:""}),ie.date]}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:ie.time}),e.jsx("td",{style:{padding:"10px 8px"},children:e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:ie.event})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:ie.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:ie.previous}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${j}20`,color:j},children:ie.impact.toUpperCase()})})]},g)}),(!((et=l.economic_calendar)!=null&&et.upcoming)||l.economic_calendar.upcoming.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming events"})})]})]})})]})]})]})},Fg=({onResetComplete:t})=>{const[n,o]=B.useState(!1),[i,r]=B.useState(null),[s,l]=B.useState(""),a=async()=>{o(!0),r(null),l("Initiating full system reset...");try{l("Stopping all connections...");const d=await fetch(`${on}/reset-connection`,{method:"POST",headers:{"Content-Type":"application/json"}});if(d.ok){const p=await d.json();l("Clearing state and reconnecting..."),await new Promise(y=>setTimeout(y,2e3)),l("Verifying connection...");let w=0;for(;w<10;){try{const y=await fetch(`${on}`);if(y.ok){const u=await y.json();if(u.data_source&&u.data_source!=="DISCONNECTED"){r({type:"success",message:"System reset complete! Live data restored."}),t&&t();break}}}catch{}w++,l(`Waiting for connection... (${w}/10)`),await new Promise(y=>setTimeout(y,1e3))}w>=10&&r({type:"warning",message:"Reset complete. Connection may take a moment to establish."})}else r({type:"error",message:"Failed to reset - backend may need manual restart"})}catch{r({type:"error",message:"Network error - check if backend is running on port 8080"})}l(""),o(!1)};return e.jsxs("div",{children:[e.jsx("button",{onClick:a,disabled:n,style:{width:"100%",padding:"16px 24px",background:n?"linear-gradient(135deg, #555 0%, #333 100%)":"linear-gradient(135deg, #ff4466 0%, #cc2244 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:15,fontWeight:700,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"all 0.2s ease",boxShadow:n?"none":"0 4px 20px rgba(255,68,102,0.3)"},children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"spin 1s linear infinite"},children:""}),s||"Resetting..."]}):e.jsx(e.Fragment,{children:" FULL SYSTEM RESET"})}),i&&e.jsxs("div",{style:{marginTop:12,padding:"12px 16px",borderRadius:8,background:i.type==="success"?"rgba(0,255,136,0.15)":i.type==="warning"?"rgba(255,170,0,0.15)":"rgba(255,68,102,0.15)",border:`1px solid ${i.type==="success"?"#00ff88":i.type==="warning"?"#ffaa00":"#ff4466"}`,color:i.type==="success"?"#00ff88":i.type==="warning"?"#ffaa00":"#ff4466",fontSize:13,textAlign:"center"},children:[i.type==="success"?"":i.type==="warning"?"":""," ",i.message]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(255,68,102,0.05)",borderRadius:8,border:"1px solid rgba(255,68,102,0.1)"},children:[e.jsx("div",{style:{fontSize:11,color:"#ff6688",marginBottom:8,fontWeight:600},children:"THIS WILL:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:16,lineHeight:1.8,fontSize:11,color:"#888"},children:[e.jsx("li",{children:"Kill all active data connections"}),e.jsx("li",{children:"Clear volume, delta, and TPO counters"}),e.jsx("li",{children:"Reset session high/low tracking"}),e.jsx("li",{children:"Restart Databento live feed"}),e.jsx("li",{children:"Re-establish fresh connection"})]})]})]})},Wg=({settings:t,onSettingsChange:n,trades:o=[],dateRange:i,connectionStatus:r,onResetConnection:s})=>{var C,c;const[l,a]=B.useState(t),[d,p]=B.useState(!1),[w,y]=B.useState(!1),[u,W]=B.useState(null),L=(F,S)=>{const R=JSON.parse(JSON.stringify(l)),I=F.split(".");let de=R;for(let G=0;G<I.length-1;G++)de=de[I[G]];de[I[I.length-1]]=S,a(R),p(!0)},Z=()=>{const F=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,S=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;if(Math.abs(F-100)>.1){alert(`Entry Tier allocations must sum to 100%. Currently: ${F}%`);return}if(Math.abs(S-100)>.1){alert(`Target Tier allocations must sum to 100%. Currently: ${S}%`);return}n(l),p(!1)},Ge=()=>{a(Bp),p(!0)},f=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,m=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;return e.jsxs("div",{style:Q.settingsPanel,children:[e.jsxs("div",{style:Q.settingsHeader,children:[e.jsx("h2",{style:Q.dashboardTitle,children:" Strategy Parameters"}),e.jsx("p",{style:Q.settingsSubtitle,children:"Adjust thresholds and allocations to see how analytics change"})]}),e.jsxs("div",{style:Q.settingsGrid,children:[e.jsxs("div",{style:Q.settingsCard,children:[e.jsx("h3",{style:Q.settingsCardTitle,children:" Signal Thresholds"}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"Delta Threshold"}),e.jsx("span",{style:Q.sliderValue,children:l.deltaThreshold.toLocaleString()})]}),e.jsx("input",{type:"range",min:"-5000",max:"-1000",step:"100",value:l.deltaThreshold,onChange:F=>L("deltaThreshold",parseInt(F.target.value)),style:Q.slider}),e.jsxs("div",{style:Q.sliderTicks,children:[e.jsx("span",{children:"-5000"}),e.jsx("span",{children:"-3000"}),e.jsx("span",{children:"-1000"})]})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"Buying Imbalance %"}),e.jsxs("span",{style:Q.sliderValue,children:[l.buyingImbalancePct,"%"]})]}),e.jsx("input",{type:"range",min:"200",max:"600",step:"25",value:l.buyingImbalancePct,onChange:F=>L("buyingImbalancePct",parseInt(F.target.value)),style:Q.slider}),e.jsxs("div",{style:Q.sliderTicks,children:[e.jsx("span",{children:"200%"}),e.jsx("span",{children:"400%"}),e.jsx("span",{children:"600%"})]})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"Divergence Highlight Threshold"}),e.jsx("span",{style:Q.sliderValue,children:l.divergenceThreshold||0})]}),e.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:l.divergenceThreshold||0,onChange:F=>L("divergenceThreshold",parseInt(F.target.value)),style:Q.slider}),e.jsxs("div",{style:Q.sliderTicks,children:[e.jsx("span",{children:"0 (All)"}),e.jsx("span",{children:"100"}),e.jsx("span",{children:"200"})]}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Delta divergence amount required for white glow on candles (0 = always highlight)"})]})]}),e.jsxs("div",{style:Q.settingsCard,children:[e.jsx("h3",{style:Q.settingsCardTitle,children:" Entry Tier Allocation"}),e.jsxs("p",{style:Q.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(f-100)<.1?"#00ff88":"#ff4466"},children:[f,"%"]}),Math.abs(f-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"Tier I (Feeler)  8:45-9:20 ET"}),e.jsxs("span",{style:Q.sliderValue,children:[l.entryTiers.tier1,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier1,onChange:F=>L("entryTiers.tier1",parseInt(F.target.value)),style:Q.slider})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"Tier II (Builder)  9:35-10:00 ET"}),e.jsxs("span",{style:Q.sliderValue,children:[l.entryTiers.tier2,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier2,onChange:F=>L("entryTiers.tier2",parseInt(F.target.value)),style:Q.slider})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"Tier III (Runner)  10:15-10:45 ET"}),e.jsxs("span",{style:Q.sliderValue,children:[l.entryTiers.tier3,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier3,onChange:F=>L("entryTiers.tier3",parseInt(F.target.value)),style:Q.slider})]}),e.jsxs("div",{style:Q.tierVisual,children:[e.jsx("div",{style:{...Q.tierBar,width:`${l.entryTiers.tier1}%`,background:"#00aaff"}}),e.jsx("div",{style:{...Q.tierBar,width:`${l.entryTiers.tier2}%`,background:"#00ff88"}}),e.jsx("div",{style:{...Q.tierBar,width:`${l.entryTiers.tier3}%`,background:"#ffaa00"}})]}),e.jsxs("div",{style:Q.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00aaff"},children:""})," Tier I"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," Tier II"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," Tier III"]})]})]}),e.jsxs("div",{style:Q.settingsCard,children:[e.jsx("h3",{style:Q.settingsCardTitle,children:" Target Allocation"}),e.jsxs("p",{style:Q.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(m-100)<.1?"#00ff88":"#ff4466"},children:[m,"%"]}),Math.abs(m-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"VWAP Target (88% historical hit rate)"}),e.jsxs("span",{style:Q.sliderValue,children:[l.targetTiers.vwap,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.vwap,onChange:F=>L("targetTiers.vwap",parseInt(F.target.value)),style:Q.slider})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"IB Mid Target (75% historical hit rate)"}),e.jsxs("span",{style:Q.sliderValue,children:[l.targetTiers.ibMid,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibMid,onChange:F=>L("targetTiers.ibMid",parseInt(F.target.value)),style:Q.slider})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"IB High Target (40% historical hit rate)"}),e.jsxs("span",{style:Q.sliderValue,children:[l.targetTiers.ibHigh,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibHigh,onChange:F=>L("targetTiers.ibHigh",parseInt(F.target.value)),style:Q.slider})]}),e.jsxs("div",{style:Q.tierVisual,children:[e.jsx("div",{style:{...Q.tierBar,width:`${l.targetTiers.vwap}%`,background:"#00ff88"}}),e.jsx("div",{style:{...Q.tierBar,width:`${l.targetTiers.ibMid}%`,background:"#ffaa00"}}),e.jsx("div",{style:{...Q.tierBar,width:`${l.targetTiers.ibHigh}%`,background:"#ff4466"}})]}),e.jsxs("div",{style:Q.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," VWAP"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," IB Mid"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ff4466"},children:""})," IB High"]})]})]}),e.jsxs("div",{style:Q.settingsCard,children:[e.jsx("h3",{style:Q.settingsCardTitle,children:" Backtest Filters"}),e.jsx("p",{style:Q.allocationNote,children:"Filter trades by grade, tier, and R-multiple"}),e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{...Q.sliderLabel,fontSize:10},children:"Grade"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:["A","B","C","F"].map(F=>{var S,R;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((R=(S=l.filters)==null?void 0:S.grades)==null?void 0:R[F])??!0,onChange:I=>{const de={...l.filters};de.grades||(de.grades={A:!0,B:!0,C:!0,F:!0}),de.grades[F]=I.target.checked,L("filters",de)},style:{width:14,height:14}}),e.jsx("span",{style:{color:F==="A"?"#00ff88":F==="B"?"#ffaa00":"#ff4466",fontWeight:600,fontSize:11},children:F})]},F)})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{...Q.sliderLabel,fontSize:10},children:"Tier"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:[1,2,3].map(F=>{var S,R;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((R=(S=l.filters)==null?void 0:S.tiers)==null?void 0:R[F])??!0,onChange:I=>{const de={...l.filters};de.tiers||(de.tiers={1:!0,2:!0,3:!0}),de.tiers[F]=I.target.checked,L("filters",de)},style:{width:14,height:14}}),e.jsx("span",{style:{color:F===1?"#00aaff":F===2?"#00ff88":"#ffaa00",fontWeight:600,fontSize:11},children:F===1?"I":F===2?"II":"III"})]},F)})})]})]}),e.jsxs("div",{style:Q.sliderGroup,children:[e.jsxs("div",{style:Q.sliderHeader,children:[e.jsx("label",{style:Q.sliderLabel,children:"Minimum R-Multiple"}),e.jsxs("span",{style:Q.sliderValue,children:[(((C=l.filters)==null?void 0:C.minR)??-10).toFixed(1),"R"]})]}),e.jsx("input",{type:"range",min:"-10",max:"5",step:"0.5",value:((c=l.filters)==null?void 0:c.minR)??-10,onChange:F=>{const S={...l.filters,minR:parseFloat(F.target.value)};L("filters",S)},style:Q.slider}),e.jsxs("div",{style:Q.sliderTicks,children:[e.jsx("span",{children:"-10R (All)"}),e.jsx("span",{children:"0R"}),e.jsx("span",{children:"5R"})]})]})]})]}),e.jsxs("div",{style:Q.settingsActions,children:[e.jsx("button",{style:{...Q.actionButton,...Q.resetButton},onClick:Ge,children:"Reset to Defaults"}),e.jsx("button",{style:{...Q.actionButton,...Q.applyButton,opacity:d?1:.5,cursor:d?"pointer":"not-allowed"},onClick:Z,disabled:!d,children:d?" Apply Changes & Recalculate":"No Changes"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(138,43,226,0.1) 0%, rgba(75,0,130,0.05) 100%)",border:"2px solid rgba(138,43,226,0.3)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#9370DB",fontSize:18},children:" Project Horizon AI Optimizer"}),e.jsxs("p",{style:{color:"#888",fontSize:13,marginBottom:20},children:["Analyzes ",o.length," trades from ",i==null?void 0:i.start," to ",i==null?void 0:i.end," to find optimal parameters."]}),e.jsx("button",{style:{width:"100%",padding:"16px 32px",background:w?"linear-gradient(135deg, #666 0%, #444 100%)":"linear-gradient(135deg, #9370DB 0%, #8B5CF6 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:16,fontWeight:700,cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10},disabled:w||o.length===0,onClick:()=>{if(o.length===0){alert("No trades available to optimize. Please load trade data first.");return}y(!0),W(null),setTimeout(()=>{const F=[-1500,-2e3,-2500,-3e3,-3500,-4e3],S=[300,350,400,450,500];let R={pnl:-1/0,winRate:0,settings:null,tradesUsed:0};if(F.forEach(h=>{S.forEach(T=>{const Le=o.filter(z=>!(z.delta!==void 0&&z.delta>h||z.buyingImbalance!==void 0&&z.buyingImbalance<T));if(Le.length>0){const z=Le.reduce((ze,b)=>ze+(b.pnl||0),0),Pe=Le.filter(ze=>(ze.pnl||0)>0).length/Le.length*100;(z*(Pe/100)>R.pnl*(R.winRate/100)||z>R.pnl&&Pe>=50)&&(R={pnl:z,winRate:Pe,tradesUsed:Le.length,settings:{deltaThreshold:h,buyingImbalancePct:T}})}})}),!R.settings){const h=o.reduce((Le,z)=>Le+(z.pnl||0),0),T=o.filter(Le=>(Le.pnl||0)>0).length;R={pnl:h,winRate:T/o.length*100,tradesUsed:o.length,settings:{deltaThreshold:-2500,buyingImbalancePct:400}}}const I=o.filter(h=>(h.pnl||0)>0),de=I.length>0?I.reduce((h,T)=>h+(T.r||0),0)/I.length:1.5;let G={tier1:25,tier2:40,tier3:35},v={vwap:50,ibMid:35,ibHigh:15};de>2?(G={tier1:20,tier2:35,tier3:45},v={vwap:40,ibMid:35,ibHigh:25}):de<1&&(G={tier1:30,tier2:45,tier3:25},v={vwap:60,ibMid:30,ibHigh:10}),W({...R,entryTiers:G,targetTiers:v,avgR:de.toFixed(2),totalTrades:o.length}),y(!1)},1500)},children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"pulse 1s infinite"},children:""}),e.jsx("span",{children:"Optimizing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Run AI Optimization"})]})}),u&&e.jsxs("div",{style:{marginTop:20,padding:20,background:"rgba(0,255,136,0.05)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#00ff88",fontSize:14},children:" Optimization Complete"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"PROJECTED P&L"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.pnl>=0?"#00ff88":"#ff4466"},children:["$",u.pnl.toLocaleString()]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"WIN RATE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.winRate>=50?"#00ff88":"#ffaa00"},children:[u.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"TRADES USED"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#fff"},children:[u.tradesUsed,"/",u.totalTrades]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"AVG R-MULTIPLE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#00aaff"},children:[u.avgR,"R"]})]})]}),e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16},children:[e.jsx("strong",{children:"Recommended Settings:"}),e.jsxs("div",{style:{marginTop:8,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:["Delta Threshold: ",e.jsx("span",{style:{color:"#9370DB"},children:u.settings.deltaThreshold.toLocaleString()})]}),e.jsxs("div",{children:["Buy Imbalance: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.settings.buyingImbalancePct,"%"]})]}),e.jsxs("div",{children:["Entry Tiers: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.entryTiers.tier1,"/",u.entryTiers.tier2,"/",u.entryTiers.tier3]})]}),e.jsxs("div",{children:["Targets: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.targetTiers.vwap,"/",u.targetTiers.ibMid,"/",u.targetTiers.ibHigh]})]})]})]}),e.jsx("button",{style:{width:"100%",padding:"12px 20px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:8,color:"#000",fontSize:14,fontWeight:700,cursor:"pointer"},onClick:()=>{const F={...l,deltaThreshold:u.settings.deltaThreshold,buyingImbalancePct:u.settings.buyingImbalancePct,entryTiers:u.entryTiers,targetTiers:u.targetTiers};a(F),n(F),W(null),alert(" Optimal settings applied!")},children:" Apply Optimal Settings"})]}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:"Grid search optimization across Delta & Imbalance parameters"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16},children:" Timezone"}),e.jsx("div",{style:{padding:"14px 20px",background:"rgba(0,170,255,0.1)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:10,color:"#00aaff",fontSize:14,fontWeight:500},children:" New York (ET) - Eastern Time"}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666"},children:"All session times are displayed in Eastern Time (ET). Market hours: 6:00 PM - 5:00 PM ET (Sun-Fri)"})]}),e.jsxs("div",{style:{background:r!=null&&r.connected?"linear-gradient(135deg, rgba(0,255,136,0.05) 0%, rgba(0,200,100,0.02) 100%)":"linear-gradient(135deg, rgba(255,68,102,0.1) 0%, rgba(200,50,80,0.05) 100%)",border:`2px solid ${r!=null&&r.connected?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`,borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:r!=null&&r.connected?"#00ff88":"#ff4466",fontSize:18},children:[r!=null&&r.connected?"":""," Live Data Connection"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:20},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"STATUS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:r!=null&&r.connected?"#00ff88":"#ff4466"},children:r!=null&&r.connected?"LIVE":"OFFLINE"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"UPTIME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:r!=null&&r.connected?"#00aaff":"#888"},children:r!=null&&r.lastSuccessTime?Math.floor((Date.now()-new Date(r.lastSuccessTime).getTime())/1e3)<60?"STABLE":"RECONNECTING":"--"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"ERRORS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:(r==null?void 0:r.errorCount)>0?"#ffaa00":"#00ff88"},children:(r==null?void 0:r.errorCount)||0})]})]}),(r==null?void 0:r.lastError)&&e.jsxs("div",{style:{padding:12,background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:8,marginBottom:16},children:[e.jsx("div",{style:{fontSize:10,color:"#ff4466",marginBottom:4},children:"LAST ERROR"}),e.jsx("div",{style:{fontSize:12,color:"#ffaa00",fontFamily:"monospace",wordBreak:"break-all"},children:r.lastError}),r.reconnectAttempts>0&&e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:8},children:["Auto-reconnect attempts: ",r.reconnectAttempts]})]}),(r==null?void 0:r.lastSuccessTime)&&e.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:16},children:["Last successful data: ",new Date(r.lastSuccessTime).toLocaleTimeString()]}),e.jsx(Fg,{onResetComplete:s})]}),e.jsxs("div",{style:Q.settingsInfo,children:[e.jsx("h4",{style:Q.infoTitle,children:" How Settings Affect Analytics"}),e.jsxs("ul",{style:Q.infoList,children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Delta Threshold:"})," Trades with delta deeper than this value are considered valid setups"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Buying Imbalance %:"})," Minimum imbalance required for entry confirmation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Entry Tier Allocation:"})," How position size is distributed across the three entry phases"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Target Allocation:"})," Distribution of profit-taking across the three target levels"]})]})]})]})};B.memo(({title:t,value:n,subtitle:o,trend:i,color:r})=>{const s=i>0?"#00ff88":i<0?"#ff4466":"#888",l=r||"rgba(255,255,255,0.03)";return e.jsxs("div",{style:{...Q.statsCard,background:l},children:[e.jsx("div",{style:Q.statsTitle,children:t}),e.jsx("div",{style:Q.statsValue,children:n}),o&&e.jsx("div",{style:Q.statsSubtitle,children:o}),i!==void 0&&e.jsxs("div",{style:{...Q.statsTrend,color:s},children:[i>0?"":i<0?"":""," ",Math.abs(i).toFixed(1),"%"]})]})});const Mg=({metrics:t,settings:n})=>{var w,y;const[o,i]=B.useState(null),[r,s]=B.useState({x:0,y:0}),l=[{name:`Delta < ${((w=n.deltaThreshold)==null?void 0:w.toLocaleString())||"-2500"}`,active:(t.delta_30m||0)<=(n.deltaThreshold||-2500),critical:!0,tooltip:(t.delta_30m||0)<=(n.deltaThreshold||-2500)?` 30m delta (${(t.delta_30m||0).toLocaleString()}) is below threshold (${(n.deltaThreshold||-2500).toLocaleString()}), indicating strong selling pressure`:` 30m delta (${(t.delta_30m||0).toLocaleString()}) is above threshold (${(n.deltaThreshold||-2500).toLocaleString()}), not enough selling pressure`},{name:"Outside IB",active:(t.current_price||0)>(t.ib_high||0)&&(t.ib_high||0)>0||(t.current_price||0)<(t.ib_low||999999)&&(t.ib_low||999999)<999999,critical:!0,tooltip:(()=>{const u=t.current_price||0,W=t.ib_high||0,L=t.ib_low||999999,Z=u>W&&W>0,Ge=u<L&&L<999999;return Z?` Price ($${u.toFixed(2)}) is ABOVE IB High ($${W.toFixed(2)}), potential breakout`:Ge?` Price ($${u.toFixed(2)}) is BELOW IB Low ($${L.toFixed(2)}), potential breakdown`:` Price ($${u.toFixed(2)}) is within IB range ($${L.toFixed(2)} - $${W.toFixed(2)})`})()},{name:"At pdPOC",active:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0,critical:!1,tooltip:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0?` Price is within $2 of previous day POC ($${(t.pdpoc||0).toFixed(2)}), key support level`:` Price is $${Math.abs((t.current_price||0)-(t.pdpoc||0)).toFixed(2)} away from pdPOC ($${(t.pdpoc||0).toFixed(2)})`},{name:"Absorption",active:(t.absorption_ratio||0)>1.2,critical:!0,tooltip:(t.absorption_ratio||0)>1.2?` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)}) > 1.2, buyers absorbing selling pressure`:` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)})  1.2, not enough buying absorption`},{name:`Buy Imb. ${n.buyingImbalancePct||400}%+`,active:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400),critical:!1,tooltip:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400)?` Buying imbalance (${t.buying_imbalance_pct||0}%) meets threshold (${n.buyingImbalancePct||400}%)`:` Buying imbalance (${t.buying_imbalance_pct||0}%) below threshold (${n.buyingImbalancePct||400}%)`},{name:"Stacked Imb. 3+",active:(t.stacked_buy_imbalances||0)>=3,critical:!1,tooltip:(t.stacked_buy_imbalances||0)>=3?` ${t.stacked_buy_imbalances||0} stacked buy imbalances detected, strong buying interest`:` Only ${t.stacked_buy_imbalances||0} stacked imbalances, need 3+ for confirmation`}],a=l.filter(u=>u.active).length,d=(u,W)=>{const L=u.target.getBoundingClientRect();s({x:L.left,y:L.bottom+8}),i(W)},p=()=>{i(null)};return e.jsxs("div",{style:Q.signalMatrix,children:[e.jsxs("div",{style:Q.signalHeader,children:[e.jsx("h3",{style:Q.signalTitle,children:"Signal Matrix"}),e.jsx("div",{style:Q.signalCount,children:e.jsxs("span",{style:{color:a>=4?"#00ff88":"#ffaa00"},children:[a,"/6 Active"]})})]}),e.jsx("div",{style:Q.signalGrid,children:l.map((u,W)=>e.jsxs("div",{onMouseEnter:L=>d(L,u),onMouseLeave:p,style:{...Q.signalItem,background:u.active?"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,255,136,0.05) 100%)":"rgba(255,68,102,0.1)",borderColor:u.active?"#00ff88":"#ff4466",cursor:"help"},children:[e.jsx("div",{style:{...Q.signalIndicator,background:u.active?"#00ff88":"#ff4466",boxShadow:u.active?"0 0 10px #00ff88":"none"}}),e.jsx("span",{style:Q.signalName,children:u.name}),u.critical&&e.jsx("span",{style:Q.criticalBadge,children:"!"})]},W))}),o&&e.jsxs("div",{style:{position:"fixed",left:r.x,top:r.y,background:"rgba(20,20,30,0.98)",border:`2px solid ${o.active?"#00ff88":"#ff4466"}`,borderRadius:12,padding:"14px 18px",maxWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:o.active?"#00ff88":"#ff4466",boxShadow:o.active?"0 0 8px #00ff88":"none"}}),e.jsx("span",{style:{color:o.active?"#00ff88":"#ff4466",fontWeight:700,fontSize:14},children:o.active?"CONDITION MET":"NOT MET"}),o.critical&&e.jsx("span",{style:{background:"#ff4466",color:"#000",padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:700},children:"CRITICAL"})]}),e.jsx("div",{style:{color:"#ddd",fontSize:13,lineHeight:1.5},children:o.tooltip})]}),e.jsxs("div",{style:Q.setupStatus,children:[e.jsx("span",{style:Q.phaseLabel,children:"Current Phase:"}),e.jsx("span",{style:{...Q.phaseValue,color:(y=t.current_phase)!=null&&y.includes("IB")?"#00ff88":t.current_phase==="POST_IB"?"#ffaa00":t.current_phase==="DISCONNECTED"?"#ff4466":"#888"},children:t.current_phase})]})]})},Og=({trades:t,onDayClick:n})=>{const[o,i]=B.useState(()=>{if(t.length>0){const S=t[t.length-1],R=new Date(S.date);return{year:R.getFullYear(),month:R.getMonth()}}return{year:2025,month:11}}),[r,s]=B.useState(null),[l,a]=B.useState(null),[d,p]=B.useState({x:0,y:0}),w=B.useMemo(()=>{const S={};return t.forEach(R=>{S[R.date]||(S[R.date]=[]),S[R.date].push(R)}),S},[t]),y=(S,R)=>new Date(S,R+1,0).getDate(),u=(S,R)=>new Date(S,R,1).getDay(),W=y(o.year,o.month),L=u(o.year,o.month),Z=["January","February","March","April","May","June","July","August","September","October","November","December"],Ge=()=>{i(S=>S.month===0?{year:S.year-1,month:11}:{...S,month:S.month-1})},f=()=>{i(S=>S.month===11?{year:S.year+1,month:0}:{...S,month:S.month+1})},m=[];for(let S=0;S<L;S++)m.push({day:null,date:null});for(let S=1;S<=W;S++){const R=`${o.year}-${String(o.month+1).padStart(2,"0")}-${String(S).padStart(2,"0")}`,I=w[R]||[],de=I.reduce((G,v)=>G+v.pnl,0);m.push({day:S,date:R,trades:I,pnl:de,hasTradeData:I.length>0})}const C=(S,R)=>{if(R.hasTradeData){const I=S.target.getBoundingClientRect();p({x:I.left+I.width/2,y:I.top-10}),s(R)}},c=S=>{S.hasTradeData&&(a(S),n&&n(S))},F=B.useMemo(()=>{const S=t.filter(de=>{const G=new Date(de.date);return G.getFullYear()===o.year&&G.getMonth()===o.month}),R=S.reduce((de,G)=>de+G.pnl,0),I=S.filter(de=>de.pnl>0).length;return{trades:S.length,pnl:R,winRate:S.length>0?(I/S.length*100).toFixed(0):0}},[t,o]);return e.jsxs("div",{style:Oe.container,children:[e.jsxs("div",{style:Oe.header,children:[e.jsx("h3",{style:Oe.title,children:" Daily P&L Calendar"}),e.jsxs("div",{style:Oe.monthNav,children:[e.jsx("button",{onClick:Ge,style:Oe.navButton,children:""}),e.jsxs("span",{style:Oe.monthLabel,children:[Z[o.month]," ",o.year]}),e.jsx("button",{onClick:f,style:Oe.navButton,children:""})]}),e.jsxs("div",{style:Oe.monthStats,children:[e.jsxs("span",{children:[F.trades," trades"]}),e.jsxs("span",{style:{color:F.pnl>=0?"#00ff88":"#ff4466"},children:["$",F.pnl.toLocaleString()]}),e.jsxs("span",{style:{color:"#00ff88"},children:[F.winRate,"% WR"]})]})]}),e.jsx("div",{style:Oe.weekdays,children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>e.jsx("div",{style:Oe.weekday,children:S},S))}),e.jsx("div",{style:Oe.grid,children:m.map((S,R)=>e.jsx("div",{style:{...Oe.day,...S.day?{}:Oe.emptyDay,...S.hasTradeData?{background:S.pnl>=0?`rgba(0, 255, 136, ${Math.min(.4,Math.abs(S.pnl)/5e4+.1)})`:`rgba(255, 68, 102, ${Math.min(.4,Math.abs(S.pnl)/5e4+.1)})`,cursor:"pointer",border:`1px solid ${S.pnl>=0?"#00ff88":"#ff4466"}`}:{},...(l==null?void 0:l.date)===S.date?{border:"2px solid #fff",boxShadow:"0 0 15px rgba(0,255,136,0.5)"}:{}},onMouseEnter:I=>C(I,S),onMouseLeave:()=>s(null),onClick:()=>S.day&&c(S),children:S.day&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:Oe.dayNumber,children:S.day}),S.hasTradeData&&e.jsxs("span",{style:{...Oe.dayPnl,color:S.pnl>=0?"#00ff88":"#ff4466"},children:[S.pnl>=0?"+":"",(S.pnl/1e3).toFixed(1),"k"]}),S.trades.length>1&&e.jsx("span",{style:Oe.tradeCount,children:S.trades.length})]})},R))}),r&&r.hasTradeData&&e.jsxs("div",{style:{...Oe.tooltip,left:d.x,top:d.y,transform:"translate(-50%, -100%)"},children:[e.jsxs("div",{style:Oe.tooltipHeader,children:[r.date,"  ",r.trades.length," trade(s)"]}),r.trades.map((S,R)=>e.jsxs("div",{style:Oe.tooltipTrade,children:[e.jsxs("div",{style:Oe.tooltipRow,children:[e.jsxs("span",{children:["Grade ",S.grade,"  Tier ",S.tier]}),e.jsxs("span",{style:{color:S.pnl>=0?"#00ff88":"#ff4466"},children:["$",S.pnl.toLocaleString()]})]}),e.jsxs("div",{style:Oe.tooltipRow,children:[e.jsxs("span",{children:["Entry: $",S.entry.toFixed(2)]}),e.jsxs("span",{children:["Exit: $",S.exit.toFixed(2)]})]}),e.jsxs("div",{style:Oe.tooltipRow,children:[e.jsxs("span",{children:["Delta: ",S.delta]}),e.jsxs("span",{children:["Imb: ",S.buyingImbalance,"%"]})]}),e.jsxs("div",{style:Oe.tooltipRow,children:[e.jsxs("span",{children:["Conditions: ",S.grade==="A"?"6/6":S.grade==="B"?"5/6":"4/6"]}),e.jsxs("span",{children:[S.r>0?"+":"",S.r,"R"]})]})]},R)),e.jsx("div",{style:Oe.tooltipFooter,children:"Click for full details"})]}),l&&l.hasTradeData&&e.jsx("div",{style:Oe.modalOverlay,onClick:()=>a(null),children:e.jsxs("div",{style:Oe.modal,onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{style:Oe.modalHeader,children:[e.jsxs("h3",{children:[" Trade Details - ",l.date]}),e.jsx("button",{onClick:()=>a(null),style:Oe.closeButton,children:""})]}),e.jsx("div",{style:Oe.modalContent,children:l.trades.map((S,R)=>{var I,de,G,v,h,T,Le;return e.jsxs("div",{style:Oe.tradeDetail,children:[e.jsxs("div",{style:Oe.tradeHeader,children:[e.jsxs("span",{style:Oe.tradeBadge,children:["Trade #",S.id]}),e.jsxs("span",{style:{...Oe.tradePnl,color:S.pnl>=0?"#00ff88":"#ff4466"},children:[S.pnl>=0?"+":"","$",S.pnl.toLocaleString()]})]}),e.jsxs("div",{style:Oe.tradeSection,children:[e.jsx("h4",{children:"Entry & Exit"}),e.jsxs("div",{style:Oe.tradeGrid,children:[e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"Entry Price"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",S.entry.toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"Exit Price"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",S.exit.toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"Stop Loss"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",(S.entry-3.5).toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"R-Multiple"}),e.jsxs("span",{style:{...Oe.tradeValue,color:S.r>=0?"#00ff88":"#ff4466"},children:[S.r>0?"+":"",S.r,"R"]})]})]})]}),e.jsxs("div",{style:Oe.tradeSection,children:[e.jsx("h4",{children:"Reference Levels"}),e.jsxs("div",{style:Oe.tradeGrid,children:[e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"IB High"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",(((I=S.levels)==null?void 0:I.ib_high)||S.entry+15).toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"IB Low"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",(((de=S.levels)==null?void 0:de.ib_low)||S.entry-10).toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"IB Mid"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",(((G=S.levels)==null?void 0:G.ib_mid)||S.entry+2.5).toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"pdPOC"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",(((v=S.levels)==null?void 0:v.pdpoc)||S.entry-5).toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"VWAP"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",(((h=S.levels)==null?void 0:h.vwap)||S.entry+5).toFixed(2)]})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"pd High"}),e.jsxs("span",{style:Oe.tradeValue,children:["$",(((T=S.levels)==null?void 0:T.pd_high)||S.entry+20).toFixed(2)]})]})]})]}),e.jsxs("div",{style:Oe.tradeSection,children:[e.jsx("h4",{children:"Entry Criteria Met"}),e.jsx("div",{style:Oe.criteriaGrid,children:[{name:"Price < IB Low",met:S.entry<(((Le=S.levels)==null?void 0:Le.ib_low)||S.entry)},{name:"At pdPOC",met:S.grade!=="C"},{name:`Delta Spike (${S.delta})`,met:S.delta<-2500},{name:"Absorption Detected",met:S.grade==="A"},{name:`Buying Imbalance (${S.buyingImbalance}%)`,met:S.buyingImbalance>=400},{name:"Stacked Imbalances",met:S.grade==="A"||S.grade==="B"}].map((z,Ie)=>e.jsxs("div",{style:{...Oe.criterion,background:z.met?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",borderColor:z.met?"#00ff88":"#ff4466"},children:[e.jsx("span",{style:{...Oe.criterionIcon,color:z.met?"#00ff88":"#ff4466"},children:z.met?"":""}),e.jsx("span",{style:Oe.criterionName,children:z.name})]},Ie))}),e.jsxs("div",{style:Oe.criteriaCount,children:["Conditions Met: ",e.jsxs("strong",{children:[S.conditionsMet||(S.grade==="A"?6:S.grade==="B"?5:4),"/6"]})]})]}),e.jsxs("div",{style:Oe.tradeSection,children:[e.jsx("h4",{children:"Trade Info"}),e.jsxs("div",{style:Oe.tradeGrid,children:[e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"Grade"}),e.jsx("span",{style:{...Oe.tradeBadgeSmall,background:S.grade==="A"?"#00ff88":S.grade==="B"?"#ffaa00":"#888"},children:S.grade})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"Tier"}),e.jsx("span",{style:Oe.tradeValue,children:S.tier})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"Contracts"}),e.jsx("span",{style:Oe.tradeValue,children:S.contracts})]}),e.jsxs("div",{style:Oe.tradeItem,children:[e.jsx("span",{style:Oe.tradeLabel,children:"Exit Reason"}),e.jsx("span",{style:Oe.tradeValue,children:S.exitReason.replace("target_","").replace("_"," ").toUpperCase()})]})]})]})]},R)})}),e.jsx("div",{style:Oe.modalFooter,children:e.jsxs("span",{style:{color:l.pnl>=0?"#00ff88":"#ff4466"},children:["Day Total: ",l.pnl>=0?"+":"","$",l.pnl.toLocaleString()]})})]})})]})},Oe={container:{background:"linear-gradient(180deg, rgba(15,18,25,0.95) 0%, rgba(10,12,18,0.98) 100%)",borderRadius:16,padding:16,marginTop:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",maxWidth:420},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},title:{fontSize:14,fontWeight:600,color:"#fff",margin:0},monthNav:{display:"flex",alignItems:"center",gap:8},navButton:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:11,transition:"all 0.15s ease"},monthLabel:{fontSize:13,fontWeight:600,color:"#fff",minWidth:110,textAlign:"center"},monthStats:{display:"flex",gap:10,fontSize:11,color:"#666"},weekdays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2,marginBottom:4},weekday:{textAlign:"center",color:"#555",fontSize:9,fontWeight:600,padding:4,letterSpacing:"0.5px"},grid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2},day:{aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:6,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)",position:"relative",transition:"all 0.15s ease",minHeight:42,maxHeight:50},emptyDay:{background:"transparent",border:"none"},dayNumber:{fontSize:11,color:"#777",fontWeight:500},dayPnl:{fontSize:9,fontWeight:600,marginTop:1},tradeCount:{position:"absolute",top:2,right:2,background:"rgba(0,170,255,0.9)",color:"#fff",fontSize:8,fontWeight:700,padding:"1px 4px",borderRadius:8,lineHeight:1.2},tooltip:{position:"fixed",background:"rgba(20, 25, 35, 0.98)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:12,padding:16,zIndex:1e3,minWidth:280,maxWidth:350,boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},tooltipHeader:{fontSize:14,fontWeight:600,color:"#fff",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)"},tooltipTrade:{marginBottom:12,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.05)"},tooltipRow:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#aaa",marginBottom:4},tooltipFooter:{fontSize:11,color:"#666",textAlign:"center",marginTop:8},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:20},modal:{background:"linear-gradient(180deg, #1a1f2e 0%, #0d1117 100%)",borderRadius:16,maxWidth:700,width:"100%",maxHeight:"90vh",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 80px rgba(0,0,0,0.6)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,255,136,0.05)"},closeButton:{background:"rgba(255,255,255,0.1)",border:"none",color:"#fff",fontSize:18,width:36,height:36,borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},modalContent:{padding:24,maxHeight:"calc(90vh - 150px)",overflowY:"auto"},modalFooter:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",textAlign:"center",fontSize:16,fontWeight:600},tradeDetail:{background:"rgba(255,255,255,0.03)",borderRadius:12,padding:20,marginBottom:16,border:"1px solid rgba(255,255,255,0.05)"},tradeHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},tradeBadge:{background:"rgba(0,170,255,0.2)",color:"#00aaff",padding:"4px 12px",borderRadius:20,fontSize:12,fontWeight:600},tradePnl:{fontSize:20,fontWeight:700},tradeSection:{marginBottom:16},tradeGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginTop:8},tradeItem:{display:"flex",flexDirection:"column",gap:4},tradeLabel:{fontSize:11,color:"#666",textTransform:"uppercase"},tradeValue:{fontSize:14,color:"#fff",fontWeight:500},tradeBadgeSmall:{display:"inline-block",padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:600,color:"#000"},criteriaGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8,marginTop:8},criterion:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:8,border:"1px solid",fontSize:12},criterionIcon:{fontSize:14,fontWeight:700},criterionName:{color:"#ccc"},criteriaCount:{marginTop:12,textAlign:"center",fontSize:14,color:"#888"}},Pg=()=>{var I,de,G;const[t,n]=B.useState(null),[o,i]=B.useState(null),[r,s]=B.useState(null),[l,a]=B.useState(!0),[d,p]=B.useState(null),[w,y]=B.useState(!1),[u,W]=B.useState(!1),[L,Z]=B.useState(!1),[Ge,f]=B.useState(!1),[m,C]=B.useState(!0),{isMobile:c}=$i();B.useEffect(()=>{const v=async()=>{try{const T=`_t=${Date.now()}`,Le={cache:"no-store"},[z,Ie,Pe]=await Promise.all([fetch(`${on}/zones?${T}`,Le),fetch(`${on}/?${T}`,Le),fetch(`${on}/market-profile?${T}`,Le)]);if(z.ok&&n(await z.json()),Ie.ok){const ne=await Ie.json();console.log(" LIVE DATA FROM BACKEND:",{contract:ne.contract,day_open:ne.day_open,weekly_open:ne.weekly_open,current_price:ne.current_price}),i(ne)}Pe.ok&&s(await Pe.json()),p(null)}catch{p("Connection error")}a(!1)};v();const h=setInterval(v,1e3);return()=>clearInterval(h)},[]);const F=B.useMemo(()=>{var $e,Me;if(!o)return{phase:"-",signal:"neutral",description:"No data"};const v=(($e=o.volume_5m)==null?void 0:$e.history)||((Me=o.volume_15m)==null?void 0:Me.history)||[],h=o.current_price||0;if(v.length<3)return{phase:"-",signal:"neutral",description:"Insufficient data"};const T=v.slice(-10),Le=T.slice(-3),z=T.slice(-5),Ie={price_close:h,price_high:o.session_high||h,price_low:o.session_low||h,buy:o.buy_volume||0,sell:o.sell_volume||0,delta:o.cumulative_delta||0},Pe=Le.map(Qe=>Qe.delta||0),ne=Le.map(Qe=>(Qe.buy||0)+(Qe.sell||0)),ze=Le.map(Qe=>Qe.price_close||0),b=Pe.reduce((Qe,Ft)=>Qe+Ft,0)/3,_e=Pe[2]>Pe[1]&&Pe[1]>Pe[0]?"increasing":Pe[2]<Pe[1]&&Pe[1]<Pe[0]?"decreasing":"neutral",re=ne[2]>ne[1]?"increasing":ne[2]<ne[1]?"decreasing":"neutral",He=b<0&&re==="decreasing"&&Math.abs(Pe[2])<Math.abs(Pe[0]),rt=ze.length>=3&&ze[2]>=ze[0]-2,zt=b<-10&&rt&&ne[2]>50;let Je=!1,Xe=!1;if(z.length>=5){const Qe=z.map(j=>j.price_high||j.price_close||0),Ft=z.map(j=>j.price_low||j.price_close||0),J=Math.max(...Qe),st=Math.min(...Ft),lt=J-st,et=z.reduce((j,V)=>j+(V.price_close||0),0)/5,ie=lt<et*.005;Je=Ie.price_close>J&&ie;const g=z.slice(-3).map(j=>j.delta||0);Xe=g[0]<-50&&g[2]>50}const Ne=Le.map(Qe=>((Qe.price_high||Qe.price_close)+(Qe.price_low||Qe.price_close))/2),oe=Ne[2]>Ne[1]&&Ne[1]>Ne[0]?"up":Ne[2]<Ne[1]&&Ne[1]<Ne[0]?"down":"neutral",fe=Le.filter(Qe=>(Qe.buy||0)>(Qe.sell||0)*1.5).length,we=Ie.price_close>Ne[1]&&Ie.delta>0;let A="-",te="neutral",ke="Scanning...";oe==="up"&&fe>=2&&we?(A="C",te="bullish",ke="POC Migration Up - Strong Trend"):Je||Xe?(A="B",te="bullish",ke=Je?"Breakout Initiation":"V-Recovery"):He||zt?(A="A",te="preparing",ke=He?"Seller Exhaustion":"Absorption Detected"):oe==="down"&&(te="bearish",ke="POC Migrating Down");const at=Math.min(100,Math.max(0,50+(b||0)/5+(oe==="up"?20:oe==="down"?-20:0)+fe*10));return{phase:A,signal:te,description:ke,momentumScore:at,deltaTrend:_e,volTrend:re,exhaustion:He,absorption:zt,initiation:Je,vRecovery:Xe,pocMigration:oe,imbalances:fe}},[o]),S=({zone:v,rank:h})=>{var z,Ie,Pe,ne,ze,b,_e,re,He,rt,zt,Je,Xe,Ne,oe,fe,we,A,te,ke;const T={approaching:"#ffaa00",at_zone:"#00ff88",watching:"#888",distant:"#555"},Le=((z=v.readiness)==null?void 0:z.overall_score)>=80?"#00ff88":((Ie=v.readiness)==null?void 0:Ie.overall_score)>=60?"#ffaa00":"#ff4466";return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",border:`2px solid ${h===1?"#00ff88":"rgba(255,255,255,0.1)"}`,borderRadius:c?10:12,padding:c?12:20,marginBottom:c?12:16,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:c?"column":"row",justifyContent:"space-between",gap:c?10:0,marginBottom:c?12:16},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{background:h===1?"#00ff88":"#ffaa00",color:"#000",padding:c?"3px 10px":"4px 12px",borderRadius:20,fontSize:c?10:12,fontWeight:700},children:["#",h," PRIORITY"]}),e.jsx("h3",{style:{margin:"8px 0 0",color:"#fff",fontSize:c?15:18},children:v.name}),e.jsxs("span",{style:{color:"#888",fontSize:c?10:12},children:["Session ",v.session_number,"  ",(Pe=v.type)==null?void 0:Pe.toUpperCase()]})]}),e.jsxs("div",{style:{textAlign:c?"left":"right",display:"flex",flexDirection:c?"row":"column",alignItems:c?"center":"flex-end",gap:c?12:0},children:[e.jsx("div",{style:{color:T[v.status]||"#888",fontSize:c?11:14,fontWeight:600},children:(ne=v.status)==null?void 0:ne.toUpperCase()}),e.jsxs("div",{style:{color:"#fff",fontSize:c?18:24,fontFamily:"monospace",fontWeight:700},children:["$",(ze=v.price)==null?void 0:ze.toFixed(2)]}),e.jsxs("div",{style:{color:v.distance>0?"#00ff88":"#ff4466",fontSize:c?11:14},children:[v.distance>0?"+":"",(b=v.distance)==null?void 0:b.toFixed(2)," pts"]})]})]}),v.trade&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:c?12:16,marginBottom:c?12:16},children:[e.jsx("div",{style:{color:"#00aaff",fontSize:c?10:12,marginBottom:8,letterSpacing:1},children:"TRADE FRAMEWORK"}),e.jsxs("div",{style:{marginBottom:c?8:12},children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"ENTRY TRIGGER"}),e.jsx("div",{style:{color:"#fff",fontSize:c?11:13},children:v.trade.entry_trigger})]}),e.jsxs("div",{style:{display:"flex",flexDirection:c?"column":"row",gap:c?8:20,marginBottom:c?8:12},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"TARGET 1"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:c?11:14},children:[(_e=v.trade.target1)==null?void 0:_e.name,": $",(He=(re=v.trade.target1)==null?void 0:re.price)==null?void 0:He.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:c?10:12},children:["+",(zt=(rt=v.trade.target1)==null?void 0:rt.pts)==null?void 0:zt.toFixed(2),"pts"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"TARGET 2"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:c?11:14},children:[(Je=v.trade.target2)==null?void 0:Je.name,": $",(Ne=(Xe=v.trade.target2)==null?void 0:Xe.price)==null?void 0:Ne.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:c?10:12},children:["+",(fe=(oe=v.trade.target2)==null?void 0:oe.pts)==null?void 0:fe.toFixed(2),"pts"]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"STOP"}),e.jsxs("div",{style:{color:"#ff4466",fontSize:c?11:14},children:["$",(A=(we=v.trade.stop)==null?void 0:we.price)==null?void 0:A.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:c?10:12},children:["-",(ke=(te=v.trade.stop)==null?void 0:te.pts)==null?void 0:ke.toFixed(2),"pts"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"R:R"}),e.jsxs("div",{style:{color:"#ffaa00",fontSize:c?16:18,fontWeight:700},children:[v.trade.r_ratio,":1"]})]})]})]}),v.readiness&&e.jsxs("div",{style:{background:Le==="#00ff88"?"rgba(0,255,136,0.1)":Le==="#ffaa00"?"rgba(255,170,0,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${Le}`,borderRadius:8,padding:c?10:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx("span",{style:{color:Le,fontWeight:600,fontSize:c?11:14},children:"SETUP READINESS"}),e.jsxs("span",{style:{color:Le,fontWeight:700,fontSize:c?16:18},children:[v.readiness.overall_score,"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:c?3:4,fontSize:c?9:11},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.price_at_zone?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.price_at_zone?"":""}),e.jsx("span",{children:"Price at Zone"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.tpo_confirmation?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.tpo_confirmation?"":""}),e.jsx("span",{children:"2+ TPO"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.session_context?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.session_context?"":""}),e.jsx("span",{children:"Session OK"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.single_print_nearby?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.single_print_nearby?"":""}),e.jsx("span",{children:"Single Print"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.poc_alignment?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.poc_alignment?"":""}),e.jsx("span",{children:"POC Align"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.ib_intact?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.ib_intact?"":""}),e.jsx("span",{children:"IB Intact"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:F.signal==="bullish"?"#00ff88":F.signal==="preparing"?"#ffaa00":F.signal==="bearish"?"#ff4466":"#666"},children:[e.jsx("span",{children:F.signal==="bullish"||F.signal==="preparing"?"":""}),e.jsx("span",{children:F.phase!=="-"?`Phase ${F.phase}`:"Vol Scan"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:F.momentumScore>=60?"#00ff88":F.momentumScore>=40?"#ffaa00":"#ff4466"},children:[e.jsx("span",{children:F.momentumScore>=50?"":""}),e.jsxs("span",{children:["Momentum ",Math.round(F.momentumScore||50)]})]})]}),F.phase!=="-"&&e.jsx("div",{style:{marginTop:8,padding:"6px 8px",background:F.signal==="bullish"?"rgba(0,255,136,0.1)":F.signal==="preparing"?"rgba(255,170,0,0.1)":F.signal==="bearish"?"rgba(255,68,102,0.1)":"rgba(255,255,255,0.05)",borderRadius:6,border:`1px solid ${F.signal==="bullish"?"#00ff8840":F.signal==="preparing"?"#ffaa0040":F.signal==="bearish"?"#ff446640":"#ffffff20"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:c?9:10,fontWeight:600,color:F.signal==="bullish"?"#00ff88":F.signal==="preparing"?"#ffaa00":F.signal==="bearish"?"#ff4466":"#888"},children:["PHASE ",F.phase,": ",F.description]}),e.jsxs("span",{style:{fontSize:c?8:9,color:"#666",display:"flex",gap:8},children:[e.jsxs("span",{children:[" ",F.deltaTrend==="increasing"?"":F.deltaTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["Vol ",F.volTrend==="increasing"?"":F.volTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["POC ",F.pocMigration==="up"?"":F.pocMigration==="down"?"":""]})]})]})})]})]})},R=({zones:v,buyZones:h,currentPrice:T,compact:Le=!1})=>{const z=[...v||[]].filter(re=>re.price>T).sort((re,He)=>He.price-re.price),Ie=[...v||[]].filter(re=>re.price<=T).sort((re,He)=>He.price-re.price),Pe=new Set((h||[]).map(re=>re.id)),ne=re=>re.type==="ib_high"?"#ffaa00":re.type==="ib_low"?"#00ff88":re.type==="poc"?"#9370DB":re.type==="vah"?"#ff6b6b":re.type==="val"?"#4ECDC4":"#888",ze=re=>Pe.has(re.id)?re.status==="at_zone"?{label:"TRIGGERED",color:"#00ff88",bg:"rgba(0,255,136,0.15)"}:re.status==="approaching"?{label:"APPROACHING",color:"#ffaa00",bg:"rgba(255,170,0,0.15)"}:{label:"VALID",color:"#00aaff",bg:"rgba(0,170,255,0.1)"}:null,b=re=>{const He=(h||[]).findIndex(rt=>rt.id===re.id);return He>=0?He+1:null},_e=re=>{var Ne;const He=ze(re),rt=b(re),zt=re.price>T,Je=re.price-T,Xe=Math.abs(Je)<=2;return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 12px",margin:"2px 8px",borderRadius:6,background:Xe?"rgba(0,255,136,0.1)":He?He.bg:"transparent",borderLeft:`3px solid ${ne(re)}`,transition:"background 0.2s"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[rt&&e.jsxs("span",{style:{background:rt===1?"#00ff88":rt===2?"#ffaa00":"#00aaff",color:"#000",fontSize:9,fontWeight:700,padding:"1px 5px",borderRadius:3},children:["#",rt]}),e.jsx("span",{style:{color:"#fff",fontSize:11,fontWeight:rt?600:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:re.name})]}),He&&e.jsx("span",{style:{fontSize:9,color:He.color,fontWeight:600,letterSpacing:.5},children:He.label})]}),e.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[e.jsx("div",{style:{color:"#fff",fontSize:12,fontFamily:"monospace",fontWeight:Xe?700:400},children:(Ne=re.price)==null?void 0:Ne.toFixed(2)}),e.jsxs("div",{style:{fontSize:10,fontFamily:"monospace",color:zt?"#ff4466":"#00ff88"},children:[zt?"+":"",Je==null?void 0:Je.toFixed(1)]})]})]},re.id)};return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#888",fontSize:11,letterSpacing:1},children:"PRICE LADDER"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{color:"#ff4466",fontSize:10},children:[z.length," above"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#00ff88",fontSize:10},children:[Ie.length," below"]})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px 0"},children:[z.map(re=>_e(re)),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 12px",margin:"8px",borderRadius:8,background:"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, rgba(0,255,136,0.05) 50%, rgba(0,255,136,0.2) 100%)",border:"1px solid rgba(0,255,136,0.4)",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",left:12,display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 8px rgba(0,255,136,0.6)"}}),e.jsx("span",{style:{color:"#00ff88",fontSize:10,fontWeight:600},children:"LIVE"})]}),e.jsxs("span",{style:{color:"#00ff88",fontSize:16,fontFamily:"monospace",fontWeight:700,textShadow:"0 0 10px rgba(0,255,136,0.5)"},children:["$",T==null?void 0:T.toFixed(2)]}),e.jsx("span",{style:{position:"absolute",right:12,color:"#888",fontSize:10},children:"CURRENT"})]}),Ie.map(re=>_e(re))]}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,0.08)",display:"flex",flexWrap:"wrap",gap:8,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ffaa00",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB High"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#00ff88",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB Low"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#9370DB",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"POC"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ff6b6b",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAH"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#4ECDC4",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAL"})]})]})]})};return l?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#888"},children:"Loading zones..."}):d||!t?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#ff4466"},children:d||"No zone data available"}):e.jsxs("div",{style:{display:"flex",flexDirection:c?"column":"row",gap:c?12:20,padding:c?12:20,height:c?"auto":"100%",overflow:c?"auto":"hidden",position:"relative"},children:[m&&!c&&e.jsxs("div",{onClick:()=>C(!1),style:{position:"fixed",top:80,right:20,background:"rgba(15, 15, 25, 0.98)",borderRadius:10,border:"1px solid rgba(0, 255, 136, 0.4)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 0 15px rgba(0, 255, 136, 0.15)",zIndex:1e3,cursor:"pointer",transition:"all 0.2s ease",padding:"12px 16px"},title:"Click to show Price Ladder",children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"LIVE PRICE"}),e.jsxs("div",{style:{fontSize:22,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace"},children:["$",((I=t==null?void 0:t.current_price)==null?void 0:I.toFixed(2))||"--"]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:6},children:"Click for ladder "})]}),e.jsxs("div",{style:{flex:c?"none":m?1:2,overflowY:c?"visible":"auto"},children:[e.jsx("div",{style:{display:"flex",flexDirection:c?"column":"row",justifyContent:"space-between",alignItems:c?"flex-start":"center",gap:c?8:0,marginBottom:c?12:16},children:e.jsx("h2",{style:{color:"#fff",margin:0,fontSize:c?16:24},children:c?"10pt Buy Setup":"Zone Participation - 10pt Buy Setup"})}),(()=>{var rt,zt,Je,Xe,Ne;const v=(t==null?void 0:t.current_price)||(o==null?void 0:o.current_price)||0;t!=null&&t.all_zones;const h={monthly:{bias:"NEUTRAL",color:"#ffaa00"},weekly:{bias:"NEUTRAL",color:"#ffaa00"},dayOpen:{position:"--",diff:0,color:"#888"},weeklyOpen:{position:"--",diff:0,color:"#888"},daily:{ib:{level:"--",color:"#888"},pvaLocation:{status:"--",detail:"",color:"#888"},opening:{type:"--",color:"#888"}},critical:{abOverlap:{pct:"--",color:"#888"},buyingTail:!1,sellingTail:!1,tpoBias:{direction:"--",color:"#888"}}};if(o){const oe=o.pd_high||0,fe=o.pd_low||0,we=(oe+fe)/2,A=o.week_high||0,te=o.week_low||0,ke=o.weekly_open||0,at=A-te;let $e=0,Me=[];if(A>0&&te>0&&at>0){const g=(v-te)/at*100;if(g>=90?($e+=40,Me.push("Near Week High")):g>=70?($e+=30,Me.push("Upper Week Range")):g<=10?($e-=40,Me.push("Near Week Low")):g<=30?($e-=30,Me.push("Lower Week Range")):Me.push("Mid Week Range"),ke>0){const j=v-ke;j<-at*.1?($e+=35,Me.push("Below Weekly Open")):j>at*.1?$e-=25:$e+=10}v>oe?($e+=25,Me.push("Above pd High")):v>we?$e+=15:v<fe?($e-=25,Me.push("Below pd Low")):v<we&&($e-=15),$e>=60?h.weekly={bias:"VERY BULLISH",color:"#00ff88",score:$e,factors:Me}:$e>=25?h.weekly={bias:"BULLISH",color:"#88ff88",score:$e,factors:Me}:$e<=-60?h.weekly={bias:"VERY BEARISH",color:"#ff4466",score:$e,factors:Me}:$e<=-25?h.weekly={bias:"BEARISH",color:"#ff8888",score:$e,factors:Me}:h.weekly={bias:"NEUTRAL",color:"#ffaa00",score:$e,factors:Me}}else v>oe?h.weekly={bias:"BULLISH",color:"#88ff88",factors:["Above pd High"]}:v<fe&&(h.weekly={bias:"BEARISH",color:"#ff8888",factors:["Below pd Low"]});const Qe=o.rolling_20d_high||0,Ft=o.rolling_20d_low||0,J=Qe-Ft,st=(Qe+Ft)/2;let lt=0,et=[];if(Qe>0&&Ft>0&&J>0){const g=(v-Ft)/J*100;g>=90?(lt+=50,et.push("Near 20d High")):g>=75?(lt+=35,et.push("Upper 20d Range")):g>=60?lt+=20:g<=10?(lt-=50,et.push("Near 20d Low")):g<=25?(lt-=35,et.push("Lower 20d Range")):g<=40&&(lt-=20),A>0&&te>0&&(A>=Qe*.998?(lt+=30,et.push("Week at 20d High")):te<=Ft*1.002?(lt-=30,et.push("Week at 20d Low")):A>st?lt+=15:te<st&&(lt-=15)),ke>0&&(v>ke&&ke>Ft+J*.4?(lt+=20,et.push("Uptrend confirmed")):v<ke&&ke<Qe-J*.4&&(lt-=20,et.push("Downtrend confirmed"))),lt>=50?h.monthly={bias:"VERY BULLISH",color:"#00ff88",score:lt,factors:et}:lt>=20?h.monthly={bias:"BULLISH",color:"#88ff88",score:lt,factors:et}:lt<=-50?h.monthly={bias:"VERY BEARISH",color:"#ff4466",score:lt,factors:et}:lt<=-20?h.monthly={bias:"BEARISH",color:"#ff8888",score:lt,factors:et}:h.monthly={bias:"NEUTRAL",color:"#ffaa00",score:lt,factors:et}}else if(A>0&&te>0){const g=(v-te)/at*100;g>=80?h.monthly={bias:"BULLISH",color:"#88ff88",factors:["Near Week High"]}:g<=20&&(h.monthly={bias:"BEARISH",color:"#ff8888",factors:["Near Week Low"]})}const ie=o.day_open||0;if(ie>0){const g=v-ie;g<-2?h.dayOpen={position:"BELOW",diff:g,price:ie,color:"#00ff88",bias:"BULLISH"}:g>2?h.dayOpen={position:"ABOVE",diff:g,price:ie,color:"#ff4466",bias:"BEARISH"}:h.dayOpen={position:"AT",diff:g,price:ie,color:"#ffaa00",bias:"NEUTRAL"}}if(ke>0){const g=v-ke;g<-5?h.weeklyOpen={position:"BELOW",diff:g,price:ke,color:"#00ff88",bias:"BULLISH"}:g>5?h.weeklyOpen={position:"ABOVE",diff:g,price:ke,color:"#ff4466",bias:"BEARISH"}:h.weeklyOpen={position:"AT",diff:g,price:ke,color:"#ffaa00",bias:"NEUTRAL"}}}if(r){const oe=r.ib_range||0,fe=r.avg_daily_range||50,we=fe>0?oe/fe*100:0;oe===0||!r.ib_complete?h.daily.ib={level:"FORMING",color:"#888",pct:"--"}:we<35?h.daily.ib={level:"LOW",color:"#00ff88",pct:we.toFixed(0)}:we<=75?h.daily.ib={level:"MEDIUM",color:"#ffaa00",pct:we.toFixed(0)}:h.daily.ib={level:"HIGH",color:"#ff4466",pct:we.toFixed(0)}}if(o&&r){const oe=o.pd_high||0,fe=o.pd_low||0,we=oe-fe,A=fe+we*.85,te=fe+we*.15,ke=o.day_open||v,at=o.session_open||ke;if(v>=te&&v<=A){const $e=at>=te&&at<=A;h.daily.pvaLocation={status:"IN",detail:$e?"Accepted":"Returned",color:"#00aaff"}}else if(v>A){const $e=v>A+5;h.daily.pvaLocation={status:"OUT",detail:$e?"Accepted Above":"Testing VAH",color:$e?"#00ff88":"#ffaa00"}}else{const $e=v<te-5;h.daily.pvaLocation={status:"OUT",detail:$e?"Accepted Below":"Testing VAL",color:$e?"#ff4466":"#ffaa00"}}(Math.abs(v-A)<=3||Math.abs(v-te)<=3)&&(h.daily.pvaLocation.status="DYNAMIC",h.daily.pvaLocation.color="#ffaa00")}if(r!=null&&r.open_type){const oe=((rt=r.open_type)==null?void 0:rt.toUpperCase())||"DEVELOPING",fe={OD:{name:"OD",full:"Open Drive",color:"#00ff88"},OPEN_DRIVE:{name:"OD",full:"Open Drive",color:"#00ff88"},OTD:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},OPEN_TEST_DRIVE:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},ORR:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OPEN_REJECTION_REVERSE:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OA:{name:"OA",full:"Open Auction",color:"#ffaa00"},OPEN_AUCTION:{name:"OA",full:"Open Auction",color:"#ffaa00"},DEVELOPING:{name:"DEV",full:"Developing",color:"#888"}},we=fe[oe]||fe.DEVELOPING;h.daily.opening={type:we.name,full:we.full,color:we.color}}if((r==null?void 0:r.ab_overlap)!==void 0&&(r==null?void 0:r.ab_overlap)!==null){const oe=r.ab_overlap;oe<33?h.critical.abOverlap={pct:oe.toFixed(0),color:"#00ff88",level:"<33%"}:oe<=50?h.critical.abOverlap={pct:oe.toFixed(0),color:"#ffaa00",level:"33-50%"}:h.critical.abOverlap={pct:oe.toFixed(0),color:"#ff4466",level:">50%"}}if(r){const oe=r.single_prints_count||0,fe=(o==null?void 0:o.day_high)||0,we=(o==null?void 0:o.day_low)||0,A=r.poc||v;oe>0&&(A>(fe+we)/2?h.critical.buyingTail=!0:h.critical.sellingTail=!0)}if(r){const oe=r.poc||0,fe=r.vah||0,we=r.val||0,A=(fe+we)/2;oe>A+2?h.critical.tpoBias={direction:"BULLISH",color:"#00ff88"}:oe<A-2?h.critical.tpoBias={direction:"BEARISH",color:"#ff4466"}:h.critical.tpoBias={direction:"NEUTRAL",color:"#ffaa00"}}const T={rank1:{name:"MACRO",points:3,factors:[],total:0,direction:"NEUTRAL"},rank2:{name:"VOLUME",points:2,factors:[],total:0,direction:"NEUTRAL"},rank3:{name:"STRUCTURE",points:2,factors:[],total:0,direction:"NEUTRAL"},rank4:{name:"TIMING",points:1,factors:[],total:0,direction:"NEUTRAL"},conflicts:[],totalScore:0,confidence:"LOW",positionSize:"25%",direction:"NEUTRAL"};if(o){const oe=o.week_high||0,fe=o.week_low||0,we=oe-fe;if(we>0){const A=fe+we*.7,te=fe+we*.3;v>A?(T.rank1.factors.push({name:"Weekly VA",signal:"LONG",reason:"Price above weekly VAH",pts:3}),T.rank1.total+=3):v<te?(T.rank1.factors.push({name:"Weekly VA",signal:"SHORT",reason:"Price below weekly VAL",pts:-3}),T.rank1.total-=3):T.rank1.factors.push({name:"Weekly VA",signal:"NEUTRAL",reason:"Price inside weekly VA",pts:0})}}if(o){const oe=o.rolling_20d_high||0,fe=o.rolling_20d_low||0,we=oe-fe;if(we>0){const A=fe+we*.75,te=fe+we*.25;v>A?(T.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"LONG",reason:"At multi-day highs (breakout zone)",pts:3}),T.rank1.total+=3):v<te?(T.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"SHORT",reason:"At multi-day lows (breakdown zone)",pts:-3}),T.rank1.total-=3):T.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"NEUTRAL",reason:"Mid-range (fair value)",pts:0})}}if((o==null?void 0:o.weekly_open)>0){const oe=o.weekly_open,fe=v-oe;fe>10?(T.rank1.factors.push({name:"Composite VPOC",signal:"LONG",reason:`+${fe.toFixed(0)}pts above weekly open`,pts:3}),T.rank1.total+=3):fe<-10?(T.rank1.factors.push({name:"Composite VPOC",signal:"SHORT",reason:`${fe.toFixed(0)}pts below weekly open`,pts:-3}),T.rank1.total-=3):T.rank1.factors.push({name:"Composite VPOC",signal:"NEUTRAL",reason:"Near weekly open",pts:0})}if(T.rank1.direction=T.rank1.total>0?"LONG":T.rank1.total<0?"SHORT":"NEUTRAL",o){const oe=o.day_open||0,fe=o.day_high||0,we=o.day_low||0;if(oe>0){const A=fe-oe,te=oe-we;A>te*1.5?(T.rank2.factors.push({name:"Delta Direction",signal:"LONG",reason:"Buyers dominating (up move > down)",pts:2}),T.rank2.total+=2):te>A*1.5?(T.rank2.factors.push({name:"Delta Direction",signal:"SHORT",reason:"Sellers dominating (down move > up)",pts:-2}),T.rank2.total-=2):T.rank2.factors.push({name:"Delta Direction",signal:"NEUTRAL",reason:"Balanced volume",pts:0})}}if(r){const oe=r.poc||0,fe=r.vah||0,we=r.val||0;if(oe>0&&fe>0&&we>0){const A=fe-we,te=(oe-we)/A;te>.65?(T.rank2.factors.push({name:"Daily HVN",signal:"LONG",reason:"POC in upper VA (HVN above)",pts:2}),T.rank2.total+=2):te<.35?(T.rank2.factors.push({name:"Daily HVN",signal:"SHORT",reason:"POC in lower VA (HVN below)",pts:-2}),T.rank2.total-=2):T.rank2.factors.push({name:"Daily HVN",signal:"NEUTRAL",reason:"POC centered",pts:0})}}if(r!=null&&r.vpoc&&(r!=null&&r.poc)){const oe=r.vpoc,fe=r.poc;if(Math.abs(oe-fe)<3){const A=oe>v;T.rank2.factors.push({name:"VPOC/POC Align",signal:A?"SHORT":"LONG",reason:`VPOC & POC aligned at ${oe.toFixed(0)} (strong ${A?"resistance":"support"})`,pts:A?-2:2}),T.rank2.total+=A?-2:2}else r.vpoc>r.poc?(T.rank2.factors.push({name:"VPOC/POC Align",signal:"LONG",reason:"VPOC above POC (volume leads up)",pts:2}),T.rank2.total+=2):(T.rank2.factors.push({name:"VPOC/POC Align",signal:"SHORT",reason:"VPOC below POC (volume leads down)",pts:-2}),T.rank2.total-=2)}else if(r!=null&&r.poc){const oe=r.poc>v?"SHORT":"LONG";T.rank2.factors.push({name:"POC Location",signal:oe,reason:`POC at ${(zt=r.poc)==null?void 0:zt.toFixed(0)} (${oe==="LONG"?"support":"resistance"})`,pts:oe==="LONG"?1:-1}),T.rank2.total+=oe==="LONG"?1:-1}if(T.rank2.direction=T.rank2.total>0?"LONG":T.rank2.total<0?"SHORT":"NEUTRAL",r&&(r.single_prints_count||0)>0&&(h.critical.buyingTail&&(T.rank3.factors.push({name:"Buying Tail",signal:"LONG",reason:"Single prints at lows (buyer aggression)",pts:2}),T.rank3.total+=2),h.critical.sellingTail&&(T.rank3.factors.push({name:"Selling Tail",signal:"SHORT",reason:"Single prints at highs (seller aggression)",pts:-2}),T.rank3.total-=2)),r){const oe=r.poc||0,fe=r.vah||0,we=r.val||0,A=(o==null?void 0:o.day_high)||fe,te=(o==null?void 0:o.day_low)||we,ke=A-te;if(ke>0){const at=A-fe,$e=we-te,Me=fe-we,Qe=(oe-te)/ke;let Ft="D",J="NEUTRAL",st="Balanced D-shape profile",lt=0;Qe<.4&&at>Me*.3?(Ft="P",J="LONG",st="P-shape (accumulation, buyers loading)",lt=2):Qe>.6&&$e>Me*.3?(Ft="b",J="SHORT",st="b-shape (distribution, sellers unloading)",lt=-2):r.double_distribution&&(Ft="B",J="NEUTRAL",st="B-shape (double distribution, range bound)",lt=0),T.rank3.factors.push({name:`Profile Shape (${Ft})`,signal:J,reason:st,pts:lt}),T.rank3.total+=lt}}if(r&&o){const oe=r.ib_high||0,fe=r.ib_low||0,we=o.day_high||0,A=o.day_low||0;if(oe>0&&fe>0){const te=we>oe+2,ke=A<fe-2;te&&!ke?(T.rank3.factors.push({name:"Range Extension",signal:"LONG",reason:"IB broken to upside",pts:2}),T.rank3.total+=2):ke&&!te?(T.rank3.factors.push({name:"Range Extension",signal:"SHORT",reason:"IB broken to downside",pts:-2}),T.rank3.total-=2):te&&ke?T.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"IB broken both ways",pts:0}):T.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"Inside IB",pts:0})}}if(T.rank3.direction=T.rank3.total>0?"LONG":T.rank3.total<0?"SHORT":"NEUTRAL",r!=null&&r.open_type){const oe=((Je=r.open_type)==null?void 0:Je.toUpperCase())||"",fe=r.open_direction||"";if(oe.includes("OD")||oe.includes("DRIVE")){const we=fe==="up"?1:fe==="down"?-1:0;T.rank4.factors.push({name:"Open Type",signal:we>0?"LONG":we<0?"SHORT":"NEUTRAL",reason:`Open Drive ${fe||""}`,pts:we}),T.rank4.total+=we}else if(oe.includes("ORR")||oe.includes("REJECTION")){const we=fe==="up"?-1:fe==="down"?1:0;T.rank4.factors.push({name:"Open Type",signal:we>0?"LONG":we<0?"SHORT":"NEUTRAL",reason:"Open Rejection Reverse",pts:we}),T.rank4.total+=we}else if(oe.includes("OTD")||oe.includes("TEST")){const we=fe==="up"?1:fe==="down"?-1:0;T.rank4.factors.push({name:"Open Type",signal:we>0?"LONG":we<0?"SHORT":"NEUTRAL",reason:`Open Test Drive ${fe||""}`,pts:we*.5}),T.rank4.total+=we*.5}}if(h.daily.ib.level!=="--"&&h.daily.ib.level!=="FORMING")if(h.daily.ib.level==="LOW"){const oe=T.rank3.direction!=="NEUTRAL"?T.rank3.direction:T.rank2.direction!=="NEUTRAL"?T.rank2.direction:"NEUTRAL";oe==="LONG"?(T.rank4.factors.push({name:"IB Width",signal:"LONG",reason:"Low IB + uptrend = expansion up",pts:1}),T.rank4.total+=1):oe==="SHORT"?(T.rank4.factors.push({name:"IB Width",signal:"SHORT",reason:"Low IB + downtrend = expansion down",pts:-1}),T.rank4.total-=1):T.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"Low IB (breakout pending)",pts:0})}else h.daily.ib.level==="HIGH"&&T.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"High IB (rotational day)",pts:0});if((r==null?void 0:r.single_prints_count)>0){const oe=r.single_print_level||0;oe>v+5?(T.rank4.factors.push({name:"Single Prints",signal:"LONG",reason:`Singles above at ${oe.toFixed(0)} (target)`,pts:1}),T.rank4.total+=1):oe<v-5&&(T.rank4.factors.push({name:"Single Prints",signal:"SHORT",reason:`Singles below at ${oe.toFixed(0)} (target)`,pts:-1}),T.rank4.total-=1)}T.rank4.direction=T.rank4.total>0?"LONG":T.rank4.total<0?"SHORT":"NEUTRAL";const Le=[{rank:1,name:"MACRO",dir:T.rank1.direction,total:T.rank1.total},{rank:2,name:"VOLUME",dir:T.rank2.direction,total:T.rank2.total},{rank:3,name:"STRUCTURE",dir:T.rank3.direction,total:T.rank3.total},{rank:4,name:"TIMING",dir:T.rank4.direction,total:T.rank4.total}].filter(oe=>oe.dir!=="NEUTRAL");for(let oe=0;oe<Le.length;oe++)for(let fe=oe+1;fe<Le.length;fe++)Le[oe].dir!==Le[fe].dir&&T.conflicts.push({higher:Le[oe],lower:Le[fe],resolution:`${Le[oe].name} (Rank ${Le[oe].rank}) overrides ${Le[fe].name}`});T.totalScore=T.rank1.total+T.rank2.total+T.rank3.total+T.rank4.total;const z=Math.abs(T.totalScore);z>=12?(T.confidence="VERY HIGH",T.positionSize="100%+",T.confidenceColor="#00ff88"):z>=8?(T.confidence="HIGH",T.positionSize="100%",T.confidenceColor="#88ff88"):z>=5?(T.confidence="MED-HIGH",T.positionSize="75%",T.confidenceColor="#ffdd00"):z>=2?(T.confidence="MEDIUM",T.positionSize="50%",T.confidenceColor="#ffaa00"):z>=0?(T.confidence="LOW",T.positionSize="25% or SKIP",T.confidenceColor="#ff8844"):(T.confidence="AVOID",T.positionSize="NO TRADE",T.confidenceColor="#ff4466"),T.direction=T.totalScore>0?"LONG":T.totalScore<0?"SHORT":"NEUTRAL";let Ie=0,Pe=0;if(h.monthly.bias.includes("BULLISH")&&(Ie+=h.monthly.bias.includes("VERY")?15:10),h.monthly.bias.includes("BEARISH")&&(Pe+=h.monthly.bias.includes("VERY")?15:10),h.weekly.bias.includes("BULLISH")&&(Ie+=h.weekly.bias.includes("VERY")?15:10),h.weekly.bias.includes("BEARISH")&&(Pe+=h.weekly.bias.includes("VERY")?15:10),h.dayOpen.bias==="BULLISH"&&(Ie+=10),h.dayOpen.bias==="BEARISH"&&(Pe+=10),h.weeklyOpen.bias==="BULLISH"&&(Ie+=12),h.weeklyOpen.bias==="BEARISH"&&(Pe+=12),h.daily.ib.level==="LOW"&&(Ie+=8),h.daily.ib.level==="HIGH"&&(Pe+=5),(Xe=h.daily.pvaLocation.detail)!=null&&Xe.includes("Above")&&(Ie+=10),(Ne=h.daily.pvaLocation.detail)!=null&&Ne.includes("Below")&&(Pe+=10),h.daily.pvaLocation.status==="IN"&&(Ie+=3,Pe+=3),h.daily.opening.type==="OD"){const oe=r==null?void 0:r.open_direction;oe==="up"?Ie+=12:oe==="down"&&(Pe+=12)}if(h.daily.opening.type==="ORR"){const oe=r==null?void 0:r.open_direction;oe==="up"?Pe+=8:oe==="down"&&(Ie+=8)}if(h.critical.abOverlap.pct!=="--"){const oe=parseFloat(h.critical.abOverlap.pct);oe<33&&(Ie+=5),oe>50&&(Pe+=3)}h.critical.buyingTail&&(Ie+=8),h.critical.sellingTail&&(Pe+=8),h.critical.tpoBias.direction==="BULLISH"&&(Ie+=7),h.critical.tpoBias.direction==="BEARISH"&&(Pe+=7);const ne=Ie+Pe,ze=ne>0?Math.round(Ie/ne*100):50,b=100-ze;let _e="NEUTRAL",re="#ffaa00",He=50;return ze>=65?(_e=ze>=80?"VERY BULLISH":"BULLISH",re=ze>=80?"#00ff88":"#88ff88",He=ze):b>=65?(_e=b>=80?"VERY BEARISH":"BEARISH",re=b>=80?"#ff4466":"#ff8888",He=b):He=Math.max(ze,b),e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:c?10:12,border:`2px solid ${re}40`,padding:c?12:16,marginBottom:c?12:16},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#888",letterSpacing:1,marginBottom:4},children:"SIGNAL ENGINE"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:c?18:22,fontWeight:700,color:re},children:_e}),e.jsxs("span",{style:{fontSize:12,padding:"3px 8px",background:`${re}25`,borderRadius:4,color:re,fontWeight:600},children:[He,"%"]})]})]})}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden",marginBottom:16},children:[e.jsxs("div",{onClick:()=>f(!Ge),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:c?12:16,cursor:"pointer",background:`linear-gradient(135deg, ${T.confidenceColor}12 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:Ge?`1px solid ${T.confidenceColor}30`:"none",transition:"all 0.2s ease"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO HTF ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:c?20:26,fontWeight:800,color:T.direction==="LONG"?"#00ff88":T.direction==="SHORT"?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:[T.totalScore>0?"+":"",T.totalScore]}),e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:T.direction==="LONG"?"#00ff88":T.direction==="SHORT"?"#ff4466":"#ffaa00"},children:T.direction})]})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:T.confidenceColor,marginBottom:2},children:T.confidence}),e.jsxs("div",{style:{fontSize:10,padding:"3px 8px",background:`${T.confidenceColor}25`,borderRadius:4,color:T.confidenceColor,fontWeight:600},children:["Size: ",T.positionSize]})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:Ge?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]})]}),Ge&&e.jsxs("div",{style:{padding:c?12:16},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:c?"1fr 1fr":"1fr 1fr 1fr 1fr",gap:8,marginBottom:12},children:[T.rank1,T.rank2,T.rank3,T.rank4].map((oe,fe)=>{var ke,at;const we=fe+1,A=oe.direction==="LONG"?"#00ff88":oe.direction==="SHORT"?"#ff4466":"#666",te=Math.min(100,Math.abs(oe.total)*(we===1?15:we<=3?20:30));return e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"8px 10px",borderLeft:`3px solid ${A}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsxs("span",{style:{fontSize:8,color:"#888",letterSpacing:.5},children:["R",we," ",oe.name]}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:A,fontFamily:"monospace"},children:[oe.total>0?"+":"",oe.total]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${te}%`,background:A,borderRadius:2}})}),oe.factors.length>0&&e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(ke=oe.factors[0])==null?void 0:ke.name,": ",(at=oe.factors[0])==null?void 0:at.signal]})]},oe.name)})}),T.conflicts.length>0&&e.jsxs("details",{style:{padding:"8px 10px",background:"rgba(255,170,0,0.15)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:[e.jsxs("summary",{style:{cursor:"pointer",userSelect:"none",listStyle:"none"},children:[e.jsx("span",{style:{fontWeight:600},children:"Conflict: "}),T.conflicts[0].resolution,T.conflicts.length>1&&e.jsxs("span",{style:{marginLeft:8,opacity:.8},children:["(+",T.conflicts.length-1," more) "]})]}),T.conflicts.length>1&&e.jsx("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid rgba(255,170,0,0.3)"},children:T.conflicts.slice(1).map((oe,fe)=>e.jsxs("div",{style:{marginBottom:4,paddingLeft:8},children:[" ",oe.resolution]},fe))})]})]})]}),(()=>{var g,j,V,M;const oe=(N,q,ce)=>Math.min(Math.max(N,q),ce),fe=new Date,we=new Date(fe.toLocaleString("en-US",{timeZone:"America/New_York"})),A=we.getHours(),te=we.getMinutes(),at=A*100+te<820,$e=N=>N>=75?{score:4,label:"EXTREMELY BULLISH",color:"#00ff88"}:N>=50?{score:3,label:"VERY BULLISH",color:"#88ff88"}:N>=25?{score:1,label:"CHECK ENTRY",color:"#ffaa00"}:{score:0,label:"WAIT",color:"#ff4466"},Me=(o==null?void 0:o.day_high)||0,Qe=(o==null?void 0:o.day_low)||0,Ft=Me-Qe,J=at?v:(r==null?void 0:r.ib_open)||(o==null?void 0:o.day_open)||v,st=Ft>0?oe((Me-J)/Ft*100,0,100):50,lt=$e(st),et=lt.label,ie=lt.color;return`${lt.score}`,e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3,background:"rgba(20,20,28,0.6)",borderRadius:12,padding:12,border:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${h.monthly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${h.monthly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"MONTHLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.monthly.color,padding:"5px 10px",background:`${h.monthly.color}20`,borderRadius:5,display:"inline-block"},children:h.monthly.bias}),h.monthly.factors&&h.monthly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:h.monthly.factors[0]})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${h.weekly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${h.weekly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"WEEKLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.weekly.color,padding:"5px 10px",background:`${h.weekly.color}20`,borderRadius:5,display:"inline-block"},children:h.weekly.bias}),h.weekly.factors&&h.weekly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:h.weekly.factors[0]})]}),e.jsxs("div",{onClick:()=>y(!w),style:{background:`linear-gradient(135deg, ${ie}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${w?ie:ie+"30"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:4,marginBottom:6},children:[e.jsx("span",{style:{fontSize:9,color:"#888",letterSpacing:1},children:"TPO DAILY"}),e.jsx("span",{style:{fontSize:9,color:"#666",transform:w?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.critical.tpoBias.color||ie,padding:"5px 10px",background:`${ie}20`,borderRadius:5,display:"inline-block"},children:h.critical.tpoBias.direction||"NEUTRAL"}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:"IB, PVA, Opening"})]})]})}),e.jsxs("div",{onClick:()=>Z(!L),style:{flex:1,background:"linear-gradient(135deg, rgba(0,170,255,0.15) 0%, rgba(0,0,0,0.4) 100%)",borderRadius:12,padding:16,border:`1px solid ${L?"#00aaff":"rgba(0,170,255,0.3)"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8},children:[e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1},children:"INTRADAY"}),e.jsx("span",{style:{fontSize:12,color:"#666",transform:L?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",padding:"6px 14px",background:"rgba(0,170,255,0.2)",borderRadius:6,marginBottom:8},children:et}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:[st.toFixed(0),"% from high"]})]})]}),(w||L)&&e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3},children:w&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(0,170,255,0.3)",padding:12},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:h.dayOpen.bias!=="NEUTRAL"?`1px solid ${h.dayOpen.color}40`:"none"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"DAY OPEN (18:00 ET)"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.dayOpen.color},children:h.dayOpen.position}),h.dayOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(g=h.dayOpen.price)==null?void 0:g.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:h.dayOpen.color},children:["(",h.dayOpen.diff>0?"+":"",(j=h.dayOpen.diff)==null?void 0:j.toFixed(1),"pts)"]})]})]}),h.dayOpen.bias&&h.dayOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:h.dayOpen.color,marginTop:4},children:h.dayOpen.bias==="BULLISH"?"Buying below open":"Selling above open"})]}),e.jsxs("div",{style:{background:h.weeklyOpen.position==="--"?"rgba(50,50,60,0.5)":"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:h.weeklyOpen.bias&&h.weeklyOpen.bias!=="NEUTRAL"?`1px solid ${h.weeklyOpen.color}40`:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"WEEKLY OPEN (Sun 18:00)"}),h.weeklyOpen.position==="--"?e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:c?13:14,fontWeight:600,color:"#666"},children:"N/A"}),e.jsx("div",{style:{fontSize:9,color:"#555",marginTop:4},children:"Not tracked yet - sets on Sunday 18:00 ET"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.weeklyOpen.color},children:h.weeklyOpen.position}),h.weeklyOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(V=h.weeklyOpen.price)==null?void 0:V.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:h.weeklyOpen.color},children:["(",h.weeklyOpen.diff>0?"+":"",(M=h.weeklyOpen.diff)==null?void 0:M.toFixed(1),"pts)"]})]})]}),h.weeklyOpen.bias&&h.weeklyOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:h.weeklyOpen.color,marginTop:4},children:h.weeklyOpen.bias==="BULLISH"?"Buying below weekly open":"Selling above weekly open"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:c?"1fr 1fr":"1fr 1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"INITIAL BALANCE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.daily.ib.color},children:h.daily.ib.level}),h.daily.ib.pct!=="--"&&e.jsxs("span",{style:{fontSize:11,color:"#666"},children:[h.daily.ib.pct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"LOCATION wrt PVA"}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.daily.pvaLocation.color},children:h.daily.pvaLocation.status}),h.daily.pvaLocation.detail&&e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:2},children:h.daily.pvaLocation.detail})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",gridColumn:c?"1 / -1":"auto"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"OPENING TYPE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.daily.opening.color},children:h.daily.opening.type}),h.daily.opening.full&&e.jsx("span",{style:{fontSize:10,color:"#666"},children:h.daily.opening.full})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"AB OVERLAP"}),e.jsx("div",{style:{fontSize:c?14:16,fontWeight:700,color:h.critical.abOverlap.color},children:h.critical.abOverlap.pct!=="--"?`${h.critical.abOverlap.pct}%`:"--"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TAIL/EXCESS"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:h.critical.buyingTail?"#00ff8830":"rgba(255,255,255,0.05)",color:h.critical.buyingTail?"#00ff88":"#555"},children:"BUY"}),e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:h.critical.sellingTail?"#ff446630":"rgba(255,255,255,0.05)",color:h.critical.sellingTail?"#ff4466":"#555"},children:"SELL"})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO BIAS"}),e.jsx("div",{style:{fontSize:c?14:16,fontWeight:700,color:h.critical.tpoBias.color},children:h.critical.tpoBias.direction})]})]})]})}),e.jsx("div",{style:{flex:1},children:L&&(()=>{const N=new Date,q=new Date(N.toLocaleString("en-US",{timeZone:"America/New_York"})),ce=q.getHours(),Y=q.getMinutes(),ve=ce*100+Y,Tt=820,ut=930,Ct=ve<Tt,_t=ve>=Tt&&ve<ut,mn=ve>=ut,Qt=(o==null?void 0:o.current_price)||(t==null?void 0:t.current_price)||0;o!=null&&o.day_high,o!=null&&o.day_low,o!=null&&o.day_open;const Zt=(r==null?void 0:r.ib_high)||0,qt=(r==null?void 0:r.ib_low)||0,rn=(r==null?void 0:r.ib_range)||Zt-qt||0,en=(r==null?void 0:r.ib_complete)||mn,bn=(r==null?void 0:r.vwap)||(o==null?void 0:o.vwap)||0,Cn=bn>0?Qt-bn:0,ro=Cn>=0,$n=(r==null?void 0:r.rth_vwap)||(o==null?void 0:o.rth_vwap)||0,Vt=$n>0?Qt-$n:0,un=Vt>=0,so=(o==null?void 0:o.endedSessions)||(o==null?void 0:o.ended_sessions)||{};let Pn=0,Bn=999999;["pre_asia","asia_open","asia_close","low_volume","london","pre_us"].forEach(Zn=>{const Rn=so[Zn];(Rn==null?void 0:Rn.high)>0&&(Pn=Math.max(Pn,Rn.high)),(Rn==null?void 0:Rn.low)>0&&(Rn==null?void 0:Rn.low)<999999&&(Bn=Math.min(Bn,Rn.low))}),Bn===999999&&(Bn=0);const Tn=Pn||(o==null?void 0:o.overnight_high)||0,Fn=Bn||(o==null?void 0:o.overnight_low)||0,In=Tn>0&&Fn>0?Tn-Fn:0;o!=null&&o.us_ib_vwap;const Jn=Qt>Tn;let En=50,Qn=0;In>0&&(En=(Tn-Qt)/In*100,Qn=Tn-Qt);const _o=Tn-Qt,To=Qt-Fn,Wo=In>0,Yo=Qt>Zt;let lo=0,ao=0;const Mo=en&&rn>0&&Zt>0&&qt>0;Mo&&Qt>0&&(lo=Zt-Qt,ao=Qt-qt);const Xo=(Zn=>Zn<=20?{label:"V.BULLISH",color:"#00ff88"}:Zn<=40?{label:"BULLISH",color:"#88ff88"}:Zn>=80?{label:"V.BEARISH",color:"#ff4466"}:Zn>=60?{label:"BEARISH",color:"#ff8888"}:{label:"NEUTRAL",color:"#ffaa00"})(En),Ko=q.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(245,158,11,0.08) 100%)",borderRadius:10,border:`1px solid ${ie}`,padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#fff",letterSpacing:1},children:"DAY BIAS ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:9,color:"#888",fontFamily:"monospace"},children:[Ko," ET"]}),e.jsx("span",{style:{fontSize:8,padding:"3px 8px",borderRadius:4,background:Ct?"rgba(255,170,0,0.2)":_t?"rgba(0,170,255,0.2)":"rgba(0,255,136,0.2)",color:Ct?"#ffaa00":_t?"#00aaff":"#00ff88",fontWeight:600},children:Ct?"OVERNIGHT":_t?"IB FORMING":"RTH"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(59,130,246,0.2)"},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#3B82F6",marginBottom:8},children:["A. O/N  8:20 ",Ct&&e.jsx("span",{style:{color:"#ffaa00",fontWeight:400},children:"(building)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"O/N RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#3B82F6"},children:In>0?In.toFixed(1):"--"}),e.jsx("div",{style:{fontSize:7,color:"#555"},children:Tn>0&&Fn>0?`${Fn.toFixed(1)}-${Tn.toFixed(1)}`:""})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"% FROM HIGH"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Jn?"#00ff88":Xo.color},children:Wo?Jn?"ABOVE":`${Math.max(0,En).toFixed(0)}%`:"--"}),e.jsx("div",{style:{fontSize:10,fontWeight:600,color:Qn>=0?"#ff4466":"#00ff88"},children:Wo?`${Qn>=0?"-":"+"}${Math.abs(Qn).toFixed(1)} pts`:""})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"VWAP"}),bn>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:ro?"#ff4466":"#00ff88"},children:[ro?"+":"-",Math.abs(Cn).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:ro?"#ff4466":"#00ff88"},children:ro?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:_o>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:_o>=0?"#00ff88":"#00aaff"},children:[_o>=0?"+":"",_o.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:To>=0?"DOWNSIDE":"EXT LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:To>=0?"#ff4466":"#00aaff"},children:[To>=0?"-":"+",Math.abs(To).toFixed(0)]})]})]})]}),e.jsxs("div",{style:{background:mn?"rgba(245,158,11,0.1)":"rgba(255,255,255,0.03)",borderRadius:8,padding:12,border:`1px solid ${mn?"rgba(245,158,11,0.2)":"rgba(255,255,255,0.08)"}`},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:mn?"#F59E0B":"#666",marginBottom:8},children:["B. IB  9:30 ",Ct&&e.jsx("span",{style:{color:"#666",fontWeight:400},children:"(waiting)"}),_t&&e.jsx("span",{style:{color:"#00aaff",fontWeight:400},children:"(forming)"})]}),mn&&Mo?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#F59E0B"},children:rn.toFixed(0)})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"FROM IB HIGH"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:Yo?"#00ff88":"#ff4466"},children:[Yo?"+":"",(Qt-Zt).toFixed(0)," pts"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"RTH VWAP"}),$n>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:un?"#ff4466":"#00ff88"},children:[un?"+":"-",Math.abs(Vt).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:un?"#ff4466":"#00ff88"},children:un?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:lo>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:lo>=0?"#00ff88":"#00aaff"},children:[lo>=0?"+":"",lo.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:ao>=0?"EXT LOW":"DOWNSIDE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:ao>=0?"#ff4466":"#00aaff"},children:[ao>=0?"-":"+",Math.abs(ao).toFixed(0)]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:100,color:"#555"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,opacity:.5},children:Ct?"":""}),e.jsx("div",{style:{fontSize:11},children:Ct?"Starts 8:20 ET":`IB: ${rn.toFixed(0)} pts`})]})]})]})]})})()})]}),e.jsxs("div",{style:{marginBottom:12,marginTop:12,background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>W(!u),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:`linear-gradient(135deg, ${re}15 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:u?"1px solid rgba(255,255,255,0.08)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:11,fontWeight:600,color:re,letterSpacing:"0.1em"},children:"NON-DISCRETIONARY ANALYSIS"}),!u&&e.jsx("span",{style:{fontSize:10,color:"#666",fontStyle:"italic"},children:"(Detailed reasoning for bias)"})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:u?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),u&&e.jsx("div",{style:{padding:"14px 16px",background:`linear-gradient(135deg, ${re}08 0%, transparent 50%)`},children:e.jsx("div",{style:{fontSize:c?12:13,color:"#bbb",lineHeight:1.85},children:(()=>{var Y,ve,Tt;const N=[];if(h.monthly.bias!=="NEUTRAL"||h.weekly.bias!=="NEUTRAL"){if(h.weekly.bias!=="NEUTRAL"){const ut=((Y=h.weekly.factors)==null?void 0:Y.length)>0?` (${h.weekly.factors.slice(0,2).join(", ")})`:"";N.push(`Weekly bias is <span style="color:${h.weekly.color};font-weight:600">${h.weekly.bias}</span>${ut} based on week range, weekly open, and prior day position.`)}if(h.monthly.bias!=="NEUTRAL"){const ut=((ve=h.monthly.factors)==null?void 0:ve.length)>0?` (${h.monthly.factors.slice(0,2).join(", ")})`:"";N.push(`Monthly bias is <span style="color:${h.monthly.color};font-weight:600">${h.monthly.bias}</span>${ut} based on rolling 20-day range analysis.`)}}if(h.dayOpen.price>0&&h.dayOpen.bias!=="NEUTRAL"&&(h.dayOpen.bias==="BULLISH"?N.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(h.dayOpen.diff).toFixed(1)}pts BELOW</span> Day Open ($${h.dayOpen.price.toFixed(2)}) - buying below the open adds bullish confidence.`):N.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(h.dayOpen.diff).toFixed(1)}pts ABOVE</span> Day Open ($${h.dayOpen.price.toFixed(2)}) - selling above the open adds bearish confidence.`)),h.weeklyOpen.price>0&&h.weeklyOpen.bias!=="NEUTRAL"&&(h.weeklyOpen.bias==="BULLISH"?N.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(h.weeklyOpen.diff).toFixed(1)}pts BELOW</span> Weekly Open ($${h.weeklyOpen.price.toFixed(2)}) - buying below weekly open is a key bullish signal.`):N.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(h.weeklyOpen.diff).toFixed(1)}pts ABOVE</span> Weekly Open ($${h.weeklyOpen.price.toFixed(2)}) - selling above weekly open is a key bearish signal.`)),h.daily.ib.level!=="--"&&h.daily.ib.level!=="FORMING"){const ut={LOW:`Initial Balance is <span style="color:#00ff88;font-weight:600">LOW</span> (${h.daily.ib.pct}% of ADR) - expect range extension and directional move.`,MEDIUM:`Initial Balance is <span style="color:#ffaa00;font-weight:600">MEDIUM</span> (${h.daily.ib.pct}% of ADR) - balanced day possible, watch for breakout.`,HIGH:`Initial Balance is <span style="color:#ff4466;font-weight:600">HIGH</span> (${h.daily.ib.pct}% of ADR) - range may be set, rotational day likely.`};N.push(ut[h.daily.ib.level]||"")}if(h.daily.pvaLocation.status!=="--"){const ut={IN:`Price is <span style="color:#00aaff;font-weight:600">INSIDE</span> prior value area (${h.daily.pvaLocation.detail}) - value acceptance, mean reversion favored.`,OUT:(Tt=h.daily.pvaLocation.detail)!=null&&Tt.includes("Above")?`Price is <span style="color:#00ff88;font-weight:600">ABOVE</span> prior value area (${h.daily.pvaLocation.detail}) - bullish continuation if accepted.`:`Price is <span style="color:#ff4466;font-weight:600">BELOW</span> prior value area (${h.daily.pvaLocation.detail}) - bearish continuation if accepted.`,DYNAMIC:'Price is at <span style="color:#ffaa00;font-weight:600">DYNAMIC</span> boundary of prior value area - key decision point, watch for acceptance or rejection.'};N.push(ut[h.daily.pvaLocation.status]||"")}if(h.daily.opening.type!=="--"&&h.daily.opening.type!=="DEV"){const ut={OD:'Opening type is <span style="color:#00ff88;font-weight:600">Open Drive</span> - strong conviction, trend day likely, fade at your own risk.',OTD:'Opening type is <span style="color:#88ff88;font-weight:600">Open Test Drive</span> - tested and confirmed direction, follow the trend.',ORR:'Opening type is <span style="color:#ff8888;font-weight:600">Open Rejection Reverse</span> - initial move failed, expect reversal to dominate.',OA:'Opening type is <span style="color:#ffaa00;font-weight:600">Open Auction</span> - balanced open, wait for value to establish before trading.'};N.push(ut[h.daily.opening.type]||"")}if(h.critical.abOverlap.pct!=="--"){const ut=parseFloat(h.critical.abOverlap.pct);ut<33?N.push(`AB overlap is <span style="color:#00ff88;font-weight:600">${ut}%</span> (trending) - A and B periods show directional conviction, continuation expected.`):ut<=50?N.push(`AB overlap is <span style="color:#ffaa00;font-weight:600">${ut}%</span> (mixed) - some directional bias but not strong, be selective.`):N.push(`AB overlap is <span style="color:#ff4466;font-weight:600">${ut}%</span> (rotational) - high overlap suggests balance, range-bound trading likely.`)}if((h.critical.buyingTail||h.critical.sellingTail)&&(h.critical.buyingTail&&N.push('<span style="color:#00ff88;font-weight:600">Buying tail/excess</span> detected at lows - aggressive buyers defending, support is strong.'),h.critical.sellingTail&&N.push('<span style="color:#ff4466;font-weight:600">Selling tail/excess</span> detected at highs - aggressive sellers defending, resistance is strong.')),h.critical.tpoBias.direction!=="--"){const ut={BULLISH:'TPO distribution is <span style="color:#00ff88;font-weight:600">BULLISH</span> - POC is above value area midpoint, buyers in control.',BEARISH:'TPO distribution is <span style="color:#ff4466;font-weight:600">BEARISH</span> - POC is below value area midpoint, sellers in control.',NEUTRAL:'TPO distribution is <span style="color:#ffaa00;font-weight:600">NEUTRAL</span> - balanced profile, no clear directional bias from structure.'};N.push(ut[h.critical.tpoBias.direction]||"")}const q=_e.includes("BULLISH")?'<strong style="color:#00ff88">Conclusion:</strong> Multiple factors align bullish. Look for long entries at support zones with proper risk management.':_e.includes("BEARISH")?'<strong style="color:#ff4466">Conclusion:</strong> Multiple factors align bearish. Exercise caution on longs, consider short setups at resistance.':'<strong style="color:#ffaa00">Conclusion:</strong> Mixed signals present. Wait for clearer structure or trade both sides at extremes.';N.push(q);const ce=N.map((ut,Ct)=>{const _t=Ct===N.length-1,mn=_t?re:"rgba(255,255,255,0.1)",Qt=_t?`${re}10`:"transparent";return`<div style="margin-bottom: ${_t?"0":"12px"}; margin-top: ${_t?"16px":"0"}; padding: ${_t?"10px 10px 10px 10px":"2px 0 2px 10px"}; border-left: 2px solid ${mn}; background: ${Qt}; border-radius: ${_t?"6px":"0"};">${ut}</div>`}).join("");return e.jsx("span",{dangerouslySetInnerHTML:{__html:ce}})})()})})]})]})})()]})})(),((de=t.buy_zones)==null?void 0:de.length)>0?t.buy_zones.map((v,h)=>e.jsx(S,{zone:v,rank:h+1},v.id)):((G=t.all_zones)==null?void 0:G.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(100,100,100,0.1)",borderRadius:8,padding:12,marginBottom:16,border:"1px dashed rgba(255,255,255,0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:12,color:"#888"},children:" Waiting for price to approach support zones"}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Nearest zones shown below (greyed out until actionable)"})]}),[...t.all_zones].sort((v,h)=>Math.abs(v.distance)-Math.abs(h.distance)).slice(0,3).map((v,h)=>e.jsx("div",{style:{opacity:.5,filter:"grayscale(50%)"},children:e.jsx(S,{zone:v,rank:h+1,isWaiting:!0})},v.id))]}):e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,padding:c?24:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:c?36:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:c?14:16,marginBottom:8},children:"No zones available"}),e.jsx("div",{style:{fontSize:12},children:"Waiting for zone data to load..."})]})]}),(!m||c)&&e.jsx("div",{onClick:()=>!c&&C(!0),style:{flex:c?"none":1,minHeight:c?300:0,height:c?400:"auto",cursor:c?"default":"pointer"},title:c?"":"Click to minimize",children:e.jsx(R,{zones:t.all_zones,buyZones:t.buy_zones,currentPrice:t.current_price})})]})},Ng=({selectedContract:t})=>{var ce,Y,ve,Tt,ut,Ct,_t,mn,Qt,Zt,qt,rn,en,bn,Cn,ro,$n,Vt,un,so,Pn,Bn,Tn,Fn,In,Jn,En,Qn,_o,To,Wo,Yo,lo,ao,Mo,ni,Xo,Ko,Zn,Rn,gi,xi,yi,mi,bi,vi,ee,nt;const[n,o]=B.useState(null),[i,r]=B.useState(!1),[s,l]=B.useState("1week"),[a,d]=B.useState(!1),[p,w]=B.useState(null),[y,u]=B.useState(!1),[W,L]=B.useState(!1),[Z,Ge]=B.useState(!1),[f,m]=B.useState(null),[C,c]=B.useState(null),[F,S]=B.useState(0),[R,I]=B.useState(!1),[de,G]=B.useState("compact"),[v,h]=B.useState(!1),[T,Le]=B.useState(!1),[z,Ie]=B.useState({show:!1,x:0,y:0,price:0,dayIdx:-1,day:null}),[Pe,ne]=B.useState(!1),ze=No.useRef(!1),b=No.useRef(!1),_e=No.useRef(null),re=No.useRef(null),{isMobile:He,isTablet:rt}=$i(),zt=k=>{ze.current=!1,b.current=!1,setTimeout(()=>{if(_e.current){_e.current.scrollLeft=_e.current.scrollWidth-_e.current.clientWidth;const ae=(_e.current.scrollHeight-_e.current.clientHeight)/2;_e.current.scrollTop=ae}if(re.current){re.current.scrollLeft=re.current.scrollWidth-re.current.clientWidth;const ae=(re.current.scrollHeight-re.current.clientHeight)/2;re.current.scrollTop=ae}const E=document.getElementById("price-scale-1w"),pe=document.getElementById("price-scale-4w");E&&_e.current&&(E.scrollTop=_e.current.scrollTop),pe&&re.current&&(pe.scrollTop=re.current.scrollTop)},300)},Je=No.useRef(!1);B.useEffect(()=>{n!=null&&n.current_price&&!Je.current&&(zt(n.current_price),Je.current=!0)},[n==null?void 0:n.current_price]),B.useEffect(()=>{Je.current=!1},[t]);const Xe=k=>k.length===1?k.charCodeAt(0)-65:26+(k.charCodeAt(0)-65)*26+(k.charCodeAt(1)-65),Ne=31,oe=44,fe=k=>{if(!k)return{};const E={};for(const[pe,ae]of Object.entries(k)){const xe=ae.filter(Ze=>{const P=Xe(Ze);return P>=Ne&&P<=oe});xe.length>0&&(E[pe]=xe)}return E},we=k=>{if(!k||Object.keys(k).length===0)return 0;let E=0,pe=0;for(const[ae,xe]of Object.entries(k))xe.length>E&&(E=xe.length,pe=parseFloat(ae));return pe},A=(k,E,pe=.1)=>{var ge,Ue;if(!k||Object.keys(k).length===0)return{vah:0,val:0};const ae=Object.keys(k).map(Te=>parseFloat(Te)).sort((Te,$)=>$-Te),xe=Object.values(k).reduce((Te,$)=>Te+$.length,0),Ze=Math.ceil(xe*.7);let P=new Set,se=0;const Se=E.toFixed(1);k[Se]&&(P.add(E),se+=k[Se].length);let Ce=ae.indexOf(E)-1,De=ae.indexOf(E)+1;for(;se<Ze&&(Ce>=0||De<ae.length);){const Te=Ce>=0?ae[Ce]:null,$=De<ae.length?ae[De]:null,_=Te&&((ge=k[Te.toFixed(1)])==null?void 0:ge.length)||0,O=$&&((Ue=k[$.toFixed(1)])==null?void 0:Ue.length)||0;if(_>=O&&Te!==null)P.add(Te),se+=_,Ce--;else if($!==null)P.add($),se+=O,De++;else break}const le=Array.from(P);return{vah:Math.max(...le),val:Math.min(...le)}},te=(k,E=!1)=>{if(!k||k.length===0)return null;const pe=k.slice(0,20),ae=2,xe={};let Ze=[],P=[];pe.forEach((De,le)=>{const ge=le<26?String.fromCharCode(65+le):"A"+String.fromCharCode(65+le-26),Ue=E&&De.ib_high||De.high,Te=E&&De.ib_low||De.low;if(Ue&&Te){Ze.push(Ue),P.push(Te);for(let $=Math.floor(Te/ae)*ae;$<=Ue;$+=ae){const _=$.toFixed(1);xe[_]||(xe[_]=[]),xe[_].push(ge)}}});const se=we(xe),{vah:Se,val:Ce}=A(xe,se,ae);return{profiles:xe,poc:se,vah:Se,val:Ce,high:Math.max(...Ze),low:Math.min(...P),period_count:pe.length,current_letter:pe.length>0?pe.length<26?String.fromCharCode(65+pe.length-1):"T":"A",ib_high:null,ib_low:null,is_composite:!0,days_included:pe.length}};B.useEffect(()=>{o(null),r(!1);const k=async()=>{await new Promise(ae=>setTimeout(ae,3e3));const pe=async()=>{try{const ae=await fetch(`${on}/market-profile`);if(ae.ok){const xe=await ae.json(),Ze=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),P=xe.poc||0,se=P>5e4;Ze===se||P===0?(o(xe),r(!0)):console.log(`Waiting for backend to switch - got POC ${P} but expected ${Ze?"BTC":"non-BTC"}`)}}catch{r(!1)}};return pe(),setInterval(pe,1e3)};let E;return k().then(pe=>{E=pe}),()=>{E&&clearInterval(E)}},[t]);const ke=10,at=k=>`tpo_historic_cache_${k||"GC"}`;B.useEffect(()=>{w(null),(async()=>{var Ze,P,se;const E=at(t);try{const Se=localStorage.getItem(E);if(Se){const Ce=JSON.parse(Se),De=new Date().toISOString().split("T")[0],le=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),ge=((P=(Ze=Ce.data)==null?void 0:Ze.profiles)==null?void 0:P.length)>0;if(Ce.version===ke&&Ce.date===De&&Ce.data&&(ge||le)){w(Ce.data);return}else!ge&&!le&&(localStorage.removeItem(E),console.log("Cleared stale cache with empty profiles"))}}catch{console.warn("Invalid cache, fetching fresh data")}await new Promise(Se=>setTimeout(Se,12e3)),u(!0);let pe=3,ae=null;for(;pe>0;)try{ae=await(await fetch(`${on}/historic-tpo?days=40`)).json();const Ce=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(ae.source==="spot_no_history"&&!Ce){console.log(`Historic TPO: Backend still on spot, retrying in 5s... (${pe} left)`),pe--,await new Promise(le=>setTimeout(le,5e3));continue}break}catch(Se){console.error("Failed to fetch historic TPO:",Se),pe--,await new Promise(Ce=>setTimeout(Ce,3e3))}if(!ae){u(!1);return}const xe=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(((se=ae.profiles)==null?void 0:se.length)>0||xe){const Se={version:ke,date:new Date().toISOString().split("T")[0],contract:t,data:ae};try{localStorage.setItem(E,JSON.stringify(Se))}catch(Ce){console.warn("Failed to cache historic data:",Ce)}}w(ae),u(!1)})()},[t]);const $e=s==="1week"||s==="1week_rth",Qe=$e||(s==="4week"||s==="4week_rth");if((!i||!n)&&!(Qe&&((ce=p==null?void 0:p.profiles)==null?void 0:ce.length)>0))return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#8b8b8b"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:18,marginBottom:8},children:"Connecting to Market Profile..."}),e.jsx("div",{style:{fontSize:13},children:"Waiting for TPO data from backend"})]});const J=(()=>{var E;if(!n&&!Qe||Qe)return null;if(s==="day")return{profiles:n.profiles,poc:n.poc,vah:n.vah,val:n.val,single_prints:n.single_prints||[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:n.period_count,current_letter:n.current_letter,open_price:n.open_price,high:n.high||Math.max(...Object.keys(n.profiles||{}).map(pe=>parseFloat(pe))),low:n.low||Math.min(...Object.keys(n.profiles||{}).map(pe=>parseFloat(pe))),volume:n.volume};if(s==="rth"){const pe=fe(n.profiles),ae=we(pe),{vah:xe,val:Ze}=A(pe,ae),P=Object.keys(pe).map(se=>parseFloat(se));return{profiles:pe,poc:ae,vah:xe,val:Ze,single_prints:[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:Object.values(pe).flat().filter((se,Se,Ce)=>Ce.indexOf(se)===Se).length,current_letter:n.current_letter,open_price:n.rth_open||n.open_price,high:P.length>0?Math.max(...P):0,low:P.length>0?Math.min(...P):0,volume:n.volume}}if(s==="4week")return te(p==null?void 0:p.profiles,!1);if(s==="4week_rth")return te(p==null?void 0:p.profiles,!0);const k=(E=n.sessions)==null?void 0:E[s];return k?{profiles:k.profiles,poc:k.poc,vah:k.vah,val:k.val,single_prints:k.single_prints||[],ib_high:k.ib_high,ib_low:k.ib_low,period_count:k.period_count,current_letter:k.current_letter,high:k.high,low:k.low,volume:k.volume}:null})(),st=(n==null?void 0:n.tick_size)||.1,et=F===0?(k=>{if(!k||Object.keys(k).length===0)return 1;const E=Object.keys(k).map(se=>parseFloat(se)),pe=Math.min(...E),P=(Math.max(...E)-pe)/45;return P<=.1?.1:P<=.5?.5:P<=1?1:P<=2?2:P<=5?5:P<=10?10:Math.ceil(P/10)*10})(J==null?void 0:J.profiles):F,ie=(k,E)=>{if(!k||E<=st)return Object.entries(k).map(([ae,xe])=>({price:parseFloat(ae),letters:xe})).sort((ae,xe)=>xe.price-ae.price);const pe={};return Object.entries(k).forEach(([ae,xe])=>{const Ze=parseFloat(ae),P=Math.floor(Ze/E)*E;pe[P]||(pe[P]=new Set),xe.forEach(se=>pe[P].add(se))}),Object.entries(pe).map(([ae,xe])=>({price:parseFloat(ae),letters:Array.from(xe)})).sort((ae,xe)=>xe.price-ae.price)},g=J!=null&&J.profiles?ie(J.profiles,et):[],j=g.map(k=>k.price);Math.min(...j),Math.max(...j);const V={developing:"#8b8b8b",normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},M={developing:"#8b8b8b",OA:"#888888",ORR:"#ffaa00",OTD:"#00ff88",OD:"#00aaff"},N={developing:"",D:"D",P:"P",b:"b",B:"B"},q=n||{};return e.jsxs("div",{style:{display:He?"flex":"grid",flexDirection:He?"column":void 0,gridTemplateColumns:He?void 0:rt||R?"1fr":"280px 1fr 300px",gap:He?12:20,height:He?"auto":"100%",padding:He?12:0,overflow:He?"auto":"hidden"},children:[!R&&e.jsxs("div",{style:{display:"flex",flexDirection:He?"row":"column",gap:He?8:16,overflowX:He?"auto":void 0,flexWrap:He?"nowrap":void 0},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"TPO Ranges"}),e.jsxs("div",{style:{display:"flex",marginBottom:12,background:"rgba(20,20,30,0.8)",borderRadius:8,padding:3},children:[e.jsxs("button",{onClick:()=>{s.includes("_rth")&&l(s.replace("_rth","")),zt()},onMouseEnter:k=>{const E=k.currentTarget.querySelector(".tooltip");E&&(E.style.opacity="1")},onMouseLeave:k=>{const E=k.currentTarget.querySelector(".tooltip");E&&(E.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"transparent":"linear-gradient(135deg, rgba(0,170,255,0.3) 0%, rgba(0,221,255,0.2) 100%)",border:s.includes("_rth")?"1px solid transparent":"1px solid rgba(0,221,255,0.5)",borderRadius:6,color:s.includes("_rth")?"#666":"#00ddff",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["ETH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,221,255,0.3)",borderRadius:6,color:"#00ddff",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"18:00 - 17:00 ET"})]}),e.jsxs("button",{onClick:()=>{s.includes("_rth")||l(s+"_rth"),zt()},onMouseEnter:k=>{const E=k.currentTarget.querySelector(".tooltip");E&&(E.style.opacity="1")},onMouseLeave:k=>{const E=k.currentTarget.querySelector(".tooltip");E&&(E.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"linear-gradient(135deg, rgba(0,255,136,0.3) 0%, rgba(0,200,100,0.2) 100%)":"transparent",border:s.includes("_rth")?"1px solid rgba(0,255,136,0.5)":"1px solid transparent",borderRadius:6,color:s.includes("_rth")?"#00ff88":"#666",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["RTH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:6,color:"#00ff88",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"09:30 - 16:15 ET"})]})]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{onClick:()=>{const k=s.includes("_rth");l(k?"1week_rth":"1week"),zt()},style:{flex:1,padding:"12px 8px",background:s==="1week"||s==="1week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="1week"||s==="1week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="1week"||s==="1week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"1 Week"}),e.jsx("button",{onClick:()=>{const k=s.includes("_rth");l(k?"4week_rth":"4week"),zt()},style:{flex:1,padding:"12px 8px",background:s==="4week"||s==="4week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="4week"||s==="4week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="4week"||s==="4week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"4 Week"})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Key Levels"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#ffaa00",fontWeight:600,fontSize:12},children:"POC"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Y=J==null?void 0:J.poc)==null?void 0:Y.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAH"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((ve=J==null?void 0:J.vah)==null?void 0:ve.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Tt=J==null?void 0:J.val)==null?void 0:Tt.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB High"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((ut=J==null?void 0:J.ib_high)==null?void 0:ut.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB Low"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Ct=J==null?void 0:J.ib_low)==null?void 0:Ct.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466",fontWeight:600,fontSize:12},children:"Single Prints"}),e.jsx("span",{style:{color:"#ff4466",fontFamily:"monospace",fontSize:12},children:((_t=J==null?void 0:J.single_prints)==null?void 0:_t.length)||0})]})]}),(n==null?void 0:n.confluence)&&e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px",marginTop:8},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Confluence Score"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",background:n.confluence.total_score>=8?"rgba(0,255,136,0.15)":n.confluence.total_score>=5?"rgba(0,170,255,0.15)":n.confluence.total_score>=2?"rgba(255,170,0,0.15)":n.confluence.total_score>=-1?"rgba(139,139,139,0.15)":"rgba(255,68,102,0.15)",borderRadius:6,marginBottom:8,border:`1px solid ${n.confluence.total_score>=8?"rgba(0,255,136,0.3)":n.confluence.total_score>=5?"rgba(0,170,255,0.3)":n.confluence.total_score>=2?"rgba(255,170,0,0.3)":n.confluence.total_score>=-1?"rgba(139,139,139,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.confluence.total_score>=8?"#00ff88":n.confluence.total_score>=5?"#00aaff":n.confluence.total_score>=2?"#ffaa00":n.confluence.total_score>=-1?"#8b8b8b":"#ff4466",fontFamily:"monospace"},children:[n.confluence.total_score>0?"+":"",n.confluence.total_score]}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:n.confluence.confidence})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.confluence.trade_direction==="LONG"?"#00ff88":n.confluence.trade_direction==="SHORT"?"#ff4466":"#8b8b8b"},children:n.confluence.trade_direction==="LONG"?" LONG":n.confluence.trade_direction==="SHORT"?" SHORT":n.confluence.trade_direction}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:["Size: ",n.confluence.position_size_pct,"%"]})]})]}),e.jsx("div",{style:{padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:6,marginBottom:12,fontSize:12,color:(mn=n.confluence.action)!=null&&mn.includes("NO TRADE")||(Qt=n.confluence.action)!=null&&Qt.includes("SKIP")?"#ff4466":(Zt=n.confluence.action)!=null&&Zt.includes("ADD")?"#00ff88":"#fff"},children:n.confluence.action}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00ff88"},children:"R1 Macro"}),e.jsxs("span",{style:{color:n.confluence.rank1_score>0?"#00ff88":"#666"},children:[n.confluence.rank1_score>0?"+":"",n.confluence.rank1_score]})]}),((rn=(qt=n.confluence.factors)==null?void 0:qt.rank1_macro)==null?void 0:rn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#666"},children:n.confluence.factors.rank1_macro.map((k,E)=>e.jsx("div",{style:{padding:"2px 0"},children:k},E))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00aaff"},children:"R2 Volume"}),e.jsxs("span",{style:{color:n.confluence.rank2_score>0?"#00aaff":"#666"},children:[n.confluence.rank2_score>0?"+":"",n.confluence.rank2_score]})]}),((bn=(en=n.confluence.factors)==null?void 0:en.rank2_volume)==null?void 0:bn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#00aaff",opacity:.7},children:n.confluence.factors.rank2_volume.map((k,E)=>e.jsx("div",{style:{padding:"2px 0"},children:k},E))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ffaa00"},children:"R3 Structure"}),e.jsxs("span",{style:{color:n.confluence.rank3_score>0?"#ffaa00":"#666"},children:[n.confluence.rank3_score>0?"+":"",n.confluence.rank3_score]})]}),((ro=(Cn=n.confluence.factors)==null?void 0:Cn.rank3_structure)==null?void 0:ro.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ffaa00",opacity:.7},children:n.confluence.factors.rank3_structure.map((k,E)=>e.jsx("div",{style:{padding:"2px 0"},children:k},E))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#9370DB"},children:"R4 Timing"}),e.jsxs("span",{style:{color:n.confluence.rank4_score>0?"#9370DB":"#666"},children:[n.confluence.rank4_score>0?"+":"",n.confluence.rank4_score]})]}),((Vt=($n=n.confluence.factors)==null?void 0:$n.rank4_timing)==null?void 0:Vt.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#9370DB",opacity:.7},children:n.confluence.factors.rank4_timing.map((k,E)=>e.jsx("div",{style:{padding:"2px 0"},children:k},E))})]}),(n.confluence.conflict_penalty!==0||((so=(un=n.confluence.factors)==null?void 0:un.conflicts)==null?void 0:so.length)>0)&&e.jsxs("div",{style:{paddingBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466"},children:"Conflicts"}),e.jsx("span",{style:{color:"#ff4466"},children:n.confluence.conflict_penalty})]}),((Bn=(Pn=n.confluence.factors)==null?void 0:Pn.conflicts)==null?void 0:Bn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ff4466",opacity:.7},children:n.confluence.factors.conflicts.map((k,E)=>e.jsx("div",{style:{padding:"2px 0"},children:k},E))})]})]}),((Fn=(Tn=n.confluence.factors)==null?void 0:Tn.volume_override)==null?void 0:Fn.length)>0&&e.jsx("div",{style:{marginTop:10,padding:"8px",background:"rgba(255,170,0,0.1)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:n.confluence.factors.volume_override[0]}),n.confluence.level_type&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:"#8b8b8b"},children:["At: ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:n.confluence.level_type}),n.confluence.at_key_level&&e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",marginLeft:6},children:n.confluence.at_key_level.toFixed(2)})]})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:20,overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{style:{fontSize:14,color:"#fff",fontWeight:600},children:["TPO Profile - ",s==="day"?"Full Day":(Jn=(In=n==null?void 0:n.sessions)==null?void 0:In[s])==null?void 0:Jn.display]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("button",{onClick:()=>h(!v),style:{padding:"4px 10px",background:v?"rgba(0,170,255,0.25)":"rgba(30,30,40,0.8)",border:v?"1px solid rgba(0,170,255,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:v?"#00aaff":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:v?"Zoomed":"Zoom"}),e.jsx("button",{onClick:()=>Le(!T),style:{padding:"4px 10px",background:T?"rgba(255,170,0,0.25)":"rgba(30,30,40,0.8)",border:T?"1px solid rgba(255,170,0,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:T?"#ffaa00":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:T?"IB Only":"Hide Non-IB"}),e.jsxs("span",{style:{fontSize:12,color:"#8b8b8b",whiteSpace:"nowrap"},children:["Period: ",e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(J==null?void 0:J.current_letter)||"A"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(30,30,40,0.8)",borderRadius:6,padding:"2px 4px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{fontSize:10,color:"#8b8b8b",paddingLeft:4},children:"View:"}),e.jsx("button",{onClick:()=>G("compact"),style:{padding:"4px 8px",background:de==="compact"?"rgba(0,255,136,0.2)":"transparent",border:de==="compact"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:de==="compact"?"#00ff88":"#888",fontSize:10,fontWeight:de==="compact"?600:400,cursor:"pointer"},children:"Compact"}),e.jsx("button",{onClick:()=>G("expanded"),style:{padding:"4px 8px",background:de==="expanded"?"rgba(0,255,136,0.2)":"transparent",border:de==="expanded"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:de==="expanded"?"#00ff88":"#888",fontSize:10,fontWeight:de==="expanded"?600:400,cursor:"pointer"},children:"Expanded"})]}),e.jsx("button",{onClick:()=>I(!R),style:{padding:"4px 10px",background:R?"rgba(0,170,255,0.2)":"rgba(30,30,40,0.8)",border:R?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:R?"#00aaff":"#888",fontSize:11,cursor:"pointer",display:"flex",alignItems:"center",gap:4},title:R?"Collapse TPO chart":"Expand TPO chart",children:R?"":" "})]})]}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:10,position:"relative"},children:Qe&&(!p||y)?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16,animation:"pulse 1.5s ease-in-out infinite"},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8,color:"#9370DB"},children:"Loading Historic Data..."}),e.jsxs("div",{style:{fontSize:12},children:["Fetching ",$e?"1-week":"4-week"," TPO profiles"]})]}):Qe&&((En=p==null?void 0:p.profiles)==null?void 0:En.length)===0?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8},children:"No Historic Data Available"}),e.jsx("div",{style:{fontSize:12},children:"Try refreshing or check backend connection"})]}):(s==="1week"||s==="1week_rth")&&((Qn=p==null?void 0:p.profiles)==null?void 0:Qn.length)>0?(()=>{var k,E,pe,ae,xe,Ze,P,se,Se,Ce,De;try{const le=s==="1week_rth",ge=p.profiles[0],Te=((ge==null?void 0:ge.high)||5e3)>1e4,$=Te?v?25:50:v?2:4,_=Te?v?.1:1:v?.05:.3,O=Math.max(2,Math.round($/_)),x=v?14:11,D=v?11:10,X=45,U=20,Ve=le?[{key:"us_rth",name:"US RTH",color:"#00ff88",start:31,end:44,time:"09:30-16:15",hasIB:!0,ibStart:31,ibEnd:33},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}]:[{key:"asia",name:"Asia",color:"#00ddff",start:0,end:17,time:"18:00-03:00"},{key:"london",name:"London",color:"#ffaa00",start:18,end:28,time:"03:00-08:20"},{key:"us",name:"US",color:"#00ff88",start:28,end:41,time:"08:20-15:00",hasIB:!0,ibStart:28,ibEnd:30},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}],pt=K=>K.length===1?K.charCodeAt(0)-65:26+(K.charCodeAt(0)-65)*26+(K.charCodeAt(1)-65),ye=K=>{if(K.open_type&&K.open_type!=="developing")return K.open_type;const be=K.ib_high,vt=K.ib_low,Ht=K.open,Xt=K.close||K.high;if(!be||!vt||vt>=999999||!Ht)return"OA";const Ke=be-vt;if(Ke<=0)return"OA";const ct=(be+vt)/2,Ut=(Ht-vt)/Ke*100;return Ut<=20&&Xt>ct||Ut>=80&&Xt<ct?"OD":Ht>ct&&K.low<vt&&Xt>be||Ht<ct&&K.high>be&&Xt<vt?"OTD":K.high>be&&Xt<ct||K.low<vt&&Xt>ct?"ORR":"OA"},me=p.profiles.slice(0,5).filter(K=>K.tpo_profiles).reverse(),Be=K=>K<26?String.fromCharCode(65+K):String.fromCharCode(65+Math.floor(K/26)-1)+String.fromCharCode(65+K%26),qe=[];me.forEach(K=>{Ve.forEach(be=>{var $t,dn,Wt,Kt,ft,Dt;const vt=K.tpo_profiles||{},Ht=K.price_volumes||{},Xt=K.delta_by_price||{},Ke={},ct={},Ut={};let he=0,gt=0,mt=0,ht=999999,xt=null,wt=null,H=0,Ye=999999;Object.entries(vt).forEach(([jt,Re])=>{const tt=parseFloat(jt);Re.filter(Jt=>{const Rt=pt(Jt);return Rt>=be.start&&Rt<=be.end}).length>0&&(tt>H&&(H=tt),tt<Ye&&(Ye=tt))});const ue=Te?100:5,bt=H+ue,kt=Ye-ue;Object.entries(Ht).forEach(([jt,Re])=>{const tt=parseFloat(jt);if(tt>=kt&&tt<=bt){ct[tt]=(ct[tt]||0)+Re;const ot=Xt[jt]||Xt[tt.toFixed(1)]||0;Ut[tt]=(Ut[tt]||0)+ot}}),Object.entries(vt).forEach(([jt,Re])=>{const tt=parseFloat(jt),ot=Math.floor(tt/$)*$,Jt=Re.filter(Rt=>{const pn=pt(Rt);return pn>=be.start&&pn<=be.end});Jt.length>0&&(Ke[ot]||(Ke[ot]=new Set),Jt.forEach(Rt=>{const cn=pt(Rt)-be.start,nn=Be(cn);Ke[ot].add(nn),cn>gt&&(gt=cn)}),tt>mt&&(mt=tt),tt<ht&&(ht=tt)),be.hasIB&&Re.filter(pn=>{const cn=pt(pn);return cn>=be.ibStart&&cn<=be.ibEnd}).length>0&&((xt===null||tt>xt)&&(xt=tt),(wt===null||tt<wt)&&(wt=tt))}),Object.values(Ke).forEach(jt=>{jt.size>he&&(he=jt.size)});let At=0;if(Object.values(ct).forEach(jt=>{jt>At&&(At=jt)}),Object.keys(Ke).length>0){let jt=0,Re=0,tt=null;Object.entries(Ke).forEach(([yt,Ee])=>{Ee.size>Re&&(Re=Ee.size,jt=parseFloat(yt),tt=yt)});const ot=Object.keys(Ke).map(yt=>parseFloat(yt)).sort((yt,Ee)=>Ee-yt),Jt=Object.values(Ke).reduce((yt,Ee)=>yt+Ee.size,0);let Rt=0,pn=jt,cn=jt;const nn=ot.indexOf(Math.floor(jt/$)*$);if(nn>=0){Rt=(($t=Ke[ot[nn]])==null?void 0:$t.size)||0;let yt=nn,Ee=nn;for(;Rt<Jt*.7&&(yt>0||Ee<ot.length-1);){const Bt=yt>0&&((dn=Ke[ot[yt-1]])==null?void 0:dn.size)||0,ln=Ee<ot.length-1&&((Wt=Ke[ot[Ee+1]])==null?void 0:Wt.size)||0;if(Bt>=ln&&yt>0)yt--,Rt+=Bt;else if(Ee<ot.length-1)Ee++,Rt+=ln;else break}pn=ot[yt]||jt,cn=ot[Ee]||jt}let fn=jt,qn=0;Object.entries(ct).forEach(([yt,Ee])=>{Ee>qn&&(qn=Ee,fn=parseFloat(yt))});let Oo=fn,eo=fn;const wn=Object.entries(ct).map(([yt,Ee])=>({price:parseFloat(yt),vol:Ee})).sort((yt,Ee)=>yt.price-Ee.price),Ro=wn.reduce((yt,Ee)=>yt+Ee.vol,0)*.7;if(wn.length>0){const yt=wn.findIndex(Un=>Math.abs(Un.price-fn)<_);let Ee=((Kt=wn[yt])==null?void 0:Kt.vol)||0,Bt=yt>=0?yt:0,ln=yt>=0?yt:0;for(;Ee<Ro&&(Bt<wn.length-1||ln>0);){const Un=Bt<wn.length-1?wn[Bt+1].vol:0,ho=ln>0?wn[ln-1].vol:0;if(Un>=ho&&Bt<wn.length-1)Bt++,Ee+=wn[Bt].vol;else if(ln>0)ln--,Ee+=wn[ln].vol;else break}Oo=((ft=wn[Bt])==null?void 0:ft.price)||fn,eo=((Dt=wn[ln])==null?void 0:Dt.price)||fn}const co=Math.max(he*D+U+X+40,120),oi=Math.max((gt+1)*D+U+X+40,160);let fo=null,Jo=null,Ui=null,zo=null;const Mt=[],Et=Be(gt),It=[];if(Object.entries(Ke).forEach(([yt,Ee])=>{const Bt=parseFloat(yt);Ee.has("A")&&Mt.push({price:Bt,key:yt}),Ee.has(Et)&&It.push({price:Bt,key:yt})}),Mt.length>0){const yt=(Math.max(...Mt.map(Bt=>Bt.price))+Math.min(...Mt.map(Bt=>Bt.price)))/2;let Ee=Mt[0];Mt.forEach(Bt=>{Math.abs(Bt.price-yt)<Math.abs(Ee.price-yt)&&(Ee=Bt)}),fo=Ee.price,Ui=Ee.key}if(It.length>0){const yt=(Math.max(...It.map(Bt=>Bt.price))+Math.min(...It.map(Bt=>Bt.price)))/2;let Ee=It[0];It.forEach(Bt=>{Math.abs(Bt.price-yt)<Math.abs(Ee.price-yt)&&(Ee=Bt)}),Jo=Ee.price,zo=Ee.key}let sn="D";if(mt>ht&&jt>0){const yt=mt-ht,Ee=(jt-ht)/yt,Bt=ht+yt*.67,ln=ht+yt*.33;Ee>.6?sn="P":Ee<.4?sn="b":sn="D"}let Vn=null;const Wn=[],po=[];if(Object.entries(Ke).forEach(([yt,Ee])=>{const Bt=parseFloat(yt);Ee.has("A")&&Wn.push(Bt),Ee.has("B")&&po.push(Bt)}),Wn.length>0&&po.length>0){const yt=Math.max(...Wn),Ee=Math.min(...Wn),Bt=Math.max(...po),ln=Math.min(...po),Un=yt-Ee,ho=Bt-ln,ji=Math.min(yt,Bt),sr=Math.max(Ee,ln),Si=Math.max(0,ji-sr),ii=Math.min(Un,ho);ii>0?Vn=Math.round(Si/ii*100):Si>0?Vn=100:Vn=0}qe.push({date:K.date,weekday:K.weekday,sessKey:be.key,sessName:be.name,sessTime:be.time,color:be.color,lettersByPrice:Ke,volumeByPrice:ct,deltaByPrice:Ut,maxVol:At,poc:jt,pocPriceKey:tt,maxTPOCount:Re,sessionVPOC:fn,vah:pn,val:cn,volVAH:Oo,volVAL:eo,high:mt,low:ht,open:fo,close:Jo,openPriceKey:Ui,closePriceKey:zo,ibHigh:xt,ibLow:wt,hasIB:be.hasIB,maxLetters:he,maxPeriod:gt,sessStart:0,width:de==="expanded"?oi:co,day_type:K.day_type,open_type:ye(K),profile_shape:sn,abOverlap:Vn})}})});const St=T?qe.filter(K=>K.hasIB&&K.ibHigh&&K.ibLow):qe;if(St.length===0)return e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:["No session data",T?" with IB":"","..."]});let We=0,dt=999999;St.forEach(K=>{K.high>We&&(We=K.high),K.low<dt&&(dt=K.low)}),We=Math.ceil(We/$)*$+$*3,dt=Math.floor(dt/$)*$-$*3;const Yt=[];for(let K=We;K>=dt;K-=$)Yt.push(K);let Ot=0;const Lt=St.map(K=>{const be=Ot;return Ot+=K.width,be}),Pt=Ot,Nt=(K,be)=>{if(!be)return;const vt=be.getBoundingClientRect(),Ht=be.scrollLeft,Xt=be.scrollTop,Ke=K.clientX-vt.left,ct=Ke+Ht,Ut=K.clientY-vt.top,he=Ut-36+Xt;let gt=St.length-1;for(let xt=0;xt<St.length;xt++)if(ct<Lt[xt]+St[xt].width){gt=xt;break}const mt=Math.floor(he/x),ht=Yt[mt]||0;Ie({show:!0,x:Ke,y:Ut,clientX:K.clientX,clientY:K.clientY,chartLeft:vt.left,chartTop:vt.top,chartRight:vt.right,chartBottom:vt.bottom,scrollLeft:Ht,scrollTop:Xt,price:ht,dayIdx:gt,day:St[gt]})};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[z.show&&z.day&&Pe&&e.jsxs("div",{style:{position:"absolute",left:z.x+65,top:Math.max(10,z.y-140),background:"rgba(20,20,35,0.95)",border:`1px solid ${z.day.color||"rgba(147,112,219,0.5)"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:z.day.color||"#ba68c8",fontWeight:700,marginBottom:4},children:[z.day.sessName," - ",z.day.weekday," ",(k=z.day.date)==null?void 0:k.slice(5)]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:z.day.sessTime||"--"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((E=z.price)==null?void 0:E.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof z.day.poc=="number"?z.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof z.day.vah=="number"?z.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof z.day.val=="number"?z.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof z.day.ibHigh=="number"?z.day.ibHigh.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof z.day.ibLow=="number"?z.day.ibLow.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof z.day.ibHigh=="number"&&typeof z.day.ibLow=="number"&&z.day.high>z.day.low?((z.day.ibHigh-z.day.ibLow)/(z.day.high-z.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof z.day.volVAH=="number"?z.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof z.day.volVAL=="number"?z.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:V[(pe=z.day)==null?void 0:pe.day_type]||"#888",fontWeight:600},children:((xe=(ae=z.day)==null?void 0:ae.day_type)==null?void 0:xe.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((P=(Ze=z.day)==null?void 0:Ze.open_type)==null?void 0:P.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((Se=(se=z.day)==null?void 0:se.profile_shape)==null?void 0:Se.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:((Ce=z.day)==null?void 0:Ce.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((De=z.day)==null?void 0:De.abOverlap)=="number"?z.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflow:"hidden",height:"calc(100% - 36px)"},id:"price-scale-1w",children:Yt.map((K,be)=>{const vt=K%10===0,Ht=K%50===0;return e.jsx("div",{style:{height:x,fontSize:Ht?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:Ht?"rgba(147,112,219,0.9)":vt?"#666":"transparent",fontWeight:Ht?600:400,borderBottom:Ht?"1px solid rgba(147,112,219,0.1)":"none"},children:vt?K.toFixed(0):""},K)})})]}),e.jsxs("div",{className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:K=>{const be=document.getElementById("price-scale-1w"),vt=document.getElementById("time-scale-1w");be&&(be.scrollTop=K.target.scrollTop),vt&&(vt.scrollLeft=K.target.scrollLeft)},onMouseMove:K=>Nt(K,K.currentTarget),onClick:()=>ne(!Pe),onMouseLeave:()=>{Pe||Ie({...z,show:!1})},ref:K=>{_e.current=K,K&&!ze.current&&Pt>K.clientWidth&&(K.scrollLeft=Pt-K.clientWidth,ze.current=!0)},children:[z.show&&z.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:z.chartLeft-58,right:window.innerWidth-z.chartRight,height:1,top:z.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:z.clientX,top:z.chartTop,height:z.chartBottom-z.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:10,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:St.map((K,be)=>{var vt;return e.jsxs("div",{style:{width:K.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:K.sessKey==="asia"||le&&K.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:z.dayIdx===be?`${K.color}15`:"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:K.color,fontWeight:700},children:K.sessName}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[K.weekday," ",(vt=K.date)==null?void 0:vt.slice(5)]})]},`${K.date}-${K.sessKey}`)})}),e.jsxs("div",{style:{position:"relative",minHeight:"calc(100% - 36px)"},children:[St.map((K,be)=>e.jsx("div",{style:{position:"absolute",left:Lt[be]+K.width-1,top:0,bottom:0,minHeight:Yt.length*x,width:1,background:"rgba(147,112,219,0.06)",pointerEvents:"none",zIndex:1}},`col-line-${be}`)),St.map((K,be)=>K.sessKey==="asia"||le&&K.sessKey==="us_rth"?e.jsx("div",{style:{position:"absolute",left:Lt[be],top:0,bottom:0,minHeight:Yt.length*x,width:2,background:"rgba(255,255,255,0.1)",pointerEvents:"none",zIndex:1}},`day-line-${be}`):null),Yt.map(K=>e.jsx("div",{style:{display:"flex",height:x,background:z.price===K?"rgba(186,104,200,0.04)":"transparent"},children:St.map((be,vt)=>{const Ht=be.lettersByPrice[K]?[...be.lettersByPrice[K]].sort():[],Xt=be.vah&&be.val&&K<=be.vah&&K>=be.val,Ke=be.hasIB&&be.ibHigh&&Math.abs(K-be.ibHigh)<$,ct=be.hasIB&&be.ibLow&&Math.abs(K-be.ibLow)<$,Ut=be.openPriceKey&&K.toString()===be.openPriceKey,he=be.maxPeriod>=0?be.maxPeriod<26?String.fromCharCode(65+be.maxPeriod):"A"+String.fromCharCode(65+be.maxPeriod-26):null,gt=be.closePriceKey&&K.toString()===be.closePriceKey,ht=be.close&&be.open&&be.close>=be.open?"#00ff88":"#ff4466",xt=be.pocPriceKey&&K.toString()===be.pocPriceKey;return e.jsx("div",{style:{width:be.width,flexShrink:0,height:x,display:"flex",alignItems:"center",borderRight:"none",borderLeft:be.sessKey==="asia"||le&&be.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",position:"relative",paddingLeft:21,paddingRight:X+U+19,background:Ke||ct?"rgba(255,255,255,0.05)":"transparent"},children:de==="expanded"?e.jsx("div",{style:{position:"relative",width:Math.max((be.maxPeriod-be.sessStart+1)*D,50),height:x-2,overflow:"visible"},children:Ht.map((wt,H)=>{const Ye=pt(wt)-be.sessStart;if(Ye<0)return null;const ue=wt==="A"&&Ut,bt=wt===he&&gt&&!ue,kt=xt?"#000":ue?"#fff":bt?"#000":Xt?ht:"#888",At=xt?"#ffffff":ue?"rgba(100,100,100,0.6)":bt?ht:Xt?`${ht}30`:"rgba(136,136,136,0.25)",$t=xt||ue?"1px solid #fff":bt?`1px solid ${ht}`:Xt?`1px solid ${ht}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:Ye*D,width:wt.length>1?D+4:D-1,height:x-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:wt.length>1?7:9,fontWeight:700,color:kt,background:At,borderRadius:2,border:$t},children:wt},`${wt}-${H}`)})}):Ht.map((wt,H)=>{const Ye=wt==="A"&&Ut,ue=wt===he&&gt&&!Ye,bt=xt?"#000":Ye?"#fff":ue?"#000":Xt?ht:"#888",kt=xt?"#ffffff":Ye?"rgba(100,100,100,0.6)":ue?ht:Xt?`${ht}30`:"rgba(136,136,136,0.25)",At=xt||Ye?"1px solid #fff":ue?`1px solid ${ht}`:Xt?`1px solid ${ht}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{minWidth:wt.length>1?D+4:D,height:x-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:wt.length>1?8:10,fontWeight:700,color:bt,background:kt,borderRadius:2,marginRight:1,border:At,padding:wt.length>1?"0 2px":0},children:wt},`${wt}-${H}`)})},`${be.date}-${be.sessKey}-${K}`)})},K)),St.map((K,be)=>{const vt=Lt[be],Ht=Yt.length*x,Xt=(K.high+K.low)/2,Ke=he=>{const gt=Math.floor(he/$)*$,mt=(We-gt)/$,ht=1-(he-gt)/$;return(mt+ht)*x},ct=Object.entries(K.volumeByPrice||{}).map(([he,gt])=>{var xt,wt;const mt=parseFloat(he),ht=((xt=K.deltaByPrice)==null?void 0:xt[he])??((wt=K.deltaByPrice)==null?void 0:wt[mt]);return{price:mt,vol:gt,delta:ht}}).filter(he=>he.vol>0).sort((he,gt)=>gt.price-he.price),Ut=Math.max(...ct.map(he=>he.vol),1);return e.jsx("div",{style:{position:"absolute",left:vt+K.width-X-15,top:0,width:X,height:Ht,overflow:"hidden"},children:ct.map((he,gt)=>{const mt=Ke(he.price),ht=1,xt=K.sessionVPOC&&Math.abs(he.price-K.sessionVPOC)<1,wt=K.volVAH&&Math.abs(he.price-K.volVAH)<1,H=K.volVAL&&Math.abs(he.price-K.volVAL)<1,ue=he.delta!==void 0&&he.delta!==null&&he.delta!==0?he.delta>0:he.price>Xt;return e.jsx("div",{style:{position:"absolute",top:mt,left:4,width:`${Math.min(he.vol/Ut*95,95)}%`,height:ht,background:xt?"#ff9900":wt?"#00ff88":H?"#ff4466":ue?"#00dd77":"#cc3366",opacity:.9}},gt)})},`vp-sess-${be}`)}),St.map((K,be)=>{const vt=Xt=>{const Ke=Math.floor(Xt/$)*$,ct=(We-Ke)/$,Ut=1-(Xt-Ke)/$;return(ct+Ut)*x},Ht=Lt[be];return e.jsxs(No.Fragment,{children:[K.hasIB&&K.ibHigh&&K.ibLow&&e.jsx("div",{style:{position:"absolute",left:Ht+7,top:vt(K.ibHigh)+x/2,width:2,height:vt(K.ibLow)-vt(K.ibHigh),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),K.vah&&e.jsx("div",{style:{position:"absolute",left:Ht+K.width-12,top:vt(K.vah)+x/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),K.val&&e.jsx("div",{style:{position:"absolute",left:Ht+K.width-12,top:vt(K.val)+x/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${K.date}-${K.sessKey}`)})]})]})]}),e.jsxs("div",{style:{display:"flex",flexShrink:0,background:"rgba(18,18,30,0.98)",borderTop:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{width:58,flexShrink:0,borderRight:"1px solid rgba(147,112,219,0.25)"}}),e.jsx("div",{id:"time-scale-1w",style:{display:"flex",flex:1,overflow:"hidden"},children:St.map((K,be)=>e.jsx("div",{style:{width:K.width,flexShrink:0,textAlign:"center",padding:"2px 0",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:K.sessKey==="asia"||le&&K.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:z.dayIdx===be?`${K.color}15`:"transparent"},children:e.jsx("div",{style:{fontSize:9,color:"#666"},children:K.sessTime})},`time-${K.date}-${K.sessKey}`))})]})]})}catch(le){return console.error("1-Week chart error:",le),e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#ff4466"},children:["Error rendering 1-Week chart: ",le.message]})}})():(s==="4week"||s==="4week_rth")&&((_o=p==null?void 0:p.profiles)==null?void 0:_o.length)>0?(()=>{var qe,St,We,dt,Yt,Ot,Lt,Pt,Nt,K,be,vt,Ht,Xt,Ke,ct,Ut,he,gt,mt,ht,xt,wt;const k=s==="4week_rth",E=31,pe=45,ae=H=>H.length===1?H.charCodeAt(0)-65:26+(H.charCodeAt(0)-65)*26+(H.charCodeAt(1)-65),xe=H=>k?H.filter(Ye=>{const ue=ae(Ye);return ue>=E&&ue<=pe}):H,Ze=new Date().toISOString().split("T")[0],se=p.profiles.slice(0,20).filter(H=>H.tpo_profiles).map(H=>{let Ye=H;if(H.date===Ze&&n&&(Ye={...H,poc:n.poc||H.poc,vah:n.vah||H.vah,val:n.val||H.val,ib_high:n.ib_high||H.ib_high,ib_low:n.ib_low||H.ib_low,high:Math.max(n.high||0,H.high||0),low:Math.min(n.low||999999,H.low||999999),tpo_profiles:n.profiles||H.tpo_profiles,day_type:n.day_type||H.day_type,open_type:n.open_type||H.open_type,profile_shape:n.profile_shape||H.profile_shape}),k&&Ye.tpo_profiles){const ue={};Object.entries(Ye.tpo_profiles).forEach(([kt,At])=>{const $t=xe(At);$t.length>0&&(ue[kt]=$t)}),Ye={...Ye,tpo_profiles:ue};const bt=Object.keys(ue).map(kt=>parseFloat(kt));bt.length>0&&(Ye.high=Math.max(...bt),Ye.low=Math.min(...bt))}return Ye}).reverse(),Se=se.map(H=>H.high||0).filter(H=>H>0);se.map(H=>H.low||999999).filter(H=>H<999999);const De=Math.max(...Se)>1e4,le=De?v?50:100:v?2:4,ge=De?v?.1:1:v?.05:.3,Ue=Math.max(2,Math.round(le/ge)),Te=v?14:11,$=v?12:10,_=50,O=16,x=H=>{const Ye=new Set;return H.forEach(ue=>{let bt;ue.length===1?bt=ue.charCodeAt(0)-65:bt=26+(ue.charCodeAt(0)-65)*26+(ue.charCodeAt(1)-65);const kt=Math.floor(bt/2);kt<26?Ye.add(String.fromCharCode(65+kt)):Ye.add(String.fromCharCode(65+Math.floor((kt-26)/26))+String.fromCharCode(65+(kt-26)%26))}),[...Ye].sort()},D=H=>{if(H.open_type&&H.open_type!=="developing")return H.open_type;const Ye=H.ib_high,ue=H.ib_low,bt=H.open,kt=H.close||H.high;if(!Ye||!ue||ue>=999999||!bt)return"OA";const At=Ye-ue;if(At<=0)return"OA";const $t=(Ye+ue)/2,dn=(bt-ue)/At*100;return dn<=20&&kt>$t||dn>=80&&kt<$t?"OD":bt>$t&&H.low<ue&&kt>Ye||bt<$t&&H.high>Ye&&kt<ue?"OTD":H.high>Ye&&kt<$t||H.low<ue&&kt>$t?"ORR":"OA"},X=se.map(H=>{var Jo,Ui,zo;const Ye=H.tpo_profiles||{};let ue=0,bt=0;const kt={},At={},$t={},dn={},Wt=H.price_volumes&&Object.keys(H.price_volumes).length>0,Kt=H.delta_by_price||{};Object.entries(Ye).forEach(([Mt,Et])=>{const It=parseFloat(Mt),sn=Math.floor(It/le)*le;if(kt[sn]||(kt[sn]=new Set),x(Et).forEach(Wn=>{kt[sn].add(Wn);const po=ae(Wn);po>bt&&(bt=po)}),!Wt){const Wn=Math.floor(It/ge)*ge;At[Wn]=(At[Wn]||0)+Et.length,$t[sn]=($t[sn]||0)+Et.length}}),Wt&&Object.entries(H.price_volumes).forEach(([Mt,Et])=>{const It=parseFloat(Mt),sn=Math.floor(It/ge)*ge,Vn=Math.floor(It/le)*le;At[sn]=(At[sn]||0)+Et,$t[Vn]=($t[Vn]||0)+Et;const Wn=Kt[Mt]||Kt[It.toFixed(1)]||0;dn[sn]=(dn[sn]||0)+Wn});let ft=0,Dt=0,jt=null;Object.entries(kt).forEach(([Mt,Et])=>{Et.size>Dt&&(Dt=Et.size,ft=parseFloat(Mt),jt=Mt),Et.size>ue&&(ue=Et.size)});let Re=H.poc||ft,tt=0;Object.entries(At).forEach(([Mt,Et])=>{Et>tt&&(tt=Et,Re=parseFloat(Mt))});let ot=Re,Jt=Re;const Rt=Object.entries(At).map(([Mt,Et])=>({price:parseFloat(Mt),vol:Et})).sort((Mt,Et)=>Mt.price-Et.price),cn=Rt.reduce((Mt,Et)=>Mt+Et.vol,0)*.7;if(Rt.length>0){const Mt=Rt.findIndex(Vn=>Math.abs(Vn.price-Re)<ge);let Et=((Jo=Rt[Mt])==null?void 0:Jo.vol)||0,It=Mt,sn=Mt;for(;Et<cn&&(It<Rt.length-1||sn>0);){const Vn=It<Rt.length-1?Rt[It+1].vol:0,Wn=sn>0?Rt[sn-1].vol:0;if(Vn>=Wn&&It<Rt.length-1)It++,Et+=Rt[It].vol;else if(sn>0)sn--,Et+=Rt[sn].vol;else break}ot=((Ui=Rt[It])==null?void 0:Ui.price)||Re,Jt=((zo=Rt[sn])==null?void 0:zo.price)||Re}const nn=Math.max(ue*$+O+_+45,130),fn=Math.max((bt+1)*$+O+_+45,180);let qn=null,Oo=null;const eo=[],wn=bt,Vi=wn<26?String.fromCharCode(65+wn):"A"+String.fromCharCode(65+wn-26),Ro=[];if(Object.entries(kt).forEach(([Mt,Et])=>{const It=parseFloat(Mt);Et.has("A")&&eo.push({price:It,key:Mt}),Et.has(Vi)&&Ro.push({price:It,key:Mt})}),eo.length>0){const Mt=(Math.max(...eo.map(It=>It.price))+Math.min(...eo.map(It=>It.price)))/2;let Et=eo[0];eo.forEach(It=>{Math.abs(It.price-Mt)<Math.abs(Et.price-Mt)&&(Et=It)}),qn=Et.key}if(Ro.length>0){const Mt=(Math.max(...Ro.map(It=>It.price))+Math.min(...Ro.map(It=>It.price)))/2;let Et=Ro[0];Ro.forEach(It=>{Math.abs(It.price-Mt)<Math.abs(Et.price-Mt)&&(Et=It)}),Oo=Et.key}let co=null;const oi=[],fo=[];if(Object.entries(kt).forEach(([Mt,Et])=>{const It=parseFloat(Mt);Et.has("A")&&oi.push(It),Et.has("B")&&fo.push(It)}),oi.length>0&&fo.length>0){const Mt=Math.max(...oi),Et=Math.min(...oi),It=Math.max(...fo),sn=Math.min(...fo),Vn=Mt-Et,Wn=It-sn,po=Math.min(Mt,It),yt=Math.max(Et,sn),Ee=Math.max(0,po-yt),Bt=Math.min(Vn,Wn);Bt>0?co=Math.round(Ee/Bt*100):Ee>0?co=100:co=0}return{...H,lettersByPrice:kt,volumeByPrice:At,volumeByPriceCoarse:$t,deltaByPrice:dn,maxVol:tt,dayVPOC:Re,tpoPOC:ft,pocPriceKey:jt,openPriceKey:qn,closePriceKey:Oo,abOverlap:co,volVAH:ot,volVAL:Jt,maxLetters:Math.max(ue,1),maxPeriod:bt,width:de==="expanded"?fn:nn,open_type:D(H)}});let U=0,je=999999;se.forEach(H=>{H.high>U&&(U=H.high),H.low<je&&(je=H.low)}),U=Math.ceil(U/le)*le+le*3,je=Math.floor(je/le)*le-le*3;const Ae=[];for(let H=U;H>=je;H-=le)Ae.push(H);let Ve=0;const pt=X.map(H=>{const Ye=Ve;return Ve+=H.width,Ye}),ye=Ve;let me=0;const Be=(H,Ye)=>{if(!Ye)return;const ue=Ye.getBoundingClientRect();me=Ye.scrollLeft;const bt=Ye.scrollTop,kt=H.clientX-ue.left,At=kt+me,$t=H.clientY-ue.top,dn=$t-36+bt;let Wt=X.length-1;for(let Dt=0;Dt<X.length;Dt++)if(At<pt[Dt]+X[Dt].width){Wt=Dt;break}const Kt=Math.floor(dn/Te),ft=Ae[Kt]||0;Ie({show:!0,x:kt,y:$t,clientX:H.clientX,clientY:H.clientY,chartLeft:ue.left,chartTop:ue.top,chartRight:ue.right,chartBottom:ue.bottom,scrollLeft:me,scrollTop:bt,price:ft,dayIdx:Wt,day:X[Wt]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[z.show&&z.day&&Pe&&e.jsxs("div",{style:{position:"absolute",left:z.x+65,top:Math.max(10,z.y-140),background:"rgba(20,20,35,0.95)",border:"1px solid rgba(147,112,219,0.5)",borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:"#ba68c8",fontWeight:700,marginBottom:4},children:[(qe=z.day)==null?void 0:qe.weekday," ",(St=z.day)==null?void 0:St.date]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:k?"09:30 - 16:15 ET":"18:00 - 17:00 ET"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((We=z.price)==null?void 0:We.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof((dt=z.day)==null?void 0:dt.poc)=="number"?z.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((Yt=z.day)==null?void 0:Yt.vah)=="number"?z.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((Ot=z.day)==null?void 0:Ot.val)=="number"?z.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((Lt=z.day)==null?void 0:Lt.ib_high)=="number"?z.day.ib_high.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((Pt=z.day)==null?void 0:Pt.ib_low)=="number"?z.day.ib_low.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof((Nt=z.day)==null?void 0:Nt.ib_high)=="number"&&typeof((K=z.day)==null?void 0:K.ib_low)=="number"&&((be=z.day)==null?void 0:be.high)>((vt=z.day)==null?void 0:vt.low)?((z.day.ib_high-z.day.ib_low)/(z.day.high-z.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((Ht=z.day)==null?void 0:Ht.volVAH)=="number"?z.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((Xt=z.day)==null?void 0:Xt.volVAL)=="number"?z.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:V[(Ke=z.day)==null?void 0:Ke.day_type]||"#888",fontWeight:600},children:((Ut=(ct=z.day)==null?void 0:ct.day_type)==null?void 0:Ut.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((gt=(he=z.day)==null?void 0:he.open_type)==null?void 0:gt.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((ht=(mt=z.day)==null?void 0:mt.profile_shape)==null?void 0:ht.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:((xt=z.day)==null?void 0:xt.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((wt=z.day)==null?void 0:wt.abOverlap)=="number"?z.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-4w",children:Ae.map(H=>{const Ye=H%20===0,ue=H%100===0;return e.jsx("div",{style:{height:Te,fontSize:ue?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:ue?"rgba(147,112,219,0.9)":Ye?"#666":"transparent",fontWeight:ue?600:400,borderBottom:ue?"1px solid rgba(147,112,219,0.1)":"none"},children:Ye?H.toFixed(0):""},H)})})]}),e.jsxs("div",{id:"tpo-chart-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:H=>{const Ye=document.getElementById("price-scale-4w");Ye&&(Ye.scrollTop=H.target.scrollTop)},onMouseMove:H=>Be(H,H.currentTarget),onClick:()=>ne(!Pe),onMouseLeave:()=>{Pe||Ie({...z,show:!1})},ref:H=>{re.current=H,H&&!b.current&&ye>H.clientWidth&&(H.scrollLeft=ye-H.clientWidth,b.current=!0)},children:[z.show&&z.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:z.chartLeft+50,right:window.innerWidth-z.chartRight,height:1,top:z.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:z.clientX,top:z.chartTop,height:z.chartBottom-z.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:X.map((H,Ye)=>e.jsxs("div",{style:{width:H.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.2)",background:z.dayIdx===Ye?"rgba(186,104,200,0.2)":"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:"#ba68c8",fontWeight:700},children:H.weekday}),e.jsx("div",{style:{fontSize:8,color:"#666"},children:H.date.slice(5)})]},H.date))}),e.jsxs("div",{style:{position:"relative"},children:[Ae.map((H,Ye)=>e.jsx("div",{style:{display:"flex",height:Te,borderBottom:H%20===0?"1px solid rgba(147,112,219,0.12)":"none",background:z.price===H?"rgba(186,104,200,0.06)":"transparent"},children:X.map((ue,bt)=>{const kt=ue.lettersByPrice[H]?[...ue.lettersByPrice[H]].sort():[],At=ue.vah&&ue.val&&H<=ue.vah&&H>=ue.val;(ue.high+ue.low)/2;const $t=ue.openPriceKey&&H.toString()===ue.openPriceKey,dn=ue.maxPeriod>=0?ue.maxPeriod<26?String.fromCharCode(65+ue.maxPeriod):"A"+String.fromCharCode(65+ue.maxPeriod-26):null,Wt=ue.closePriceKey&&H.toString()===ue.closePriceKey,Kt=ue.pocPriceKey&&H.toString()===ue.pocPriceKey,Dt=ue.close&&ue.open&&ue.close>=ue.open?"#00ff88":"#ff4466";for(let jt=0;jt<Ue;jt++){const Re=H-jt*ge;ue.volumeByPrice[Re],ue.dayVPOC&&Math.abs(Re-ue.dayVPOC)<ge,ue.volVAH&&Math.abs(Re-ue.volVAH)<ge,ue.volVAL&&Math.abs(Re-ue.volVAL)<ge}return e.jsx("div",{style:{width:ue.width,flexShrink:0,height:Te,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.15)",position:"relative",paddingLeft:14,paddingRight:_+O+14},children:de==="expanded"?e.jsx("div",{style:{position:"relative",width:(ue.maxPeriod+1)*$,height:Te-2},children:kt.map((jt,Re)=>{const tt=jt.length===1?jt.charCodeAt(0)-65:26+(jt.charCodeAt(0)-65)*26+(jt.charCodeAt(1)-65),ot=jt==="A"&&$t,Jt=jt===dn&&Wt&&!ot,Rt=Kt?"#000":ot?"#fff":Jt?"#000":At?Dt:"#888",pn=Kt?"#ffffff":ot?"rgba(100,100,100,0.6)":Jt?Dt:At?`${Dt}30`:"rgba(136,136,136,0.25)",cn=Kt||ot?"1px solid #fff":Jt?`1px solid ${Dt}`:At?`1px solid ${Dt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:tt*$,width:$-1,height:Te-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Rt,background:pn,borderRadius:2,border:cn},children:jt},Re)})}):kt.map((jt,Re)=>{const tt=jt==="A"&&$t,ot=jt===dn&&Wt&&!tt,Jt=Kt?"#000":tt?"#fff":ot?"#000":At?Dt:"#888",Rt=Kt?"#ffffff":tt?"rgba(100,100,100,0.6)":ot?Dt:At?`${Dt}30`:"rgba(136,136,136,0.25)",pn=Kt||tt?"1px solid #fff":ot?`1px solid ${Dt}`:At?`1px solid ${Dt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{width:$,height:Te-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:700,color:Jt,background:Rt,borderRadius:2,marginRight:1,border:pn},children:jt},Re)})},`${ue.date}-${H}`)})},H)),X.map((H,Ye)=>{const ue=pt[Ye],bt=Ae.length*Te,kt=(H.high+H.low)/2,At=Wt=>{const Kt=Math.floor(Wt/le)*le,ft=(U-Kt)/le,Dt=1-(Wt-Kt)/le;return(ft+Dt)*Te},$t=Object.entries(H.volumeByPrice||{}).map(([Wt,Kt])=>{var jt,Re;const ft=parseFloat(Wt),Dt=((jt=H.deltaByPrice)==null?void 0:jt[Wt])??((Re=H.deltaByPrice)==null?void 0:Re[ft]);return{price:ft,vol:Kt,delta:Dt}}).filter(Wt=>Wt.vol>0).sort((Wt,Kt)=>Kt.price-Wt.price),dn=Math.max(...$t.map(Wt=>Wt.vol),1);return e.jsxs(No.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:ue+H.width-_-10,top:0,width:_,height:bt,borderLeft:"1px solid rgba(147,112,219,0.25)",overflow:"hidden"},children:$t.map((Wt,Kt)=>{const ft=At(Wt.price),Dt=1,jt=H.dayVPOC&&Math.abs(Wt.price-H.dayVPOC)<1,Re=H.volVAH&&Math.abs(Wt.price-H.volVAH)<1,tt=H.volVAL&&Math.abs(Wt.price-H.volVAL)<1,Jt=Wt.delta!==void 0&&Wt.delta!==null&&Wt.delta!==0?Wt.delta>0:Wt.price>kt;return e.jsx("div",{style:{position:"absolute",top:ft,left:4,width:`${Math.min(Wt.vol/dn*95,95)}%`,height:Dt,background:jt?"#ff9900":Re?"#00ff88":tt?"#ff4466":Jt?"#00dd77":"#cc3366",opacity:.85}},Kt)})}),e.jsx("div",{style:{position:"absolute",left:ue+H.width-8,top:At(H.close||H.low)-5,fontSize:8,color:"#666",fontWeight:500,pointerEvents:"none",zIndex:5},children:"4pm"})]},`vp-${Ye}`)}),X.map((H,Ye)=>{const ue=kt=>{const At=Math.floor(kt/le)*le,$t=(U-At)/le,dn=1-(kt-At)/le;return($t+dn)*Te},bt=pt[Ye];return(H.high+H.low)/2,e.jsxs(No.Fragment,{children:[H.ib_high&&H.ib_low&&e.jsx("div",{style:{position:"absolute",left:bt+7,top:ue(H.ib_high),width:2,height:ue(H.ib_low)-ue(H.ib_high),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),H.volVAH&&e.jsx("div",{style:{position:"absolute",left:bt+H.width-8,top:ue(H.volVAH)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),H.volVAL&&e.jsx("div",{style:{position:"absolute",left:bt+H.width-8,top:ue(H.volVAL)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${H.date}`)})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Range ",e.jsx("span",{style:{color:"#9370DB",fontWeight:600},children:(U-je).toFixed(0)})]}),e.jsxs("span",{style:{color:"#666"},children:["Days ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:se.length})]}),e.jsx("span",{style:{color:"#fff",background:"#fff",padding:"0 4px",borderRadius:2},children:e.jsx("span",{style:{color:"#000"},children:"POC"})}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" IB"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():s==="session_view"&&(n!=null&&n.sessions)?(()=>{var _,O,x,D,X,U,je,Ae,Ve,pt;const k=Object.entries((n==null?void 0:n.sessions)||{}).filter(([ye,me])=>me.profiles&&Object.keys(me.profiles).length>0);if(k.length===0)return e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No session data yet..."});const E=.5,pe=14,ae=11,xe=45,Ze=16,P=11,se=ye=>ye.length===1?ye.charCodeAt(0)-65:26+(ye.charCodeAt(0)-65)*26+(ye.charCodeAt(1)-65),Se=k.map(([ye,me])=>{const Be=me.profiles||{};let qe=0,St=0;const We={},dt={};Object.entries(Be).forEach(([Nt,K])=>{const be=Math.floor(parseFloat(Nt)/E)*E;We[be]||(We[be]=new Set),K.forEach(vt=>{We[be].add(vt);const Ht=se(vt);Ht>St&&(St=Ht)}),dt[be]=(dt[be]||0)+K.length}),Object.values(We).forEach(Nt=>{Nt.size>qe&&(qe=Nt.size)});let Yt=me.poc,Ot=0;Object.entries(dt).forEach(([Nt,K])=>{K>Ot&&(Ot=K,Yt=parseFloat(Nt))});const Lt=Math.max(qe*ae+Ze+xe+16,120),Pt=Math.max((St+1)*P+Ze+xe+16,150);return{key:ye,...me,lettersByPrice:We,volumeByPrice:dt,maxVol:Ot,sessionVPOC:Yt,maxLetters:Math.max(qe,1),maxPeriod:St,width:de==="expanded"?Pt:Lt}});let Ce=0,De=999999;k.forEach(([ye,me])=>{me.high>Ce&&(Ce=me.high),me.low<De&&(De=me.low)}),Ce=Math.ceil(Ce/E)*E+E*5,De=Math.floor(De/E)*E-E*5;const le=[];for(let ye=Ce;ye>=De;ye-=E)le.push(ye);let ge=0;const Ue=Se.map(ye=>{const me=ge;return ge+=ye.width,me});let Te=0;const $=(ye,me)=>{if(!me)return;const Be=me.getBoundingClientRect();Te=me.scrollLeft;const qe=me.scrollTop,St=ye.clientX-Be.left,We=St+Te,dt=ye.clientY-Be.top,Yt=dt-36+qe;let Ot=Se.length-1;for(let Nt=0;Nt<Se.length;Nt++)if(We<Ue[Nt]+Se[Nt].width){Ot=Nt;break}const Lt=Math.floor(Yt/pe),Pt=le[Lt]||0;Ie({show:!0,x:St,y:dt,clientX:ye.clientX,clientY:ye.clientY,chartLeft:Be.left,chartTop:Be.top,chartRight:Be.right,chartBottom:Be.bottom,scrollLeft:Te,scrollTop:qe,price:Pt,dayIdx:Ot,day:Se[Ot]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[z.show&&z.day&&Pe&&e.jsxs("div",{style:{position:"absolute",left:Math.max(60,Math.min(z.x+60,500)),top:Math.max(50,Math.min(z.y,300)),background:"rgba(20,20,35,0.95)",border:`1px solid ${((_=z.day)==null?void 0:_.color)||"#9370DB"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",pointerEvents:"none"},children:[e.jsx("div",{style:{fontSize:12,color:((O=z.day)==null?void 0:O.color)||"#ba68c8",fontWeight:700,marginBottom:6},children:(x=z.day)==null?void 0:x.display}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:(D=z.price)==null?void 0:D.toFixed(1)}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:(U=(X=z.day)==null?void 0:X.poc)==null?void 0:U.toFixed(1)}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(Ae=(je=z.day)==null?void 0:je.vah)==null?void 0:Ae.toFixed(1)}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:(pt=(Ve=z.day)==null?void 0:Ve.val)==null?void 0:pt.toFixed(1)})]})]}),e.jsxs("div",{style:{width:50,flexShrink:0,background:"rgba(15,15,25,0.95)",borderRight:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{height:36,background:"rgba(147,112,219,0.08)",borderBottom:"1px solid rgba(147,112,219,0.2)"}}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-sess",children:le.map(ye=>e.jsx("div",{style:{height:pe,fontSize:9,textAlign:"right",paddingRight:4,color:"#555",lineHeight:`${pe}px`},children:ye%10===0?ye.toFixed(0):""},ye))})]}),e.jsxs("div",{id:"tpo-session-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:ye=>{const me=document.getElementById("price-scale-sess");me&&(me.scrollTop=ye.target.scrollTop)},onMouseMove:ye=>$(ye,ye.currentTarget),onClick:()=>ne(!Pe),onMouseLeave:()=>{Pe||Ie({...z,show:!1})},children:[z.show&&z.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:z.chartLeft+50,right:window.innerWidth-z.chartRight,height:1,top:z.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:z.clientX,top:z.chartTop,height:z.chartBottom-z.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:Se.map((ye,me)=>e.jsxs("div",{style:{width:ye.width,flexShrink:0,textAlign:"center",padding:"8px 4px",borderRight:"1px solid rgba(147,112,219,0.2)",background:z.dayIdx===me?`${ye.color}20`:"transparent"},children:[e.jsx("div",{style:{fontSize:11,color:ye.color,fontWeight:700},children:ye.display}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[ye.period_count," periods"]})]},ye.key))}),e.jsxs("div",{style:{position:"relative"},children:[le.map((ye,me)=>e.jsx("div",{style:{display:"flex",height:pe,borderBottom:ye%10===0?"1px solid rgba(147,112,219,0.12)":"none",background:z.price===ye?"rgba(186,104,200,0.06)":"transparent"},children:Se.map((Be,qe)=>{var K;const St=Be.lettersByPrice[ye]?[...Be.lettersByPrice[ye]].sort():[],We=Be.volumeByPrice[ye]||0,dt=Be.maxVol>0?We/Be.maxVol*100:0,Yt=Be.sessionVPOC&&Math.abs(ye-Be.sessionVPOC)<E,Ot=Be.vah&&Be.val&&ye<=Be.vah&&ye>=Be.val,Lt=((K=Be.deltaByPrice)==null?void 0:K[ye])||0,Nt=Be.deltaByPrice&&Object.keys(Be.deltaByPrice).length>0?Lt>=0:ye>(Be.high+Be.low)/2;return e.jsxs("div",{style:{width:Be.width,flexShrink:0,height:pe,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.1)",position:"relative",paddingLeft:14,paddingRight:xe+Ze+14},children:[de==="expanded"?e.jsx("div",{style:{display:"flex",position:"relative",width:(Be.maxPeriod+1)*P,height:pe-2},children:St.map((be,vt)=>{const Ht=se(be);return e.jsx("span",{style:{position:"absolute",left:Ht*P,width:P-1,height:pe-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Ot?"#00ee88":Be.color,background:`${Be.color}30`,borderRadius:2,border:`1px solid ${Be.color}50`},children:be},vt)})}):St.map((be,vt)=>e.jsx("span",{style:{width:ae,height:pe-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Ot?"#00ee88":Be.color,background:`${Be.color}30`,borderRadius:2,marginRight:1,border:`1px solid ${Be.color}50`},children:be},vt)),We>0&&e.jsx("div",{style:{position:"absolute",right:12,width:xe,height:pe-2,display:"flex",alignItems:"center",paddingLeft:Ze,borderLeft:"1px solid rgba(147,112,219,0.15)"},children:e.jsx("div",{style:{width:`${dt}%`,height:1,marginBottom:1,opacity:.9,background:Yt?"#ff9900":Nt?"#00ee88":"#ff2266",borderRadius:0}})})]},`${Be.key}-${ye}`)})},ye)),Se.map((ye,me)=>{const Be=dt=>{const Yt=Math.floor(dt/E)*E,Ot=(Ce-Yt)/E,Lt=1-(dt-Yt)/E;return(Ot+Lt)*pe},qe=Ue[me],St=(ye.high+ye.low)/2,We=[];return ye.poc&&We.push({price:ye.poc,color:"#ffcc00",label:"",type:"poc"}),We.push({price:St,color:"#00aaff",label:"",type:"mid"}),ye.vah&&We.push({price:ye.vah,color:"#00ff88",label:"",type:"vah"}),ye.val&&We.push({price:ye.val,color:"#ff4466",label:"",type:"val"}),We.map(dt=>e.jsx("div",{style:{position:"absolute",left:qe+1,top:Be(dt.price)-5,color:dt.color,fontSize:dt.type==="mid"?10:8,fontWeight:700,zIndex:10,textShadow:"0 0 3px rgba(0,0,0,0.8)",pointerEvents:"none"},children:dt.label},`${ye.key}-${dt.type}`))})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Sessions ",e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:Se.length})]}),e.jsx("span",{style:{color:"#ffcc00"},children:" POC"}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():g.length===0?e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No TPO data yet. Waiting for trades..."}):e.jsxs(e.Fragment,{children:[(()=>{const k=Math.max(...g.map(Se=>Se.letters.length),1),E=Math.max(...g.flatMap(Se=>Se.letters.map(Ce=>Xe(Ce))),0),pe=11,ae=et||(n==null?void 0:n.tick_size)||.1,xe=(J==null?void 0:J.open_price)||(n==null?void 0:n.open_price),Ze=Math.max(...g.map(Se=>Se.price)),P=Math.min(...g.map(Se=>Se.price)),se=(Ze+P)/2;return g.map(({price:Se,letters:Ce})=>{const De=(J==null?void 0:J.poc)&&Math.abs(Se-J.poc)<ae,le=(J==null?void 0:J.vah)&&Math.abs(Se-J.vah)<ae,ge=(J==null?void 0:J.val)&&Math.abs(Se-J.val)<ae,Ue=(J==null?void 0:J.vah)&&(J==null?void 0:J.val)&&Se<=J.vah&&Se>=J.val,Te=(J==null?void 0:J.ib_high)&&(J==null?void 0:J.ib_low)&&Se<=J.ib_high&&Se>=J.ib_low;J!=null&&J.ib_high&&Math.abs(Se-J.ib_high)<ae,J!=null&&J.ib_low&&Math.abs(Se-J.ib_low)<ae;const $=Ce.length===1,_=(n==null?void 0:n.current_price)&&Math.abs(Se-n.current_price)<ae,O=xe&&Math.abs(Se-xe)<ae,x=Math.abs(Se-se)<ae;return e.jsxs("div",{style:{display:"flex",alignItems:"center",height:16,position:"relative",background:Te?"rgba(0, 188, 212, 0.08)":"transparent"},children:[e.jsx("div",{style:{width:55,textAlign:"right",paddingRight:6,fontSize:9,color:De?"#fff":_?"#00ff88":"#555",fontWeight:De||_?700:400,flexShrink:0},children:Se.toFixed(1)}),e.jsxs("div",{style:{width:40,fontSize:8,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:4,flexShrink:0,gap:2},children:[le&&!De&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAH"}),ge&&!De&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAL"}),x&&!De&&e.jsx("span",{style:{color:"#ff9800",fontSize:7},children:"Mid"}),O&&!De&&e.jsx("span",{style:{color:"#888",fontSize:7},children:"Open"}),_&&e.jsx("span",{style:{color:"#00ff88"},children:""})]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",gap:de==="compact"?1:0,position:"relative",minHeight:14,minWidth:de==="expanded"?(E+1)*pe:"auto",overflowX:de==="expanded"?"visible":"hidden"},children:de==="compact"?Ce.map((D,X)=>{const U=D==="A"&&O;return e.jsx("div",{style:{width:13,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:De?"#ffffff":U?"rgba(100,100,100,0.6)":$?"rgba(255,68,102,0.9)":Ue?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:8,fontWeight:600,color:De?"#1a1a2e":"#fff",flexShrink:0,border:De?"none":U?"1px solid #fff":Ue?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:D},`${Se}-${D}-${X}`)}):e.jsx("div",{style:{position:"relative",width:(E+1)*pe,height:14},children:Ce.map((D,X)=>{const U=Xe(D),je=D==="A"&&O;return e.jsx("div",{style:{position:"absolute",left:U*pe,width:pe-1,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:De?"#ffffff":je?"rgba(100,100,100,0.6)":$?"rgba(255,68,102,0.9)":Ue?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:7,fontWeight:600,color:De?"#1a1a2e":"#fff",border:De?"none":je?"1px solid #fff":Ue?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:D},`${Se}-${D}-${X}`)})})}),e.jsx("div",{style:{width:60,height:12,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:4,flexShrink:0},children:e.jsx("div",{style:{height:10,width:`${Ce.length/k*100}%`,background:De?"rgba(255,255,255,0.6)":Ue?"rgba(186, 104, 200, 0.5)":"rgba(100,100,120,0.4)",borderRadius:1}})})]},Se)})})(),(J==null?void 0:J.ib_high)&&(J==null?void 0:J.ib_low)&&e.jsxs("div",{style:{marginTop:8,padding:"6px 10px",background:"rgba(0, 188, 212, 0.15)",borderRadius:4,border:"1px solid rgba(0, 188, 212, 0.3)",display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:"#00bcd4"},children:"IB Range"}),e.jsxs("span",{style:{color:"#fff"},children:[(To=J.ib_high)==null?void 0:To.toFixed(1)," - ",(Wo=J.ib_low)==null?void 0:Wo.toFixed(1),e.jsxs("span",{style:{color:"#888",marginLeft:8},children:["(",(J.ib_high-J.ib_low||0).toFixed(1)," pts)"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(20,20,28,0.6)",borderRadius:8,border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"HL range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.high&&(J!=null&&J.low)?(J.high-J.low).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VA range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.vah&&(J!=null&&J.val)?(J.vah-J.val).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAH"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:((Yo=J==null?void 0:J.vah)==null?void 0:Yo.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAL"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:((lo=J==null?void 0:J.val)==null?void 0:lo.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"POC"}),e.jsx("div",{style:{color:"#ffaa00",fontFamily:"monospace"},children:((ao=J==null?void 0:J.poc)==null?void 0:ao.toFixed(1))||"--"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,fontSize:11,marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"Total vol"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.volume?J.volume>=1e3?(J.volume/1e3).toFixed(2)+"K":J.volume:"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB high"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((Mo=J==null?void 0:J.ib_high)==null?void 0:Mo.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB low"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((ni=J==null?void 0:J.ib_low)==null?void 0:ni.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:J!=null&&J.ib_high&&(J!=null&&J.ib_low)?(J.ib_high-J.ib_low).toFixed(1):"--"})]})]})]})]})})]}),!R&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Day Type"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("div",{style:{padding:"8px 16px",background:`${V[q.day_type]||"#888"}20`,border:`1px solid ${V[q.day_type]||"#888"}`,borderRadius:8,color:V[q.day_type]||"#888",fontWeight:700,fontSize:14},children:q.day_type_name||"Developing"}),e.jsxs("div",{style:{color:"#8b8b8b",fontSize:12},children:[q.day_type_confidence||0,"%"]})]}),q.day_type_scores&&Object.entries(q.day_type_scores).map(([k,E])=>e.jsxs("div",{style:{marginBottom:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,marginBottom:2},children:[e.jsx("span",{style:{color:"#aaa",textTransform:"capitalize"},children:k.replace("_"," ")}),e.jsxs("span",{style:{color:V[k]||"#888"},children:[E,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min(E,100)}%`,background:V[k]||"#888",borderRadius:2}})})]},k)),q.trade_setup&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"rgba(0,255,136,0.08)",borderRadius:6,border:"1px solid rgba(0,255,136,0.2)"},children:[e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:4},children:"TRADE SETUP"}),e.jsx("div",{style:{fontSize:12,color:"#ccc"},children:q.trade_setup})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Open Type (RTH)"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:e.jsx("div",{style:{padding:"8px 16px",background:`${M[q.open_type]||"#888"}20`,border:`1px solid ${M[q.open_type]||"#888"}`,borderRadius:8,color:M[q.open_type]||"#888",fontWeight:700,fontSize:14},children:((Xo=q.open_type_info)==null?void 0:Xo.name)||"Developing"})}),q.open_type_info&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:12,color:"#aaa",marginBottom:8},children:q.open_type_info.description}),e.jsxs("div",{style:{display:"flex",gap:16,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Conviction: "}),e.jsx("span",{style:{color:M[q.open_type]||"#888",fontWeight:600},children:((Ko=q.open_type_info)==null?void 0:Ko.conviction)||"N/A"})]}),(n==null?void 0:n.open_direction)&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Direction: "}),e.jsx("span",{style:{color:(n==null?void 0:n.open_direction)==="up"?"#00ff88":"#ff4466",fontWeight:600},children:(Zn=n==null?void 0:n.open_direction)==null?void 0:Zn.toUpperCase()})]})]})]}),(n==null?void 0:n.ab_overlap)!==void 0&&e.jsxs("div",{style:{marginTop:12,fontSize:11},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"AB Overlap"}),e.jsxs("span",{style:{color:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88"},children:[n==null?void 0:n.ab_overlap,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min((n==null?void 0:n.ab_overlap)||0,100)}%`,background:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88",borderRadius:2}})})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Profile Shape"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("div",{style:{width:48,height:48,background:"rgba(255,255,255,0.05)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:800,color:((Rn=q.profile_shape_info)==null?void 0:Rn.sentiment)==="Bullish"?"#00ff88":((gi=q.profile_shape_info)==null?void 0:gi.sentiment)==="Bearish"?"#ff4466":"#888"},children:N[q.profile_shape]||""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((xi=q.profile_shape_info)==null?void 0:xi.sentiment)==="Bullish"?"#00ff88":((yi=q.profile_shape_info)==null?void 0:yi.sentiment)==="Bearish"?"#ff4466":"#aaa"},children:((mi=q.profile_shape_info)==null?void 0:mi.name)||"Developing"}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b"},children:((bi=q.profile_shape_info)==null?void 0:bi.sentiment)||"N/A"})]})]}),((vi=q.profile_shape_info)==null?void 0:vi.description)&&e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:q.profile_shape_info.description})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Metrics"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"IB Range %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[n!=null&&n.ib_range?(n.ib_range/n.avg_daily_range*100).toFixed(0):"--","%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"Range Ext %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[((ee=n==null?void 0:n.range_extension_pct)==null?void 0:ee.toFixed(0))||"--","%"]})]})]}),(n==null?void 0:n.ib_high)&&(n==null?void 0:n.ib_low)&&(n==null?void 0:n.ib_range)&&(()=>{const k=n.ib_range,E=q.day_type||"normal",pe=E==="trend"?2:E==="normal_var"?1.5:E==="neutral"?.5:1,ae=k*pe,xe=n.high||n.ib_high,Ze=n.low||n.ib_low,P=Math.max(0,xe-n.ib_high),se=Math.max(0,n.ib_low-Ze),Se=Math.max(0,ae-P),Ce=Math.max(0,ae-se),De=n.ib_high+ae,le=n.ib_low-ae;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",marginBottom:12}}),e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Price Targets"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",marginBottom:2},children:"Upside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#00ff88"},children:["$",De.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["+",Se.toFixed(1)," pts remaining"]})]}),e.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#ff4466",marginBottom:2},children:"Downside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#ff4466"},children:["$",le.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["-",Ce.toFixed(1)," pts remaining"]})]})]}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:8,textAlign:"center"},children:["Based on ",pe,"x IB (",E.replace("_"," "),")"]})]})})()]})]}),e.jsx("div",{style:{gridColumn:"1 / -1",marginTop:20},children:e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>L(!W),style:{width:"100%",padding:"16px 20px",background:"transparent",border:"none",borderBottom:W?"1px solid rgba(255,255,255,0.08)":"none",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{children:"Historic TPO Profiles (Last 8 Weeks)"}),p&&e.jsxs("span",{style:{fontSize:11,color:"#8b8b8b",fontWeight:400},children:[p.days," trading days"]})]}),e.jsx("span",{style:{fontSize:18,transform:W?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"},children:""})]}),W&&e.jsx("div",{style:{padding:20},children:y?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading historic TPO data..."]}):((nt=p==null?void 0:p.profiles)==null?void 0:nt.length)>0?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("button",{onClick:()=>Ge(!Z),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"#aaa",cursor:"pointer",fontSize:12,fontWeight:500},children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,background:Z?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.1)",color:Z?"#00ff88":"#888",fontSize:12,fontWeight:700},children:Z?"":"+"}),e.jsxs("span",{style:{color:Z?"#fff":"#888"},children:[Z?"Hide":"Show"," Data Table"]}),e.jsxs("span",{style:{fontSize:10,color:"#666"},children:["(",p.profiles.length," rows)"]})]}),e.jsxs("button",{onClick:()=>{const k=["Date","Day","Open","High","Low","Close","POC","VAH","VAL","IB_High","IB_Low","IB_Range","Range","Day_Type","Shape"],E=p.profiles.map(P=>{var se,Se,Ce,De,le,ge,Ue,Te,$,_,O;return[P.date,P.weekday,((se=P.open)==null?void 0:se.toFixed(2))||"",((Se=P.high)==null?void 0:Se.toFixed(2))||"",((Ce=P.low)==null?void 0:Ce.toFixed(2))||"",((De=P.close)==null?void 0:De.toFixed(2))||"",((le=P.poc)==null?void 0:le.toFixed(2))||"",((ge=P.vah)==null?void 0:ge.toFixed(2))||"",((Ue=P.val)==null?void 0:Ue.toFixed(2))||"",((Te=P.ib_high)==null?void 0:Te.toFixed(2))||"",(($=P.ib_low)==null?void 0:$.toFixed(2))||"",((_=P.ib_range)==null?void 0:_.toFixed(2))||"",((O=P.range)==null?void 0:O.toFixed(2))||"",P.day_type||"",P.profile_shape||""].join(",")}),pe=[k.join(","),...E].join(`
`),ae=new Blob([pe],{type:"text/csv"}),xe=URL.createObjectURL(ae),Ze=document.createElement("a");Ze.href=xe,Ze.download=`tpo_historic_${new Date().toISOString().slice(0,10)}.csv`,Ze.click(),URL.revokeObjectURL(xe)},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(0,170,255,0.15)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:6,color:"#00aaff",cursor:"pointer",fontSize:11,fontWeight:600},children:[e.jsx("span",{children:""})," Export CSV"]})]}),Z&&e.jsx("div",{style:{overflowX:"auto",marginBottom:20},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,255,255,0.15)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#8b8b8b",fontWeight:500},children:"Date"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b",fontWeight:500},children:"Day"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontWeight:600},children:"POC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAH"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB H"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB L"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"High"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"Low"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b"},children:"Range"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Type"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Shape"})]})}),e.jsx("tbody",{children:p.profiles.map((k,E)=>{var Ze,P,se,Se,Ce,De,le,ge;const pe={normal:"#00aaff",trend:"#ff6600",normal_var:"#00ff88",neutral:"#9370DB",non_trend:"#888888",double_dist:"#ff4466"},ae={normal:"Normal",trend:"Trend",normal_var:"NV",neutral:"Neutral",non_trend:"Non-Tr",double_dist:"DD"},xe={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"};return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.06)",background:E===0?"rgba(0,255,136,0.05)":"transparent"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"monospace"},children:k.date}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:k.weekday}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontFamily:"monospace",fontWeight:600},children:((Ze=k.poc)==null?void 0:Ze.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((P=k.vah)==null?void 0:P.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((se=k.val)==null?void 0:se.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((Se=k.ib_high)==null?void 0:Se.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((Ce=k.ib_low)==null?void 0:Ce.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((De=k.high)==null?void 0:De.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((le=k.low)==null?void 0:le.toFixed(2))||"--"}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b",fontFamily:"monospace"},children:["$",((ge=k.range)==null?void 0:ge.toFixed(2))||"--"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,background:`${pe[k.day_type]||"#888"}30`,color:pe[k.day_type]||"#888",border:`1px solid ${pe[k.day_type]||"#888"}50`},children:ae[k.day_type]||k.day_type})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",width:22,height:22,lineHeight:"22px",textAlign:"center",borderRadius:4,fontSize:12,fontWeight:700,background:`${xe[k.profile_shape]||"#888"}20`,color:xe[k.profile_shape]||"#888",border:`1px solid ${xe[k.profile_shape]||"#888"}50`},children:k.profile_shape})})]},k.date)})})]})}),(()=>{const k=p.profiles,E=k.reduce((P,se)=>P+(se.poc||0),0)/k.length||0,pe=k.reduce((P,se)=>P+(se.range||0),0)/k.length||0,ae=k.filter(P=>P.ib_range),xe=ae.reduce((P,se)=>P+se.ib_range,0)/ae.length||0,Ze=pe>0?xe/pe*100:0;return e.jsxs("div",{style:{marginTop:20,padding:16,background:"rgba(30,30,40,0.6)",borderRadius:8,display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg POC"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#ffaa00",fontFamily:"monospace"},children:["$",E.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",pe.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",xe.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB %"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[Ze.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Trend Days"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#ff6600"},children:k.filter(P=>P.day_type==="trend").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Normal Var"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#00ff88"},children:k.filter(P=>P.day_type==="normal_var").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Non-Trend"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#888"},children:k.filter(P=>P.day_type==="non_trend").length})]})]})})(),(()=>{const k=p.profiles,E=["Mon","Tue","Wed","Thu","Fri"],pe={normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},ae={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"},xe={};E.forEach(P=>xe[P]=[]),k.forEach(P=>{xe[P.weekday]&&xe[P.weekday].push(P)});const Ze=E.map(P=>{const se=xe[P];if(se.length===0)return{day:P,count:0};const Se={},Ce={};se.forEach($=>{Se[$.day_type]=(Se[$.day_type]||0)+1,Ce[$.profile_shape]=(Ce[$.profile_shape]||0)+1});const De=Object.entries(Se).sort(($,_)=>_[1]-$[1])[0],le=Object.entries(Ce).sort(($,_)=>_[1]-$[1])[0],ge=se.reduce(($,_)=>$+(_.range||0),0)/se.length,Ue=se.filter($=>$.ib_range).reduce(($,_)=>$+_.ib_range,0)/se.filter($=>$.ib_range).length||0,Te=ge>0?Ue/ge*100:0;return{day:P,count:se.length,profiles:se,mostCommonType:De?De[0]:"N/A",typePercent:De?Math.round(De[1]/se.length*100):0,mostCommonShape:le?le[0]:"N/A",shapePercent:le?Math.round(le[1]/se.length*100):0,avgRange:ge.toFixed(2),avgIbRange:Ue.toFixed(2),ibPct:Te.toFixed(1),typeCounts:Se,shapeCounts:Ce}});return e.jsxs("div",{style:{marginTop:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,marginBottom:16,color:"#fff",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Day of Week Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:Ze.map(P=>e.jsxs("div",{style:{background:"rgba(30,30,40,0.8)",borderRadius:8,padding:12,border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#fff",marginBottom:8},children:P.day}),e.jsxs("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:[P.count," samples"]}),P.count>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:8,marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Most Common Type"}),e.jsxs("div",{style:{display:"inline-block",padding:"2px 8px",borderRadius:4,background:`${pe[P.mostCommonType]||"#666"}22`,border:`1px solid ${pe[P.mostCommonType]||"#666"}`,color:pe[P.mostCommonType]||"#666",fontSize:10,fontWeight:600},children:[P.mostCommonType==="normal_var"?"N-Var":P.mostCommonType==="double_dist"?"Dbl-D":P.mostCommonType==="non_trend"?"Non-T":P.mostCommonType.charAt(0).toUpperCase()+P.mostCommonType.slice(1),e.jsxs("span",{style:{marginLeft:4,opacity:.7},children:[P.typePercent,"%"]})]})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Shape"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:4,background:`${ae[P.mostCommonShape]||"#666"}22`,border:`1px solid ${ae[P.mostCommonShape]||"#666"}44`,color:ae[P.mostCommonShape]||"#888",fontSize:11,fontWeight:700},children:[P.mostCommonShape,e.jsxs("span",{style:{fontSize:9,fontWeight:400,opacity:.7},children:[P.shapePercent,"%"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4,marginTop:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:11,color:"#fff",fontFamily:"monospace"},children:["$",P.avgRange]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontFamily:"monospace"},children:[P.ibPct,"%"]})]})]})]})]},P.day))}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Trading Day Heatmap",e.jsx("span",{style:{fontSize:10,color:"#666",marginLeft:"auto"},children:"Most recent at top"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:20},children:Ze.map(P=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#fff",marginBottom:10,textAlign:"center",fontWeight:600,padding:"6px 0",background:"rgba(255,255,255,0.05)",borderRadius:6},children:P.day}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:3,minHeight:90},children:P.profiles.slice(0,12).map((se,Se)=>{var Ue;const Ce=se.vah&&se.val?se.vah-se.val:0,De=se.range>0?Ce/se.range*100:0,le=se.range>0&&se.ib_range?se.ib_range/se.range*100:0,ge=pe[se.day_type]||"#666";return e.jsxs("div",{style:{aspectRatio:"1",borderRadius:4,background:`linear-gradient(135deg, ${ge} 0%, ${ge}99 100%)`,cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 2px 8px ${ge}33`,transition:"all 0.2s ease",border:`1px solid ${ge}44`},onMouseEnter:Te=>{Te.currentTarget.style.transform="scale(1.1)",Te.currentTarget.style.boxShadow=`0 4px 20px ${ge}66`,Te.currentTarget.style.zIndex="10"},onMouseMove:Te=>{m({...se,vaRange:Ce,vaPct:De,ibPct:le,baseColor:ge,x:Te.clientX,y:Te.clientY})},onMouseLeave:Te=>{Te.currentTarget.style.transform="scale(1)",Te.currentTarget.style.boxShadow=`0 2px 8px ${ge}33`,Te.currentTarget.style.zIndex="1",m(null)},children:[e.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:se.profile_shape}),e.jsx("span",{style:{position:"absolute",bottom:1,right:2,fontSize:7,color:"rgba(255,255,255,0.6)"},children:(Ue=se.date)==null?void 0:Ue.slice(8)})]},Se)})}),P.count>12&&e.jsxs("div",{style:{fontSize:8,color:"#666",textAlign:"center",marginTop:4},children:["+",P.count-12," more"]})]},P.day))}),e.jsx("div",{style:{display:"flex",gap:20,marginTop:20,paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.08)",flexWrap:"wrap",justifyContent:"center"},children:Object.entries(pe).map(([P,se])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:`${se}15`,borderRadius:20,border:`1px solid ${se}33`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:`linear-gradient(135deg, ${se} 0%, ${se}aa 100%)`,boxShadow:`0 0 6px ${se}66`}}),e.jsx("span",{style:{fontSize:10,color:"#bbb",fontWeight:500},children:P==="normal_var"?"Normal Var":P==="double_dist"?"Double Dist":P==="non_trend"?"Non-Trend":P.charAt(0).toUpperCase()+P.slice(1)})]},P))}),f&&(()=>{var Se,Ce,De,le,ge,Ue,Te,$,_,O,x,D;const P=f.close>f.open,se=P?"#00ff88":"#ff4466";return e.jsxs("div",{style:{position:"fixed",left:f.x+15,top:f.y+15,transform:f.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:260,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px ${f.baseColor}44, 0 0 20px ${f.baseColor}22`,zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${f.baseColor}33 0%, ${f.baseColor}11 100%)`,borderBottom:`1px solid ${f.baseColor}44`,padding:"10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:f.date}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:f.weekday})]})]}),e.jsx("span",{style:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,fontSize:13,fontWeight:800,background:"rgba(255,255,255,0.1)",color:"#fff"},children:f.profile_shape})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${f.baseColor}33`,color:f.baseColor,border:`1px solid ${f.baseColor}55`,textTransform:"uppercase"},children:(Se=f.day_type)==null?void 0:Se.replace("_"," ")}),f.open_type&&f.open_type!=="developing"&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.4)",textTransform:"uppercase"},children:f.open_type})]})]}),e.jsxs("div",{style:{margin:"10px 14px",padding:"10px 12px",borderRadius:8,background:`${se}15`,border:`1px solid ${se}30`},children:[e.jsxs("div",{style:{fontSize:10,color:se,marginBottom:8,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{children:P?"":""}),"PRICE ACTION"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:[{label:"O",value:f.open,color:"#fff"},{label:"H",value:f.high,color:P?"#00ff88":"#fff"},{label:"L",value:f.low,color:P?"#fff":"#ff4466"},{label:"C",value:f.close,color:"#fff"}].map(X=>{var U;return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:7,color:"#888",marginBottom:2},children:X.label}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:X.color,fontFamily:"monospace"},children:["$",(U=X.value)==null?void 0:U.toFixed(2)]})]},X.label)})})]}),e.jsxs("div",{style:{padding:"0 14px 10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00ff88",fontFamily:"monospace"},children:["$",(Ce=f.high)==null?void 0:Ce.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"DAY RANGE"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#fff",fontFamily:"monospace"},children:["$",(De=f.range)==null?void 0:De.toFixed(2)]}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:2},children:"100%"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#ff4466",fontFamily:"monospace"},children:["$",(le=f.low)==null?void 0:le.toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB HIGH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((ge=f.ib_high)==null?void 0:ge.toFixed(2))||"N/A"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#9370DB",fontFamily:"monospace"},children:["$",((Ue=f.ib_range)==null?void 0:Ue.toFixed(2))||"N/A"]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(Te=f.ibPct)==null?void 0:Te.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB LOW"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",(($=f.ib_low)==null?void 0:$.toFixed(2))||"N/A"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(_=f.vah)==null?void 0:_.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"VA RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#00aaff",fontFamily:"monospace"},children:["$",(O=f.vaRange)==null?void 0:O.toFixed(2)]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(x=f.vaPct)==null?void 0:x.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAL"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(D=f.val)==null?void 0:D.toFixed(2)]})]})]})]})]})})()]}),e.jsxs("div",{style:{marginTop:20,background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Day Type Distribution by Weekday"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:Ze.map(P=>{var De,le;const se=P.count;let Se=0;const Ce=Object.entries(P.typeCounts||{}).sort((ge,Ue)=>Ue[1]-ge[1]).map(([ge,Ue])=>{const Te=se>0?Ue/se*100:0,$=Se;return Se+=Te,{type:ge,count:Ue,percent:Te,startPercent:$}});return e.jsxs("div",{style:{textAlign:"center",position:"relative"},children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:8,fontWeight:600},children:P.day}),e.jsx("div",{style:{width:70,height:70,borderRadius:"50%",margin:"0 auto",background:se>0?`conic-gradient(${Ce.map(ge=>`${pe[ge.type]} ${ge.startPercent}% ${ge.startPercent+ge.percent}%`).join(", ")})`:"rgba(50,50,60,0.5)",position:"relative",boxShadow:"0 2px 12px rgba(0,0,0,0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:ge=>{ge.currentTarget.style.transform="scale(1.1)",ge.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)"},onMouseMove:ge=>{c({day:P.day,total:se,segments:Ce,avgRange:P.avgRange,avgIbRange:P.avgIbRange,ibPct:P.ibPct,x:ge.clientX,y:ge.clientY})},onMouseLeave:ge=>{ge.currentTarget.style.transform="scale(1)",ge.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.3)",c(null)},children:e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:40,height:40,borderRadius:"50%",background:"linear-gradient(135deg, #1a1a2e 0%, #252540 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#fff"},children:se})}),Ce[0]&&e.jsxs("div",{style:{marginTop:8,fontSize:9,color:pe[Ce[0].type],fontWeight:600},children:[Ce[0].type==="normal_var"?"N-Var":Ce[0].type==="double_dist"?"Dbl-D":Ce[0].type==="non_trend"?"Non-T":((De=Ce[0].type)==null?void 0:De.charAt(0).toUpperCase())+((le=Ce[0].type)==null?void 0:le.slice(1)),e.jsxs("span",{style:{color:"#666",marginLeft:4},children:[Ce[0].percent.toFixed(0),"%"]})]})]},P.day)})}),C&&e.jsxs("div",{style:{position:"fixed",left:C.x+15,top:C.y+15,transform:C.x>window.innerWidth-260?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:200,boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1)",zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:C.day})]}),e.jsxs("span",{style:{fontSize:11,color:"#888",background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:10},children:[C.total," days"]})]}),e.jsxs("div",{style:{padding:"12px 14px"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:8,fontWeight:600,textTransform:"uppercase"},children:"Day Type Distribution"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:C.segments.map((P,se)=>{var Ce,De;const Se=P.type==="normal_var"?"Normal Var":P.type==="double_dist"?"Double Dist":P.type==="non_trend"?"Non-Trend":((Ce=P.type)==null?void 0:Ce.charAt(0).toUpperCase())+((De=P.type)==null?void 0:De.slice(1));return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:3,background:pe[P.type],boxShadow:`0 0 6px ${pe[P.type]}66`}}),e.jsx("span",{style:{fontSize:11,color:"#ccc",flex:1},children:Se}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:pe[P.type]},children:P.count}),e.jsx("div",{style:{width:50,height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${P.percent}%`,height:"100%",background:pe[P.type],borderRadius:2}})}),e.jsxs("span",{style:{fontSize:10,color:"#888",width:32,textAlign:"right"},children:[P.percent.toFixed(0),"%"]})]},se)})}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.08)",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG RANGE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",C.avgRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG IB"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",C.avgIbRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[C.ibPct,"%"]})]})]})]})]})]})]})})()]}):e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No historic data available"})})]})})]})},Dg=({settings:t,onSettingsChange:n})=>{const[o,i]=B.useState({ticker:"GC1!",current_price:0,delta_5m:0,delta_30m:0,cumulative_delta:0,ib_high:0,ib_low:0,ib_midpoint:0,ib_range:0,pdpoc:0,pd_high:0,pd_low:0,vwap:0,session_high:0,session_low:0,buying_imbalance_pct:0,absorption_ratio:0,stacked_buy_imbalances:0,current_phase:"CONNECTING...",conditions_met:0,entry_signal:!1,last_update:"",market_open:!1,candle_30m_stats:{avg:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},max:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},min:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0}}}),[r,s]=B.useState(!1),[l,a]=B.useState(0),[d,p]=B.useState(new Date),[w,y]=B.useState([]),[u,W]=B.useState({gamma_environment:"UNKNOWN",gamma_regime:"UNKNOWN",total_gex:0,zero_gamma:0,max_pain:0,key_levels:[],gex_profile:[],gex_levels:[],call_wall:0,put_wall:0,hvl:0,gamma_flip:0,beta_spx:0,beta_dxy:0,ib_locked:!1,ib_session_name:"",pd_high:0,pd_low:0,pdpoc:0,session_high:0,session_low:0,data_source:"CONNECTING"}),[L,Z]=B.useState({etfs:[],total_flow_1d_mm:0,total_flow_5d_mm:0,timestamp:null}),[Ge,f]=B.useState({gold:{overall_sentiment:"neutral",signals:[]},bitcoin:{overall_sentiment:"neutral",signals:[],etf_flow_1d:0},timestamp:null}),[m,C]=B.useState({btc_options:{put_call_ratio:0,max_pain:0,call_wall:0,put_wall:0,sentiment:"neutral"}}),[c,F]=B.useState({funding_rates:{average:0,annualized:0,sentiment:"neutral"}}),{isMobile:S}=$i();B.useEffect(()=>{const G=async()=>{const h=performance.now();try{const T=await fetch(on);if(T.ok){const Le=await T.json(),z=performance.now(),Ie=Math.round(z-h);i(Le),W(Pe=>({...Pe,...Le})),s(!0),a(Ie),p(new Date)}else throw new Error("Backend error")}catch{s(!1),a(0),i(Le=>({...Le,current_phase:"DISCONNECTED"})),W(Le=>({...Le,data_source:"DISCONNECTED"}))}};G();const v=setInterval(G,300);return()=>clearInterval(v)},[]),B.useEffect(()=>{const G=async()=>{try{if((o==null?void 0:o.contract)==="BTC-SPOT"){const Le=await fetch(`${on.replace("?","/etf-flows?")}`);if(Le.ok){const Pe=await Le.json();Z(Pe)}const z=await fetch(`${on.replace("?","/deribit-options?")}`);if(z.ok){const Pe=await z.json();C(Pe)}const Ie=await fetch(`${on.replace("?","/funding-rates?")}`);if(Ie.ok){const Pe=await Ie.json();F(Pe)}}const T=await fetch(`${on.replace("?","/institutional?")}`);if(T.ok){const Le=await T.json();f(Le)}}catch(h){console.error("Error fetching institutional data:",h)}};G();const v=setInterval(G,6e4);return()=>clearInterval(v)},[o==null?void 0:o.contract]);const R=(G,v=5)=>!G||G<=0||!o.current_price||o.current_price<=0?!1:Math.abs(G-o.current_price)<=v,I=(G,v,h=5)=>R(G,h)?{color:"#ffffff",textShadow:"0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(255,255,255,0.5)",fontWeight:700}:{color:v},de=({active:G,conditionsMet:v})=>e.jsxs("div",{style:{padding:16,borderRadius:12,background:G?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.02)",border:`2px solid ${G?"#00ff88":"rgba(255,255,255,0.1)"}`,textAlign:"center",animation:G?"glow 1s infinite alternate":"none"},children:[e.jsx("div",{style:{fontSize:14,color:"#888",marginBottom:8},children:"ENTRY SIGNAL"}),e.jsx("div",{style:{fontSize:36,fontWeight:700,color:G?"#00ff88":"#444"},children:G?" READY":" WAITING"}),e.jsxs("div",{style:{fontSize:14,color:G?"#00ff88":"#666",marginTop:8},children:[v,"/6 Conditions Met"]})]});return e.jsxs("div",{style:{...Q.liveDashboard,maxWidth:S?"100%":"1000px",padding:S?"12px":"0"},children:[e.jsx(bg,{}),e.jsx("div",{style:{marginBottom:S?16:24},children:e.jsx(de,{active:o.entry_signal,conditionsMet:o.conditions_met})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:S?12:16,padding:S?12:20,marginBottom:S?12:16},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#888",fontSize:S?12:14},children:"Initial Balance Sessions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(2, 1fr)",gap:12},children:u.ibs&&["japan","london","us","ny"].map(G=>{const v=u.ibs[G];if(!v)return null;const h=v.status==="ACTIVE",T=v.status==="ENDED",Le=v.high>0&&v.low>0;return e.jsxs("div",{style:{background:h?"rgba(0,255,136,0.05)":"rgba(255,255,255,0.02)",border:`2px solid ${h?"rgba(0,255,136,0.6)":T?"rgba(255,170,0,0.4)":"rgba(136,136,136,0.2)"}`,borderRadius:12,padding:12,position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:h?"#00ff88":T?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:v.name}),e.jsxs("div",{style:{fontSize:10,color:"#666",marginTop:2},children:[v.start," - ",v.end," ET"]})]}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:9,fontWeight:700,letterSpacing:1,background:h?"#001a00":T?"#1a1000":"#111",color:h?"#00ff88":T?"#ffaa00":"#666",border:`1px solid ${h?"#00ff88":T?"#ffaa00":"#333"}`,animation:h?"pulse 1.5s ease-in-out infinite":"none"},children:h?" ACTIVE":T?" ENDED":" WAITING"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:6},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"HIGH"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...I(Le?v.high:0,Le?"#ff4466":"#444")},children:Le?`$${v.high.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"MID"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...I(Le?v.mid:0,Le?"#ffaa00":"#444")},children:Le?`$${v.mid.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"LOW"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...I(Le?v.low:0,Le?"#00ff88":"#444")},children:Le?`$${v.low.toFixed(2)}`:"--"})]})]})]},G)})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(136,136,136,0.3)",borderRadius:16,padding:20,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{margin:0,color:"#888",fontSize:14},children:" Previous Day Levels"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:"rgba(136,136,136,0.15)",color:"#aaa",fontFamily:"monospace"},children:u.pd_date_range||"Loading..."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(3, 1fr)",gap:S?8:16},children:[e.jsxs("div",{style:Q.levelCard,children:[e.jsx("div",{style:Q.levelLabel,children:"pd High"}),e.jsxs("div",{style:{...Q.levelValue,...I(u.pd_high,"#ff4466")},children:["$",u.pd_high&&u.pd_high>0?u.pd_high.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:Q.levelCard,children:[e.jsx("div",{style:Q.levelLabel,children:"pdPOC"}),e.jsxs("div",{style:{...Q.levelValue,...I(u.pdpoc||o.pdpoc,"#ffaa00")},children:["$",u.pdpoc&&u.pdpoc>0?u.pdpoc.toFixed(2):o.pdpoc&&o.pdpoc>0?o.pdpoc.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:Q.levelCard,children:[e.jsx("div",{style:Q.levelLabel,children:"pd Low"}),e.jsxs("div",{style:{...Q.levelValue,...I(u.pd_low,"#00ff88")},children:["$",u.pd_low&&u.pd_low<999999?u.pd_low.toFixed(2):"0.00"]})]})]})]}),e.jsx(Mg,{metrics:o,settings:t}),(()=>{const G=o.dayHigh||o.day_high||0,v=o.dayLow||o.day_low||0,h=G-v,T=o.pd_high||0,Le=o.pd_low||0,z=T-Le,Ie=h<100&&z>100,Pe=Ie?T:G,ne=Ie?Le:v,ze=o.current_price||0,b=Pe-ne;if(b<=0)return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(249,115,22,0.05) 0%, rgba(255,68,102,0.05) 100%)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:16,padding:20,marginTop:20,textAlign:"center"},children:[e.jsx("h3",{style:{margin:0,color:"#f97316",fontSize:14,marginBottom:8},children:" Fibonacci Levels & Range Analysis"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Awaiting market data..."})]});const _e=(Pe+ne)/2,re=o.pd_close||0,He=o.pd_open||0,rt=Ie?re>0&&He>0?re<He:!0:ze>0?ze<_e:!0,zt=rt?[{level:"100%",price:Pe,color:"#ff4466",desc:"Day High"},{level:"78.6%",price:ne+b*.786,color:"#ff6b6b",desc:"Deep Retracement"},{level:"61.8%",price:ne+b*.618,color:"#ffd93d",desc:"Golden Ratio"},{level:"50%",price:ne+b*.5,color:"#f97316",desc:"Mid Point"},{level:"38.2%",price:ne+b*.382,color:"#00bcd4",desc:"Shallow Retracement"},{level:"23.6%",price:ne+b*.236,color:"#10B981",desc:"Minor Retracement"},{level:"0%",price:ne,color:"#00ff88",desc:"Day Low"},{level:"-27%",price:ne-b*.27,color:"#ff1744",desc:"Extension"},{level:"-62%",price:ne-b*.618,color:"#d50000",desc:"Deep Extension"}]:[{level:"0%",price:Pe,color:"#ff4466",desc:"Day High"},{level:"23.6%",price:Pe-b*.236,color:"#ff6b6b",desc:"Minor Retracement"},{level:"38.2%",price:Pe-b*.382,color:"#ffd93d",desc:"Shallow Retracement"},{level:"50%",price:Pe-b*.5,color:"#f97316",desc:"Mid Point"},{level:"61.8%",price:Pe-b*.618,color:"#00bcd4",desc:"Golden Ratio"},{level:"78.6%",price:Pe-b*.786,color:"#10B981",desc:"Deep Retracement"},{level:"100%",price:ne,color:"#00ff88",desc:"Day Low"},{level:"-27%",price:Pe+b*.27,color:"#00e676",desc:"Extension"},{level:"-62%",price:Pe+b*.618,color:"#00c853",desc:"Deep Extension"}],Je=(o==null?void 0:o.swing)||{},Xe=Je.swing_high||0,Ne=Je.swing_low||0,oe=Je.swing_direction||"neutral";Je.extensions_direction;const fe=Xe-Ne,we=(ze-ne)/b,A=Math.min(1,Math.max(0,we)),te=(ie,g=ie)=>g>1||g<0?{zone:"Outside Range",color:"#a855f7",bg:"rgba(168,85,247,0.15)"}:ie>=.75?{zone:"Highly Premium",color:"#ff4466",bg:"rgba(255,68,102,0.15)"}:ie>=.5?{zone:"Premium",color:"#f97316",bg:"rgba(249,115,22,0.15)"}:ie>=.25?{zone:"Discount",color:"#00bcd4",bg:"rgba(0,188,212,0.15)"}:{zone:"Highly Discount",color:"#00ff88",bg:"rgba(0,255,136,0.15)"},ke=te(A,we);o.ib_high,o.ib_low;const at=new Date,$e=new Date(at.toLocaleString("en-US",{timeZone:"America/New_York"})).getHours(),Me=new Date(at.toLocaleString("en-US",{timeZone:"America/New_York"})).getMinutes(),Qe=$e*100+Me,Ft=Qe>=300&&Qe<600,J=Qe>=820&&Qe<930,st=Qe>=930&&Qe<1030,lt=Qe>=1030&&Qe<1130,et=zt.reduce((ie,g)=>{const j=Math.abs(ze-g.price);return j<ie.dist?{...g,dist:j}:ie},{dist:1/0});return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(249,115,22,0.05) 0%, rgba(255,68,102,0.05) 100%)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:16,padding:20,marginTop:20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{margin:0,color:"#f97316",fontSize:14},children:" Fibonacci Levels & Range Analysis"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:ke.bg,color:ke.color},children:ke.zone})]}),e.jsxs("div",{style:{display:"flex",gap:20},children:[e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:8},children:"Day Range"}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:7,textAlign:"right",color:"#666"},children:[e.jsx("span",{style:{color:"#ff4466"},children:"PREM"}),e.jsx("span",{children:"75%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{style:{color:"#00ff88"},children:"DISC"})]}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #f97316 25%, #666 50%, #00bcd4 75%, #00ff88 100%)",opacity:.5}}),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-A)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #fff",zIndex:10}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:9},children:[e.jsx("div",{style:{color:"#ff4466"},children:Pe.toFixed(2)}),e.jsxs("div",{style:{padding:"4px 6px",background:ke.bg,borderRadius:4,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:ke.color,fontWeight:600},children:ke.zone}),e.jsxs("div",{style:{fontSize:9,color:"#fff"},children:[(we*100).toFixed(0),"%"]})]}),e.jsx("div",{style:{color:"#00ff88"},children:ne.toFixed(2)})]})]})]}),e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsxs("div",{style:{fontSize:10,color:"#888",marginBottom:8},children:["Day Fibonacci ",rt?"(Bearish)":"(Bullish)"]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:8,textAlign:"right",width:28},children:zt.map((ie,g)=>e.jsx("span",{style:{color:ie.color,fontWeight:500,lineHeight:1},children:ie.level},g))}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #ff6b6b 16%, #ffd93d 33%, #f97316 50%, #00bcd4 66%, #10B981 83%, #00ff88 100%)",opacity:.5}}),zt.map((ie,g)=>e.jsx("div",{style:{position:"absolute",top:`${g/(zt.length-1)*100}%`,left:0,width:"100%",height:1,background:`${ie.color}80`,transform:"translateY(-50%)"}},g)),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-A)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #fff",zIndex:10}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420},children:zt.map((ie,g)=>{const j=Math.abs(ze-ie.price)<b*.025;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,lineHeight:1},children:[e.jsx("span",{style:{fontSize:10,color:j?"#fff":"#777",fontWeight:j?600:400,background:j?`${ie.color}30`:"transparent",padding:j?"1px 3px":0,borderRadius:2},children:ie.price.toFixed(2)}),e.jsx("span",{style:{fontSize:7,color:"#555"},children:ie.desc}),j&&e.jsx("span",{style:{color:ie.color,fontSize:8},children:""})]},g)})})]})]}),fe>50&&e.jsxs("div",{style:{flex:"0 0 auto",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:16},children:[e.jsxs("div",{style:{fontSize:10,color:"#A78BFA",marginBottom:8},children:["Swing Fib ",oe==="up"?"":oe==="down"?"":""]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:8,textAlign:"right",width:28},children:(oe==="up"?[{level:"-62%",price:Xe+fe*.618,color:"#00E676"},{level:"-27%",price:Xe+fe*.27,color:"#69F0AE"},{level:"0%",price:Xe,color:"#A78BFA"},{level:"23.6%",price:Xe-fe*.236,color:"#8B5CF6"},{level:"38.2%",price:Xe-fe*.382,color:"#7C3AED"},{level:"50%",price:Xe-fe*.5,color:"#6D28D9"},{level:"61.8%",price:Xe-fe*.618,color:"#5B21B6"},{level:"78.6%",price:Xe-fe*.786,color:"#4C1D95"},{level:"100%",price:Ne,color:"#3B0764"}]:[{level:"100%",price:Xe,color:"#3B0764"},{level:"78.6%",price:Ne+fe*.786,color:"#4C1D95"},{level:"61.8%",price:Ne+fe*.618,color:"#5B21B6"},{level:"50%",price:Ne+fe*.5,color:"#6D28D9"},{level:"38.2%",price:Ne+fe*.382,color:"#7C3AED"},{level:"23.6%",price:Ne+fe*.236,color:"#8B5CF6"},{level:"0%",price:Ne,color:"#A78BFA"},{level:"-27%",price:Ne-fe*.27,color:"#ff1744"},{level:"-62%",price:Ne-fe*.618,color:"#d50000"}]).map((ie,g)=>e.jsx("span",{style:{color:ie.color,fontWeight:500,lineHeight:1},children:ie.level},g))}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #A78BFA 0%, #6D28D9 40%, #3B0764 70%, #E040FB 85%, #AA00FF 100%)",opacity:.5}}),(()=>{const ie=fe>0?(ze-Ne)/fe:.5;return e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-ie)*100*.78))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #A78BFA",zIndex:10}})})()]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420},children:(oe==="up"?[{level:"-62%",price:Xe+fe*.618,color:"#00E676",desc:"Deep Ext"},{level:"-27%",price:Xe+fe*.27,color:"#69F0AE",desc:"Extension"},{level:"0%",price:Xe,color:"#A78BFA",desc:"Swing High"},{level:"23.6%",price:Xe-fe*.236,color:"#8B5CF6",desc:""},{level:"38.2%",price:Xe-fe*.382,color:"#7C3AED",desc:""},{level:"50%",price:Xe-fe*.5,color:"#6D28D9",desc:""},{level:"61.8%",price:Xe-fe*.618,color:"#5B21B6",desc:"Golden"},{level:"78.6%",price:Xe-fe*.786,color:"#4C1D95",desc:""},{level:"100%",price:Ne,color:"#3B0764",desc:"Swing Low"}]:[{level:"100%",price:Xe,color:"#3B0764",desc:"Swing High"},{level:"78.6%",price:Ne+fe*.786,color:"#4C1D95",desc:""},{level:"61.8%",price:Ne+fe*.618,color:"#5B21B6",desc:"Golden"},{level:"50%",price:Ne+fe*.5,color:"#6D28D9",desc:""},{level:"38.2%",price:Ne+fe*.382,color:"#7C3AED",desc:""},{level:"23.6%",price:Ne+fe*.236,color:"#8B5CF6",desc:""},{level:"0%",price:Ne,color:"#A78BFA",desc:"Swing Low"},{level:"-27%",price:Ne-fe*.27,color:"#ff1744",desc:"Extension"},{level:"-62%",price:Ne-fe*.618,color:"#d50000",desc:"Deep Ext"}]).map((ie,g)=>{const j=Math.abs(ze-ie.price)<fe*.03;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,lineHeight:1},children:[e.jsx("span",{style:{fontSize:10,color:j?"#fff":"#777",fontWeight:j?600:400,background:j?`${ie.color}30`:"transparent",padding:j?"1px 3px":0,borderRadius:2},children:ie.price.toFixed(2)}),e.jsx("span",{style:{fontSize:7,color:"#555"},children:ie.desc}),j&&e.jsx("span",{style:{color:ie.color,fontSize:8},children:""})]},g)})})]})]}),e.jsxs("div",{style:{flex:1,borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:20},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:10},children:"Session Range Location"}),(()=>{const ie=({name:$n,timeRange:Vt,color:un,isActive:so,high:Pn,low:Bn,hasData:Tn})=>{const Fn=Pn-Bn,In=Fn>0?(ze-Bn)/Fn:null,Jn=In!==null?Math.min(1,Math.max(0,In)):null,En=In!==null?te(Jn,In):null,Qn=Tn&&Pn>0&&Bn>0&&Fn>0;return e.jsxs("div",{style:{background:so?`${un}12`:"rgba(0,0,0,0.25)",border:`1px solid ${so?`${un}60`:"rgba(255,255,255,0.06)"}`,borderRadius:8,padding:"8px 10px",flex:"1 1 0",minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:un,fontWeight:600},children:$n}),e.jsx("div",{style:{fontSize:7,color:"#555"},children:Vt})]}),so&&e.jsx("span",{style:{fontSize:6,background:un,color:"#000",padding:"2px 4px",borderRadius:3,fontWeight:700},children:"LIVE"})]}),Qn?e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",width:6,height:140,borderRadius:3,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #f97316 25%, #666 50%, #00bcd4 75%, #00ff88 100%)",opacity:.5}}),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-Jn)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:10,height:3,background:un,borderRadius:2,boxShadow:`0 0 4px ${un}`}})]}),e.jsxs("div",{style:{flex:1,fontSize:8,display:"flex",flexDirection:"column",justifyContent:"space-between",height:140},children:[e.jsx("div",{style:{color:"#ff4466",fontWeight:500},children:Pn.toFixed(2)}),e.jsxs("div",{children:[e.jsx("div",{style:{color:En==null?void 0:En.color,fontWeight:600,fontSize:7},children:En==null?void 0:En.zone}),e.jsxs("div",{style:{color:"#888",fontSize:7},children:[(Jn*100).toFixed(0),"%"]})]}),e.jsx("div",{style:{color:"#00ff88",fontWeight:500},children:Bn.toFixed(2)})]})]}):e.jsx("div",{style:{fontSize:8,color:"#444",textAlign:"center",padding:"45px 0"},children:so?"Building...":Tn?"No data":"Waiting"})]})},g=o.ended_sessions||o.endedSessions||{},j=o.ibs||{},V=g.london||{};let M=V.high||0,N=V.low&&V.low>0&&V.low<999999?V.low:0;const q=j.london||{};q.high>0&&(M=Math.max(M,q.high)),q.low>0&&q.low<999999&&(N=N>0?Math.min(N,q.low):q.low),Ft&&o.sessionHigh>0&&(M=Math.max(M,o.sessionHigh)),Ft&&o.sessionLow>0&&o.sessionLow<999999&&(N=N>0?Math.min(N,o.sessionLow):o.sessionLow);const ce=g.ny_1h||{},Y=ce.high||(st?o.sessionHigh:0),ve=ce.low||(st?o.sessionLow:0),Tt=g.ny_2h||{},ut=Tt.high||(lt?o.sessionHigh:0),Ct=Tt.low||(lt?o.sessionLow:0),_t=j.us||{},mn=g.us_ib||{},Qt=_t.high||mn.high||0,Zt=_t.low&&_t.low>0&&_t.low<999999?_t.low:mn.low&&mn.low>0?mn.low:0;let qt=0,rn=999999;["pre_asia","asia_open","asia_close","low_volume","london","pre_us"].forEach($n=>{const Vt=g[$n];(Vt==null?void 0:Vt.high)>0&&(qt=Math.max(qt,Vt.high)),(Vt==null?void 0:Vt.low)>0&&(Vt==null?void 0:Vt.low)<999999&&(rn=Math.min(rn,Vt.low))});const en=Qe>=1800||Qe<820;en&&o.sessionHigh>0&&(qt=Math.max(qt,o.sessionHigh)),en&&o.sessionLow>0&&o.sessionLow<999999&&(rn=Math.min(rn,o.sessionLow)),rn===999999&&(rn=0);let bn=0,Cn=999999;["ny_1h","ny_2h","lunch","ny_pm","ny_close"].forEach($n=>{const Vt=g[$n];(Vt==null?void 0:Vt.high)>0&&(bn=Math.max(bn,Vt.high)),(Vt==null?void 0:Vt.low)>0&&(Vt==null?void 0:Vt.low)<999999&&(Cn=Math.min(Cn,Vt.low))});const ro=Qe>=930&&Qe<1700;return ro&&o.sessionHigh>0&&(bn=Math.max(bn,o.sessionHigh)),ro&&o.sessionLow>0&&o.sessionLow<999999&&(Cn=Math.min(Cn,o.sessionLow)),Cn===999999&&(Cn=0),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(ie,{name:"Overnight",timeRange:"18:00-8:20",color:"#8b5cf6",isActive:en,high:qt,low:rn,hasData:qt>0}),e.jsx(ie,{name:"NY Session",timeRange:"9:30-17:00",color:"#f59e0b",isActive:ro,high:bn,low:Cn,hasData:bn>0})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(ie,{name:"London",timeRange:"3:00-6:00",color:"#a855f7",isActive:Ft,high:M,low:N,hasData:M>0}),e.jsx(ie,{name:"US IB",timeRange:"8:20-9:30",color:"#ffaa00",isActive:J,high:Qt,low:Zt,hasData:Qt>0}),e.jsx(ie,{name:"NY 1H",timeRange:"9:30-10:30",color:"#10B981",isActive:st,high:Y,low:ve,hasData:Y>0}),e.jsx(ie,{name:"NY 2H",timeRange:"10:30-11:30",color:"#06B6D4",isActive:lt,high:ut,low:Ct,hasData:ut>0})]})]})})()]})]}),et.price&&b>0&&e.jsxs("div",{style:{marginTop:16,padding:12,background:`${et.color}15`,border:`1px solid ${et.color}50`,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Nearest Fibonacci Level"}),e.jsxs("div",{style:{fontSize:14,color:et.color,fontWeight:700},children:[et.level," @ ",et.price.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Distance"}),e.jsxs("div",{style:{fontSize:14,color:ze>et.price?"#00ff88":"#ff4466",fontWeight:700},children:[ze>et.price?"+":"",(ze-et.price).toFixed(2)]})]})]})]})})(),e.jsx("div",{style:{marginTop:20},children:e.jsx(vg,{gexData:u,currentPrice:o.current_price})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(mg,{gexData:u,currentPrice:o.current_price})}),(()=>{const G=o.rollover||{};return e.jsxs("div",{style:{marginTop:20,padding:16,background:"linear-gradient(135deg, rgba(30,30,35,0.95) 0%, rgba(20,20,25,0.98) 100%)",borderRadius:12,border:`1px solid ${G.roll_signal==="ROLL"?"#ef4444":G.roll_signal==="CONSIDER"?"#f59e0b":"#333"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff"},children:"CONTRACT ROLLOVER"})]}),e.jsx("div",{style:{padding:"4px 12px",borderRadius:6,fontSize:11,fontWeight:700,background:G.roll_signal==="ROLL"?"rgba(239,68,68,0.2)":G.roll_signal==="CONSIDER"?"rgba(245,158,11,0.2)":"rgba(34,197,94,0.2)",color:G.roll_signal==="ROLL"?"#ef4444":G.roll_signal==="CONSIDER"?"#f59e0b":"#22c55e",border:`1px solid ${G.roll_signal==="ROLL"?"#ef4444":G.roll_signal==="CONSIDER"?"#f59e0b":"#22c55e"}40`},children:G.roll_signal==="ROLL"?" ROLL NOW":G.roll_signal==="CONSIDER"?" CONSIDER ROLLING":" HOLD"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 1fr",gap:16,alignItems:"center"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"CURRENT"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff"},children:G.front_month||o.contract||"GCG26"}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:2},children:G.front_month_name||"Gold Feb 2026"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:G.front_month_oi>0?"#fff":"#555",marginTop:8,fontFamily:"monospace"},children:G.front_month_oi>0?G.front_month_oi.toLocaleString():""}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:G.front_month_oi>0?"Open Interest":"Loading OI..."})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,color:G.oi_ratio>=1?"#ef4444":G.oi_ratio>=.75?"#f59e0b":"#22c55e"},children:G.oi_ratio>=1?"":""}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:G.oi_ratio>=1?"#ef4444":G.oi_ratio>=.75?"#f59e0b":"#22c55e",fontFamily:"monospace"},children:[((G.oi_ratio||0)*100).toFixed(0),"%"]}),e.jsx("div",{style:{fontSize:8,color:"#666"},children:"Next/Current"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"NEXT"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:G.oi_ratio>=1?"#ef4444":"#f59e0b"},children:G.next_month||"GCJ26"}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:2},children:G.next_month_name||"Gold Apr 2026"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:G.next_month_oi>0?"#fff":"#555",marginTop:8,fontFamily:"monospace"},children:G.next_month_oi>0?G.next_month_oi.toLocaleString():""}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:G.next_month_oi>0?"Open Interest":"Loading OI..."})]})]}),e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:[e.jsx("div",{style:{width:`${Math.min((G.oi_ratio||0)*100,100)}%`,height:"100%",background:G.oi_ratio>=1?"linear-gradient(90deg, #ef4444, #dc2626)":G.oi_ratio>=.75?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #22c55e, #16a34a)",transition:"width 0.5s ease"}}),e.jsx("div",{style:{position:"absolute",left:"75%",top:0,bottom:0,width:2,background:"#f59e0b",opacity:.5}}),e.jsx("div",{style:{position:"absolute",left:"100%",top:0,bottom:0,width:2,background:"#ef4444",opacity:.5}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:4},children:[e.jsx("span",{style:{fontSize:8,color:"#666"},children:"0%"}),e.jsx("span",{style:{fontSize:8,color:"#f59e0b"},children:"75% Consider"}),e.jsx("span",{style:{fontSize:8,color:"#ef4444"},children:"100% Roll"})]})]}),G.last_update&&e.jsxs("div",{style:{marginTop:12,textAlign:"center",fontSize:9,color:"#555"},children:["OI Updated: ",G.last_update]})]})})()]})},Hg=({data:t,trades:n,dateRange:o,setDateRange:i,extendedData:r})=>{var $e,Me,Qe,Ft,J,st,lt,et,ie;const[s,l]=B.useState(2025),[a,d]=B.useState(o),[p,w]=B.useState("overview"),[y,u]=B.useState(null),[W,L]=B.useState(null),[Z,Ge]=B.useState(null),{metadata:f,sessions:m,volumeProfiles:C,bigVolumeDays:c,supportResistance:F,seasonality:S,dailyCandles:R,featureStatistics:I,distributions:de}=r||{};B.useEffect(()=>{var g;((g=t.yearly_pnl)==null?void 0:g.length)>0&&!t.yearly_pnl.find(j=>j.year===s)&&l(t.yearly_pnl[t.yearly_pnl.length-1].year)},[t.yearly_pnl,s]);const G=()=>i(a),v=()=>{var j,V;const g={start:((j=f==null?void 0:f.data_range)==null?void 0:j.start)||"2021-01-27",end:((V=f==null?void 0:f.data_range)==null?void 0:V.end)||"2026-01-27"};d(g),i(g)},h=(m==null?void 0:m.length)||0,T=(m==null?void 0:m.filter(g=>g.direction==="bullish").length)||0,Le=(m==null?void 0:m.filter(g=>g.direction==="bearish").length)||0;m!=null&&m.length&&(m.reduce((g,j)=>g+(j.range||0),0)/m.length).toFixed(2),m!=null&&m.length&&Math.round(m.reduce((g,j)=>g+(j.volume||0),0)/m.length);const z=B.useMemo(()=>{if(!(n!=null&&n.length))return[];let g=1e5,j=g,V=0;return n.map((M,N)=>{g+=M.pnl||0,j=Math.max(j,g);const q=j-g,ce=j>0?q/j*100:0;V=Math.max(V,ce);const Y=g-1e5,ve=Y/1e5*100;return{date:M.date,equity:g,peak:j,fromPeak:q,drawdown:ce,maxDrawdownSoFar:V,totalProfit:Y,totalProfitPct:ve,pnl:M.pnl,trade:M,index:N}})},[n]),Ie=z.length?Math.max(...z.map(g=>g.drawdown)):0,Pe=z.length?z[z.length-1].equity:1e5,ne=(Pe-1e5)/1e5*100,ze=(n==null?void 0:n.filter(g=>g.pnl>0))||[],b=(n==null?void 0:n.filter(g=>g.pnl<=0))||[],_e=ze.length?ze.reduce((g,j)=>g+j.pnl,0)/ze.length:0,re=b.length?Math.abs(b.reduce((g,j)=>g+j.pnl,0)/b.length):0;n!=null&&n.length&&n.reduce((g,j)=>g+Math.abs((j.entry||0)-(j.stop_loss||0)),0)/n.length*100;const He=[{id:"overview",label:"Overview",icon:""},{id:"analytics",label:"Deep Analytics",icon:""},{id:"features",label:"Feature Analysis",icon:""},{id:"phase",label:"Phase Detection",icon:""},{id:"matrix",label:"Matrix Analysis",icon:""},{id:"seasonality",label:"Seasonality",icon:""},{id:"trades",label:"Trade Log",icon:""}],rt=({label:g,value:j,color:V,sub:M})=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:8,padding:"10px 12px",borderLeft:`3px solid ${V}`},children:[e.jsx("div",{style:{fontSize:9,color:"#666",textTransform:"uppercase",letterSpacing:.5},children:g}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:V},children:j}),M&&e.jsx("div",{style:{fontSize:9,color:"#555"},children:M})]}),zt=({type:g,count:j,total:V,setHoveredTpo:M})=>{const q={"P-shape":{desc:"Rally Day - Close near high. Price spent most time in upper range, indicating buying pressure.",signal:"Bullish",color:"#00ff88",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"40",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("rect",{x:"20",y:"28",width:"10",height:"18",fill:"#8b5cf6",opacity:"0.5",rx:"1"}),e.jsx("rect",{x:"32",y:"12",width:"10",height:"32",fill:"#8b5cf6",opacity:"0.8",rx:"1"}),e.jsx("rect",{x:"44",y:"6",width:"10",height:"22",fill:"#8b5cf6",rx:"1"}),e.jsx("path",{d:"M8 44 Q35 50 58 12",stroke:"#00ff88",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"58",cy:"12",r:"3",fill:"#00ff88"})]})},"b-shape":{desc:"Selloff Day - Close near low. Price spent most time in lower range, indicating selling pressure.",signal:"Bearish",color:"#ff4466",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"6",width:"10",height:"22",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"20",y:"12",width:"10",height:"32",fill:"#8b5cf6",opacity:"0.8",rx:"1"}),e.jsx("rect",{x:"32",y:"28",width:"10",height:"18",fill:"#8b5cf6",opacity:"0.5",rx:"1"}),e.jsx("rect",{x:"44",y:"40",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("path",{d:"M8 12 Q35 6 58 44",stroke:"#ff4466",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"58",cy:"44",r:"3",fill:"#ff4466"})]})},"D-shape":{desc:"Balanced Day - Normal bell curve distribution. Market in equilibrium, fair value found.",signal:"Neutral",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"35",width:"10",height:"10",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("rect",{x:"20",y:"22",width:"10",height:"22",fill:"#8b5cf6",opacity:"0.6",rx:"1"}),e.jsx("rect",{x:"32",y:"10",width:"10",height:"35",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"44",y:"22",width:"10",height:"22",fill:"#8b5cf6",opacity:"0.6",rx:"1"}),e.jsx("line",{x1:"5",y1:"27",x2:"65",y2:"27",stroke:"#f97316",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:"35",y:"52",fontSize:"8",fill:"#f97316",textAnchor:"middle",children:"POC"})]})},"B-shape":{desc:"Double Distribution - Two value areas formed. Often signals trend change or balance break.",signal:"Reversal",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"8",width:"10",height:"16",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"20",y:"14",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.4",rx:"1"}),e.jsx("rect",{x:"32",y:"22",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.2",rx:"1"}),e.jsx("rect",{x:"44",y:"32",width:"10",height:"16",fill:"#8b5cf6",rx:"1"}),e.jsx("circle",{cx:"13",cy:"16",r:"4",fill:"none",stroke:"#f97316",strokeWidth:"2"}),e.jsx("circle",{cx:"49",cy:"40",r:"4",fill:"none",stroke:"#f97316",strokeWidth:"2"}),e.jsx("text",{x:"35",y:"52",fontSize:"7",fill:"#888",textAnchor:"middle",children:"2 Value Areas"})]})},elongated_up:{desc:"Strong Uptrend - Elongated profile showing sustained buying. Very bullish momentum.",signal:"Very Bullish",color:"#00ff88",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"15",y:"6",width:"40",height:"10",fill:"#00ff88",rx:"2"}),e.jsx("rect",{x:"20",y:"18",width:"30",height:"8",fill:"#00ff88",opacity:"0.7",rx:"1"}),e.jsx("rect",{x:"25",y:"28",width:"20",height:"6",fill:"#00ff88",opacity:"0.4",rx:"1"}),e.jsx("path",{d:"M10 48 L60 8",stroke:"#00ff88",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("polygon",{points:"60,8 52,12 56,16",fill:"#00ff88"})]})},elongated_down:{desc:"Strong Downtrend - Elongated profile showing sustained selling. Very bearish momentum.",signal:"Very Bearish",color:"#ff4466",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"25",y:"6",width:"20",height:"6",fill:"#ff4466",opacity:"0.4",rx:"1"}),e.jsx("rect",{x:"20",y:"14",width:"30",height:"8",fill:"#ff4466",opacity:"0.7",rx:"1"}),e.jsx("rect",{x:"15",y:"24",width:"40",height:"10",fill:"#ff4466",rx:"2"}),e.jsx("path",{d:"M10 8 L60 48",stroke:"#ff4466",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("polygon",{points:"60,48 52,44 56,40",fill:"#ff4466"})]})},single_print:{desc:"Single Print Gap - Low volume area indicating weak support/resistance. Often gets filled.",signal:"Gap Fill",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"20",y:"6",width:"30",height:"14",fill:"#8b5cf6",rx:"2"}),e.jsx("rect",{x:"30",y:"24",width:"4",height:"6",fill:"#f97316",opacity:"0.5"}),e.jsx("rect",{x:"20",y:"34",width:"30",height:"14",fill:"#8b5cf6",rx:"2"}),e.jsx("text",{x:"35",y:"29",fontSize:"9",fill:"#f97316",textAnchor:"middle",fontWeight:"bold",children:"GAP"}),e.jsx("path",{d:"M50 20 L55 27 L50 34",stroke:"#f97316",strokeWidth:"1.5",fill:"none",strokeDasharray:"2"})]})}}[g]||{desc:"Market profile type",signal:"N/A",color:"#888",svg:e.jsx("svg",{width:"70",height:"55",children:e.jsx("text",{x:"35",y:"30",fontSize:"12",fill:"#666",textAnchor:"middle",children:"?"})})},ce=V>0?(j/V*100).toFixed(1):0;return e.jsx("div",{style:{display:"inline-block",cursor:"context-menu"},onContextMenu:Y=>{Y.preventDefault(),M({type:g,count:j,pct:ce,visual:q,x:Y.clientX,y:Y.clientY})},children:e.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:8,padding:10,textAlign:"center",border:"1px solid rgba(139,92,246,0.3)"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#8b5cf6"},children:j}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:Xe(g)})]})})},Je=({phase:g,count:j,total:V,setHoveredWyckoff:M})=>{const N={accumulation:{desc:"Smart money buying at lows after downtrend. Price consolidates in range while institutions accumulate positions quietly.",signal:"Bullish Setup",color:"#00ff88",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 8 L20 38",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"32",width:"50",height:"14",fill:"rgba(0,255,136,0.1)",stroke:"#00ff88",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M25 38 L35 35 L45 40 L55 36 L65 42",stroke:"#888",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M65 35 L75 15",stroke:"#00ff88",strokeWidth:"2",strokeDasharray:"4",fill:"none"}),e.jsx("polygon",{points:"75,15 70,22 73,20",fill:"#00ff88"})]})},distribution:{desc:"Smart money selling at highs after uptrend. Price consolidates while institutions distribute positions to retail.",signal:"Bearish Setup",color:"#ff4466",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 42 L20 12",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"6",width:"50",height:"14",fill:"rgba(255,68,102,0.1)",stroke:"#ff4466",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M25 12 L35 15 L45 10 L55 14 L65 8",stroke:"#888",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M65 15 L75 35",stroke:"#ff4466",strokeWidth:"2",strokeDasharray:"4",fill:"none"}),e.jsx("polygon",{points:"75,35 70,28 73,30",fill:"#ff4466"})]})},markup:{desc:"Uptrend phase following accumulation. Strong buying pressure with higher highs and higher lows.",signal:"Buy & Hold",color:"#00ff88",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 45 L20 38 L35 42 L50 30 L65 25 L75 10",stroke:"#00ff88",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M5 48 L75 20",stroke:"#00ff88",strokeWidth:"1",opacity:"0.3",strokeDasharray:"4"}),e.jsx("polygon",{points:"75,10 68,15 70,18",fill:"#00ff88"}),e.jsx("text",{x:"40",y:"48",fontSize:"8",fill:"#00ff88",textAnchor:"middle",fontWeight:"bold",children:"MARKUP "})]})},markdown:{desc:"Downtrend phase following distribution. Strong selling pressure with lower highs and lower lows.",signal:"Sell & Avoid",color:"#ff4466",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 10 L20 15 L35 12 L50 25 L65 30 L75 45",stroke:"#ff4466",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M5 7 L75 35",stroke:"#ff4466",strokeWidth:"1",opacity:"0.3",strokeDasharray:"4"}),e.jsx("polygon",{points:"75,45 68,40 70,37",fill:"#ff4466"}),e.jsx("text",{x:"40",y:"8",fontSize:"8",fill:"#ff4466",textAnchor:"middle",fontWeight:"bold",children:"MARKDOWN "})]})},re_accumulation:{desc:"Pause within uptrend for more accumulation. Institutions adding to long positions before next leg up.",signal:"Continue Long",color:"#00bcd4",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 42 L22 28",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"22",y:"22",width:"30",height:"12",fill:"rgba(0,188,212,0.15)",stroke:"#00bcd4",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M52 25 L75 8",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("polygon",{points:"75,8 68,12 70,15",fill:"#00ff88"})]})},re_distribution:{desc:"Pause within downtrend for more distribution. Institutions adding to short positions before next leg down.",signal:"Continue Short",color:"#f97316",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 8 L22 22",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"22",y:"18",width:"30",height:"12",fill:"rgba(249,115,22,0.15)",stroke:"#f97316",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M52 25 L75 42",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("polygon",{points:"75,42 68,38 70,35",fill:"#ff4466"})]})},trending:{desc:"Clear directional movement with strong momentum. Follow the trend until signs of exhaustion.",signal:"Follow Trend",color:"#00bcd4",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 40 L75 10",stroke:"#00bcd4",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M5 44 L75 14",stroke:"#00bcd4",strokeWidth:"1",opacity:"0.4"}),e.jsx("path",{d:"M5 36 L75 6",stroke:"#00bcd4",strokeWidth:"1",opacity:"0.4"}),e.jsx("polygon",{points:"75,10 68,14 70,17",fill:"#00bcd4"})]})},consolidation:{desc:"Sideways range-bound price action. Market undecided, wait for breakout direction.",signal:"Wait for Break",color:"#888",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("line",{x1:"5",y1:"15",x2:"75",y2:"15",stroke:"#666",strokeWidth:"1.5",strokeDasharray:"4"}),e.jsx("line",{x1:"5",y1:"35",x2:"75",y2:"35",stroke:"#666",strokeWidth:"1.5",strokeDasharray:"4"}),e.jsx("path",{d:"M8 25 L20 20 L32 28 L44 22 L56 30 L68 24 L75 26",stroke:"#f97316",strokeWidth:"2",fill:"none"}),e.jsx("text",{x:"40",y:"46",fontSize:"7",fill:"#888",textAnchor:"middle",children:"RANGE BOUND"})]})},unknown:{desc:"Unclear market structure. Avoid trading until clearer pattern emerges.",signal:"No Trade",color:"#666",svg:e.jsx("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:e.jsx("text",{x:"40",y:"32",fontSize:"24",fill:"#666",textAnchor:"middle",children:"?"})})}},q=N[g]||N.unknown,ce=V>0?(j/V*100).toFixed(1):0;return e.jsx("div",{style:{display:"inline-block",cursor:"context-menu"},onContextMenu:Y=>{Y.preventDefault(),M({phase:g,count:j,pct:ce,visual:q,x:Y.clientX,y:Y.clientY})},children:e.jsxs("div",{style:{background:"rgba(0,188,212,0.1)",borderRadius:8,padding:10,textAlign:"center",border:"1px solid rgba(0,188,212,0.3)"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#00bcd4"},children:j}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:g.replace(/_/g," ")})]})})},Xe=g=>g?{"P-shape":"P-Shape (Rally)","b-shape":"b-Shape (Selloff)","D-shape":"D-Shape (Balanced)","B-shape":"B-Shape (Double)",elongated_up:"Elongated Up",elongated_down:"Elongated Down",single_print:"Single Print",no_demand:"No Demand",no_supply:"No Supply",climax_bullish:"Bullish Climax",climax_bearish:"Bearish Climax",high_volume:"High Volume",low_volume:"Low Volume",absorption:"Absorption",exhaustion:"Exhaustion",normal:"Normal",trending:"Trending",consolidation:"Consolidation",accumulation:"Accumulation",distribution:"Distribution",markup:"Markup",markdown:"Markdown",re_accumulation:"Re-Accumulation",re_distribution:"Re-Distribution",unknown:"Unknown",vsa_no_effort_result:"VSA: No Effort Result",vsa_effort_no_result:"VSA: Effort No Result",cvd_bearish_divergence:"CVD Bearish Divergence",cvd_bullish_divergence:"CVD Bullish Divergence",big_trade_bullish:"Big Trade (Bullish)",big_trade_bearish:"Big Trade (Bearish)",delta_imbalance_bullish:"Delta Imbalance (Bull)",delta_imbalance_bearish:"Delta Imbalance (Bear)",absorption_bullish:"Absorption (Bullish)",absorption_bearish:"Absorption (Bearish)",institutional_accumulation:"Institutional Activity",stop_hunt:"Stop Hunt",TARGET:"Target Hit",STOP_LOSS:"Stop Loss",TIME_EXIT:"Time Exit"}[g]||g.replace(/_/g," ").replace(/\b\w/g,V=>V.toUpperCase()):"",Ne={"P-shape":"Close near high, rally day. Often bullish continuation.","b-shape":"Close near low, selloff day. Often bearish continuation.","D-shape":"Balanced day, close near middle. Market in equilibrium.","B-shape":"Double distribution - two value areas. Trend change signal.",elongated_up:"Strong upward momentum, close in upper range.",elongated_down:"Strong downward momentum, close in lower range.",no_demand:"Low volume on up move - lack of buying interest.",no_supply:"Low volume on down move - lack of selling pressure.",climax_bullish:"Extreme volume on up move - potential exhaustion.",climax_bearish:"Extreme volume on down move - potential exhaustion.",absorption:"High volume, small range - large orders absorbed.",exhaustion:"Decreasing volume on trend - momentum fading.",normal:"Average volume with typical price action.",high_volume:"Above average volume - increased participation.",accumulation:"Smart money buying at lows. Bullish setup forming.",distribution:"Smart money selling at highs. Bearish setup forming.",markup:"Uptrend phase - prices rising with momentum.",markdown:"Downtrend phase - prices falling with momentum.",re_accumulation:"Pause in uptrend for more accumulation.",re_distribution:"Pause in downtrend for more distribution.",vsa_no_effort_result:"Volume Spread Analysis: Price moved without matching volume effort.",cvd_bearish_divergence:"Cumulative Volume Delta diverges bearish from price.",cvd_bullish_divergence:"Cumulative Volume Delta diverges bullish from price.",stop_hunt:"Price spiked to trigger stop losses then reversed.",absorption_bullish:"Large buy orders absorbing selling pressure.",absorption_bearish:"Large sell orders absorbing buying pressure.",institutional_accumulation:"Signs of institutional buying activity.",delta_imbalance_bullish:"Strong buying pressure shown by delta imbalance.",delta_imbalance_bearish:"Strong selling pressure shown by delta imbalance.",big_trade_bullish:"Large institutional buy order detected.",big_trade_bearish:"Large institutional sell order detected.",TARGET:"Trade hit profit target - always a winner.",STOP_LOSS:"Trade hit stop loss - always a loss (risk management).",TIME_EXIT:"Trade closed at max holding period."},[oe,fe]=B.useState(null),we=({label:g,wins:j,total:V,pnl:M,color:N})=>{const q=V>0?(j/V*100).toFixed(0):0,ce=Xe(g),Y=Ne[g];return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",cursor:"help"},onMouseMove:ve=>fe({label:g,formattedLabel:ce,wr:q,total:V,pnl:M,color:N,tooltip:Y,x:ve.clientX,y:ve.clientY}),onMouseLeave:()=>fe(null),children:[e.jsx("div",{style:{width:150,fontSize:11,color:"#ccc"},children:ce}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative",overflow:"hidden",minWidth:80},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${q}%`,background:N,borderRadius:4}}),e.jsxs("div",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:600,color:"#fff"},children:[q,"%"]})]}),e.jsx("div",{style:{width:40,fontSize:10,color:"#888",textAlign:"right"},children:V}),e.jsxs("div",{style:{width:65,fontSize:10,color:M>=0?"#00ff88":"#ff4466",textAlign:"right",fontWeight:600},children:["$",(M/1e3).toFixed(1),"K"]})]})},[A,te]=B.useState(null),ke=({id:g,title:j,content:V,color:M})=>e.jsx("span",{style:{cursor:"pointer",fontSize:12,color:"#666",opacity:.7,marginLeft:8},onMouseMove:N=>te({id:g,title:j,content:V,color:M,x:N.clientX,y:N.clientY}),onMouseLeave:()=>te(null),children:""}),at={tpo:{title:"TPO Profile Types",content:"Time Price Opportunity (TPO) profiles show where price spent the most time. P-shape = rally day (close near high). b-shape = selloff day (close near low). D-shape = balanced day. B-shape = double distribution with two value areas."},volume:{title:"Volume Patterns",content:"Volume analysis reveals institutional activity. Climax = extreme volume with large range. Absorption = high volume but small range (accumulation). No Demand/Supply = low volume indicating lack of interest. Exhaustion = decreasing volume on trend continuation."},wyckoff:{title:"Wyckoff Phases",content:"Market cycle phases based on Wyckoff methodology. Accumulation = institutional buying at lows. Distribution = institutional selling at highs. Markup = uptrend phase. Markdown = downtrend phase. Re-accumulation/Re-distribution = pauses within trends."},orderflow:{title:"Order Flow Patterns",content:"Order flow detects institutional footprints. Big Trades = large volume spikes indicating institutional activity. CVD Divergence = price vs cumulative delta mismatch. Delta Imbalance = strong directional buying/selling pressure. Stop Hunt = price spikes to trigger stops then reverses."},exit:{title:"Exit Reasons",content:"How trades were closed. TARGET = price hit profit target (best outcome). TIME_EXIT = closed after max holding period. STOP_LOSS = protective stop triggered (controlled loss). Each exit type has different win rate implications."}};return e.jsxs("div",{style:{background:"#0a0a0f",minHeight:"100vh",padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:12},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:20,fontWeight:800,color:"#fff",margin:0},children:"Horizon Backtest Analytics"}),e.jsxs("p",{style:{fontSize:11,color:"#666",margin:0},children:[($e=f==null?void 0:f.data_range)==null?void 0:$e.start," to ",(Me=f==null?void 0:f.data_range)==null?void 0:Me.end," | ",(n==null?void 0:n.length)||0," trades"]})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"date",value:a.start,onChange:g=>d({...a,start:g.target.value}),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"6px 10px",color:"#fff",fontSize:11}}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"to"}),e.jsx("input",{type:"date",value:a.end,onChange:g=>d({...a,end:g.target.value}),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"6px 10px",color:"#fff",fontSize:11}}),e.jsx("button",{onClick:G,style:{background:"#00ff88",border:"none",borderRadius:6,padding:"6px 12px",color:"#000",fontWeight:600,cursor:"pointer",fontSize:11},children:"Apply"}),e.jsx("button",{onClick:v,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:6,padding:"6px 12px",color:"#888",cursor:"pointer",fontSize:11},children:"Reset"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 1fr)",gap:8,marginBottom:16},children:[e.jsx(rt,{label:"Trades",value:(n==null?void 0:n.length)||0,color:"#00ff88"}),e.jsx(rt,{label:"Win Rate",value:`${((((Qe=t.summary)==null?void 0:Qe.win_rate)||0)*100).toFixed(1)}%`,color:(((Ft=t.summary)==null?void 0:Ft.win_rate)||0)>=.5?"#00ff88":"#ff4466",sub:`${ze.length}W / ${b.length}L`}),e.jsx(rt,{label:"Profit Factor",value:(((J=t.summary)==null?void 0:J.profit_factor)||0).toFixed(2),color:((st=t.summary)==null?void 0:st.profit_factor)>=1.5?"#00ff88":"#ffaa00"}),e.jsx(rt,{label:"Total P&L",value:`$${((((lt=t.summary)==null?void 0:lt.total_pnl)||0)/1e3).toFixed(0)}K`,color:((et=t.summary)==null?void 0:et.total_pnl)>=0?"#00ff88":"#ff4466"}),e.jsx(rt,{label:"Max DD",value:`${Ie.toFixed(1)}%`,color:Ie>20?"#ff4466":"#ffaa00"}),e.jsx(rt,{label:"Avg Win",value:`$${(_e/1e3).toFixed(1)}K`,color:"#00ff88"}),e.jsx(rt,{label:"Avg Loss",value:`$${(re/1e3).toFixed(1)}K`,color:"#ff4466"}),e.jsx(rt,{label:"Avg R",value:`${(((ie=t.summary)==null?void 0:ie.avg_r)||0).toFixed(2)}R`,color:"#8b5cf6"}),e.jsx(rt,{label:"Return",value:`${ne.toFixed(1)}%`,color:ne>=0?"#00ff88":"#ff4466"}),e.jsx(rt,{label:"Final Equity",value:`$${(Pe/1e3).toFixed(0)}K`,color:"#f97316"})]}),e.jsx("div",{style:{display:"flex",gap:6,marginBottom:16},children:He.map(g=>e.jsxs("button",{onClick:()=>w(g.id),style:{background:p===g.id?"#00ff88":"rgba(255,255,255,0.05)",border:"none",borderRadius:6,padding:"8px 16px",color:p===g.id?"#000":"#888",fontWeight:600,cursor:"pointer",fontSize:11},children:[g.icon," ",g.label]},g.id))}),p==="overview"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(0,20,10,0.8) 0%, rgba(0,0,0,0.95) 100%)",borderRadius:16,padding:20,border:"1px solid rgba(0,255,136,0.15)",boxShadow:"0 4px 24px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{fontSize:14,fontWeight:700,color:"#fff",margin:0,letterSpacing:.5},children:"Equity Curve"}),e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[z.length," trades"]})]}),e.jsx("div",{style:{height:220,position:"relative"},onMouseLeave:()=>u(null),children:z.length>0?(()=>{const g=Math.max(...z.map(Y=>Y.equity)),j=Math.min(...z.map(Y=>Y.equity)),V=g-j||1,M=Y=>200-(Y-j)/V*170,N=Y=>20+Y/(z.length-1)*560,q=z.map((Y,ve)=>`${ve===0?"M":"L"} ${N(ve)} ${M(Y.equity)}`).join(" "),ce=`${q} L ${N(z.length-1)} 200 L 20 200 Z`;return e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 600 220",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"eqGradPremium",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#00ff88",stopOpacity:"0.25"}),e.jsx("stop",{offset:"50%",stopColor:"#00cc66",stopOpacity:"0.1"}),e.jsx("stop",{offset:"100%",stopColor:"#00ff88",stopOpacity:"0"})]}),e.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"lineGrad",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#00cc66"}),e.jsx("stop",{offset:"50%",stopColor:"#00ff88"}),e.jsx("stop",{offset:"100%",stopColor:"#00ffaa"})]})]}),[.25,.5,.75].map(Y=>e.jsx("line",{x1:"20",y1:200-Y*170,x2:"580",y2:200-Y*170,stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"},Y)),e.jsx("line",{x1:"20",y1:M(1e5),x2:"580",y2:M(1e5),stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",strokeDasharray:"4,4"}),e.jsx("text",{x:"585",y:M(1e5)+4,fontSize:"8",fill:"#666",children:"$100K"}),e.jsx("path",{d:ce,fill:"url(#eqGradPremium)"}),e.jsx("path",{d:q,fill:"none",stroke:"url(#lineGrad)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow)"}),z.map((Y,ve)=>e.jsx("rect",{x:N(ve)-5,y:0,width:10,height:220,fill:"transparent",style:{cursor:"crosshair"},onMouseEnter:()=>u(ve)},ve)),y!==null&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:N(y),y1:0,x2:N(y),y2:200,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",strokeDasharray:"2,2"}),e.jsx("circle",{cx:N(y),cy:M(z[y].equity),r:8,fill:"none",stroke:"#00ff88",strokeWidth:"2"}),e.jsx("circle",{cx:N(y),cy:M(z[y].equity),r:4,fill:z[y].pnl>=0?"#00ff88":"#ff4466"})]}),e.jsxs("text",{x:"5",y:"15",fontSize:"9",fill:"#666",children:["$",(g/1e3).toFixed(0),"K"]}),e.jsxs("text",{x:"5",y:"200",fontSize:"9",fill:"#666",children:["$",(j/1e3).toFixed(0),"K"]})]}),y!==null&&z[y]&&(()=>{var ve;const Y=z[y];return e.jsxs("div",{style:{position:"absolute",top:10,right:10,background:"linear-gradient(135deg, rgba(0,30,20,0.98) 0%, rgba(0,0,0,0.98) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,padding:14,fontSize:11,minWidth:180,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{fontWeight:700,color:"#00ff88",marginBottom:8,fontSize:12,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:8},children:Y.date}),e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Equity"}),e.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["$",(Y.equity/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Trade P&L"}),e.jsxs("span",{style:{color:Y.pnl>=0?"#00ff88":"#ff4466",fontWeight:600},children:[Y.pnl>=0?"+":"","$",(ve=Y.pnl)==null?void 0:ve.toFixed(0)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Total Profit"}),e.jsxs("span",{style:{color:Y.totalProfit>=0?"#00ff88":"#ff4466",fontWeight:700},children:[Y.totalProfit>=0?"+":"","$",(Y.totalProfit/1e3).toFixed(1),"K ",e.jsxs("span",{style:{fontSize:9,opacity:.7},children:["(",Y.totalProfitPct>=0?"+":"",Y.totalProfitPct.toFixed(0),"%)"]})]})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:6,marginTop:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Peak"}),e.jsxs("span",{style:{color:"#fff"},children:["$",(Y.peak/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"From Peak"}),e.jsx("span",{style:{color:Y.fromPeak>0?"#ff4466":"#00ff88",fontWeight:600},children:Y.fromPeak>0?`-$${(Y.fromPeak/1e3).toFixed(1)}K (${Y.drawdown.toFixed(1)}%)`:"AT HIGH"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Max DD"}),e.jsxs("span",{style:{color:Y.maxDrawdownSoFar>10?"#ff4466":"#ffaa00",fontWeight:600},children:[Y.maxDrawdownSoFar.toFixed(1),"%"]})]})]}),e.jsxs("div",{style:{fontSize:9,color:"#555",textAlign:"right",marginTop:2},children:["Trade #",y+1]})]})]})})()]})})():e.jsx("div",{style:{color:"#666",textAlign:"center",paddingTop:100},children:"No data"})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Yearly Performance"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:(t.yearly_pnl||[]).map(g=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:10,textAlign:"center",border:s===g.year?"2px solid #00ff88":"1px solid transparent",cursor:"pointer"},onClick:()=>l(g.year),children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#fff"},children:g.year}),e.jsxs("div",{style:{fontSize:14,fontWeight:800,color:g.pnl>=0?"#00ff88":"#ff4466"},children:["$",(g.pnl/1e3).toFixed(0),"K"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:[g.trades," trades | ",((g.win_rate||0)*100).toFixed(1),"%"]})]},g.year))})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Winners vs Losers"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(0,255,136,0.3)"},children:[e.jsxs("div",{style:{fontSize:10,color:"#00ff88",marginBottom:8},children:["WINNERS (",ze.length,")"]}),e.jsxs("div",{style:{fontSize:9,color:"#888",display:"grid",gap:4},children:[e.jsxs("div",{children:["Avg P&L: ",e.jsxs("span",{style:{color:"#00ff88",fontWeight:600},children:["$",_e.toFixed(0)]})]}),e.jsxs("div",{children:["Best: ",e.jsxs("span",{style:{color:"#00ff88"},children:["$",Math.max(...ze.map(g=>g.pnl||0)).toFixed(0)]})]}),e.jsxs("div",{children:["Avg R: ",e.jsxs("span",{style:{color:"#00ff88"},children:[(ze.reduce((g,j)=>g+(j.r||0),0)/ze.length).toFixed(2),"R"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(255,68,102,0.3)"},children:[e.jsxs("div",{style:{fontSize:10,color:"#ff4466",marginBottom:8},children:["LOSERS (",b.length,")"]}),e.jsxs("div",{style:{fontSize:9,color:"#888",display:"grid",gap:4},children:[e.jsxs("div",{children:["Avg P&L: ",e.jsxs("span",{style:{color:"#ff4466",fontWeight:600},children:["-$",re.toFixed(0)]})]}),e.jsxs("div",{children:["Worst: ",e.jsxs("span",{style:{color:"#ff4466"},children:["$",Math.min(...b.map(g=>g.pnl||0)).toFixed(0)]})]}),e.jsxs("div",{children:["Avg R: ",e.jsxs("span",{style:{color:"#ff4466"},children:[(b.reduce((g,j)=>g+(j.r||0),0)/b.length).toFixed(2),"R"]})]})]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Market Direction (5Y)"}),e.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8},children:[e.jsx("div",{style:{flex:T,background:"#00ff88",height:20,borderRadius:4}}),e.jsx("div",{style:{flex:Le,background:"#ff4466",height:20,borderRadius:4}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsxs("span",{style:{color:"#00ff88"},children:[T," Bullish (",(T/h*100).toFixed(1),"%)"]}),e.jsxs("span",{style:{color:"#ff4466"},children:[Le," Bearish (",(Le/h*100).toFixed(1),"%)"]})]})]})]}),p==="analytics"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#8b5cf6",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO Profile Types",e.jsx(ke,{id:"tpo",title:at.tpo.title,content:at.tpo.content,color:"#8b5cf6"})]}),Object.entries((I==null?void 0:I.by_tpo_type)||{}).sort((g,j)=>j[1].total-g[1].total).map(([g,j])=>e.jsx(we,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#8b5cf6"},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Volume Patterns",e.jsx(ke,{id:"volume",title:at.volume.title,content:at.volume.content,color:"#f97316"})]}),Object.entries((I==null?void 0:I.by_volume_pattern)||{}).sort((g,j)=>j[1].total-g[1].total).slice(0,8).map(([g,j])=>e.jsx(we,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#f97316"},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00bcd4",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phases",e.jsx(ke,{id:"wyckoff",title:at.wyckoff.title,content:at.wyckoff.content,color:"#00bcd4"})]}),Object.entries((I==null?void 0:I.by_wyckoff_phase)||{}).sort((g,j)=>j[1].total-g[1].total).map(([g,j])=>e.jsx(we,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#00bcd4"},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Order Flow Patterns",e.jsx(ke,{id:"orderflow",title:at.orderflow.title,content:at.orderflow.content,color:"#ff4466"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px 32px"},children:Object.entries((I==null?void 0:I.by_order_flow)||{}).sort((g,j)=>j[1].total-g[1].total).map(([g,j])=>e.jsx(we,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#ff4466"},g))})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Exit Reasons",e.jsx(ke,{id:"exit",title:at.exit.title,content:at.exit.content,color:"#00ff88"})]}),(()=>{const g=(I==null?void 0:I.by_exit_reason)||{},j=Object.values(g).reduce((V,M)=>V+M.total,0);return Object.entries(g).sort((V,M)=>M[1].total-V[1].total).map(([V,M])=>{const N=j>0?(M.total/j*100).toFixed(0):0,q=Xe(V),ce=V==="TARGET"?"#00ff88":V==="STOP_LOSS"?"#ff4466":"#f97316";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:100,fontSize:11,color:"#ccc"},children:q}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative",overflow:"hidden",minWidth:100},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${N}%`,background:ce,borderRadius:4}}),e.jsxs("div",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:600,color:"#fff"},children:[N,"%"]})]}),e.jsx("div",{style:{width:45,fontSize:10,color:"#888",textAlign:"right"},children:M.total}),e.jsxs("div",{style:{width:70,fontSize:10,color:M.pnl>=0?"#00ff88":"#ff4466",textAlign:"right",fontWeight:600},children:["$",(M.pnl/1e3).toFixed(1),"K"]})]},V)})})()]})]}),p==="features"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO Type Distribution (All Sessions)",e.jsx(ke,{id:"tpo_dist",title:"TPO Distribution",content:"Total count of each TPO profile type across all trading sessions. TPO (Time Price Opportunity) profiles show where price spent the most time.",color:"#8b5cf6"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:(()=>{const g=Object.values((de==null?void 0:de.tpo_types)||{}).reduce((j,V)=>j+V,0);return Object.entries((de==null?void 0:de.tpo_types)||{}).sort((j,V)=>V[1]-j[1]).map(([j,V])=>e.jsx(zt,{type:j,count:V,total:g,setHoveredTpo:L},j))})()})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phase Distribution",e.jsx(ke,{id:"wyckoff_dist",title:"Wyckoff Distribution",content:"Market cycle phases based on Wyckoff methodology. Shows institutional accumulation/distribution patterns.",color:"#00bcd4"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:(()=>{const g=Object.values((de==null?void 0:de.wyckoff_phases)||{}).reduce((j,V)=>j+V,0);return Object.entries((de==null?void 0:de.wyckoff_phases)||{}).sort((j,V)=>V[1]-j[1]).map(([j,V])=>e.jsx(Je,{phase:j,count:V,total:g,setHoveredWyckoff:Ge},j))})()})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Performing Setups",e.jsx(ke,{id:"best_setups",title:"Best Setups",content:"TPO profile types with the highest win rates (minimum 5 trades). These patterns historically produced the most consistent winning trades. Consider prioritizing entries during these market structures.",color:"#00ff88"})]}),Object.entries((I==null?void 0:I.by_tpo_type)||{}).filter(([,g])=>g.total>=5).sort((g,j)=>j[1].win_rate-g[1].win_rate).slice(0,5).map(([g,j])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:11},children:[e.jsx("span",{style:{color:"#888"},children:g}),e.jsxs("span",{style:{color:"#00ff88",fontWeight:600},children:[j.win_rate,"% WR | $",(j.pnl/1e3).toFixed(1),"K"]})]},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Worst Performing Setups",e.jsx(ke,{id:"worst_setups",title:"Worst Setups",content:"TPO profile types with the lowest win rates (minimum 5 trades). These patterns historically produced more losing trades. Consider avoiding or using tighter stops when trading during these market structures.",color:"#ff4466"})]}),Object.entries((I==null?void 0:I.by_tpo_type)||{}).filter(([,g])=>g.total>=5).sort((g,j)=>g[1].win_rate-j[1].win_rate).slice(0,5).map(([g,j])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:11},children:[e.jsx("span",{style:{color:"#888"},children:g}),e.jsxs("span",{style:{color:"#ff4466",fontWeight:600},children:[j.win_rate,"% WR | $",(j.pnl/1e3).toFixed(1),"K"]})]},g))]})]}),p==="phase"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00bcd4",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phase Detection",e.jsx(ke,{id:"phase_detect",title:"Phase Detection",content:"Market phases identified using Wyckoff methodology across 5 years of historical data. Shows how price moves through accumulation, markup, distribution, and markdown cycles.",color:"#00bcd4"})]}),(()=>{const g=(de==null?void 0:de.wyckoff_phases)||{},j=Object.values(g).reduce((M,N)=>M+N,0),V={accumulation:"#00ff88",markup:"#22c55e",distribution:"#ff4466",markdown:"#ef4444",consolidation:"#f97316",trending:"#a855f7",re_accumulation:"#10b981",re_distribution:"#f43f5e",unknown:"#666"};return Object.entries(g).sort((M,N)=>N[1]-M[1]).map(([M,N])=>{const q=j>0?(N/j*100).toFixed(1):0,ce=V[M]||"#888";return e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:11,color:"#ccc"},children:Xe(M)}),e.jsxs("span",{style:{fontSize:11,color:ce,fontWeight:600},children:[N," (",q,"%)"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:4,height:8,overflow:"hidden"},children:e.jsx("div",{style:{width:`${q}%`,height:"100%",background:ce,borderRadius:4}})})]},M)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#a855f7",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Phase Performance Analysis",e.jsx(ke,{id:"phase_perf",title:"Phase Performance",content:"Trading performance breakdown by Wyckoff phase. Shows win rate and P&L for each market phase to identify which phases are most profitable to trade.",color:"#a855f7"})]}),(()=>{const g=(I==null?void 0:I.by_wyckoff_phase)||{};return Object.entries(g).sort((j,V)=>V[1].pnl-j[1].pnl).map(([j,V])=>{const M=V.win_rate||0,N=M>=65?"#00ff88":M>=50?"#f97316":"#ff4466";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:90,fontSize:10,color:"#aaa"},children:Xe(j)}),e.jsxs("div",{style:{width:50,fontSize:10,color:N,fontWeight:600},children:[M.toFixed(0),"% WR"]}),e.jsx("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:12,position:"relative"},children:e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Math.min(100,M)}%`,background:N,borderRadius:4}})}),e.jsxs("div",{style:{width:70,fontSize:10,color:V.pnl>=0?"#00ff88":"#ff4466",fontWeight:600,textAlign:"right"},children:["$",(V.pnl/1e3).toFixed(1),"K"]})]},j)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Order Flow Pattern Detection",e.jsx(ke,{id:"orderflow_detect",title:"Order Flow Detection",content:"Detected order flow patterns: CVD divergences, VSA no-effort results, delta imbalances, and absorption patterns identified across historical sessions.",color:"#ff4466"})]}),(()=>{const g=(I==null?void 0:I.by_order_flow)||{},j=Object.values(g).reduce((M,N)=>M+N.total,0),V={cvd_bullish_divergence:"#00ff88",cvd_bearish_divergence:"#ff4466",vsa_no_effort_result:"#f97316",delta_imbalance:"#a855f7",absorption:"#00bcd4",normal:"#666"};return Object.entries(g).sort((M,N)=>N[1].total-M[1].total).map(([M,N])=>{const q=j>0?(N.total/j*100).toFixed(1):0,ce=V[M]||"#888";return e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:10,color:"#ccc"},children:Xe(M)}),e.jsxs("span",{style:{fontSize:10,color:"#888"},children:[N.total," trades (",q,"%)"]})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:8,overflow:"hidden"},children:e.jsx("div",{style:{width:`${q}%`,height:"100%",background:ce,borderRadius:4}})}),e.jsxs("span",{style:{fontSize:9,color:N.win_rate>=60?"#00ff88":"#f97316",fontWeight:600,width:45},children:[N.win_rate.toFixed(0),"% WR"]})]})]},M)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Volume Pattern Detection",e.jsx(ke,{id:"volume_detect",title:"Volume Patterns",content:"Volume patterns detected using VSA (Volume Spread Analysis): climax, exhaustion, absorption, no demand/supply signals across 1,257 trading sessions.",color:"#f97316"})]}),(()=>{const g=(de==null?void 0:de.volume_patterns)||{},j=Object.values(g).reduce((M,N)=>M+N,0),V={climax_bullish:"#00ff88",climax_bearish:"#ff4466",exhaustion:"#f97316",absorption:"#a855f7",no_demand:"#ff6b6b",no_supply:"#22c55e",high_volume:"#00bcd4",low_volume:"#888",normal:"#666"};return Object.entries(g).sort((M,N)=>N[1]-M[1]).map(([M,N])=>{const q=j>0?(N/j*100).toFixed(1):0,ce=V[M]||"#888";return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:10,color:"#ccc"},children:Xe(M)}),e.jsxs("span",{style:{fontSize:10,color:ce,fontWeight:600},children:[N," (",q,"%)"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:3,height:6,overflow:"hidden"},children:e.jsx("div",{style:{width:`${q}%`,height:"100%",background:ce,borderRadius:3}})})]},M)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#22c55e",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Historical GEX Regime Analysis (Simulated from Price Action)",e.jsx(ke,{id:"gex_regime",title:"GEX Regimes",content:"GEX regime classification derived from historical price volatility and range patterns. High GEX (>$5B) correlates with mean-reverting conditions, Low GEX (<$1B) with trending/volatile markets.",color:"#22c55e"})]}),(()=>{const g=(t==null?void 0:t.daily_candles)||[];let j=0,V=0,M=0,N=0;g.forEach(Y=>{const ve=Y.high-Y.low,Tt=(Y.high+Y.low)/2,ut=Tt>0?ve/Tt*100:0;ut<.5?j++:ut<1?V++:ut<2?M++:N++});const q=j+V+M+N||1,ce=[{name:"High GEX (>$5B)",count:j,pct:(j/q*100).toFixed(1),color:"#00ff88",desc:"Mean-reverting, low volatility"},{name:"Medium GEX ($1-5B)",count:V,pct:(V/q*100).toFixed(1),color:"#f97316",desc:"Normal conditions"},{name:"Low GEX (<$1B)",count:M,pct:(M/q*100).toFixed(1),color:"#ff4466",desc:"Trending, higher volatility"},{name:"Negative GEX",count:N,pct:(N/q*100).toFixed(1),color:"#a855f7",desc:"Extreme volatility, dealer short gamma"}];return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:ce.map(Y=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:12,textAlign:"center",borderTop:`3px solid ${Y.color}`},children:[e.jsx("div",{style:{fontSize:22,fontWeight:800,color:Y.color},children:Y.count}),e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:Y.name}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#fff"},children:[Y.pct,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:4},children:Y.desc})]},Y.name))})})()]})]}),p==="matrix"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#a855f7",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO-Wyckoff Phase Correlation Matrix",e.jsx(ke,{id:"tpo_wyckoff_matrix",title:"Correlation Matrix",content:"Heat map showing which TPO profile types occur during which Wyckoff phases. Helps identify market structure patterns and optimal entry conditions.",color:"#a855f7"})]}),(()=>{const g=["P-shape","b-shape","D-shape","B-shape","elongated_up","elongated_down","single_print"],j=["accumulation","markup","distribution","markdown","consolidation","trending","re_accumulation","re_distribution"],V={};g.forEach(N=>{V[N]={},j.forEach(q=>{V[N][q]=0})}),(n||[]).forEach(N=>{const q=N.tpo_type||"unknown",ce=N.wyckoff_phase||"unknown";V[q]&&V[q][ce]!==void 0&&V[q][ce]++});let M=1;return g.forEach(N=>j.forEach(q=>{V[N][q]>M&&(M=V[N][q])})),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:6,textAlign:"left",color:"#888",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"TPO / Phase"}),j.map(N=>e.jsx("th",{style:{padding:6,textAlign:"center",color:"#00bcd4",borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:8},children:Xe(N).split(" ")[0]},N))]})}),e.jsx("tbody",{children:g.map(N=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6,color:"#8b5cf6",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:N}),j.map(q=>{const ce=V[N][q],Y=ce/M,ve=ce>0?`rgba(168,85,247,${.1+Y*.6})`:"transparent";return e.jsx("td",{style:{padding:6,textAlign:"center",background:ve,color:ce>0?"#fff":"#333",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:ce>0?ce:"-"},q)})]},N))})]})})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Win Rate Matrix (TPO + Wyckoff Combinations)",e.jsx(ke,{id:"wr_matrix",title:"Win Rate Matrix",content:"Historical win rates for each TPO-Wyckoff combination. Green cells indicate high-probability setups (>65% WR), red cells indicate setups to avoid (<45% WR).",color:"#00ff88"})]}),(()=>{const g=["P-shape","b-shape","D-shape","B-shape","elongated_up","elongated_down"],j=["accumulation","markup","distribution","markdown","consolidation","trending"],V={};return g.forEach(M=>{V[M]={},j.forEach(N=>{V[M][N]={wins:0,total:0}})}),(n||[]).forEach(M=>{const N=M.tpo_type||"unknown",q=M.wyckoff_phase||"unknown";V[N]&&V[N][q]&&(V[N][q].total++,M.pnl>0&&V[N][q].wins++)}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:6,textAlign:"left",color:"#888",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"TPO / Phase"}),j.map(M=>e.jsx("th",{style:{padding:6,textAlign:"center",color:"#00bcd4",borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:8},children:Xe(M).split(" ")[0]},M))]})}),e.jsx("tbody",{children:g.map(M=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6,color:"#8b5cf6",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:M}),j.map(N=>{const{wins:q,total:ce}=V[M][N],Y=ce>0?(q/ce*100).toFixed(0):null,ve=Y===null?"#333":Y>=65?"#00ff88":Y>=50?"#f97316":"#ff4466",Tt=Y===null?"transparent":Y>=65?"rgba(0,255,136,0.15)":Y>=50?"rgba(249,115,22,0.1)":"rgba(255,68,102,0.15)";return e.jsxs("td",{style:{padding:6,textAlign:"center",background:Tt,color:ve,fontWeight:Y!==null?600:400,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[Y!==null?`${Y}%`:"-",ce>0&&e.jsxs("div",{style:{fontSize:7,color:"#666"},children:["n=",ce]})]},N)})]},M))})]})})})(),e.jsxs("div",{style:{marginTop:12,display:"flex",gap:16,justifyContent:"center",fontSize:9},children:[e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(0,255,136,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," High WR (65%+)"]}),e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(249,115,22,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," Medium WR (50-65%)"]}),e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(255,68,102,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," Low WR (<50%)"]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Order Flow + TPO Combinations",e.jsx(ke,{id:"of_tpo",title:"Order Flow + TPO",content:"Most profitable combinations of order flow signals with TPO profile types. These combinations showed the highest win rates in backtesting.",color:"#ff4466"})]}),(()=>{const g={};return(n||[]).forEach(j=>{const V=`${j.order_flow||"normal"}|${j.tpo_type||"unknown"}`;g[V]||(g[V]={wins:0,total:0,pnl:0}),g[V].total++,g[V].pnl+=j.pnl||0,j.pnl>0&&g[V].wins++}),Object.entries(g).filter(([,j])=>j.total>=5).map(([j,V])=>({key:j,...V,wr:V.wins/V.total*100})).sort((j,V)=>V.wr-j.wr).slice(0,8).map(j=>{const[V,M]=j.key.split("|");return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{flex:1,fontSize:10,color:"#ccc"},children:[e.jsx("span",{style:{color:"#ff4466"},children:Xe(V)})," + ",e.jsx("span",{style:{color:"#8b5cf6"},children:M})]}),e.jsxs("div",{style:{fontSize:10,color:j.wr>=65?"#00ff88":"#f97316",fontWeight:600},children:[j.wr.toFixed(0),"%"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:["n=",j.total]})]},j.key)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Volume + Wyckoff Combinations",e.jsx(ke,{id:"vol_wyckoff",title:"Volume + Wyckoff",content:"Most profitable combinations of volume patterns with Wyckoff phases. Identifies which volume signals work best in specific market cycles.",color:"#f97316"})]}),(()=>{const g={};return(n||[]).forEach(j=>{const V=`${j.volume_pattern||"normal"}|${j.wyckoff_phase||"unknown"}`;g[V]||(g[V]={wins:0,total:0,pnl:0}),g[V].total++,g[V].pnl+=j.pnl||0,j.pnl>0&&g[V].wins++}),Object.entries(g).filter(([,j])=>j.total>=5).map(([j,V])=>({key:j,...V,wr:V.wins/V.total*100})).sort((j,V)=>V.wr-j.wr).slice(0,8).map(j=>{const[V,M]=j.key.split("|");return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{flex:1,fontSize:10,color:"#ccc"},children:[e.jsx("span",{style:{color:"#f97316"},children:Xe(V)})," + ",e.jsx("span",{style:{color:"#00bcd4"},children:Xe(M)})]}),e.jsxs("div",{style:{fontSize:10,color:j.wr>=65?"#00ff88":"#f97316",fontWeight:600},children:[j.wr.toFixed(0),"%"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:["n=",j.total]})]},j.key)})})()]})]}),p==="seasonality"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Monthly Seasonality"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:8},children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(g=>{var V;const j=((V=S==null?void 0:S.monthly)==null?void 0:V[g])||{win_rate:50,avg_return:0};return e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666"},children:g.slice(0,3)}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:j.avg_return>=0?"#00ff88":"#ff4466"},children:[j.win_rate,"%"]}),e.jsxs("div",{style:{fontSize:8,color:j.avg_return>=0?"#00ff88":"#ff4466"},children:[j.avg_return>=0?"+":"",j.avg_return.toFixed(2),"%"]})]},g)})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Day of Week"}),["Monday","Tuesday","Wednesday","Thursday","Friday"].map(g=>{var V;const j=((V=S==null?void 0:S.day_of_week)==null?void 0:V[g])||{win_rate:50,avg_return:0};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:60,fontSize:10,color:"#888"},children:g.slice(0,3)}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${j.win_rate}%`,background:j.avg_return>=0?"#00ff88":"#ff4466",borderRadius:4}}),e.jsxs("span",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:9,color:"#fff",fontWeight:600},children:[j.win_rate,"%"]})]})]},g)})]})]}),p==="trades"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16},children:[e.jsx(Ip,{trades:n,dateRange:o}),e.jsx(Og,{trades:n})]}),oe&&e.jsxs("div",{style:{position:"fixed",left:oe.x+15,top:oe.y+15,transform:oe.x>window.innerWidth-340?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(20,20,25,0.98) 0%, rgba(10,10,15,0.98) 100%)",border:`1px solid ${oe.color}44`,borderRadius:10,padding:"12px 14px",minWidth:240,maxWidth:320,boxShadow:`0 12px 32px rgba(0,0,0,0.8), 0 0 15px ${oe.color}22`,zIndex:9999,pointerEvents:"none"},children:[e.jsx("div",{style:{fontWeight:700,color:oe.color,marginBottom:8,fontSize:13},children:oe.formattedLabel}),e.jsx("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.6},children:oe.tooltip||`Win rate: ${oe.wr}% across ${oe.total} trades with ${oe.pnl>=0?"profit":"loss"} of $${(oe.pnl/1e3).toFixed(1)}K`}),e.jsxs("div",{style:{marginTop:10,padding:"6px 8px",background:"rgba(255,255,255,0.05)",borderRadius:6,fontSize:10,display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Win Rate"}),e.jsxs("span",{style:{color:oe.color,fontWeight:700},children:[oe.wr,"%"]})]})]}),A&&e.jsxs("div",{style:{position:"fixed",left:A.x+15,top:A.y+15,transform:A.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(15,15,20,0.98) 0%, rgba(5,5,10,0.98) 100%)",border:`1px solid ${A.color}40`,borderRadius:12,padding:16,width:280,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 20px ${A.color}20`,zIndex:9999,pointerEvents:"none"},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:A.color,marginBottom:10,borderBottom:`1px solid ${A.color}30`,paddingBottom:8},children:A.title}),e.jsx("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.6},children:A.content})]}),(W||Z)&&e.jsx("div",{onClick:()=>{L(null),Ge(null)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,cursor:"default"}}),W&&e.jsxs("div",{onClick:()=>L(null),style:{position:"fixed",left:W.x+15,top:W.y+15,transform:W.x>window.innerWidth-280?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(20,15,30,0.98) 0%, rgba(10,8,20,0.98) 100%)",border:"1px solid rgba(139,92,246,0.4)",borderRadius:14,padding:16,minWidth:240,boxShadow:"0 12px 40px rgba(0,0,0,0.8), 0 0 20px rgba(139,92,246,0.2)",zIndex:9999,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:12},children:[e.jsx("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:10,padding:8,border:"1px solid rgba(139,92,246,0.2)"},children:W.visual.svg}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#8b5cf6",marginBottom:4},children:Xe(W.type)}),e.jsx("div",{style:{fontSize:11,color:W.visual.color,fontWeight:600,padding:"2px 8px",background:`${W.visual.color}22`,borderRadius:4,display:"inline-block"},children:W.visual.signal})]})]}),e.jsx("div",{style:{fontSize:11,color:"#bbb",lineHeight:1.6,marginBottom:12},children:W.visual.desc}),e.jsxs("div",{style:{padding:"8px 10px",background:"rgba(139,92,246,0.1)",borderRadius:8,fontSize:10,color:"#888",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Occurrences"}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#8b5cf6",fontWeight:700,fontSize:12},children:W.count})," (",W.pct,"%)"]})]}),e.jsx("div",{style:{fontSize:9,color:"#555",textAlign:"center",marginTop:8},children:"Click anywhere to dismiss"})]}),Z&&e.jsxs("div",{onClick:()=>Ge(null),style:{position:"fixed",left:Z.x+15,top:Z.y+15,transform:Z.x>window.innerWidth-300?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(15,25,30,0.98) 0%, rgba(8,15,20,0.98) 100%)",border:"1px solid rgba(0,188,212,0.4)",borderRadius:14,padding:16,width:260,boxShadow:"0 12px 40px rgba(0,0,0,0.8), 0 0 20px rgba(0,188,212,0.2)",zIndex:9999,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:12},children:[e.jsx("div",{style:{background:"rgba(0,188,212,0.1)",borderRadius:10,padding:8,border:"1px solid rgba(0,188,212,0.2)"},children:Z.visual.svg}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00bcd4",marginBottom:4,textTransform:"capitalize"},children:Z.phase.replace(/_/g," ")}),e.jsx("div",{style:{fontSize:11,color:Z.visual.color,fontWeight:600,padding:"2px 8px",background:`${Z.visual.color}22`,borderRadius:4,display:"inline-block"},children:Z.visual.signal})]})]}),e.jsx("div",{style:{fontSize:11,color:"#bbb",lineHeight:1.6,marginBottom:12},children:Z.visual.desc}),e.jsxs("div",{style:{padding:"8px 10px",background:"rgba(0,188,212,0.1)",borderRadius:8,fontSize:10,color:"#888",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Occurrences"}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00bcd4",fontWeight:700,fontSize:12},children:Z.count})," (",Z.pct,"%)"]})]}),e.jsx("div",{style:{fontSize:9,color:"#555",textAlign:"center",marginTop:8},children:"Click anywhere to dismiss"})]})]})},Ip=({trades:t,dateRange:n})=>{const o=t.filter(l=>l.date>=n.start&&l.date<=n.end).sort((l,a)=>new Date(a.date)-new Date(l.date)),i=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"],a=o.map(u=>{var W,L,Z,Ge,f;return[u.date,((W=u.entry)==null?void 0:W.toFixed(2))||"",((L=u.exit)==null?void 0:L.toFixed(2))||"",((Z=u.stop_loss)==null?void 0:Z.toFixed(2))||"",((Ge=u.pnl)==null?void 0:Ge.toFixed(2))||"",((f=u.r)==null?void 0:f.toFixed(2))||"",u.grade||"",u.tier||"",u.exitReason||"",u.delta||"",u.contracts||""]}),d=[l.join(","),...a.map(u=>u.join(","))].join(`
`),p=new Blob([d],{type:"text/csv"}),w=URL.createObjectURL(p),y=document.createElement("a");y.href=w,y.download=`trade_log_${n.start}_to_${n.end}.csv`,y.click(),URL.revokeObjectURL(w)},r=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"];let a='<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?>';a+='<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">',a+='<Worksheet ss:Name="Trades"><Table>',a+="<Row>"+l.map(y=>`<Cell><Data ss:Type="String">${y}</Data></Cell>`).join("")+"</Row>",o.forEach(y=>{a+="<Row>",a+=`<Cell><Data ss:Type="String">${y.date||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.entry||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.exit||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.stop_loss||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.pnl||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.r||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="String">${y.grade||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.tier||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="String">${y.exitReason||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.delta||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.contracts||0}</Data></Cell>`,a+="</Row>"}),a+="</Table></Worksheet></Workbook>";const d=new Blob([a],{type:"application/vnd.ms-excel"}),p=URL.createObjectURL(d),w=document.createElement("a");w.href=p,w.download=`trade_log_${n.start}_to_${n.end}.xls`,w.click(),URL.revokeObjectURL(p)},s=o.slice(0,50);return e.jsxs("div",{style:Q.tradeLog,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:Q.dashboardTitle,children:"Trade Log"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:i,style:{background:"rgba(0,255,136,0.1)",border:"1px solid #00ff88",color:"#00ff88",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" CSV (",o.length,")"]}),e.jsxs("button",{onClick:r,style:{background:"rgba(0,170,255,0.1)",border:"1px solid #00aaff",color:"#00aaff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" Excel (",o.length,")"]})]})]}),e.jsxs("p",{style:Q.tradeLogInfo,children:["Showing ",s.length," of ",o.length," filtered trades (most recent first)"]}),e.jsxs("table",{style:Q.tradeTable,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:Q.th,children:"Date"}),e.jsx("th",{style:Q.th,children:"Entry"}),e.jsx("th",{style:Q.th,children:"Exit"}),e.jsx("th",{style:Q.th,children:"P&L"}),e.jsx("th",{style:Q.th,children:"R-Multiple"}),e.jsx("th",{style:Q.th,children:"Grade"}),e.jsx("th",{style:Q.th,children:"Tier"}),e.jsx("th",{style:Q.th,children:"Exit Reason"})]})}),e.jsx("tbody",{children:s.map(l=>{var a;return e.jsxs("tr",{style:Q.tr,children:[e.jsx("td",{style:Q.td,children:l.date}),e.jsxs("td",{style:Q.td,children:["$",l.entry.toFixed(2)]}),e.jsxs("td",{style:Q.td,children:["$",l.exit.toFixed(2)]}),e.jsxs("td",{style:{...Q.td,color:l.pnl>=0?"#00ff88":"#ff4466"},children:["$",l.pnl.toLocaleString()]}),e.jsxs("td",{style:{...Q.td,color:l.r>=0?"#00ff88":"#ff4466"},children:[l.r.toFixed(1),"R"]}),e.jsx("td",{style:Q.td,children:e.jsx("span",{style:{...Q.gradeBadge,background:l.grade==="A"?"#00ff88":l.grade==="B"?"#ffaa00":"#ff4466"},children:l.grade})}),e.jsx("td",{style:Q.td,children:l.tier}),e.jsx("td",{style:Q.td,children:e.jsx("span",{style:{fontSize:"11px",color:l.exitReason==="STOP_LOSS"?"#ff4466":"#00ff88"},children:((a=l.exitReason)==null?void 0:a.replace("_"," "))||""})})]},l.id)})})]})]})},Vr={"BTC-SPOT":{symbol:"BTC-SPOT",name:"Bitcoin Spot 24/7",ticker:"BTCUSDT",asset:"BTC-SPOT",icon:"",isSpot:!0},ESH26:{symbol:"ESH26",name:"E-mini S&P Mar 2026",ticker:"ES1!",asset:"ES",icon:""},NQH26:{symbol:"NQH26",name:"Nasdaq Mar 2026",ticker:"NQ1!",asset:"NQ",icon:""},GCJ26:{symbol:"GCJ26",name:"Gold Apr 2026",ticker:"GC1!",asset:"GC",icon:""},BTCG26:{symbol:"BTCG26",name:"Bitcoin CME Feb 2026",ticker:"BTC1!",asset:"BTC",icon:""},CLG26:{symbol:"CLG26",name:"Crude Oil Feb 2026",ticker:"CL1!",asset:"CL",icon:""}},u0=({selectedContract:t,onContractChange:n,contracts:o,isMobile:i})=>{var d;const[r,s]=B.useState(!1),l=B.useRef(null),a=o[t];return B.useEffect(()=>{const p=w=>{l.current&&!l.current.contains(w.target)&&s(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),e.jsxs("div",{ref:l,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>s(!r),style:{display:"flex",alignItems:"center",gap:i?6:10,padding:i?"6px 10px":"10px 16px",background:"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,170,255,0.1) 100%)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:8,cursor:"pointer",transition:"all 0.2s ease",outline:"none"},children:[e.jsx("span",{style:{fontSize:i?14:18},children:(a==null?void 0:a.icon)||""}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:i?12:14,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace",letterSpacing:.5},children:(a==null?void 0:a.symbol)||"SELECT"}),!i&&e.jsx("div",{style:{fontSize:9,color:"#888",marginTop:1},children:((d=a==null?void 0:a.name)==null?void 0:d.split(" ").slice(0,2).join(" "))||"Contract"})]}),e.jsx("svg",{width:i?10:12,height:i?10:12,viewBox:"0 0 12 12",fill:"none",style:{marginLeft:i?2:6,transform:r?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:e.jsx("path",{d:"M2 4L6 8L10 4",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),r&&e.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,marginBottom:8,minWidth:i?180:240,background:"linear-gradient(180deg, rgba(20,20,30,0.98) 0%, rgba(10,10,18,0.99) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,overflow:"hidden",boxShadow:"0 -10px 40px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",zIndex:2e3,animation:"slideUp 0.2s ease"},children:[e.jsx("div",{style:{padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,0.08)",background:"rgba(0,255,136,0.05)"},children:e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1,textTransform:"uppercase"},children:"Select Contract"})}),e.jsx("div",{style:{maxHeight:280,overflowY:"auto"},children:Object.entries(o).map(([p,w])=>{const y=p===t;return e.jsxs("div",{onClick:()=>{n(p),s(!1)},style:{display:"flex",alignItems:"center",gap:12,padding:"12px 14px",cursor:"pointer",background:y?"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, transparent 100%)":"transparent",borderLeft:y?"3px solid #00ff88":"3px solid transparent",transition:"all 0.15s ease"},onMouseEnter:u=>{y||(u.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseLeave:u=>{y||(u.currentTarget.style.background="transparent")},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:y?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:w.icon||""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:y?"#00ff88":"#fff",fontFamily:"'JetBrains Mono', monospace",marginBottom:2},children:w.symbol}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:w.name})]}),y&&e.jsx("div",{style:{width:20,height:20,borderRadius:"50%",background:"#00ff88",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M2 6L5 9L10 3",stroke:"#000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},p)})}),e.jsx("div",{style:{padding:"8px 14px",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.2)"},children:e.jsx("span",{style:{fontSize:9,color:"#555"},children:"Live data from Databento"})})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbars for Windows users */
        .tpo-scroll-container::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }

        .tpo-scroll-container::-webkit-scrollbar-track {
          background: rgba(20, 20, 28, 0.8);
          border-radius: 5px;
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb {
          background: linear-gradient(180deg, rgba(100, 100, 120, 0.6) 0%, rgba(70, 70, 90, 0.6) 100%);
          border-radius: 5px;
          border: 2px solid rgba(20, 20, 28, 0.8);
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(180deg, rgba(130, 130, 150, 0.8) 0%, rgba(100, 100, 120, 0.8) 100%);
        }

        .tpo-scroll-container::-webkit-scrollbar-corner {
          background: rgba(20, 20, 28, 0.8);
        }

        /* Firefox scrollbar support */
        .tpo-scroll-container {
          scrollbar-width: thin;
          scrollbar-color: rgba(100, 100, 120, 0.6) rgba(20, 20, 28, 0.8);
        }
      `})]})},$g=({globalData:t,selectedContract:n,onContractChange:o,contracts:i,isMobile:r})=>{var y,u,W,L;const s=["DISCONNECTED","NO_DATABENTO_LIB","NO_API_KEY","ERROR"],l=["INITIALIZING","SWITCHING...","WAITING_CONNECTION_SLOT","RESETTING..."],a=((y=t==null?void 0:t.data_source)==null?void 0:y.includes("RECONNECTING"))||l.includes(t==null?void 0:t.data_source),d=(t==null?void 0:t.data_source)&&!s.includes(t.data_source)&&!a,p=d?"LIVE":a?"RECONNECTING":"OFFLINE",w=d?"#00ff88":a?"#ffaa00":"#ff4466";return r?e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.98) 0%, rgba(5,5,10,1) 100%)",borderTop:"1px solid rgba(0,255,136,0.3)",padding:"8px 12px",zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[e.jsx(u0,{selectedContract:n,onContractChange:o,contracts:i,isMobile:!0}),e.jsx("div",{style:{padding:"6px 14px",background:d?"rgba(0,255,136,0.15)":a?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${d?"rgba(0,255,136,0.4)":a?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:8},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:d?"#00ff88":a?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace"},children:["$",((u=t==null?void 0:t.current_price)==null?void 0:u.toFixed(2))||"----.--"]})}),e.jsx("div",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6},children:e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff",fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.current_et_time)||"--:--"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"4px 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:w,boxShadow:`0 0 6px ${w}`,animation:d||a?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{fontSize:9,fontWeight:700,color:w},children:p})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsxs("span",{style:{fontSize:9,color:"#666"},children:["LATENCY: ",e.jsx("span",{style:{color:d?"#00ff88":"#666"},children:d?"~10ms":a?"...":"--"})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsx("span",{style:{fontSize:9,color:d?"#00aaff":a?"#ffaa00":"#666"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]}):e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.95) 0%, rgba(5,5,10,0.98) 100%)",borderTop:"1px solid rgba(0,255,136,0.2)",padding:"12px 24px",display:"flex",alignItems:"center",justifyContent:"center",gap:24,zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.5)"},children:[e.jsx(u0,{selectedContract:n,onContractChange:o,contracts:i,isMobile:!1}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{padding:"8px 16px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666"},children:"ET"}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:(t==null?void 0:t.current_et_time)||"--:--:--"})]})}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666",textTransform:"uppercase",letterSpacing:1},children:"Price"}),e.jsx("div",{style:{padding:"8px 20px",background:d?"rgba(0,255,136,0.15)":a?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${d?"rgba(0,255,136,0.4)":a?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:6,boxShadow:d?"0 0 20px rgba(0,255,136,0.2)":a?"0 0 15px rgba(255,170,0,0.15)":"none"},children:e.jsxs("span",{style:{fontSize:20,fontWeight:700,color:d?"#00ff88":a?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",textShadow:d?"0 0 10px rgba(0,255,136,0.5)":"none"},children:["$",((W=t==null?void 0:t.current_price)==null?void 0:W.toFixed(2))||"----.--"]})})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(255,255,255,0.02)",borderRadius:4,fontSize:11,color:"#888"},children:((L=i[n])==null?void 0:L.name)||"Gold Apr 2026"}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 14px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:w,boxShadow:`0 0 6px ${w}`,animation:d||a?"pulse 2s infinite":"none"}}),e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:w,boxShadow:`0 0 6px ${w}`,animation:d||a?"pulse 2s infinite 0.3s":"none"}}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:w,marginLeft:4,textTransform:"uppercase",letterSpacing:1},children:p})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"LATENCY:"}),e.jsx("span",{style:{fontSize:11,color:w,fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:d?"~10ms":a?"...":"--"}),d&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(0,255,136,0.2)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:3,color:"#00ff88",fontWeight:600},children:"EXCELLENT"}),a&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(255,170,0,0.2)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:3,color:"#ffaa00",fontWeight:600},children:"WAITING"})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"SOURCE:"}),e.jsx("span",{style:{fontSize:11,color:d?"#00aaff":a?"#ffaa00":"#666",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]})]})},Vg=()=>{var we;const{isMobile:t}=$i(),[n,o]=ga("horizon_user",null),[i,r]=B.useState("backtest"),[s,l]=ga("horizon_settings",Bp),[a,d]=B.useState({start:"2021-01-01",end:"2026-12-31"}),[p,w]=ga("horizon_contract","GCJ26");B.useEffect(()=>{(async()=>{let te;p==="BTC-SPOT"?te="BTC-SPOT":p.startsWith("BTC")?te="BTC":p.startsWith("GC")?te="GC":p.startsWith("NQ")?te="NQ":p.startsWith("ES")?te="ES":p.startsWith("CL")?te="CL":te="GC";try{await fetch(`${on}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:te})}),console.log(`Synced backend to ${p} (${te})`)}catch(ke){console.error("Failed to sync contract on load:",ke)}})()},[]);const[y,u]=B.useState({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),W=B.useRef(0),[L,Z]=B.useState({contract:"GCJ26",contract_name:"Gold Apr 2026",current_price:0,current_et_time:"--:--:--",current_et_date:""}),[Ge,f]=B.useState(!1),[m,C]=B.useState([{role:"assistant",content:"Welcome to Horizon AI! I can help you analyze market structure, interpret TPO profiles, and provide trading insights based on live data."}]),[c,F]=B.useState(""),[S,R]=B.useState(!1),I=B.useRef(null);B.useEffect(()=>{var A;(A=I.current)==null||A.scrollIntoView({behavior:"smooth"})},[m]),B.useEffect(()=>{const A=["/live","/tpo","/zones","/market-overview","/historical-sessions?week=current"];console.log("Warming up caches..."),A.forEach(te=>{fetch(`${on}${te}`).then(()=>console.log(`Warmed up ${te}`)).catch(()=>{})})},[]),B.useEffect(()=>{const te={backtest:["/live"],live:["/tpo","/zones"],tpo:["/zones"],zones:["/live"],treemap:[],vsi:[],priceladder:["/tpo"]}[i]||[];i!=="treemap"&&te.push("/market-overview");const ke=setTimeout(()=>{te.forEach(at=>{fetch(`${on}${at}`).then(()=>console.log(`Preloaded ${at}`)).catch(()=>{})})},500);return()=>clearTimeout(ke)},[i]);const de=async()=>{if(!c.trim()||S)return;const A=c.trim();F(""),C($e=>[...$e,{role:"user",content:A}]),R(!0);let te={};try{const $e=await fetch(`${on}/live`);$e.ok&&(te=await $e.json())}catch{}let ke={};try{const $e=await fetch(`${on}/session-ohlc?week=current`);$e.ok&&(ke=await $e.json())}catch{}const at={currentPrice:L.current_price,contract:L.contract,contractName:L.contract_name,currentTime:L.current_et_time,liveSession:te.current_session||null,sessionHigh:te.session_high||null,sessionLow:te.session_low||null,dayHigh:te.day_high||null,dayLow:te.day_low||null,pdHigh:te.pd_high||null,pdLow:te.pd_low||null,pdPOC:te.pd_poc||null,cumulativeDelta:te.cumulative_delta||null,buyVolume:te.buy_volume||null,sellVolume:te.sell_volume||null,sessionData:ke.days?ke.days.slice(0,2):null};try{const $e=await fetch(`${on}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:A,context:at,provider:"claude"})});if($e.ok){const Me=await $e.json();C(Qe=>[...Qe,{role:"assistant",content:Me.response,error:!1}])}else{const Me=await $e.json();C(Qe=>[...Qe,{role:"assistant",content:Me.error||"Sorry, I encountered an error. Please try again.",error:!0}])}}catch{C(Me=>[...Me,{role:"assistant",content:"Connection error. Please check your connection and try again.",error:!0}])}R(!1)};B.useEffect(()=>{let A=0,te=!1;const ke=3,at=1e3,$e=async()=>{if(!te){te=!0,console.log(" Auto-reconnecting to backend...");try{(await fetch(`${on}/reconnect`,{method:"POST"})).ok&&console.log(" Auto-reconnect triggered successfully")}catch{console.log(" Auto-reconnect request failed, backend may be restarting")}await new Promise(J=>setTimeout(J,2e3)),te=!1}},Me=async()=>{try{const J=new AbortController,st=setTimeout(()=>J.abort(),3e3),lt=await fetch(on,{signal:J.signal});if(clearTimeout(st),lt.ok){const et=await lt.json(),ie=["INITIALIZING","SWITCHING...","WAITING_CONNECTION_SLOT","RESETTING...","DISCONNECTED"],g=et.data_source&&!ie.includes(et.data_source)&&!et.data_source.includes("RECONNECTING"),j=et.data_source&&(et.data_source.includes("RECONNECTING")||et.data_source==="WAITING_CONNECTION_SLOT"||et.data_source==="INITIALIZING");Z({contract:et.contract||"GCJ26",contract_name:et.contract_name||"Gold Apr 2026",current_price:et.current_price||0,current_et_time:et.current_et_time||"--:--:--",current_et_date:et.current_et_date||"",available_contracts:et.available_contracts||{},data_source:et.data_source||"DISCONNECTED"}),g?(A=0,u(V=>({...V,connected:!0,lastSuccessTime:new Date().toISOString(),reconnectAttempts:0,lastError:null}))):(j||(A++,A>=ke&&!te&&$e()),u(V=>({...V,connected:j?"reconnecting":!1,lastError:`Data source: ${et.data_source||"DISCONNECTED"}`,reconnectAttempts:j?V.reconnectAttempts:V.reconnectAttempts+1})))}else throw new Error(`HTTP ${lt.status}`)}catch(J){A++;const st=J.name==="AbortError"?"Request timeout":J.message||"Unknown error",lt=st.includes("ECONNRESET")||st.includes("connection reset")||st.includes("Failed to fetch")||st.includes("NetworkError")||st.includes("timeout");u(et=>({...et,connected:!1,lastError:lt?`Network: ${st}`:st,errorCount:et.errorCount+1,reconnectAttempts:et.reconnectAttempts+1})),A>=ke&&!te&&$e()}};Me();let Qe=setInterval(Me,at);const Ft=setInterval(()=>{A>0&&console.log(` Health check: ${A} consecutive failures`)},3e4);return()=>{clearInterval(Qe),clearInterval(Ft)}},[W.current]);const G=async A=>{var ke,at;let te;A==="BTC-SPOT"?te="BTC-SPOT":A.startsWith("BTC")?te="BTC":A.startsWith("GC")?te="GC":A.startsWith("NQ")?te="NQ":A.startsWith("ES")?te="ES":A.startsWith("CL")?te="CL":te=((ke=Vr[A])==null?void 0:ke.asset)||"GC",w(A),Z($e=>({...$e,data_source:"SWITCHING...",current_price:0}));try{if((await fetch(`${on}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:te})})).ok){localStorage.removeItem("tpo_historic_cache"),console.log(`Switched to ${A} (${te})`);const Me=A==="BTC-SPOT"?"BTC-SPOT":((at=Vr[A])==null?void 0:at.symbol)||A;let Qe=0;const Ft=20,J=async()=>{var st;try{const lt=await fetch(on);if(lt.ok){const et=await lt.json();if(et.contract===Me||et.asset_class===te||Qe>=Ft){Z({contract:et.contract||A,contract_name:et.contract_name||((st=Vr[A])==null?void 0:st.name)||A,current_price:et.current_price||0,current_et_time:et.current_et_time||"--:--:--",current_et_date:et.current_et_date||"",available_contracts:et.available_contracts||{},data_source:et.data_source||"SWITCHING..."});return}}}catch{console.log("Polling for new contract data...")}Qe++,Qe<Ft&&setTimeout(J,500)};setTimeout(J,500)}}catch($e){console.error("Failed to switch contract:",$e),Z(Me=>({...Me,data_source:"ERROR"}))}},v=async()=>{u({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),W.current+=1,console.log("Connection reset triggered");try{const A=await fetch(`${on}/reconnect`,{method:"POST"});if(A.ok){const te=await A.json();console.log("Backend reconnect:",te.message)}}catch(A){console.error("Failed to trigger backend reconnect:",A)}},{trades:h,stats:T,source:Le,metadata:z,sessions:Ie,volumeProfiles:Pe,bigVolumeDays:ne,supportResistance:ze,seasonality:b,dailyCandles:_e,hourlyCandles:re,featureStatistics:He,distributions:rt}=Cg(),zt=B.useMemo(()=>({metadata:z,sessions:Ie,volumeProfiles:Pe,bigVolumeDays:ne,supportResistance:ze,seasonality:b,dailyCandles:_e,hourlyCandles:re,featureStatistics:He,distributions:rt}),[z,Ie,Pe,ne,ze,b,_e,re,He,rt]),Je=B.useMemo(()=>h&&h.length>0?h:kg(),[h,s]);B.useEffect(()=>{if(h&&h.length>0){const A=h.map(te=>te.date).sort();d({start:A[0],end:A[A.length-1]})}},[h]);const Xe=B.useMemo(()=>Je.filter(A=>{var te,ke,at;return!(A.date<a.start||A.date>a.end||A.delta!==void 0&&A.delta>s.deltaThreshold||A.pnl>0&&A.buyingImbalance!==void 0&&A.buyingImbalance<s.buyingImbalancePct||(te=s.filters)!=null&&te.grades&&A.grade&&s.filters.grades[A.grade]===!1||(ke=s.filters)!=null&&ke.tiers&&A.tier&&!s.filters.tiers[A.tier]||((at=s.filters)==null?void 0:at.minR)!==void 0&&A.r!==void 0&&A.r<s.filters.minR)}),[Je,a,s.deltaThreshold,s.buyingImbalancePct,s.filters]),Ne=B.useMemo(()=>_g(Xe,s),[Xe,s]);new Date().toISOString();const oe=A=>o(A),fe=()=>o(null);return n?e.jsx(zp.Provider,{value:s,children:e.jsx(Sg.Provider,{value:n,children:e.jsxs("div",{style:Q.app,children:[e.jsx(Lg,{activeTab:i,setActiveTab:r,onLogout:fe}),e.jsxs("main",{style:{...Q.main,padding:t?"12px":"24px",paddingBottom:t?"85px":"80px"},children:[i==="backtest"&&e.jsx(Hg,{data:Ne,trades:Xe,dateRange:a,setDateRange:d,extendedData:zt}),i==="live"&&e.jsx(Dg,{settings:s,onSettingsChange:l}),i==="tpo"&&e.jsx(Ng,{selectedContract:p}),i==="zones"&&e.jsx(Pg,{}),i==="treemap"&&e.jsx(zg,{}),i==="vsi"&&e.jsx(Eg,{selectedContract:p}),i==="trades"&&e.jsx(Ip,{trades:Je,dateRange:a}),i==="priceladder"&&e.jsx(Bg,{selectedContract:p}),i==="settings"&&e.jsx(Wg,{settings:s,onSettingsChange:l,trades:Xe,dateRange:a,connectionStatus:y,onResetConnection:v}),i==="redfolder"&&e.jsx(Ag,{})]}),e.jsxs("footer",{style:Q.footer,children:[e.jsx("span",{children:"Project Horizon v2.0 | Underground Setup Strategy"}),e.jsxs("span",{children:[((we=Vr[p])==null?void 0:we.name)||"GC Futures"," | 2025 Market Regime"]})]}),Ge&&e.jsxs("div",{style:{position:"fixed",bottom:t?70:100,right:t?10:24,left:t?10:"auto",width:t?"auto":380,height:t?"calc(100vh - 150px)":500,maxHeight:t?"70vh":500,background:"linear-gradient(180deg, rgba(12,12,18,0.98) 0%, rgba(8,8,14,1) 100%)",borderRadius:16,border:"1px solid rgba(0,255,136,0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(0,255,136,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:8,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"#000"},children:"H"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:14,color:"#fff"},children:"Horizon AI"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88"},children:"Trading Assistant"})]})]}),e.jsx("button",{onClick:()=>f(!1),style:{background:"transparent",border:"none",color:"#666",fontSize:20,cursor:"pointer",padding:4},children:""})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:16,display:"flex",flexDirection:"column",gap:12},children:[m.map((A,te)=>e.jsx("div",{style:{alignSelf:A.role==="user"?"flex-end":"flex-start",maxWidth:A.role==="user"?"85%":"95%",width:A.role==="user"?"auto":"95%"},children:e.jsx("div",{style:{padding:A.role==="assistant"?"14px 16px":"10px 14px",borderRadius:A.role==="user"?"14px 14px 4px 14px":"14px 14px 14px 4px",background:A.role==="user"?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.06)",border:A.role==="user"?"none":"1px solid rgba(255,255,255,0.1)",color:A.role==="user"?"#000":A.error?"#ff6b6b":"#e8e8e8",fontSize:13,lineHeight:1.6,fontWeight:A.role==="user"?500:400},children:A.role==="assistant"?e.jsx("div",{dangerouslySetInnerHTML:{__html:A.content.replace(/\*\*(.+?)\*\*/g,'<strong style="color:#00ff88">$1</strong>').replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,'<code style="background:rgba(0,255,136,0.15);padding:2px 6px;border-radius:4px;font-family:monospace;font-size:12px">$1</code>').replace(/\n- /g,"<br/> ").replace(/\n\d+\. /g,ke=>"<br/>"+ke.trim()+" ").replace(/\n\n/g,'</p><p style="margin:8px 0">').replace(/\n/g,"<br/>")}}):A.content})},te)),S&&e.jsx("div",{style:{alignSelf:"flex-start",width:"95%"},children:e.jsxs("div",{style:{padding:"14px 16px",borderRadius:"14px 14px 14px 4px",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",fontSize:13,display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite"}}),"Analyzing..."]})}),e.jsx("div",{ref:I})]}),e.jsxs("div",{style:{padding:12,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:c,onChange:A=>F(A.target.value),onKeyPress:A=>A.key==="Enter"&&de(),placeholder:"Ask about trading...",style:{flex:1,padding:"10px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:13,outline:"none"}}),e.jsx("button",{onClick:de,disabled:S||!c.trim(),style:{padding:"10px 16px",borderRadius:10,border:"none",background:c.trim()&&!S?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.1)",color:c.trim()&&!S?"#000":"#666",fontWeight:600,fontSize:13,cursor:c.trim()&&!S?"pointer":"not-allowed"},children:"Send"})]})]}),e.jsx("button",{onClick:()=>f(!Ge),style:{position:"fixed",bottom:t?75:24,right:t?12:24,width:Ge?48:"auto",height:t?40:48,padding:Ge?0:t?"0 14px":"0 20px",borderRadius:Ge?"50%":24,border:"none",background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",color:"#000",fontWeight:700,fontSize:t?12:14,cursor:"pointer",boxShadow:"0 4px 20px rgba(0,255,136,0.4)",zIndex:1001,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},children:Ge?"":e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:18},children:"H"}),e.jsx("span",{children:"Horizon"})]})}),e.jsx($g,{globalData:L,selectedContract:p,onContractChange:G,contracts:Vr,isMobile:t}),e.jsx(yg,{})]})})}):e.jsx(Rg,{onLogin:oe})},Q={app:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",color:"#e0e0e0",fontFamily:"'JetBrains Mono', 'Fira Code', monospace",overflowX:"hidden",width:"100%",maxWidth:"100vw"},main:{padding:"24px",paddingBottom:"80px",maxWidth:"1600px",margin:"0 auto",overflowX:"hidden"},footer:{display:"flex",justifyContent:"space-between",padding:"16px 24px",paddingBottom:"70px",borderTop:"1px solid rgba(255,255,255,0.05)",fontSize:"12px",color:"#666"},loginContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",padding:"20px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginCard:{width:"100%",maxWidth:"420px",background:"rgba(20,20,28,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:"48px 40px",boxShadow:"0 25px 50px rgba(0,0,0,0.5)",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginHeader:{textAlign:"center",marginBottom:"40px"},logo:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"16px"},logoIcon:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},logoText:{fontSize:"22px",fontWeight:"700",color:"#fff",letterSpacing:"3px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, sans-serif"},loginSubtitle:{color:"#888",fontSize:"13px",fontFamily:"'Inter', sans-serif",letterSpacing:"0.5px"},loginForm:{display:"flex",flexDirection:"column",gap:"20px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},inputLabel:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"1px",fontFamily:"'Inter', sans-serif"},input:{padding:"14px 16px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",fontSize:"15px",outline:"none",transition:"border-color 0.2s",fontFamily:"'Inter', sans-serif"},error:{padding:"12px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:"8px",color:"#ff4466",fontSize:"13px",fontFamily:"'Inter', sans-serif"},loginButton:{padding:"16px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:"8px",color:"#000",fontSize:"13px",fontWeight:"700",cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s",fontFamily:"'Inter', sans-serif"},loginFooter:{textAlign:"center",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,0.05)"},footerText:{color:"#555",fontSize:"11px",margin:"4px 0",fontFamily:"'Inter', sans-serif"},nav:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)"},navBrand:{display:"flex",alignItems:"center",gap:"10px"},navTabs:{display:"flex",gap:"8px"},settingsPanel:{maxWidth:"1200px",margin:"0 auto"},settingsHeader:{marginBottom:"32px"},settingsSubtitle:{color:"#666",fontSize:"14px",marginTop:"8px"},settingsGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},settingsCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px"},settingsCardTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",marginBottom:"14px"},sliderGroup:{marginBottom:"16px"},sliderHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},sliderLabel:{fontSize:"11px",color:"#aaa"},sliderValue:{fontSize:"13px",fontWeight:"700",color:"#00ff88"},slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer",WebkitAppearance:"none"},sliderTicks:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#555",marginTop:"4px"},allocationNote:{fontSize:"12px",color:"#888",marginBottom:"16px"},tierVisual:{display:"flex",height:"8px",borderRadius:"4px",overflow:"hidden",marginTop:"16px"},tierBar:{height:"100%",transition:"width 0.3s"},tierLegend:{display:"flex",justifyContent:"space-around",fontSize:"11px",color:"#888",marginTop:"12px"},settingsActions:{display:"flex",gap:"16px",justifyContent:"center",marginBottom:"32px"},actionButton:{padding:"14px 32px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",border:"none"},resetButton:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"#888"},applyButton:{background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000"},settingsInfo:{padding:"24px",background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:"12px"},infoTitle:{fontSize:"14px",color:"#00aaff",marginBottom:"16px"},infoList:{listStyle:"none",padding:0,margin:0,fontSize:"13px",color:"#888",lineHeight:"1.8"},statsCard:{padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},statsTitle:{fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},statsValue:{fontSize:"24px",fontWeight:"700",color:"#fff"},statsSubtitle:{fontSize:"12px",color:"#666",marginTop:"4px"},statsTrend:{fontSize:"12px",marginTop:"8px",fontWeight:"600"},liveDashboard:{maxWidth:"1000px",margin:"0 auto"},levelCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px",textAlign:"center"},levelLabel:{fontSize:"11px",color:"#666",textTransform:"uppercase",marginBottom:"8px"},levelValue:{fontSize:"18px",fontWeight:"600",color:"#fff"},signalMatrix:{padding:"24px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",marginBottom:"24px"},signalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},signalTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",margin:0},signalCount:{fontSize:"14px",fontWeight:"600"},signalGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px"},signalItem:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",borderRadius:"8px",border:"1px solid"},signalIndicator:{width:"10px",height:"10px",borderRadius:"50%"},signalName:{fontSize:"12px",color:"#ddd"},criticalBadge:{marginLeft:"auto",fontSize:"10px",fontWeight:"700",color:"#ffaa00",background:"rgba(255,170,0,0.2)",padding:"2px 6px",borderRadius:"4px"},setupStatus:{display:"flex",alignItems:"center",gap:"12px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.05)"},phaseLabel:{fontSize:"12px",color:"#666"},phaseValue:{fontSize:"14px",fontWeight:"700"},dashboardTitle:{fontSize:"20px",fontWeight:"700",color:"#fff",margin:0},tradeLog:{maxWidth:"1200px",margin:"0 auto"},tradeLogInfo:{fontSize:"13px",color:"#666",marginTop:"8px",marginBottom:"16px"},tradeTable:{width:"100%",borderCollapse:"collapse",marginTop:"16px"},th:{padding:"14px 16px",textAlign:"left",fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",borderBottom:"1px solid rgba(255,255,255,0.1)"},tr:{transition:"background 0.2s"},td:{padding:"14px 16px",fontSize:"14px",borderBottom:"1px solid rgba(255,255,255,0.03)"},gradeBadge:{display:"inline-block",padding:"4px 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"700",color:"#000"}},Ep=document.createElement("style");Ep.textContent=`
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  input:focus {
    border-color: #00ff88 !important;
  }
  button:hover:not(:disabled) {
    transform: translateY(-1px);
  }
  tr:hover {
    background: rgba(255,255,255,0.02);
  }
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255,255,255,0.1);
    height: 8px;
    border-radius: 4px;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    cursor: pointer;
  }
`;document.head.appendChild(Ep);xa.createRoot(document.getElementById("root")).render(e.jsx(No.StrictMode,{children:e.jsx(Vg,{})}));
