(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();function If(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p0={exports:{}},ml={},f0={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hs=Symbol.for("react.element"),Bf=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),Lf=Symbol.for("react.strict_mode"),Af=Symbol.for("react.profiler"),Ff=Symbol.for("react.provider"),Mf=Symbol.for("react.context"),Of=Symbol.for("react.forward_ref"),Wf=Symbol.for("react.suspense"),Pf=Symbol.for("react.memo"),Nf=Symbol.for("react.lazy"),ec=Symbol.iterator;function Df(t){return t===null||typeof t!="object"?null:(t=ec&&t[ec]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h0=Object.assign,g0={};function vo(t,n,r){this.props=t,this.context=n,this.refs=g0,this.updater=r||u0}vo.prototype.isReactComponent={};vo.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x0(){}x0.prototype=vo.prototype;function rd(t,n,r){this.props=t,this.context=n,this.refs=g0,this.updater=r||u0}var id=rd.prototype=new x0;id.constructor=rd;h0(id,vo.prototype);id.isPureReactComponent=!0;var tc=Array.isArray,y0=Object.prototype.hasOwnProperty,od={current:null},m0={key:!0,ref:!0,__self:!0,__source:!0};function b0(t,n,r){var i,o={},s=null,l=null;if(n!=null)for(i in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(s=""+n.key),n)y0.call(n,i)&&!m0.hasOwnProperty(i)&&(o[i]=n[i]);var a=arguments.length-2;if(a===1)o.children=r;else if(1<a){for(var c=Array(a),p=0;p<a;p++)c[p]=arguments[p+2];o.children=c}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)o[i]===void 0&&(o[i]=a[i]);return{$$typeof:hs,type:t,key:s,ref:l,props:o,_owner:od.current}}function Hf(t,n){return{$$typeof:hs,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function sd(t){return typeof t=="object"&&t!==null&&t.$$typeof===hs}function $f(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return n[r]})}var nc=/\/+/g;function Fl(t,n){return typeof t=="object"&&t!==null&&t.key!=null?$f(""+t.key):n.toString(36)}function Ms(t,n,r,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case hs:case Bf:l=!0}}if(l)return l=t,o=o(l),t=i===""?"."+Fl(l,0):i,tc(o)?(r="",t!=null&&(r=t.replace(nc,"$&/")+"/"),Ms(o,n,r,"",function(p){return p})):o!=null&&(sd(o)&&(o=Hf(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(nc,"$&/")+"/")+t)),n.push(o)),1;if(l=0,i=i===""?".":i+":",tc(t))for(var a=0;a<t.length;a++){s=t[a];var c=i+Fl(s,a);l+=Ms(s,n,r,c,o)}else if(c=Df(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=i+Fl(s,a++),l+=Ms(s,n,r,c,o);else if(s==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function bs(t,n,r){if(t==null)return t;var i=[],o=0;return Ms(t,i,"","",function(s){return n.call(r,s,o++)}),i}function Vf(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},Os={transition:null},Uf={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:Os,ReactCurrentOwner:od};function v0(){throw Error("act(...) is not supported in production builds of React.")}Nt.Children={map:bs,forEach:function(t,n,r){bs(t,function(){n.apply(this,arguments)},r)},count:function(t){var n=0;return bs(t,function(){n++}),n},toArray:function(t){return bs(t,function(n){return n})||[]},only:function(t){if(!sd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Nt.Component=vo;Nt.Fragment=Ef;Nt.Profiler=Af;Nt.PureComponent=rd;Nt.StrictMode=Lf;Nt.Suspense=Wf;Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uf;Nt.act=v0;Nt.cloneElement=function(t,n,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=h0({},t.props),o=t.key,s=t.ref,l=t._owner;if(n!=null){if(n.ref!==void 0&&(s=n.ref,l=od.current),n.key!==void 0&&(o=""+n.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in n)y0.call(n,c)&&!m0.hasOwnProperty(c)&&(i[c]=n[c]===void 0&&a!==void 0?a[c]:n[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){a=Array(c);for(var p=0;p<c;p++)a[p]=arguments[p+2];i.children=a}return{$$typeof:hs,type:t.type,key:o,ref:s,props:i,_owner:l}};Nt.createContext=function(t){return t={$$typeof:Mf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ff,_context:t},t.Consumer=t};Nt.createElement=b0;Nt.createFactory=function(t){var n=b0.bind(null,t);return n.type=t,n};Nt.createRef=function(){return{current:null}};Nt.forwardRef=function(t){return{$$typeof:Of,render:t}};Nt.isValidElement=sd;Nt.lazy=function(t){return{$$typeof:Nf,_payload:{_status:-1,_result:t},_init:Vf}};Nt.memo=function(t,n){return{$$typeof:Pf,type:t,compare:n===void 0?null:n}};Nt.startTransition=function(t){var n=Os.transition;Os.transition={};try{t()}finally{Os.transition=n}};Nt.unstable_act=v0;Nt.useCallback=function(t,n){return rr.current.useCallback(t,n)};Nt.useContext=function(t){return rr.current.useContext(t)};Nt.useDebugValue=function(){};Nt.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};Nt.useEffect=function(t,n){return rr.current.useEffect(t,n)};Nt.useId=function(){return rr.current.useId()};Nt.useImperativeHandle=function(t,n,r){return rr.current.useImperativeHandle(t,n,r)};Nt.useInsertionEffect=function(t,n){return rr.current.useInsertionEffect(t,n)};Nt.useLayoutEffect=function(t,n){return rr.current.useLayoutEffect(t,n)};Nt.useMemo=function(t,n){return rr.current.useMemo(t,n)};Nt.useReducer=function(t,n,r){return rr.current.useReducer(t,n,r)};Nt.useRef=function(t){return rr.current.useRef(t)};Nt.useState=function(t){return rr.current.useState(t)};Nt.useSyncExternalStore=function(t,n,r){return rr.current.useSyncExternalStore(t,n,r)};Nt.useTransition=function(){return rr.current.useTransition()};Nt.version="18.3.1";f0.exports=Nt;var L=f0.exports;const Ar=If(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gf=L,Yf=Symbol.for("react.element"),Xf=Symbol.for("react.fragment"),Kf=Object.prototype.hasOwnProperty,Jf=Gf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qf={key:!0,ref:!0,__self:!0,__source:!0};function j0(t,n,r){var i,o={},s=null,l=null;r!==void 0&&(s=""+r),n.key!==void 0&&(s=""+n.key),n.ref!==void 0&&(l=n.ref);for(i in n)Kf.call(n,i)&&!Qf.hasOwnProperty(i)&&(o[i]=n[i]);if(t&&t.defaultProps)for(i in n=t.defaultProps,n)o[i]===void 0&&(o[i]=n[i]);return{$$typeof:Yf,type:t,key:s,ref:l,props:o,_owner:Jf.current}}ml.Fragment=Xf;ml.jsx=j0;ml.jsxs=j0;p0.exports=ml;var e=p0.exports,da={},S0={exports:{}},wr={},w0={exports:{}},k0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(de,Be){var S=de.length;de.push(Be);e:for(;0<S;){var P=S-1>>>1,O=de[P];if(0<o(O,Be))de[P]=Be,de[S]=O,S=P;else break e}}function r(de){return de.length===0?null:de[0]}function i(de){if(de.length===0)return null;var Be=de[0],S=de.pop();if(S!==Be){de[0]=S;e:for(var P=0,O=de.length,ke=O>>>1;P<ke;){var Fe=2*(P+1)-1,qe=de[Fe],Le=Fe+1,bt=de[Le];if(0>o(qe,S))Le<O&&0>o(bt,qe)?(de[P]=bt,de[Le]=S,P=Le):(de[P]=qe,de[Fe]=S,P=Fe);else if(Le<O&&0>o(bt,S))de[P]=bt,de[Le]=S,P=Le;else break e}}return Be}function o(de,Be){var S=de.sortIndex-Be.sortIndex;return S!==0?S:de.id-Be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var c=[],p=[],w=1,y=null,h=3,M=!1,k=!1,G=!1,Me=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(de){for(var Be=r(p);Be!==null;){if(Be.callback===null)i(p);else if(Be.startTime<=de)i(p),Be.sortIndex=Be.expirationTime,n(c,Be);else break;Be=r(p)}}function d(de){if(G=!1,C(de),!k)if(r(c)!==null)k=!0,oe(A);else{var Be=r(p);Be!==null&&Xe(d,Be.startTime-de)}}function A(de,Be){k=!1,G&&(G=!1,x($),$=-1),M=!0;var S=h;try{for(C(Be),y=r(c);y!==null&&(!(y.expirationTime>Be)||de&&!v());){var P=y.callback;if(typeof P=="function"){y.callback=null,h=y.priorityLevel;var O=P(y.expirationTime<=Be);Be=t.unstable_now(),typeof O=="function"?y.callback=O:y===r(c)&&i(c),C(Be)}else i(c);y=r(c)}if(y!==null)var ke=!0;else{var Fe=r(p);Fe!==null&&Xe(d,Fe.startTime-Be),ke=!1}return ke}finally{y=null,h=S,M=!1}}var m=!1,R=null,$=-1,ae=5,q=-1;function v(){return!(t.unstable_now()-q<ae)}function u(){if(R!==null){var de=t.unstable_now();q=de;var Be=!0;try{Be=R(!0,de)}finally{Be?I():(m=!1,R=null)}}else m=!1}var I;if(typeof b=="function")I=function(){b(u)};else if(typeof MessageChannel<"u"){var _e=new MessageChannel,E=_e.port2;_e.port1.onmessage=u,I=function(){E.postMessage(null)}}else I=function(){Me(u,0)};function oe(de){R=de,m||(m=!0,I())}function Xe(de,Be){$=Me(function(){de(t.unstable_now())},Be)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_continueExecution=function(){k||M||(k=!0,oe(A))},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(de){switch(h){case 1:case 2:case 3:var Be=3;break;default:Be=h}var S=h;h=Be;try{return de()}finally{h=S}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(de,Be){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var S=h;h=de;try{return Be()}finally{h=S}},t.unstable_scheduleCallback=function(de,Be,S){var P=t.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?P+S:P):S=P,de){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=S+O,de={id:w++,callback:Be,priorityLevel:de,startTime:S,expirationTime:O,sortIndex:-1},S>P?(de.sortIndex=S,n(p,de),r(c)===null&&de===r(p)&&(G?(x($),$=-1):G=!0,Xe(d,S-P))):(de.sortIndex=O,n(c,de),k||M||(k=!0,oe(A))),de},t.unstable_shouldYield=v,t.unstable_wrapCallback=function(de){var Be=h;return function(){var S=h;h=Be;try{return de.apply(this,arguments)}finally{h=S}}}})(k0);w0.exports=k0;var Zf=w0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=L,Sr=Zf;function we(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C0=new Set,Qo={};function Hi(t,n){uo(t,n),uo(t+"Capture",n)}function uo(t,n){for(Qo[t]=n,t=0;t<n.length;t++)C0.add(n[t])}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ca=Object.prototype.hasOwnProperty,eu=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rc={},ic={};function tu(t){return ca.call(ic,t)?!0:ca.call(rc,t)?!1:eu.test(t)?ic[t]=!0:(rc[t]=!0,!1)}function nu(t,n,r,i){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ru(t,n,r,i){if(n===null||typeof n>"u"||nu(t,n,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function ir(t,n,r,i,o,s,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=n,this.sanitizeURL=s,this.removeEmptyString=l}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yn[t]=new ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Yn[n]=new ir(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yn[t]=new ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yn[t]=new ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yn[t]=new ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yn[t]=new ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yn[t]=new ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yn[t]=new ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yn[t]=new ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var ld=/[\-:]([a-z])/g;function ad(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(ld,ad);Yn[n]=new ir(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(ld,ad);Yn[n]=new ir(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(ld,ad);Yn[n]=new ir(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yn[t]=new ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yn[t]=new ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function dd(t,n,r,i){var o=Yn.hasOwnProperty(n)?Yn[n]:null;(o!==null?o.type!==0:i||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(ru(n,r,o,i)&&(r=null),i||o===null?tu(n)&&(r===null?t.removeAttribute(n):t.setAttribute(n,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(n=o.attributeName,i=o.attributeNamespace,r===null?t.removeAttribute(n):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?t.setAttributeNS(i,n,r):t.setAttribute(n,r))))}var ii=qf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vs=Symbol.for("react.element"),Xi=Symbol.for("react.portal"),Ki=Symbol.for("react.fragment"),cd=Symbol.for("react.strict_mode"),pa=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),_0=Symbol.for("react.context"),pd=Symbol.for("react.forward_ref"),fa=Symbol.for("react.suspense"),ua=Symbol.for("react.suspense_list"),fd=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),R0=Symbol.for("react.offscreen"),oc=Symbol.iterator;function zo(t){return t===null||typeof t!="object"?null:(t=oc&&t[oc]||t["@@iterator"],typeof t=="function"?t:null)}var wn=Object.assign,Ml;function Wo(t){if(Ml===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Ml=n&&n[1]||""}return`
`+Ml+t}var Ol=!1;function Wl(t,n){if(!t||Ol)return"";Ol=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(p){var i=p}Reflect.construct(t,[],n)}else{try{n.call()}catch(p){i=p}t.call(n.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),s=i.stack.split(`
`),l=o.length-1,a=s.length-1;1<=l&&0<=a&&o[l]!==s[a];)a--;for(;1<=l&&0<=a;l--,a--)if(o[l]!==s[a]){if(l!==1||a!==1)do if(l--,a--,0>a||o[l]!==s[a]){var c=`
`+o[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=a);break}}}finally{Ol=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Wo(t):""}function iu(t){switch(t.tag){case 5:return Wo(t.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return t=Wl(t.type,!1),t;case 11:return t=Wl(t.type.render,!1),t;case 1:return t=Wl(t.type,!0),t;default:return""}}function ha(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ki:return"Fragment";case Xi:return"Portal";case pa:return"Profiler";case cd:return"StrictMode";case fa:return"Suspense";case ua:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _0:return(t.displayName||"Context")+".Consumer";case T0:return(t._context.displayName||"Context")+".Provider";case pd:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fd:return n=t.displayName||null,n!==null?n:ha(t.type)||"Memo";case di:n=t._payload,t=t._init;try{return ha(t(n))}catch{}}return null}function ou(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ha(n);case 8:return n===cd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function z0(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function su(t){var n=z0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),i=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return o.call(this)},set:function(l){i=""+l,s.call(this,l)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function js(t){t._valueTracker||(t._valueTracker=su(t))}function I0(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),i="";return t&&(i=z0(t)?t.checked?"true":"false":t.value),t=i,t!==r?(n.setValue(t),!0):!1}function Xs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ga(t,n){var r=n.checked;return wn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function sc(t,n){var r=n.defaultValue==null?"":n.defaultValue,i=n.checked!=null?n.checked:n.defaultChecked;r=wi(n.value!=null?n.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function B0(t,n){n=n.checked,n!=null&&dd(t,"checked",n,!1)}function xa(t,n){B0(t,n);var r=wi(n.value),i=n.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?ya(t,n.type,r):n.hasOwnProperty("defaultValue")&&ya(t,n.type,wi(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function lc(t,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var i=n.type;if(!(i!=="submit"&&i!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,r||n===t.value||(t.value=n),t.defaultValue=n}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ya(t,n,r){(n!=="number"||Xs(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Po=Array.isArray;function so(t,n,r,i){if(t=t.options,n){n={};for(var o=0;o<r.length;o++)n["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=n.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&i&&(t[r].defaultSelected=!0)}else{for(r=""+wi(r),n=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}n!==null||t[o].disabled||(n=t[o])}n!==null&&(n.selected=!0)}}function ma(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(we(91));return wn({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ac(t,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(we(92));if(Po(r)){if(1<r.length)throw Error(we(93));r=r[0]}n=r}n==null&&(n=""),r=n}t._wrapperState={initialValue:wi(r)}}function E0(t,n){var r=wi(n.value),i=wi(n.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),n.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function dc(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function L0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ba(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?L0(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ss,A0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,i,o){MSApp.execUnsafeLocalFunction(function(){return t(n,r,i,o)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Ss=Ss||document.createElement("div"),Ss.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Ss.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function Zo(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lu=["Webkit","ms","Moz","O"];Object.keys(Ho).forEach(function(t){lu.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Ho[n]=Ho[t]})});function F0(t,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||Ho.hasOwnProperty(t)&&Ho[t]?(""+n).trim():n+"px"}function M0(t,n){t=t.style;for(var r in n)if(n.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=F0(r,n[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,o):t[r]=o}}var au=wn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function va(t,n){if(n){if(au[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(we(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(we(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(we(61))}if(n.style!=null&&typeof n.style!="object")throw Error(we(62))}}function ja(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sa=null;function ud(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wa=null,lo=null,ao=null;function cc(t){if(t=ys(t)){if(typeof wa!="function")throw Error(we(280));var n=t.stateNode;n&&(n=wl(n),wa(t.stateNode,t.type,n))}}function O0(t){lo?ao?ao.push(t):ao=[t]:lo=t}function W0(){if(lo){var t=lo,n=ao;if(ao=lo=null,cc(t),n)for(t=0;t<n.length;t++)cc(n[t])}}function P0(t,n){return t(n)}function N0(){}var Pl=!1;function D0(t,n,r){if(Pl)return t(n,r);Pl=!0;try{return P0(t,n,r)}finally{Pl=!1,(lo!==null||ao!==null)&&(N0(),W0())}}function qo(t,n){var r=t.stateNode;if(r===null)return null;var i=wl(r);if(i===null)return null;r=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(we(231,n,typeof r));return r}var ka=!1;if(ei)try{var Io={};Object.defineProperty(Io,"passive",{get:function(){ka=!0}}),window.addEventListener("test",Io,Io),window.removeEventListener("test",Io,Io)}catch{ka=!1}function du(t,n,r,i,o,s,l,a,c){var p=Array.prototype.slice.call(arguments,3);try{n.apply(r,p)}catch(w){this.onError(w)}}var $o=!1,Ks=null,Js=!1,Ca=null,cu={onError:function(t){$o=!0,Ks=t}};function pu(t,n,r,i,o,s,l,a,c){$o=!1,Ks=null,du.apply(cu,arguments)}function fu(t,n,r,i,o,s,l,a,c){if(pu.apply(this,arguments),$o){if($o){var p=Ks;$o=!1,Ks=null}else throw Error(we(198));Js||(Js=!0,Ca=p)}}function $i(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function H0(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function pc(t){if($i(t)!==t)throw Error(we(188))}function uu(t){var n=t.alternate;if(!n){if(n=$i(t),n===null)throw Error(we(188));return n!==t?null:t}for(var r=t,i=n;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return pc(o),t;if(s===i)return pc(o),n;s=s.sibling}throw Error(we(188))}if(r.return!==i.return)r=o,i=s;else{for(var l=!1,a=o.child;a;){if(a===r){l=!0,r=o,i=s;break}if(a===i){l=!0,i=o,r=s;break}a=a.sibling}if(!l){for(a=s.child;a;){if(a===r){l=!0,r=s,i=o;break}if(a===i){l=!0,i=s,r=o;break}a=a.sibling}if(!l)throw Error(we(189))}}if(r.alternate!==i)throw Error(we(190))}if(r.tag!==3)throw Error(we(188));return r.stateNode.current===r?t:n}function $0(t){return t=uu(t),t!==null?V0(t):null}function V0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=V0(t);if(n!==null)return n;t=t.sibling}return null}var U0=Sr.unstable_scheduleCallback,fc=Sr.unstable_cancelCallback,hu=Sr.unstable_shouldYield,gu=Sr.unstable_requestPaint,Bn=Sr.unstable_now,xu=Sr.unstable_getCurrentPriorityLevel,hd=Sr.unstable_ImmediatePriority,G0=Sr.unstable_UserBlockingPriority,Qs=Sr.unstable_NormalPriority,yu=Sr.unstable_LowPriority,Y0=Sr.unstable_IdlePriority,bl=null,Vr=null;function mu(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(bl,t,void 0,(t.current.flags&128)===128)}catch{}}var Wr=Math.clz32?Math.clz32:ju,bu=Math.log,vu=Math.LN2;function ju(t){return t>>>=0,t===0?32:31-(bu(t)/vu|0)|0}var ws=64,ks=4194304;function No(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zs(t,n){var r=t.pendingLanes;if(r===0)return 0;var i=0,o=t.suspendedLanes,s=t.pingedLanes,l=r&268435455;if(l!==0){var a=l&~o;a!==0?i=No(a):(s&=l,s!==0&&(i=No(s)))}else l=r&~o,l!==0?i=No(l):s!==0&&(i=No(s));if(i===0)return 0;if(n!==0&&n!==i&&!(n&o)&&(o=i&-i,s=n&-n,o>=s||o===16&&(s&4194240)!==0))return n;if(i&4&&(i|=r&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=i;0<n;)r=31-Wr(n),o=1<<r,i|=t[r],n&=~o;return i}function Su(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wu(t,n){for(var r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Wr(s),a=1<<l,c=o[l];c===-1?(!(a&r)||a&i)&&(o[l]=Su(a,n)):c<=n&&(t.expiredLanes|=a),s&=~a}}function Ta(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function X0(){var t=ws;return ws<<=1,!(ws&4194240)&&(ws=64),t}function Nl(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function gs(t,n,r){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Wr(n),t[n]=r}function ku(t,n){var r=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-Wr(r),s=1<<o;n[o]=0,i[o]=-1,t[o]=-1,r&=~s}}function gd(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var i=31-Wr(r),o=1<<i;o&n|t[i]&n&&(t[i]|=n),r&=~o}}var en=0;function K0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J0,xd,Q0,Z0,q0,_a=!1,Cs=[],gi=null,xi=null,yi=null,es=new Map,ts=new Map,pi=[],Cu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uc(t,n){switch(t){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":es.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ts.delete(n.pointerId)}}function Bo(t,n,r,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:n,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},n!==null&&(n=ys(n),n!==null&&xd(n)),t):(t.eventSystemFlags|=i,n=t.targetContainers,o!==null&&n.indexOf(o)===-1&&n.push(o),t)}function Tu(t,n,r,i,o){switch(n){case"focusin":return gi=Bo(gi,t,n,r,i,o),!0;case"dragenter":return xi=Bo(xi,t,n,r,i,o),!0;case"mouseover":return yi=Bo(yi,t,n,r,i,o),!0;case"pointerover":var s=o.pointerId;return es.set(s,Bo(es.get(s)||null,t,n,r,i,o)),!0;case"gotpointercapture":return s=o.pointerId,ts.set(s,Bo(ts.get(s)||null,t,n,r,i,o)),!0}return!1}function ep(t){var n=Ei(t.target);if(n!==null){var r=$i(n);if(r!==null){if(n=r.tag,n===13){if(n=H0(r),n!==null){t.blockedOn=n,q0(t.priority,function(){Q0(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ws(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Ra(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Sa=i,r.target.dispatchEvent(i),Sa=null}else return n=ys(r),n!==null&&xd(n),t.blockedOn=r,!1;n.shift()}return!0}function hc(t,n,r){Ws(t)&&r.delete(n)}function _u(){_a=!1,gi!==null&&Ws(gi)&&(gi=null),xi!==null&&Ws(xi)&&(xi=null),yi!==null&&Ws(yi)&&(yi=null),es.forEach(hc),ts.forEach(hc)}function Eo(t,n){t.blockedOn===n&&(t.blockedOn=null,_a||(_a=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,_u)))}function ns(t){function n(o){return Eo(o,t)}if(0<Cs.length){Eo(Cs[0],t);for(var r=1;r<Cs.length;r++){var i=Cs[r];i.blockedOn===t&&(i.blockedOn=null)}}for(gi!==null&&Eo(gi,t),xi!==null&&Eo(xi,t),yi!==null&&Eo(yi,t),es.forEach(n),ts.forEach(n),r=0;r<pi.length;r++)i=pi[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<pi.length&&(r=pi[0],r.blockedOn===null);)ep(r),r.blockedOn===null&&pi.shift()}var co=ii.ReactCurrentBatchConfig,qs=!0;function Ru(t,n,r,i){var o=en,s=co.transition;co.transition=null;try{en=1,yd(t,n,r,i)}finally{en=o,co.transition=s}}function zu(t,n,r,i){var o=en,s=co.transition;co.transition=null;try{en=4,yd(t,n,r,i)}finally{en=o,co.transition=s}}function yd(t,n,r,i){if(qs){var o=Ra(t,n,r,i);if(o===null)Jl(t,n,i,el,r),uc(t,i);else if(Tu(o,t,n,r,i))i.stopPropagation();else if(uc(t,i),n&4&&-1<Cu.indexOf(t)){for(;o!==null;){var s=ys(o);if(s!==null&&J0(s),s=Ra(t,n,r,i),s===null&&Jl(t,n,i,el,r),s===o)break;o=s}o!==null&&i.stopPropagation()}else Jl(t,n,i,null,r)}}var el=null;function Ra(t,n,r,i){if(el=null,t=ud(i),t=Ei(t),t!==null)if(n=$i(t),n===null)t=null;else if(r=n.tag,r===13){if(t=H0(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return el=t,null}function tp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xu()){case hd:return 1;case G0:return 4;case Qs:case yu:return 16;case Y0:return 536870912;default:return 16}default:return 16}}var ui=null,md=null,Ps=null;function np(){if(Ps)return Ps;var t,n=md,r=n.length,i,o="value"in ui?ui.value:ui.textContent,s=o.length;for(t=0;t<r&&n[t]===o[t];t++);var l=r-t;for(i=1;i<=l&&n[r-i]===o[s-i];i++);return Ps=o.slice(t,1<i?1-i:void 0)}function Ns(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ts(){return!0}function gc(){return!1}function kr(t){function n(r,i,o,s,l){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ts:gc,this.isPropagationStopped=gc,this}return wn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),n}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bd=kr(jo),xs=wn({},jo,{view:0,detail:0}),Iu=kr(xs),Dl,Hl,Lo,vl=wn({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(Dl=t.screenX-Lo.screenX,Hl=t.screenY-Lo.screenY):Hl=Dl=0,Lo=t),Dl)},movementY:function(t){return"movementY"in t?t.movementY:Hl}}),xc=kr(vl),Bu=wn({},vl,{dataTransfer:0}),Eu=kr(Bu),Lu=wn({},xs,{relatedTarget:0}),$l=kr(Lu),Au=wn({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Fu=kr(Au),Mu=wn({},jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ou=kr(Mu),Wu=wn({},jo,{data:0}),yc=kr(Wu),Pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Du[t])?!!n[t]:!1}function vd(){return Hu}var $u=wn({},xs,{key:function(t){if(t.key){var n=Pu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ns(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vd,charCode:function(t){return t.type==="keypress"?Ns(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ns(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vu=kr($u),Uu=wn({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=kr(Uu),Gu=wn({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vd}),Yu=kr(Gu),Xu=wn({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ku=kr(Xu),Ju=wn({},vl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qu=kr(Ju),Zu=[9,13,27,32],jd=ei&&"CompositionEvent"in window,Vo=null;ei&&"documentMode"in document&&(Vo=document.documentMode);var qu=ei&&"TextEvent"in window&&!Vo,rp=ei&&(!jd||Vo&&8<Vo&&11>=Vo),bc=" ",vc=!1;function ip(t,n){switch(t){case"keyup":return Zu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function op(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function eh(t,n){switch(t){case"compositionend":return op(n);case"keypress":return n.which!==32?null:(vc=!0,bc);case"textInput":return t=n.data,t===bc&&vc?null:t;default:return null}}function th(t,n){if(Ji)return t==="compositionend"||!jd&&ip(t,n)?(t=np(),Ps=md=ui=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return rp&&n.locale!=="ko"?null:n.data;default:return null}}var nh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!nh[t.type]:n==="textarea"}function sp(t,n,r,i){O0(i),n=tl(n,"onChange"),0<n.length&&(r=new bd("onChange","change",null,r,i),t.push({event:r,listeners:n}))}var Uo=null,rs=null;function rh(t){yp(t,0)}function jl(t){var n=qi(t);if(I0(n))return t}function ih(t,n){if(t==="change")return n}var lp=!1;if(ei){var Vl;if(ei){var Ul="oninput"in document;if(!Ul){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),Ul=typeof Sc.oninput=="function"}Vl=Ul}else Vl=!1;lp=Vl&&(!document.documentMode||9<document.documentMode)}function wc(){Uo&&(Uo.detachEvent("onpropertychange",ap),rs=Uo=null)}function ap(t){if(t.propertyName==="value"&&jl(rs)){var n=[];sp(n,rs,t,ud(t)),D0(rh,n)}}function oh(t,n,r){t==="focusin"?(wc(),Uo=n,rs=r,Uo.attachEvent("onpropertychange",ap)):t==="focusout"&&wc()}function sh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jl(rs)}function lh(t,n){if(t==="click")return jl(n)}function ah(t,n){if(t==="input"||t==="change")return jl(n)}function dh(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Nr=typeof Object.is=="function"?Object.is:dh;function is(t,n){if(Nr(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!ca.call(n,o)||!Nr(t[o],n[o]))return!1}return!0}function kc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cc(t,n){var r=kc(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=n&&i>=n)return{node:r,offset:n-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=kc(r)}}function dp(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?dp(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function cp(){for(var t=window,n=Xs();n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=Xs(t.document)}return n}function Sd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function ch(t){var n=cp(),r=t.focusedElem,i=t.selectionRange;if(n!==r&&r&&r.ownerDocument&&dp(r.ownerDocument.documentElement,r)){if(i!==null&&Sd(r)){if(n=i.start,t=i.end,t===void 0&&(t=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(t,r.value.length);else if(t=(n=r.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,s=Math.min(i.start,o);i=i.end===void 0?s:Math.min(i.end,o),!t.extend&&s>i&&(o=i,i=s,s=o),o=Cc(r,s);var l=Cc(r,i);o&&l&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(o.node,o.offset),t.removeAllRanges(),s>i?(t.addRange(n),t.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),t.addRange(n)))}}for(n=[],t=r;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)t=n[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ph=ei&&"documentMode"in document&&11>=document.documentMode,Qi=null,za=null,Go=null,Ia=!1;function Tc(t,n,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ia||Qi==null||Qi!==Xs(i)||(i=Qi,"selectionStart"in i&&Sd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Go&&is(Go,i)||(Go=i,i=tl(za,"onSelect"),0<i.length&&(n=new bd("onSelect","select",null,n,r),t.push({event:n,listeners:i}),n.target=Qi)))}function _s(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Zi={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionend:_s("Transition","TransitionEnd")},Gl={},pp={};ei&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete Zi.animationend.animation,delete Zi.animationiteration.animation,delete Zi.animationstart.animation),"TransitionEvent"in window||delete Zi.transitionend.transition);function Sl(t){if(Gl[t])return Gl[t];if(!Zi[t])return t;var n=Zi[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in pp)return Gl[t]=n[r];return t}var fp=Sl("animationend"),up=Sl("animationiteration"),hp=Sl("animationstart"),gp=Sl("transitionend"),xp=new Map,_c="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ci(t,n){xp.set(t,n),Hi(n,[t])}for(var Yl=0;Yl<_c.length;Yl++){var Xl=_c[Yl],fh=Xl.toLowerCase(),uh=Xl[0].toUpperCase()+Xl.slice(1);Ci(fh,"on"+uh)}Ci(fp,"onAnimationEnd");Ci(up,"onAnimationIteration");Ci(hp,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(gp,"onTransitionEnd");uo("onMouseEnter",["mouseout","mouseover"]);uo("onMouseLeave",["mouseout","mouseover"]);uo("onPointerEnter",["pointerout","pointerover"]);uo("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Rc(t,n,r){var i=t.type||"unknown-event";t.currentTarget=r,fu(i,n,void 0,t),t.currentTarget=null}function yp(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],o=i.event;i=i.listeners;e:{var s=void 0;if(n)for(var l=i.length-1;0<=l;l--){var a=i[l],c=a.instance,p=a.currentTarget;if(a=a.listener,c!==s&&o.isPropagationStopped())break e;Rc(o,a,p),s=c}else for(l=0;l<i.length;l++){if(a=i[l],c=a.instance,p=a.currentTarget,a=a.listener,c!==s&&o.isPropagationStopped())break e;Rc(o,a,p),s=c}}}if(Js)throw t=Ca,Js=!1,Ca=null,t}function hn(t,n){var r=n[Fa];r===void 0&&(r=n[Fa]=new Set);var i=t+"__bubble";r.has(i)||(mp(n,t,2,!1),r.add(i))}function Kl(t,n,r){var i=0;n&&(i|=4),mp(r,t,i,n)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function os(t){if(!t[Rs]){t[Rs]=!0,C0.forEach(function(r){r!=="selectionchange"&&(hh.has(r)||Kl(r,!1,t),Kl(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Rs]||(n[Rs]=!0,Kl("selectionchange",!1,n))}}function mp(t,n,r,i){switch(tp(n)){case 1:var o=Ru;break;case 4:o=zu;break;default:o=yd}r=o.bind(null,n,r,t),o=void 0,!ka||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(n,r,{capture:!0,passive:o}):t.addEventListener(n,r,!0):o!==void 0?t.addEventListener(n,r,{passive:o}):t.addEventListener(n,r,!1)}function Jl(t,n,r,i,o){var s=i;if(!(n&1)&&!(n&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var a=i.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(l===4)for(l=i.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;l=l.return}for(;a!==null;){if(l=Ei(a),l===null)return;if(c=l.tag,c===5||c===6){i=s=l;continue e}a=a.parentNode}}i=i.return}D0(function(){var p=s,w=ud(r),y=[];e:{var h=xp.get(t);if(h!==void 0){var M=bd,k=t;switch(t){case"keypress":if(Ns(r)===0)break e;case"keydown":case"keyup":M=Vu;break;case"focusin":k="focus",M=$l;break;case"focusout":k="blur",M=$l;break;case"beforeblur":case"afterblur":M=$l;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=Yu;break;case fp:case up:case hp:M=Fu;break;case gp:M=Ku;break;case"scroll":M=Iu;break;case"wheel":M=Qu;break;case"copy":case"cut":case"paste":M=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=mc}var G=(n&4)!==0,Me=!G&&t==="scroll",x=G?h!==null?h+"Capture":null:h;G=[];for(var b=p,C;b!==null;){C=b;var d=C.stateNode;if(C.tag===5&&d!==null&&(C=d,x!==null&&(d=qo(b,x),d!=null&&G.push(ss(b,d,C)))),Me)break;b=b.return}0<G.length&&(h=new M(h,k,null,r,w),y.push({event:h,listeners:G}))}}if(!(n&7)){e:{if(h=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",h&&r!==Sa&&(k=r.relatedTarget||r.fromElement)&&(Ei(k)||k[ti]))break e;if((M||h)&&(h=w.window===w?w:(h=w.ownerDocument)?h.defaultView||h.parentWindow:window,M?(k=r.relatedTarget||r.toElement,M=p,k=k?Ei(k):null,k!==null&&(Me=$i(k),k!==Me||k.tag!==5&&k.tag!==6)&&(k=null)):(M=null,k=p),M!==k)){if(G=xc,d="onMouseLeave",x="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(G=mc,d="onPointerLeave",x="onPointerEnter",b="pointer"),Me=M==null?h:qi(M),C=k==null?h:qi(k),h=new G(d,b+"leave",M,r,w),h.target=Me,h.relatedTarget=C,d=null,Ei(w)===p&&(G=new G(x,b+"enter",k,r,w),G.target=C,G.relatedTarget=Me,d=G),Me=d,M&&k)t:{for(G=M,x=k,b=0,C=G;C;C=Gi(C))b++;for(C=0,d=x;d;d=Gi(d))C++;for(;0<b-C;)G=Gi(G),b--;for(;0<C-b;)x=Gi(x),C--;for(;b--;){if(G===x||x!==null&&G===x.alternate)break t;G=Gi(G),x=Gi(x)}G=null}else G=null;M!==null&&zc(y,h,M,G,!1),k!==null&&Me!==null&&zc(y,Me,k,G,!0)}}e:{if(h=p?qi(p):window,M=h.nodeName&&h.nodeName.toLowerCase(),M==="select"||M==="input"&&h.type==="file")var A=ih;else if(jc(h))if(lp)A=ah;else{A=sh;var m=oh}else(M=h.nodeName)&&M.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=lh);if(A&&(A=A(t,p))){sp(y,A,r,w);break e}m&&m(t,h,p),t==="focusout"&&(m=h._wrapperState)&&m.controlled&&h.type==="number"&&ya(h,"number",h.value)}switch(m=p?qi(p):window,t){case"focusin":(jc(m)||m.contentEditable==="true")&&(Qi=m,za=p,Go=null);break;case"focusout":Go=za=Qi=null;break;case"mousedown":Ia=!0;break;case"contextmenu":case"mouseup":case"dragend":Ia=!1,Tc(y,r,w);break;case"selectionchange":if(ph)break;case"keydown":case"keyup":Tc(y,r,w)}var R;if(jd)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Ji?ip(t,r)&&($="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&($="onCompositionStart");$&&(rp&&r.locale!=="ko"&&(Ji||$!=="onCompositionStart"?$==="onCompositionEnd"&&Ji&&(R=np()):(ui=w,md="value"in ui?ui.value:ui.textContent,Ji=!0)),m=tl(p,$),0<m.length&&($=new yc($,t,null,r,w),y.push({event:$,listeners:m}),R?$.data=R:(R=op(r),R!==null&&($.data=R)))),(R=qu?eh(t,r):th(t,r))&&(p=tl(p,"onBeforeInput"),0<p.length&&(w=new yc("onBeforeInput","beforeinput",null,r,w),y.push({event:w,listeners:p}),w.data=R))}yp(y,n)})}function ss(t,n,r){return{instance:t,listener:n,currentTarget:r}}function tl(t,n){for(var r=n+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=qo(t,r),s!=null&&i.unshift(ss(t,s,o)),s=qo(t,n),s!=null&&i.push(ss(t,s,o))),t=t.return}return i}function Gi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zc(t,n,r,i,o){for(var s=n._reactName,l=[];r!==null&&r!==i;){var a=r,c=a.alternate,p=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&p!==null&&(a=p,o?(c=qo(r,s),c!=null&&l.unshift(ss(r,c,a))):o||(c=qo(r,s),c!=null&&l.push(ss(r,c,a)))),r=r.return}l.length!==0&&t.push({event:n,listeners:l})}var gh=/\r\n?/g,xh=/\u0000|\uFFFD/g;function Ic(t){return(typeof t=="string"?t:""+t).replace(gh,`
`).replace(xh,"")}function zs(t,n,r){if(n=Ic(n),Ic(t)!==n&&r)throw Error(we(425))}function nl(){}var Ba=null,Ea=null;function La(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Aa=typeof setTimeout=="function"?setTimeout:void 0,yh=typeof clearTimeout=="function"?clearTimeout:void 0,Bc=typeof Promise=="function"?Promise:void 0,mh=typeof queueMicrotask=="function"?queueMicrotask:typeof Bc<"u"?function(t){return Bc.resolve(null).then(t).catch(bh)}:Aa;function bh(t){setTimeout(function(){throw t})}function Ql(t,n){var r=n,i=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){t.removeChild(o),ns(n);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);ns(n)}function mi(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Ec(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}var So=Math.random().toString(36).slice(2),$r="__reactFiber$"+So,ls="__reactProps$"+So,ti="__reactContainer$"+So,Fa="__reactEvents$"+So,vh="__reactListeners$"+So,jh="__reactHandles$"+So;function Ei(t){var n=t[$r];if(n)return n;for(var r=t.parentNode;r;){if(n=r[ti]||r[$r]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Ec(t);t!==null;){if(r=t[$r])return r;t=Ec(t)}return n}t=r,r=t.parentNode}return null}function ys(t){return t=t[$r]||t[ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(we(33))}function wl(t){return t[ls]||null}var Ma=[],eo=-1;function Ti(t){return{current:t}}function gn(t){0>eo||(t.current=Ma[eo],Ma[eo]=null,eo--)}function pn(t,n){eo++,Ma[eo]=t.current,t.current=n}var ki={},Zn=Ti(ki),pr=Ti(!1),Oi=ki;function ho(t,n){var r=t.type.contextTypes;if(!r)return ki;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=n[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),o}function fr(t){return t=t.childContextTypes,t!=null}function rl(){gn(pr),gn(Zn)}function Lc(t,n,r){if(Zn.current!==ki)throw Error(we(168));pn(Zn,n),pn(pr,r)}function bp(t,n,r){var i=t.stateNode;if(n=n.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in n))throw Error(we(108,ou(t)||"Unknown",o));return wn({},r,i)}function il(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ki,Oi=Zn.current,pn(Zn,t),pn(pr,pr.current),!0}function Ac(t,n,r){var i=t.stateNode;if(!i)throw Error(we(169));r?(t=bp(t,n,Oi),i.__reactInternalMemoizedMergedChildContext=t,gn(pr),gn(Zn),pn(Zn,t)):gn(pr),pn(pr,r)}var Jr=null,kl=!1,Zl=!1;function vp(t){Jr===null?Jr=[t]:Jr.push(t)}function Sh(t){kl=!0,vp(t)}function _i(){if(!Zl&&Jr!==null){Zl=!0;var t=0,n=en;try{var r=Jr;for(en=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}Jr=null,kl=!1}catch(o){throw Jr!==null&&(Jr=Jr.slice(t+1)),U0(hd,_i),o}finally{en=n,Zl=!1}}return null}var to=[],no=0,ol=null,sl=0,Cr=[],Tr=0,Wi=null,Qr=1,Zr="";function Ii(t,n){to[no++]=sl,to[no++]=ol,ol=t,sl=n}function jp(t,n,r){Cr[Tr++]=Qr,Cr[Tr++]=Zr,Cr[Tr++]=Wi,Wi=t;var i=Qr;t=Zr;var o=32-Wr(i)-1;i&=~(1<<o),r+=1;var s=32-Wr(n)+o;if(30<s){var l=o-o%5;s=(i&(1<<l)-1).toString(32),i>>=l,o-=l,Qr=1<<32-Wr(n)+o|r<<o|i,Zr=s+t}else Qr=1<<s|r<<o|i,Zr=t}function wd(t){t.return!==null&&(Ii(t,1),jp(t,1,0))}function kd(t){for(;t===ol;)ol=to[--no],to[no]=null,sl=to[--no],to[no]=null;for(;t===Wi;)Wi=Cr[--Tr],Cr[Tr]=null,Zr=Cr[--Tr],Cr[Tr]=null,Qr=Cr[--Tr],Cr[Tr]=null}var jr=null,vr=null,yn=!1,Or=null;function Sp(t,n){var r=_r(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=t,n=t.deletions,n===null?(t.deletions=[r],t.flags|=16):n.push(r)}function Fc(t,n){switch(t.tag){case 5:var r=t.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,jr=t,vr=mi(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,jr=t,vr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=Wi!==null?{id:Qr,overflow:Zr}:null,t.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=_r(18,null,null,0),r.stateNode=n,r.return=t,t.child=r,jr=t,vr=null,!0):!1;default:return!1}}function Oa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wa(t){if(yn){var n=vr;if(n){var r=n;if(!Fc(t,n)){if(Oa(t))throw Error(we(418));n=mi(r.nextSibling);var i=jr;n&&Fc(t,n)?Sp(i,r):(t.flags=t.flags&-4097|2,yn=!1,jr=t)}}else{if(Oa(t))throw Error(we(418));t.flags=t.flags&-4097|2,yn=!1,jr=t}}}function Mc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jr=t}function Is(t){if(t!==jr)return!1;if(!yn)return Mc(t),yn=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!La(t.type,t.memoizedProps)),n&&(n=vr)){if(Oa(t))throw wp(),Error(we(418));for(;n;)Sp(t,n),n=mi(n.nextSibling)}if(Mc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(we(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(n===0){vr=mi(t.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}t=t.nextSibling}vr=null}}else vr=jr?mi(t.stateNode.nextSibling):null;return!0}function wp(){for(var t=vr;t;)t=mi(t.nextSibling)}function go(){vr=jr=null,yn=!1}function Cd(t){Or===null?Or=[t]:Or.push(t)}var wh=ii.ReactCurrentBatchConfig;function Ao(t,n,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(we(309));var i=r.stateNode}if(!i)throw Error(we(147,t));var o=i,s=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===s?n.ref:(n=function(l){var a=o.refs;l===null?delete a[s]:a[s]=l},n._stringRef=s,n)}if(typeof t!="string")throw Error(we(284));if(!r._owner)throw Error(we(290,t))}return t}function Bs(t,n){throw t=Object.prototype.toString.call(n),Error(we(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Oc(t){var n=t._init;return n(t._payload)}function kp(t){function n(x,b){if(t){var C=x.deletions;C===null?(x.deletions=[b],x.flags|=16):C.push(b)}}function r(x,b){if(!t)return null;for(;b!==null;)n(x,b),b=b.sibling;return null}function i(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function o(x,b){return x=Si(x,b),x.index=0,x.sibling=null,x}function s(x,b,C){return x.index=C,t?(C=x.alternate,C!==null?(C=C.index,C<b?(x.flags|=2,b):C):(x.flags|=2,b)):(x.flags|=1048576,b)}function l(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,b,C,d){return b===null||b.tag!==6?(b=oa(C,x.mode,d),b.return=x,b):(b=o(b,C),b.return=x,b)}function c(x,b,C,d){var A=C.type;return A===Ki?w(x,b,C.props.children,d,C.key):b!==null&&(b.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===di&&Oc(A)===b.type)?(d=o(b,C.props),d.ref=Ao(x,b,C),d.return=x,d):(d=Ys(C.type,C.key,C.props,null,x.mode,d),d.ref=Ao(x,b,C),d.return=x,d)}function p(x,b,C,d){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=sa(C,x.mode,d),b.return=x,b):(b=o(b,C.children||[]),b.return=x,b)}function w(x,b,C,d,A){return b===null||b.tag!==7?(b=Mi(C,x.mode,d,A),b.return=x,b):(b=o(b,C),b.return=x,b)}function y(x,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=oa(""+b,x.mode,C),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vs:return C=Ys(b.type,b.key,b.props,null,x.mode,C),C.ref=Ao(x,null,b),C.return=x,C;case Xi:return b=sa(b,x.mode,C),b.return=x,b;case di:var d=b._init;return y(x,d(b._payload),C)}if(Po(b)||zo(b))return b=Mi(b,x.mode,C,null),b.return=x,b;Bs(x,b)}return null}function h(x,b,C,d){var A=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return A!==null?null:a(x,b,""+C,d);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case vs:return C.key===A?c(x,b,C,d):null;case Xi:return C.key===A?p(x,b,C,d):null;case di:return A=C._init,h(x,b,A(C._payload),d)}if(Po(C)||zo(C))return A!==null?null:w(x,b,C,d,null);Bs(x,C)}return null}function M(x,b,C,d,A){if(typeof d=="string"&&d!==""||typeof d=="number")return x=x.get(C)||null,a(b,x,""+d,A);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case vs:return x=x.get(d.key===null?C:d.key)||null,c(b,x,d,A);case Xi:return x=x.get(d.key===null?C:d.key)||null,p(b,x,d,A);case di:var m=d._init;return M(x,b,C,m(d._payload),A)}if(Po(d)||zo(d))return x=x.get(C)||null,w(b,x,d,A,null);Bs(b,d)}return null}function k(x,b,C,d){for(var A=null,m=null,R=b,$=b=0,ae=null;R!==null&&$<C.length;$++){R.index>$?(ae=R,R=null):ae=R.sibling;var q=h(x,R,C[$],d);if(q===null){R===null&&(R=ae);break}t&&R&&q.alternate===null&&n(x,R),b=s(q,b,$),m===null?A=q:m.sibling=q,m=q,R=ae}if($===C.length)return r(x,R),yn&&Ii(x,$),A;if(R===null){for(;$<C.length;$++)R=y(x,C[$],d),R!==null&&(b=s(R,b,$),m===null?A=R:m.sibling=R,m=R);return yn&&Ii(x,$),A}for(R=i(x,R);$<C.length;$++)ae=M(R,x,$,C[$],d),ae!==null&&(t&&ae.alternate!==null&&R.delete(ae.key===null?$:ae.key),b=s(ae,b,$),m===null?A=ae:m.sibling=ae,m=ae);return t&&R.forEach(function(v){return n(x,v)}),yn&&Ii(x,$),A}function G(x,b,C,d){var A=zo(C);if(typeof A!="function")throw Error(we(150));if(C=A.call(C),C==null)throw Error(we(151));for(var m=A=null,R=b,$=b=0,ae=null,q=C.next();R!==null&&!q.done;$++,q=C.next()){R.index>$?(ae=R,R=null):ae=R.sibling;var v=h(x,R,q.value,d);if(v===null){R===null&&(R=ae);break}t&&R&&v.alternate===null&&n(x,R),b=s(v,b,$),m===null?A=v:m.sibling=v,m=v,R=ae}if(q.done)return r(x,R),yn&&Ii(x,$),A;if(R===null){for(;!q.done;$++,q=C.next())q=y(x,q.value,d),q!==null&&(b=s(q,b,$),m===null?A=q:m.sibling=q,m=q);return yn&&Ii(x,$),A}for(R=i(x,R);!q.done;$++,q=C.next())q=M(R,x,$,q.value,d),q!==null&&(t&&q.alternate!==null&&R.delete(q.key===null?$:q.key),b=s(q,b,$),m===null?A=q:m.sibling=q,m=q);return t&&R.forEach(function(u){return n(x,u)}),yn&&Ii(x,$),A}function Me(x,b,C,d){if(typeof C=="object"&&C!==null&&C.type===Ki&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case vs:e:{for(var A=C.key,m=b;m!==null;){if(m.key===A){if(A=C.type,A===Ki){if(m.tag===7){r(x,m.sibling),b=o(m,C.props.children),b.return=x,x=b;break e}}else if(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===di&&Oc(A)===m.type){r(x,m.sibling),b=o(m,C.props),b.ref=Ao(x,m,C),b.return=x,x=b;break e}r(x,m);break}else n(x,m);m=m.sibling}C.type===Ki?(b=Mi(C.props.children,x.mode,d,C.key),b.return=x,x=b):(d=Ys(C.type,C.key,C.props,null,x.mode,d),d.ref=Ao(x,b,C),d.return=x,x=d)}return l(x);case Xi:e:{for(m=C.key;b!==null;){if(b.key===m)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){r(x,b.sibling),b=o(b,C.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else n(x,b);b=b.sibling}b=sa(C,x.mode,d),b.return=x,x=b}return l(x);case di:return m=C._init,Me(x,b,m(C._payload),d)}if(Po(C))return k(x,b,C,d);if(zo(C))return G(x,b,C,d);Bs(x,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(r(x,b.sibling),b=o(b,C),b.return=x,x=b):(r(x,b),b=oa(C,x.mode,d),b.return=x,x=b),l(x)):r(x,b)}return Me}var xo=kp(!0),Cp=kp(!1),ll=Ti(null),al=null,ro=null,Td=null;function _d(){Td=ro=al=null}function Rd(t){var n=ll.current;gn(ll),t._currentValue=n}function Pa(t,n,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),t===r)break;t=t.return}}function po(t,n){al=t,Td=ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(cr=!0),t.firstContext=null)}function zr(t){var n=t._currentValue;if(Td!==t)if(t={context:t,memoizedValue:n,next:null},ro===null){if(al===null)throw Error(we(308));ro=t,al.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return n}var Li=null;function zd(t){Li===null?Li=[t]:Li.push(t)}function Tp(t,n,r,i){var o=n.interleaved;return o===null?(r.next=r,zd(n)):(r.next=o.next,o.next=r),n.interleaved=r,ni(t,i)}function ni(t,n){t.lanes|=n;var r=t.alternate;for(r!==null&&(r.lanes|=n),r=t,t=t.return;t!==null;)t.childLanes|=n,r=t.alternate,r!==null&&(r.childLanes|=n),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ci=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _p(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function bi(t,n,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Gt&2){var o=i.pending;return o===null?n.next=n:(n.next=o.next,o.next=n),i.pending=n,ni(t,r)}return o=i.interleaved,o===null?(n.next=n,zd(i)):(n.next=o.next,o.next=n),i.interleaved=n,ni(t,r)}function Ds(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var i=n.lanes;i&=t.pendingLanes,r|=i,n.lanes=r,gd(t,r)}}function Wc(t,n){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=l:s=s.next=l,r=r.next}while(r!==null);s===null?o=s=n:s=s.next=n}else o=s=n;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}function dl(t,n,r,i){var o=t.updateQueue;ci=!1;var s=o.firstBaseUpdate,l=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,p=c.next;c.next=null,l===null?s=p:l.next=p,l=c;var w=t.alternate;w!==null&&(w=w.updateQueue,a=w.lastBaseUpdate,a!==l&&(a===null?w.firstBaseUpdate=p:a.next=p,w.lastBaseUpdate=c))}if(s!==null){var y=o.baseState;l=0,w=p=c=null,a=s;do{var h=a.lane,M=a.eventTime;if((i&h)===h){w!==null&&(w=w.next={eventTime:M,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=t,G=a;switch(h=n,M=r,G.tag){case 1:if(k=G.payload,typeof k=="function"){y=k.call(M,y,h);break e}y=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=G.payload,h=typeof k=="function"?k.call(M,y,h):k,h==null)break e;y=wn({},y,h);break e;case 2:ci=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else M={eventTime:M,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},w===null?(p=w=M,c=y):w=w.next=M,l|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(w===null&&(c=y),o.baseState=c,o.firstBaseUpdate=p,o.lastBaseUpdate=w,n=o.shared.interleaved,n!==null){o=n;do l|=o.lane,o=o.next;while(o!==n)}else s===null&&(o.shared.lanes=0);Ni|=l,t.lanes=l,t.memoizedState=y}}function Pc(t,n,r){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var i=t[n],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(we(191,o));o.call(i)}}}var ms={},Ur=Ti(ms),as=Ti(ms),ds=Ti(ms);function Ai(t){if(t===ms)throw Error(we(174));return t}function Bd(t,n){switch(pn(ds,n),pn(as,t),pn(Ur,ms),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ba(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=ba(n,t)}gn(Ur),pn(Ur,n)}function yo(){gn(Ur),gn(as),gn(ds)}function Rp(t){Ai(ds.current);var n=Ai(Ur.current),r=ba(n,t.type);n!==r&&(pn(as,t),pn(Ur,r))}function Ed(t){as.current===t&&(gn(Ur),gn(as))}var jn=Ti(0);function cl(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ql=[];function Ld(){for(var t=0;t<ql.length;t++)ql[t]._workInProgressVersionPrimary=null;ql.length=0}var Hs=ii.ReactCurrentDispatcher,ea=ii.ReactCurrentBatchConfig,Pi=0,Sn=null,Fn=null,Pn=null,pl=!1,Yo=!1,cs=0,kh=0;function Kn(){throw Error(we(321))}function Ad(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Nr(t[r],n[r]))return!1;return!0}function Fd(t,n,r,i,o,s){if(Pi=s,Sn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Hs.current=t===null||t.memoizedState===null?Rh:zh,t=r(i,o),Yo){s=0;do{if(Yo=!1,cs=0,25<=s)throw Error(we(301));s+=1,Pn=Fn=null,n.updateQueue=null,Hs.current=Ih,t=r(i,o)}while(Yo)}if(Hs.current=fl,n=Fn!==null&&Fn.next!==null,Pi=0,Pn=Fn=Sn=null,pl=!1,n)throw Error(we(300));return t}function Md(){var t=cs!==0;return cs=0,t}function Hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Sn.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function Ir(){if(Fn===null){var t=Sn.alternate;t=t!==null?t.memoizedState:null}else t=Fn.next;var n=Pn===null?Sn.memoizedState:Pn.next;if(n!==null)Pn=n,Fn=t;else{if(t===null)throw Error(we(310));Fn=t,t={memoizedState:Fn.memoizedState,baseState:Fn.baseState,baseQueue:Fn.baseQueue,queue:Fn.queue,next:null},Pn===null?Sn.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function ps(t,n){return typeof n=="function"?n(t):n}function ta(t){var n=Ir(),r=n.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=t;var i=Fn,o=i.baseQueue,s=r.pending;if(s!==null){if(o!==null){var l=o.next;o.next=s.next,s.next=l}i.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,i=i.baseState;var a=l=null,c=null,p=s;do{var w=p.lane;if((Pi&w)===w)c!==null&&(c=c.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var y={lane:w,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};c===null?(a=c=y,l=i):c=c.next=y,Sn.lanes|=w,Ni|=w}p=p.next}while(p!==null&&p!==s);c===null?l=i:c.next=a,Nr(i,n.memoizedState)||(cr=!0),n.memoizedState=i,n.baseState=l,n.baseQueue=c,r.lastRenderedState=i}if(t=r.interleaved,t!==null){o=t;do s=o.lane,Sn.lanes|=s,Ni|=s,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function na(t){var n=Ir(),r=n.queue;if(r===null)throw Error(we(311));r.lastRenderedReducer=t;var i=r.dispatch,o=r.pending,s=n.memoizedState;if(o!==null){r.pending=null;var l=o=o.next;do s=t(s,l.action),l=l.next;while(l!==o);Nr(s,n.memoizedState)||(cr=!0),n.memoizedState=s,n.baseQueue===null&&(n.baseState=s),r.lastRenderedState=s}return[s,i]}function zp(){}function Ip(t,n){var r=Sn,i=Ir(),o=n(),s=!Nr(i.memoizedState,o);if(s&&(i.memoizedState=o,cr=!0),i=i.queue,Od(Lp.bind(null,r,i,t),[t]),i.getSnapshot!==n||s||Pn!==null&&Pn.memoizedState.tag&1){if(r.flags|=2048,fs(9,Ep.bind(null,r,i,o,n),void 0,null),Nn===null)throw Error(we(349));Pi&30||Bp(r,n,o)}return o}function Bp(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=Sn.updateQueue,n===null?(n={lastEffect:null,stores:null},Sn.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function Ep(t,n,r,i){n.value=r,n.getSnapshot=i,Ap(n)&&Fp(t)}function Lp(t,n,r){return r(function(){Ap(n)&&Fp(t)})}function Ap(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Nr(t,r)}catch{return!0}}function Fp(t){var n=ni(t,1);n!==null&&Pr(n,t,1,-1)}function Nc(t){var n=Hr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:t},n.queue=t,t=t.dispatch=_h.bind(null,Sn,t),[n.memoizedState,t]}function fs(t,n,r,i){return t={tag:t,create:n,destroy:r,deps:i,next:null},n=Sn.updateQueue,n===null?(n={lastEffect:null,stores:null},Sn.updateQueue=n,n.lastEffect=t.next=t):(r=n.lastEffect,r===null?n.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,n.lastEffect=t)),t}function Mp(){return Ir().memoizedState}function $s(t,n,r,i){var o=Hr();Sn.flags|=t,o.memoizedState=fs(1|n,r,void 0,i===void 0?null:i)}function Cl(t,n,r,i){var o=Ir();i=i===void 0?null:i;var s=void 0;if(Fn!==null){var l=Fn.memoizedState;if(s=l.destroy,i!==null&&Ad(i,l.deps)){o.memoizedState=fs(n,r,s,i);return}}Sn.flags|=t,o.memoizedState=fs(1|n,r,s,i)}function Dc(t,n){return $s(8390656,8,t,n)}function Od(t,n){return Cl(2048,8,t,n)}function Op(t,n){return Cl(4,2,t,n)}function Wp(t,n){return Cl(4,4,t,n)}function Pp(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Np(t,n,r){return r=r!=null?r.concat([t]):null,Cl(4,4,Pp.bind(null,n,t),r)}function Wd(){}function Dp(t,n){var r=Ir();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&Ad(n,i[1])?i[0]:(r.memoizedState=[t,n],t)}function Hp(t,n){var r=Ir();n=n===void 0?null:n;var i=r.memoizedState;return i!==null&&n!==null&&Ad(n,i[1])?i[0]:(t=t(),r.memoizedState=[t,n],t)}function $p(t,n,r){return Pi&21?(Nr(r,n)||(r=X0(),Sn.lanes|=r,Ni|=r,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,cr=!0),t.memoizedState=r)}function Ch(t,n){var r=en;en=r!==0&&4>r?r:4,t(!0);var i=ea.transition;ea.transition={};try{t(!1),n()}finally{en=r,ea.transition=i}}function Vp(){return Ir().memoizedState}function Th(t,n,r){var i=ji(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Up(t))Gp(n,r);else if(r=Tp(t,n,r,i),r!==null){var o=nr();Pr(r,t,i,o),Yp(r,n,i)}}function _h(t,n,r){var i=ji(t),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Up(t))Gp(n,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=n.lastRenderedReducer,s!==null))try{var l=n.lastRenderedState,a=s(l,r);if(o.hasEagerState=!0,o.eagerState=a,Nr(a,l)){var c=n.interleaved;c===null?(o.next=o,zd(n)):(o.next=c.next,c.next=o),n.interleaved=o;return}}catch{}finally{}r=Tp(t,n,o,i),r!==null&&(o=nr(),Pr(r,t,i,o),Yp(r,n,i))}}function Up(t){var n=t.alternate;return t===Sn||n!==null&&n===Sn}function Gp(t,n){Yo=pl=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Yp(t,n,r){if(r&4194240){var i=n.lanes;i&=t.pendingLanes,r|=i,n.lanes=r,gd(t,r)}}var fl={readContext:zr,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},Rh={readContext:zr,useCallback:function(t,n){return Hr().memoizedState=[t,n===void 0?null:n],t},useContext:zr,useEffect:Dc,useImperativeHandle:function(t,n,r){return r=r!=null?r.concat([t]):null,$s(4194308,4,Pp.bind(null,n,t),r)},useLayoutEffect:function(t,n){return $s(4194308,4,t,n)},useInsertionEffect:function(t,n){return $s(4,2,t,n)},useMemo:function(t,n){var r=Hr();return n=n===void 0?null:n,t=t(),r.memoizedState=[t,n],t},useReducer:function(t,n,r){var i=Hr();return n=r!==void 0?r(n):n,i.memoizedState=i.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},i.queue=t,t=t.dispatch=Th.bind(null,Sn,t),[i.memoizedState,t]},useRef:function(t){var n=Hr();return t={current:t},n.memoizedState=t},useState:Nc,useDebugValue:Wd,useDeferredValue:function(t){return Hr().memoizedState=t},useTransition:function(){var t=Nc(!1),n=t[0];return t=Ch.bind(null,t[1]),Hr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,r){var i=Sn,o=Hr();if(yn){if(r===void 0)throw Error(we(407));r=r()}else{if(r=n(),Nn===null)throw Error(we(349));Pi&30||Bp(i,n,r)}o.memoizedState=r;var s={value:r,getSnapshot:n};return o.queue=s,Dc(Lp.bind(null,i,s,t),[t]),i.flags|=2048,fs(9,Ep.bind(null,i,s,r,n),void 0,null),r},useId:function(){var t=Hr(),n=Nn.identifierPrefix;if(yn){var r=Zr,i=Qr;r=(i&~(1<<32-Wr(i)-1)).toString(32)+r,n=":"+n+"R"+r,r=cs++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=kh++,n=":"+n+"r"+r.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},zh={readContext:zr,useCallback:Dp,useContext:zr,useEffect:Od,useImperativeHandle:Np,useInsertionEffect:Op,useLayoutEffect:Wp,useMemo:Hp,useReducer:ta,useRef:Mp,useState:function(){return ta(ps)},useDebugValue:Wd,useDeferredValue:function(t){var n=Ir();return $p(n,Fn.memoizedState,t)},useTransition:function(){var t=ta(ps)[0],n=Ir().memoizedState;return[t,n]},useMutableSource:zp,useSyncExternalStore:Ip,useId:Vp,unstable_isNewReconciler:!1},Ih={readContext:zr,useCallback:Dp,useContext:zr,useEffect:Od,useImperativeHandle:Np,useInsertionEffect:Op,useLayoutEffect:Wp,useMemo:Hp,useReducer:na,useRef:Mp,useState:function(){return na(ps)},useDebugValue:Wd,useDeferredValue:function(t){var n=Ir();return Fn===null?n.memoizedState=t:$p(n,Fn.memoizedState,t)},useTransition:function(){var t=na(ps)[0],n=Ir().memoizedState;return[t,n]},useMutableSource:zp,useSyncExternalStore:Ip,useId:Vp,unstable_isNewReconciler:!1};function Fr(t,n){if(t&&t.defaultProps){n=wn({},n),t=t.defaultProps;for(var r in t)n[r]===void 0&&(n[r]=t[r]);return n}return n}function Na(t,n,r,i){n=t.memoizedState,r=r(i,n),r=r==null?n:wn({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Tl={isMounted:function(t){return(t=t._reactInternals)?$i(t)===t:!1},enqueueSetState:function(t,n,r){t=t._reactInternals;var i=nr(),o=ji(t),s=qr(i,o);s.payload=n,r!=null&&(s.callback=r),n=bi(t,s,o),n!==null&&(Pr(n,t,o,i),Ds(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var i=nr(),o=ji(t),s=qr(i,o);s.tag=1,s.payload=n,r!=null&&(s.callback=r),n=bi(t,s,o),n!==null&&(Pr(n,t,o,i),Ds(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=nr(),i=ji(t),o=qr(r,i);o.tag=2,n!=null&&(o.callback=n),n=bi(t,o,i),n!==null&&(Pr(n,t,i,r),Ds(n,t,i))}};function Hc(t,n,r,i,o,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,l):n.prototype&&n.prototype.isPureReactComponent?!is(r,i)||!is(o,s):!0}function Xp(t,n,r){var i=!1,o=ki,s=n.contextType;return typeof s=="object"&&s!==null?s=zr(s):(o=fr(n)?Oi:Zn.current,i=n.contextTypes,s=(i=i!=null)?ho(t,o):ki),n=new n(r,s),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Tl,t.stateNode=n,n._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),n}function $c(t,n,r,i){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,i),n.state!==t&&Tl.enqueueReplaceState(n,n.state,null)}function Da(t,n,r,i){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs={},Id(t);var s=n.contextType;typeof s=="object"&&s!==null?o.context=zr(s):(s=fr(n)?Oi:Zn.current,o.context=ho(t,s)),o.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Na(t,n,s,r),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(n=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),n!==o.state&&Tl.enqueueReplaceState(o,o.state,null),dl(t,r,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,n){try{var r="",i=n;do r+=iu(i),i=i.return;while(i);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:n,stack:o,digest:null}}function ra(t,n,r){return{value:t,source:null,stack:r??null,digest:n??null}}function Ha(t,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var Bh=typeof WeakMap=="function"?WeakMap:Map;function Kp(t,n,r){r=qr(-1,r),r.tag=3,r.payload={element:null};var i=n.value;return r.callback=function(){hl||(hl=!0,Za=i),Ha(t,n)},r}function Jp(t,n,r){r=qr(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=n.value;r.payload=function(){return i(o)},r.callback=function(){Ha(t,n)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Ha(t,n),typeof i!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),r}function Vc(t,n,r){var i=t.pingCache;if(i===null){i=t.pingCache=new Bh;var o=new Set;i.set(n,o)}else o=i.get(n),o===void 0&&(o=new Set,i.set(n,o));o.has(r)||(o.add(r),t=Uh.bind(null,t,n,r),n.then(t,t))}function Uc(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Gc(t,n,r,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===n?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=qr(-1,1),n.tag=2,bi(r,n,1))),r.lanes|=1),t)}var Eh=ii.ReactCurrentOwner,cr=!1;function tr(t,n,r,i){n.child=t===null?Cp(n,null,r,i):xo(n,t.child,r,i)}function Yc(t,n,r,i,o){r=r.render;var s=n.ref;return po(n,o),i=Fd(t,n,r,i,s,o),r=Md(),t!==null&&!cr?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~o,ri(t,n,o)):(yn&&r&&wd(n),n.flags|=1,tr(t,n,i,o),n.child)}function Xc(t,n,r,i,o){if(t===null){var s=r.type;return typeof s=="function"&&!Gd(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=s,Qp(t,n,s,i,o)):(t=Ys(r.type,null,i,n,n.mode,o),t.ref=n.ref,t.return=n,n.child=t)}if(s=t.child,!(t.lanes&o)){var l=s.memoizedProps;if(r=r.compare,r=r!==null?r:is,r(l,i)&&t.ref===n.ref)return ri(t,n,o)}return n.flags|=1,t=Si(s,i),t.ref=n.ref,t.return=n,n.child=t}function Qp(t,n,r,i,o){if(t!==null){var s=t.memoizedProps;if(is(s,i)&&t.ref===n.ref)if(cr=!1,n.pendingProps=i=s,(t.lanes&o)!==0)t.flags&131072&&(cr=!0);else return n.lanes=t.lanes,ri(t,n,o)}return $a(t,n,r,i,o)}function Zp(t,n,r){var i=n.pendingProps,o=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(oo,br),br|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,pn(oo,br),br|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,pn(oo,br),br|=i}else s!==null?(i=s.baseLanes|r,n.memoizedState=null):i=r,pn(oo,br),br|=i;return tr(t,n,o,r),n.child}function qp(t,n){var r=n.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function $a(t,n,r,i,o){var s=fr(r)?Oi:Zn.current;return s=ho(n,s),po(n,o),r=Fd(t,n,r,i,s,o),i=Md(),t!==null&&!cr?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~o,ri(t,n,o)):(yn&&i&&wd(n),n.flags|=1,tr(t,n,r,o),n.child)}function Kc(t,n,r,i,o){if(fr(r)){var s=!0;il(n)}else s=!1;if(po(n,o),n.stateNode===null)Vs(t,n),Xp(n,r,i),Da(n,r,i,o),i=!0;else if(t===null){var l=n.stateNode,a=n.memoizedProps;l.props=a;var c=l.context,p=r.contextType;typeof p=="object"&&p!==null?p=zr(p):(p=fr(r)?Oi:Zn.current,p=ho(n,p));var w=r.getDerivedStateFromProps,y=typeof w=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==i||c!==p)&&$c(n,l,i,p),ci=!1;var h=n.memoizedState;l.state=h,dl(n,i,l,o),c=n.memoizedState,a!==i||h!==c||pr.current||ci?(typeof w=="function"&&(Na(n,r,w,i),c=n.memoizedState),(a=ci||Hc(n,r,a,i,h,c,p))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=c),l.props=i,l.state=c,l.context=p,i=a):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{l=n.stateNode,_p(t,n),a=n.memoizedProps,p=n.type===n.elementType?a:Fr(n.type,a),l.props=p,y=n.pendingProps,h=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=zr(c):(c=fr(r)?Oi:Zn.current,c=ho(n,c));var M=r.getDerivedStateFromProps;(w=typeof M=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==y||h!==c)&&$c(n,l,i,c),ci=!1,h=n.memoizedState,l.state=h,dl(n,i,l,o);var k=n.memoizedState;a!==y||h!==k||pr.current||ci?(typeof M=="function"&&(Na(n,r,M,i),k=n.memoizedState),(p=ci||Hc(n,r,p,i,h,k,c)||!1)?(w||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,k,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,k,c)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=k),l.props=i,l.state=k,l.context=c,i=p):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(n.flags|=1024),i=!1)}return Va(t,n,r,i,s,o)}function Va(t,n,r,i,o,s){qp(t,n);var l=(n.flags&128)!==0;if(!i&&!l)return o&&Ac(n,r,!1),ri(t,n,s);i=n.stateNode,Eh.current=n;var a=l&&typeof r.getDerivedStateFromError!="function"?null:i.render();return n.flags|=1,t!==null&&l?(n.child=xo(n,t.child,null,s),n.child=xo(n,null,a,s)):tr(t,n,a,s),n.memoizedState=i.state,o&&Ac(n,r,!0),n.child}function ef(t){var n=t.stateNode;n.pendingContext?Lc(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Lc(t,n.context,!1),Bd(t,n.containerInfo)}function Jc(t,n,r,i,o){return go(),Cd(o),n.flags|=256,tr(t,n,r,i),n.child}var Ua={dehydrated:null,treeContext:null,retryLane:0};function Ga(t){return{baseLanes:t,cachePool:null,transitions:null}}function tf(t,n,r){var i=n.pendingProps,o=jn.current,s=!1,l=(n.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),pn(jn,o&1),t===null)return Wa(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=i.children,t=i.fallback,s?(i=n.mode,s=n.child,l={mode:"hidden",children:l},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=zl(l,i,0,null),t=Mi(t,i,r,null),s.return=n,t.return=n,s.sibling=t,n.child=s,n.child.memoizedState=Ga(r),n.memoizedState=Ua,t):Pd(n,l));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Lh(t,n,l,i,a,o,r);if(s){s=i.fallback,l=n.mode,o=t.child,a=o.sibling;var c={mode:"hidden",children:i.children};return!(l&1)&&n.child!==o?(i=n.child,i.childLanes=0,i.pendingProps=c,n.deletions=null):(i=Si(o,c),i.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Si(a,s):(s=Mi(s,l,r,null),s.flags|=2),s.return=n,i.return=n,i.sibling=s,n.child=i,i=s,s=n.child,l=t.child.memoizedState,l=l===null?Ga(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~r,n.memoizedState=Ua,i}return s=t.child,t=s.sibling,i=Si(s,{mode:"visible",children:i.children}),!(n.mode&1)&&(i.lanes=r),i.return=n,i.sibling=null,t!==null&&(r=n.deletions,r===null?(n.deletions=[t],n.flags|=16):r.push(t)),n.child=i,n.memoizedState=null,i}function Pd(t,n){return n=zl({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Es(t,n,r,i){return i!==null&&Cd(i),xo(n,t.child,null,r),t=Pd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Lh(t,n,r,i,o,s,l){if(r)return n.flags&256?(n.flags&=-257,i=ra(Error(we(422))),Es(t,n,l,i)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(s=i.fallback,o=n.mode,i=zl({mode:"visible",children:i.children},o,0,null),s=Mi(s,o,l,null),s.flags|=2,i.return=n,s.return=n,i.sibling=s,n.child=i,n.mode&1&&xo(n,t.child,null,l),n.child.memoizedState=Ga(l),n.memoizedState=Ua,s);if(!(n.mode&1))return Es(t,n,l,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(we(419)),i=ra(s,i,void 0),Es(t,n,l,i)}if(a=(l&t.childLanes)!==0,cr||a){if(i=Nn,i!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|l)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,ni(t,o),Pr(i,t,o,-1))}return Ud(),i=ra(Error(we(421))),Es(t,n,l,i)}return o.data==="$?"?(n.flags|=128,n.child=t.child,n=Gh.bind(null,t),o._reactRetry=n,null):(t=s.treeContext,vr=mi(o.nextSibling),jr=n,yn=!0,Or=null,t!==null&&(Cr[Tr++]=Qr,Cr[Tr++]=Zr,Cr[Tr++]=Wi,Qr=t.id,Zr=t.overflow,Wi=n),n=Pd(n,i.children),n.flags|=4096,n)}function Qc(t,n,r){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n),Pa(t.return,n,r)}function ia(t,n,r,i,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=o)}function nf(t,n,r){var i=n.pendingProps,o=i.revealOrder,s=i.tail;if(tr(t,n,i.children,r),i=jn.current,i&2)i=i&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qc(t,r,n);else if(t.tag===19)Qc(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(pn(jn,i),!(n.mode&1))n.memoizedState=null;else switch(o){case"forwards":for(r=n.child,o=null;r!==null;)t=r.alternate,t!==null&&cl(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=n.child,n.child=null):(o=r.sibling,r.sibling=null),ia(n,!1,o,r,s);break;case"backwards":for(r=null,o=n.child,n.child=null;o!==null;){if(t=o.alternate,t!==null&&cl(t)===null){n.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}ia(n,!0,r,null,s);break;case"together":ia(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Vs(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function ri(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Ni|=n.lanes,!(r&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(we(153));if(n.child!==null){for(t=n.child,r=Si(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Si(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Ah(t,n,r){switch(n.tag){case 3:ef(n),go();break;case 5:Rp(n);break;case 1:fr(n.type)&&il(n);break;case 4:Bd(n,n.stateNode.containerInfo);break;case 10:var i=n.type._context,o=n.memoizedProps.value;pn(ll,i._currentValue),i._currentValue=o;break;case 13:if(i=n.memoizedState,i!==null)return i.dehydrated!==null?(pn(jn,jn.current&1),n.flags|=128,null):r&n.child.childLanes?tf(t,n,r):(pn(jn,jn.current&1),t=ri(t,n,r),t!==null?t.sibling:null);pn(jn,jn.current&1);break;case 19:if(i=(r&n.childLanes)!==0,t.flags&128){if(i)return nf(t,n,r);n.flags|=128}if(o=n.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),pn(jn,jn.current),i)break;return null;case 22:case 23:return n.lanes=0,Zp(t,n,r)}return ri(t,n,r)}var rf,Ya,of,sf;rf=function(t,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ya=function(){};of=function(t,n,r,i){var o=t.memoizedProps;if(o!==i){t=n.stateNode,Ai(Ur.current);var s=null;switch(r){case"input":o=ga(t,o),i=ga(t,i),s=[];break;case"select":o=wn({},o,{value:void 0}),i=wn({},i,{value:void 0}),s=[];break;case"textarea":o=ma(t,o),i=ma(t,i),s=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=nl)}va(r,i);var l;r=null;for(p in o)if(!i.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var a=o[p];for(l in a)a.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Qo.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in i){var c=i[p];if(a=o!=null?o[p]:void 0,i.hasOwnProperty(p)&&c!==a&&(c!=null||a!=null))if(p==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(s||(s=[]),s.push(p,r)),r=c;else p==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(p,c)):p==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(p,""+c):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Qo.hasOwnProperty(p)?(c!=null&&p==="onScroll"&&hn("scroll",t),s||a===c||(s=[])):(s=s||[]).push(p,c))}r&&(s=s||[]).push("style",r);var p=s;(n.updateQueue=p)&&(n.flags|=4)}};sf=function(t,n,r,i){r!==i&&(n.flags|=4)};function Fo(t,n){if(!yn)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Jn(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(n)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=r,n}function Fh(t,n,r){var i=n.pendingProps;switch(kd(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(n),null;case 1:return fr(n.type)&&rl(),Jn(n),null;case 3:return i=n.stateNode,yo(),gn(pr),gn(Zn),Ld(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Is(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Or!==null&&(td(Or),Or=null))),Ya(t,n),Jn(n),null;case 5:Ed(n);var o=Ai(ds.current);if(r=n.type,t!==null&&n.stateNode!=null)of(t,n,r,i,o),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!i){if(n.stateNode===null)throw Error(we(166));return Jn(n),null}if(t=Ai(Ur.current),Is(n)){i=n.stateNode,r=n.type;var s=n.memoizedProps;switch(i[$r]=n,i[ls]=s,t=(n.mode&1)!==0,r){case"dialog":hn("cancel",i),hn("close",i);break;case"iframe":case"object":case"embed":hn("load",i);break;case"video":case"audio":for(o=0;o<Do.length;o++)hn(Do[o],i);break;case"source":hn("error",i);break;case"img":case"image":case"link":hn("error",i),hn("load",i);break;case"details":hn("toggle",i);break;case"input":sc(i,s),hn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},hn("invalid",i);break;case"textarea":ac(i,s),hn("invalid",i)}va(r,s),o=null;for(var l in s)if(s.hasOwnProperty(l)){var a=s[l];l==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&zs(i.textContent,a,t),o=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zs(i.textContent,a,t),o=["children",""+a]):Qo.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&hn("scroll",i)}switch(r){case"input":js(i),lc(i,s,!0);break;case"textarea":js(i),dc(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=nl)}i=o,n.updateQueue=i,i!==null&&(n.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=L0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(r,{is:i.is}):(t=l.createElement(r),r==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,r),t[$r]=n,t[ls]=i,rf(t,n,!1,!1),n.stateNode=t;e:{switch(l=ja(r,i),r){case"dialog":hn("cancel",t),hn("close",t),o=i;break;case"iframe":case"object":case"embed":hn("load",t),o=i;break;case"video":case"audio":for(o=0;o<Do.length;o++)hn(Do[o],t);o=i;break;case"source":hn("error",t),o=i;break;case"img":case"image":case"link":hn("error",t),hn("load",t),o=i;break;case"details":hn("toggle",t),o=i;break;case"input":sc(t,i),o=ga(t,i),hn("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=wn({},i,{value:void 0}),hn("invalid",t);break;case"textarea":ac(t,i),o=ma(t,i),hn("invalid",t);break;default:o=i}va(r,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?M0(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&A0(t,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Zo(t,c):typeof c=="number"&&Zo(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Qo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&hn("scroll",t):c!=null&&dd(t,s,c,l))}switch(r){case"input":js(t),lc(t,i,!1);break;case"textarea":js(t),dc(t);break;case"option":i.value!=null&&t.setAttribute("value",""+wi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?so(t,!!i.multiple,s,!1):i.defaultValue!=null&&so(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=nl)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Jn(n),null;case 6:if(t&&n.stateNode!=null)sf(t,n,t.memoizedProps,i);else{if(typeof i!="string"&&n.stateNode===null)throw Error(we(166));if(r=Ai(ds.current),Ai(Ur.current),Is(n)){if(i=n.stateNode,r=n.memoizedProps,i[$r]=n,(s=i.nodeValue!==r)&&(t=jr,t!==null))switch(t.tag){case 3:zs(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zs(i.nodeValue,r,(t.mode&1)!==0)}s&&(n.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[$r]=n,n.stateNode=i}return Jn(n),null;case 13:if(gn(jn),i=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yn&&vr!==null&&n.mode&1&&!(n.flags&128))wp(),go(),n.flags|=98560,s=!1;else if(s=Is(n),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(we(318));if(s=n.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(we(317));s[$r]=n}else go(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Jn(n),s=!1}else Or!==null&&(td(Or),Or=null),s=!0;if(!s)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(n.child.flags|=8192,n.mode&1&&(t===null||jn.current&1?Mn===0&&(Mn=3):Ud())),n.updateQueue!==null&&(n.flags|=4),Jn(n),null);case 4:return yo(),Ya(t,n),t===null&&os(n.stateNode.containerInfo),Jn(n),null;case 10:return Rd(n.type._context),Jn(n),null;case 17:return fr(n.type)&&rl(),Jn(n),null;case 19:if(gn(jn),s=n.memoizedState,s===null)return Jn(n),null;if(i=(n.flags&128)!==0,l=s.rendering,l===null)if(i)Fo(s,!1);else{if(Mn!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(l=cl(t),l!==null){for(n.flags|=128,Fo(s,!1),i=l.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),n.subtreeFlags=0,i=r,r=n.child;r!==null;)s=r,t=i,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return pn(jn,jn.current&1|2),n.child}t=t.sibling}s.tail!==null&&Bn()>bo&&(n.flags|=128,i=!0,Fo(s,!1),n.lanes=4194304)}else{if(!i)if(t=cl(l),t!==null){if(n.flags|=128,i=!0,r=t.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),Fo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!yn)return Jn(n),null}else 2*Bn()-s.renderingStartTime>bo&&r!==1073741824&&(n.flags|=128,i=!0,Fo(s,!1),n.lanes=4194304);s.isBackwards?(l.sibling=n.child,n.child=l):(r=s.last,r!==null?r.sibling=l:n.child=l,s.last=l)}return s.tail!==null?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.renderingStartTime=Bn(),n.sibling=null,r=jn.current,pn(jn,i?r&1|2:r&1),n):(Jn(n),null);case 22:case 23:return Vd(),i=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(n.flags|=8192),i&&n.mode&1?br&1073741824&&(Jn(n),n.subtreeFlags&6&&(n.flags|=8192)):Jn(n),null;case 24:return null;case 25:return null}throw Error(we(156,n.tag))}function Mh(t,n){switch(kd(n),n.tag){case 1:return fr(n.type)&&rl(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return yo(),gn(pr),gn(Zn),Ld(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return Ed(n),null;case 13:if(gn(jn),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(we(340));go()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return gn(jn),null;case 4:return yo(),null;case 10:return Rd(n.type._context),null;case 22:case 23:return Vd(),null;case 24:return null;default:return null}}var Ls=!1,Qn=!1,Oh=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function io(t,n){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Tn(t,n,i)}else r.current=null}function Xa(t,n,r){try{r()}catch(i){Tn(t,n,i)}}var Zc=!1;function Wh(t,n){if(Ba=qs,t=cp(),Sd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var l=0,a=-1,c=-1,p=0,w=0,y=t,h=null;t:for(;;){for(var M;y!==r||o!==0&&y.nodeType!==3||(a=l+o),y!==s||i!==0&&y.nodeType!==3||(c=l+i),y.nodeType===3&&(l+=y.nodeValue.length),(M=y.firstChild)!==null;)h=y,y=M;for(;;){if(y===t)break t;if(h===r&&++p===o&&(a=l),h===s&&++w===i&&(c=l),(M=y.nextSibling)!==null)break;y=h,h=y.parentNode}y=M}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ea={focusedElem:t,selectionRange:r},qs=!1,Ue=n;Ue!==null;)if(n=Ue,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Ue=t;else for(;Ue!==null;){n=Ue;try{var k=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var G=k.memoizedProps,Me=k.memoizedState,x=n.stateNode,b=x.getSnapshotBeforeUpdate(n.elementType===n.type?G:Fr(n.type,G),Me);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=n.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(we(163))}}catch(d){Tn(n,n.return,d)}if(t=n.sibling,t!==null){t.return=n.return,Ue=t;break}Ue=n.return}return k=Zc,Zc=!1,k}function Xo(t,n,r){var i=n.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&Xa(n,r,s)}o=o.next}while(o!==i)}}function _l(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==n)}}function Ka(t){var n=t.ref;if(n!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof n=="function"?n(t):n.current=t}}function lf(t){var n=t.alternate;n!==null&&(t.alternate=null,lf(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[$r],delete n[ls],delete n[Fa],delete n[vh],delete n[jh])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function af(t){return t.tag===5||t.tag===3||t.tag===4}function qc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||af(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ja(t,n,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=nl));else if(i!==4&&(t=t.child,t!==null))for(Ja(t,n,r),t=t.sibling;t!==null;)Ja(t,n,r),t=t.sibling}function Qa(t,n,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Qa(t,n,r),t=t.sibling;t!==null;)Qa(t,n,r),t=t.sibling}var Un=null,Mr=!1;function ai(t,n,r){for(r=r.child;r!==null;)df(t,n,r),r=r.sibling}function df(t,n,r){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(bl,r)}catch{}switch(r.tag){case 5:Qn||io(r,n);case 6:var i=Un,o=Mr;Un=null,ai(t,n,r),Un=i,Mr=o,Un!==null&&(Mr?(t=Un,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Un.removeChild(r.stateNode));break;case 18:Un!==null&&(Mr?(t=Un,r=r.stateNode,t.nodeType===8?Ql(t.parentNode,r):t.nodeType===1&&Ql(t,r),ns(t)):Ql(Un,r.stateNode));break;case 4:i=Un,o=Mr,Un=r.stateNode.containerInfo,Mr=!0,ai(t,n,r),Un=i,Mr=o;break;case 0:case 11:case 14:case 15:if(!Qn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var s=o,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Xa(r,n,l),o=o.next}while(o!==i)}ai(t,n,r);break;case 1:if(!Qn&&(io(r,n),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){Tn(r,n,a)}ai(t,n,r);break;case 21:ai(t,n,r);break;case 22:r.mode&1?(Qn=(i=Qn)||r.memoizedState!==null,ai(t,n,r),Qn=i):ai(t,n,r);break;default:ai(t,n,r)}}function e0(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Oh),n.forEach(function(i){var o=Yh.bind(null,t,i);r.has(i)||(r.add(i),i.then(o,o))})}}function Lr(t,n){var r=n.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var s=t,l=n,a=l;e:for(;a!==null;){switch(a.tag){case 5:Un=a.stateNode,Mr=!1;break e;case 3:Un=a.stateNode.containerInfo,Mr=!0;break e;case 4:Un=a.stateNode.containerInfo,Mr=!0;break e}a=a.return}if(Un===null)throw Error(we(160));df(s,l,o),Un=null,Mr=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(p){Tn(o,n,p)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)cf(n,t),n=n.sibling}function cf(t,n){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lr(n,t),Dr(t),i&4){try{Xo(3,t,t.return),_l(3,t)}catch(G){Tn(t,t.return,G)}try{Xo(5,t,t.return)}catch(G){Tn(t,t.return,G)}}break;case 1:Lr(n,t),Dr(t),i&512&&r!==null&&io(r,r.return);break;case 5:if(Lr(n,t),Dr(t),i&512&&r!==null&&io(r,r.return),t.flags&32){var o=t.stateNode;try{Zo(o,"")}catch(G){Tn(t,t.return,G)}}if(i&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,l=r!==null?r.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&B0(o,s),ja(a,l);var p=ja(a,s);for(l=0;l<c.length;l+=2){var w=c[l],y=c[l+1];w==="style"?M0(o,y):w==="dangerouslySetInnerHTML"?A0(o,y):w==="children"?Zo(o,y):dd(o,w,y,p)}switch(a){case"input":xa(o,s);break;case"textarea":E0(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var M=s.value;M!=null?so(o,!!s.multiple,M,!1):h!==!!s.multiple&&(s.defaultValue!=null?so(o,!!s.multiple,s.defaultValue,!0):so(o,!!s.multiple,s.multiple?[]:"",!1))}o[ls]=s}catch(G){Tn(t,t.return,G)}}break;case 6:if(Lr(n,t),Dr(t),i&4){if(t.stateNode===null)throw Error(we(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(G){Tn(t,t.return,G)}}break;case 3:if(Lr(n,t),Dr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{ns(n.containerInfo)}catch(G){Tn(t,t.return,G)}break;case 4:Lr(n,t),Dr(t);break;case 13:Lr(n,t),Dr(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(Hd=Bn())),i&4&&e0(t);break;case 22:if(w=r!==null&&r.memoizedState!==null,t.mode&1?(Qn=(p=Qn)||w,Lr(n,t),Qn=p):Lr(n,t),Dr(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!w&&t.mode&1)for(Ue=t,w=t.child;w!==null;){for(y=Ue=w;Ue!==null;){switch(h=Ue,M=h.child,h.tag){case 0:case 11:case 14:case 15:Xo(4,h,h.return);break;case 1:io(h,h.return);var k=h.stateNode;if(typeof k.componentWillUnmount=="function"){i=h,r=h.return;try{n=i,k.props=n.memoizedProps,k.state=n.memoizedState,k.componentWillUnmount()}catch(G){Tn(i,r,G)}}break;case 5:io(h,h.return);break;case 22:if(h.memoizedState!==null){n0(y);continue}}M!==null?(M.return=h,Ue=M):n0(y)}w=w.sibling}e:for(w=null,y=t;;){if(y.tag===5){if(w===null){w=y;try{o=y.stateNode,p?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=y.stateNode,c=y.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=F0("display",l))}catch(G){Tn(t,t.return,G)}}}else if(y.tag===6){if(w===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(G){Tn(t,t.return,G)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;w===y&&(w=null),y=y.return}w===y&&(w=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Lr(n,t),Dr(t),i&4&&e0(t);break;case 21:break;default:Lr(n,t),Dr(t)}}function Dr(t){var n=t.flags;if(n&2){try{e:{for(var r=t.return;r!==null;){if(af(r)){var i=r;break e}r=r.return}throw Error(we(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Zo(o,""),i.flags&=-33);var s=qc(t);Qa(t,s,o);break;case 3:case 4:var l=i.stateNode.containerInfo,a=qc(t);Ja(t,a,l);break;default:throw Error(we(161))}}catch(c){Tn(t,t.return,c)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Ph(t,n,r){Ue=t,pf(t)}function pf(t,n,r){for(var i=(t.mode&1)!==0;Ue!==null;){var o=Ue,s=o.child;if(o.tag===22&&i){var l=o.memoizedState!==null||Ls;if(!l){var a=o.alternate,c=a!==null&&a.memoizedState!==null||Qn;a=Ls;var p=Qn;if(Ls=l,(Qn=c)&&!p)for(Ue=o;Ue!==null;)l=Ue,c=l.child,l.tag===22&&l.memoizedState!==null?r0(o):c!==null?(c.return=l,Ue=c):r0(o);for(;s!==null;)Ue=s,pf(s),s=s.sibling;Ue=o,Ls=a,Qn=p}t0(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Ue=s):t0(t)}}function t0(t){for(;Ue!==null;){var n=Ue;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Qn||_l(5,n);break;case 1:var i=n.stateNode;if(n.flags&4&&!Qn)if(r===null)i.componentDidMount();else{var o=n.elementType===n.type?r.memoizedProps:Fr(n.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=n.updateQueue;s!==null&&Pc(n,s,i);break;case 3:var l=n.updateQueue;if(l!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}Pc(n,l,r)}break;case 5:var a=n.stateNode;if(r===null&&n.flags&4){r=a;var c=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var p=n.alternate;if(p!==null){var w=p.memoizedState;if(w!==null){var y=w.dehydrated;y!==null&&ns(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(we(163))}Qn||n.flags&512&&Ka(n)}catch(h){Tn(n,n.return,h)}}if(n===t){Ue=null;break}if(r=n.sibling,r!==null){r.return=n.return,Ue=r;break}Ue=n.return}}function n0(t){for(;Ue!==null;){var n=Ue;if(n===t){Ue=null;break}var r=n.sibling;if(r!==null){r.return=n.return,Ue=r;break}Ue=n.return}}function r0(t){for(;Ue!==null;){var n=Ue;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{_l(4,n)}catch(c){Tn(n,r,c)}break;case 1:var i=n.stateNode;if(typeof i.componentDidMount=="function"){var o=n.return;try{i.componentDidMount()}catch(c){Tn(n,o,c)}}var s=n.return;try{Ka(n)}catch(c){Tn(n,s,c)}break;case 5:var l=n.return;try{Ka(n)}catch(c){Tn(n,l,c)}}}catch(c){Tn(n,n.return,c)}if(n===t){Ue=null;break}var a=n.sibling;if(a!==null){a.return=n.return,Ue=a;break}Ue=n.return}}var Nh=Math.ceil,ul=ii.ReactCurrentDispatcher,Nd=ii.ReactCurrentOwner,Rr=ii.ReactCurrentBatchConfig,Gt=0,Nn=null,En=null,Gn=0,br=0,oo=Ti(0),Mn=0,us=null,Ni=0,Rl=0,Dd=0,Ko=null,dr=null,Hd=0,bo=1/0,Kr=null,hl=!1,Za=null,vi=null,As=!1,hi=null,gl=0,Jo=0,qa=null,Us=-1,Gs=0;function nr(){return Gt&6?Bn():Us!==-1?Us:Us=Bn()}function ji(t){return t.mode&1?Gt&2&&Gn!==0?Gn&-Gn:wh.transition!==null?(Gs===0&&(Gs=X0()),Gs):(t=en,t!==0||(t=window.event,t=t===void 0?16:tp(t.type)),t):1}function Pr(t,n,r,i){if(50<Jo)throw Jo=0,qa=null,Error(we(185));gs(t,r,i),(!(Gt&2)||t!==Nn)&&(t===Nn&&(!(Gt&2)&&(Rl|=r),Mn===4&&fi(t,Gn)),ur(t,i),r===1&&Gt===0&&!(n.mode&1)&&(bo=Bn()+500,kl&&_i()))}function ur(t,n){var r=t.callbackNode;wu(t,n);var i=Zs(t,t===Nn?Gn:0);if(i===0)r!==null&&fc(r),t.callbackNode=null,t.callbackPriority=0;else if(n=i&-i,t.callbackPriority!==n){if(r!=null&&fc(r),n===1)t.tag===0?Sh(i0.bind(null,t)):vp(i0.bind(null,t)),mh(function(){!(Gt&6)&&_i()}),r=null;else{switch(K0(i)){case 1:r=hd;break;case 4:r=G0;break;case 16:r=Qs;break;case 536870912:r=Y0;break;default:r=Qs}r=bf(r,ff.bind(null,t))}t.callbackPriority=n,t.callbackNode=r}}function ff(t,n){if(Us=-1,Gs=0,Gt&6)throw Error(we(327));var r=t.callbackNode;if(fo()&&t.callbackNode!==r)return null;var i=Zs(t,t===Nn?Gn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||n)n=xl(t,i);else{n=i;var o=Gt;Gt|=2;var s=hf();(Nn!==t||Gn!==n)&&(Kr=null,bo=Bn()+500,Fi(t,n));do try{$h();break}catch(a){uf(t,a)}while(!0);_d(),ul.current=s,Gt=o,En!==null?n=0:(Nn=null,Gn=0,n=Mn)}if(n!==0){if(n===2&&(o=Ta(t),o!==0&&(i=o,n=ed(t,o))),n===1)throw r=us,Fi(t,0),fi(t,i),ur(t,Bn()),r;if(n===6)fi(t,i);else{if(o=t.current.alternate,!(i&30)&&!Dh(o)&&(n=xl(t,i),n===2&&(s=Ta(t),s!==0&&(i=s,n=ed(t,s))),n===1))throw r=us,Fi(t,0),fi(t,i),ur(t,Bn()),r;switch(t.finishedWork=o,t.finishedLanes=i,n){case 0:case 1:throw Error(we(345));case 2:Bi(t,dr,Kr);break;case 3:if(fi(t,i),(i&130023424)===i&&(n=Hd+500-Bn(),10<n)){if(Zs(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){nr(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Aa(Bi.bind(null,t,dr,Kr),n);break}Bi(t,dr,Kr);break;case 4:if(fi(t,i),(i&4194240)===i)break;for(n=t.eventTimes,o=-1;0<i;){var l=31-Wr(i);s=1<<l,l=n[l],l>o&&(o=l),i&=~s}if(i=o,i=Bn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Nh(i/1960))-i,10<i){t.timeoutHandle=Aa(Bi.bind(null,t,dr,Kr),i);break}Bi(t,dr,Kr);break;case 5:Bi(t,dr,Kr);break;default:throw Error(we(329))}}}return ur(t,Bn()),t.callbackNode===r?ff.bind(null,t):null}function ed(t,n){var r=Ko;return t.current.memoizedState.isDehydrated&&(Fi(t,n).flags|=256),t=xl(t,n),t!==2&&(n=dr,dr=r,n!==null&&td(n)),t}function td(t){dr===null?dr=t:dr.push.apply(dr,t)}function Dh(t){for(var n=t;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],s=o.getSnapshot;o=o.value;try{if(!Nr(s(),o))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function fi(t,n){for(n&=~Dd,n&=~Rl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var r=31-Wr(n),i=1<<r;t[r]=-1,n&=~i}}function i0(t){if(Gt&6)throw Error(we(327));fo();var n=Zs(t,0);if(!(n&1))return ur(t,Bn()),null;var r=xl(t,n);if(t.tag!==0&&r===2){var i=Ta(t);i!==0&&(n=i,r=ed(t,i))}if(r===1)throw r=us,Fi(t,0),fi(t,n),ur(t,Bn()),r;if(r===6)throw Error(we(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Bi(t,dr,Kr),ur(t,Bn()),null}function $d(t,n){var r=Gt;Gt|=1;try{return t(n)}finally{Gt=r,Gt===0&&(bo=Bn()+500,kl&&_i())}}function Di(t){hi!==null&&hi.tag===0&&!(Gt&6)&&fo();var n=Gt;Gt|=1;var r=Rr.transition,i=en;try{if(Rr.transition=null,en=1,t)return t()}finally{en=i,Rr.transition=r,Gt=n,!(Gt&6)&&_i()}}function Vd(){br=oo.current,gn(oo)}function Fi(t,n){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,yh(r)),En!==null)for(r=En.return;r!==null;){var i=r;switch(kd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rl();break;case 3:yo(),gn(pr),gn(Zn),Ld();break;case 5:Ed(i);break;case 4:yo();break;case 13:gn(jn);break;case 19:gn(jn);break;case 10:Rd(i.type._context);break;case 22:case 23:Vd()}r=r.return}if(Nn=t,En=t=Si(t.current,null),Gn=br=n,Mn=0,us=null,Dd=Rl=Ni=0,dr=Ko=null,Li!==null){for(n=0;n<Li.length;n++)if(r=Li[n],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,s=r.pending;if(s!==null){var l=s.next;s.next=o,i.next=l}r.pending=i}Li=null}return t}function uf(t,n){do{var r=En;try{if(_d(),Hs.current=fl,pl){for(var i=Sn.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}pl=!1}if(Pi=0,Pn=Fn=Sn=null,Yo=!1,cs=0,Nd.current=null,r===null||r.return===null){Mn=1,us=n,En=null;break}e:{var s=t,l=r.return,a=r,c=n;if(n=Gn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var p=c,w=a,y=w.tag;if(!(w.mode&1)&&(y===0||y===11||y===15)){var h=w.alternate;h?(w.updateQueue=h.updateQueue,w.memoizedState=h.memoizedState,w.lanes=h.lanes):(w.updateQueue=null,w.memoizedState=null)}var M=Uc(l);if(M!==null){M.flags&=-257,Gc(M,l,a,s,n),M.mode&1&&Vc(s,p,n),n=M,c=p;var k=n.updateQueue;if(k===null){var G=new Set;G.add(c),n.updateQueue=G}else k.add(c);break e}else{if(!(n&1)){Vc(s,p,n),Ud();break e}c=Error(we(426))}}else if(yn&&a.mode&1){var Me=Uc(l);if(Me!==null){!(Me.flags&65536)&&(Me.flags|=256),Gc(Me,l,a,s,n),Cd(mo(c,a));break e}}s=c=mo(c,a),Mn!==4&&(Mn=2),Ko===null?Ko=[s]:Ko.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,n&=-n,s.lanes|=n;var x=Kp(s,c,n);Wc(s,x);break e;case 1:a=c;var b=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(vi===null||!vi.has(C)))){s.flags|=65536,n&=-n,s.lanes|=n;var d=Jp(s,a,n);Wc(s,d);break e}}s=s.return}while(s!==null)}xf(r)}catch(A){n=A,En===r&&r!==null&&(En=r=r.return);continue}break}while(!0)}function hf(){var t=ul.current;return ul.current=fl,t===null?fl:t}function Ud(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Nn===null||!(Ni&268435455)&&!(Rl&268435455)||fi(Nn,Gn)}function xl(t,n){var r=Gt;Gt|=2;var i=hf();(Nn!==t||Gn!==n)&&(Kr=null,Fi(t,n));do try{Hh();break}catch(o){uf(t,o)}while(!0);if(_d(),Gt=r,ul.current=i,En!==null)throw Error(we(261));return Nn=null,Gn=0,Mn}function Hh(){for(;En!==null;)gf(En)}function $h(){for(;En!==null&&!hu();)gf(En)}function gf(t){var n=mf(t.alternate,t,br);t.memoizedProps=t.pendingProps,n===null?xf(t):En=n,Nd.current=null}function xf(t){var n=t;do{var r=n.alternate;if(t=n.return,n.flags&32768){if(r=Mh(r,n),r!==null){r.flags&=32767,En=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mn=6,En=null;return}}else if(r=Fh(r,n,br),r!==null){En=r;return}if(n=n.sibling,n!==null){En=n;return}En=n=t}while(n!==null);Mn===0&&(Mn=5)}function Bi(t,n,r){var i=en,o=Rr.transition;try{Rr.transition=null,en=1,Vh(t,n,r,i)}finally{Rr.transition=o,en=i}return null}function Vh(t,n,r,i){do fo();while(hi!==null);if(Gt&6)throw Error(we(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(we(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(ku(t,s),t===Nn&&(En=Nn=null,Gn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||As||(As=!0,bf(Qs,function(){return fo(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Rr.transition,Rr.transition=null;var l=en;en=1;var a=Gt;Gt|=4,Nd.current=null,Wh(t,r),cf(r,t),ch(Ea),qs=!!Ba,Ea=Ba=null,t.current=r,Ph(r),gu(),Gt=a,en=l,Rr.transition=s}else t.current=r;if(As&&(As=!1,hi=t,gl=o),s=t.pendingLanes,s===0&&(vi=null),mu(r.stateNode),ur(t,Bn()),n!==null)for(i=t.onRecoverableError,r=0;r<n.length;r++)o=n[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(hl)throw hl=!1,t=Za,Za=null,t;return gl&1&&t.tag!==0&&fo(),s=t.pendingLanes,s&1?t===qa?Jo++:(Jo=0,qa=t):Jo=0,_i(),null}function fo(){if(hi!==null){var t=K0(gl),n=Rr.transition,r=en;try{if(Rr.transition=null,en=16>t?16:t,hi===null)var i=!1;else{if(t=hi,hi=null,gl=0,Gt&6)throw Error(we(331));var o=Gt;for(Gt|=4,Ue=t.current;Ue!==null;){var s=Ue,l=s.child;if(Ue.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var p=a[c];for(Ue=p;Ue!==null;){var w=Ue;switch(w.tag){case 0:case 11:case 15:Xo(8,w,s)}var y=w.child;if(y!==null)y.return=w,Ue=y;else for(;Ue!==null;){w=Ue;var h=w.sibling,M=w.return;if(lf(w),w===p){Ue=null;break}if(h!==null){h.return=M,Ue=h;break}Ue=M}}}var k=s.alternate;if(k!==null){var G=k.child;if(G!==null){k.child=null;do{var Me=G.sibling;G.sibling=null,G=Me}while(G!==null)}}Ue=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,Ue=l;else e:for(;Ue!==null;){if(s=Ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xo(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Ue=x;break e}Ue=s.return}}var b=t.current;for(Ue=b;Ue!==null;){l=Ue;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,Ue=C;else e:for(l=b;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_l(9,a)}}catch(A){Tn(a,a.return,A)}if(a===l){Ue=null;break e}var d=a.sibling;if(d!==null){d.return=a.return,Ue=d;break e}Ue=a.return}}if(Gt=o,_i(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(bl,t)}catch{}i=!0}return i}finally{en=r,Rr.transition=n}}return!1}function o0(t,n,r){n=mo(r,n),n=Kp(t,n,1),t=bi(t,n,1),n=nr(),t!==null&&(gs(t,1,n),ur(t,n))}function Tn(t,n,r){if(t.tag===3)o0(t,t,r);else for(;n!==null;){if(n.tag===3){o0(n,t,r);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vi===null||!vi.has(i))){t=mo(r,t),t=Jp(n,t,1),n=bi(n,t,1),t=nr(),n!==null&&(gs(n,1,t),ur(n,t));break}}n=n.return}}function Uh(t,n,r){var i=t.pingCache;i!==null&&i.delete(n),n=nr(),t.pingedLanes|=t.suspendedLanes&r,Nn===t&&(Gn&r)===r&&(Mn===4||Mn===3&&(Gn&130023424)===Gn&&500>Bn()-Hd?Fi(t,0):Dd|=r),ur(t,n)}function yf(t,n){n===0&&(t.mode&1?(n=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):n=1);var r=nr();t=ni(t,n),t!==null&&(gs(t,n,r),ur(t,r))}function Gh(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),yf(t,r)}function Yh(t,n){var r=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(we(314))}i!==null&&i.delete(n),yf(t,r)}var mf;mf=function(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps||pr.current)cr=!0;else{if(!(t.lanes&r)&&!(n.flags&128))return cr=!1,Ah(t,n,r);cr=!!(t.flags&131072)}else cr=!1,yn&&n.flags&1048576&&jp(n,sl,n.index);switch(n.lanes=0,n.tag){case 2:var i=n.type;Vs(t,n),t=n.pendingProps;var o=ho(n,Zn.current);po(n,r),o=Fd(null,n,i,t,o,r);var s=Md();return n.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,fr(i)?(s=!0,il(n)):s=!1,n.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Id(n),o.updater=Tl,n.stateNode=o,o._reactInternals=n,Da(n,i,t,r),n=Va(null,n,i,!0,s,r)):(n.tag=0,yn&&s&&wd(n),tr(null,n,o,r),n=n.child),n;case 16:i=n.elementType;e:{switch(Vs(t,n),t=n.pendingProps,o=i._init,i=o(i._payload),n.type=i,o=n.tag=Kh(i),t=Fr(i,t),o){case 0:n=$a(null,n,i,t,r);break e;case 1:n=Kc(null,n,i,t,r);break e;case 11:n=Yc(null,n,i,t,r);break e;case 14:n=Xc(null,n,i,Fr(i.type,t),r);break e}throw Error(we(306,i,""))}return n;case 0:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Fr(i,o),$a(t,n,i,o,r);case 1:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Fr(i,o),Kc(t,n,i,o,r);case 3:e:{if(ef(n),t===null)throw Error(we(387));i=n.pendingProps,s=n.memoizedState,o=s.element,_p(t,n),dl(n,i,null,r);var l=n.memoizedState;if(i=l.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=s,n.memoizedState=s,n.flags&256){o=mo(Error(we(423)),n),n=Jc(t,n,i,r,o);break e}else if(i!==o){o=mo(Error(we(424)),n),n=Jc(t,n,i,r,o);break e}else for(vr=mi(n.stateNode.containerInfo.firstChild),jr=n,yn=!0,Or=null,r=Cp(n,null,i,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(go(),i===o){n=ri(t,n,r);break e}tr(t,n,i,r)}n=n.child}return n;case 5:return Rp(n),t===null&&Wa(n),i=n.type,o=n.pendingProps,s=t!==null?t.memoizedProps:null,l=o.children,La(i,o)?l=null:s!==null&&La(i,s)&&(n.flags|=32),qp(t,n),tr(t,n,l,r),n.child;case 6:return t===null&&Wa(n),null;case 13:return tf(t,n,r);case 4:return Bd(n,n.stateNode.containerInfo),i=n.pendingProps,t===null?n.child=xo(n,null,i,r):tr(t,n,i,r),n.child;case 11:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Fr(i,o),Yc(t,n,i,o,r);case 7:return tr(t,n,n.pendingProps,r),n.child;case 8:return tr(t,n,n.pendingProps.children,r),n.child;case 12:return tr(t,n,n.pendingProps.children,r),n.child;case 10:e:{if(i=n.type._context,o=n.pendingProps,s=n.memoizedProps,l=o.value,pn(ll,i._currentValue),i._currentValue=l,s!==null)if(Nr(s.value,l)){if(s.children===o.children&&!pr.current){n=ri(t,n,r);break e}}else for(s=n.child,s!==null&&(s.return=n);s!==null;){var a=s.dependencies;if(a!==null){l=s.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=qr(-1,r&-r),c.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var w=p.pending;w===null?c.next=c:(c.next=w.next,w.next=c),p.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Pa(s.return,r,n),a.lanes|=r;break}c=c.next}}else if(s.tag===10)l=s.type===n.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(we(341));l.lanes|=r,a=l.alternate,a!==null&&(a.lanes|=r),Pa(l,r,n),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===n){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}tr(t,n,o.children,r),n=n.child}return n;case 9:return o=n.type,i=n.pendingProps.children,po(n,r),o=zr(o),i=i(o),n.flags|=1,tr(t,n,i,r),n.child;case 14:return i=n.type,o=Fr(i,n.pendingProps),o=Fr(i.type,o),Xc(t,n,i,o,r);case 15:return Qp(t,n,n.type,n.pendingProps,r);case 17:return i=n.type,o=n.pendingProps,o=n.elementType===i?o:Fr(i,o),Vs(t,n),n.tag=1,fr(i)?(t=!0,il(n)):t=!1,po(n,r),Xp(n,i,o),Da(n,i,o,r),Va(null,n,i,!0,t,r);case 19:return nf(t,n,r);case 22:return Zp(t,n,r)}throw Error(we(156,n.tag))};function bf(t,n){return U0(t,n)}function Xh(t,n,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(t,n,r,i){return new Xh(t,n,r,i)}function Gd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kh(t){if(typeof t=="function")return Gd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===pd)return 11;if(t===fd)return 14}return 2}function Si(t,n){var r=t.alternate;return r===null?(r=_r(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ys(t,n,r,i,o,s){var l=2;if(i=t,typeof t=="function")Gd(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Ki:return Mi(r.children,o,s,n);case cd:l=8,o|=8;break;case pa:return t=_r(12,r,n,o|2),t.elementType=pa,t.lanes=s,t;case fa:return t=_r(13,r,n,o),t.elementType=fa,t.lanes=s,t;case ua:return t=_r(19,r,n,o),t.elementType=ua,t.lanes=s,t;case R0:return zl(r,o,s,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T0:l=10;break e;case _0:l=9;break e;case pd:l=11;break e;case fd:l=14;break e;case di:l=16,i=null;break e}throw Error(we(130,t==null?t:typeof t,""))}return n=_r(l,r,n,o),n.elementType=t,n.type=i,n.lanes=s,n}function Mi(t,n,r,i){return t=_r(7,t,i,n),t.lanes=r,t}function zl(t,n,r,i){return t=_r(22,t,i,n),t.elementType=R0,t.lanes=r,t.stateNode={isHidden:!1},t}function oa(t,n,r){return t=_r(6,t,null,n),t.lanes=r,t}function sa(t,n,r){return n=_r(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Jh(t,n,r,i,o){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Yd(t,n,r,i,o,s,l,a,c){return t=new Jh(t,n,r,a,c),n===1?(n=1,s===!0&&(n|=8)):n=0,s=_r(3,null,null,n),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(s),t}function Qh(t,n,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xi,key:i==null?null:""+i,children:t,containerInfo:n,implementation:r}}function vf(t){if(!t)return ki;t=t._reactInternals;e:{if($i(t)!==t||t.tag!==1)throw Error(we(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(fr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(we(171))}if(t.tag===1){var r=t.type;if(fr(r))return bp(t,r,n)}return n}function jf(t,n,r,i,o,s,l,a,c){return t=Yd(r,i,!0,t,o,s,l,a,c),t.context=vf(null),r=t.current,i=nr(),o=ji(r),s=qr(i,o),s.callback=n??null,bi(r,s,o),t.current.lanes=o,gs(t,o,i),ur(t,i),t}function Il(t,n,r,i){var o=n.current,s=nr(),l=ji(o);return r=vf(r),n.context===null?n.context=r:n.pendingContext=r,n=qr(s,l),n.payload={element:t},i=i===void 0?null:i,i!==null&&(n.callback=i),t=bi(o,n,l),t!==null&&(Pr(t,o,l,s),Ds(t,o,l)),l}function yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Xd(t,n){s0(t,n),(t=t.alternate)&&s0(t,n)}function Zh(){return null}var Sf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Kd(t){this._internalRoot=t}Bl.prototype.render=Kd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(we(409));Il(t,n,null,null)};Bl.prototype.unmount=Kd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Di(function(){Il(null,t,null,null)}),n[ti]=null}};function Bl(t){this._internalRoot=t}Bl.prototype.unstable_scheduleHydration=function(t){if(t){var n=Z0();t={blockedOn:null,target:t,priority:n};for(var r=0;r<pi.length&&n!==0&&n<pi[r].priority;r++);pi.splice(r,0,t),r===0&&ep(t)}};function Jd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function El(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l0(){}function qh(t,n,r,i,o){if(o){if(typeof i=="function"){var s=i;i=function(){var p=yl(l);s.call(p)}}var l=jf(n,i,t,0,null,!1,!1,"",l0);return t._reactRootContainer=l,t[ti]=l.current,os(t.nodeType===8?t.parentNode:t),Di(),l}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var a=i;i=function(){var p=yl(c);a.call(p)}}var c=Yd(t,0,!1,null,null,!1,!1,"",l0);return t._reactRootContainer=c,t[ti]=c.current,os(t.nodeType===8?t.parentNode:t),Di(function(){Il(n,c,r,i)}),c}function Ll(t,n,r,i,o){var s=r._reactRootContainer;if(s){var l=s;if(typeof o=="function"){var a=o;o=function(){var c=yl(l);a.call(c)}}Il(n,l,t,o)}else l=qh(r,n,t,o,i);return yl(l)}J0=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var r=No(n.pendingLanes);r!==0&&(gd(n,r|1),ur(n,Bn()),!(Gt&6)&&(bo=Bn()+500,_i()))}break;case 13:Di(function(){var i=ni(t,1);if(i!==null){var o=nr();Pr(i,t,1,o)}}),Xd(t,1)}};xd=function(t){if(t.tag===13){var n=ni(t,134217728);if(n!==null){var r=nr();Pr(n,t,134217728,r)}Xd(t,134217728)}};Q0=function(t){if(t.tag===13){var n=ji(t),r=ni(t,n);if(r!==null){var i=nr();Pr(r,t,n,i)}Xd(t,n)}};Z0=function(){return en};q0=function(t,n){var r=en;try{return en=t,n()}finally{en=r}};wa=function(t,n,r){switch(n){case"input":if(xa(t,r),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var i=r[n];if(i!==t&&i.form===t.form){var o=wl(i);if(!o)throw Error(we(90));I0(i),xa(i,o)}}}break;case"textarea":E0(t,r);break;case"select":n=r.value,n!=null&&so(t,!!r.multiple,n,!1)}};P0=$d;N0=Di;var eg={usingClientEntryPoint:!1,Events:[ys,qi,wl,O0,W0,$d]},Mo={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tg={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$0(t),t===null?null:t.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||Zh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fs.isDisabled&&Fs.supportsFiber)try{bl=Fs.inject(tg),Vr=Fs}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eg;wr.createPortal=function(t,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jd(n))throw Error(we(200));return Qh(t,n,null,r)};wr.createRoot=function(t,n){if(!Jd(t))throw Error(we(299));var r=!1,i="",o=Sf;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),n=Yd(t,1,!1,null,null,r,!1,i,o),t[ti]=n.current,os(t.nodeType===8?t.parentNode:t),new Kd(n)};wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(we(188)):(t=Object.keys(t).join(","),Error(we(268,t)));return t=$0(n),t=t===null?null:t.stateNode,t};wr.flushSync=function(t){return Di(t)};wr.hydrate=function(t,n,r){if(!El(n))throw Error(we(200));return Ll(null,t,n,!0,r)};wr.hydrateRoot=function(t,n,r){if(!Jd(t))throw Error(we(405));var i=r!=null&&r.hydratedSources||null,o=!1,s="",l=Sf;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),n=jf(n,null,t,1,r??null,o,!1,s,l),t[ti]=n.current,os(t),i)for(t=0;t<i.length;t++)r=i[t],o=r._getVersion,o=o(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,o]:n.mutableSourceEagerHydrationData.push(r,o);return new Bl(n)};wr.render=function(t,n,r){if(!El(n))throw Error(we(200));return Ll(null,t,n,!1,r)};wr.unmountComponentAtNode=function(t){if(!El(t))throw Error(we(40));return t._reactRootContainer?(Di(function(){Ll(null,null,t,!1,function(){t._reactRootContainer=null,t[ti]=null})}),!0):!1};wr.unstable_batchedUpdates=$d;wr.unstable_renderSubtreeIntoContainer=function(t,n,r,i){if(!El(r))throw Error(we(200));if(t==null||t._reactInternals===void 0)throw Error(we(38));return Ll(t,n,r,!1,i)};wr.version="18.3.1-next-f1338f8080-20240426";function wf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wf)}catch(t){console.error(t)}}wf(),S0.exports=wr;var ng=S0.exports,a0=ng;da.createRoot=a0.createRoot,da.hydrateRoot=a0.hydrateRoot;var d0={},rg="@vercel/speed-insights",ig="1.3.1",og=()=>{window.si||(window.si=function(...n){(window.siq=window.siq||[]).push(n)})};function sg(){return typeof window<"u"}function lg(){try{const t="production"}catch{}return"production"}function kf(){return lg()==="development"}function ag(t){return t.scriptSrc?t.scriptSrc:kf()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function dg(t={}){var n;if(!sg()||t.route===null)return null;og();const r=ag(t);if(document.head.querySelector(`script[src*="${r}"]`))return null;t.beforeSend&&((n=window.si)==null||n.call(window,"beforeSend",t.beforeSend));const i=document.createElement("script");return i.src=r,i.defer=!0,i.dataset.sdkn=rg+(t.framework?`/${t.framework}`:""),i.dataset.sdkv=ig,t.sampleRate&&(i.dataset.sampleRate=t.sampleRate.toString()),t.route&&(i.dataset.route=t.route),t.endpoint?i.dataset.endpoint=t.endpoint:t.basePath&&(i.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(i.dataset.dsn=t.dsn),kf()&&t.debug===!1&&(i.dataset.debug="false"),i.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${r}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(i),{setRoute:o=>{i.dataset.route=o??void 0}}}function cg(){if(!(typeof process>"u"||typeof d0>"u"))return d0.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function pg(t){L.useEffect(()=>{var r;t.beforeSend&&((r=window.si)==null||r.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const n=L.useRef(null);return L.useEffect(()=>{if(n.current)t.route&&n.current(t.route);else{const r=dg({framework:t.framework??"react",basePath:t.basePath??cg(),...t});r&&(n.current=r.setRoute)}},[t.route]),null}const fg=({gexData:t,currentPrice:n})=>{const[r,i]=L.useState("table"),[o,s]=L.useState(10),[l,a]=L.useState(null),[c,p]=L.useState(null),w=(t==null?void 0:t.gex_profile)||[];t!=null&&t.gex_levels;const y=(t==null?void 0:t.gamma_regime)||"UNKNOWN",h=(t==null?void 0:t.total_gex)||0,M=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0,k=(t==null?void 0:t.max_pain)||0;t!=null&&t.call_wall,t!=null&&t.put_wall,t!=null&&t.hvl;const G=w.filter(S=>Math.abs(S.gex)>.1).sort((S,P)=>P.strike-S.strike).slice(0,o).map(S=>{const P=S.gex<0,O=n?Math.round(S.strike-n):0,ke=Math.round(50+Math.abs(S.gex)*10),Fe=100-ke;return{strike:S.strike,gex:S.gex,type:P?"CALL":"PUT",wallType:Math.abs(S.gex)>.5?"WALL":"LEVEL",role:P?S.strike>n?"POT. RESISTANCE":"POT. RESISTANCE (EX-SUPP)":(S.strike<n,"POT. SUPPORT"),distance:O,holdPct:Math.min(ke,85),breakPct:Math.max(Fe,15),callPct:P?70+Math.random()*20:10+Math.random()*20,putPct:P?30-Math.random()*20:80+Math.random()*10,mass:Math.abs(S.gex).toFixed(1),effective:Math.abs(S.gex*.9).toFixed(1),integrity:Math.round(85+Math.random()*15),fieldHigh:S.strike+8,fieldLow:S.strike-8,influence:Math.round(15+Math.random()*10)}}),Me=n?n*1.015:0,x=n?n*.985:0,b=n?n*1.012:0,C=n?n*.988:0,d={cyan:"#22d3ee",green:"#22c55e",red:"#ef4444",amber:"#f59e0b",purple:"#a855f7",magenta:"#ec4899",border:"rgba(34, 211, 238, 0.2)",text:"#f4f4f5",textMuted:"#71717a"},A=S=>{const P=G.findIndex(Fe=>Fe.strike===S.strike),O=G[P+1],ke=G[P-1];return{nextLevel:O,prevLevel:ke}},m=({level:S,onClose:P})=>{if(!S)return null;const{nextLevel:O,prevLevel:ke}=A(S),Fe=M?Math.round(S.strike-M):0,qe=S.gex<0,Le=qe?S.strike>n?"Continuation Short":"Reversal Long":S.strike<n?"Continuation Long":"Reversal Short";return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:P,children:e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20, 22, 35, 0.98) 0%, rgba(15, 17, 28, 0.99) 100%)",borderRadius:16,width:560,maxWidth:"90vw",maxHeight:"85vh",overflow:"auto",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},onClick:bt=>bt.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("span",{style:{fontSize:32,fontWeight:700,color:S.type==="PUT"?d.cyan:d.magenta,fontFamily:"'JetBrains Mono', monospace"},children:S.strike}),e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:S.type==="PUT"?d.cyan:d.magenta},children:[S.type," ",S.wallType]}),e.jsx("span",{style:{padding:"4px 10px",background:S.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${S.role.includes("SUPPORT")?d.green:d.red}`,borderRadius:4,fontSize:10,fontWeight:600,color:S.role.includes("SUPPORT")?d.green:d.red},children:S.role.includes("SUPPORT")?"POTENTIAL SUPPORT":"POTENTIAL RESISTANCE"})]}),e.jsxs("div",{style:{fontSize:11,color:d.textMuted},children:[e.jsx("span",{style:{color:qe?d.red:d.green},children:qe?"NEGATIVE GAMMA":"POSITIVE GAMMA"}),e.jsx("span",{style:{margin:"0 8px"},children:"|"}),"ZG Dist: ",Fe>0?"+":"",Fe]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:d.textMuted,marginBottom:4},children:"DISTANCE FROM SPOT"}),e.jsxs("div",{style:{fontSize:28,fontWeight:600,color:S.distance>0?d.green:d.red},children:[S.distance>0?"+":"",S.distance,e.jsx("span",{style:{fontSize:14,color:d.textMuted,marginLeft:4},children:"pts"})]}),e.jsx("button",{onClick:P,style:{position:"absolute",top:16,right:16,background:"transparent",border:"none",color:d.textMuted,fontSize:24,cursor:"pointer",padding:4},children:""})]})]}),e.jsxs("div",{style:{padding:24},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{fontSize:10,color:d.textMuted,letterSpacing:"0.1em",marginBottom:4},children:" REGIME EXPECTED REACTION"}),e.jsx("div",{style:{fontSize:24,fontWeight:600,color:Le.includes("Long")?d.cyan:d.magenta,fontFamily:"'JetBrains Mono', monospace"},children:Le})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:d.cyan,letterSpacing:"0.1em",textAlign:"center",marginBottom:16},children:"DEALER POSITIONING & GREEKS"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:d.textMuted},children:"TOT GEX PROFILE"}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,color:S.gex<0?d.magenta:d.cyan},children:[(S.gex*1e3).toFixed(1),"M"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{width:`${Math.min(Math.abs(S.gex)*100,90)}%`,height:"100%",background:S.gex<0?"linear-gradient(90deg, rgba(236,72,153,0.8), rgba(236,72,153,0.4))":"linear-gradient(90deg, rgba(34,211,238,0.8), rgba(34,211,238,0.4))",borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:16},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:d.textMuted,marginBottom:4},children:"SPEED"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:d.text},children:[(Math.abs(S.gex)*60).toFixed(1),"K"]})]}),e.jsxs("div",{style:{textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:9,color:d.textMuted,marginBottom:4},children:"VANNA"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:d.cyan},children:[(Math.abs(S.gex)*25).toFixed(1),"M"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:d.textMuted,marginBottom:4},children:"CHARM"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:d.magenta},children:[(S.gex*-500).toFixed(1),"M"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:d.textMuted,letterSpacing:"0.1em",textAlign:"center",marginBottom:12},children:"HOLD / BREAK PROBABILITIES"}),e.jsxs("div",{style:{display:"flex",height:28,borderRadius:6,overflow:"hidden",fontSize:11,fontWeight:600},children:[e.jsxs("div",{style:{width:`${S.holdPct}%`,background:d.green,display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:["Hold ",S.holdPct,"%"]}),e.jsxs("div",{style:{width:`${S.breakPct}%`,background:d.red,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:["Break ",S.breakPct,"%"]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,borderLeft:`3px solid ${d.amber}`},children:[e.jsxs("div",{style:{fontSize:12,color:d.text,marginBottom:8},children:[e.jsx("strong",{children:"High Sensitivity."})," Dealer hedging activity increases rapidly here, creating potential for sharp reactions or rejection."]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(245,158,11,0.2)",border:`1px solid ${d.amber}`,borderRadius:4,fontSize:9,fontWeight:600,color:d.amber},children:"REACTIVE ZONE"})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:d.textMuted,letterSpacing:"0.1em",marginBottom:16},children:"STRUCTURAL CONTEXT"}),O&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(239,68,68,0.2)",border:`1px solid ${d.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:d.red},children:"IF BREAK"}),e.jsxs("span",{style:{fontSize:12,color:d.text},children:["Next: ",O.type," ",O.wallType," (@ ",O.strike,")"]})]}),ke&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${d.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:d.green},children:"IF HOLD"}),e.jsxs("span",{style:{fontSize:12,color:d.text},children:["Target: ",ke.type," ",ke.wallType," (@ ",ke.strike,")"]})]})]})]})]})})},R=({label:S,value:P,color:O=d.textMuted})=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 16px",background:"rgba(40, 40, 50, 0.4)",borderRadius:6,marginBottom:8},children:e.jsxs("span",{style:{fontSize:12,color:O,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.1em"},children:[" ",S,": ",P," "]})}),$=()=>e.jsxs("div",{style:{background:"linear-gradient(90deg, rgba(34,211,238,0.1) 0%, rgba(34,211,238,0.2) 50%, rgba(34,211,238,0.1) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",border:"1px solid rgba(34,211,238,0.3)"},children:[e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:d.cyan,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" ZERO GAMMA FLIP: ",M.toFixed(2)," "]}),e.jsx("div",{style:{marginTop:4},children:e.jsxs("span",{style:{fontSize:10,color:d.textMuted},children:["Above: Dealers dampen volatility (",e.jsx("span",{style:{color:d.cyan},children:"Reversal Playbook"}),")"]})}),e.jsx("div",{style:{marginTop:2},children:e.jsxs("span",{style:{fontSize:10,color:d.textMuted},children:["Below: Dealers amplify volatility (",e.jsx("span",{style:{color:d.amber},children:"Trend/Breakout Playbook"}),")"]})})]}),ae=()=>e.jsx("div",{style:{background:"linear-gradient(90deg, rgba(234,179,8,0.2) 0%, rgba(234,179,8,0.4) 50%, rgba(234,179,8,0.2) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",boxShadow:"0 0 20px rgba(234,179,8,0.3)"},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:"#eab308",fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" CURRENT SPOT: ",(n==null?void 0:n.toFixed(2))||""," "]})}),q=({pts:S})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"8px 16px",background:"rgba(0,0,0,0.4)",borderRadius:6,margin:"8px 0"},children:[e.jsx("span",{style:{fontSize:14,color:d.textMuted,letterSpacing:"0.15em"},children:"LOW DENSITY"}),e.jsx("span",{style:{width:60,height:1,background:d.textMuted}}),e.jsxs("span",{style:{fontSize:12,color:d.textMuted},children:[S," PTS"]}),e.jsx("span",{style:{fontSize:12,color:d.amber,fontWeight:600},children:"FAST LANE"})]}),v=({holdPct:S,breakPct:P,size:O="normal"})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsxs("span",{style:{fontSize:O==="small"?9:11,color:d.green},children:["H:",S,"%"]}),e.jsx("div",{style:{flex:1,height:O==="small"?4:6,background:d.red,borderRadius:3,overflow:"hidden",display:"flex"},children:e.jsx("div",{style:{width:`${S}%`,height:"100%",background:d.green}})}),e.jsxs("span",{style:{fontSize:O==="small"?9:11,color:d.red},children:["B:",P,"%"]})]}),u=({value:S,maxVal:P=1e3})=>{const O=Math.min(Math.abs(S)/P*100,100),ke=S>0;return e.jsx("div",{style:{width:"100%",height:6,background:"rgba(255,255,255,0.1)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${O}%`,height:"100%",background:ke?"linear-gradient(90deg, #22c55e, #4ade80)":"linear-gradient(90deg, #22d3ee, #67e8f9)",borderRadius:3}})})},I=()=>e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:8},children:["LEVEL","TOT. GEX PROFILE","ROLE","CONFLUENCES","WARNING","HOLD / BREAK PROB."].map(S=>e.jsx("span",{style:{fontSize:10,color:d.textMuted,fontWeight:600,letterSpacing:"0.05em"},children:S},S))}),e.jsx(R,{label:"EM HIGH",value:Me.toFixed(2)}),e.jsx(R,{label:"VOL BAND HIGH",value:b.toFixed(2)}),G.filter(S=>S.strike>n).map((S,P)=>{const O=l===`above-${P}`;return e.jsxs("div",{onMouseEnter:()=>a(`above-${P}`),onMouseLeave:()=>a(null),onClick:()=>p(S),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:O?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${S.type==="CALL"?d.green:d.magenta}`,transform:O?"translateX(4px)":"none",boxShadow:O?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[O&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:d.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:S.type==="CALL"?d.green:d.magenta},children:S.strike}),e.jsxs("div",{style:{fontSize:10,color:S.type==="CALL"?d.green:d.magenta},children:[S.type," WALL"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:d.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:d.text,marginBottom:4},children:[(S.gex*1e3).toFixed(1),"M"]}),e.jsx(u,{value:S.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:S.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${S.role.includes("SUPPORT")?d.green:d.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:S.role.includes("SUPPORT")?d.green:d.red},children:S.role})}),e.jsx("div",{style:{fontSize:10,color:d.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${d.amber}40`,borderRadius:4,color:d.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(v,{holdPct:S.holdPct,breakPct:S.breakPct})]},P)}),e.jsx($,{}),e.jsx(R,{label:"VOL BAND LOW",value:C.toFixed(2)}),e.jsx(R,{label:"MAX PAIN",value:k.toFixed(2)}),G.filter(S=>S.strike<=n).slice(0,3).map((S,P)=>{const O=l===`below-${P}`;return e.jsxs("div",{onMouseEnter:()=>a(`below-${P}`),onMouseLeave:()=>a(null),onClick:()=>p(S),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:O?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${d.cyan}`,transform:O?"translateX(4px)":"none",boxShadow:O?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[O&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:d.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:d.cyan},children:S.strike}),e.jsx("div",{style:{fontSize:10,color:d.cyan},children:"PUT WALL"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:d.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:d.text,marginBottom:4},children:[(S.gex*1e3).toFixed(1),"M"]}),e.jsx(u,{value:S.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${d.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:d.green},children:"POT. SUPPORT"})}),e.jsx("div",{style:{fontSize:10,color:d.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${d.amber}40`,borderRadius:4,color:d.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(v,{holdPct:S.holdPct,breakPct:S.breakPct})]},P)}),e.jsx(ae,{}),e.jsx(R,{label:"EM LOW",value:x.toFixed(2)})]}),_e=()=>e.jsxs("div",{children:[e.jsx(R,{label:"EM HIGH",value:Me.toFixed(2)}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:G.filter(S=>S.strike>n).slice(0,3).map((S,P)=>e.jsxs("div",{onClick:()=>p(S),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:S.type==="CALL"?d.green:d.magenta},children:S.strike}),e.jsxs("div",{style:{fontSize:10,color:d.cyan},children:[S.type," WALL"]})]}),e.jsx("span",{style:{padding:"4px 8px",background:S.role.includes("RESISTANCE")?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",border:`1px solid ${S.role.includes("RESISTANCE")?d.red:d.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:S.role.includes("RESISTANCE")?d.red:d.green},children:S.role})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:d.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:10,color:d.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:d.text},children:[S.gex.toFixed(1),"M"]})]}),e.jsx(u,{value:S.gex*100})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:d.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(v,{holdPct:S.holdPct,breakPct:S.breakPct,size:"small"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:d.cyan},children:"BREAK"}),e.jsx("span",{style:{color:d.textMuted},children:"Open Space"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginTop:4},children:[e.jsx("span",{style:{color:d.green},children:"HOLD"}),e.jsx("span",{style:{color:d.textMuted},children:"Hold"})]})]})]},P))}),e.jsx($,{}),e.jsx(ae,{}),e.jsx(q,{pts:42}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:G.filter(S=>S.strike<=n).slice(0,3).map((S,P)=>e.jsxs("div",{onClick:()=>p(S),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:d.cyan},children:S.strike}),e.jsx("div",{style:{fontSize:10,color:d.cyan},children:"PUT WALL"})]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${d.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:d.green},children:"POT. SUPPORT"})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:d.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:10,color:d.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:d.text},children:[S.gex.toFixed(1),"M"]})]}),e.jsx(u,{value:S.gex*100})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:d.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(v,{holdPct:S.holdPct,breakPct:S.breakPct,size:"small"})]})]},P))})]}),E=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,padding:"12px 16px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:d.textMuted}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:d.textMuted},children:"FIELD"}),e.jsx("div",{style:{fontSize:12,color:d.text,fontWeight:600},children:"NEUTRAL"})]})]}),e.jsx("span",{style:{padding:"6px 16px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:12,color:d.text},children:"WAIT"}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:d.textMuted},children:"MID"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:40,height:4,background:d.green,borderRadius:2}}),e.jsx("div",{style:{width:20,height:4,background:d.red,borderRadius:2}}),e.jsx("span",{style:{fontSize:11,color:d.text},children:"67%"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:11,color:d.purple},children:""}),e.jsx("span",{style:{fontSize:10,color:d.text},children:"QUANTUM FIELD"}),e.jsx("span",{style:{padding:"2px 6px",background:d.cyan,borderRadius:4,fontSize:8,color:"#000",fontWeight:600},children:"BETA"})]}),["EXPANDED","NAV","BOUNDS"].map(S=>e.jsx("span",{style:{padding:"4px 12px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:10,color:d.text},children:S},S)),e.jsxs("div",{style:{marginLeft:"auto",fontSize:11,color:d.textMuted},children:["LEVELS: ",o," | SPOT: ",e.jsx("span",{style:{color:d.amber},children:n==null?void 0:n.toFixed(2)})]})]}),G.slice(0,o).map((S,P)=>{const O=S.strike>n,ke=Math.abs(S.strike-n)<10;return e.jsxs("div",{children:[ke&&O&&e.jsx(ae,{}),e.jsxs("div",{onClick:()=>p(S),style:{background:`linear-gradient(90deg, rgba(139,92,246,${.1+Math.abs(S.gex)*.05}) 0%, rgba(139,92,246,${.2+Math.abs(S.gex)*.1}) 50%, rgba(139,92,246,${.1+Math.abs(S.gex)*.05}) 100%)`,padding:"20px 24px",marginBottom:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("div",{style:{width:4,height:30,background:S.type==="CALL"?d.green:d.cyan,borderRadius:2}}),e.jsx("span",{style:{fontSize:32,fontWeight:700,color:d.cyan,fontFamily:"'JetBrains Mono', monospace"},children:S.strike})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flex:1,justifyContent:"center"},children:[e.jsxs("span",{style:{fontSize:11,color:S.type==="CALL"?d.green:d.magenta},children:[S.type," | WALL"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(34,197,94,0.2)",border:`1px solid ${d.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:d.green},children:["POT. ","SUPPORT"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(255,255,255,0.1)",borderRadius:4,fontSize:9,color:d.textMuted},children:[Math.abs(S.distance),"pt ",S.distance>0?"above":"below"," spot"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"2px 8px",background:"rgba(0,0,0,0.3)",borderRadius:4},children:[e.jsxs("span",{style:{fontSize:9,color:d.green},children:["H:",S.holdPct,"%"]}),e.jsx("div",{style:{width:30,height:4,background:d.green,borderRadius:2}}),e.jsx("div",{style:{width:15,height:4,background:d.red,borderRadius:2}}),e.jsxs("span",{style:{fontSize:9,color:d.red},children:["B:",S.breakPct,"%"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:28,fontWeight:600,color:d.text},children:Math.abs(S.gex*100).toFixed(1)}),e.jsx("span",{style:{fontSize:14,color:d.textMuted},children:"M"}),e.jsxs("div",{style:{fontSize:10,color:d.textMuted},children:["18PT | L ",S.fieldHigh.toFixed(1)," - L ",S.fieldLow.toFixed(1)]})]})]}),P===2&&e.jsx(q,{pts:42})]},P)})]});Math.max(...w.map(S=>Math.abs(S.gex||0)),.01);const[oe,Xe]=L.useState(null),[de,Be]=L.useState({x:0,y:0});return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(11, 17, 32, 0.98) 0%, rgba(8, 12, 24, 0.99) 100%)",borderRadius:16,border:`1px solid ${d.border}`,padding:24,fontFamily:"'Inter', -apple-system, sans-serif",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h3",{style:{margin:0,color:d.text,fontSize:18,fontWeight:600},children:"GEX Profile"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:d.cyan,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:10,color:d.cyan,letterSpacing:"0.05em"},children:"LIVE"})]})]}),e.jsx("div",{style:{padding:"6px 12px",borderRadius:6,background:y==="POSITIVE"?"rgba(34,197,94,0.15)":y==="NEGATIVE"?"rgba(239,68,68,0.15)":"rgba(161,161,170,0.15)",border:`1px solid ${y==="POSITIVE"?d.green:y==="NEGATIVE"?d.red:d.textMuted}40`},children:e.jsxs("span",{style:{color:y==="POSITIVE"?d.green:y==="NEGATIVE"?d.red:d.textMuted,fontSize:12,fontWeight:600},children:[y," GEX: ",h>0?"+":"",h.toFixed(3),"B"]})})]}),e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.95)",borderRadius:12,padding:"16px 0",marginBottom:24,position:"relative",border:"1px solid rgba(255,255,255,0.05)",cursor:oe?"none":"default"},children:[e.jsx("div",{style:{position:"relative",display:"flex"},children:(()=>{const S=M||n||4600,ke=[...w].filter(ge=>Math.abs(ge.strike-S)<=300).sort((ge,Ge)=>Math.abs(ge.strike-S)-Math.abs(Ge.strike-S)).slice(0,40).sort((ge,Ge)=>Ge.strike-ge.strike),Fe=Math.max(...ke.map(ge=>Math.abs(ge.gex||0)),.01);n&&ke.reduce((ge,Ge)=>Math.abs(Ge.strike-n)<Math.abs(ge.strike-n)?Ge:ge,ke[0]),M&&ke.reduce((ge,Ge)=>Math.abs(Ge.strike-M)<Math.abs(ge.strike-M)?Ge:ge,ke[0]);const qe=ke.map(ge=>ge.strike),Le=Math.min(...qe),bt=Math.max(...qe),Oe=Math.ceil((bt+20)/10)*10,Q=Math.floor((Le-20)/10)*10,ue=Oe-Q,he=900,ye=[];for(let ge=Oe;ge>=Q;ge-=10)ye.push(ge);return e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsx("div",{style:{width:55,height:he,position:"relative",borderRight:"1px solid rgba(255,255,255,0.1)",marginRight:8,flexShrink:0},children:ye.map((ge,Ge)=>{const vt=(Oe-ge)/ue*he;return e.jsx("div",{style:{position:"absolute",top:vt-6,right:8,fontSize:10,fontFamily:"'JetBrains Mono', monospace",color:"rgba(148,163,184,0.5)"},children:ge},ge)})}),e.jsxs("div",{style:{flex:1,height:he,position:"relative"},children:[ye.map(ge=>{const Ge=(Oe-ge)/ue*he;return e.jsx("div",{style:{position:"absolute",top:Ge,left:0,right:0,height:1,background:"rgba(255,255,255,0.04)",pointerEvents:"none"}},`grid-${ge}`)}),n&&e.jsx("div",{style:{position:"absolute",top:(Oe-n)/ue*he,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(132,204,22,0.8) 0%, rgba(132,204,22,0.2) 100%)",zIndex:5},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(132,204,22,0.2)",border:"1px solid rgba(132,204,22,0.4)",padding:"2px 6px",borderRadius:3,color:"#84cc16",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["SPOT ",n==null?void 0:n.toFixed(2)]})}),M&&Math.abs(M-n)>5&&e.jsx("div",{style:{position:"absolute",top:(Oe-M)/ue*he,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(34,211,238,0.6) 0%, rgba(34,211,238,0.1) 100%)",zIndex:4},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(34,211,238,0.15)",border:"1px solid rgba(34,211,238,0.35)",padding:"2px 6px",borderRadius:3,color:"#22d3ee",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["ZG ",M==null?void 0:M.toFixed(0)]})}),ke.map((ge,Ge)=>{const vt=(ge.gex||0)<0,lt=Math.min(Math.abs(ge.gex||0)/Fe*60,60),Ye=(oe==null?void 0:oe.strike)===ge.strike,N=Math.abs(ge.gex||0),Xt=N>=1?`${N.toFixed(1)}B`:`${(N*1e3).toFixed(0)}M`,an=N>Fe*.25,fn=n?Math.abs(Math.round(ge.strike-n)):0,at=ge.call_oi||0,Dt=ge.put_oi||0,pe=at+Dt||1,le=Math.round(at/pe*100),nt=100-le,Ht=vt?"#22d3ee":"#f472b6",ve=(Oe-ge.strike)/ue*he;return e.jsxs("div",{onMouseEnter:je=>{Be({x:je.clientX,y:je.clientY}),Xe({strike:ge.strike,gex:ge.gex,isCall:vt,gexLabel:Xt,isWall:an,callPct:le,putPct:nt,callOI:at,putOI:Dt,distance:n?Math.round(ge.strike-n):0})},onMouseMove:je=>Be({x:je.clientX,y:je.clientY}),onMouseLeave:()=>Xe(null),style:{position:"absolute",top:ve-12,left:0,right:0,display:"flex",alignItems:"center",height:24,cursor:oe?"none":"pointer",zIndex:Ye?10:1},children:[e.jsx("div",{style:{width:`${lt}%`,minWidth:lt>3?10:0,height:Ye?28:22,background:vt?"rgba(34, 211, 238, 0.5)":"rgba(244, 114, 182, 0.5)",backdropFilter:"blur(4px)",borderRadius:"3px 8px 8px 3px",border:vt?"1px solid rgba(34, 211, 238, 0.3)":"1px solid rgba(244, 114, 182, 0.3)",boxShadow:Ye?vt?"0 0 12px rgba(34,211,238,0.7), 0 0 30px rgba(34,211,238,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 0 12px rgba(244,114,182,0.7), 0 0 30px rgba(244,114,182,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 2px 6px rgba(0,0,0,0.25)",transition:"all 0.15s ease-out",transform:Ye?"scale(1.02)":"none",flexShrink:0}}),e.jsxs("div",{style:{marginLeft:8,display:"flex",alignItems:"center",gap:4,fontSize:10,fontFamily:"'Inter', sans-serif",whiteSpace:"nowrap"},children:[e.jsx("span",{style:{color:"rgba(148,163,184,0.6)"},children:""}),e.jsx("span",{style:{color:"rgba(255,255,255,0.85)",fontWeight:500},children:an?"WALL":"LEVEL"}),e.jsxs("span",{style:{color:Ht,fontWeight:600,background:vt?"rgba(34,211,238,0.12)":"rgba(244,114,182,0.12)",padding:"1px 5px",borderRadius:3},children:["(",vt?"CALL":"PUT",")"]}),e.jsx("span",{style:{color:"#fff",fontWeight:700,marginLeft:2},children:Xt}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.5)",fontSize:9},children:["[",fn,"pts]"]}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.4)",fontSize:9},children:["C:",le,"% P:",nt,"%"]})]})]},Ge)})]})]})})()}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:24,marginTop:14,paddingTop:10,paddingLeft:70,borderTop:"1px solid rgba(255,255,255,0.04)",fontSize:9,color:"rgba(148,163,184,0.5)",fontFamily:"'Inter', sans-serif"},children:[e.jsx("span",{children:" MAGNET (attractor)"}),e.jsx("span",{children:" WALL (barrier)"}),e.jsx("span",{children:"Glow = Field Width"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{margin:0,color:d.text,fontSize:18,fontWeight:600},children:"Strategic Levels"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(255,255,255,0.05)",borderRadius:6},children:[e.jsx("span",{style:{fontSize:11,color:d.textMuted},children:"LEVELS"}),e.jsx("select",{value:o,onChange:S=>s(Number(S.target.value)),style:{background:"transparent",border:"none",color:d.text,fontSize:12,cursor:"pointer"},children:[5,10,15,20].map(S=>e.jsx("option",{value:S,children:S},S))})]}),e.jsx("div",{style:{display:"flex",background:"rgba(255,255,255,0.05)",borderRadius:6,overflow:"hidden"},children:[{id:"table",icon:""},{id:"card",icon:""},{id:"quantum",icon:""}].map(S=>e.jsx("button",{onClick:()=>i(S.id),style:{padding:"8px 12px",background:r===S.id?d.purple:"transparent",border:"none",color:r===S.id?"#fff":d.textMuted,fontSize:14,cursor:"pointer",transition:"all 0.2s ease"},children:S.icon},S.id))})]})]}),r==="table"&&e.jsx(I,{}),r==="card"&&e.jsx(_e,{}),r==="quantum"&&e.jsx(E,{}),c&&e.jsx(m,{level:c,onClose:()=>p(null)}),oe&&(()=>{var bt;const S=oe.isCall?"#22d3ee":"#f472b6",P=oe.isCall?"rgba(34,211,238,0.1)":"rgba(244,114,182,0.1)",O=oe.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)",ke=oe.isCall?71:48,Fe=100-ke;let qe=de.x+8,Le=de.y-8;return qe+240>window.innerWidth-10&&(qe=de.x-248),Le<10&&(Le=10),Le+340>window.innerHeight-10&&(Le=window.innerHeight-350),e.jsxs("div",{style:{position:"fixed",left:qe,top:Le,width:240,background:"rgba(15, 23, 42, 0.98)",border:`1px solid ${O}`,borderRadius:12,padding:16,zIndex:99999,pointerEvents:"none",boxShadow:`0 0 20px ${oe.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)"}, 0 8px 32px rgba(0,0,0,0.5)`,fontFamily:"'Inter', sans-serif",transform:"translateZ(0)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[e.jsx("span",{style:{fontSize:30,fontWeight:700,color:S,fontFamily:"'JetBrains Mono', monospace"},children:(bt=oe.strike)==null?void 0:bt.toFixed(0)}),e.jsxs("span",{style:{fontSize:11,fontWeight:600,color:S,background:P,padding:"4px 10px",borderRadius:5,border:`1px solid ${O}`},children:[" ",oe.isWall?"WALL":"LEVEL"," (",oe.isCall?"CALL":"PUT",")"]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.6)",marginBottom:5},children:[e.jsx("span",{children:"OPEN INTEREST"}),e.jsx("span",{style:{color:"#e2e8f0"},children:((oe.callOI||0)+(oe.putOI||0)).toLocaleString()})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsxs("span",{children:["C: ",(oe.callOI||0).toLocaleString()]}),e.jsxs("span",{children:["P: ",(oe.putOI||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${oe.callPct}%`,background:"#22d3ee"}}),e.jsx("div",{style:{width:`${oe.putPct}%`,background:"#f472b6"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:9,marginTop:3},children:[e.jsxs("span",{style:{color:"#22d3ee"},children:[oe.callPct,"%"]}),e.jsxs("span",{style:{color:"#f472b6"},children:[oe.putPct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",border:"1px solid rgba(139,92,246,0.2)",borderRadius:8,padding:10,marginBottom:14},children:[e.jsx("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:5},children:"QUANTUM FIELD"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#e2e8f0"},children:[e.jsxs("span",{children:["L ",(oe.strike+9).toFixed(0)]}),e.jsx("span",{style:{color:"rgba(148,163,184,0.4)"},children:""}),e.jsxs("span",{children:[(oe.strike-9).toFixed(0)," L"]})]}),e.jsx("div",{style:{fontSize:11,color:"#a855f7",textAlign:"center",marginTop:5},children:"18.4 pts influence"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:14},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"MASS"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:oe.gexLabel})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"EFFECTIVE"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:oe.gexLabel})]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"INTEGRITY"}),e.jsx("span",{style:{color:"#e2e8f0"},children:"100%"})]}),e.jsx("div",{style:{height:5,background:"rgba(0,0,0,0.4)",borderRadius:3},children:e.jsx("div",{style:{width:"100%",height:"100%",background:S,borderRadius:3}})})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"HOLD / BREAK"}),e.jsxs("span",{children:["H:",ke,"% B:",Fe,"%"]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${ke}%`,background:"#22c55e"}}),e.jsx("div",{style:{width:`${Fe}%`,background:"#ef4444"}})]})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:12,color:"rgba(148,163,184,0.6)",paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[oe.distance>0?"+":"",oe.distance," pts (",(Math.abs(oe.distance)/(n||1)*100).toFixed(2),"%)"]})]})})()]})},ug=()=>{const[t,n]=L.useState(new Date),[r,i]=L.useState(null);L.useEffect(()=>{const c=setInterval(()=>n(new Date),1e3);return()=>clearInterval(c)},[]);const o=[{id:"japan",name:"Japan",time:"19:00-20:00",color:"#9370DB",start:1900,end:2e3},{id:"china",name:"China",time:"20:00-23:00",color:"#F472B6",start:2e3,end:2300},{id:"deadzone",name:"Deadzone",time:"02:00-03:00",color:"#6B7280",start:200,end:300},{id:"london",name:"London",time:"03:00-06:00",color:"#3B82F6",start:300,end:600},{id:"us_ib",name:"US IB",time:"08:20-09:30",color:"#F59E0B",start:820,end:930},{id:"ny_1h",name:"NY 1H",time:"09:30-10:30",color:"#10B981",start:930,end:1030},{id:"ny_2h",name:"NY 2H",time:"10:30-11:30",color:"#06B6D4",start:1030,end:1130},{id:"lunch",name:"Lunch",time:"11:30-13:30",color:"#8B5CF6",start:1130,end:1330},{id:"ny_pm",name:"NY PM",time:"13:30-16:00",color:"#EF4444",start:1330,end:1600}],l=(()=>{const c=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),p=c.getHours(),w=c.getMinutes(),y=p*100+w;return y>=1900&&y<2e3?"japan":y>=2e3&&y<2300?"china":y>=200&&y<300?"deadzone":y>=300&&y<600?"london":y>=820&&y<930?"us_ib":y>=930&&y<1030?"ny_1h":y>=1030&&y<1130?"ny_2h":y>=1130&&y<1330?"lunch":y>=1330&&y<1600?"ny_pm":null})(),a=l!==null;return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",marginBottom:16,padding:"24px 16px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative",width:"100%"},children:[e.jsx("div",{style:{position:"absolute",top:60,left:50,right:50,height:1,background:"rgba(255,255,255,0.1)",zIndex:0}}),o.map((c,p)=>{const w=c.id===l,y=r===c.id,h=(()=>{if(!a)return!1;const k=o.findIndex(G=>G.id===l);return p<k})(),M=90;return e.jsx("div",{onMouseEnter:()=>i(c.id),onMouseLeave:()=>i(null),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",zIndex:y?10:1,cursor:"pointer",minWidth:80,height:120},children:e.jsxs("div",{style:{width:M,height:M,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,background:w?"linear-gradient(135deg, rgba(20,20,28,1) 0%, rgba(15,15,22,1) 100%)":y?"linear-gradient(135deg, rgba(30,30,40,1) 0%, rgba(25,25,35,1) 100%)":"rgb(20, 20, 28)",border:w?`2px solid ${c.color}`:y?`2px solid ${c.color}80`:"1px solid rgba(255,255,255,0.08)",opacity:a?h?.5:1:.7,transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:w?`0 0 25px ${c.color}50, 0 8px 32px rgba(0,0,0,0.4)`:y?`0 0 30px ${c.color}40, 0 12px 40px rgba(0,0,0,0.5)`:"0 4px 12px rgba(0,0,0,0.3)",position:"relative",transform:y?"scale(1.2) translateY(-5px)":"scale(1) translateY(0)",zIndex:y?5:1},children:[e.jsx("div",{style:{width:y?12:10,height:y?12:10,borderRadius:"50%",background:c.color,boxShadow:w||y?`0 0 12px ${c.color}`:"none",animation:w?"sessionDotPulse 1.5s ease-in-out infinite":"none",transition:"all 0.3s ease"}}),e.jsx("span",{style:{fontSize:y?16:14,color:w?c.color:y?"#fff":a?"#e5e5e5":"#888",fontWeight:600,textAlign:"center",lineHeight:1.1,transition:"all 0.3s ease",textShadow:y?`0 0 10px ${c.color}60`:"none"},children:c.name}),e.jsx("span",{style:{fontSize:y?9:8,color:w||y?c.color:a?"#666":"#555",fontFamily:"'JetBrains Mono', monospace",opacity:.9,transition:"all 0.3s ease"},children:c.time}),w&&a&&e.jsx("div",{style:{position:"absolute",bottom:-10,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000",fontSize:8,fontWeight:700,padding:"3px 10px",borderRadius:10,letterSpacing:"0.05em",boxShadow:"0 4px 12px rgba(0,255,136,0.6)",animation:"liveBadgePulse 2s ease-in-out infinite"},children:"LIVE"})]})},c.id)})]})}),e.jsx("style",{children:`
        @keyframes sessionDotPulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.7; transform: scale(1.2); }
        }
        @keyframes liveBadgePulse {
          0%, 100% { box-shadow: 0 4px 12px rgba(0,255,136,0.6); }
          50% { box-shadow: 0 4px 20px rgba(0,255,136,0.9); }
        }
      `})]})},hg=({gexData:t,currentPrice:n})=>{const[r,i]=L.useState(!1),o=(t==null?void 0:t.gamma_regime)||"UNKNOWN",s=(t==null?void 0:t.total_gex)||0,l=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0;t!=null&&t.hvl;const a=n?(n-l).toFixed(1):0,c=n>l,p=54.09,w=17.73,y=94.8,h=85,M=1.75,k={green:"#22c55e",red:"#ef4444",cyan:"#22d3ee",purple:"#a855f7",amber:"#f59e0b",text:"#f4f4f5",textMuted:"#71717a"};return r?e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:"16px 24px",marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:k.purple,fontSize:16,fontWeight:600},children:"Market Pulse"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:600,background:o==="NEGATIVE"?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",color:o==="NEGATIVE"?k.red:k.green},children:o})]}),e.jsx("button",{onClick:()=>i(!1),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:k.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"+ EXPAND"})]}):e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:k.purple,fontSize:18,fontWeight:600},children:"Market Pulse"})]}),e.jsx("button",{onClick:()=>i(!0),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:k.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:" COLLAPSE"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",gap:24},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:k.textMuted,letterSpacing:"0.1em",marginBottom:8},children:"GAMMA REGIME"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:o==="NEGATIVE"?k.red:k.green,boxShadow:`0 0 10px ${o==="NEGATIVE"?k.red:k.green}`}}),e.jsxs("span",{style:{fontSize:18,fontWeight:700,color:o==="NEGATIVE"?k.red:k.green,letterSpacing:"0.05em"},children:["CONFIRMED ",o]})]}),e.jsxs("div",{style:{fontSize:12,color:k.textMuted,marginBottom:16},children:["Net GEX: ",e.jsxs("span",{style:{color:s<0?k.red:k.green,fontWeight:600},children:[s.toFixed(2),"B"]})]}),e.jsx("div",{style:{fontSize:10,color:k.textMuted,letterSpacing:"0.1em",marginBottom:8,marginTop:24},children:"VOLATILITY REGIME"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:k.text,marginBottom:4},children:o==="NEGATIVE"?"EXPANSION":"CONTRACTION"}),e.jsxs("div",{style:{fontSize:12,color:k.cyan},children:["GVI Magnitude: ",e.jsx("span",{style:{fontWeight:600},children:M})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginBottom:16,fontSize:13,color:k.textMuted,lineHeight:1.6},children:["Spot price is ",e.jsxs("span",{style:{color:k.text,fontWeight:600},children:[Math.abs(a)," points ",c?"above":"below"," Zero Gamma"]}),".",o==="NEGATIVE"?e.jsxs(e.Fragment,{children:[" Dealers hedge against explosive moves by amplifying volatility and reinforcing trend continuation. Requires ",e.jsx("span",{style:{color:k.amber},children:"extreme caution"})," around breakouts."]}):e.jsxs(e.Fragment,{children:[" Dealers hedge by dampening volatility and providing mean reversion. Expect ",e.jsx("span",{style:{color:k.green},children:"range-bound"})," price action."]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:[{label:"ATR",value:p.toFixed(2)},{label:"VIX",value:w.toFixed(2)},{label:"EXP. MOVE",value:y.toFixed(1)}].map(({label:G,value:Me})=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:k.textMuted,marginBottom:6},children:G}),e.jsx("div",{style:{fontSize:20,fontWeight:600,color:k.text},children:Me})]},G))}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:k.textMuted},children:"REALIZED VS EXPECTED RANGE"}),e.jsxs("span",{style:{fontSize:11,color:k.text},children:[h," / ",y.toFixed(1)," (",Math.round(h/y*100),"%)"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(h/y*100,100)}%`,height:"100%",background:k.amber,borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:k.textMuted},children:"Sentiment (Skew):"}),e.jsx("span",{style:{color:k.text},children:"Neutral (-0.01)"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:k.textMuted},children:"Stability (Speed):"}),e.jsx("span",{style:{color:k.text},children:"Normal"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:k.textMuted},children:"Vanna:"}),e.jsx("span",{style:{color:k.cyan},children:"Vol Support"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:k.textMuted},children:"Charm:"}),e.jsx("span",{style:{color:k.text},children:"Price Pressure"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:k.textMuted},children:"Magnete Charm:"}),e.jsxs("span",{style:{color:k.purple},children:["Pressione (",l.toFixed(2),")"]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,background:"rgba(34,197,94,0.1)",borderRadius:8,marginTop:20,border:"1px solid rgba(34,197,94,0.3)"},children:[e.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:k.green,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:k.green,fontWeight:600,marginBottom:2},children:"VOLATILITY DIAGNOSIS"}),e.jsx("div",{style:{fontSize:12,color:k.textMuted},children:"Confirmation: The multi-factor analysis (Speed/Convexity) confirms the detected regime."})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"rgba(168,85,247,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,color:k.text,fontWeight:600},children:"AI Deep Analysis"}),e.jsx("div",{style:{fontSize:11,color:k.textMuted},children:"Market Structure & 0DTE Strategy"})]})]}),e.jsx("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)",border:"none",borderRadius:8,color:"#fff",fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:" VIEW ANALYSIS"})]})]})},Kt="https://backend-production-ea57.up.railway.app",la="https://backend-production-ea57.up.railway.app/redfolder",gg="18.5.2";console.log("Horizon v"+gg);const xg=L.createContext(null),Cf=L.createContext(null),yg=()=>L.useContext(Cf);L.createContext({isMobile:!1,isTablet:!1,screenWidth:1200});const Ri=()=>{const[t,n]=L.useState({width:typeof window<"u"?window.innerWidth:1200,height:typeof window<"u"?window.innerHeight:800});return L.useEffect(()=>{const r=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),{isMobile:t.width<768,isTablet:t.width>=768&&t.width<1024,isDesktop:t.width>=1024,screenWidth:t.width,screenHeight:t.height}},Tf={deltaThreshold:-2500,buyingImbalancePct:400,entryTiers:{tier1:25,tier2:40,tier3:35},targetTiers:{vwap:50,ibMid:35,ibHigh:15},filters:{grades:{A:!0,B:!0,C:!0},tiers:{1:!0,2:!0,3:!0},minR:-10},divergenceThreshold:0},mg=t=>{const n=[],r=new Date("2025-08-20"),i=new Date("2025-12-28");let o=12345;const s=()=>(o=(o*9301+49297)%233280,o/233280);let l=1,a=new Date(r);for(;a<=i;){if(s()<.35){const c=s()<.35?"A":s()<.65?"B":"C",p=s()<.25?1:s()<.65?2:3,w=["I","II","III"][p-1],y=c==="A"?.82:c==="B"?.71:.52,h=s()<y,M=h?s()<.5?"VWAP":s()<.7?"IB_MID":"IB_HIGH":"STOP_LOSS",k=Math.ceil(s()*8)+2,G=M==="STOP_LOSS"?-1:1.5+s()*2,x=3320+(a-r)/(1e3*60*60*24)*.5+(s()-.5)*40,b=Math.round(G*35*10*k);n.push({id:l++,date:a.toISOString().split("T")[0],entry:Math.round(x*100)/100,exit:Math.round((x+(h?G*3.5:-3.5))*100)/100,stop_loss:Math.round((x-3.5)*100)/100,pnl:b,r:Math.round(G*10)/10,grade:c,tier:p,tierRoman:w,exitReason:M,contracts:k,delta:-1500-Math.floor(s()*3500),buyingImbalance:250+Math.floor(s()*400),conditionsMet:c==="A"?6:c==="B"?5:4,levels:{ib_high:Math.round((x+15)*100)/100,ib_low:Math.round((x-10)*100)/100,ib_mid:Math.round((x+2.5)*100)/100,pdpoc:Math.round((x-5)*100)/100,vwap:Math.round((x+5)*100)/100,pd_high:Math.round((x+20)*100)/100,pd_low:Math.round((x-15)*100)/100}})}for(a.setDate(a.getDate()+1);a.getDay()===0||a.getDay()===6;)a.setDate(a.getDate()+1)}return n},bg=()=>{const[t,n]=L.useState({trades:null,stats:null,source:"loading"});return L.useEffect(()=>{(async()=>{try{const i=await fetch("/backtest_data.json");if(i.ok){const o=await i.json();if(o.trades&&o.trades.length>0){console.log(` Loaded ${o.trades.length} trades from ${o.dataSource||"backtest_data.json"}`),n({trades:o.trades,stats:o.stats,source:o.dataSource||"real"});return}}}catch{console.log("No backtest_data.json found")}console.log("Using generated mock data (run generate_backtest.py for real data)"),n({trades:null,stats:null,source:"mock"})})()},[]),t},vg=(t,n)=>{var A,m,R,$,ae,q;if(t.length===0)return{summary:{total_trades:0,winners:0,losers:0,win_rate:0,total_pnl:0,adjusted_pnl:0,gross_profit:0,gross_loss:0,profit_factor:0,avg_win:0,avg_loss:0,avg_r_multiple:0,max_drawdown:0,max_drawdown_pct:0,final_equity:1e6},yearly_pnl:[],weekly_pnl:[],exit_reasons:{VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0},grade_stats:{A:{trades:0,winners:0,pnl:0,win_rate:0},B:{trades:0,winners:0,pnl:0,win_rate:0},C:{trades:0,winners:0,pnl:0,win_rate:0}},tier_stats:{TIER_I:{trades:0,winners:0,pnl:0,win_rate:0},TIER_II:{trades:0,winners:0,pnl:0,win_rate:0},TIER_III:{trades:0,winners:0,pnl:0,win_rate:0}}};const r={1:(((A=n.entryTiers)==null?void 0:A.tier1)||25)/25,2:(((m=n.entryTiers)==null?void 0:m.tier2)||40)/40,3:(((R=n.entryTiers)==null?void 0:R.tier3)||35)/35},i={VWAP:((($=n.targetTiers)==null?void 0:$.vwap)||50)/50,IB_MID:(((ae=n.targetTiers)==null?void 0:ae.ibMid)||35)/35,IB_HIGH:(((q=n.targetTiers)==null?void 0:q.ibHigh)||15)/15,STOP_LOSS:1},o=t.map(v=>{const u=r[v.tier]||1,I=v.pnl>0&&i[v.exitReason]||1,_e=v.pnl*u*I;return{...v,adjustedPnl:_e,originalPnl:v.pnl}}),s=o.filter(v=>v.adjustedPnl>0),l=o.filter(v=>v.adjustedPnl<=0),a=s.reduce((v,u)=>v+u.adjustedPnl,0),c=Math.abs(l.reduce((v,u)=>v+u.adjustedPnl,0)),p=a-c,w=t.reduce((v,u)=>v+u.pnl,0);let y=1e6,h=y,M=0;o.forEach(v=>{y+=v.adjustedPnl,y>h&&(h=y);const u=h-y;u>M&&(M=u)});const k={};o.forEach(v=>{const u=parseInt(v.date.split("-")[0]);k[u]||(k[u]={year:u,trades:0,winners:0,losers:0,pnl:0}),k[u].trades++,v.adjustedPnl>0?k[u].winners++:k[u].losers++,k[u].pnl+=v.adjustedPnl});const G=Object.values(k).map(v=>({...v,win_rate:v.trades>0?v.winners/v.trades:0})).sort((v,u)=>v.year-u.year),Me={};o.forEach(v=>{const u=new Date(v.date),I=u.getFullYear(),_e=Math.ceil((u-new Date(I,0,1))/(7*24*60*60*1e3)),E=`${I}-W${_e}`;Me[E]||(Me[E]={week:_e,year:I,trades:0,pnl:0,winners:0}),Me[E].trades++,Me[E].pnl+=v.adjustedPnl,v.adjustedPnl>0&&Me[E].winners++});const x=Object.values(Me).map(v=>({...v,win_rate:v.trades>0?v.winners/v.trades:0})),b={VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0};t.forEach(v=>{b[v.exitReason]!==void 0&&b[v.exitReason]++});const C={A:{trades:0,winners:0,pnl:0},B:{trades:0,winners:0,pnl:0},C:{trades:0,winners:0,pnl:0}};o.forEach(v=>{C[v.grade]&&(C[v.grade].trades++,v.adjustedPnl>0&&C[v.grade].winners++,C[v.grade].pnl+=v.adjustedPnl)}),Object.keys(C).forEach(v=>{C[v].win_rate=C[v].trades>0?C[v].winners/C[v].trades:0});const d={TIER_I:{trades:0,winners:0,pnl:0},TIER_II:{trades:0,winners:0,pnl:0},TIER_III:{trades:0,winners:0,pnl:0}};return o.forEach(v=>{const u=["TIER_I","TIER_II","TIER_III"][v.tier-1]||"TIER_I";d[u].trades++,v.adjustedPnl>0&&d[u].winners++,d[u].pnl+=v.adjustedPnl}),Object.keys(d).forEach(v=>{d[v].win_rate=d[v].trades>0?d[v].winners/d[v].trades:0}),{summary:{total_trades:t.length,winners:s.length,losers:l.length,win_rate:t.length>0?s.length/t.length:0,total_pnl:p,original_pnl:w,pnl_difference:p-w,gross_profit:a,gross_loss:-c,profit_factor:c>0?a/c:a>0?1/0:0,avg_win:s.length>0?a/s.length:0,avg_loss:l.length>0?-c/l.length:0,avg_r_multiple:t.length>0?t.reduce((v,u)=>v+u.r,0)/t.length:0,max_drawdown:M,max_drawdown_pct:h>0?M/h:0,final_equity:1e6+p},yearly_pnl:G,weekly_pnl:x,exit_reasons:b,grade_stats:C,tier_stats:d}},aa=(t,n)=>{const[r,i]=L.useState(()=>{try{const o=window.localStorage.getItem(t);return o?JSON.parse(o):n}catch{return n}});return L.useEffect(()=>{window.localStorage.setItem(t,JSON.stringify(r))},[t,r]),[r,i]},nd="JBSWY3DPEHPK3PXP",jg=async(t,n=nd)=>{const r=[-1,0,1];for(const i of r){const o=Math.floor(Date.now()/1e3/30)+i,s=new Uint8Array(8);let l=o;for(let c=7;c>=0;c--)s[c]=l&255,l=Math.floor(l/256);const a=c=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let w="";for(let h=0;h<c.length;h++){const M=p.indexOf(c.charAt(h).toUpperCase());M!==-1&&(w+=M.toString(2).padStart(5,"0"))}const y=[];for(let h=0;h+8<=w.length;h+=8)y.push(parseInt(w.substr(h,8),2));return new Uint8Array(y)};try{const c=a(n),p=await crypto.subtle.importKey("raw",c,{name:"HMAC",hash:"SHA-1"},!1,["sign"]),w=new Uint8Array(await crypto.subtle.sign("HMAC",p,s)),y=w[w.length-1]&15,M=(((w[y]&127)<<24|(w[y+1]&255)<<16|(w[y+2]&255)<<8|w[y+3]&255)%1e6).toString().padStart(6,"0");if(t===M)return!0}catch(c){console.error("TOTP verification error:",c)}}return!1},Sg=({onLogin:t})=>{const[n,r]=L.useState({username:"",password:""}),[i,o]=L.useState(""),[s,l]=L.useState(1),[a,c]=L.useState(!1),[p,w]=L.useState(""),[y,h]=L.useState(!1),M=async x=>{x.preventDefault(),h(!0),w(""),await new Promise(b=>setTimeout(b,500)),n.username==="horizon"&&n.password==="[i68E[4S1k,4"?l(2):w("Invalid credentials"),h(!1)},k=async x=>{x.preventDefault(),h(!0),w(""),await jg(i)?t({username:n.username,role:"trader"}):w("Invalid 2FA code. Please try again."),h(!1)},G=`otpauth://totp/ProjectHorizon:horizon?secret=${nd}&issuer=ProjectHorizon&algorithm=SHA1&digits=6&period=30`,Me=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(G)}`;return e.jsx("div",{style:_.loginContainer,children:e.jsxs("div",{style:_.loginCard,children:[e.jsxs("div",{style:_.loginHeader,children:[e.jsxs("div",{style:_.logo,children:[e.jsx("div",{style:_.logoIcon,children:e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 40 40",fill:"none",children:[e.jsx("rect",{x:"4",y:"4",width:"32",height:"32",rx:"8",stroke:"#00ff88",strokeWidth:"2",fill:"rgba(0,255,136,0.1)"}),e.jsx("path",{d:"M20 12L28 20L20 28L12 20L20 12Z",fill:"#00ff88"}),e.jsx("circle",{cx:"20",cy:"20",r:"4",fill:"#0a0a0f"})]})}),e.jsx("span",{style:_.logoText,children:"PROJECT HORIZON"})]}),e.jsx("p",{style:_.loginSubtitle,children:"Not the, 1%."})]}),s===1?e.jsxs("form",{onSubmit:M,style:_.loginForm,children:[e.jsxs("div",{style:_.inputGroup,children:[e.jsx("label",{style:_.inputLabel,children:"Username"}),e.jsx("input",{type:"text",value:n.username,onChange:x=>r({...n,username:x.target.value}),style:_.input,placeholder:"Enter username"})]}),e.jsxs("div",{style:_.inputGroup,children:[e.jsx("label",{style:_.inputLabel,children:"Password"}),e.jsx("input",{type:"password",value:n.password,onChange:x=>r({...n,password:x.target.value}),style:_.input,placeholder:"Enter password"})]}),p&&e.jsx("div",{style:_.error,children:p}),e.jsx("button",{type:"submit",style:_.loginButton,disabled:y,children:y?"Verifying...":"Continue"})]}):e.jsx("div",{style:_.loginForm,children:a?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{color:"#888",marginBottom:16,fontSize:13},children:"Scan this QR code with your authenticator app:"}),e.jsx("img",{src:Me,alt:"2FA QR Code",style:{width:180,height:180,borderRadius:8,marginBottom:16,background:"#fff",padding:8}}),e.jsxs("p",{style:{color:"#666",fontSize:11,marginBottom:8},children:["Or enter manually: ",e.jsx("code",{style:{color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"2px 6px",borderRadius:4},children:nd})]}),e.jsx("button",{onClick:()=>c(!1),style:{..._.loginButton,marginTop:16},children:"I've Added It"})]}):e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",background:"rgba(0,255,136,0.1)",border:"2px solid #00ff88",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),e.jsx("p",{style:{color:"#fff",fontSize:15,fontWeight:600,fontFamily:"'Inter', sans-serif",marginBottom:6},children:"Two-Factor Authentication"}),e.jsx("p",{style:{color:"#888",fontSize:12,fontFamily:"'Inter', sans-serif"},children:"Enter the 6-digit code from your authenticator app"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:8,marginBottom:20},children:[0,1,2,3,4,5].map(x=>e.jsx("input",{id:`totp-${x}`,type:"text",inputMode:"numeric",maxLength:1,value:i[x]||"",onChange:b=>{var d;const C=b.target.value.replace(/\D/g,"");if(C.length<=1){const A=i.split("");A[x]=C,o(A.join("").slice(0,6)),C&&x<5&&((d=document.getElementById(`totp-${x+1}`))==null||d.focus())}},onKeyDown:b=>{var C;b.key==="Backspace"&&!i[x]&&x>0&&((C=document.getElementById(`totp-${x-1}`))==null||C.focus())},onPaste:b=>{var A;b.preventDefault();const C=b.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);o(C);const d=Math.min(C.length,5);(A=document.getElementById(`totp-${d}`))==null||A.focus()},style:{width:48,height:56,textAlign:"center",fontSize:24,fontFamily:'"SF Mono", "JetBrains Mono", "Fira Code", Consolas, monospace',fontWeight:600,background:"rgba(0,0,0,0.5)",border:i[x]?"2px solid #00ff88":"2px solid rgba(255,255,255,0.15)",borderRadius:10,color:"#fff",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",boxShadow:i[x]?"0 0 10px rgba(0,255,136,0.2)":"none"},onFocus:b=>b.target.style.borderColor="#00ff88",onBlur:b=>b.target.style.borderColor=i[x]?"#00ff88":"rgba(255,255,255,0.15)",autoFocus:x===0},x))}),p&&e.jsx("div",{style:_.error,children:p}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("button",{type:"submit",style:{..._.loginButton,width:"200px"},disabled:y||i.length!==6,children:y?"Verifying...":"VERIFY & LOGIN"}),e.jsx("div",{style:{width:"200px",display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx("button",{type:"button",onClick:()=>{l(1),w(""),o("")},style:{background:"transparent",border:"none",color:"#666",fontSize:11,cursor:"pointer",fontFamily:"'Inter', sans-serif"},children:" Back to login"})})]})]})}),e.jsx("div",{style:_.loginFooter,children:e.jsx("p",{style:_.footerText,children:"2FA Protected"})})]})})},wg=()=>{var m;const[t,n]=L.useState(null),[r,i]=L.useState(!0),[o,s]=L.useState(null),[l,a]=L.useState("1D"),[c,p]=L.useState("1M"),[w,y]=L.useState(null),[h,M]=L.useState({x:0,y:0}),{isMobile:k}=Ri(),G={"1D":{GC:{GC:1,SI:.92,CHF:.7,JPY:.66,US10Y:-.44,DXY:-.82},SI:{GC:.92,SI:1,CHF:.62,JPY:.56,US10Y:-.38,DXY:-.74},CHF:{GC:.7,SI:.62,CHF:1,JPY:.76,US10Y:-.32,DXY:-.86},JPY:{GC:.66,SI:.56,JPY:1,CHF:.76,US10Y:-.28,DXY:-.72},US10Y:{GC:-.44,SI:-.38,CHF:-.32,JPY:-.28,US10Y:1,DXY:.54},DXY:{GC:-.82,SI:-.74,CHF:-.86,JPY:-.72,US10Y:.54,DXY:1}},"1W":{GC:{GC:1,SI:.94,CHF:.74,JPY:.7,US10Y:-.48,DXY:-.85},SI:{GC:.94,SI:1,CHF:.66,JPY:.6,US10Y:-.42,DXY:-.78},CHF:{GC:.74,SI:.66,CHF:1,JPY:.8,US10Y:-.36,DXY:-.9},JPY:{GC:.7,SI:.6,JPY:1,CHF:.8,US10Y:-.32,DXY:-.76},US10Y:{GC:-.48,SI:-.42,CHF:-.36,JPY:-.32,US10Y:1,DXY:.58},DXY:{GC:-.85,SI:-.78,CHF:-.9,JPY:-.76,US10Y:.58,DXY:1}},"1M":{GC:{GC:1,SI:.96,CHF:.78,JPY:.74,US10Y:-.52,DXY:-.88},SI:{GC:.96,SI:1,CHF:.7,JPY:.64,US10Y:-.46,DXY:-.82},CHF:{GC:.78,SI:.7,CHF:1,JPY:.84,US10Y:-.4,DXY:-.92},JPY:{GC:.74,SI:.64,JPY:1,CHF:.84,US10Y:-.36,DXY:-.8},US10Y:{GC:-.52,SI:-.46,CHF:-.4,JPY:-.36,US10Y:1,DXY:.62},DXY:{GC:-.88,SI:-.82,CHF:-.92,JPY:-.8,US10Y:.62,DXY:1}}};L.useEffect(()=>{let R=!0;const $=async()=>{try{i(!0);const q=await fetch(`${Kt}/market-overview`);if(!q.ok)throw new Error("Failed to fetch market data");const v=await q.json();if(v.error)throw new Error(v.error);if(R&&v.sectors){const u=v.correlations||G;n({sectors:v.sectors,correlationsByTimeframe:u}),s(null)}}catch(q){console.error("Market data fetch error:",q),R&&s(q.message)}finally{R&&i(!1)}};$();const ae=setInterval($,3e4);return()=>{R=!1,clearInterval(ae)}},[]);const Me=R=>l==="1D"?R.change1D||0:l==="1W"?R.change1W||0:R.change1M||0,x=R=>l==="1D"?R.prev1D:l==="1W"?R.prev1W:R.prev1M,b=R=>R>2?"#00ff88":R>0?"#4ade80":R>-1?"#f87171":R>-2?"#ef4444":"#dc2626",C=(R,$)=>!R||isNaN(R)?"":$!=null&&$.includes("6J")||$!=null&&$.includes("6")||$!=null&&$.includes("DX")?R.toFixed(4):$!=null&&$.includes("US")&&!($!=null&&$.includes("USD"))?R.toFixed(2)+"%":R>1e3||R>10?R.toFixed(2):R.toFixed(4),d=()=>l==="1D"?"vs Yesterday":l==="1W"?"vs Last Week":"vs Last Month",A=()=>l==="1D"?"Yesterday":l==="1W"?"Last Week":"Last Month";return r&&!t?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading live market data..."]}):t?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:k?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:k?"column":"row",justifyContent:"space-between",alignItems:k?"flex-start":"center",marginBottom:k?16:24,gap:k?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:k?16:20},children:k?"Correlation Matrix":" Correlation Matrix"}),e.jsxs("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:k?11:13},children:["Futures price change ",d(),"  Color = % Change"]})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(R=>e.jsx("button",{onClick:()=>a(R),style:{padding:k?"6px 12px":"8px 16px",borderRadius:6,border:l===R?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",background:l===R?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.03)",color:l===R?"#00ff88":"#888",fontWeight:600,fontSize:k?10:12,cursor:"pointer",transition:"all 0.2s"},children:R},R))})]}),o&&e.jsxs("div",{style:{padding:16,marginBottom:16,background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,color:"#ff6b6b",fontSize:13},children:[" ",o," - Install yfinance: pip install yfinance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:k?"1fr":"repeat(2, 1fr)",gap:k?8:12,marginBottom:k?16:24},children:(m=t==null?void 0:t.sectors)==null?void 0:m.map(R=>e.jsxs("div",{style:{padding:14,background:"rgba(255,255,255,0.02)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",borderLeft:`3px solid ${R.color}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:R.color}}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:R.color,textTransform:"uppercase",letterSpacing:.5},children:R.name})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min(R.stocks.length,5)}, 1fr)`,gap:6},children:R.stocks.map($=>{const ae=Me($),q=(w==null?void 0:w.symbol)===$.symbol;return e.jsxs("div",{style:{position:"relative",padding:"8px 10px",borderRadius:6,background:b(ae),cursor:"pointer",transition:"all 0.2s ease",transform:q?"scale(1.05)":"scale(1)",boxShadow:q?"0 4px 20px rgba(0,0,0,0.4)":"none",textAlign:"center"},onMouseEnter:v=>{const u=v.currentTarget.getBoundingClientRect();y({...$,sectorName:R.name,sectorColor:R.color}),M({x:u.left+u.width/2,y:u.top})},onMouseLeave:()=>y(null),children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#000",marginBottom:2},children:$.symbol}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#000"},children:[ae>=0?"+":"",ae.toFixed(2),"%"]})]},$.symbol)})})]},R.name))}),w&&e.jsxs("div",{style:{position:"fixed",left:Math.max(20,Math.min(h.x-150,window.innerWidth-320)),top:h.y+60,background:"linear-gradient(135deg, rgba(20,20,28,0.98) 0%, rgba(15,15,20,0.98) 100%)",border:`1px solid ${w.sectorColor}40`,borderRadius:12,padding:0,zIndex:1e3,boxShadow:`0 8px 32px rgba(0,0,0,0.6), 0 0 20px ${w.sectorColor}20`,minWidth:280,maxWidth:300,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:`${w.sectorColor}15`,borderBottom:`1px solid ${w.sectorColor}30`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#fff"},children:w.name}),e.jsx("div",{style:{fontSize:11,color:w.sectorColor,marginTop:2},children:w.sectorName})]}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:Me(w)>=0?"#00ff88":"#ff4466"},children:[Me(w)>=0?"+":"",Me(w).toFixed(2),"%"]})]}),e.jsxs("div",{style:{padding:"12px 16px"},children:[(()=>{const R=w.current||{},$=R.c>=R.o,ae=$?"#00ff88":"#ff4466";return e.jsxs("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:6,background:$?"rgba(0,255,136,0.08)":"rgba(255,68,102,0.08)",border:`1px solid ${ae}30`},children:[e.jsxs("div",{style:{fontSize:9,color:ae,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,fontWeight:600},children:[$?"":""," Current"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(q=>{const v=R[q.toLowerCase()],u=q==="H"&&$?"#00ff88":q==="L"&&!$?"#ff4466":"#fff";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:q}),e.jsx("div",{style:{fontSize:10,color:u,fontFamily:"monospace",fontWeight:600},children:C(v,w.symbol)})]},q)})})]})})(),(()=>{const R=x(w)||{},$=R.c>=R.o,ae=$?"#00ff88":"#ff4466";return e.jsxs("div",{style:{padding:"8px 10px",borderRadius:6,background:$?"rgba(0,255,136,0.05)":"rgba(255,68,102,0.05)",border:`1px solid ${ae}20`},children:[e.jsxs("div",{style:{fontSize:9,color:ae,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,opacity:.8,fontWeight:600},children:[$?"":""," ",A()]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(q=>{const v=R[q.toLowerCase()],u=q==="H"&&$?"#00ff88":q==="L"&&!$?"#ff4466":"#aaa";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:q}),e.jsx("div",{style:{fontSize:10,color:u,fontFamily:"monospace"},children:C(v,w.symbol)})]},q)})})]})})()]}),e.jsx("div",{style:{padding:"8px 16px",background:"rgba(0,0,0,0.3)",fontSize:10,color:"#666",textAlign:"center"},children:"Live data from Yahoo Finance"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,padding:16,background:"rgba(255,255,255,0.02)",borderRadius:12,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#dc2626"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"< -2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#f87171"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"-2% to 0%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#4ade80"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"0% to +2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#00ff88"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:">+2%"})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:16,padding:24,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:10},children:[" GC & SI Correlation Matrix (",c==="30m"?"30 Minutes":c==="1H"?"1 Hour":c==="4H"?"4 Hours":c==="1D"?"1 Day":c==="1W"?"1 Week":"1 Month",")",e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"3px 8px",borderRadius:4,border:"1px solid rgba(0,255,136,0.3)",letterSpacing:.5},children:" LIVE"})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(R=>e.jsx("button",{onClick:()=>p(R),style:{padding:"6px 12px",borderRadius:6,border:c===R?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",background:c===R?"rgba(0,170,255,0.15)":"rgba(255,255,255,0.03)",color:c===R?"#00aaff":"#888",fontWeight:600,fontSize:11,cursor:"pointer",transition:"all 0.2s"},children:R},R))})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:500},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:12,textAlign:"left",color:"#888",fontSize:12}}),["GC","SI","CHF","JPY","US10Y","DXY"].map(R=>e.jsx("th",{style:{padding:12,textAlign:"center",color:R==="GC"?"#FFD700":R==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:R==="CHF"?" CHF":R==="JPY"?" JPY":R==="US10Y"?" 10Y":R==="DXY"?" DXY":R==="GC"?" GC":" SI"},R))]})}),e.jsx("tbody",{children:["GC","SI","CHF","JPY","US10Y","DXY"].map(R=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:12,color:R==="GC"?"#FFD700":R==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:R==="CHF"?" Swiss":R==="JPY"?" Yen":R==="US10Y"?" Yield":R==="DXY"?" DXY":R==="GC"?" Gold":" Silver"}),["GC","SI","CHF","JPY","US10Y","DXY"].map($=>{var I,_e,E;const ae=((E=(_e=(I=t.correlationsByTimeframe)==null?void 0:I[c])==null?void 0:_e[R])==null?void 0:E[$])??0,q=Math.abs(ae),v=ae<0,u=ae===1?"rgba(100,100,100,0.3)":v?`rgba(255,68,102,${q*.4})`:ae>.7?`rgba(0,255,136,${q*.4})`:ae>.3?`rgba(0,255,136,${q*.25})`:`rgba(255,170,0,${q*.3})`;return e.jsxs("td",{style:{padding:12,textAlign:"center",background:u,color:ae===1?"#888":v?"#ff4466":ae>.5?"#00ff88":"#ffaa00",fontSize:13,fontWeight:600,border:"1px solid rgba(255,255,255,0.05)"},children:[ae>=0?"+":"",ae.toFixed(2)]},$)})]},R))})]})}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:" Green = Positive correlation |  Red = Negative correlation (inverse relationship)"})]})]}):e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No market data available"]})},mr=({children:t,content:n,position:r="top"})=>{const[i,o]=L.useState(!1),[s,l]=L.useState({x:0,y:0}),a=Ar.useRef(null),c=p=>{const w=p.currentTarget.getBoundingClientRect();l({x:w.left+w.width/2,y:r==="top"?w.top:w.bottom}),o(!0)};return e.jsxs("div",{ref:a,onMouseEnter:c,onMouseLeave:()=>o(!1),style:{position:"relative",display:"inline-block",width:"100%"},children:[t,i&&n&&e.jsxs("div",{style:{position:"fixed",left:s.x,top:r==="top"?s.y-8:s.y+8,transform:r==="top"?"translate(-50%, -100%)":"translate(-50%, 0)",background:"rgba(20, 22, 28, 0.98)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:6,padding:"8px 12px",fontSize:10,color:"#ccc",whiteSpace:"pre-line",zIndex:9999,pointerEvents:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",minWidth:150,maxWidth:280,lineHeight:1.5},children:[n,e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",...r==="top"?{bottom:-6,borderTop:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}:{top:-6,borderBottom:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"},width:0,height:0}})]})]})},kg=({selectedContract:t})=>{const[n,r]=L.useState({}),[i,o]=L.useState({});return L.useEffect(()=>{r({}),o({});const s=async()=>{try{const c=await(await fetch(Kt)).json();r(c),o(c)}catch(a){console.error("PriceLadder fetch error:",a)}};s();const l=setInterval(s,300);return()=>clearInterval(l)},[t]),e.jsx(Cg,{metrics:n,gexData:i})},Cg=({metrics:t={},gexData:n={}})=>{var pe,le,nt,Ht,ve,je,Ae,Ee,He,De,Bt,pt,yt,gt,Ln,tn,mn,On,bn,_n,Dn,or,oi,Br,hr,An,Er;yg();const[r,i]=L.useState("5m"),[o,s]=L.useState("all"),[l,a]=L.useState(!1),[c,p]=L.useState(!1),[w,y]=L.useState(!0),[h,M]=L.useState(null),[k,G]=L.useState(!1),[Me,x]=L.useState(!1),[b,C]=L.useState(null),[d,A]=L.useState(null),[m,R]=L.useState(!1),[$,ae]=L.useState(1),[q,v]=L.useState(1),[u,I]=L.useState(1),[_e,E]=L.useState({}),[oe,Xe]=L.useState({}),[de,Be]=L.useState({etfs:[]}),[S,P]=L.useState({}),[O,ke]=L.useState({}),{isMobile:Fe,isTablet:qe}=Ri(),Le=t.current_price||0;L.useEffect(()=>{const Y=async()=>{try{const Ce=await fetch(`${Kt}/institutional`);if(Ce.ok){const Ie=await Ce.json();Xe(Ie)}}catch(Ce){console.log("Institutional data fetch error:",Ce)}};Y();const Re=setInterval(Y,6e4);return()=>clearInterval(Re)},[]),L.useEffect(()=>{if((t==null?void 0:t.contract)!=="BTC-SPOT")return;const Y=async()=>{try{const Ce=await fetch("https://fapi.binance.com/fapi/v1/fundingRate?symbol=BTCUSDT&limit=1");if(Ce.ok){const Je=await Ce.json();if(Je&&Je.length>0){const _t=parseFloat(Je[0].fundingRate)*100,jt=_t*3*365;ke({funding_rates:{average:_t,annualized:jt,sentiment:_t>.01?"bullish_extreme":_t>0?"bullish":_t<-.01?"bearish_extreme":_t<0?"bearish":"neutral"}})}}try{const Je=await fetch("https://www.deribit.com/api/v2/public/get_book_summary_by_currency?currency=BTC&kind=option");if(Je.ok){const _t=await Je.json();if(_t!=null&&_t.result){let jt=0,Ne=0,rt=0,it=0,Rn=0,Qe=0;_t.result.forEach(Vt=>{const Mt=Vt.instrument_name.includes("-C"),rn=Vt.open_interest||0,ln=parseFloat(Vt.instrument_name.split("-")[2])||0;Mt?(jt+=rn,rn>Rn&&(Rn=rn,rt=ln)):(Ne+=rn,rn>Qe&&(Qe=rn,it=ln))});const Ft=jt>0?Ne/jt:0,Hn=Ft>1.2?"bearish":Ft<.7?"bullish":"neutral",nn=Math.round((rt+it)/2);P({btc_options:{max_pain:nn,put_call_ratio:Ft,sentiment:Hn,call_wall:rt,put_wall:it}})}}}catch(Je){console.log("Deribit fetch error:",Je)}const Ie=t.current_price||0,et=(Ie-(t.session_open||Ie))/(t.session_open||Ie)*100,Ke=et>0?Math.round(et*50):Math.round(et*30);Be({total_flow_1d_mm:Ke,total_flow_5d_mm:Ke*3,etfs:[{symbol:"IBIT",price:Ie*5e-4,price_change_1d:et*.9},{symbol:"FBTC",price:Ie*48e-5,price_change_1d:et*.95},{symbol:"GBTC",price:Ie*9e-4,price_change_1d:et*.85},{symbol:"ARKB",price:Ie*47e-5,price_change_1d:et*.92}]})}catch(Ce){console.error("Error fetching BTC data:",Ce)}};Y();const Re=setInterval(Y,6e4);return()=>clearInterval(Re)},[t==null?void 0:t.contract,t==null?void 0:t.current_price,t==null?void 0:t.session_open]);const Oe=(()=>{const Y={buy:0,sell:0,delta:0,prev_buy:0,prev_sell:0,prev_delta:0};switch(r){case"5m":return{...Y,...t.volume_5m};case"15m":return{...Y,...t.volume_15m};case"30m":return{...Y,...t.volume_30m};case"1h":return{...Y,...t.volume_1h};default:return{buy:t.buy_volume||0,sell:t.sell_volume||0,delta:t.cumulative_delta||0,prev_buy:0,prev_sell:0,prev_delta:0}}})(),Q=Oe.history||[],ue=()=>{const Y=t.asset_class||n.asset_class||"GC";return{GC:2650,ES:5200,NQ:18500,BTC:95e3,"BTC-SPOT":93e3,CL:75}[Y]||2650},he=Le>0?Le:ue();L.useMemo(()=>{const Y=he,Re=100,Ce=[];let Ie=Y,et=0;const Ke=r==="5m"?300:r==="15m"?900:r==="30m"?1800:3600,Je=Math.floor(Date.now()/1e3),_t=Math.floor(Je/Ke)*Ke-Re*Ke;let jt=Math.round(Y)*100+12345;const Ne=()=>(jt=(jt*9301+49297)%233280,jt/233280),rt=.1,it=8;for(let Rn=0;Rn<Re;Rn++){const Qe=(Ne()-.5)*rt*2;Ie=Y+Qe+(Ne()-.5)*rt*4;const Ft=Ne()>.45,Hn=150+Ne()*100,nn=Ft?20+Ne()*60:-(20+Ne()*60),Vt=Math.max(0,(Hn+nn)/2),Mt=Math.max(0,(Hn-nn)/2),rn=rt*it/2,ln=Ie+(Ne()-.5)*rn,xn=Ie+(Ne()-.5)*rn,qn=Math.max(ln,xn)+Ne()*rt*2,er=Math.min(ln,xn)-Ne()*rt*2;et+=nn,Ce.push({ts:_t+Rn*Ke,buy:Math.round(Vt),sell:Math.round(Mt),delta:Math.round(nn),price_open:ln,price_high:qn,price_low:er,price_close:xn,delta_open:et-nn,delta_high:et+Math.abs(nn)*.2,delta_low:et-Math.abs(nn)*.2,delta_close:et})}return Ce},[Math.round(he/10)*10,r]);const ye=Q,ge=Oe.buy+Oe.sell||(ye.length>0?((pe=ye[ye.length-1])==null?void 0:pe.buy)+((le=ye[ye.length-1])==null?void 0:le.sell):0);(Oe.prev_buy||0)+(Oe.prev_sell||0);const Ge=(Y,Re)=>Re===0?null:((Y-Re)/Re*100).toFixed(1);r!=="session"&&Ge(Oe.buy,Oe.prev_buy),r!=="session"&&Ge(Oe.sell,Oe.prev_sell);const vt=(t==null?void 0:t.contract)==="BTC-SPOT",lt=vt?[((Ht=(nt=t==null?void 0:t.ibs)==null?void 0:nt.japan)==null?void 0:Ht.high)>0&&{price:t.ibs.japan.high,name:"Japan IB H",color:"#9370DB"},((je=(ve=t==null?void 0:t.ibs)==null?void 0:ve.japan)==null?void 0:je.low)>0&&((Ee=(Ae=t==null?void 0:t.ibs)==null?void 0:Ae.japan)==null?void 0:Ee.low)<999999&&{price:t.ibs.japan.low,name:"Japan IB L",color:"#9370DB"},((De=(He=t==null?void 0:t.ibs)==null?void 0:He.london)==null?void 0:De.high)>0&&{price:t.ibs.london.high,name:"London IB H",color:"#3B82F6"},((pt=(Bt=t==null?void 0:t.ibs)==null?void 0:Bt.london)==null?void 0:pt.low)>0&&((gt=(yt=t==null?void 0:t.ibs)==null?void 0:yt.london)==null?void 0:gt.low)<999999&&{price:t.ibs.london.low,name:"London IB L",color:"#3B82F6"},((tn=(Ln=t==null?void 0:t.ibs)==null?void 0:Ln.us)==null?void 0:tn.high)>0&&{price:t.ibs.us.high,name:"US IB H",color:"#F59E0B"},((On=(mn=t==null?void 0:t.ibs)==null?void 0:mn.us)==null?void 0:On.low)>0&&((_n=(bn=t==null?void 0:t.ibs)==null?void 0:bn.us)==null?void 0:_n.low)<999999&&{price:t.ibs.us.low,name:"US IB L",color:"#F59E0B"},((or=(Dn=t==null?void 0:t.ibs)==null?void 0:Dn.ny)==null?void 0:or.high)>0&&{price:t.ibs.ny.high,name:"NY IB H",color:"#10B981"},((Br=(oi=t==null?void 0:t.ibs)==null?void 0:oi.ny)==null?void 0:Br.low)>0&&((An=(hr=t==null?void 0:t.ibs)==null?void 0:hr.ny)==null?void 0:An.low)<999999&&{price:t.ibs.ny.low,name:"NY IB L",color:"#10B981"}]:[],Ye=[n.pd_high>0&&{price:n.pd_high,name:"PD High",color:"#ff4466"},l&&n.hvl>0&&{price:n.hvl,name:"HVL",color:"#00aaff"},!vt&&t.ib_high>0&&{price:t.ib_high,name:"IB High",color:"#ffaa00"},l&&{price:Le+50,name:"R3",color:"#ff6b6b"},l&&{price:Le+30,name:"R2",color:"#ff8c8c"},l&&{price:Le+15,name:"R1",color:"#ffaaaa"},l&&n.zero_gamma>0&&{price:n.zero_gamma,name:"Zero Gamma",color:"#00ff88"},t.vwap>0&&{price:t.vwap,name:"VWAP",color:"#00ddff"},!vt&&t.ib_low>0&&{price:t.ib_low,name:"IB Low",color:"#00ff88"},l&&{price:Le-15,name:"S1",color:"#88ff88"},l&&{price:Le-30,name:"S2",color:"#66dd66"},l&&{price:Le-50,name:"S3",color:"#44bb44"},n.pdpoc>0&&{price:n.pdpoc,name:"pdPOC",color:"#ffaa00"},n.pd_low>0&&{price:n.pd_low,name:"PD Low",color:"#00ff88"},...lt].filter(Boolean).sort((Y,Re)=>Re.price-Y.price),N=Ye.filter(Y=>Y.price>Le).slice(-10),Xt=Ye.filter(Y=>Y.price<=Le).slice(0,10),an=ge>0?(Oe.buy/ge*100).toFixed(1):50,fn=ge>0?(Oe.sell/ge*100).toFixed(1):50,at={session:"Session","5m":"5 Min","15m":"15 Min","30m":"30 Min","1h":"1 Hour"},Dt=({level:Y,position:Re})=>{const Ce=Math.abs(Y.price-Le).toFixed(2),Ie=Math.abs(Y.price-Le)<20;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",background:Ie?`${Y.color}15`:"transparent",borderLeft:`3px solid ${Y.color}`,marginBottom:2,transition:"all 0.3s ease",opacity:Ie?1:.7,flexWrap:"nowrap",whiteSpace:"nowrap"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,minWidth:90,flex:"0 0 auto"},children:e.jsx("span",{style:{color:Y.color,fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:1},children:Y.name})}),e.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:700,color:Y.color,textShadow:Ie?`0 0 10px ${Y.color}`:"none",minWidth:110,textAlign:"right",flex:"0 0 auto"},children:["$",Y.price.toFixed(2)]}),e.jsxs("div",{style:{fontSize:11,color:"#666",minWidth:90,textAlign:"right",flex:"0 0 auto"},children:[Re==="above"?"":""," $",Ce]})]})};return e.jsxs("div",{style:{padding:Fe?12:24},children:[e.jsxs("div",{style:{display:"flex",flexDirection:Fe?"column":"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:Fe?16:24,gap:Fe?12:0},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#fff",marginBottom:8,display:"flex",alignItems:"center",gap:12,fontSize:Fe?18:24},children:Fe?"Price Ladder":" Price Ladder"}),e.jsx("p",{style:{color:"#888",fontSize:Fe?11:13},children:"Live price with reference levels  Updates in real-time"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:Fe?8:12,background:"rgba(255,255,255,0.05)",padding:Fe?"6px 12px":"8px 16px",borderRadius:8,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{color:"#888",fontSize:Fe?10:12},children:"Gamma Levels"}),e.jsx("button",{onClick:()=>a(!l),style:{width:Fe?40:48,height:Fe?20:24,borderRadius:12,border:"none",background:l?"#00ff88":"rgba(255,255,255,0.2)",cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:e.jsx("div",{style:{width:Fe?14:18,height:Fe?14:18,borderRadius:"50%",background:"#fff",position:"absolute",top:3,left:l?Fe?23:27:3,transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})]}),e.jsxs("div",{style:{display:Fe?"flex":"grid",flexDirection:Fe?"column":void 0,gridTemplateColumns:Fe?void 0:qe?"1fr":"450px 1fr",gap:Fe?12:20,maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,170,255,0.08)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:8,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:8,letterSpacing:1},children:"SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",fontFamily:"'JetBrains Mono', monospace"},children:n.current_session_name||"Loading..."})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#555",fontSize:9},children:[n.current_session_start," - ",n.current_session_end]}),e.jsx("div",{style:{color:"#666",fontSize:8},children:"ET"})]})]}),e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20,20,30,0.95) 0%, rgba(10,10,15,0.98) 100%)",border:"2px solid rgba(255,255,255,0.1)",borderRadius:16,overflow:"hidden",flex:1},children:[e.jsx("div",{style:{maxHeight:200,overflowY:"auto",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:N.map((Y,Re)=>e.jsx(Dt,{level:Y,position:"above"},Re))}),e.jsxs("div",{style:{padding:"16px 12px",background:"linear-gradient(180deg, rgba(0,170,255,0.2) 0%, rgba(0,100,200,0.1) 100%)",borderTop:"2px solid #00aaff",borderBottom:"2px solid #00aaff",textAlign:"center"},children:[e.jsx("div",{style:{color:"#888",fontSize:9,letterSpacing:2,marginBottom:4},children:"CURRENT PRICE"}),e.jsxs("div",{style:{fontSize:36,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",textShadow:"0 0 30px rgba(0,170,255,0.5)"},children:["$",Le.toFixed(2)]}),e.jsxs("div",{style:{marginTop:4,fontSize:11,color:t.cumulative_delta>=0?"#00ff88":"#ff4466",fontWeight:600},children:[t.cumulative_delta>=0?"":""," Delta: ",((Er=t.cumulative_delta)==null?void 0:Er.toLocaleString())||0]})]}),e.jsx("div",{style:{maxHeight:200,overflowY:"auto",borderTop:"1px solid rgba(255,255,255,0.1)"},children:Xt.map((Y,Re)=>e.jsx(Dt,{level:Y,position:"below"},Re))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,minWidth:0,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx("div",{style:{display:"flex",gap:4,alignItems:"center"},children:["5m","15m","30m","1h"].map(Y=>e.jsx("button",{onClick:()=>i(Y),style:{padding:"6px 12px",borderRadius:6,border:"none",background:r===Y?"#00ff88":"rgba(255,255,255,0.1)",color:r===Y?"#000":"#888",fontSize:10,fontWeight:600,cursor:"pointer"},children:at[Y]},Y))}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(0,255,136,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"BUY"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",fontFamily:"monospace"},children:Oe.buy>999?`${(Oe.buy/1e3).toFixed(1)}k`:Oe.buy}),e.jsxs("span",{style:{fontSize:9,color:"#00ff88",opacity:.7},children:[an,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"SELL"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#ff4466",fontFamily:"monospace"},children:Oe.sell>999?`${(Oe.sell/1e3).toFixed(1)}k`:Oe.sell}),e.jsxs("span",{style:{fontSize:9,color:"#ff4466",opacity:.7},children:[fn,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:Oe.delta>=0?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"DELTA"}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:Oe.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[Oe.delta>=0?"+":"",Math.abs(Oe.delta)>999?`${(Oe.delta/1e3).toFixed(1)}k`:Oe.delta]}),e.jsx("span",{style:{fontSize:9,color:Oe.delta>=0?"#00ff88":"#ff4466",opacity:.7},children:ge>0?`${(Oe.delta/ge*100).toFixed(0)}%`:"0%"})]})]})]}),(()=>{var ln,xn,qn,er,gr;const Y=Math.min(200,Math.round(100/q)),Re=[...ye].slice(-Y),Ce=ye.length>0?ye[ye.length-1]:null,Ie={price_open:Oe.price_open||(Ce==null?void 0:Ce.price_open)||Le,price_high:Oe.price_high||(Ce==null?void 0:Ce.price_high)||Le,price_low:Oe.price_low||(Ce==null?void 0:Ce.price_low)||Le,price_close:Le||(Ce==null?void 0:Ce.price_close)||0,buy:Oe.buy||(Ce==null?void 0:Ce.buy)||100,sell:Oe.sell||(Ce==null?void 0:Ce.sell)||80,delta:Oe.delta||(Ce==null?void 0:Ce.delta)||20,volume:ge||(Ce?Ce.buy+Ce.sell:180)},et=[...Re,Ie],Ke=et.slice(-10),Je=()=>{if(Ke.length<3)return{exhaustion:!1,absorption:!1,deltaTrend:"neutral",volTrend:"neutral"};const dt=Ke.slice(-3),f=dt.map(ie=>ie.delta||0),F=dt.map(ie=>(ie.buy||0)+(ie.sell||0)),g=dt.map(ie=>ie.price_close||0),B=f[2]>f[1]&&f[1]>f[0]?"increasing":f[2]<f[1]&&f[1]<f[0]?"decreasing":"neutral",X=F[2]>F[1]?"increasing":F[2]<F[1]?"decreasing":"neutral",ne=f.reduce((ie,se)=>ie+se,0)/3,j=ne<0&&X==="decreasing"&&Math.abs(f[2])<Math.abs(f[0]),U=g[2]>=g[0]-2,ee=ne<-10&&U&&F[2]>50;return{exhaustion:j,absorption:ee,deltaTrend:B,volTrend:X,avgDelta:ne}},_t=()=>{if(Ke.length<5)return{microRange:null,initiation:!1,vRecovery:!1};const dt=Ke.slice(-5),f=dt.map(ie=>ie.price_high||ie.price_close||0),F=dt.map(ie=>ie.price_low||ie.price_close||0),g=Math.max(...f),B=Math.min(...F),X=g-B,ne=dt.reduce((ie,se)=>ie+(se.price_close||0),0)/5,j=X<ne*.005,U=Ie.price_close>g&&j,K=dt.slice(-3).map(ie=>ie.delta||0),ee=K[0]<-50&&K[2]>50;return{microRange:j?{high:g,low:B}:null,initiation:U,vRecovery:ee,rangeSize:X}},jt=()=>{if(Ke.length<3)return{pocMigration:"neutral",imbalances:0,bullishClose:!1};const dt=Ke.slice(-3),f=dt.map(X=>((X.price_high||X.price_close)+(X.price_low||X.price_close))/2),F=f[2]>f[1]&&f[1]>f[0]?"up":f[2]<f[1]&&f[1]<f[0]?"down":"neutral",g=dt.filter(X=>(X.buy||0)>(X.sell||0)*1.5).length,B=Ie.price_close>f[1]&&Ie.delta>0;return{pocMigration:F,imbalances:g,bullishClose:B,pocs:f}},Ne=Je(),rt=_t(),it=jt(),Qe=it.pocMigration==="up"&&it.imbalances>=2&&it.bullishClose?"C":rt.initiation||rt.vRecovery?"B":Ne.exhaustion||Ne.absorption?"A":"-",Ft=Math.min(100,Math.max(0,50+(Ne.avgDelta||0)/5+(it.pocMigration==="up"?20:it.pocMigration==="down"?-20:0)+it.imbalances*10)),nn=Math.min(Y,Math.round(50/q)),Vt=et.slice(-nn),Mt=Vt.map((dt,f)=>({...dt,isEmpty:!1,isCurrent:f===Vt.length-1})),rn=Mt.filter(dt=>!dt.isEmpty&&dt.price_close>0);return rn.length>0&&Math.max(...rn.map(dt=>dt.price_high||dt.price_close)),rn.length>0&&Math.min(...rn.map(dt=>dt.price_low||dt.price_close)),Math.max(...rn.map(dt=>Math.abs(dt.delta||0)),1),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{color:"#888",fontSize:11,fontWeight:600,letterSpacing:1},children:"EXECUTION ANALYSIS"}),e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),children:[e.jsxs("div",{style:{padding:"3px 10px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"help",background:Qe==="C"?"rgba(0,255,136,0.2)":Qe==="B"?"rgba(255,170,0,0.2)":Qe==="A"?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",color:Qe==="C"?"#00ff88":Qe==="B"?"#ffaa00":Qe==="A"?"#00aaff":"#666",border:`1px solid ${Qe==="C"?"#00ff8850":Qe==="B"?"#ffaa0050":Qe==="A"?"#00aaff50":"#ffffff20"}`},children:["PHASE ",Qe]}),k&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:8,background:"linear-gradient(135deg, rgba(20,22,30,0.98), rgba(15,17,23,0.98))",border:"1px solid rgba(255,255,255,0.15)",borderRadius:10,padding:14,minWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:10,marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:Qe==="C"?"#00ff88":Qe==="B"?"#ffaa00":Qe==="A"?"#00aaff":"#888",marginBottom:4},children:Qe==="A"?"PHASE A: Exhaustion & Absorption":Qe==="B"?"PHASE B: Micro Range & Initiation":Qe==="C"?"PHASE C: POC Migration & Imbalances":"NO CLEAR PHASE"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:Qe==="A"?"Sell pressure ending, watching for reversal setup":Qe==="B"?"Consolidation detected, preparing for breakout":Qe==="C"?"Strong directional move confirmed with buying pressure":"Market in transition between phases"})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:Qe==="A"?"#00aaff":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:Ne.exhaustion||Ne.absorption?"#00aaff":"#333"}}),"PHASE A METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Avg Delta (3 bars):"}),e.jsx("div",{style:{color:(Ne.avgDelta||0)<0?"#ff4466":"#00ff88",fontFamily:"monospace",fontWeight:600},children:(Ne.avgDelta||0).toFixed(0)}),e.jsx("div",{style:{color:"#666"},children:"Delta Trend:"}),e.jsx("div",{style:{color:Ne.deltaTrend==="increasing"?"#00ff88":Ne.deltaTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((ln=Ne.deltaTrend)==null?void 0:ln.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Volume Trend:"}),e.jsx("div",{style:{color:Ne.volTrend==="increasing"?"#00ff88":Ne.volTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((xn=Ne.volTrend)==null?void 0:xn.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Exhaustion:"}),e.jsx("div",{style:{color:Ne.exhaustion?"#00aaff":"#444",fontWeight:600},children:Ne.exhaustion?"DETECTED":"No"}),e.jsx("div",{style:{color:"#666"},children:"Absorption:"}),e.jsx("div",{style:{color:Ne.absorption?"#00aaff":"#444",fontWeight:600},children:Ne.absorption?"DETECTED":"No"})]})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:Qe==="B"?"#ffaa00":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:rt.initiation||rt.vRecovery?"#ffaa00":"#333"}}),"PHASE B METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Range Size:"}),e.jsxs("div",{style:{color:"#ccc",fontFamily:"monospace",fontWeight:600},children:["$",(rt.rangeSize||0).toFixed(2)]}),e.jsx("div",{style:{color:"#666"},children:"Micro Range:"}),e.jsx("div",{style:{color:rt.microRange?"#ffaa00":"#444",fontWeight:600},children:rt.microRange?`H:$${(qn=rt.microRange.high)==null?void 0:qn.toFixed(2)} L:$${(er=rt.microRange.low)==null?void 0:er.toFixed(2)}`:"No tight range"}),e.jsx("div",{style:{color:"#666"},children:"Initiation:"}),e.jsx("div",{style:{color:rt.initiation?"#ffaa00":"#444",fontWeight:600},children:rt.initiation?"BREAKOUT":"No"}),e.jsx("div",{style:{color:"#666"},children:"V-Recovery:"}),e.jsx("div",{style:{color:rt.vRecovery?"#ffaa00":"#444",fontWeight:600},children:rt.vRecovery?"DETECTED":"No"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:9,color:Qe==="C"?"#00ff88":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:it.pocMigration==="up"&&it.imbalances>=2?"#00ff88":"#333"}}),"PHASE C METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"POC Migration:"}),e.jsxs("div",{style:{color:it.pocMigration==="up"?"#00ff88":it.pocMigration==="down"?"#ff4466":"#888",fontWeight:600},children:[((gr=it.pocMigration)==null?void 0:gr.toUpperCase())||"NEUTRAL"," ",it.pocMigration==="up"?"":it.pocMigration==="down"?"":""]}),e.jsx("div",{style:{color:"#666"},children:"Buy Imbalances:"}),e.jsxs("div",{style:{color:it.imbalances>=2?"#00ff88":"#888",fontFamily:"monospace",fontWeight:600},children:[it.imbalances||0,"/3 bars"]}),e.jsx("div",{style:{color:"#666"},children:"Bullish Close:"}),e.jsx("div",{style:{color:it.bullishClose?"#00ff88":"#444",fontWeight:600},children:it.bullishClose?"YES":"No"}),e.jsx("div",{style:{color:"#666"},children:"POC Levels:"}),e.jsx("div",{style:{color:"#888",fontFamily:"monospace",fontSize:8},children:it.pocs?it.pocs.map(dt=>`$${dt==null?void 0:dt.toFixed(0)}`).join("  "):"N/A"})]})]}),e.jsxs("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:"Momentum Score:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:80,height:4,background:"#222",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Ft}%`,height:"100%",background:Ft>60?"#00ff88":Ft<40?"#ff4466":"#ffaa00",borderRadius:2}})}),e.jsx("span",{style:{fontSize:11,fontWeight:700,fontFamily:"monospace",color:Ft>60?"#00ff88":Ft<40?"#ff4466":"#ffaa00"},children:Ft.toFixed(0)})]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:at[r]}),e.jsx("button",{onClick:()=>p(!c),style:{background:c?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:c?"Hide Chart":"Show Chart"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"MOMENTUM"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:Ft>60?"#00ff88":Ft<40?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:Ft.toFixed(0)}),e.jsx("div",{style:{height:3,background:"rgba(255,255,255,0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Ft}%`,height:"100%",background:Ft>60?"#00ff88":Ft<40?"#ff4466":"#ffaa00",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"DELTA"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Ne.deltaTrend==="increasing"?"#00ff88":Ne.deltaTrend==="decreasing"?"#ff4466":"#888"},children:Ne.deltaTrend==="increasing"?" UP":Ne.deltaTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VOLUME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Ne.volTrend==="increasing"?"#00aaff":Ne.volTrend==="decreasing"?"#ff8800":"#888"},children:Ne.volTrend==="increasing"?" UP":Ne.volTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"POC"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:it.pocMigration==="up"?"#00ff88":it.pocMigration==="down"?"#ff4466":"#888"},children:it.pocMigration==="up"?" UP":it.pocMigration==="down"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IMBAL"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:it.imbalances>=2?"#00ff88":it.imbalances===1?"#ffaa00":"#666",fontFamily:"monospace"},children:[it.imbalances,"/3"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:6,marginBottom:10,flexWrap:"wrap"},children:[Ne.exhaustion&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,170,255,0.2)",color:"#00aaff",border:"1px solid rgba(0,170,255,0.3)"},children:" EXHAUSTION"}),Ne.absorption&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(138,43,226,0.2)",color:"#a855f7",border:"1px solid rgba(138,43,226,0.3)"},children:" ABSORPTION"}),rt.microRange&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.3)"},children:" MICRO RANGE"}),rt.initiation&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" INITIATION"}),rt.vRecovery&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" V-RECOVERY"}),it.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" BULLISH CLOSE"}),!Ne.exhaustion&&!Ne.absorption&&!rt.microRange&&!rt.initiation&&!rt.vRecovery&&!it.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,255,255,0.05)",color:"#666",border:"1px solid rgba(255,255,255,0.1)"},children:"SCANNING..."})]}),c&&e.jsx(e.Fragment,{children:(()=>{const dt=t.asset_class||"GC",f=dt==="BTC-SPOT"?10:dt==="BTC"?5:dt==="ES"||dt==="NQ"?.25:.1,F=(dt.includes("BTC"),2),g=f*F,X=Math.round((m?52:40)*q),ne=m?window.innerHeight-150:340,j=55,U=Mt.filter(W=>!W.isEmpty&&W.price_close>0),K=U.map(W=>W.price_high||W.price_close),ee=U.map(W=>W.price_low||W.price_close),ie=K.length>0?Math.max(...K):Le+5,se=ee.length>0?Math.min(...ee):Le-5,be=ie-se,J=(ie+se)/2,re=be/$,te=Math.ceil((J+re/2+g*10)/g)*g,ze=Math.floor((J-re/2-g*10)/g)*g,Z=Mt.length*X,T=ne-10,z=W=>(te-W)/(te-ze)*T,H=W=>W?new Date(W*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"America/New_York"}):"";return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,20,0.99) 0%, rgba(8,8,14,1) 100%)",borderRadius:m?0:8,border:m?"none":"1px solid rgba(255,255,255,0.08)",position:m?"fixed":"relative",top:m?0:void 0,left:m?0:void 0,right:m?0:void 0,bottom:m?0:void 0,zIndex:m?9999:1,overflow:"hidden",width:m?"100vw":"100%",height:m?"100vh":void 0,maxWidth:"100%",boxSizing:"border-box"},children:[m&&e.jsx("button",{onClick:()=>R(!1),style:{position:"absolute",top:20,right:20,background:"rgba(255,100,100,0.5)",border:"1px solid rgba(255,100,100,0.7)",borderRadius:6,padding:"10px 20px",cursor:"pointer",fontSize:14,fontWeight:600,color:"#fff",zIndex:1e4},children:" Close Fullscreen"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%"},children:[e.jsxs("div",{style:{display:"flex",maxWidth:"100%"},children:[e.jsx("div",{ref:W=>{W&&Z>W.clientWidth&&(W.scrollLeft=Z-W.clientWidth)},style:{flex:1,maxWidth:`calc(100% - ${j}px)`,height:ne,overflow:"auto",position:"relative"},children:e.jsx("div",{style:{width:Math.max(Z+80,400),height:ne-10,position:"relative",background:"rgba(8,8,14,1)",paddingRight:60},children:Mt.map((W,fe)=>{if(W.isEmpty)return null;const ce=W.buy||0,Pe=W.sell||0,Ze=W.price_high||W.price_close||Le+1,Se=W.price_low||W.price_close||Le-1,tt=W.price_open||W.price_close||Le,We=W.price_close||Le,ot=We>=tt,ht=z(Ze),kt=z(Se),Rt=z(tt),$t=z(We),Jt=Math.min(Rt,$t),zn=Math.max(Math.abs($t-Rt),2),sr=Math.max(Ze-Se,g),In=Math.max(kt-ht,20),V=m?12:10,me=Math.max(2,Math.floor(In/V)),ft=sr/me,Et=[],Zt=(W.ts||fe)*9301+49297;for(let $e=0;$e<me;$e++){const It=Ze-($e+.5)*ft,D=Math.abs(It-We)/(sr||1),Ve=Math.exp(-D*2)*.6+.3,xe=(Zt+$e*7919)%233280/233280,xt=xe>.1?xe>.7?1.8:xe>.4?1.2:.8:0,Ct=Ve*xt,Lt=(It-Se)/(sr||1),Cn=ot?Lt>.5?1.3:.8:Lt<.5?1.3:.8,Wt=ot?Lt<.5?1.3:.8:Lt>.5?1.3:.8,un=Math.round(ce*Ct*Cn/me),Wn=Math.round(Pe*Ct*Wt/me);Et.push({price:It,sell:Wn,buy:un})}const Ut=Math.max(...Et.map($e=>$e.sell+$e.buy),1),on=Math.max(...Et.map($e=>$e.sell),1),kn=Math.max(...Et.map($e=>$e.buy),1);Et.forEach($e=>$e.isPOC=$e.sell+$e.buy===Ut&&Ut>0);const Ot=($e,It)=>{if(It)return{bg:"#ffffff",border:"2px solid #fff"};if($e===0)return{bg:"rgba(60,40,40,0.4)",border:"1px solid rgba(80,60,60,0.3)"};const D=Math.min(1,$e/on),Ve=255,xe=Math.round(255-D*200),St=Math.round(255-D*200);return{bg:`rgb(${Ve},${xe},${St})`,border:`1px solid rgba(255,${80+(1-D)*120},${80+(1-D)*120},0.8)`}},dn=($e,It)=>{if(It)return{bg:"#ffffff",border:"2px solid #fff"};if($e===0)return{bg:"rgba(40,50,45,0.4)",border:"1px solid rgba(60,80,70,0.3)"};const D=Math.min(1,$e/kn),Ve=Math.round(255-D*200),xe=255,St=Math.round(255-D*180);return{bg:`rgb(${Ve},${xe},${St})`,border:`1px solid rgba(${100+(1-D)*100},255,${100+(1-D)*100},0.8)`}},vn=12,zt=(X-vn)/2;return e.jsxs("div",{style:{position:"absolute",left:fe*X,top:0,width:X,height:T,borderRight:"1px solid rgba(40,40,50,0.5)"},children:[Et.map(($e,It)=>{const D=ht+It*V,Ve=14,xe=$e.sell===0?Ve:Math.max(Ve,zt*.3+zt*.7*($e.sell/on)),St=$e.buy===0?Ve:Math.max(Ve,zt*.3+zt*.7*($e.buy/kn)),xt=Ot($e.sell,$e.isPOC),Ct=dn($e.buy,$e.isPOC),Lt=$e.isPOC?"#000":"#8b0000",Cn=$e.isPOC?"#000":"#006400";return e.jsxs(Ar.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:zt-xe,top:D,width:xe,height:V-1,background:xt.bg,border:xt.border,borderRadius:"2px 0 0 2px",boxShadow:$e.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:2,fontSize:8,fontFamily:"monospace",color:$e.sell===0?"#666":Lt,fontWeight:$e.isPOC?700:600,textShadow:"none",overflow:"hidden"},children:m&&$e.sell}),e.jsx("div",{style:{position:"absolute",left:zt+vn,top:D,width:St,height:V-1,background:Ct.bg,border:Ct.border,borderRadius:"0 2px 2px 0",boxShadow:$e.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:2,fontSize:8,fontFamily:"monospace",color:$e.buy===0?"#666":Cn,fontWeight:$e.isPOC?700:400,textShadow:$e.isPOC||$e.buy===0?"none":"0 0 2px rgba(0,0,0,0.8)",overflow:"hidden"},children:m&&$e.buy})]},It)}),e.jsx("div",{style:{position:"absolute",left:zt+vn/2-1,top:ht,width:2,height:Math.max(kt-ht,1),background:ot?"rgba(0,255,200,0.6)":"rgba(255,0,150,0.6)",boxShadow:ot?"0 0 3px rgba(0,255,255,0.5)":"0 0 3px rgba(255,0,150,0.5)"}}),e.jsx("div",{style:{position:"absolute",left:zt+1,top:Jt,width:vn-2,height:Math.max(zn,3),background:ot?"rgba(100,255,200,0.7)":"rgba(255,100,150,0.7)",border:ot?"1px solid rgba(0,255,255,0.9)":"1px solid rgba(255,0,150,0.9)",borderRadius:2,boxShadow:ot?"0 0 4px rgba(0,255,255,0.6)":"0 0 4px rgba(255,0,150,0.6)"}}),fe===Mt.length-1&&W.ts&&e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Math.min(kt+10,T-25),background:"#00cccc",border:"2px solid #00ffff",borderRadius:4,padding:"4px 12px",fontSize:12,fontWeight:700,color:"#000",whiteSpace:"nowrap",boxShadow:"0 0 15px rgba(0,255,255,0.9)",zIndex:500},children:H(W.ts)})]},fe)})})}),e.jsx("div",{style:{width:j,height:ne,overflow:"hidden",borderLeft:"1px solid rgba(255,255,255,0.2)",background:"rgba(20,20,30,0.95)",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"4px 0",cursor:"ns-resize",userSelect:"none"},onMouseDown:W=>{const fe=W.clientY,ce=$,Pe=Se=>{const tt=(fe-Se.clientY)/100,We=Math.max(.5,Math.min(5,ce+tt));ae(We)},Ze=()=>{document.removeEventListener("mousemove",Pe),document.removeEventListener("mouseup",Ze)};document.addEventListener("mousemove",Pe),document.addEventListener("mouseup",Ze)},onWheel:W=>{W.preventDefault();const fe=W.deltaY>0?-.1:.1;ae(ce=>Math.max(.5,Math.min(5,ce+fe)))},children:[...Array(8)].map((W,fe)=>{const ce=te-fe*(te-ze)/7;return e.jsx("div",{style:{fontSize:9,fontFamily:"monospace",color:"#aaa",paddingLeft:4,lineHeight:1},children:ce.toFixed(1)},fe)})})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.4)",maxWidth:"100%",overflowX:"auto"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Mt.map((W,fe)=>e.jsx("div",{style:{width:X,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",color:"#777",padding:"2px 0"},children:W.isEmpty?"":(W.buy||0)+(W.sell||0)},fe))}),e.jsx("div",{style:{width:j,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Mt.map((W,fe)=>{const ce=W.delta||(W.buy||0)-(W.sell||0),Pe=ce>=0;return e.jsx("div",{style:{width:X,flexShrink:0,textAlign:"center",padding:"2px 1px"},children:!W.isEmpty&&e.jsxs("span",{style:{fontSize:8,fontFamily:"monospace",fontWeight:600,color:"#000",background:Pe?"#40dd80":"#ff5555",padding:"1px 4px",borderRadius:2},children:[Pe?"+":"",typeof ce=="number"?ce.toFixed(0):ce]})},fe)})}),e.jsx("div",{style:{width:j,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Mt.map((W,fe)=>{const ce=W.delta||(W.buy||0)-(W.sell||0),Pe=(W.buy||0)+(W.sell||0),Ze=Pe>0?ce/Pe*100:0;return e.jsx("div",{style:{width:X,flexShrink:0,textAlign:"center",fontSize:7,fontFamily:"monospace",color:Ze>=0?"#40dd80":"#ff5555",padding:"1px 0"},children:W.isEmpty?"":`${Ze.toFixed(1)}%`},fe)})}),e.jsx("div",{style:{width:j,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",cursor:"ew-resize",userSelect:"none"},onMouseDown:W=>{const fe=W.clientX,ce=q,Pe=Se=>{const tt=(fe-Se.clientX)/100,We=Math.max(.5,Math.min(3,ce+tt));v(We)},Ze=()=>{document.removeEventListener("mousemove",Pe),document.removeEventListener("mouseup",Ze)};document.addEventListener("mousemove",Pe),document.addEventListener("mouseup",Ze)},onWheel:W=>{W.preventDefault();const fe=W.deltaY>0?-.1:.1;v(ce=>Math.max(.5,Math.min(3,ce+fe)))},children:[e.jsxs("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",position:"relative",paddingRight:60},children:[Mt.map((W,fe)=>{const ce=fe===Mt.length-1;return e.jsx("div",{style:{width:X,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",padding:"3px 0"},children:W.isEmpty?"":e.jsx("span",{style:{color:ce?"#00ffff":"#555",fontWeight:ce?700:400,background:ce?"rgba(0,255,255,0.25)":"transparent",padding:ce?"2px 6px":0,borderRadius:ce?4:0,border:ce?"1px solid rgba(0,255,255,0.7)":"none",boxShadow:ce?"0 0 6px rgba(0,255,255,0.5)":"none"},children:H(W.ts)})},fe)}),Mt.length>0&&!Mt[Mt.length-1].isEmpty&&e.jsxs("div",{style:{position:"absolute",right:0,top:-20,background:"rgba(0,255,255,0.3)",border:"1px solid rgba(0,255,255,0.8)",borderRadius:4,padding:"2px 8px",fontSize:9,fontWeight:700,color:"#00ffff",boxShadow:"0 0 8px rgba(0,255,255,0.5)",zIndex:100},children:["LIVE: ",H(Mt[Mt.length-1].ts)]})]}),e.jsx("div",{style:{width:j,flexShrink:0}})]})]})]}),!m&&e.jsx("button",{onClick:()=>R(!0),style:{position:"absolute",top:8,right:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:10,color:"#888",zIndex:200},children:" Expand"})]})})()})]})})(),(t==null?void 0:t.contract)==="BTC-SPOT"&&e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10,marginTop:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"BTC ETF FLOWS & INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"TOTAL ETF FLOWS"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"1D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:de.total_flow_1d_mm>0?"#00ff88":de.total_flow_1d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(de.total_flow_1d_mm||0).toFixed(0),"M",de.total_flow_1d_mm>0?" IN":de.total_flow_1d_mm<0?" OUT":""]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"5D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:de.total_flow_5d_mm>0?"#00ff88":de.total_flow_5d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(de.total_flow_5d_mm||0).toFixed(0),"M"]})]})]}),(de.etfs||[]).slice(0,4).map((Y,Re)=>{var Ce,Ie;return e.jsxs("div",{style:{flex:"1 1 120px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#ffaa00",fontWeight:700,marginBottom:4},children:Y.symbol}),e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#fff",marginBottom:2},children:["$",((Ce=Y.price)==null?void 0:Ce.toFixed(2))||"--"]}),e.jsxs("div",{style:{fontSize:9,color:Y.price_change_1d>0?"#00ff88":Y.price_change_1d<0?"#ff4466":"#888"},children:[Y.price_change_1d>0?"+":"",((Ie=Y.price_change_1d)==null?void 0:Ie.toFixed(2))||"0","%"]})]},Re)}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"INSTITUTIONAL SENTIMENT"}),(()=>{const Y=(oe==null?void 0:oe.bitcoin)||{},Re=Y.overall_sentiment||"neutral",Ce=Re==="bullish"?"#00ff88":Re==="bearish"?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Overall"}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:Ce,textTransform:"uppercase"},children:Re})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"ETF Trend"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:Y.etf_flow_trend==="bullish"?"#00ff88":Y.etf_flow_trend==="bearish"?"#ff4466":"#888"},children:Y.etf_flow_trend||"neutral"})]})]})})()]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#ff6b6b",fontWeight:700,marginBottom:6},children:"DERIBIT OPTIONS"}),(()=>{const Y=(S==null?void 0:S.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Max Pain"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:"#ffaa00"},children:["$",(Y.max_pain||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"P/C Ratio"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:Y.put_call_ratio>1?"#ff4466":Y.put_call_ratio<.7?"#00ff88":"#888"},children:(Y.put_call_ratio||0).toFixed(2)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Sentiment"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:Y.sentiment==="bullish"?"#00ff88":Y.sentiment==="bearish"?"#ff4466":"#888"},children:Y.sentiment||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",fontWeight:700,marginBottom:6},children:"GAMMA LEVELS"}),(()=>{const Y=(S==null?void 0:S.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#00ff88"},children:"Call Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(Y.call_wall||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#ff4466"},children:"Put Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(Y.put_wall||0).toLocaleString()]})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"PERP FUNDING RATE"}),(()=>{var Ie,et,Ke;const Y=(O==null?void 0:O.funding_rates)||{},Re=Y.average||0,Ce=Re>.01?"#00ff88":Re<-.01?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"8H Rate"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:Ce},children:[Re>0?"+":"",(Re||0).toFixed(4),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Annual"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:Ce},children:[Y.annualized>0?"+":"",(Y.annualized||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:(Ie=Y.sentiment)!=null&&Ie.includes("bullish")?"#00ff88":(et=Y.sentiment)!=null&&et.includes("bearish")?"#ff4466":"#888"},children:((Ke=Y.sentiment)==null?void 0:Ke.replace("_"," "))||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CME BASIS"}),(()=>{var Ce;const Re=(((Ce=oe==null?void 0:oe.bitcoin)==null?void 0:Ce.cme_basis)||{}).basis_pct||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Futures vs Spot"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:Re>0?"#00ff88":"#ff4466"},children:[Re>0?"+":"",Re.toFixed(2),"%"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Premium tracking"})]})})()]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:8},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var rt;const Y=((rt=oe==null?void 0:oe.bitcoin)==null?void 0:rt.cot)||{},Re=Y.sentiment||"neutral",Ce=Re==="bullish"?"#00ff88":Re==="bearish"?"#ff4466":"#888",Ie=Y.asset_mgr_net||0,et=Y.asset_mgr_net_prev||0,Ke=Y.asset_mgr_change||Ie-et,Je=Y.lev_funds_net||0,_t=Y.lev_funds_net_prev||0,jt=Y.lev_funds_change||Je-_t,Ne=Y.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Asset Managers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Ie/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(et/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:Ke>0?"#00ff88":"#ff4466",fontWeight:600},children:[Ke>0?"+":"",(Ke/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",Ne]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Asset Mgrs"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:Ke>0?"#00ff88":"#ff4466"},children:["(",Ke>0?"+":"",(Ke/1e3).toFixed(1),"K)"]})]})]})}),e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Leveraged Funds Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Je>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Je/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(_t/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:jt>0?"#00ff88":"#ff4466",fontWeight:600},children:[jt>0?"+":"",(jt/1e3).toFixed(1),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Lev Funds"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Je>0?"#00ff88":"#ff4466"},children:[Je>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:jt>0?"#00ff88":"#ff4466"},children:["(",jt>0?"+":"",(jt/1e3).toFixed(1),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:Ce,textTransform:"capitalize"},children:Re})]})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"CME OPEN INTEREST"}),(()=>{var et;const Y=((et=oe==null?void 0:oe.bitcoin)==null?void 0:et.open_interest)||{},Re=Y.total||0,Ce=Y.total_prev||0,Ie=Y.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"CME Bitcoin Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(Re/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(Ce/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"+":"",Ie.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(Re/1e3).toFixed(1),"K BTC"]})]})}),e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(Y.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(Y.change_pct||0)>0?"+":"",(Y.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"+":"",Ie.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(Y.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(Y.change_pct||0)>0?"+":"",(Y.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",fontWeight:700,marginBottom:6},children:"GBTC PREMIUM"}),(()=>{var et;const Y=((et=oe==null?void 0:oe.bitcoin)==null?void 0:et.gbtc)||{},Re=Y.premium_pct||0,Ce=Y.premium_pct_prev||0,Ie=Re-Ce;return e.jsxs(e.Fragment,{children:[e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#888",fontWeight:600,marginBottom:4},children:"GBTC NAV Premium/Discount"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Re>0?"#00ff88":"#ff4466",fontWeight:600},children:[Re>0?"+":"",Re.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[Ce>0?"+":"",Ce.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Change:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"+":"",Ie.toFixed(2),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Premium = bullish demand"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Discount = bearish pressure"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"NAV Premium"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:Re>0?"#00ff88":"#ff4466"},children:[Re>0?"+":"",Re.toFixed(2),"%"]})]})}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Institutional demand"})]})})()]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"CFTC COT Report"}),e.jsx("div",{style:{marginBottom:4,color:"#aaa"},children:"Commitments of Traders"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Data as of:"}),e.jsx("span",{style:{color:"#fff"},children:"Tuesday"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Released:"}),e.jsx("span",{style:{color:"#fff"},children:"Friday 3:30pm ET"})]}),e.jsx("div",{style:{marginTop:6,fontSize:9,color:"#666"},children:"Shows institutional positioning in CME Bitcoin futures"})]}),children:e.jsxs("div",{style:{cursor:"help"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CFTC REPORT"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Weekly Tuesday"}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"Released Fri 3:30pm"})]})})})]})]}),(()=>{const Re=[...ye].slice(0,21).reverse(),Ce=3,Ie=180;let et=0;const Ke=Re.map((g,B,X)=>{const ne=g.delta??0,j=(g.buy||0)+(g.sell||0),U=j>0?ne/j*100:0,K=B>0&&X[B-1].delta||0,ee=ne-K,ie=et;et+=ne;const se=et,be=Math.abs(ne)*.15,J=Math.max(ie,se)+be,re=Math.min(ie,se)-be;return{price_open:g.price_open||0,price_high:g.price_high||0,price_low:g.price_low||0,price_close:g.price_close||0,delta_open:ie,delta_high:J,delta_low:re,delta_close:se,delta:ne,deltaPct:U,deltaChange:ee,volume:j,ts:g.ts||0,isCurrent:!1,isEmpty:!1}});if(Oe.buy>0||Oe.sell>0||Oe.price_open>0){const g=Oe.delta??0,B=ge>0?g/ge*100:0,X=Re.length>0&&Re[Re.length-1].delta||0,ne=g-X,j=Ke.length>0?Ke[Ke.length-1].delta_close:0,U=j,K=j+g,ee=Math.abs(g)*.15,ie=Math.max(U,K)+ee,se=Math.min(U,K)-ee;Ke.push({price_open:Oe.price_open||0,price_high:Oe.price_high||Le,price_low:Oe.price_low||Le,price_close:Le,delta_open:U,delta_high:ie,delta_low:se,delta_close:K,delta:g,deltaPct:B,deltaChange:ne,volume:ge,ts:Oe.candle_start||Date.now()/1e3,isCurrent:!0,isEmpty:!1})}const Je=Ke,_t=Je.filter(g=>g.price_open>0),jt=_t.map(g=>g.price_high),Ne=_t.map(g=>g.price_low),rt=jt.length>0?Math.max(...jt):0,it=Ne.length>0?Math.min(...Ne):0,Rn=rt-it||1,Qe=rt+Rn*.1,Ft=it-Rn*.1,Hn=Qe-Ft||1,nn=Je,Vt=nn.map(g=>g.delta_high),Mt=nn.map(g=>g.delta_low),rn=Vt.length>0?Math.max(...Vt):0,ln=Mt.length>0?Math.min(...Mt):0,xn=rn-ln||50,qn=rn+xn*.15,er=ln-xn*.15,gr=qn-er||1,dt=g=>(Qe-g)/Hn*Ie,f=g=>(qn-g)/gr*Ie,F=g=>g?new Date(g*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",hour12:!1}):"";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{color:"#888",fontSize:10,fontWeight:600,letterSpacing:1},children:"PRICE & DELTA CHARTS"}),e.jsx("button",{onClick:()=>y(!w),style:{background:w?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:w?"Hide Charts":"Show Charts"})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"PRICE OHLC"}),e.jsxs("div",{style:{display:"flex",gap:Ce,height:Ie,overflow:"hidden",position:"relative"},children:[Je.map((g,B)=>{if(g.price_open<=0)return null;const X=g.price_close>=g.price_open,ne=dt(Math.max(g.price_open,g.price_close)),j=Math.max(Math.abs(dt(g.price_open)-dt(g.price_close)),2),U=dt(g.price_high),K=dt(g.price_low)-U,ee=X?"#00ff88":"#ff4466",ie=g.isCurrent?1:.5+B/Je.length*.5,se=b===B;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:Ie,opacity:se?1:ie,cursor:"crosshair"},onMouseEnter:()=>C(B),onMouseLeave:()=>C(null),children:[se&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:U,width:1,height:K,background:ee,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:ne,width:g.isCurrent?"90%":"70%",height:j,background:ee,borderRadius:1,border:g.isCurrent?"1px solid rgba(255,255,255,0.5)":"none"}}),se&&g.ts&&!g.isCurrent&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"2px 6px",fontSize:9,color:"#aaa",whiteSpace:"nowrap",pointerEvents:"none",zIndex:100},children:F(g.ts)}),g.isCurrent&&g.ts&&e.jsx("div",{style:{position:"absolute",bottom:-16,left:"50%",transform:"translateX(-50%)",background:"rgba(0,170,255,0.3)",border:"1px solid rgba(0,170,255,0.6)",borderRadius:3,padding:"1px 4px",fontSize:8,fontWeight:600,color:"#00aaff",whiteSpace:"nowrap",pointerEvents:"none",zIndex:50},children:F(g.ts)})]},B)}),(()=>{var be;const g=t.big_trades||[];if(g.length===0)return null;const B=100/Je.length,X=Je.filter(J=>J.ts>0),ne=X.length>0?Math.min(...X.map(J=>J.ts)):0,j=X.length>0?Math.max(...X.map(J=>J.ts))+300:0,U=g.filter(J=>J.ts>=ne&&J.ts<=j),K={GC:100,NQ:20,ES:50,CL:1e3,BTC:1},ee=t.asset_class||"GC",ie=K[ee]||100,se=((be=t.threshold_stats)==null?void 0:be.avg_size)||3;return t.big_trade_threshold,e.jsxs(e.Fragment,{children:[e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:Ie,pointerEvents:"none",zIndex:20,overflow:"visible"},children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"buyGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#88ffcc",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#00ff88",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#006633",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"buyGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ccffee",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#44ffaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#00cc66",stopOpacity:"0.7"})]}),e.jsxs("radialGradient",{id:"sellGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffaaaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#ff4466",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#881133",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"sellGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffdddd",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#ff6688",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#cc2244",stopOpacity:"0.7"})]}),e.jsxs("filter",{id:"buyGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"sellGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),U.map((J,re)=>{const te=J.ts,ze=Je.findIndex(Se=>{if(!Se.ts)return!1;const tt=Se.ts,We=tt+5*60;return te>=tt&&te<We});if(ze===-1)return null;const Z=(ze+.5)*B,T=dt(J.price),z=h===re,H=Math.min(22,Math.max(8,Math.sqrt(J.size)*2)),W=z?H*1.5:H,fe=J.side==="BUY",ce=fe?z?"url(#buyGradientHover)":"url(#buyGradient)":z?"url(#sellGradientHover)":"url(#sellGradient)",Pe=fe?"#00ff88":"#ff4466",Ze=fe?"#00ff88":"#ff4466";return e.jsxs("g",{style:{cursor:"pointer",pointerEvents:"auto"},onMouseEnter:()=>M(re),onMouseLeave:()=>M(null),children:[e.jsx("circle",{cx:`${Z}%`,cy:T,r:W+(z?12:4),fill:"none",stroke:Pe,strokeWidth:z?3:1,strokeOpacity:z?.5:.2,style:{transition:"all 0.2s ease"}}),e.jsx("circle",{cx:`${Z}%`,cy:T,r:W+(z?6:2),fill:Pe,fillOpacity:z?.25:.1,style:{transition:"all 0.2s ease"}}),e.jsx("circle",{cx:`${Z}%`,cy:T,r:W,fill:ce,stroke:z?"#ffffff":Ze,strokeWidth:z?2:1,filter:z?fe?"url(#buyGlow)":"url(#sellGlow)":"none",style:{transition:"all 0.2s ease"}}),e.jsx("ellipse",{cx:`${Z}%`,cy:T-W*.35,rx:W*.5,ry:W*.25,fill:"rgba(255,255,255,0.4)",style:{transition:"all 0.2s ease"}}),(J.size>=10||z)&&e.jsx("text",{x:`${Z}%`,y:T+(z?4:3),textAnchor:"middle",fontSize:z?11:8,fontWeight:"bold",fill:"#fff",style:{transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:J.size>=1e3?`${(J.size/1e3).toFixed(1)}K`:J.size})]},re)}),U.length===0&&g.length>0&&e.jsxs("text",{x:"50%",y:"20",textAnchor:"middle",fontSize:9,fill:"#666",children:[g.length," big trades (earlier periods)"]})]}),h!==null&&U[h]&&(()=>{const J=U[h],re=J.size*J.price*ie,te=se>0?(J.size/se).toFixed(1):"",ze=new Date(J.ts*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return e.jsxs("div",{style:{position:"absolute",top:4,right:4,background:"rgba(10,10,20,0.95)",border:`2px solid ${J.side==="BUY"?"#00ff88":"#ff4466"}`,borderRadius:8,padding:10,zIndex:100,minWidth:180,boxShadow:`0 4px 20px ${J.side==="BUY"?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:J.side==="BUY"?"#00ff88":"#ff4466",marginBottom:6},children:J.side==="BUY"?" BIG BUY":" BIG SELL"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr",gap:"3px 8px",fontSize:10},children:[e.jsx("span",{style:{color:"#666"},children:"Size:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:700},children:[J.size," contracts"]}),e.jsx("span",{style:{color:"#666"},children:"Price:"}),e.jsxs("span",{style:{color:"#fff"},children:["$",J.price.toFixed(2)]}),e.jsx("span",{style:{color:"#666"},children:"Notional:"}),e.jsxs("span",{style:{color:"#ffaa00",fontWeight:600},children:["$",(re/1e6).toFixed(2),"M"]}),e.jsx("span",{style:{color:"#666"},children:"vs Average:"}),e.jsxs("span",{style:{color:parseFloat(te)>2?"#00ff88":"#fff"},children:[te,"x larger"]}),e.jsx("span",{style:{color:"#666"},children:"Time:"}),e.jsxs("span",{style:{color:"#888"},children:[ze," ET"]})]}),e.jsx("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#666"},children:"Top 10% of trades by size"})]})})()]})})()]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",alignItems:"center",marginTop:4,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG BUY"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ff4466",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG SELL"})]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("div",{style:{color:"#f97316"},children:[(t.big_trades||[]).length," trades ",t.big_trade_threshold||10," (P90)"]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"DELTA OHLC  DIVERGENCE GLOW"}),e.jsx("div",{style:{display:"flex",gap:Ce,height:Ie,overflow:"hidden",position:"relative"},children:Je.map((g,B)=>{const X=g.delta_open,ne=g.delta_high,j=g.delta_low,U=g.delta_close,K=g.price_open,ee=g.price_close,ie=U>=X,se=ee>=K,be=ie!==se,J=f(Math.max(X,U)),re=Math.max(Math.abs(f(X)-f(U)),2),te=f(ne),ze=f(j)-te,Z=ie?"#00ff88":"#ff4466",T=g.isCurrent?1:.5+B/Je.length*.5,z=b===B;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:Ie,opacity:z?1:T,cursor:"crosshair"},onMouseEnter:()=>C(B),onMouseLeave:()=>C(null),children:[z&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:te,width:1,height:Math.max(ze,0),background:Z,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:J,width:g.isCurrent?"90%":"70%",height:re,background:Z,borderRadius:1,border:g.isCurrent?"1px solid rgba(255,255,255,0.5)":"none",boxShadow:be?`0 0 8px ${Z}, 0 0 12px ${Z}`:"none"}})]},B)})}),e.jsx("div",{style:{display:"flex",gap:Ce,marginTop:6},children:Je.map((g,B)=>{const X=g.delta>=0?"#00ff88":"#ff4466",ne=g.isCurrent?1:.5+B/Je.length*.5,j=K=>Math.abs(K)>=1e3?`${(K/1e3).toFixed(1)}k`:Math.round(K),U=b===B;return e.jsxs("div",{onMouseEnter:()=>C(B),onMouseLeave:()=>C(null),style:{flex:"1 1 0",minWidth:0,textAlign:"center",opacity:U?1:ne,background:g.isCurrent?"rgba(0,170,255,0.12)":U?"rgba(255,255,255,0.05)":"transparent",borderRadius:4,padding:"3px 1px",border:g.isCurrent?"1px solid rgba(0,170,255,0.25)":"none",cursor:"pointer",transition:"opacity 0.15s"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",fontFamily:"monospace",overflow:"hidden",textOverflow:"ellipsis"},children:F(g.ts)}),e.jsxs("div",{style:{fontSize:10,color:X,fontFamily:"monospace",fontWeight:700},children:[g.deltaPct>=0?"+":"",(g.deltaPct||0).toFixed(0),"%"]}),e.jsx("div",{style:{fontSize:8,color:"#888",fontFamily:"monospace"},children:j(g.volume||0)})]},B)})})]})]})]})})()]})]}),(()=>{var er,gr,dt,f,F,g,B,X;const Y=((er=t.volume_5m)==null?void 0:er.history)||[],Re=Y.length<5,Ce=Y.slice(0,10),Ie=Y.slice(10,20),et=Ce.reduce((ne,j)=>ne+(j.delta||0),0),Ke=Ie.reduce((ne,j)=>ne+(j.delta||0),0),Je=et-Ke,_t=((gr=Ce[Ce.length-1])==null?void 0:gr.price_open)||0,jt=((dt=Ce[0])==null?void 0:dt.price_close)||0,Ne=jt-_t,rt=_t>0?Ne/_t*100:0,it=500,Rn=.1;let Qe="BALANCED";Math.abs(Je)>it&&(Je<-it&&rt>-Rn?Qe="DISTRIBUTION":Je>it&&rt<Rn&&(Qe="ACCUMULATION"));const Ft=Ce[0]||{},Hn=Math.abs((Ft.price_high||0)-(Ft.price_low||0)),nn=Ft.delta||0;let Vt="NEUTRAL";Math.abs(nn)>100&&Hn<5?Vt=nn>0?"BULL_ABSORPTION":"BEAR_ABSORPTION":Hn>10&&Math.abs(nn)>100&&(Vt=nn>0?"BULL_FOLLOW":"BEAR_FOLLOW");const Mt=Je*Ne<0&&Math.abs(Je)>it,rn=Ce.length>0?et/Ce.length:0;Ie.length>0&&Ke/Ie.length;const ln=t.big_trades_buy||0,xn=t.big_trades_sell||0,qn=(t.big_trades||[]).length;return e.jsxs("div",{style:{maxWidth:1400,margin:"12px auto 0",background:Re?"rgba(255,255,255,0.02)":Qe==="DISTRIBUTION"?"rgba(255,68,102,0.08)":Qe==="ACCUMULATION"?"rgba(0,255,136,0.08)":"rgba(255,255,255,0.02)",border:`1px solid ${Re?"rgba(255,255,255,0.08)":Qe==="DISTRIBUTION"?"rgba(255,68,102,0.3)":Qe==="ACCUMULATION"?"rgba(0,255,136,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:8,padding:10},children:[e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",gap:6},onClick:()=>x(!Me),children:["ORDER FLOW ANALYSIS",e.jsx("span",{style:{fontSize:10,color:Me?"#00aaff":"#555",background:Me?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",borderRadius:10,padding:"1px 6px",transition:"all 0.2s"},children:""}),Re&&e.jsxs("span",{style:{color:"#ffaa00"},children:[" Collecting data (",Y.length,"/5 candles)"]})]}),Me&&e.jsxs("div",{style:{marginTop:12,background:"#0a0a12",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:12,marginBottom:12},children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Qe==="DISTRIBUTION"?"#ff4466":Qe==="ACCUMULATION"?"#00ff88":"#00aaff",marginBottom:6},children:Qe==="DISTRIBUTION"?" DISTRIBUTION DETECTED":Qe==="ACCUMULATION"?" ACCUMULATION DETECTED":" BALANCED / NO CLEAR REGIME"}),e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:Qe==="DISTRIBUTION"?"Sellers building pressure while price holds - expect downside breakout":Qe==="ACCUMULATION"?"Buyers building pressure while price holds - expect upside breakout":"CVD and price moving together or no significant pressure detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#00aaff",borderRadius:"50%"}}),"CVD ANALYSIS (Cumulative Volume Delta)"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Session CVD:"}),e.jsxs("div",{style:{color:(t.cumulative_delta||0)>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[(t.cumulative_delta||0)>=0?"+":"",(t.cumulative_delta||0).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Recent CVD (10 bars):"}),e.jsxs("div",{style:{color:et>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[et>=0?"+":"",et.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Prior CVD (10 bars):"}),e.jsxs("div",{style:{color:Ke>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[Ke>=0?"+":"",Ke.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"CVD Trend ():"}),e.jsxs("div",{style:{color:Je>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[Je>=0?"+":"",Je.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Avg Delta/Bar:"}),e.jsxs("div",{style:{color:rn>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[rn>=0?"+":"",rn.toFixed(0)]}),e.jsx("div",{style:{color:"#777"},children:"Regime Threshold:"}),e.jsxs("div",{style:{color:"#999",fontFamily:"monospace"},children:["",it]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#ffaa00",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#ffaa00",borderRadius:"50%"}}),"PRICE ANALYSIS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Current Price:"}),e.jsxs("div",{style:{color:"#00aaff",fontFamily:"monospace",fontWeight:700,fontSize:13},children:["$",(t.current_price||0).toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"50m Start Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:_t>0?`$${_t.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"50m End Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:jt>0?`$${jt.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"Price Change (50m):"}),e.jsx("div",{style:{color:Ne>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:_t>0?`${Ne>=0?"+":""}${Ne.toFixed(2)} (${rt>=0?"+":""}${rt.toFixed(3)}%)`:""})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#a855f7",borderRadius:"50%"}}),"VSA (Volume Spread Analysis) - Last 5m Bar"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Price Spread:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:["$",Hn.toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"Bar Delta:"}),e.jsxs("div",{style:{color:nn>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[nn>=0?"+":"",nn.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Buy Volume:"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:(Ft.buy||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Sell Volume:"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:(Ft.sell||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Signal:"}),e.jsx("div",{style:{color:Vt.includes("BULL")?"#00ff88":Vt.includes("BEAR")?"#ff4466":"#888",fontWeight:700},children:Vt.replace("_"," ")})]}),e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:8,padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6,marginLeft:14},children:Vt.includes("ABSORPTION")?" High delta + Low spread = Strong hands absorbing pressure":Vt.includes("FOLLOW")?" High delta + High spread = Momentum follow-through":" No significant volume-price relationship detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#f97316",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#f97316",borderRadius:"50%"}}),"BIG TRADES (",t.big_trade_threshold||10," contracts) - Institutional Activity"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Big Buy Volume:"}),e.jsxs("div",{style:{color:"#00ff88",fontFamily:"monospace",fontWeight:600},children:[ln.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Big Sell Volume:"}),e.jsxs("div",{style:{color:"#ff4466",fontFamily:"monospace",fontWeight:600},children:[xn.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Net Big Delta:"}),e.jsxs("div",{style:{color:ln-xn>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:14},children:[ln-xn>=0?"+":"",(ln-xn).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Trade Count:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[qn," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Imbalance:"}),e.jsx("div",{style:{color:ln>xn?"#00ff88":xn>ln?"#ff4466":"#888",fontWeight:600},children:ln>xn?" BUYERS dominant":xn>ln?" SELLERS dominant":" Balanced"})]}),e.jsxs("div",{style:{background:"rgba(249,115,22,0.1)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:6,padding:10,marginTop:12,marginLeft:14},children:[e.jsx("div",{style:{fontSize:10,color:"#f97316",fontWeight:600,marginBottom:6},children:"THRESHOLD CALCULATION (90th Percentile)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"110px 1fr",gap:"4px 12px",fontSize:10},children:[e.jsx("div",{style:{color:"#777"},children:"Sample Size:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((f=t.threshold_stats)==null?void 0:f.sample_count)||0).toLocaleString()," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Average Trade:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((F=t.threshold_stats)==null?void 0:F.avg_size)||0).toFixed(1)," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"90th Percentile:"}),e.jsxs("div",{style:{color:"#f97316",fontFamily:"monospace",fontWeight:700},children:[((g=t.threshold_stats)==null?void 0:g.p90_size)||t.big_trade_threshold||10," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Trade Range:"}),e.jsxs("div",{style:{color:"#888",fontFamily:"monospace"},children:[((B=t.threshold_stats)==null?void 0:B.min_size)||1," - ",((X=t.threshold_stats)==null?void 0:X.max_size)||"?"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:8,fontStyle:"italic"},children:"Trades above 90th percentile are flagged as institutional activity"})]})]}),e.jsxs("div",{style:{background:Mt?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.1)",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontSize:11,color:Mt?"#ffaa00":"#00ff88",fontWeight:600,marginBottom:6},children:Mt?" DIVERGENCE DETECTED":" CVD & PRICE ALIGNED"}),e.jsx("div",{style:{fontSize:10,color:"#999",lineHeight:1.4},children:Mt?`CVD trending ${Je>0?"UP":"DOWN"} while price moving ${Ne>0?"UP":"DOWN"} - potential reversal signal`:"CVD direction matches price direction - trend continuation likely"})]}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:10,color:"#666",textAlign:"center"},children:["Based on Fabio's World Trading Championship model  ",Y.length," candles analyzed"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{flex:"0 0 auto",background:Qe==="DISTRIBUTION"?"rgba(255,68,102,0.15)":Qe==="ACCUMULATION"?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.05)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:`1px solid ${Qe==="DISTRIBUTION"?"#ff446650":Qe==="ACCUMULATION"?"#00ff8850":"#ffffff10"}`},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"REGIME"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:Qe==="DISTRIBUTION"?"#ff4466":Qe==="ACCUMULATION"?"#00ff88":"#888"},children:[Qe==="DISTRIBUTION"?"":Qe==="ACCUMULATION"?"":""," ",Qe]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CVD TREND (50m)"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:Je>=0?"#00ff88":"#ff4466"},children:[Je>=0?"+":"",Je.toLocaleString()]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"PRICE "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:Ne>=0?"#00ff88":"#ff4466"},children:[Ne>=0?"+":"",Ne.toFixed(2)]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:Mt?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.08)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:Mt?"1px solid #ffaa0050":"1px solid #00ff8830"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"DIVERGENCE"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:Mt?"#ffaa00":"#00ff88"},children:Mt?" DETECTED":" ALIGNED"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:Vt.includes("ABSORPTION")?"rgba(0,170,255,0.1)":Vt.includes("FOLLOW")?"rgba(0,255,136,0.1)":"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"VSA SIGNAL"}),e.jsx("div",{style:{fontSize:11,fontWeight:700,color:Vt.includes("BULL")?"#00ff88":Vt.includes("BEAR")?"#ff4466":"#888"},children:Vt==="BULL_ABSORPTION"?" ABSORPTION":Vt==="BEAR_ABSORPTION"?" ABSORPTION":Vt==="BULL_FOLLOW"?" FOLLOW":Vt==="BEAR_FOLLOW"?" FOLLOW":" NEUTRAL"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"BIG TRADES "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:(t.big_trades_delta||0)>=0?"#00ff88":"#ff4466"},children:[(t.big_trades_delta||0)>=0?"+":"",(t.big_trades_delta||0).toLocaleString()]})]})]})]})})(),(t==null?void 0:t.contract)!=="BTC-SPOT"&&e.jsxs("div",{style:{maxWidth:1400,margin:"12px auto 0",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"GOLD INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CENTRAL BANKS"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:2},children:"Net Buyers 15+ Years"}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:"Accumulating gold reserves"})]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var rt,it;const Y=((rt=oe==null?void 0:oe.gold)==null?void 0:rt.cot)||{},Re=Y.sentiment||((it=oe==null?void 0:oe.gold)==null?void 0:it.cot_sentiment)||"neutral",Ce=Re==="bullish"?"#00ff88":Re==="bearish"?"#ff4466":"#888",Ie=Y.managed_money_net||0,et=Y.managed_money_net_prev||0,Ke=Y.managed_money_change||Ie-et,Je=Y.swap_dealers_net||0,_t=Y.swap_dealers_net_prev||0,jt=Y.swap_dealers_change||Je-_t,Ne=Y.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Managed Money Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Ie/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(et/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:Ke>0?"#00ff88":"#ff4466",fontWeight:600},children:[Ke>0?"+":"",(Ke/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",Ne]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Managed Money"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:Ke>0?"#00ff88":"#ff4466"},children:["(",Ke>0?"+":"",(Ke/1e3).toFixed(0),"K)"]})]})]})}),e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Swap Dealers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:Je>0?"#00ff88":"#ff4466",fontWeight:600},children:[(Je/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(_t/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:jt>0?"#00ff88":"#ff4466",fontWeight:600},children:[jt>0?"+":"",(jt/1e3).toFixed(0),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Swap Dealers"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:Je>0?"#00ff88":"#ff4466"},children:[Je>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:jt>0?"#00ff88":"#ff4466"},children:["(",jt>0?"+":"",(jt/1e3).toFixed(0),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:Ce,textTransform:"capitalize"},children:Re})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"COMEX OPEN INTEREST"}),(()=>{var et;const Y=((et=oe==null?void 0:oe.gold)==null?void 0:et.open_interest)||{},Re=Y.total||0,Ce=Y.total_prev||0,Ie=Y.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"COMEX Gold Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(Re/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(Ce/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"+":"",Ie.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(Re/1e3).toFixed(0),"K Contracts"]})]})}),e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(Y.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(Y.change_pct||0)>0?"+":"",(Y.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"+":"",Ie.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(Y.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(Y.change_pct||0)>0?"+":"",(Y.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"GOLD ETF FLOWS"}),(()=>{var Je;const Y=((Je=oe==null?void 0:oe.gold)==null?void 0:Je.etf)||{},Re=Y.gld_holdings||0,Ce=Y.gld_holdings_prev||0,Ie=Re-Ce,et=Y.monthly_flow||0,Ke=Y.weekly_flow||0;return e.jsxs(e.Fragment,{children:[e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"GLD ETF Holdings"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(Re/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(Ce/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:Ie>0?"#00ff88":"#ff4466"},children:[Ie>0?"+":"",(Ie/1e3).toFixed(0),"K oz"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"GLD Holdings"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(Re/1e6).toFixed(1),"M oz"]})]})}),e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"ETF Flow Data"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Weekly:"}),e.jsxs("span",{style:{color:Ke>0?"#00ff88":"#ff4466"},children:[Ke>0?"+":"",Ke," tons"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Monthly:"}),e.jsxs("span",{style:{color:et>0?"#00ff88":"#ff4466"},children:[et>0?"+":"",et," tons"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Positive = inflows (bullish)"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Negative = outflows (bearish)"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Weekly Flow"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:Ke>0?"#00ff88":"#ff4466"},children:[Ke>0?"+":"",Ke.toFixed(0)," tons"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:[e.jsx(mr,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:600,marginBottom:6},children:"Signal Composition"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"COT Positioning:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"Central Banks:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"ETF Flows:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:4},children:[e.jsx("span",{style:{color:"#888"},children:"Options Gamma:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:4,marginTop:4},children:[e.jsx("div",{style:{fontSize:9,color:"#666"},children:"CFTC Report: Tuesday data"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Released: Friday 3:30pm ET"})]})]}),children:e.jsx("div",{style:{cursor:"help"},children:e.jsx("div",{style:{fontSize:9,color:"#888",marginBottom:4},children:"OVERALL SIGNAL"})})}),(()=>{const Y=(oe==null?void 0:oe.gold)||{},Re=Y.overall_sentiment||"neutral";Y.confidence;const Ce=Re==="bullish"?"#00ff88":Re==="bearish"?"#ff4466":"#ffaa00";return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Ce,textTransform:"uppercase",marginBottom:4},children:Re}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"CFTC Fri 3:30pm"})]})})()]})]})]})]})},Tg=({selectedContract:t="ES"})=>{const[n,r]=L.useState("horizon"),[i,o]=L.useState(null),[s,l]=L.useState(!1),[a,c]=L.useState(null),[p,w]=L.useState(null),[y,h]=L.useState(null),[M,k]=L.useState({x:0,y:0}),[G,Me]=L.useState("current"),[x,b]=L.useState(null),[C,d]=L.useState(null),{isMobile:A}=Ri(),[m,R]=L.useState(!1),[$,ae]=L.useState("japan_ib"),[q,v]=L.useState(10),[u,I]=L.useState("long"),[_e,E]=L.useState(new Set),[oe,Xe]=L.useState("all"),[de,Be]=L.useState("all"),[S,P]=L.useState(null),[O,ke]=L.useState(!1),[Fe,qe]=L.useState(!0),bt=(()=>{const ve=new Date,Ae=(De=>{const Bt=new Date(Date.UTC(De.getFullYear(),De.getMonth(),De.getDate())),pt=Bt.getUTCDay()||7;Bt.setUTCDate(Bt.getUTCDate()+4-pt);const yt=new Date(Date.UTC(Bt.getUTCFullYear(),0,1));return Math.ceil(((Bt-yt)/864e5+1)/7)})(ve),Ee=ve.getFullYear(),He=[];for(let De=5;De>=1;De--){let Bt=Ae-De,pt=Ee;Bt<=0&&(Bt=52+Bt,pt=Ee-1),He.push({id:`w${De}`,label:`W${Bt}`,weekNum:Bt,year:pt})}return He.push({id:"current",label:"Current",weekNum:Ae,year:Ee}),He})(),Q=(()=>{const ve=[{id:"all",label:"All 12 Months"}],je=new Date;for(let Ae=0;Ae<12;Ae++){const Ee=new Date(je.getFullYear(),je.getMonth()-Ae,1),He=`${Ee.getFullYear()}-${String(Ee.getMonth()+1).padStart(2,"0")}`,De=Ee.toLocaleDateString("en-US",{month:"short",year:"2-digit"});ve.push({id:He,label:De,year:Ee.getFullYear(),month:Ee.getMonth()+1})}return ve})(),ue=[{id:"pre_asia",name:"Pre Asia",start:"18:00",end:"19:00",color:"#4B5563",horizon:!1},{id:"japan_ib",name:"Japan",start:"19:00",end:"20:00",color:"#9370DB",horizon:!0},{id:"china",name:"China",start:"20:00",end:"23:00",color:"#F472B6",horizon:!0},{id:"asia_close",name:"Asia Close",start:"23:00",end:"02:00",color:"#4B5563",horizon:!1},{id:"deadzone",name:"Dead Zone",start:"02:00",end:"03:00",color:"#6B7280",horizon:!0},{id:"london",name:"London",start:"03:00",end:"06:00",color:"#3B82F6",horizon:!0},{id:"low_volume",name:"Low Vol",start:"06:00",end:"08:20",color:"#4B5563",horizon:!1},{id:"us_ib",name:"US IB",start:"08:20",end:"09:30",color:"#F59E0B",horizon:!0},{id:"ny_1h",name:"NY 1H",start:"09:30",end:"10:30",color:"#10B981",horizon:!0},{id:"ny_2h",name:"NY 2H",start:"10:30",end:"11:30",color:"#06B6D4",horizon:!0},{id:"lunch",name:"Lunch",start:"11:30",end:"13:30",color:"#8B5CF6",horizon:!0},{id:"ny_pm",name:"NY PM",start:"13:30",end:"16:00",color:"#EF4444",horizon:!0},{id:"ny_close",name:"NY Close",start:"16:00",end:"17:00",color:"#4B5563",horizon:!1},{id:"market_closed",name:"Market Closed",start:"17:00",end:"18:00",color:"#1F2937",horizon:!1}],he=(n==="horizon"?ue.filter(ve=>ve.horizon):ue).filter(ve=>ve.id!=="market_closed"),ge=(()=>{const ve=new Date,je=ve.getTime()+ve.getTimezoneOffset()*6e4,Ae=new Date(je-5*36e5),Ee=Ae.getHours(),He=Ae.getMinutes(),De=Ee*100+He;return De>=1900&&De<2e3?"japan_ib":De>=2e3&&De<2300?"china":De>=2300||De<200?"asia_close":De>=200&&De<300?"deadzone":De>=300&&De<600?"london":De>=600&&De<820?"low_volume":De>=820&&De<930?"us_ib":De>=930&&De<1030?"ny_1h":De>=1030&&De<1130?"ny_2h":De>=1130&&De<1330?"lunch":De>=1330&&De<1600?"ny_pm":De>=1600&&De<1700?"ny_close":De>=1700&&De<1800?"market_closed":De>=1800&&De<1900?"pre_asia":null})(),Ge=["pre_asia","japan_ib","china","asia_close","deadzone","london","low_volume","us_ib","ny_1h","ny_2h","lunch","ny_pm","ny_close","market_closed"],vt=ve=>{if(ve===ge)return"NOW";const je=Ge.indexOf(ge),Ae=Ge.indexOf(ve);return je===-1?"WAITING":Ae<je?"ENDED":"WAITING"},Ye=(()=>{const ve=new Date,je={timeZone:"America/New_York"},Ee=new Intl.DateTimeFormat("en-US",{...je,weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}).formatToParts(ve),He=Ee.find(yt=>yt.type==="weekday").value,De=parseInt(Ee.find(yt=>yt.type==="hour").value),Bt=parseInt(Ee.find(yt=>yt.type==="minute").value),pt=De*100+Bt;return He==="Saturday"?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:He==="Sunday"&&pt<1800?{closed:!0,isWeekend:!0,reopenDay:"Today",reopenTime:"18:00 ET"}:He==="Friday"&&pt>=1700?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:pt>=1700&&pt<1800?{closed:!0,isWeekend:!1,reopenTime:"18:00 ET"}:{closed:!1,isWeekend:!1}})(),[N,Xt]=L.useState(!0),[an,fn]=L.useState(null);L.useEffect(()=>{let ve=!0;const je=async()=>{try{const Ee=await fetch(Kt);if(Ee.ok&&ve){const He=await Ee.json();w({sessionHigh:He.session_high||0,sessionLow:He.session_low||0,sessionOpen:He.session_open||0,currentPrice:He.current_price||0,sessionId:He.current_session_id,vwap:He.vwap||0,dayOpen:He.day_open||0,dayHigh:He.day_high||0,dayLow:He.day_low||0,totalVolume:He.total_volume||0,sessionVolume:He.session_volume||He.total_volume||0,sessionDelta:He.session_delta||He.cumulative_delta||0,cumulativeDelta:He.cumulative_delta||0,endedSessions:He.ended_sessions||{}})}}catch(Ee){console.error("Live data fetch error:",Ee)}};je();const Ae=setInterval(je,2e3);return()=>{ve=!1,clearInterval(Ae)}},[]),L.useEffect(()=>{let ve=!0,je=null;const Ae=async()=>{if(ve){Xt(!0),fn(null);try{const Ee=await fetch(`${Kt}/session-history`);if(!Ee.ok)throw new Error(`HTTP ${Ee.status}: ${Ee.statusText}`);const He=await Ee.json();if(He.loading){je=setTimeout(()=>{ve&&Ae()},2e3);return}const De={japan_ib:"japan_ib",china:"china",london:"london",us_ib:"us_ib",ny_1h:"ny_1h"},Bt={};ue.forEach(pt=>{const yt=He[pt.id];if(yt)Bt[pt.id]={todayRange:yt.todayRange||0,pDR:yt.pDR||0,avgRange:yt.avgRange||0,cW:yt.cW||0,pW:yt.pW||0,CM:yt.CM||0,PM:yt.PM||0,max:yt.max||0,min:yt.min||0};else{let gt=pt.id.split("").reduce((_n,Dn)=>_n+Dn.charCodeAt(0),0);const Ln=()=>(gt=(gt*9301+49297)%233280,gt/233280),tn=pt.horizon?5+Ln()*10:3+Ln()*5,mn=Array.from({length:40},()=>tn*(.8+Ln()*.4)),On=_n=>_n.length>0?_n.reduce((Dn,or)=>Dn+or,0)/_n.length:0,bn=mn.slice(1,11);Bt[pt.id]={todayRange:mn[0]||0,pDR:mn[1]||0,avgRange:On(bn),cW:On(mn.slice(0,5)),pW:On(mn.slice(5,10))||0,CM:On(mn.slice(0,20)),PM:On(mn.slice(20,40))||0,max:bn.length>0?Math.max(...bn):0,min:bn.length>0?Math.min(...bn):0}}}),o(Bt)}catch(Ee){console.error("Failed to fetch session history:",Ee),fn(Ee.message)}finally{Xt(!1)}}};return Ae(),()=>{ve=!1,je&&clearTimeout(je)}},[]);const at=ve=>`horizon_sessions_${t}_${ve}`,Dt=ve=>{try{const je=localStorage.getItem(at(ve));if(je){const{data:Ae,timestamp:Ee}=JSON.parse(je),He=ve==="current"?3e5:36e5;if(Date.now()-Ee<He)return Ae}}catch{}return null},pe=(ve,je)=>{try{localStorage.setItem(at(ve),JSON.stringify({data:je,timestamp:Date.now()}))}catch{}},le={ES:[5500,6500],GC:[2500,3100],BTC:[75e3,13e4]},nt=(ve,je)=>{if(!ve||!ve.length)return!1;const Ae=(je==null?void 0:je.substring(0,2))||"",Ee=le[Ae];if(!Ee)return!0;for(const He of ve)if(He.sessions)for(const De of Object.keys(He.sessions)){const Bt=He.sessions[De];if((Bt==null?void 0:Bt.h)>0)return Bt.h>=Ee[0]&&Bt.h<=Ee[1]?!0:(console.warn(`Data validation failed: price ${Bt.h} not in expected range ${Ee[0]}-${Ee[1]} for ${je}`),!1)}return!0},Ht=async()=>{try{["current","w1","w2","w3","w4","w5"].forEach(Ae=>localStorage.removeItem(at(Ae))),c(null);const je=await fetch(`${Kt}/historical-sessions?week=${G}&stock=${t}&nocache=${Date.now()}`);if(je.ok){const Ae=await je.json();Ae.days&&!Ae.loading&&(nt(Ae.days,t)?(c(Ae.days),pe(G,Ae.days)):(console.error("Received data for wrong contract, not caching"),c(Ae.days)))}}catch(ve){console.error("Failed to refresh:",ve)}};return L.useEffect(()=>{const ve=async()=>{const Ae=Dt(G);Ae&&nt(Ae,t)?c(Ae):Ae&&localStorage.removeItem(at(G));try{const Ee=await fetch(`${Kt}/historical-sessions?week=${G}&stock=${t}`);if(Ee.ok){const He=await Ee.json();He.days&&!He.loading&&(nt(He.days,t)?(c(He.days),pe(G,He.days)):(c(He.days),console.error(`Backend returned wrong data for ${t}. Backend needs to clear its cache.`)))}}catch(Ee){console.error("Failed to fetch historical sessions:",Ee)}};ve();const je=setInterval(ve,G==="current"?3e5:36e5);return()=>clearInterval(je)},[G,t]),L.useEffect(()=>{(async()=>{const je=`horizon_strategy_${t}_12m`;try{const Ae=localStorage.getItem(je);if(Ae){const{data:Ee,timestamp:He}=JSON.parse(Ae);if(Date.now()-He<864e5&&nt(Ee,t)){P(Ee);return}}}catch{}ke(!0);try{const Ae=await fetch(`${Kt}/historical-sessions?months=12&stock=${t}`);if(Ae.ok){const Ee=await Ae.json();Ee.days&&!Ee.loading&&(nt(Ee.days,t)?(P(Ee.days),localStorage.setItem(je,JSON.stringify({data:Ee.days,timestamp:Date.now()}))):P(Ee.days))}}catch(Ae){console.error("Failed to fetch strategy data:",Ae)}ke(!1)})()},[t]),N?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading session history from Databento..."]}):an?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,color:"#ff4466"},children:""}),e.jsx("div",{style:{color:"#ff4466",marginBottom:8},children:"Failed to load session data"}),e.jsx("div",{style:{color:"#666",fontSize:12},children:an})]}):i?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:A?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:A?"column":"row",justifyContent:"space-between",alignItems:A?"flex-start":"center",marginBottom:A?16:24,gap:A?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:A?16:20},children:A?"Session Analysis":" Session Analysis"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:A?11:13},children:"Historical Session Range Analysis  Range = High - Low"})]}),e.jsx("div",{style:{display:"flex",gap:A?8:12,alignItems:"center",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>r("horizon"),style:{padding:A?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="horizon"?"#8B5CF6":"rgba(255,255,255,0.1)",color:n==="horizon"?"#fff":"#888",fontSize:A?10:11,fontWeight:600,cursor:"pointer"},children:"Horizon"}),e.jsx("button",{onClick:()=>r("universe"),style:{padding:A?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="universe"?"#3B82F6":"rgba(255,255,255,0.1)",color:n==="universe"?"#fff":"#888",fontSize:A?10:11,fontWeight:600,cursor:"pointer"},children:"Universe"})]})})]}),Ye.closed&&e.jsxs("div",{style:{background:Ye.isWeekend?"linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)":"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:Ye.isWeekend?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,padding:"16px 24px",marginBottom:20,display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:Ye.isWeekend?"":""}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:Ye.isWeekend?"#A78BFA":"#00ff88",fontSize:14,fontWeight:700,letterSpacing:1,textTransform:"uppercase"},children:Ye.isWeekend?"Weekend":"Market Closed"}),e.jsx("div",{style:{color:"#888",fontSize:12,marginTop:4},children:Ye.isWeekend?`Market Reopens ${Ye.reopenDay} ${Ye.reopenTime}`:`Reopens ${Ye.reopenTime}`})]})]}),(()=>{var Qe,Ft,Hn,nn,Vt,Mt,rn,ln,xn,qn,er,gr,dt;let ve=0,je=1/0,Ae=null,Ee=null,He=null,De=null;const Bt=new Set(he.map(f=>f.id));a&&a.length>0&&a.forEach(f=>{Object.entries(f.sessions||{}).forEach(([F,g])=>{Bt.has(F)&&g&&g.h>0&&(g.h>ve&&(ve=g.h,Ae=f.date,Ee=F),g.l>0&&g.l<je&&(je=g.l,He=f.date,De=F))})});const pt=(()=>{const f=new Date;return`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}`})(),yt=Ye.closed&&a&&a.length>0,gt=yt?a[0]:null,Ln=gt?Object.fromEntries(Object.entries(gt.sessions||{}).map(([f,F])=>[f,{open:F.o,high:F.h,low:F.l,close:F.c,volume:F.v||0,delta:F.d||0}])):{},tn=yt?Ln:(p==null?void 0:p.endedSessions)||{},mn=yt?((Qe=gt==null?void 0:gt.day)==null?void 0:Qe.c)||0:(p==null?void 0:p.currentPrice)||0,On=yt?((Ft=gt==null?void 0:gt.day)==null?void 0:Ft.o)||0:(p==null?void 0:p.dayOpen)||0,bn=yt?((Hn=gt==null?void 0:gt.day)==null?void 0:Hn.h)||0:(p==null?void 0:p.dayHigh)||0,_n=yt?((nn=gt==null?void 0:gt.day)==null?void 0:nn.l)||0:(p==null?void 0:p.dayLow)||0,Dn=yt?((Vt=gt==null?void 0:gt.day)==null?void 0:Vt.v)||0:(p==null?void 0:p.totalVolume)||0,or=yt?((Mt=gt==null?void 0:gt.day)==null?void 0:Mt.d)||0:(p==null?void 0:p.cumulativeDelta)||0,Br=yt?(gt==null?void 0:gt.label)||"Friday":(()=>{const f=new Date,F=String(f.getMonth()+1).padStart(2,"0"),g=String(f.getDate()).padStart(2,"0");return`${F}-${g} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f.getDay()]}`})(),hr=he.map(f=>{const F=vt(f.id),g=tn[f.id]||{},B=F==="NOW",X=i[f.id]||{},ne=B?(p==null?void 0:p.sessionOpen)||0:g.open||0,j=B?(p==null?void 0:p.sessionHigh)||0:g.high||0,U=B?(p==null?void 0:p.sessionLow)||0:g.low||0,K=B?mn:g.close||0,ee=B?(p==null?void 0:p.sessionVolume)||0:g.volume||0,ie=B?(p==null?void 0:p.sessionDelta)||0:g.delta||0,se=j>0&&U>0?j-U:0,be=ee>0?ie/ee*100:0;return{...f,status:F,open:ne,high:j,low:U,close:K,volume:ee,delta:ie,deltaPct:be,range:se,hasData:j>0||B,pdr:X.pDR||0,avg10d:X.avgRange||0,cW:X.cW||0,pW:X.pW||0,cM:X.CM||0,pM:X.PM||0,max:X.max||0,min:X.min||0,todayRange:X.todayRange||0}});G==="current"&&hr.forEach(f=>{f.high>0&&(f.high>ve&&(ve=f.high,Ae=pt,Ee=f.id),f.low>0&&f.low<je&&(je=f.low,He=pt,De=f.id))});const An=f=>{const F=Object.values(i||{}).map(g=>g[f]||0).filter(g=>g>0);return F.length>0?F.reduce((g,B)=>g+B,0)/F.length:0},Er=mn>0?mn:((rn=tn.ny_close)==null?void 0:rn.close)||((ln=tn.ny_pm)==null?void 0:ln.close)||bn,Y={id:"1d",name:"1D",color:"#FFFFFF",open:On,high:bn,low:_n,close:Er,volume:Dn,delta:or,deltaPct:Dn>0?or/Dn*100:0,range:bn>0&&_n>0?bn-_n:0,hasData:On>0,pdr:An("pDR"),avg10d:An("avgRange"),cW:An("cW"),pW:An("pW"),cM:An("CM"),pM:An("PM"),max:An("max"),min:An("min")},Re=[Y.low,...hr.filter(f=>f.hasData).map(f=>f.low)].filter(f=>f>0),Ce=[Y.high,...hr.filter(f=>f.hasData).map(f=>f.high)].filter(f=>f>0),Ie=Re.length>0?Math.min(...Re):0,et=Ce.length>0?Math.max(...Ce):0,Ke=et-Ie||1,Je=Ie-Ke*.08,_t=et+Ke*.08,jt=_t-Je,Ne=180,rt=[Y,...hr],it=138,Rn=(f,F,g=!1,B=null,X=null,ne=null)=>{let j=Je,U=_t,K=jt;const ee=g?Ne:it;if(!g&&f){const re=f.day,te=Object.values(f.sessions||{}).filter(T=>T&&T.h>0),ze=te.map(T=>T.h),Z=te.map(T=>T.l);if((re==null?void 0:re.h)>0&&(ze.push(re.h),Z.push(re.l)),ze.length>0){const T=Math.max(...ze),z=Math.min(...Z),H=T-z||1;j=z-H*.08,U=T+H*.08,K=U-j}}const ie=g?rt:(()=>{if(!f)return[];const re=f.day||{},te={id:"1d",name:"1D",color:"#FFFFFF",open:re.o||0,high:re.h||0,low:re.l||0,close:re.c||0,hasData:re.h>0},ze=he.map(Z=>{var z;const T=((z=f.sessions)==null?void 0:z[Z.id])||{};return{...Z,open:T.o||0,high:T.h||0,low:T.l||0,close:T.c||0,hasData:T.h>0}});return[te,...ze]})(),se=ie.slice(1).filter(re=>re.hasData&&re.high>0);let be=null,J=null;if(se.length>0){const re=Math.max(...se.map(T=>T.high)),te=Math.min(...se.map(T=>T.low)),ze=se.find(T=>T.high===re),Z=se.find(T=>T.low===te);ze&&(be=ze.id),Z&&(J=Z.id)}return e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"8px 12px",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",background:g?"rgba(0,255,136,0.02)":"rgba(255,255,255,0.02)",overflow:"hidden"},children:[e.jsx("div",{style:{width:70,minWidth:70,padding:"8px 12px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRight:"1px solid rgba(255,255,255,0.05)",background:g&&Ye.closed?"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)":g?"rgba(0, 255, 136, 0.05)":"transparent"},children:g&&Ye.closed?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:16,marginBottom:4},children:""}),e.jsx("div",{style:{color:"#A78BFA",fontSize:11,fontWeight:700,letterSpacing:.5},children:F}),e.jsx("div",{style:{color:"#666",fontSize:9,marginTop:2},children:"(Closed)"})]}):g?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#00ff88",fontSize:12,fontWeight:600,lineHeight:1.2},children:F.split(" ")[0]}),e.jsxs("div",{style:{color:"#00ff88",fontSize:10,fontWeight:500,marginTop:2,display:"flex",alignItems:"center",gap:4},children:[F.split(" ")[1]||"",e.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 6px rgba(0, 255, 136, 0.6)"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#A78BFA",fontSize:12,fontWeight:600,lineHeight:1.2},children:F.split(" ")[0]}),e.jsx("div",{style:{color:"#8B7FC7",fontSize:10,fontWeight:500,marginTop:2},children:F.split(" ")[1]||""})]})}),e.jsx("div",{style:{flex:1,display:"flex",height:ee,position:"relative"},children:ie.map((re,te)=>{const ze=te===0,Z=`${F}-${re.id||re.name}`,T=!ze&&re.id===be,z=!ze&&re.id===J,H=!ze&&X&&X.dayDate===B&&X.sessionId===re.id,W=!ze&&ne&&ne.dayDate===B&&ne.sessionId===re.id,fe=ze?"rgba(255,255,255,0.02)":`${re.color}06`;return e.jsxs("div",{style:{flex:ze?"0 0 8%":1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:T||H?14:0,paddingBottom:z||W?14:0,background:fe,borderLeft:te>0?"1px solid rgba(255,255,255,0.02)":"none"},onMouseEnter:ce=>{if(re.hasData&&re.high>0){h({...re,label:`${F} - ${re.name||"1D"}`,isHOD:T,isLOD:z,isHOW:H,isLOW:W});const Pe=ce.currentTarget.getBoundingClientRect();k({x:Pe.left+Pe.width/2,y:Pe.top})}},onMouseLeave:()=>h(null),children:[T&&!H&&e.jsx("div",{style:{position:"absolute",top:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #10B981"}}),z&&!W&&e.jsx("div",{style:{position:"absolute",bottom:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #EF4444"}}),H&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 4px #00ff88)"}}),W&&e.jsx("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 4px #ff4466)"}}),re.hasData&&re.high>0&&(()=>{const ce=re.close>=re.open,Pe=ce?"#00ff88":"#ff4466",Ze=ce?"#00ff88":"#ff4466",Se=1.5,tt=7,We=2,ot=1,ht=ee-(re.high-j)/K*ee,kt=ee-(re.low-j)/K*ee,Rt=ee-(re.open-j)/K*ee,$t=ee-(re.close-j)/K*ee;return e.jsxs("svg",{width:"100%",height:ee,viewBox:`0 0 40 ${ee}`,preserveAspectRatio:"xMidYMid meet",style:{overflow:"visible",cursor:"pointer"},children:[e.jsx("line",{x1:"20",y1:Math.max(2,ht),x2:"20",y2:Math.min(ee-2,kt),stroke:H?"#00ff88":W?"#ff4466":Pe,strokeWidth:Se,strokeLinecap:"butt",style:{filter:`drop-shadow(0 0 2px ${Pe}60)`}}),e.jsx("rect",{x:20-ot-tt,y:Math.max(0,Math.min(ee-We,Rt-We/2)),width:tt,height:We,fill:"#FFFFFF",style:{opacity:.9}}),e.jsx("rect",{x:20+ot,y:Math.max(0,Math.min(ee-We,$t-We/2)),width:tt,height:We,fill:Ze,style:{filter:`drop-shadow(0 0 2px ${Ze}60)`}})]})})()]},Z)})})]})};return e.jsxs("div",{className:"hide-scrollbar",style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 8px 32px rgba(0,0,0,0.6)",position:"relative",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden"},children:[e.jsx("div",{style:{position:"sticky",top:0,zIndex:20,background:"linear-gradient(180deg, rgba(12,12,16,1) 0%, rgba(12,12,16,0.98) 100%)",padding:"12px 12px 8px 12px",borderBottom:"1px solid rgba(255,255,255,0.06)",borderTopLeftRadius:16,borderTopRightRadius:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"0 12px",borderRadius:12},children:[e.jsx("div",{style:{width:70,minWidth:70}}),e.jsx("div",{style:{flex:1,display:"flex",position:"relative"},children:rt.map((f,F)=>{var ee,ie;const g=F===0,B=f.status==="NOW",X=f.status==="WAITING",ne=g?"#FFFFFF":f.color||"#FFFFFF",j=C===(f.id||F),U=(ee=f.name)!=null&&ee.includes(" ")?f.name.split(" "):[f.name],K=U.length>1;return e.jsx("div",{onMouseEnter:()=>d(f.id||F),onMouseLeave:()=>d(null),style:{flex:g?"0 0 8%":1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",position:"relative",cursor:"pointer",paddingBottom:8},children:e.jsxs("div",{style:{width:73,height:73,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,padding:10,background:B&&!Ye.closed?`linear-gradient(135deg, ${ne}30 0%, ${ne}15 100%)`:j?`linear-gradient(135deg, ${ne}20 0%, ${ne}10 100%)`:"rgba(20, 20, 28, 0.9)",border:B&&!Ye.closed?`2px solid ${ne}`:j?`2px solid ${ne}60`:"1px solid rgba(255,255,255,0.1)",opacity:X?.4:Ye.closed&&!g?.6:1,transition:"all 0.2s ease",boxShadow:B&&!Ye.closed?`0 0 12px ${ne}50`:j?`0 0 10px ${ne}30`:"0 2px 8px rgba(0,0,0,0.3)",position:"relative"},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:g?"#888":Ye.closed?"#555":ne,boxShadow:B&&!Ye.closed||j?`0 0 6px ${ne}`:"none",animation:B&&!Ye.closed?"sessionDotPulse 1.5s ease-in-out infinite":"none"}}),K?e.jsxs("div",{style:{textAlign:"center",lineHeight:1.1},children:[e.jsx("div",{style:{fontSize:11,color:B&&!Ye.closed||j?ne:Ye.closed&&!g?"#666":"#e5e5e5",fontWeight:600},children:U[0]}),e.jsx("div",{style:{fontSize:10,color:B&&!Ye.closed||j?ne:Ye.closed&&!g?"#555":"#bbb",fontWeight:500},children:U.slice(1).join(" ")})]}):e.jsx("span",{style:{fontSize:((ie=f.name)==null?void 0:ie.length)>6?10:12,color:g?j?"#ccc":"#999":B&&!Ye.closed||j?ne:Ye.closed?"#666":"#e5e5e5",fontWeight:600,textAlign:"center",lineHeight:1.1},children:f.name}),B&&!Ye.closed&&e.jsx("div",{style:{position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 6px",borderRadius:8,letterSpacing:"0.05em",boxShadow:"0 2px 6px rgba(0,255,136,0.4)"},children:"LIVE"}),j&&!g&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:12,background:"linear-gradient(135deg, rgba(12, 12, 18, 0.98) 0%, rgba(18, 18, 28, 0.98) 100%)",border:`1px solid ${ne}30`,borderRadius:12,padding:"14px 18px",minWidth:200,zIndex:100,boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.05) inset",pointerEvents:"none"},children:[e.jsx("div",{style:{position:"absolute",top:-6,left:"50%",width:10,height:10,background:"rgba(12, 12, 18, 0.98)",border:`1px solid ${ne}30`,borderRight:"none",borderBottom:"none",transform:"translateX(-50%) rotate(45deg)"}}),e.jsxs("div",{style:{textAlign:"center",marginBottom:10,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:ne,boxShadow:`0 0 8px ${ne}`}}),e.jsx("span",{style:{color:ne,fontWeight:700,fontSize:14,letterSpacing:.5},children:f.name}),B&&!Ye.closed&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 5px",borderRadius:4},children:"LIVE"})]}),f.start&&f.end&&e.jsxs("div",{style:{fontSize:10,color:"#666",fontFamily:"'JetBrains Mono', monospace",marginTop:4},children:[f.start," - ",f.end," ET"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px 16px",fontSize:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#8B5CF6"},children:"VOL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.volume?f.volume>=1e3?(f.volume/1e3).toFixed(1)+"K":f.volume:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.delta>=0?"#00ff88":"#ff4466"},children:"DELTA"}),e.jsx("span",{style:{color:f.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:f.delta?Math.abs(f.delta)>=1e3?(f.delta/1e3).toFixed(1)+"K":f.delta:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#6366F1"},children:"pDR"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.pdr>0?f.pdr.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#06B6D4"},children:"10D"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.avg10d>0?f.avg10d.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#84CC16"},children:"cW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.cW>0?f.cW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#22C55E"},children:"pW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.pW>0?f.pW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#F97316"},children:"cM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.cM>0?f.cM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#FB923C"},children:"pM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.pM>0?f.pM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#10B981"},children:"MAX"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.max>0?f.max.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#EF4444"},children:"MIN"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:f.min>0?f.min.toFixed(1):""})]})]}),e.jsx("div",{style:{marginTop:10,paddingTop:8,borderTop:"1px solid rgba(255,255,255,0.06)",fontSize:9,color:B&&!Ye.closed?"#00ff88":X?"#555":"#666",textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center"},children:B&&!Ye.closed?" Active Session":X?" Upcoming":" Ended"})]})]})},f.id||F)})})]})}),Rn(null,Br,!0,pt,{dayDate:Ae,sessionId:Ee},{dayDate:He,sessionId:De}),e.jsxs("div",{style:{padding:"8px 12px",borderTop:"1px solid rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:12,background:"rgba(15, 15, 20, 0.5)"},children:[e.jsx("div",{style:{display:"flex",gap:4},children:bt.map(f=>e.jsx("button",{onClick:()=>Me(f.id),style:{padding:"6px 10px",background:G===f.id?"rgba(59, 130, 246, 0.2)":"rgba(255,255,255,0.03)",border:G===f.id?"1px solid rgba(59, 130, 246, 0.4)":"1px solid rgba(255,255,255,0.08)",borderRadius:4,color:G===f.id?"#60A5FA":"#666",fontSize:10,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease",letterSpacing:"0.5px"},children:f.label},f.id))}),e.jsx("button",{onClick:Ht,title:`Clear cached data for ${((xn=bt.find(f=>f.id===G))==null?void 0:xn.label)||G} and refresh from server`,style:{padding:"6px 8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:4,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer",transition:"all 0.15s ease",display:"flex",alignItems:"center",gap:4},children:" Refresh"})]}),e.jsx("div",{children:a&&a.length>0?(()=>{const f=new Date,F=`${f.getFullYear()}-${String(f.getMonth()+1).padStart(2,"0")}-${String(f.getDate()).padStart(2,"0")}`;return(G==="current"?a.filter(B=>B.date!==F):a).map((B,X)=>{let ne=B.label||`Day ${X+1}`;if(B.date){const K=B.date.split("-"),ee=new Date(B.date+"T12:00:00"),ie=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],se=`${K[1]}-${K[2]}`,be=ie[ee.getDay()];ne=`${se} ${be}`}const j={dayDate:Ae,sessionId:Ee},U={dayDate:He,sessionId:De};return Rn(B,ne,!1,B.date,j,U)})})():e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading historical data..."})}),e.jsxs("div",{style:{padding:"10px 16px",margin:"0 12px",background:"rgba(0,0,0,0.3)",borderRadius:8,display:"flex",gap:16,justifyContent:"center",alignItems:"center",flexWrap:"wrap",fontSize:11,color:"#555"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#10B981",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#10B981"},children:"High of Day"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#EF4444"},children:"Low of Day"})]}),e.jsx("span",{style:{borderLeft:"1px solid #333",height:16,margin:"0 4px"}}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 3px #00ff88)"}}),e.jsx("span",{style:{color:"#00ff88"},children:"High of Week"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 3px #ff4466)"}}),e.jsx("span",{style:{color:"#ff4466"},children:"Low of Week"})]})]}),e.jsxs("div",{style:{margin:"12px",background:"rgba(20, 20, 30, 0.8)",borderRadius:12,border:"1px solid rgba(139, 92, 246, 0.3)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>R(!m),style:{padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:m?"rgba(139, 92, 246, 0.15)":"transparent",borderBottom:m?"1px solid rgba(139, 92, 246, 0.2)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{color:"#A78BFA",fontWeight:600,fontSize:13},children:"Session Trade Calculator"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:" Entry  Target Analysis"})]}),e.jsx("span",{style:{color:"#8B5CF6",fontSize:12,transform:m?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),m&&e.jsxs("div",{style:{padding:16},children:[e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:16},children:[e.jsxs("div",{style:{flex:"1 1 180px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"ENTRY SESSION"}),e.jsx("select",{value:$,onChange:f=>ae(f.target.value),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,cursor:"pointer",outline:"none"},children:he.map(f=>e.jsx("option",{value:f.id,style:{background:"#1a1a2e"},children:f.name},f.id))})]}),e.jsxs("div",{style:{flex:"1 1 120px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"TARGET POINTS"}),e.jsx("input",{type:"number",value:q,onChange:f=>v(Math.max(0,parseFloat(f.target.value)||0)),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,outline:"none",textAlign:"center"},min:"0",step:"0.5"})]}),e.jsxs("div",{style:{flex:"1 1 160px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"DIRECTION"}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>I("long"),style:{flex:1,padding:"10px 16px",background:u==="long"?"rgba(0, 255, 136, 0.2)":"rgba(0,0,0,0.3)",border:u==="long"?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px 0 0 8px",color:u==="long"?"#00ff88":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" LONG"}),e.jsx("button",{onClick:()=>I("short"),style:{flex:1,padding:"10px 16px",background:u==="short"?"rgba(255, 68, 102, 0.2)":"rgba(0,0,0,0.3)",border:u==="short"?"1px solid #ff4466":"1px solid rgba(255,255,255,0.1)",borderRadius:"0 8px 8px 0",color:u==="short"?"#ff4466":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" SHORT"})]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:8,letterSpacing:"0.5px"},children:["FILTER SESSIONS ",e.jsx("span",{style:{color:"#666"},children:" Click to exclude from analysis"})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[he.map(f=>{const F=_e.has(f.id),g=f.id===$;return e.jsxs("button",{onClick:()=>{if(g)return;const B=new Set(_e);F?B.delete(f.id):B.add(f.id),E(B)},style:{padding:"6px 12px",background:g?"rgba(139, 92, 246, 0.3)":F?"rgba(255,255,255,0.02)":`${f.color}22`,border:g?"1px solid #8B5CF6":F?"1px solid rgba(255,255,255,0.1)":`1px solid ${f.color}66`,borderRadius:6,color:g?"#A78BFA":F?"#444":f.color,fontSize:10,fontWeight:500,cursor:g?"not-allowed":"pointer",transition:"all 0.15s ease",textDecoration:F?"line-through":"none",opacity:F?.5:1},title:g?"Entry session (cannot exclude)":F?"Click to include":"Click to exclude",children:[g&&" ",f.name]},f.id)}),_e.size>0&&e.jsx("button",{onClick:()=>E(new Set),style:{padding:"6px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:6,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer"},children:"Reset All"})]})]}),a&&a.length>0&&(()=>{var ee,ie,se,be;const f=he.findIndex(J=>J.id===$),F=he.slice(f+1).filter(J=>!_e.has(J.id)),g=a.map(J=>{var fe;const re=(fe=J.sessions)==null?void 0:fe[$];if(!re||!re.o||re.o<=0)return null;const te=re.o,ze=u==="long"?te+q:te-q;let Z=0,T=u==="long"?1/0:0,z=-1;const H=F.map((ce,Pe)=>{var We;const Ze=(We=J.sessions)==null?void 0:We[ce.id];if(!Ze||!Ze.h||Ze.h<=0)return{session:ce,hit:!1,noData:!0,drawdownAtSession:0};const Se=u==="long"?Ze.h>=ze:Ze.l<=ze;if(z===-1)if(u==="long"){T=Math.min(T,Ze.l);const ot=te-T;Z=Math.max(Z,ot)}else{T=Math.max(T,Ze.h);const ot=T-te;Z=Math.max(Z,ot)}Se&&z===-1&&(z=Pe);const tt=u==="long"?Ze.h:Ze.l;return{session:ce,hit:Se,hitPrice:tt,high:Ze.h,low:Ze.l,overshoot:Se?u==="long"?Ze.h-ze:ze-Ze.l:0,drawdownAtSession:u==="long"?Math.max(0,te-Ze.l):Math.max(0,Ze.h-te)}}),W=H.find(ce=>ce.hit);return{date:J.date,label:J.label,entryPrice:te,targetPrice:ze,sessionResults:H,firstHit:W,hitAny:H.some(ce=>ce.hit),maxDrawdown:Z>0?Z:0}}).filter(Boolean),B=g.length>0?(g.filter(J=>J.hitAny).length/g.length*100).toFixed(0):0,X={};g.forEach(J=>{J.firstHit&&(X[J.firstHit.session.id]=(X[J.firstHit.session.id]||0)+1)});const ne=Object.entries(X).sort((J,re)=>re[1]-J[1])[0],j=g.map(J=>J.maxDrawdown).filter(J=>J>0),U=j.length>0?j.reduce((J,re)=>J+re,0)/j.length:0,K=j.length>0?Math.max(...j):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16,padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"SUCCESS RATE"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:B>=70?"#00ff88":B>=50?"#F59E0B":"#ff4466"},children:[B,"%"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"MOST LIKELY HIT"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#A78BFA"},children:ne&&((ee=he.find(J=>J.id===ne[0]))==null?void 0:ee.name)||""}),ne&&e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[ne[1]," of ",g.length," days"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"ENTRY SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((ie=he.find(J=>J.id===$))==null?void 0:ie.color)||"#fff"},children:((se=he.find(J=>J.id===$))==null?void 0:se.name)||$}),e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[" +",q," pts ",u==="long"?"":""]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"AVG DRAWDOWN"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#F59E0B"},children:U>0?U.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"points"})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"WORST DD"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#EF4444"},children:K>0?K.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"max risk"})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Target"}),F.map(J=>e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:J.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",minWidth:60},children:J.name.split(" ")[0]},J.id)),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max DD"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Result"})]})}),e.jsx("tbody",{children:g.map((J,re)=>e.jsxs("tr",{style:{background:re%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:J.label||J.date}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:J.entryPrice.toFixed(2)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:u==="long"?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:J.targetPrice.toFixed(2)}),J.sessionResults.map(te=>{var ze;return e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",background:te.hit&&((ze=J.firstHit)==null?void 0:ze.session.id)===te.session.id?"rgba(0, 255, 136, 0.1)":"transparent",verticalAlign:"middle"},children:te.noData?e.jsx("span",{style:{color:"#444"},children:""}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[te.hit?e.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["",te.overshoot>0&&e.jsxs("span",{style:{fontSize:9,marginLeft:2},children:["+",te.overshoot.toFixed(1)]})]}):e.jsx("span",{style:{color:"#ff4466",opacity:.5},children:""}),te.drawdownAtSession>0&&e.jsxs("span",{style:{fontSize:8,color:"#F59E0B",opacity:.8},children:["DD: ",te.drawdownAtSession.toFixed(1)]})]})},te.session.id)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontFamily:"monospace"},children:e.jsx("span",{style:{color:J.maxDrawdown>q?"#EF4444":J.maxDrawdown>q*.5?"#F59E0B":"#888",fontWeight:J.maxDrawdown>q?700:400},children:J.maxDrawdown>0?J.maxDrawdown.toFixed(1):"0"})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:J.hitAny?e.jsx("span",{style:{color:"#00ff88",fontWeight:600,fontSize:10},children:J.firstHit.session.name}):e.jsx("span",{style:{color:"#ff4466",fontSize:10},children:"NO HIT"})})]},J.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[" Analysis based on ",g.length," trading days  Entry at ",(be=he.find(J=>J.id===$))==null?void 0:be.name," session open price  Target: ",u==="long"?"+":"-",q," points"]})]})})()]})]}),a&&a.length>0&&(()=>{const f=ue.filter(Z=>Z.horizon);let F=1/0,g=0;a.forEach(Z=>{f.forEach(T=>{var H;const z=(H=Z.sessions)==null?void 0:H[T.id];(z==null?void 0:z.h)>0&&(g=Math.max(g,z.h)),(z==null?void 0:z.l)>0&&(z==null?void 0:z.l)<1/0&&(F=Math.min(F,z.l))})});const B={min:F===1/0?0:F,max:g},X={ES:[5500,7e3],GC:[4500,6e3],NQ:[18e3,25e3],CL:[60,120],BTC:[8e4,15e4],BT:[8e4,15e4]},ne=(t==null?void 0:t.substring(0,2))||"",j=X[ne],U=j&&(B.max<j[0]||B.min>j[1]),K=f.map(Z=>{const T=a.map(fe=>{var Pe;const ce=(Pe=fe.sessions)==null?void 0:Pe[Z.id];return!ce||!ce.o||!ce.c||ce.o<=0?null:ce.c>=ce.o?"bullish":"bearish"}).filter(Boolean),z=T.filter(fe=>fe==="bullish").length,H=T.filter(fe=>fe==="bearish").length,W=T.length;return{session:Z,trends:a.map(fe=>{var Pe;const ce=(Pe=fe.sessions)==null?void 0:Pe[Z.id];return!ce||!ce.o||!ce.c||ce.o<=0?null:ce.c>=ce.o?"bullish":"bearish"}),bullishPct:W>0?Math.round(z/W*100):0,bullishCount:z,bearishCount:H,total:W}}),ee=f.map(Z=>{const T=a.map(fe=>{var Pe;const ce=(Pe=fe.sessions)==null?void 0:Pe[Z.id];return!ce||!ce.h||!ce.l||ce.h<=0?null:ce.h-ce.l}).filter(fe=>fe!==null&&fe>0),z=T.length>0?T.reduce((fe,ce)=>fe+ce,0)/T.length:0,H=T.length>0?Math.min(...T):0,W=T.length>0?Math.max(...T):0;return{session:Z,avgRange:z,minRange:H,maxRange:W,rangeCount:T.length}}),ie=a.map(Z=>{let T=0,z=1/0;return f.forEach(H=>{var fe;const W=(fe=Z.sessions)==null?void 0:fe[H.id];W&&W.h>0&&W.l>0&&(T=Math.max(T,W.h),z=Math.min(z,W.l))}),z<1/0?T-z:0}).filter(Z=>Z>0),se=ie.length>0?ie.reduce((Z,T)=>Z+T,0)/ie.length:0,J=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],re=f.slice(0,-1).map(Z=>{const T=J.map(z=>{let H=0,W=0,fe=0,ce=0;return a.forEach(Pe=>{var kt;const Ze=(kt=Pe.sessions)==null?void 0:kt[Z.id];if(!Ze||!Ze.o||Ze.o<=0)return;const Se=Ze.o,tt=Se+z;let We=!1,ot=0;const ht=f.findIndex(Rt=>Rt.id===Z.id);f.slice(ht+1).forEach(Rt=>{var Jt;const $t=(Jt=Pe.sessions)==null?void 0:Jt[Rt.id];!$t||!$t.h||$t.h<=0||We||(ot=Math.max(ot,Se-$t.l),$t.h>=tt&&(We=!0))}),We&&H++,W+=ot,fe=Math.max(fe,ot),ce++}),{target:z,winRate:ce>0?Math.round(H/ce*100):0,avgDD:ce>0?W/ce:0,maxDD:fe,validDays:ce,riskReward:ce>0&&W>0?(z/(W/ce)).toFixed(1):""}});return{session:Z,results:T}}),te=J[1];re.reduce((Z,T)=>{var W;const z=T.results.find(fe=>fe.target===te),H=(W=Z==null?void 0:Z.results)==null?void 0:W.find(fe=>fe.target===te);return!H||z.winRate>H.winRate||z.winRate===H.winRate&&z.avgDD<H.avgDD?T:Z},null),a.forEach(Z=>{var H,W;const T=(H=Z.sessions)==null?void 0:H.japan_ib,z=(W=Z.sessions)==null?void 0:W.china;(T==null?void 0:T.h)>0&&(T==null?void 0:T.l)>0&&(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(z.h>T.h||z.l<T.l)}),a.forEach(Z=>{var H,W;const T=(H=Z.sessions)==null?void 0:H.china,z=(W=Z.sessions)==null?void 0:W.london;(T==null?void 0:T.h)>0&&(T==null?void 0:T.l)>0&&(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(z.h>T.h||z.l<T.l)}),a.forEach(Z=>{var H,W;const T=(H=Z.sessions)==null?void 0:H.london,z=(W=Z.sessions)==null?void 0:W.ny_1h;(T==null?void 0:T.o)>0&&(T==null?void 0:T.c)>0&&(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(T.c>T.o,z.c>z.o)}),a.forEach(Z=>{var H,W;const T=(H=Z.sessions)==null?void 0:H.us_ib,z=(W=Z.sessions)==null?void 0:W.ny_pm;(T==null?void 0:T.o)>0&&(T==null?void 0:T.c)>0&&(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(T.c>T.o,z.c>z.o)});const ze={};return f.forEach(Z=>ze[Z.id]={hod:0,lod:0}),a.forEach(Z=>{let T=0,z=1/0,H=null,W=null;f.forEach(fe=>{var Pe;const ce=(Pe=Z.sessions)==null?void 0:Pe[fe.id];ce&&ce.h>0&&ce.l>0&&(ce.h>T&&(T=ce.h,H=fe.id),ce.l<z&&(z=ce.l,W=fe.id))}),H&&ze[H].hod++,W&&ze[W].lod++}),U?e.jsx("div",{style:{marginTop:20},children:e.jsxs("div",{style:{padding:"20px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:12},children:""}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#EF4444",marginBottom:8},children:"DATA MISMATCH - Wrong Contract Data"}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginBottom:12},children:["Received prices: ",e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",B.min.toFixed(0)," - $",B.max.toFixed(0)]}),e.jsx("br",{}),"Expected for ",ne,": ",e.jsxs("span",{style:{color:"#10B981",fontFamily:"monospace"},children:["$",j==null?void 0:j[0]," - $",j==null?void 0:j[1]]})]}),e.jsxs("div",{style:{fontSize:11,color:"#666",marginBottom:16},children:["The backend is returning cached data for a different contract.",e.jsx("br",{}),"This requires clearing the backend cache or redeploying."]}),e.jsx("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:e.jsx("button",{onClick:Ht,style:{padding:"8px 16px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:6,color:"#EF4444",fontSize:11,fontWeight:600,cursor:"pointer"},children:" Try Refresh Again"})})]})}):e.jsxs("div",{style:{marginTop:20},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",marginBottom:12,background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:8,fontSize:10},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#10B981"},children:" DATA OK"}),e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsx("span",{style:{color:"#888"},children:"Price Range:"}),e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",B.min.toFixed(2)," - $",B.max.toFixed(2)]}),j&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsxs("span",{style:{color:"#666"},children:["Expected ",ne,":"]}),e.jsxs("span",{style:{color:"#666",fontFamily:"monospace"},children:["$",j[0]," - $",j[1]]})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16,overflow:"hidden"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#A78BFA",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION TREND DIRECTION"]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),a.map((Z,T)=>{var z;return e.jsx("th",{style:{padding:"6px 4px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:((z=Z.label)==null?void 0:z.split(" ")[0])||`Day ${T+1}`},T)}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#00ff88",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Bullish"})]})}),e.jsx("tbody",{children:K.map((Z,T)=>e.jsxs("tr",{style:{background:T%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:Z.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:Z.session.name}),Z.trends.map((z,H)=>e.jsx("td",{style:{padding:"4px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:z==="bullish"?e.jsx("span",{style:{color:"#00ff88",fontSize:14},children:""}):z==="bearish"?e.jsx("span",{style:{color:"#ff4466",fontSize:14},children:""}):e.jsx("span",{style:{color:"#333"},children:""})},H)),e.jsxs("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontWeight:700,color:Z.bullishPct>=70?"#00ff88":Z.bullishPct>=50?"#F59E0B":"#ff4466"},children:[Z.bullishPct,"%"]})]},Z.session.id))})]})}),(()=>{const Z=K.reduce((z,H)=>z.bullishPct>H.bullishPct?z:H),T=K.reduce((z,H)=>z.bullishPct<H.bullishPct?z:H);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:Z.session.name})," most bullish (",Z.bullishPct,"%) ",e.jsx("span",{style:{color:"#ff4466",fontWeight:600,marginLeft:4},children:T.session.name})," most bearish (",100-T.bullishPct,"%)"]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#EC4899",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"RANGE ANALYSIS",e.jsxs("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:["Avg Daily: ",e.jsxs("span",{style:{color:"#EC4899"},children:[se.toFixed(1)," pts"]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Avg"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Min"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"% Daily"})]})}),e.jsx("tbody",{children:ee.filter(Z=>Z.avgRange>0).sort((Z,T)=>T.avgRange-Z.avgRange).map((Z,T)=>e.jsxs("tr",{style:{background:T%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:Z.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Z.session.name}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Z.avgRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#666",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Z.minRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:Z.maxRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{background:`rgba(236, 72, 153, ${Math.min(.8,Z.avgRange/se*.6)})`,padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,color:"#fff"},children:[se>0?Math.round(Z.avgRange/se*100):0,"%"]})})]},Z.session.id))})]})}),(()=>{const Z=ee.reduce((T,z)=>T.avgRange>z.avgRange?T:z);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(236, 72, 153, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:Z.session.color,fontWeight:600},children:Z.session.name})," has largest avg range (",Z.avgRange.toFixed(1)," pts) ",e.jsxs("span",{style:{color:"#EC4899"},children:[" ",Math.round(Z.avgRange/se*100),"%"]})," of daily range"]})})()]})]})]})})(),a&&a.length>0&&(()=>{const f=["japan_ib","china","asia_close","deadzone","london","low_volume"];ue.filter(B=>B.horizon);const F=a.map(B=>{if(!B.sessions)return null;let X=0,ne=1/0,j=0,U=0;f.forEach(We=>{const ot=B.sessions[We];if(ot&&ot.h>0&&ot.l>0){X=Math.max(X,ot.h),ne=Math.min(ne,ot.l);const ht=(ot.h+ot.l+ot.c)/3,kt=ot.v||1;U+=ht*kt,j+=kt}});const K=B.sessions.us_ib,ee=(K==null?void 0:K.o)||0;if(X===0||ne===1/0||ee===0)return null;const ie=X-ne,se=ie>0?((X-ee)/ie*100).toFixed(1):0,be=j>0?U/j:(X+ne)/2,J=(ee-be).toFixed(1),re=ee>=be;let te="NEUTRAL";const ze=parseFloat(se);ze<=20?te="VERY BULLISH":ze<=40?te="BULLISH":ze>=80?te="VERY BEARISH":ze>=60&&(te="BEARISH");const Z=(K==null?void 0:K.h)||0,T=(K==null?void 0:K.l)||0,z=Z-T,H=B.sessions.ny_1h,W=(H==null?void 0:H.o)||0,fe=z>0&&W>0?((Z-W)/z*100).toFixed(1):"";let ce="NEUTRAL";const Pe=parseFloat(fe);isNaN(Pe)||(Pe<=20?ce="VERY BULLISH":Pe<=40?ce="BULLISH":Pe>=80?ce="VERY BEARISH":Pe>=60&&(ce="BEARISH"));const Ze=We=>We==="VERY BULLISH"?2:We==="BULLISH"?1:We==="BEARISH"?-1:We==="VERY BEARISH"?-2:0,Se=(Ze(te)+Ze(ce))/2;let tt="NEUTRAL";return Se>=1.5?tt="VERY BULLISH":Se>=.5?tt="BULLISH":Se<=-1.5?tt="VERY BEARISH":Se<=-.5&&(tt="BEARISH"),{date:B.date,label:B.label,overnightHigh:X,overnightLow:ne,overnightRange:ie,usIbOpen:ee,pctFromHigh:se,estimatedVwap:be,vwapDistance:Math.abs(parseFloat(J)),aboveVwap:re,biasA:te,ibHigh:Z,ibLow:T,ibRange:z,nyOpen:W,pctFromIbHigh:fe,biasB:ce,combinedBias:tt}}).filter(Boolean);if(F.length===0)return null;const g=F[0];return e.jsxs("div",{style:{margin:"12px",background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(59, 130, 246, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:600,color:"#10B981"},children:"DAY BIAS"}),e.jsx("span",{style:{fontSize:10,color:"#666"},children:" Overnight & IB Range Analysis"})]}),g&&e.jsx("div",{style:{padding:"4px 12px",borderRadius:6,background:g.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":g.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",border:`1px solid ${g.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.3)":g.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.3)":"rgba(255,255,255,0.1)"}`,color:g.combinedBias.includes("BULLISH")?"#00ff88":g.combinedBias.includes("BEARISH")?"#ff4466":"#888",fontSize:11,fontWeight:700},children:g.combinedBias})]}),e.jsxs("div",{style:{padding:16},children:[g&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#3B82F6"},children:"A. OVERNIGHT  8:20 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:g.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":g.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:g.biasA.includes("BULLISH")?"#00ff88":g.biasA.includes("BEARISH")?"#ff4466":"#888"},children:g.biasA})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"O/N RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#3B82F6"},children:g.overnightRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",g.overnightHigh.toFixed(0)," L: ",g.overnightLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"8:20 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(g.pctFromHigh)<=50?"#00ff88":"#ff4466"},children:[g.pctFromHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from O/N high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"PRICE vs VWAP"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:g.aboveVwap?"#00ff88":"#ff4466",padding:"4px 8px",borderRadius:4,background:g.aboveVwap?"rgba(0, 255, 136, 0.15)":"rgba(255, 68, 102, 0.15)"},children:g.aboveVwap?"ABOVE":"BELOW"}),e.jsxs("div",{style:{fontSize:8,color:"#555",marginTop:2},children:[g.vwapDistance.toFixed(1)," pts"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#F59E0B"},children:"B. US IB  9:30 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:g.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":g.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:g.biasB.includes("BULLISH")?"#00ff88":g.biasB.includes("BEARISH")?"#ff4466":"#888"},children:g.biasB})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#F59E0B"},children:g.ibRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",g.ibHigh.toFixed(0)," L: ",g.ibLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"9:30 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(g.pctFromIbHigh)<=50?"#00ff88":"#ff4466"},children:[g.pctFromIbHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from IB high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"NY OPEN"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#fff"},children:g.nyOpen>0?g.nyOpen.toFixed(2):""}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"9:30 ET"})]})]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"rgba(0,0,0,0.4)"},children:[e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#3B82F6",fontWeight:600,borderBottom:"1px solid rgba(59,130,246,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(59,130,246,0.08)"},children:"A: Overnight  8:20"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(245,158,11,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(245,158,11,0.08)"},children:"B: US IB  9:30"}),e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"center",color:"#10B981",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Combined"})]}),e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"VWAP"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"9:30"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"})]})]}),e.jsx("tbody",{children:F.map((B,X)=>e.jsxs("tr",{style:{background:X%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 10px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)",fontSize:10},children:B.label||B.date}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(B.pctFromHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(B.pctFromHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(B.pctFromHigh)<=30?"#00ff88":parseFloat(B.pctFromHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[B.pctFromHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{color:B.aboveVwap?"#00ff88":"#ff4466",fontSize:9,fontWeight:500},children:B.aboveVwap?"ABOVE":"BELOW"})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:B.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":B.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:B.biasA.includes("BULLISH")?"#00ff88":B.biasA.includes("BEARISH")?"#ff4466":"#666"},children:B.biasA.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(B.pctFromIbHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(B.pctFromIbHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(B.pctFromIbHigh)<=30?"#00ff88":parseFloat(B.pctFromIbHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[B.pctFromIbHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:9},children:B.nyOpen>0?B.nyOpen.toFixed(0):""}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:B.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":B.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:B.biasB.includes("BULLISH")?"#00ff88":B.biasB.includes("BEARISH")?"#ff4466":"#666"},children:B.biasB.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:B.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":B.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:B.combinedBias.includes("BULLISH")?"#00ff88":B.combinedBias.includes("BEARISH")?"#ff4466":"#888"},children:B.combinedBias.replace("VERY ","V.")})})]},B.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(16, 185, 129, 0.1)",borderRadius:6,fontSize:9,color:"#888"},children:[e.jsx("strong",{style:{color:"#10B981"},children:"Bias Logic:"})," 0-20% from high = Very Bullish  20-40% = Bullish  40-60% = Neutral  60-80% = Bearish  80-100% = Very Bearish"]})]})]})})(),Fe&&e.jsxs("div",{style:{marginTop:24,background:"rgba(0,0,0,0.4)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#A78BFA"},children:"STRATEGY ANALYTICS"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Optimal entry points & session patterns"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("span",{style:{fontSize:10,color:"#666"},children:"Using data from selected week above"})})]}),(()=>{var Z;const f=a;if(!f||f.length===0)return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No historical data available. Select a week above first."]});const F=ue.filter(T=>T.horizon),B=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],X=F.slice(0,-1).map(T=>{const z=B.map(H=>{let W=0,fe=0,ce=0,Pe=0;return f.forEach(Ze=>{var Rt;const Se=(Rt=Ze.sessions)==null?void 0:Rt[T.id];if(!Se||!Se.o||Se.o<=0)return;const tt=Se.o,We=tt+H;let ot=!1,ht=0;const kt=F.findIndex($t=>$t.id===T.id);F.slice(kt+1).forEach($t=>{var zn;const Jt=(zn=Ze.sessions)==null?void 0:zn[$t.id];!Jt||!Jt.h||Jt.h<=0||ot||(ht=Math.max(ht,tt-Jt.l),Jt.h>=We&&(ot=!0))}),ot&&W++,fe+=ht,ce=Math.max(ce,ht),Pe++}),{target:H,winRate:Pe>0?Math.round(W/Pe*100):0,avgDD:Pe>0?fe/Pe:0,maxDD:ce,validDays:Pe,riskReward:Pe>0&&fe>0?(H/(fe/Pe)).toFixed(1):""}});return{session:T,results:z}}),ne=B[1],j=X.reduce((T,z)=>{var fe;const H=z.results.find(ce=>ce.target===ne),W=(fe=T==null?void 0:T.results)==null?void 0:fe.find(ce=>ce.target===ne);return!W||H.winRate>W.winRate||H.winRate===W.winRate&&H.avgDD<W.avgDD?z:T},null),U=[];let K=0,ee=0;f.forEach(T=>{var W,fe;const z=(W=T.sessions)==null?void 0:W.japan_ib,H=(fe=T.sessions)==null?void 0:fe.china;(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(H==null?void 0:H.h)>0&&(H==null?void 0:H.l)>0&&(ee++,(H.h>z.h||H.l<z.l)&&K++)}),ee>0&&U.push({name:"China breaks Japan range",occurrences:K,total:ee,pct:Math.round(K/ee*100),color:"#F472B6"});let ie=0,se=0;f.forEach(T=>{var W,fe;const z=(W=T.sessions)==null?void 0:W.china,H=(fe=T.sessions)==null?void 0:fe.london;(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(H==null?void 0:H.h)>0&&(H==null?void 0:H.l)>0&&(se++,(H.h>z.h||H.l<z.l)&&ie++)}),se>0&&U.push({name:"London breaks China range",occurrences:ie,total:se,pct:Math.round(ie/se*100),color:"#3B82F6"});let be=0,J=0;f.forEach(T=>{var W,fe;const z=(W=T.sessions)==null?void 0:W.london,H=(fe=T.sessions)==null?void 0:fe.ny_1h;(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(H==null?void 0:H.o)>0&&(H==null?void 0:H.c)>0&&(J++,z.c>z.o==H.c>H.o&&be++)}),J>0&&U.push({name:"NY 1H continues London trend",occurrences:be,total:J,pct:Math.round(be/J*100),color:"#10B981"});let re=0,te=0;f.forEach(T=>{var W,fe;const z=(W=T.sessions)==null?void 0:W.us_ib,H=(fe=T.sessions)==null?void 0:fe.ny_pm;(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(H==null?void 0:H.o)>0&&(H==null?void 0:H.c)>0&&(te++,z.c>z.o==H.c>H.o&&re++)}),te>0&&U.push({name:"US IB direction = NY PM direction",occurrences:re,total:te,pct:Math.round(re/te*100),color:"#F59E0B"});const ze={};return F.forEach(T=>ze[T.id]={hod:0,lod:0}),f.forEach(T=>{let z=0,H=1/0,W=null,fe=null;F.forEach(ce=>{var Ze;const Pe=(Ze=T.sessions)==null?void 0:Ze[ce.id];Pe&&Pe.h>0&&Pe.l>0&&(Pe.h>z&&(z=Pe.h,W=ce.id),Pe.l<H&&(H=Pe.l,fe=ce.id))}),W&&ze[W].hod++,fe&&ze[fe].lod++}),e.jsxs("div",{style:{padding:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16,padding:"10px 16px",background:"rgba(139, 92, 246, 0.1)",borderRadius:8,fontSize:11},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" ",f.length," trading days"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#888"},children:[oe==="all"?"All available data":`${((Z=Q.find(T=>T.id===oe))==null?void 0:Z.label)||oe}`,de!=="all"&&`  Week ${de}`]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#10B981",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"OPTIMAL ENTRY FINDER",e.jsx("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:"Long entries  Target capture"})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),B.map(T=>e.jsxs("th",{style:{padding:"6px 6px",textAlign:"center",color:T===ne?"#10B981":"#666",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:10},children:["+",T,"pt"]},T))]})}),e.jsx("tbody",{children:X.map((T,z)=>e.jsxs("tr",{style:{background:(j==null?void 0:j.session.id)===T.session.id?"rgba(16, 185, 129, 0.1)":z%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsxs("td",{style:{padding:"6px 8px",color:T.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:[T.session.name,(j==null?void 0:j.session.id)===T.session.id&&e.jsx("span",{style:{marginLeft:6,color:"#00ff88",fontSize:10},children:""})]}),T.results.map(H=>e.jsxs("td",{style:{padding:"4px 6px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:H.winRate>=70?"#00ff88":H.winRate>=50?"#F59E0B":"#ff4466"},children:[H.winRate,"%"]}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:["DD: ",H.avgDD.toFixed(1)]})]},H.target))]},T.session.id))})]})}),j&&(()=>{const T=B[1],z=j.results.find(H=>H.target===T);return e.jsxs("div",{style:{marginTop:12,padding:"10px 12px",background:"rgba(16, 185, 129, 0.15)",borderRadius:6,borderLeft:"3px solid #10B981"},children:[e.jsx("div",{style:{fontSize:10,color:"#10B981",fontWeight:700,marginBottom:4},children:" RECOMMENDED ENTRY"}),e.jsxs("div",{style:{fontSize:11,color:"#fff"},children:[e.jsx("span",{style:{color:j.session.color,fontWeight:600},children:j.session.name})," offers best risk-adjusted entry for ",T,"pt long targets"]}),e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4},children:[z.winRate,"% win rate  ",z.avgDD.toFixed(1)," pts avg drawdown  ",z.riskReward,":1 R:R"]})]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(245, 158, 11, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#F59E0B",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION PATTERNS & BEHAVIOR"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:U.map((T,z)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:8,borderLeft:`3px solid ${T.color}`},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:11,color:"#fff",fontWeight:500},children:T.name}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:2},children:[T.occurrences,"/",T.total," days"]})]}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:T.pct>=70?"#00ff88":T.pct>=50?"#F59E0B":"#888"},children:[T.pct,"%"]})]},z))}),e.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:8,fontWeight:600},children:"WHO SETS HIGH/LOW OF DAY"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#10B981",marginBottom:6,fontWeight:600},children:"HIGH OF DAY"}),Object.entries(ze).filter(([T,z])=>z.hod>0).sort((T,z)=>z[1].hod-T[1].hod).slice(0,3).map(([T,z])=>{const H=F.find(W=>W.id===T);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(H==null?void 0:H.color)||"#888"},children:(H==null?void 0:H.name)||T}),e.jsxs("span",{style:{color:"#10B981",fontWeight:600},children:[Math.round(z.hod/f.length*100),"%"]})]},T)})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#EF4444",marginBottom:6,fontWeight:600},children:"LOW OF DAY"}),Object.entries(ze).filter(([T,z])=>z.lod>0).sort((T,z)=>z[1].lod-T[1].lod).slice(0,3).map(([T,z])=>{const H=F.find(W=>W.id===T);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(H==null?void 0:H.color)||"#888"},children:(H==null?void 0:H.name)||T}),e.jsxs("span",{style:{color:"#EF4444",fontWeight:600},children:[Math.round(z.lod/f.length*100),"%"]})]},T)})]})]})]})]})]})]})})()]}),y&&e.jsxs("div",{style:{position:"fixed",left:M.x,top:M.y-10,transform:"translate(-50%, -100%)",background:"rgba(0,0,0,0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,padding:"10px 14px",zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.8)",minWidth:140,pointerEvents:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:11,fontWeight:700,color:y.close>=y.open?"#00ff88":"#ff4466",marginBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:6},children:[e.jsx("span",{children:y.label||y.name}),y.isHOD&&e.jsx("span",{style:{background:"#10B981",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"HIGH OF DAY"}),y.isLOD&&e.jsx("span",{style:{background:"#EF4444",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"LOW OF DAY"}),y.isHOW&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #00ff88"},children:"HIGH OF WEEK"}),y.isLOW&&e.jsx("span",{style:{background:"#ff4466",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #ff4466"},children:"LOW OF WEEK"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"4px 12px",fontSize:10},children:[e.jsx("span",{style:{color:"#3B82F6"},children:"O"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((qn=y.open)==null?void 0:qn.toFixed(2))||""}),e.jsx("span",{style:{color:(y.isHOD,"#10B981")},children:"H"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:y.isHOD?"rgba(16, 185, 129, 0.2)":"transparent",padding:y.isHOD?"1px 4px":0,borderRadius:3},children:((er=y.high)==null?void 0:er.toFixed(2))||""}),e.jsx("span",{style:{color:(y.isLOD,"#EF4444")},children:"L"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:y.isLOD?"rgba(239, 68, 68, 0.2)":"transparent",padding:y.isLOD?"1px 4px":0,borderRadius:3},children:((gr=y.low)==null?void 0:gr.toFixed(2))||""}),e.jsx("span",{style:{color:"#F59E0B"},children:"C"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((dt=y.close)==null?void 0:dt.toFixed(2))||""})]}),y.high>0&&y.low>0&&e.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#888"},children:["Range: ",e.jsx("span",{style:{color:"#EC4899"},children:(y.high-y.low).toFixed(2)})]})]})]})})()]}):e.jsx("div",{style:{padding:40,textAlign:"center",color:"#888"},children:"No data available"})},_g=({activeTab:t,setActiveTab:n,onLogout:r})=>{var y;const{isMobile:i,isTablet:o}=Ri(),[s,l]=L.useState(!1),[a,c]=L.useState(!1),p=[{id:"backtest",icon:"",label:"Backtest",fullLabel:"Backtest Analytics"},{id:"live",icon:"",label:"Live",fullLabel:"Live Metrics",iconColor:"#ef4444"},{id:"tpo",icon:"",label:"TPO",fullLabel:"Market Profile",iconColor:"#ffaa00"},{id:"zones",icon:"",label:"Zones",fullLabel:"Zone Participation",iconColor:"#00ff88"},{id:"treemap",icon:"",label:"Matrix",fullLabel:"Correlation Matrix"},{id:"vsi",icon:"",label:"Sessions",fullLabel:"Session Analysis"},{id:"trades",icon:"",label:"Trades",fullLabel:"Trade Log"},{id:"priceladder",icon:"",label:"Ladder",fullLabel:"Price Ladder"},{id:"redfolder",icon:"",label:"Red",fullLabel:"Red Folder",iconColor:"#ff4466",accent:"#ff4466"}],w=h=>{n(h),l(!1)};return i?e.jsxs(e.Fragment,{children:[e.jsxs("nav",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"rgba(0,0,0,0.4)",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",letterSpacing:"2px"},children:"HORIZON"})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(0,255,136,0.1)",borderRadius:6,border:"1px solid rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{color:"#00ff88",fontSize:11,fontWeight:600},children:((y=p.find(h=>h.id===t))==null?void 0:y.label)||"Menu"})}),e.jsxs("button",{onClick:()=>l(!s),style:{width:40,height:40,background:s?"rgba(0,255,136,0.15)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:5,transition:"all 0.2s"},children:[e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(45deg) translateY(7px)":"none"}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",opacity:s?0:1}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(-45deg) translateY(-7px)":"none"}})]})]}),s&&e.jsxs("div",{style:{position:"fixed",top:57,left:0,right:0,bottom:0,background:"rgba(10,10,15,0.98)",zIndex:999,padding:16,overflowY:"auto",animation:"slideIn 0.2s ease"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:p.map(h=>{const M=t===h.id,k=h.accent||"#00ff88";return e.jsxs("button",{onClick:()=>w(h.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,padding:"20px 12px",background:M?`linear-gradient(180deg, ${k}20 0%, ${k}08 100%)`:"rgba(255,255,255,0.03)",border:M?`2px solid ${k}`:"1px solid rgba(255,255,255,0.08)",borderRadius:12,color:M?k:"#aaa",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("span",{style:{fontSize:24,color:M?k:h.iconColor||"#666",filter:M?`drop-shadow(0 0 8px ${k})`:"none"},children:h.icon}),e.jsx("span",{style:{fontSize:12,fontWeight:M?700:500},children:h.fullLabel})]},h.id)})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:20},children:[e.jsxs("button",{onClick:()=>{n("settings"),l(!1)},style:{flex:1,padding:"16px",background:"rgba(0,255,136,0.1)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:12,color:"#00ff88",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Settings"]}),e.jsxs("button",{onClick:r,style:{flex:1,padding:"16px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.4)",borderRadius:12,color:"#ff4466",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Logout"]})]})]})]}):o?e.jsxs("nav",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)",gap:16},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexShrink:0},children:e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})})}),e.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",flex:1,WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:p.map(h=>{const M=t===h.id,k=h.accent||"#00ff88";return e.jsxs("button",{onClick:()=>n(h.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",background:M?`${k}15`:"transparent",border:M?`1px solid ${k}`:"1px solid transparent",borderRadius:6,color:M?k:"#888",fontSize:11,fontWeight:M?600:500,cursor:"pointer",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx("span",{style:{color:M?k:h.iconColor||"#666"},children:h.icon}),e.jsx("span",{children:h.label})]},h.id)})}),e.jsxs("div",{style:{position:"relative",flexShrink:0},children:[e.jsx("button",{onClick:()=>c(!a),style:{width:36,height:36,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:14,color:"#fff",boxShadow:a?"0 0 15px rgba(0,255,136,0.5)":"none"},children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>c(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:10,padding:6,minWidth:150,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",zIndex:999},children:[e.jsxs("button",{onClick:()=>{n("settings"),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ccc",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Settings"]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 6px"}}),e.jsxs("button",{onClick:()=>{r(),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ff4466",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Logout"]})]})]})]})]}):e.jsxs("nav",{style:_.nav,children:[e.jsxs("div",{style:_.navBrand,children:[e.jsx("div",{style:{width:36,height:36,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{fontSize:18,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[e.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#fff",letterSpacing:"1.5px"},children:"PROJECT"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",letterSpacing:"3px"},children:"HORIZON"})]})]}),e.jsx("div",{style:{..._.navTabs,marginLeft:24},children:p.map(h=>{const M=t===h.id,k=h.accent||"#00ff88";return e.jsxs("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 18px",background:M?`linear-gradient(180deg, ${k}20 0%, ${k}05 100%)`:"transparent",border:M?`1px solid ${k}`:"1px solid transparent",borderRadius:8,color:M?k:"#8b8b8b",fontSize:13,fontWeight:M?600:500,cursor:"pointer",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},onClick:()=>n(h.id),onMouseEnter:G=>{M||(G.target.style.background="rgba(255,255,255,0.05)",G.target.style.color="#ccc")},onMouseLeave:G=>{M||(G.target.style.background="transparent",G.target.style.color="#8b8b8b")},children:[e.jsx("span",{style:{fontSize:h.icon.length===1?14:15,color:M?k:h.iconColor||"#8b8b8b",filter:M&&h.iconColor?`drop-shadow(0 0 4px ${h.iconColor})`:"none"},children:h.icon}),e.jsx("span",{children:h.fullLabel}),M&&e.jsx("div",{style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"60%",height:2,background:k,borderRadius:"2px 2px 0 0",boxShadow:`0 0 10px ${k}`}})]},h.id)})}),e.jsxs("div",{style:{position:"relative",marginLeft:16},children:[e.jsx("button",{onClick:()=>c(!a),style:{width:40,height:40,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:18,color:"#fff",boxShadow:a?"0 0 15px rgba(0,255,136,0.5)":"none"},onMouseEnter:h=>{h.currentTarget.style.borderColor="#00ff88",h.currentTarget.style.boxShadow="0 0 15px rgba(0,255,136,0.5)"},onMouseLeave:h=>{a||(h.currentTarget.style.borderColor="rgba(255,255,255,0.5)",h.currentTarget.style.boxShadow="none")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>c(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:8,minWidth:180,boxShadow:"0 10px 40px rgba(0,0,0,0.5)",zIndex:999,backdropFilter:"blur(20px)"},children:[e.jsxs("button",{onClick:()=>{n("settings"),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ccc",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:h=>{h.currentTarget.style.background="rgba(255,255,255,0.08)",h.currentTarget.style.color="#fff"},onMouseLeave:h=>{h.currentTarget.style.background="transparent",h.currentTarget.style.color="#ccc"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 8px"}}),e.jsxs("button",{onClick:()=>{r(),c(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ff4466",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:h=>{h.currentTarget.style.background="rgba(255,68,102,0.15)"},onMouseLeave:h=>{h.currentTarget.style.background="transparent"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Logout"})]})]})]})]})]})},Rg=()=>{var G,Me,x,b,C,d,A,m,R,$,ae,q,v,u,I,_e,E,oe,Xe,de,Be,S,P,O,ke,Fe,qe,Le,bt,Oe,Q,ue,he,ye,ge,Ge,vt,lt,Ye,N,Xt,an,fn,at,Dt;const[t,n]=L.useState(""),[r,i]=L.useState(!1),[o,s]=L.useState(!1),[l,a]=L.useState({stream_active:!1,stream_title:"",transcript_buffer:[],current_segment:"",sentiment:{current:"neutral",score:0,confidence:0,history:[]},voice_tone:{confidence_level:0,hesitation_count:0,stress_indicators:0,speaking_rate:0},keywords:{},market_direction:{signal:"neutral",strength:0,components:{sentiment_weight:0,tone_weight:0,keyword_weight:0}},error:null}),c=L.useRef(null);L.useEffect(()=>{const pe=async()=>{try{const Ht=await(await fetch(la)).json();a(Ht),i(Ht.stream_active),s(!0)}catch{s(!1)}};pe();const le=setInterval(pe,300);return()=>clearInterval(le)},[]),L.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[l.transcript_buffer]);const p=async()=>{if(t)try{await fetch(`${la}/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})})}catch(pe){console.error("Failed to start stream:",pe)}},w=async()=>{try{await fetch(`${la}/stop`,{method:"POST"})}catch(pe){console.error("Failed to stop stream:",pe)}},y=pe=>{if(!pe)return pe;const le=Object.keys(l.keywords||{});let nt=pe;return le.forEach(Ht=>{const ve=new RegExp(`\\b(${Ht})\\b`,"gi");nt=nt.replace(ve,'<span style="background: rgba(0,255,136,0.2); color: #00ff88; padding: 2px 4px; border-radius: 4px; font-weight: 600;">$1</span>')}),nt},h=pe=>pe>.05?"#00ff88":pe<-.05?"#ff4466":"#ffaa00",k=(pe=>{switch(pe){case"bullish":return{color:"#00ff88",icon:"",glow:"rgba(0,255,136,0.3)"};case"bearish":return{color:"#ff4466",icon:"",glow:"rgba(255,68,102,0.3)"};default:return{color:"#ffaa00",icon:"",glow:"rgba(255,170,0,0.3)"}}})((G=l.market_direction)==null?void 0:G.signal);return e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},children:[e.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:""}),e.jsx("span",{children:"Red Folder"}),e.jsx("span",{style:{fontSize:14,color:"#888",fontWeight:400},children:"Live Event Transcription & Analysis"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 16px",borderRadius:8,background:o?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${o?"#00ff88":"#ff4466"}`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:o?"#00ff88":"#ff4466",boxShadow:o?"0 0 10px #00ff88":"none",animation:o&&r?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{color:o?"#00ff88":"#ff4466",fontSize:12,fontWeight:600},children:r?"LIVE TRANSCRIBING":o?"SERVICE ONLINE":"SERVICE OFFLINE"})]})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",placeholder:"Enter YouTube Live URL (e.g., https://youtube.com/watch?v=...)",value:t,onChange:pe=>n(pe.target.value),style:{flex:1,minWidth:300,padding:"12px 16px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"#fff",fontSize:14,fontFamily:"'JetBrains Mono', monospace"}}),e.jsx("button",{onClick:p,disabled:r||!t,style:{padding:"12px 24px",borderRadius:8,background:r?"rgba(255,255,255,0.05)":"linear-gradient(135deg, #00ff88, #00cc6a)",border:"none",color:r?"#666":"#000",fontWeight:700,cursor:r?"not-allowed":"pointer",transition:"all 0.2s"},children:" START"}),e.jsx("button",{onClick:w,disabled:!r,style:{padding:"12px 24px",borderRadius:8,background:r?"linear-gradient(135deg, #ff4466, #cc3355)":"rgba(255,255,255,0.05)",border:"none",color:r?"#fff":"#666",fontWeight:700,cursor:r?"pointer":"not-allowed",transition:"all 0.2s"},children:" STOP"})]}),l.stream_title&&e.jsxs("div",{style:{marginTop:12,color:"#888",fontSize:13},children:[e.jsx("span",{style:{color:"#00aaff"},children:"Now transcribing:"})," ",l.stream_title]}),l.error&&e.jsxs("div",{style:{marginTop:12,color:"#ff4466",fontSize:13},children:["Error: ",l.error]}),l.scheduler&&e.jsxs("div",{style:{marginTop:16,padding:"12px 16px",borderRadius:8,background:l.scheduler.event_active?"rgba(255,170,0,0.1)":"rgba(0,170,255,0.05)",border:`1px solid ${l.scheduler.event_active?"#ffaa00":"rgba(0,170,255,0.2)"}`,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:l.scheduler.event_active?"":""}),e.jsx("span",{style:{color:"#888",fontSize:12,fontWeight:600},children:"AUTO-SCHEDULER"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:l.scheduler.enabled?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:l.scheduler.enabled?"#00ff88":"#ff4466"},children:l.scheduler.enabled?"ENABLED":"DISABLED"})]}),l.scheduler.next_event&&e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#666",fontSize:11},children:"Next:"}),e.jsx("span",{style:{color:l.scheduler.event_active?"#ffaa00":"#00aaff",fontSize:12,fontWeight:600},children:l.scheduler.next_event}),e.jsx("span",{style:{color:"#888",fontSize:11},children:l.scheduler.next_time}),l.scheduler.event_active&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",animation:"pulse 2s infinite"},children:"EVENT ACTIVE"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:24},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:24,height:600,display:"flex",flexDirection:"column"},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Live Transcript",r&&e.jsx("span",{style:{fontSize:11,color:"#00ff88",marginLeft:"auto"},children:" RECORDING"})]}),e.jsx("div",{ref:c,style:{flex:1,overflowY:"auto",fontFamily:"'JetBrains Mono', monospace",fontSize:14,lineHeight:1.8},children:((Me=l.transcript_buffer)==null?void 0:Me.length)===0&&!l.current_segment?e.jsx("div",{style:{color:"#666",textAlign:"center",padding:40},children:r?"Waiting for speech...":"Start a stream to begin transcription"}):e.jsxs(e.Fragment,{children:[(x=l.transcript_buffer)==null?void 0:x.map((pe,le)=>e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.03)",opacity:pe.is_final?1:.6},children:[e.jsx("span",{style:{color:"#666",marginRight:12,fontSize:12},children:pe.timestamp}),e.jsx("span",{style:{color:"#e0e0e0"},dangerouslySetInnerHTML:{__html:y(pe.text)}})]},le)),l.current_segment&&e.jsxs("div",{style:{padding:"8px 0",opacity:.6,color:"#888"},children:[e.jsx("span",{style:{marginRight:12,fontSize:12},children:"..."}),l.current_segment]})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${((b=l.sentiment)==null?void 0:b.score)>.1?"rgba(0,255,136,0.3)":((C=l.sentiment)==null?void 0:C.score)<-.1?"rgba(255,68,102,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:16,padding:20,textAlign:"center",transition:"border-color 0.5s ease, box-shadow 0.5s ease",boxShadow:((d=l.sentiment)==null?void 0:d.score)>.1?"0 0 20px rgba(0,255,136,0.1)":((A=l.sentiment)==null?void 0:A.score)<-.1?"0 0 20px rgba(255,68,102,0.1)":"none"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"SENTIMENT GAUGE"}),e.jsxs("svg",{width:"200",height:"110",viewBox:"0 0 200 110",style:{margin:"0 auto",display:"block"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"12"}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 60 35",fill:"none",stroke:"#ff4466",strokeWidth:"12",opacity:((m=l.sentiment)==null?void 0:m.score)<-.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 60 35 A 80 80 0 0 1 140 35",fill:"none",stroke:"#ffaa00",strokeWidth:"12",opacity:Math.abs(((R=l.sentiment)==null?void 0:R.score)||0)<=.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 140 35 A 80 80 0 0 1 180 100",fill:"none",stroke:"#00ff88",strokeWidth:"12",opacity:(($=l.sentiment)==null?void 0:$.score)>.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("g",{style:{transform:`rotate(${((((ae=l.sentiment)==null?void 0:ae.score)||0)+1)*90-180}deg)`,transformOrigin:"100px 100px",transition:"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e.jsx("line",{x1:"100",y1:"100",x2:"165",y2:"100",stroke:h(((q=l.sentiment)==null?void 0:q.score)||0),strokeWidth:"3",strokeLinecap:"round",filter:"url(#glow)"})}),e.jsx("circle",{cx:"100",cy:"100",r:"10",fill:h(((v=l.sentiment)==null?void 0:v.score)||0),style:{transition:"fill 0.5s"}}),e.jsx("circle",{cx:"100",cy:"100",r:"5",fill:"#1a1a1a"}),e.jsx("text",{x:"20",y:"108",fill:"#ff4466",fontSize:"10",fontWeight:"600",children:"BEAR"}),e.jsx("text",{x:"160",y:"108",fill:"#00ff88",fontSize:"10",fontWeight:"600",children:"BULL"})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("span",{style:{fontSize:28,fontWeight:800,color:h(((u=l.sentiment)==null?void 0:u.score)||0),textShadow:((I=l.sentiment)==null?void 0:I.current)!=="neutral"?`0 0 20px ${h(((_e=l.sentiment)==null?void 0:_e.score)||0)}40`:"none",transition:"color 0.5s, text-shadow 0.5s"},children:(((E=l.sentiment)==null?void 0:E.current)||"neutral").toUpperCase()}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginTop:6},children:["Score: ",e.jsxs("span",{style:{color:h(((oe=l.sentiment)==null?void 0:oe.score)||0),fontWeight:600},children:[((((Xe=l.sentiment)==null?void 0:Xe.score)||0)*100).toFixed(0),"%"]})," | Confidence: ",e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[((((de=l.sentiment)==null?void 0:de.confidence)||0)*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"VOICE ANALYSIS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Confidence"}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((Be=l.voice_tone)==null?void 0:Be.confidence_level)||0}%`,height:"100%",borderRadius:4,background:(((S=l.voice_tone)==null?void 0:S.confidence_level)||0)>70?"#00ff88":(((P=l.voice_tone)==null?void 0:P.confidence_level)||0)>40?"#ffaa00":"#ff4466",transition:"width 0.3s"}})}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",marginTop:4},children:[(((O=l.voice_tone)==null?void 0:O.confidence_level)||0).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Speaking Rate"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#00aaff"},children:(((ke=l.voice_tone)==null?void 0:ke.speaking_rate)||0).toFixed(0)}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"WPM"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Hesitations"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((Fe=l.voice_tone)==null?void 0:Fe.hesitation_count)||0)>5?"#ff4466":"#888"},children:((qe=l.voice_tone)==null?void 0:qe.hesitation_count)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Stress Signs"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((Le=l.voice_tone)==null?void 0:Le.stress_indicators)||0)>3?"#ff4466":"#888"},children:((bt=l.voice_tone)==null?void 0:bt.stress_indicators)||0})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"KEYWORD TRACKING"}),e.jsxs("div",{style:{maxHeight:150,overflowY:"auto"},children:[Object.entries(l.keywords||{}).filter(([pe,le])=>le.count>0).sort((pe,le)=>le[1].count-pe[1].count).slice(0,8).map(([pe,le])=>{const nt=Math.max(...Object.values(l.keywords||{}).map(Ae=>Ae.count||0),1),Ht=["growth","dovish","easing","employment","jobs"],ve=["inflation","hawkish","tightening","recession","rates"],je=Ht.includes(pe)?"#00ff88":ve.includes(pe)?"#ff4466":"#00aaff";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsx("span",{style:{minWidth:70,fontSize:11,color:je,fontWeight:600,textTransform:"capitalize"},children:pe}),e.jsx("div",{style:{flex:1,height:6,background:"rgba(255,255,255,0.05)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${le.count/nt*100}%`,height:"100%",background:je,borderRadius:3,transition:"width 0.3s"}})}),e.jsx("span",{style:{fontSize:12,color:"#888",minWidth:24,textAlign:"right"},children:le.count})]},pe)}),Object.values(l.keywords||{}).every(pe=>pe.count===0)&&e.jsx("div",{style:{color:"#666",fontSize:12,textAlign:"center",padding:20},children:"No keywords detected yet"})]})]}),(()=>{var ve,je,Ae,Ee;const pe=(((ve=l.sentiment)==null?void 0:ve.score)||0)>.05?"bullish":(((je=l.sentiment)==null?void 0:je.score)||0)<-.05?"bearish":"neutral",le=((Ae=l.market_direction)==null?void 0:Ae.signal)||"neutral",nt=pe!=="neutral"&&le!=="neutral"&&pe!==le,Ht=pe!=="neutral"&&le==="neutral"||pe==="neutral"&&le!=="neutral";if(nt)return e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,170,0,0.15) 0%, rgba(255,170,0,0.05) 100%)",border:"2px solid #ffaa00",borderRadius:12,padding:16,marginBottom:16,animation:"pulse 1.5s infinite"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:700,fontSize:14},children:"DIVERGENCE ALERT"}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment: ",e.jsx("span",{style:{color:pe==="bullish"?"#00ff88":"#ff4466"},children:pe.toUpperCase()})," vs ","Direction: ",e.jsx("span",{style:{color:le==="bullish"?"#00ff88":"#ff4466"},children:le.toUpperCase()})]}),e.jsx("div",{style:{color:"#ffaa00",fontSize:10,marginTop:4},children:"Voice tone or keywords offsetting text sentiment"})]})]})});if(Ht)return e.jsx("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{style:{color:"#888",fontSize:11},children:["Mixed signals: Sentiment ",pe.toUpperCase()," | Direction ",le.toUpperCase()]})]})});if(pe!=="neutral"&&pe===le){const He=((Ee=l.market_direction)==null?void 0:Ee.strength)||0,De=pe==="bullish"?"#00ff88":"#ff4466";return e.jsx("div",{style:{background:`linear-gradient(135deg, ${De}20 0%, ${De}08 100%)`,border:`2px solid ${De}`,borderRadius:12,padding:16,marginBottom:16,boxShadow:`0 0 20px ${De}30`},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:pe==="bullish"?"":""}),e.jsxs("div",{children:[e.jsxs("div",{style:{color:De,fontWeight:700,fontSize:14},children:["STRONG ",pe.toUpperCase()," SIGNAL"]}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment + Direction aligned | Strength: ",He.toFixed(0),"%"]})]})]})})}return null})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`2px solid ${k.color}`,borderRadius:16,padding:24,textAlign:"center",boxShadow:`0 0 30px ${k.glow}`},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"MARKET DIRECTION"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"20px 0",transition:"transform 0.5s ease"},children:[e.jsx("span",{style:{fontSize:56,color:k.color,textShadow:`0 0 30px ${k.color}`,transition:"color 0.5s, text-shadow 0.5s, transform 0.3s",animation:((Oe=l.market_direction)==null?void 0:Oe.signal)!=="neutral"?"pulse 2s infinite":"none"},children:k.icon}),e.jsx("span",{style:{fontSize:36,fontWeight:800,color:k.color,letterSpacing:4,transition:"color 0.5s ease",textShadow:`0 0 15px ${k.color}40`},children:(((Q=l.market_direction)==null?void 0:Q.signal)||"neutral").toUpperCase()})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Strength"}),e.jsx("div",{style:{height:10,background:"rgba(255,255,255,0.1)",borderRadius:5,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((ue=l.market_direction)==null?void 0:ue.strength)||0}%`,height:"100%",borderRadius:5,background:`linear-gradient(90deg, ${k.color}80 0%, ${k.color} 100%)`,transition:"width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:`0 0 10px ${k.color}`}})}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:k.color,marginTop:6,transition:"color 0.5s"},children:[(((he=l.market_direction)==null?void 0:he.strength)||0).toFixed(0),"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Sentiment"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((ge=(ye=l.market_direction)==null?void 0:ye.components)==null?void 0:ge.sentiment_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Voice"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((vt=(Ge=l.market_direction)==null?void 0:Ge.components)==null?void 0:vt.tone_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Keywords"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((Ye=(lt=l.market_direction)==null?void 0:lt.components)==null?void 0:Ye.keyword_weight)||0)*100).toFixed(0),"%"]})]})]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Fed Speech Transcription Analysis"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(139,92,246,0.2)",color:"#A78BFA",fontSize:10,fontWeight:600},children:"DEEPGRAM LIVE TRANSCRIPTION"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Real-time sentiment analysis of Fed Chair, FOMC Press Conferences & Presidential speeches  OHLC during speech duration"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#A78BFA",fontSize:12,fontWeight:600},children:" PAST SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Last 6 Months)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(139,92,246,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SENTIMENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SIGNAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"RESULT"})]})}),e.jsx("tbody",{children:[{date:"Wed, Jan 8",dateStr:"2026-01-08",time:"14:00",event:"FOMC Minutes Release Discussion",speaker:"Fed Officials",duration:45,sentiment:-.08,direction:"bearish",o:4495,h:4498.5,l:4486.2,c:4488.8},{date:"Wed, Dec 18",dateStr:"2025-12-18",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:52,sentiment:.15,direction:"bullish",o:4425,h:4452.3,l:4420.5,c:4448.6},{date:"Fri, Dec 6",dateStr:"2025-12-06",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:38,sentiment:-.12,direction:"bearish",o:4380,h:4385.4,l:4358.2,c:4362.5},{date:"Wed, Nov 26",dateStr:"2025-11-26",time:"14:30",event:"FOMC Minutes Discussion",speaker:"Fed Officials",duration:42,sentiment:.05,direction:"neutral",o:4320,h:4328.5,l:4315.8,c:4322.4},{date:"Thu, Nov 14",dateStr:"2025-11-14",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:55,sentiment:.22,direction:"bullish",o:4285.5,h:4318.2,l:4282,c:4312.8},{date:"Mon, Nov 4",dateStr:"2025-11-04",time:"15:00",event:"U.S. President Trump Speaks",speaker:"Trump",duration:28,sentiment:.18,direction:"bullish",o:4245,h:4272.5,l:4242.3,c:4268.9},{date:"Wed, Oct 22",dateStr:"2025-10-22",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:48,sentiment:-.15,direction:"bearish",o:4195,h:4202.8,l:4168.5,c:4175.2},{date:"Tue, Oct 8",dateStr:"2025-10-08",time:"09:30",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:35,sentiment:.08,direction:"bullish",o:4150,h:4168.4,l:4145.2,c:4162.5},{date:"Wed, Sep 17",dateStr:"2025-09-17",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:58,sentiment:.28,direction:"bullish",o:4085,h:4135.6,l:4080.5,c:4128.4},{date:"Fri, Sep 5",dateStr:"2025-09-05",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:42,sentiment:-.05,direction:"neutral",o:4055,h:4068.2,l:4048.5,c:4058.8},{date:"Fri, Aug 22",dateStr:"2025-08-22",time:"10:00",event:"Jackson Hole - Powell Speaks",speaker:"Powell",duration:65,sentiment:.35,direction:"bullish",o:3985,h:4058.5,l:3978.2,c:4045.8},{date:"Thu, Aug 7",dateStr:"2025-08-07",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:50,sentiment:.12,direction:"bullish",o:3925,h:3958.4,l:3920.5,c:3952.2},{date:"Wed, Jul 30",dateStr:"2025-07-30",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.18,direction:"bearish",o:3895,h:3902.5,l:3858.2,c:3865.4},{date:"Tue, Jul 15",dateStr:"2025-07-15",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:40,sentiment:.1,direction:"bullish",o:3845,h:3872.8,l:3840.5,c:3868.2}].map((le,nt)=>{const Ht=le.h-le.l,ve=le.c>le.o+3?"bullish":le.c<le.o-3?"bearish":"neutral",je=le.direction===ve||le.direction==="neutral"&&Math.abs(le.c-le.o)<=3,Ae=le.sentiment>.1?"#00ff88":le.sentiment<-.1?"#ff4466":"#ffaa00",Ee=le.direction==="bullish"?"#00ff88":le.direction==="bearish"?"#ff4466":"#ffaa00",He=le.speaker==="Powell"?"#A78BFA":le.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:nt%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:le.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:le.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:le.event}),e.jsx("div",{style:{color:He,fontSize:10,marginTop:2},children:le.speaker})]}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[le.duration,"m"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:`${Ae}15`,border:`1px solid ${Ae}30`},children:e.jsxs("span",{style:{color:Ae,fontWeight:600,fontSize:11},children:[(le.sentiment*100).toFixed(0),"%"]})})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("span",{style:{color:Ee,fontWeight:600,fontSize:11,display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx("span",{children:le.direction==="bullish"?"":le.direction==="bearish"?"":""}),le.direction.toUpperCase()]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("div",{style:{fontSize:9,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.4},children:[e.jsx("span",{style:{color:"#888"},children:"O:"}),e.jsx("span",{style:{color:"#fff"},children:le.o.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"H:"}),e.jsx("span",{style:{color:"#00ff88"},children:le.h.toFixed(0)}),e.jsx("br",{}),e.jsx("span",{style:{color:"#888"},children:"L:"}),e.jsx("span",{style:{color:"#ff4466"},children:le.l.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"C:"}),e.jsx("span",{style:{color:le.c>=le.o?"#00ff88":"#ff4466"},children:le.c.toFixed(0)})]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right"},children:e.jsxs("span",{style:{color:"#FFD700",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:12},children:["$",Ht.toFixed(2)]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:"50%",background:je?"rgba(0,255,136,0.15)":"rgba(255,68,102,0.15)",color:je?"#00ff88":"#ff4466",fontSize:12,fontWeight:700},children:je?"":""})})]},nt)})})]})})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Scheduled for Transcription)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EST. DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"STATUS"})]})}),e.jsx("tbody",{children:[{date:"Wed, Jan 29",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",estDuration:"~55m"},{date:"Fri, Feb 7",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",estDuration:"~40m"},{date:"Wed, Feb 12",time:"15:00",event:"U.S. President Trump Speaks",speaker:"Trump",estDuration:"~30m"},{date:"Wed, Mar 19",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",estDuration:"~55m"}].map((pe,le)=>{const nt=pe.speaker==="Powell"?"#A78BFA":pe.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:le%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:pe.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:pe.event}),e.jsx("div",{style:{color:nt,fontSize:10,marginTop:2},children:pe.speaker})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.estDuration}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(139,92,246,0.2)",color:"#A78BFA"},children:"SCHEDULED"})})]},le)})})]})})]}),(()=>{const pe=[{sentiment:-.08,direction:"bearish",o:4495,c:4488.8},{sentiment:.15,direction:"bullish",o:4425,c:4448.6},{sentiment:-.12,direction:"bearish",o:4380,c:4362.5},{sentiment:.05,direction:"neutral",o:4320,c:4322.4},{sentiment:.22,direction:"bullish",o:4285.5,c:4312.8},{sentiment:.18,direction:"bullish",o:4245,c:4268.9},{sentiment:-.15,direction:"bearish",o:4195,c:4175.2},{sentiment:.08,direction:"bullish",o:4150,c:4162.5},{sentiment:.28,direction:"bullish",o:4085,c:4128.4},{sentiment:-.05,direction:"neutral",o:4055,c:4058.8},{sentiment:.35,direction:"bullish",o:3985,c:4045.8},{sentiment:.12,direction:"bullish",o:3925,c:3952.2},{sentiment:-.18,direction:"bearish",o:3895,c:3865.4},{sentiment:.1,direction:"bullish",o:3845,c:3868.2}];let le=0,nt=0;pe.forEach(Ae=>{const Ee=Ae.c-Ae.o,He=Ee>3?"bullish":Ee<-3?"bearish":"neutral";(Ae.direction===He||Ae.direction==="neutral"&&Math.abs(Ee)<=3)&&(le++,nt+=Math.abs(Ee))});const Ht=Math.round(le/pe.length*100),ve=(pe.reduce((Ae,Ee)=>Ae+Math.abs(Ee.c-Ee.o),0)/pe.length).toFixed(2),je=Math.round(nt*100);return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.1) 0%, rgba(0,170,255,0.05) 100%)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:12,padding:20,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:"#fff",fontSize:14,fontWeight:600},children:"Deepgram Speech Analysis ROI (6 Months)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"SPEECHES"}),e.jsx("div",{style:{color:"#fff",fontSize:24,fontWeight:700},children:pe.length})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"CORRECT"}),e.jsx("div",{style:{color:"#00ff88",fontSize:24,fontWeight:700},children:le})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"ACCURACY"}),e.jsxs("div",{style:{color:Ht>=70?"#00ff88":"#ffaa00",fontSize:24,fontWeight:700},children:[Ht,"%"]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"AVG MOVE"}),e.jsxs("div",{style:{color:"#00aaff",fontSize:24,fontWeight:700},children:["$",ve]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"$ VALUE"}),e.jsxs("div",{style:{color:"#FFD700",fontSize:24,fontWeight:700},children:["$",je.toLocaleString()]})]})]}),e.jsx("div",{style:{marginTop:16,padding:"12px 16px",background:"rgba(139,92,246,0.1)",borderRadius:8,border:"1px solid rgba(139,92,246,0.2)"},children:e.jsxs("p",{style:{color:"#aaa",fontSize:11,margin:0,lineHeight:1.5},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" VERDICT: ",Ht>=70?"KEEP DEEPGRAM":"MONITOR"]})," - At ",Ht,"% accuracy on Fed speeches, capturing $",je.toLocaleString()," in value over 6 months.",e.jsx("span",{style:{color:"#888"},children:" Note: Fed Chair position may change - monitor for new appointments."})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Red Folder News Events"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(255,68,102,0.2)",color:"#ff4466",fontSize:10,fontWeight:600},children:"HIGH IMPACT DATA RELEASES"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Instant economic data releases  30-minute candle OHLC at release time  No transcription (instant release)"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ff4466",fontSize:12,fontWeight:600},children:" PAST RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,68,102,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"ACTUAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"30m OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"})]})}),e.jsxs("tbody",{children:[(((N=l.economic_calendar)==null?void 0:N.past)||[]).map((pe,le)=>{const nt=pe.impact==="high"||pe.impact==="critical"?"#ff4466":pe.impact==="medium"?"#ffaa00":"#888";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:le%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:pe.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:pe.event}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:3,fontSize:8,fontWeight:600,background:`${nt}20`,color:nt,marginTop:4,display:"inline-block"},children:pe.impact.toUpperCase()})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.actual||pe.forecast})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#666",fontSize:10},children:"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#666",fontSize:10},children:"--"})]},le)}),(!((Xt=l.economic_calendar)!=null&&Xt.past)||l.economic_calendar.past.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:20,textAlign:"center",color:"#666"},children:"No past events this month"})})]})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",((an=l.economic_calendar)==null?void 0:an.current_month)||new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]}),((fn=l.economic_calendar)==null?void 0:fn.last_updated)&&e.jsxs("span",{style:{color:"#444",fontSize:9,marginLeft:"auto"},children:["Updated: ",l.economic_calendar.last_updated]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"PREVIOUS"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"IMPACT"})]})}),e.jsxs("tbody",{children:[(((at=l.economic_calendar)==null?void 0:at.upcoming)||[]).map((pe,le)=>{const nt=pe.impact==="high"||pe.impact==="critical"?"#ff4466":pe.impact==="medium"?"#ffaa00":"#888",Ht=pe.is_today;return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:Ht?"rgba(255,170,0,0.1)":le%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsxs("td",{style:{padding:"10px 8px",color:Ht?"#ffaa00":"#aaa",fontSize:11,whiteSpace:"nowrap",fontWeight:Ht?600:400},children:[Ht&&e.jsx("span",{style:{marginRight:4},children:""}),pe.date]}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.time}),e.jsx("td",{style:{padding:"10px 8px"},children:e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:pe.event})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:pe.previous}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${nt}20`,color:nt},children:pe.impact.toUpperCase()})})]},le)}),(!((Dt=l.economic_calendar)!=null&&Dt.upcoming)||l.economic_calendar.upcoming.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming events"})})]})]})})]})]})]})},zg=({onResetComplete:t})=>{const[n,r]=L.useState(!1),[i,o]=L.useState(null),[s,l]=L.useState(""),a=async()=>{r(!0),o(null),l("Initiating full system reset...");try{l("Stopping all connections...");const c=await fetch(`${Kt}/reset-connection`,{method:"POST",headers:{"Content-Type":"application/json"}});if(c.ok){const p=await c.json();l("Clearing state and reconnecting..."),await new Promise(y=>setTimeout(y,2e3)),l("Verifying connection...");let w=0;for(;w<10;){try{const y=await fetch(`${Kt}`);if(y.ok){const h=await y.json();if(h.data_source&&h.data_source!=="DISCONNECTED"){o({type:"success",message:"System reset complete! Live data restored."}),t&&t();break}}}catch{}w++,l(`Waiting for connection... (${w}/10)`),await new Promise(y=>setTimeout(y,1e3))}w>=10&&o({type:"warning",message:"Reset complete. Connection may take a moment to establish."})}else o({type:"error",message:"Failed to reset - backend may need manual restart"})}catch{o({type:"error",message:"Network error - check if backend is running on port 8080"})}l(""),r(!1)};return e.jsxs("div",{children:[e.jsx("button",{onClick:a,disabled:n,style:{width:"100%",padding:"16px 24px",background:n?"linear-gradient(135deg, #555 0%, #333 100%)":"linear-gradient(135deg, #ff4466 0%, #cc2244 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:15,fontWeight:700,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"all 0.2s ease",boxShadow:n?"none":"0 4px 20px rgba(255,68,102,0.3)"},children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"spin 1s linear infinite"},children:""}),s||"Resetting..."]}):e.jsx(e.Fragment,{children:" FULL SYSTEM RESET"})}),i&&e.jsxs("div",{style:{marginTop:12,padding:"12px 16px",borderRadius:8,background:i.type==="success"?"rgba(0,255,136,0.15)":i.type==="warning"?"rgba(255,170,0,0.15)":"rgba(255,68,102,0.15)",border:`1px solid ${i.type==="success"?"#00ff88":i.type==="warning"?"#ffaa00":"#ff4466"}`,color:i.type==="success"?"#00ff88":i.type==="warning"?"#ffaa00":"#ff4466",fontSize:13,textAlign:"center"},children:[i.type==="success"?"":i.type==="warning"?"":""," ",i.message]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(255,68,102,0.05)",borderRadius:8,border:"1px solid rgba(255,68,102,0.1)"},children:[e.jsx("div",{style:{fontSize:11,color:"#ff6688",marginBottom:8,fontWeight:600},children:"THIS WILL:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:16,lineHeight:1.8,fontSize:11,color:"#888"},children:[e.jsx("li",{children:"Kill all active data connections"}),e.jsx("li",{children:"Clear volume, delta, and TPO counters"}),e.jsx("li",{children:"Reset session high/low tracking"}),e.jsx("li",{children:"Restart Databento live feed"}),e.jsx("li",{children:"Re-establish fresh connection"})]})]})]})},Ig=({settings:t,onSettingsChange:n,trades:r=[],dateRange:i,connectionStatus:o,onResetConnection:s})=>{var C,d;const[l,a]=L.useState(t),[c,p]=L.useState(!1),[w,y]=L.useState(!1),[h,M]=L.useState(null),k=(A,m)=>{const R=JSON.parse(JSON.stringify(l)),$=A.split(".");let ae=R;for(let q=0;q<$.length-1;q++)ae=ae[$[q]];ae[$[$.length-1]]=m,a(R),p(!0)},G=()=>{const A=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,m=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;if(Math.abs(A-100)>.1){alert(`Entry Tier allocations must sum to 100%. Currently: ${A}%`);return}if(Math.abs(m-100)>.1){alert(`Target Tier allocations must sum to 100%. Currently: ${m}%`);return}n(l),p(!1)},Me=()=>{a(Tf),p(!0)},x=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,b=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;return e.jsxs("div",{style:_.settingsPanel,children:[e.jsxs("div",{style:_.settingsHeader,children:[e.jsx("h2",{style:_.dashboardTitle,children:" Strategy Parameters"}),e.jsx("p",{style:_.settingsSubtitle,children:"Adjust thresholds and allocations to see how analytics change"})]}),e.jsxs("div",{style:_.settingsGrid,children:[e.jsxs("div",{style:_.settingsCard,children:[e.jsx("h3",{style:_.settingsCardTitle,children:" Signal Thresholds"}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"Delta Threshold"}),e.jsx("span",{style:_.sliderValue,children:l.deltaThreshold.toLocaleString()})]}),e.jsx("input",{type:"range",min:"-5000",max:"-1000",step:"100",value:l.deltaThreshold,onChange:A=>k("deltaThreshold",parseInt(A.target.value)),style:_.slider}),e.jsxs("div",{style:_.sliderTicks,children:[e.jsx("span",{children:"-5000"}),e.jsx("span",{children:"-3000"}),e.jsx("span",{children:"-1000"})]})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"Buying Imbalance %"}),e.jsxs("span",{style:_.sliderValue,children:[l.buyingImbalancePct,"%"]})]}),e.jsx("input",{type:"range",min:"200",max:"600",step:"25",value:l.buyingImbalancePct,onChange:A=>k("buyingImbalancePct",parseInt(A.target.value)),style:_.slider}),e.jsxs("div",{style:_.sliderTicks,children:[e.jsx("span",{children:"200%"}),e.jsx("span",{children:"400%"}),e.jsx("span",{children:"600%"})]})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"Divergence Highlight Threshold"}),e.jsx("span",{style:_.sliderValue,children:l.divergenceThreshold||0})]}),e.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:l.divergenceThreshold||0,onChange:A=>k("divergenceThreshold",parseInt(A.target.value)),style:_.slider}),e.jsxs("div",{style:_.sliderTicks,children:[e.jsx("span",{children:"0 (All)"}),e.jsx("span",{children:"100"}),e.jsx("span",{children:"200"})]}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Delta divergence amount required for white glow on candles (0 = always highlight)"})]})]}),e.jsxs("div",{style:_.settingsCard,children:[e.jsx("h3",{style:_.settingsCardTitle,children:" Entry Tier Allocation"}),e.jsxs("p",{style:_.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(x-100)<.1?"#00ff88":"#ff4466"},children:[x,"%"]}),Math.abs(x-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"Tier I (Feeler)  8:45-9:20 ET"}),e.jsxs("span",{style:_.sliderValue,children:[l.entryTiers.tier1,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier1,onChange:A=>k("entryTiers.tier1",parseInt(A.target.value)),style:_.slider})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"Tier II (Builder)  9:35-10:00 ET"}),e.jsxs("span",{style:_.sliderValue,children:[l.entryTiers.tier2,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier2,onChange:A=>k("entryTiers.tier2",parseInt(A.target.value)),style:_.slider})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"Tier III (Runner)  10:15-10:45 ET"}),e.jsxs("span",{style:_.sliderValue,children:[l.entryTiers.tier3,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier3,onChange:A=>k("entryTiers.tier3",parseInt(A.target.value)),style:_.slider})]}),e.jsxs("div",{style:_.tierVisual,children:[e.jsx("div",{style:{..._.tierBar,width:`${l.entryTiers.tier1}%`,background:"#00aaff"}}),e.jsx("div",{style:{..._.tierBar,width:`${l.entryTiers.tier2}%`,background:"#00ff88"}}),e.jsx("div",{style:{..._.tierBar,width:`${l.entryTiers.tier3}%`,background:"#ffaa00"}})]}),e.jsxs("div",{style:_.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00aaff"},children:""})," Tier I"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," Tier II"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," Tier III"]})]})]}),e.jsxs("div",{style:_.settingsCard,children:[e.jsx("h3",{style:_.settingsCardTitle,children:" Target Allocation"}),e.jsxs("p",{style:_.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(b-100)<.1?"#00ff88":"#ff4466"},children:[b,"%"]}),Math.abs(b-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"VWAP Target (88% historical hit rate)"}),e.jsxs("span",{style:_.sliderValue,children:[l.targetTiers.vwap,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.vwap,onChange:A=>k("targetTiers.vwap",parseInt(A.target.value)),style:_.slider})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"IB Mid Target (75% historical hit rate)"}),e.jsxs("span",{style:_.sliderValue,children:[l.targetTiers.ibMid,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibMid,onChange:A=>k("targetTiers.ibMid",parseInt(A.target.value)),style:_.slider})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"IB High Target (40% historical hit rate)"}),e.jsxs("span",{style:_.sliderValue,children:[l.targetTiers.ibHigh,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibHigh,onChange:A=>k("targetTiers.ibHigh",parseInt(A.target.value)),style:_.slider})]}),e.jsxs("div",{style:_.tierVisual,children:[e.jsx("div",{style:{..._.tierBar,width:`${l.targetTiers.vwap}%`,background:"#00ff88"}}),e.jsx("div",{style:{..._.tierBar,width:`${l.targetTiers.ibMid}%`,background:"#ffaa00"}}),e.jsx("div",{style:{..._.tierBar,width:`${l.targetTiers.ibHigh}%`,background:"#ff4466"}})]}),e.jsxs("div",{style:_.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," VWAP"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," IB Mid"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ff4466"},children:""})," IB High"]})]})]}),e.jsxs("div",{style:_.settingsCard,children:[e.jsx("h3",{style:_.settingsCardTitle,children:" Backtest Filters"}),e.jsx("p",{style:_.allocationNote,children:"Filter trades by grade, tier, and R-multiple"}),e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{..._.sliderLabel,fontSize:10},children:"Grade"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:["A","B","C"].map(A=>{var m,R;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((R=(m=l.filters)==null?void 0:m.grades)==null?void 0:R[A])??!0,onChange:$=>{const ae={...l.filters};ae.grades||(ae.grades={A:!0,B:!0,C:!0}),ae.grades[A]=$.target.checked,k("filters",ae)},style:{width:14,height:14}}),e.jsx("span",{style:{color:A==="A"?"#00ff88":A==="B"?"#ffaa00":"#ff4466",fontWeight:600,fontSize:11},children:A})]},A)})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{..._.sliderLabel,fontSize:10},children:"Tier"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:[1,2,3].map(A=>{var m,R;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((R=(m=l.filters)==null?void 0:m.tiers)==null?void 0:R[A])??!0,onChange:$=>{const ae={...l.filters};ae.tiers||(ae.tiers={1:!0,2:!0,3:!0}),ae.tiers[A]=$.target.checked,k("filters",ae)},style:{width:14,height:14}}),e.jsx("span",{style:{color:A===1?"#00aaff":A===2?"#00ff88":"#ffaa00",fontWeight:600,fontSize:11},children:A===1?"I":A===2?"II":"III"})]},A)})})]})]}),e.jsxs("div",{style:_.sliderGroup,children:[e.jsxs("div",{style:_.sliderHeader,children:[e.jsx("label",{style:_.sliderLabel,children:"Minimum R-Multiple"}),e.jsxs("span",{style:_.sliderValue,children:[(((C=l.filters)==null?void 0:C.minR)??-10).toFixed(1),"R"]})]}),e.jsx("input",{type:"range",min:"-10",max:"5",step:"0.5",value:((d=l.filters)==null?void 0:d.minR)??-10,onChange:A=>{const m={...l.filters,minR:parseFloat(A.target.value)};k("filters",m)},style:_.slider}),e.jsxs("div",{style:_.sliderTicks,children:[e.jsx("span",{children:"-10R (All)"}),e.jsx("span",{children:"0R"}),e.jsx("span",{children:"5R"})]})]})]})]}),e.jsxs("div",{style:_.settingsActions,children:[e.jsx("button",{style:{..._.actionButton,..._.resetButton},onClick:Me,children:"Reset to Defaults"}),e.jsx("button",{style:{..._.actionButton,..._.applyButton,opacity:c?1:.5,cursor:c?"pointer":"not-allowed"},onClick:G,disabled:!c,children:c?" Apply Changes & Recalculate":"No Changes"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(138,43,226,0.1) 0%, rgba(75,0,130,0.05) 100%)",border:"2px solid rgba(138,43,226,0.3)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#9370DB",fontSize:18},children:" Project Horizon AI Optimizer"}),e.jsxs("p",{style:{color:"#888",fontSize:13,marginBottom:20},children:["Analyzes ",r.length," trades from ",i==null?void 0:i.start," to ",i==null?void 0:i.end," to find optimal parameters."]}),e.jsx("button",{style:{width:"100%",padding:"16px 32px",background:w?"linear-gradient(135deg, #666 0%, #444 100%)":"linear-gradient(135deg, #9370DB 0%, #8B5CF6 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:16,fontWeight:700,cursor:w?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10},disabled:w||r.length===0,onClick:()=>{if(r.length===0){alert("No trades available to optimize. Please load trade data first.");return}y(!0),M(null),setTimeout(()=>{const A=[-1500,-2e3,-2500,-3e3,-3500,-4e3],m=[300,350,400,450,500];let R={pnl:-1/0,winRate:0,settings:null,tradesUsed:0};if(A.forEach(u=>{m.forEach(I=>{const _e=r.filter(E=>!(E.delta!==void 0&&E.delta>u||E.buyingImbalance!==void 0&&E.buyingImbalance<I));if(_e.length>0){const E=_e.reduce((Be,S)=>Be+(S.pnl||0),0),Xe=_e.filter(Be=>(Be.pnl||0)>0).length/_e.length*100;(E*(Xe/100)>R.pnl*(R.winRate/100)||E>R.pnl&&Xe>=50)&&(R={pnl:E,winRate:Xe,tradesUsed:_e.length,settings:{deltaThreshold:u,buyingImbalancePct:I}})}})}),!R.settings){const u=r.reduce((_e,E)=>_e+(E.pnl||0),0),I=r.filter(_e=>(_e.pnl||0)>0).length;R={pnl:u,winRate:I/r.length*100,tradesUsed:r.length,settings:{deltaThreshold:-2500,buyingImbalancePct:400}}}const $=r.filter(u=>(u.pnl||0)>0),ae=$.length>0?$.reduce((u,I)=>u+(I.r||0),0)/$.length:1.5;let q={tier1:25,tier2:40,tier3:35},v={vwap:50,ibMid:35,ibHigh:15};ae>2?(q={tier1:20,tier2:35,tier3:45},v={vwap:40,ibMid:35,ibHigh:25}):ae<1&&(q={tier1:30,tier2:45,tier3:25},v={vwap:60,ibMid:30,ibHigh:10}),M({...R,entryTiers:q,targetTiers:v,avgR:ae.toFixed(2),totalTrades:r.length}),y(!1)},1500)},children:w?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"pulse 1s infinite"},children:""}),e.jsx("span",{children:"Optimizing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Run AI Optimization"})]})}),h&&e.jsxs("div",{style:{marginTop:20,padding:20,background:"rgba(0,255,136,0.05)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#00ff88",fontSize:14},children:" Optimization Complete"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"PROJECTED P&L"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:h.pnl>=0?"#00ff88":"#ff4466"},children:["$",h.pnl.toLocaleString()]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"WIN RATE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:h.winRate>=50?"#00ff88":"#ffaa00"},children:[h.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"TRADES USED"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#fff"},children:[h.tradesUsed,"/",h.totalTrades]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"AVG R-MULTIPLE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#00aaff"},children:[h.avgR,"R"]})]})]}),e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16},children:[e.jsx("strong",{children:"Recommended Settings:"}),e.jsxs("div",{style:{marginTop:8,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:["Delta Threshold: ",e.jsx("span",{style:{color:"#9370DB"},children:h.settings.deltaThreshold.toLocaleString()})]}),e.jsxs("div",{children:["Buy Imbalance: ",e.jsxs("span",{style:{color:"#9370DB"},children:[h.settings.buyingImbalancePct,"%"]})]}),e.jsxs("div",{children:["Entry Tiers: ",e.jsxs("span",{style:{color:"#9370DB"},children:[h.entryTiers.tier1,"/",h.entryTiers.tier2,"/",h.entryTiers.tier3]})]}),e.jsxs("div",{children:["Targets: ",e.jsxs("span",{style:{color:"#9370DB"},children:[h.targetTiers.vwap,"/",h.targetTiers.ibMid,"/",h.targetTiers.ibHigh]})]})]})]}),e.jsx("button",{style:{width:"100%",padding:"12px 20px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:8,color:"#000",fontSize:14,fontWeight:700,cursor:"pointer"},onClick:()=>{const A={...l,deltaThreshold:h.settings.deltaThreshold,buyingImbalancePct:h.settings.buyingImbalancePct,entryTiers:h.entryTiers,targetTiers:h.targetTiers};a(A),n(A),M(null),alert(" Optimal settings applied!")},children:" Apply Optimal Settings"})]}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:"Grid search optimization across Delta & Imbalance parameters"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16},children:" Timezone"}),e.jsx("div",{style:{padding:"14px 20px",background:"rgba(0,170,255,0.1)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:10,color:"#00aaff",fontSize:14,fontWeight:500},children:" New York (ET) - Eastern Time"}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666"},children:"All session times are displayed in Eastern Time (ET). Market hours: 6:00 PM - 5:00 PM ET (Sun-Fri)"})]}),e.jsxs("div",{style:{background:o!=null&&o.connected?"linear-gradient(135deg, rgba(0,255,136,0.05) 0%, rgba(0,200,100,0.02) 100%)":"linear-gradient(135deg, rgba(255,68,102,0.1) 0%, rgba(200,50,80,0.05) 100%)",border:`2px solid ${o!=null&&o.connected?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`,borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:o!=null&&o.connected?"#00ff88":"#ff4466",fontSize:18},children:[o!=null&&o.connected?"":""," Live Data Connection"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:20},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"STATUS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:o!=null&&o.connected?"#00ff88":"#ff4466"},children:o!=null&&o.connected?"LIVE":"OFFLINE"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"UPTIME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:o!=null&&o.connected?"#00aaff":"#888"},children:o!=null&&o.lastSuccessTime?Math.floor((Date.now()-new Date(o.lastSuccessTime).getTime())/1e3)<60?"STABLE":"RECONNECTING":"--"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"ERRORS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:(o==null?void 0:o.errorCount)>0?"#ffaa00":"#00ff88"},children:(o==null?void 0:o.errorCount)||0})]})]}),(o==null?void 0:o.lastError)&&e.jsxs("div",{style:{padding:12,background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:8,marginBottom:16},children:[e.jsx("div",{style:{fontSize:10,color:"#ff4466",marginBottom:4},children:"LAST ERROR"}),e.jsx("div",{style:{fontSize:12,color:"#ffaa00",fontFamily:"monospace",wordBreak:"break-all"},children:o.lastError}),o.reconnectAttempts>0&&e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:8},children:["Auto-reconnect attempts: ",o.reconnectAttempts]})]}),(o==null?void 0:o.lastSuccessTime)&&e.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:16},children:["Last successful data: ",new Date(o.lastSuccessTime).toLocaleTimeString()]}),e.jsx(zg,{onResetComplete:s})]}),e.jsxs("div",{style:_.settingsInfo,children:[e.jsx("h4",{style:_.infoTitle,children:" How Settings Affect Analytics"}),e.jsxs("ul",{style:_.infoList,children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Delta Threshold:"})," Trades with delta deeper than this value are considered valid setups"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Buying Imbalance %:"})," Minimum imbalance required for entry confirmation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Entry Tier Allocation:"})," How position size is distributed across the three entry phases"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Target Allocation:"})," Distribution of profit-taking across the three target levels"]})]})]})]})},Yi=L.memo(({title:t,value:n,subtitle:r,trend:i,color:o})=>{const s=i>0?"#00ff88":i<0?"#ff4466":"#888",l=o||"rgba(255,255,255,0.03)";return e.jsxs("div",{style:{..._.statsCard,background:l},children:[e.jsx("div",{style:_.statsTitle,children:t}),e.jsx("div",{style:_.statsValue,children:n}),r&&e.jsx("div",{style:_.statsSubtitle,children:r}),i!==void 0&&e.jsxs("div",{style:{..._.statsTrend,color:s},children:[i>0?"":i<0?"":""," ",Math.abs(i).toFixed(1),"%"]})]})}),Bg=({metrics:t,settings:n})=>{var w,y;const[r,i]=L.useState(null),[o,s]=L.useState({x:0,y:0}),l=[{name:`Delta < ${((w=n.deltaThreshold)==null?void 0:w.toLocaleString())||"-2500"}`,active:(t.delta_30m||0)<=(n.deltaThreshold||-2500),critical:!0,tooltip:(t.delta_30m||0)<=(n.deltaThreshold||-2500)?` 30m delta (${(t.delta_30m||0).toLocaleString()}) is below threshold (${(n.deltaThreshold||-2500).toLocaleString()}), indicating strong selling pressure`:` 30m delta (${(t.delta_30m||0).toLocaleString()}) is above threshold (${(n.deltaThreshold||-2500).toLocaleString()}), not enough selling pressure`},{name:"Outside IB",active:(t.current_price||0)>(t.ib_high||0)&&(t.ib_high||0)>0||(t.current_price||0)<(t.ib_low||999999)&&(t.ib_low||999999)<999999,critical:!0,tooltip:(()=>{const h=t.current_price||0,M=t.ib_high||0,k=t.ib_low||999999,G=h>M&&M>0,Me=h<k&&k<999999;return G?` Price ($${h.toFixed(2)}) is ABOVE IB High ($${M.toFixed(2)}), potential breakout`:Me?` Price ($${h.toFixed(2)}) is BELOW IB Low ($${k.toFixed(2)}), potential breakdown`:` Price ($${h.toFixed(2)}) is within IB range ($${k.toFixed(2)} - $${M.toFixed(2)})`})()},{name:"At pdPOC",active:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0,critical:!1,tooltip:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0?` Price is within $2 of previous day POC ($${(t.pdpoc||0).toFixed(2)}), key support level`:` Price is $${Math.abs((t.current_price||0)-(t.pdpoc||0)).toFixed(2)} away from pdPOC ($${(t.pdpoc||0).toFixed(2)})`},{name:"Absorption",active:(t.absorption_ratio||0)>1.2,critical:!0,tooltip:(t.absorption_ratio||0)>1.2?` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)}) > 1.2, buyers absorbing selling pressure`:` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)})  1.2, not enough buying absorption`},{name:`Buy Imb. ${n.buyingImbalancePct||400}%+`,active:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400),critical:!1,tooltip:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400)?` Buying imbalance (${t.buying_imbalance_pct||0}%) meets threshold (${n.buyingImbalancePct||400}%)`:` Buying imbalance (${t.buying_imbalance_pct||0}%) below threshold (${n.buyingImbalancePct||400}%)`},{name:"Stacked Imb. 3+",active:(t.stacked_buy_imbalances||0)>=3,critical:!1,tooltip:(t.stacked_buy_imbalances||0)>=3?` ${t.stacked_buy_imbalances||0} stacked buy imbalances detected, strong buying interest`:` Only ${t.stacked_buy_imbalances||0} stacked imbalances, need 3+ for confirmation`}],a=l.filter(h=>h.active).length,c=(h,M)=>{const k=h.target.getBoundingClientRect();s({x:k.left,y:k.bottom+8}),i(M)},p=()=>{i(null)};return e.jsxs("div",{style:_.signalMatrix,children:[e.jsxs("div",{style:_.signalHeader,children:[e.jsx("h3",{style:_.signalTitle,children:"Signal Matrix"}),e.jsx("div",{style:_.signalCount,children:e.jsxs("span",{style:{color:a>=4?"#00ff88":"#ffaa00"},children:[a,"/6 Active"]})})]}),e.jsx("div",{style:_.signalGrid,children:l.map((h,M)=>e.jsxs("div",{onMouseEnter:k=>c(k,h),onMouseLeave:p,style:{..._.signalItem,background:h.active?"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,255,136,0.05) 100%)":"rgba(255,68,102,0.1)",borderColor:h.active?"#00ff88":"#ff4466",cursor:"help"},children:[e.jsx("div",{style:{..._.signalIndicator,background:h.active?"#00ff88":"#ff4466",boxShadow:h.active?"0 0 10px #00ff88":"none"}}),e.jsx("span",{style:_.signalName,children:h.name}),h.critical&&e.jsx("span",{style:_.criticalBadge,children:"!"})]},M))}),r&&e.jsxs("div",{style:{position:"fixed",left:o.x,top:o.y,background:"rgba(20,20,30,0.98)",border:`2px solid ${r.active?"#00ff88":"#ff4466"}`,borderRadius:12,padding:"14px 18px",maxWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:r.active?"#00ff88":"#ff4466",boxShadow:r.active?"0 0 8px #00ff88":"none"}}),e.jsx("span",{style:{color:r.active?"#00ff88":"#ff4466",fontWeight:700,fontSize:14},children:r.active?"CONDITION MET":"NOT MET"}),r.critical&&e.jsx("span",{style:{background:"#ff4466",color:"#000",padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:700},children:"CRITICAL"})]}),e.jsx("div",{style:{color:"#ddd",fontSize:13,lineHeight:1.5},children:r.tooltip})]}),e.jsxs("div",{style:_.setupStatus,children:[e.jsx("span",{style:_.phaseLabel,children:"Current Phase:"}),e.jsx("span",{style:{..._.phaseValue,color:(y=t.current_phase)!=null&&y.includes("IB")?"#00ff88":t.current_phase==="POST_IB"?"#ffaa00":t.current_phase==="DISCONNECTED"?"#ff4466":"#888"},children:t.current_phase})]})]})},Eg=({data:t,selectedYear:n,setSelectedYear:r})=>t.yearly_pnl.length===0?e.jsxs("div",{style:_.drillDownContainer,children:[e.jsx("h3",{style:_.sectionTitle,children:" Yearly Performance"}),e.jsx("p",{style:{color:"#666",textAlign:"center",padding:"40px"},children:"No data available for selected date range"})]}):e.jsxs("div",{style:_.drillDownContainer,children:[e.jsx("h3",{style:_.sectionTitle,children:" Yearly Performance"}),e.jsx("div",{style:_.yearGrid,children:t.yearly_pnl.map(i=>e.jsxs("div",{style:{..._.yearCard,border:n===i.year?"2px solid #00ff88":"1px solid rgba(255,255,255,0.1)",background:n===i.year?"rgba(0,255,136,0.1)":"rgba(255,255,255,0.02)"},onClick:()=>r(i.year),children:[e.jsx("div",{style:_.yearLabel,children:i.year}),e.jsxs("div",{style:{..._.yearPnl,color:i.pnl>=0?"#00ff88":"#ff4466"},children:["$",i.pnl.toLocaleString()]}),e.jsxs("div",{style:_.yearStats,children:[e.jsxs("span",{children:[i.trades," trades"]}),e.jsxs("span",{style:{color:"#00ff88"},children:[(i.win_rate*100).toFixed(0),"% WR"]})]})]},i.year))})]}),Lg=({trades:t,onDayClick:n})=>{const[r,i]=L.useState(()=>{if(t.length>0){const m=t[t.length-1],R=new Date(m.date);return{year:R.getFullYear(),month:R.getMonth()}}return{year:2025,month:11}}),[o,s]=L.useState(null),[l,a]=L.useState(null),[c,p]=L.useState({x:0,y:0}),w=L.useMemo(()=>{const m={};return t.forEach(R=>{m[R.date]||(m[R.date]=[]),m[R.date].push(R)}),m},[t]),y=(m,R)=>new Date(m,R+1,0).getDate(),h=(m,R)=>new Date(m,R,1).getDay(),M=y(r.year,r.month),k=h(r.year,r.month),G=["January","February","March","April","May","June","July","August","September","October","November","December"],Me=()=>{i(m=>m.month===0?{year:m.year-1,month:11}:{...m,month:m.month-1})},x=()=>{i(m=>m.month===11?{year:m.year+1,month:0}:{...m,month:m.month+1})},b=[];for(let m=0;m<k;m++)b.push({day:null,date:null});for(let m=1;m<=M;m++){const R=`${r.year}-${String(r.month+1).padStart(2,"0")}-${String(m).padStart(2,"0")}`,$=w[R]||[],ae=$.reduce((q,v)=>q+v.pnl,0);b.push({day:m,date:R,trades:$,pnl:ae,hasTradeData:$.length>0})}const C=(m,R)=>{if(R.hasTradeData){const $=m.target.getBoundingClientRect();p({x:$.left+$.width/2,y:$.top-10}),s(R)}},d=m=>{m.hasTradeData&&(a(m),n&&n(m))},A=L.useMemo(()=>{const m=t.filter(ae=>{const q=new Date(ae.date);return q.getFullYear()===r.year&&q.getMonth()===r.month}),R=m.reduce((ae,q)=>ae+q.pnl,0),$=m.filter(ae=>ae.pnl>0).length;return{trades:m.length,pnl:R,winRate:m.length>0?($/m.length*100).toFixed(0):0}},[t,r]);return e.jsxs("div",{style:Te.container,children:[e.jsxs("div",{style:Te.header,children:[e.jsx("h3",{style:Te.title,children:" Daily P&L Calendar"}),e.jsxs("div",{style:Te.monthNav,children:[e.jsx("button",{onClick:Me,style:Te.navButton,children:""}),e.jsxs("span",{style:Te.monthLabel,children:[G[r.month]," ",r.year]}),e.jsx("button",{onClick:x,style:Te.navButton,children:""})]}),e.jsxs("div",{style:Te.monthStats,children:[e.jsxs("span",{children:[A.trades," trades"]}),e.jsxs("span",{style:{color:A.pnl>=0?"#00ff88":"#ff4466"},children:["$",A.pnl.toLocaleString()]}),e.jsxs("span",{style:{color:"#00ff88"},children:[A.winRate,"% WR"]})]})]}),e.jsx("div",{style:Te.weekdays,children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(m=>e.jsx("div",{style:Te.weekday,children:m},m))}),e.jsx("div",{style:Te.grid,children:b.map((m,R)=>e.jsx("div",{style:{...Te.day,...m.day?{}:Te.emptyDay,...m.hasTradeData?{background:m.pnl>=0?`rgba(0, 255, 136, ${Math.min(.4,Math.abs(m.pnl)/5e4+.1)})`:`rgba(255, 68, 102, ${Math.min(.4,Math.abs(m.pnl)/5e4+.1)})`,cursor:"pointer",border:`1px solid ${m.pnl>=0?"#00ff88":"#ff4466"}`}:{},...(l==null?void 0:l.date)===m.date?{border:"2px solid #fff",boxShadow:"0 0 15px rgba(0,255,136,0.5)"}:{}},onMouseEnter:$=>C($,m),onMouseLeave:()=>s(null),onClick:()=>m.day&&d(m),children:m.day&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:Te.dayNumber,children:m.day}),m.hasTradeData&&e.jsxs("span",{style:{...Te.dayPnl,color:m.pnl>=0?"#00ff88":"#ff4466"},children:[m.pnl>=0?"+":"",(m.pnl/1e3).toFixed(1),"k"]}),m.trades.length>1&&e.jsx("span",{style:Te.tradeCount,children:m.trades.length})]})},R))}),o&&o.hasTradeData&&e.jsxs("div",{style:{...Te.tooltip,left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:[e.jsxs("div",{style:Te.tooltipHeader,children:[o.date,"  ",o.trades.length," trade(s)"]}),o.trades.map((m,R)=>e.jsxs("div",{style:Te.tooltipTrade,children:[e.jsxs("div",{style:Te.tooltipRow,children:[e.jsxs("span",{children:["Grade ",m.grade,"  Tier ",m.tier]}),e.jsxs("span",{style:{color:m.pnl>=0?"#00ff88":"#ff4466"},children:["$",m.pnl.toLocaleString()]})]}),e.jsxs("div",{style:Te.tooltipRow,children:[e.jsxs("span",{children:["Entry: $",m.entry.toFixed(2)]}),e.jsxs("span",{children:["Exit: $",m.exit.toFixed(2)]})]}),e.jsxs("div",{style:Te.tooltipRow,children:[e.jsxs("span",{children:["Delta: ",m.delta]}),e.jsxs("span",{children:["Imb: ",m.buyingImbalance,"%"]})]}),e.jsxs("div",{style:Te.tooltipRow,children:[e.jsxs("span",{children:["Conditions: ",m.grade==="A"?"6/6":m.grade==="B"?"5/6":"4/6"]}),e.jsxs("span",{children:[m.r>0?"+":"",m.r,"R"]})]})]},R)),e.jsx("div",{style:Te.tooltipFooter,children:"Click for full details"})]}),l&&l.hasTradeData&&e.jsx("div",{style:Te.modalOverlay,onClick:()=>a(null),children:e.jsxs("div",{style:Te.modal,onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{style:Te.modalHeader,children:[e.jsxs("h3",{children:[" Trade Details - ",l.date]}),e.jsx("button",{onClick:()=>a(null),style:Te.closeButton,children:""})]}),e.jsx("div",{style:Te.modalContent,children:l.trades.map((m,R)=>{var $,ae,q,v,u,I,_e;return e.jsxs("div",{style:Te.tradeDetail,children:[e.jsxs("div",{style:Te.tradeHeader,children:[e.jsxs("span",{style:Te.tradeBadge,children:["Trade #",m.id]}),e.jsxs("span",{style:{...Te.tradePnl,color:m.pnl>=0?"#00ff88":"#ff4466"},children:[m.pnl>=0?"+":"","$",m.pnl.toLocaleString()]})]}),e.jsxs("div",{style:Te.tradeSection,children:[e.jsx("h4",{children:"Entry & Exit"}),e.jsxs("div",{style:Te.tradeGrid,children:[e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"Entry Price"}),e.jsxs("span",{style:Te.tradeValue,children:["$",m.entry.toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"Exit Price"}),e.jsxs("span",{style:Te.tradeValue,children:["$",m.exit.toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"Stop Loss"}),e.jsxs("span",{style:Te.tradeValue,children:["$",(m.entry-3.5).toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"R-Multiple"}),e.jsxs("span",{style:{...Te.tradeValue,color:m.r>=0?"#00ff88":"#ff4466"},children:[m.r>0?"+":"",m.r,"R"]})]})]})]}),e.jsxs("div",{style:Te.tradeSection,children:[e.jsx("h4",{children:"Reference Levels"}),e.jsxs("div",{style:Te.tradeGrid,children:[e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"IB High"}),e.jsxs("span",{style:Te.tradeValue,children:["$",((($=m.levels)==null?void 0:$.ib_high)||m.entry+15).toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"IB Low"}),e.jsxs("span",{style:Te.tradeValue,children:["$",(((ae=m.levels)==null?void 0:ae.ib_low)||m.entry-10).toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"IB Mid"}),e.jsxs("span",{style:Te.tradeValue,children:["$",(((q=m.levels)==null?void 0:q.ib_mid)||m.entry+2.5).toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"pdPOC"}),e.jsxs("span",{style:Te.tradeValue,children:["$",(((v=m.levels)==null?void 0:v.pdpoc)||m.entry-5).toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"VWAP"}),e.jsxs("span",{style:Te.tradeValue,children:["$",(((u=m.levels)==null?void 0:u.vwap)||m.entry+5).toFixed(2)]})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"pd High"}),e.jsxs("span",{style:Te.tradeValue,children:["$",(((I=m.levels)==null?void 0:I.pd_high)||m.entry+20).toFixed(2)]})]})]})]}),e.jsxs("div",{style:Te.tradeSection,children:[e.jsx("h4",{children:"Entry Criteria Met"}),e.jsx("div",{style:Te.criteriaGrid,children:[{name:"Price < IB Low",met:m.entry<(((_e=m.levels)==null?void 0:_e.ib_low)||m.entry)},{name:"At pdPOC",met:m.grade!=="C"},{name:`Delta Spike (${m.delta})`,met:m.delta<-2500},{name:"Absorption Detected",met:m.grade==="A"},{name:`Buying Imbalance (${m.buyingImbalance}%)`,met:m.buyingImbalance>=400},{name:"Stacked Imbalances",met:m.grade==="A"||m.grade==="B"}].map((E,oe)=>e.jsxs("div",{style:{...Te.criterion,background:E.met?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",borderColor:E.met?"#00ff88":"#ff4466"},children:[e.jsx("span",{style:{...Te.criterionIcon,color:E.met?"#00ff88":"#ff4466"},children:E.met?"":""}),e.jsx("span",{style:Te.criterionName,children:E.name})]},oe))}),e.jsxs("div",{style:Te.criteriaCount,children:["Conditions Met: ",e.jsxs("strong",{children:[m.conditionsMet||(m.grade==="A"?6:m.grade==="B"?5:4),"/6"]})]})]}),e.jsxs("div",{style:Te.tradeSection,children:[e.jsx("h4",{children:"Trade Info"}),e.jsxs("div",{style:Te.tradeGrid,children:[e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"Grade"}),e.jsx("span",{style:{...Te.tradeBadgeSmall,background:m.grade==="A"?"#00ff88":m.grade==="B"?"#ffaa00":"#888"},children:m.grade})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"Tier"}),e.jsx("span",{style:Te.tradeValue,children:m.tier})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"Contracts"}),e.jsx("span",{style:Te.tradeValue,children:m.contracts})]}),e.jsxs("div",{style:Te.tradeItem,children:[e.jsx("span",{style:Te.tradeLabel,children:"Exit Reason"}),e.jsx("span",{style:Te.tradeValue,children:m.exitReason.replace("target_","").replace("_"," ").toUpperCase()})]})]})]})]},R)})}),e.jsx("div",{style:Te.modalFooter,children:e.jsxs("span",{style:{color:l.pnl>=0?"#00ff88":"#ff4466"},children:["Day Total: ",l.pnl>=0?"+":"","$",l.pnl.toLocaleString()]})})]})})]})},Te={container:{background:"linear-gradient(180deg, rgba(15,18,25,0.95) 0%, rgba(10,12,18,0.98) 100%)",borderRadius:16,padding:16,marginTop:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",maxWidth:420},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},title:{fontSize:14,fontWeight:600,color:"#fff",margin:0},monthNav:{display:"flex",alignItems:"center",gap:8},navButton:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:11,transition:"all 0.15s ease"},monthLabel:{fontSize:13,fontWeight:600,color:"#fff",minWidth:110,textAlign:"center"},monthStats:{display:"flex",gap:10,fontSize:11,color:"#666"},weekdays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2,marginBottom:4},weekday:{textAlign:"center",color:"#555",fontSize:9,fontWeight:600,padding:4,letterSpacing:"0.5px"},grid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2},day:{aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:6,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)",position:"relative",transition:"all 0.15s ease",minHeight:42,maxHeight:50},emptyDay:{background:"transparent",border:"none"},dayNumber:{fontSize:11,color:"#777",fontWeight:500},dayPnl:{fontSize:9,fontWeight:600,marginTop:1},tradeCount:{position:"absolute",top:2,right:2,background:"rgba(0,170,255,0.9)",color:"#fff",fontSize:8,fontWeight:700,padding:"1px 4px",borderRadius:8,lineHeight:1.2},tooltip:{position:"fixed",background:"rgba(20, 25, 35, 0.98)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:12,padding:16,zIndex:1e3,minWidth:280,maxWidth:350,boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},tooltipHeader:{fontSize:14,fontWeight:600,color:"#fff",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)"},tooltipTrade:{marginBottom:12,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.05)"},tooltipRow:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#aaa",marginBottom:4},tooltipFooter:{fontSize:11,color:"#666",textAlign:"center",marginTop:8},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:20},modal:{background:"linear-gradient(180deg, #1a1f2e 0%, #0d1117 100%)",borderRadius:16,maxWidth:700,width:"100%",maxHeight:"90vh",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 80px rgba(0,0,0,0.6)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,255,136,0.05)"},closeButton:{background:"rgba(255,255,255,0.1)",border:"none",color:"#fff",fontSize:18,width:36,height:36,borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},modalContent:{padding:24,maxHeight:"calc(90vh - 150px)",overflowY:"auto"},modalFooter:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",textAlign:"center",fontSize:16,fontWeight:600},tradeDetail:{background:"rgba(255,255,255,0.03)",borderRadius:12,padding:20,marginBottom:16,border:"1px solid rgba(255,255,255,0.05)"},tradeHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},tradeBadge:{background:"rgba(0,170,255,0.2)",color:"#00aaff",padding:"4px 12px",borderRadius:20,fontSize:12,fontWeight:600},tradePnl:{fontSize:20,fontWeight:700},tradeSection:{marginBottom:16},tradeGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginTop:8},tradeItem:{display:"flex",flexDirection:"column",gap:4},tradeLabel:{fontSize:11,color:"#666",textTransform:"uppercase"},tradeValue:{fontSize:14,color:"#fff",fontWeight:500},tradeBadgeSmall:{display:"inline-block",padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:600,color:"#000"},criteriaGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8,marginTop:8},criterion:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:8,border:"1px solid",fontSize:12},criterionIcon:{fontSize:14,fontWeight:700},criterionName:{color:"#ccc"},criteriaCount:{marginTop:12,textAlign:"center",fontSize:14,color:"#888"}},Ag=({weeks:t,year:n})=>{const r=t.filter(o=>o.year===n),i=Math.max(...r.map(o=>Math.abs(o.pnl)),1);return r.length===0?e.jsxs("div",{style:_.weekContainer,children:[e.jsxs("h3",{style:_.sectionTitle,children:[" Weekly Breakdown - ",n]}),e.jsx("p",{style:{color:"#666",textAlign:"center",padding:"40px"},children:"No data for selected year"})]}):e.jsxs("div",{style:_.weekContainer,children:[e.jsxs("h3",{style:_.sectionTitle,children:[" Weekly Breakdown - ",n]}),e.jsx("div",{style:_.weekGrid,children:r.slice(0,26).map((o,s)=>{const l=Math.abs(o.pnl)/i*100;return e.jsxs("div",{style:_.weekBar,children:[e.jsx("div",{style:_.weekBarContainer,children:e.jsx("div",{style:{..._.weekBarFill,height:`${l}%`,background:o.pnl>=0?"linear-gradient(180deg, #00ff88 0%, #00cc66 100%)":"linear-gradient(180deg, #ff4466 0%, #cc3355 100%)"}})}),e.jsxs("div",{style:_.weekLabel,children:["W",o.week]}),e.jsxs("div",{style:{..._.weekPnl,color:o.pnl>=0?"#00ff88":"#ff4466"},children:["$",Math.abs(o.pnl/1e3).toFixed(0),"k"]})]},s)})})]})},Fg=({data:t})=>{const n=t.summary.final_equity>1e6?(t.summary.final_equity-1e6)/1e6*100:-((1e6-t.summary.final_equity)/1e6*100);return e.jsxs("div",{style:_.statsContainer,children:[e.jsx("h3",{style:_.sectionTitle,children:" Performance Metrics"}),e.jsxs("div",{style:_.statsGrid,children:[e.jsx(Yi,{title:"Win Rate",value:`${(t.summary.win_rate*100).toFixed(1)}%`,subtitle:`${t.summary.winners}W / ${t.summary.losers}L`,color:"rgba(0,255,136,0.1)"}),e.jsx(Yi,{title:"Total P&L",value:`$${Math.round(t.summary.total_pnl).toLocaleString()}`,subtitle:t.summary.pnl_difference&&t.summary.pnl_difference!==0?`${t.summary.pnl_difference>0?"+":""}$${Math.round(t.summary.pnl_difference).toLocaleString()} from allocation`:"Net Profit",trend:n,color:"rgba(0,255,136,0.1)"}),e.jsx(Yi,{title:"Profit Factor",value:t.summary.profit_factor===1/0?"":t.summary.profit_factor.toFixed(2),subtitle:"Gross Profit / Loss",color:"rgba(255,170,0,0.1)"}),e.jsx(Yi,{title:"Avg R-Multiple",value:`${t.summary.avg_r_multiple.toFixed(2)}R`,subtitle:"Risk-Adjusted Return",color:"rgba(0,170,255,0.1)"}),e.jsx(Yi,{title:"Max Drawdown",value:`$${Math.round(t.summary.max_drawdown).toLocaleString()}`,subtitle:`${(t.summary.max_drawdown_pct*100).toFixed(1)}%`,color:"rgba(255,68,102,0.1)"}),e.jsx(Yi,{title:"Final Equity",value:`$${Math.round(t.summary.final_equity).toLocaleString()}`,subtitle:"Starting: $1,000,000",color:"rgba(136,136,136,0.1)"})]}),e.jsxs("div",{style:_.breakdownGrid,children:[e.jsxs("div",{style:_.breakdownCard,children:[e.jsx("h4",{style:_.breakdownTitle,children:"Exit Reasons"}),Object.entries(t.exit_reasons).map(([r,i])=>e.jsxs("div",{style:_.breakdownRow,children:[e.jsx("span",{style:_.breakdownLabel,children:r.replace("_"," ")}),e.jsx("div",{style:_.breakdownBarContainer,children:e.jsx("div",{style:{..._.breakdownBar,width:`${t.summary.total_trades>0?i/t.summary.total_trades*100:0}%`,background:r==="STOP_LOSS"?"#ff4466":"#00ff88"}})}),e.jsx("span",{style:_.breakdownCount,children:i})]},r))]}),e.jsxs("div",{style:_.breakdownCard,children:[e.jsx("h4",{style:_.breakdownTitle,children:"Grade Analysis"}),Object.entries(t.grade_stats).map(([r,i])=>e.jsxs("div",{style:_.breakdownRow,children:[e.jsxs("span",{style:_.breakdownLabel,children:["Grade ",r]}),e.jsxs("div",{style:_.gradeStats,children:[e.jsxs("span",{style:{color:"#00ff88"},children:[(i.win_rate*100).toFixed(0),"% WR"]}),e.jsxs("span",{style:{color:i.pnl>=0?"#00ff88":"#ff4466"},children:["$",(i.pnl/1e3).toFixed(0),"k"]})]})]},r))]}),e.jsxs("div",{style:_.breakdownCard,children:[e.jsx("h4",{style:_.breakdownTitle,children:"Tier Performance"}),Object.entries(t.tier_stats).map(([r,i])=>e.jsxs("div",{style:_.breakdownRow,children:[e.jsx("span",{style:_.breakdownLabel,children:r.replace("_"," ")}),e.jsxs("div",{style:_.gradeStats,children:[e.jsxs("span",{children:[i.trades," trades"]}),e.jsxs("span",{style:{color:"#00ff88"},children:[(i.win_rate*100).toFixed(0),"% WR"]})]})]},r))]})]})]})},Mg=()=>{var $,ae,q;const[t,n]=L.useState(null),[r,i]=L.useState(null),[o,s]=L.useState(null),[l,a]=L.useState(!0),[c,p]=L.useState(null),[w,y]=L.useState(!1),[h,M]=L.useState(!1),[k,G]=L.useState(!1),[Me,x]=L.useState(!1),[b,C]=L.useState(!0),{isMobile:d}=Ri();L.useEffect(()=>{const v=async()=>{try{const I=`_t=${Date.now()}`,_e={cache:"no-store"},[E,oe,Xe]=await Promise.all([fetch(`${Kt}/zones?${I}`,_e),fetch(`${Kt}/?${I}`,_e),fetch(`${Kt}/market-profile?${I}`,_e)]);if(E.ok&&n(await E.json()),oe.ok){const de=await oe.json();console.log(" LIVE DATA FROM BACKEND:",{contract:de.contract,day_open:de.day_open,weekly_open:de.weekly_open,current_price:de.current_price}),i(de)}Xe.ok&&s(await Xe.json()),p(null)}catch{p("Connection error")}a(!1)};v();const u=setInterval(v,1e3);return()=>clearInterval(u)},[]);const A=L.useMemo(()=>{var lt,Ye;if(!r)return{phase:"-",signal:"neutral",description:"No data"};const v=((lt=r.volume_5m)==null?void 0:lt.history)||((Ye=r.volume_15m)==null?void 0:Ye.history)||[],u=r.current_price||0;if(v.length<3)return{phase:"-",signal:"neutral",description:"Insufficient data"};const I=v.slice(-10),_e=I.slice(-3),E=I.slice(-5),oe={price_close:u,price_high:r.session_high||u,price_low:r.session_low||u,buy:r.buy_volume||0,sell:r.sell_volume||0,delta:r.cumulative_delta||0},Xe=_e.map(N=>N.delta||0),de=_e.map(N=>(N.buy||0)+(N.sell||0)),Be=_e.map(N=>N.price_close||0),S=Xe.reduce((N,Xt)=>N+Xt,0)/3,P=Xe[2]>Xe[1]&&Xe[1]>Xe[0]?"increasing":Xe[2]<Xe[1]&&Xe[1]<Xe[0]?"decreasing":"neutral",O=de[2]>de[1]?"increasing":de[2]<de[1]?"decreasing":"neutral",ke=S<0&&O==="decreasing"&&Math.abs(Xe[2])<Math.abs(Xe[0]),Fe=Be.length>=3&&Be[2]>=Be[0]-2,qe=S<-10&&Fe&&de[2]>50;let Le=!1,bt=!1;if(E.length>=5){const N=E.map(nt=>nt.price_high||nt.price_close||0),Xt=E.map(nt=>nt.price_low||nt.price_close||0),an=Math.max(...N),fn=Math.min(...Xt),at=an-fn,Dt=E.reduce((nt,Ht)=>nt+(Ht.price_close||0),0)/5,pe=at<Dt*.005;Le=oe.price_close>an&&pe;const le=E.slice(-3).map(nt=>nt.delta||0);bt=le[0]<-50&&le[2]>50}const Oe=_e.map(N=>((N.price_high||N.price_close)+(N.price_low||N.price_close))/2),Q=Oe[2]>Oe[1]&&Oe[1]>Oe[0]?"up":Oe[2]<Oe[1]&&Oe[1]<Oe[0]?"down":"neutral",ue=_e.filter(N=>(N.buy||0)>(N.sell||0)*1.5).length,he=oe.price_close>Oe[1]&&oe.delta>0;let ye="-",ge="neutral",Ge="Scanning...";Q==="up"&&ue>=2&&he?(ye="C",ge="bullish",Ge="POC Migration Up - Strong Trend"):Le||bt?(ye="B",ge="bullish",Ge=Le?"Breakout Initiation":"V-Recovery"):ke||qe?(ye="A",ge="preparing",Ge=ke?"Seller Exhaustion":"Absorption Detected"):Q==="down"&&(ge="bearish",Ge="POC Migrating Down");const vt=Math.min(100,Math.max(0,50+(S||0)/5+(Q==="up"?20:Q==="down"?-20:0)+ue*10));return{phase:ye,signal:ge,description:Ge,momentumScore:vt,deltaTrend:P,volTrend:O,exhaustion:ke,absorption:qe,initiation:Le,vRecovery:bt,pocMigration:Q,imbalances:ue}},[r]),m=({zone:v,rank:u})=>{var E,oe,Xe,de,Be,S,P,O,ke,Fe,qe,Le,bt,Oe,Q,ue,he,ye,ge,Ge;const I={approaching:"#ffaa00",at_zone:"#00ff88",watching:"#888",distant:"#555"},_e=((E=v.readiness)==null?void 0:E.overall_score)>=80?"#00ff88":((oe=v.readiness)==null?void 0:oe.overall_score)>=60?"#ffaa00":"#ff4466";return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",border:`2px solid ${u===1?"#00ff88":"rgba(255,255,255,0.1)"}`,borderRadius:d?10:12,padding:d?12:20,marginBottom:d?12:16,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"space-between",gap:d?10:0,marginBottom:d?12:16},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{background:u===1?"#00ff88":"#ffaa00",color:"#000",padding:d?"3px 10px":"4px 12px",borderRadius:20,fontSize:d?10:12,fontWeight:700},children:["#",u," PRIORITY"]}),e.jsx("h3",{style:{margin:"8px 0 0",color:"#fff",fontSize:d?15:18},children:v.name}),e.jsxs("span",{style:{color:"#888",fontSize:d?10:12},children:["Session ",v.session_number,"  ",(Xe=v.type)==null?void 0:Xe.toUpperCase()]})]}),e.jsxs("div",{style:{textAlign:d?"left":"right",display:"flex",flexDirection:d?"row":"column",alignItems:d?"center":"flex-end",gap:d?12:0},children:[e.jsx("div",{style:{color:I[v.status]||"#888",fontSize:d?11:14,fontWeight:600},children:(de=v.status)==null?void 0:de.toUpperCase()}),e.jsxs("div",{style:{color:"#fff",fontSize:d?18:24,fontFamily:"monospace",fontWeight:700},children:["$",(Be=v.price)==null?void 0:Be.toFixed(2)]}),e.jsxs("div",{style:{color:v.distance>0?"#00ff88":"#ff4466",fontSize:d?11:14},children:[v.distance>0?"+":"",(S=v.distance)==null?void 0:S.toFixed(2)," pts"]})]})]}),v.trade&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:d?12:16,marginBottom:d?12:16},children:[e.jsx("div",{style:{color:"#00aaff",fontSize:d?10:12,marginBottom:8,letterSpacing:1},children:"TRADE FRAMEWORK"}),e.jsxs("div",{style:{marginBottom:d?8:12},children:[e.jsx("span",{style:{color:"#888",fontSize:d?9:11},children:"ENTRY TRIGGER"}),e.jsx("div",{style:{color:"#fff",fontSize:d?11:13},children:v.trade.entry_trigger})]}),e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?8:20,marginBottom:d?8:12},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:d?9:11},children:"TARGET 1"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:d?11:14},children:[(P=v.trade.target1)==null?void 0:P.name,": $",(ke=(O=v.trade.target1)==null?void 0:O.price)==null?void 0:ke.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:d?10:12},children:["+",(qe=(Fe=v.trade.target1)==null?void 0:Fe.pts)==null?void 0:qe.toFixed(2),"pts"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:d?9:11},children:"TARGET 2"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:d?11:14},children:[(Le=v.trade.target2)==null?void 0:Le.name,": $",(Oe=(bt=v.trade.target2)==null?void 0:bt.price)==null?void 0:Oe.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:d?10:12},children:["+",(ue=(Q=v.trade.target2)==null?void 0:Q.pts)==null?void 0:ue.toFixed(2),"pts"]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:d?9:11},children:"STOP"}),e.jsxs("div",{style:{color:"#ff4466",fontSize:d?11:14},children:["$",(ye=(he=v.trade.stop)==null?void 0:he.price)==null?void 0:ye.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:d?10:12},children:["-",(Ge=(ge=v.trade.stop)==null?void 0:ge.pts)==null?void 0:Ge.toFixed(2),"pts"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{color:"#888",fontSize:d?9:11},children:"R:R"}),e.jsxs("div",{style:{color:"#ffaa00",fontSize:d?16:18,fontWeight:700},children:[v.trade.r_ratio,":1"]})]})]})]}),v.readiness&&e.jsxs("div",{style:{background:_e==="#00ff88"?"rgba(0,255,136,0.1)":_e==="#ffaa00"?"rgba(255,170,0,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${_e}`,borderRadius:8,padding:d?10:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx("span",{style:{color:_e,fontWeight:600,fontSize:d?11:14},children:"SETUP READINESS"}),e.jsxs("span",{style:{color:_e,fontWeight:700,fontSize:d?16:18},children:[v.readiness.overall_score,"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:d?3:4,fontSize:d?9:11},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.price_at_zone?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.price_at_zone?"":""}),e.jsx("span",{children:"Price at Zone"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.tpo_confirmation?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.tpo_confirmation?"":""}),e.jsx("span",{children:"2+ TPO"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.session_context?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.session_context?"":""}),e.jsx("span",{children:"Session OK"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.single_print_nearby?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.single_print_nearby?"":""}),e.jsx("span",{children:"Single Print"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.poc_alignment?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.poc_alignment?"":""}),e.jsx("span",{children:"POC Align"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:v.readiness.ib_intact?"#00ff88":"#666"},children:[e.jsx("span",{children:v.readiness.ib_intact?"":""}),e.jsx("span",{children:"IB Intact"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:A.signal==="bullish"?"#00ff88":A.signal==="preparing"?"#ffaa00":A.signal==="bearish"?"#ff4466":"#666"},children:[e.jsx("span",{children:A.signal==="bullish"||A.signal==="preparing"?"":""}),e.jsx("span",{children:A.phase!=="-"?`Phase ${A.phase}`:"Vol Scan"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:A.momentumScore>=60?"#00ff88":A.momentumScore>=40?"#ffaa00":"#ff4466"},children:[e.jsx("span",{children:A.momentumScore>=50?"":""}),e.jsxs("span",{children:["Momentum ",Math.round(A.momentumScore||50)]})]})]}),A.phase!=="-"&&e.jsx("div",{style:{marginTop:8,padding:"6px 8px",background:A.signal==="bullish"?"rgba(0,255,136,0.1)":A.signal==="preparing"?"rgba(255,170,0,0.1)":A.signal==="bearish"?"rgba(255,68,102,0.1)":"rgba(255,255,255,0.05)",borderRadius:6,border:`1px solid ${A.signal==="bullish"?"#00ff8840":A.signal==="preparing"?"#ffaa0040":A.signal==="bearish"?"#ff446640":"#ffffff20"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:d?9:10,fontWeight:600,color:A.signal==="bullish"?"#00ff88":A.signal==="preparing"?"#ffaa00":A.signal==="bearish"?"#ff4466":"#888"},children:["PHASE ",A.phase,": ",A.description]}),e.jsxs("span",{style:{fontSize:d?8:9,color:"#666",display:"flex",gap:8},children:[e.jsxs("span",{children:[" ",A.deltaTrend==="increasing"?"":A.deltaTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["Vol ",A.volTrend==="increasing"?"":A.volTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["POC ",A.pocMigration==="up"?"":A.pocMigration==="down"?"":""]})]})]})})]})]})},R=({zones:v,buyZones:u,currentPrice:I,compact:_e=!1})=>{const E=[...v||[]].filter(O=>O.price>I).sort((O,ke)=>ke.price-O.price),oe=[...v||[]].filter(O=>O.price<=I).sort((O,ke)=>ke.price-O.price),Xe=new Set((u||[]).map(O=>O.id)),de=O=>O.type==="ib_high"?"#ffaa00":O.type==="ib_low"?"#00ff88":O.type==="poc"?"#9370DB":O.type==="vah"?"#ff6b6b":O.type==="val"?"#4ECDC4":"#888",Be=O=>Xe.has(O.id)?O.status==="at_zone"?{label:"TRIGGERED",color:"#00ff88",bg:"rgba(0,255,136,0.15)"}:O.status==="approaching"?{label:"APPROACHING",color:"#ffaa00",bg:"rgba(255,170,0,0.15)"}:{label:"VALID",color:"#00aaff",bg:"rgba(0,170,255,0.1)"}:null,S=O=>{const ke=(u||[]).findIndex(Fe=>Fe.id===O.id);return ke>=0?ke+1:null},P=O=>{var Oe;const ke=Be(O),Fe=S(O),qe=O.price>I,Le=O.price-I,bt=Math.abs(Le)<=2;return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 12px",margin:"2px 8px",borderRadius:6,background:bt?"rgba(0,255,136,0.1)":ke?ke.bg:"transparent",borderLeft:`3px solid ${de(O)}`,transition:"background 0.2s"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[Fe&&e.jsxs("span",{style:{background:Fe===1?"#00ff88":Fe===2?"#ffaa00":"#00aaff",color:"#000",fontSize:9,fontWeight:700,padding:"1px 5px",borderRadius:3},children:["#",Fe]}),e.jsx("span",{style:{color:"#fff",fontSize:11,fontWeight:Fe?600:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:O.name})]}),ke&&e.jsx("span",{style:{fontSize:9,color:ke.color,fontWeight:600,letterSpacing:.5},children:ke.label})]}),e.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[e.jsx("div",{style:{color:"#fff",fontSize:12,fontFamily:"monospace",fontWeight:bt?700:400},children:(Oe=O.price)==null?void 0:Oe.toFixed(2)}),e.jsxs("div",{style:{fontSize:10,fontFamily:"monospace",color:qe?"#ff4466":"#00ff88"},children:[qe?"+":"",Le==null?void 0:Le.toFixed(1)]})]})]},O.id)};return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#888",fontSize:11,letterSpacing:1},children:"PRICE LADDER"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{color:"#ff4466",fontSize:10},children:[E.length," above"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#00ff88",fontSize:10},children:[oe.length," below"]})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px 0"},children:[E.map(O=>P(O)),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 12px",margin:"8px",borderRadius:8,background:"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, rgba(0,255,136,0.05) 50%, rgba(0,255,136,0.2) 100%)",border:"1px solid rgba(0,255,136,0.4)",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",left:12,display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 8px rgba(0,255,136,0.6)"}}),e.jsx("span",{style:{color:"#00ff88",fontSize:10,fontWeight:600},children:"LIVE"})]}),e.jsxs("span",{style:{color:"#00ff88",fontSize:16,fontFamily:"monospace",fontWeight:700,textShadow:"0 0 10px rgba(0,255,136,0.5)"},children:["$",I==null?void 0:I.toFixed(2)]}),e.jsx("span",{style:{position:"absolute",right:12,color:"#888",fontSize:10},children:"CURRENT"})]}),oe.map(O=>P(O))]}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,0.08)",display:"flex",flexWrap:"wrap",gap:8,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ffaa00",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB High"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#00ff88",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB Low"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#9370DB",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"POC"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ff6b6b",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAH"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#4ECDC4",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAL"})]})]})]})};return l?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#888"},children:"Loading zones..."}):c||!t?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#ff4466"},children:c||"No zone data available"}):e.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?12:20,padding:d?12:20,height:d?"auto":"100%",overflow:d?"auto":"hidden",position:"relative"},children:[b&&!d&&e.jsxs("div",{onClick:()=>C(!1),style:{position:"fixed",top:80,right:20,background:"rgba(15, 15, 25, 0.98)",borderRadius:10,border:"1px solid rgba(0, 255, 136, 0.4)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 0 15px rgba(0, 255, 136, 0.15)",zIndex:1e3,cursor:"pointer",transition:"all 0.2s ease",padding:"12px 16px"},title:"Click to show Price Ladder",children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"LIVE PRICE"}),e.jsxs("div",{style:{fontSize:22,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace"},children:["$",(($=t==null?void 0:t.current_price)==null?void 0:$.toFixed(2))||"--"]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:6},children:"Click for ladder "})]}),e.jsxs("div",{style:{flex:d?"none":b?1:2,overflowY:d?"visible":"auto"},children:[e.jsx("div",{style:{display:"flex",flexDirection:d?"column":"row",justifyContent:"space-between",alignItems:d?"flex-start":"center",gap:d?8:0,marginBottom:d?12:16},children:e.jsx("h2",{style:{color:"#fff",margin:0,fontSize:d?16:24},children:d?"10pt Buy Setup":"Zone Participation - 10pt Buy Setup"})}),(()=>{var Fe,qe,Le,bt,Oe;const v=(t==null?void 0:t.current_price)||(r==null?void 0:r.current_price)||0;t!=null&&t.all_zones;const u={monthly:{bias:"NEUTRAL",color:"#ffaa00"},weekly:{bias:"NEUTRAL",color:"#ffaa00"},dayOpen:{position:"--",diff:0,color:"#888"},weeklyOpen:{position:"--",diff:0,color:"#888"},daily:{ib:{level:"--",color:"#888"},pvaLocation:{status:"--",detail:"",color:"#888"},opening:{type:"--",color:"#888"}},critical:{abOverlap:{pct:"--",color:"#888"},buyingTail:!1,sellingTail:!1,tpoBias:{direction:"--",color:"#888"}}};if(r){const Q=r.pd_high||0,ue=r.pd_low||0,he=(Q+ue)/2,ye=r.week_high||0,ge=r.week_low||0,Ge=r.weekly_open||0,vt=ye-ge;let lt=0,Ye=[];if(ye>0&&ge>0&&vt>0){const le=(v-ge)/vt*100;if(le>=90?(lt+=40,Ye.push("Near Week High")):le>=70?(lt+=30,Ye.push("Upper Week Range")):le<=10?(lt-=40,Ye.push("Near Week Low")):le<=30?(lt-=30,Ye.push("Lower Week Range")):Ye.push("Mid Week Range"),Ge>0){const nt=v-Ge;nt<-vt*.1?(lt+=35,Ye.push("Below Weekly Open")):nt>vt*.1?lt-=25:lt+=10}v>Q?(lt+=25,Ye.push("Above PD High")):v>he?lt+=15:v<ue?(lt-=25,Ye.push("Below PD Low")):v<he&&(lt-=15),lt>=60?u.weekly={bias:"VERY BULLISH",color:"#00ff88",score:lt,factors:Ye}:lt>=25?u.weekly={bias:"BULLISH",color:"#88ff88",score:lt,factors:Ye}:lt<=-60?u.weekly={bias:"VERY BEARISH",color:"#ff4466",score:lt,factors:Ye}:lt<=-25?u.weekly={bias:"BEARISH",color:"#ff8888",score:lt,factors:Ye}:u.weekly={bias:"NEUTRAL",color:"#ffaa00",score:lt,factors:Ye}}else v>Q?u.weekly={bias:"BULLISH",color:"#88ff88",factors:["Above PD High"]}:v<ue&&(u.weekly={bias:"BEARISH",color:"#ff8888",factors:["Below PD Low"]});const N=r.rolling_20d_high||0,Xt=r.rolling_20d_low||0,an=N-Xt,fn=(N+Xt)/2;let at=0,Dt=[];if(N>0&&Xt>0&&an>0){const le=(v-Xt)/an*100;le>=90?(at+=50,Dt.push("Near 20d High")):le>=75?(at+=35,Dt.push("Upper 20d Range")):le>=60?at+=20:le<=10?(at-=50,Dt.push("Near 20d Low")):le<=25?(at-=35,Dt.push("Lower 20d Range")):le<=40&&(at-=20),ye>0&&ge>0&&(ye>=N*.998?(at+=30,Dt.push("Week at 20d High")):ge<=Xt*1.002?(at-=30,Dt.push("Week at 20d Low")):ye>fn?at+=15:ge<fn&&(at-=15)),Ge>0&&(v>Ge&&Ge>Xt+an*.4?(at+=20,Dt.push("Uptrend confirmed")):v<Ge&&Ge<N-an*.4&&(at-=20,Dt.push("Downtrend confirmed"))),at>=50?u.monthly={bias:"VERY BULLISH",color:"#00ff88",score:at,factors:Dt}:at>=20?u.monthly={bias:"BULLISH",color:"#88ff88",score:at,factors:Dt}:at<=-50?u.monthly={bias:"VERY BEARISH",color:"#ff4466",score:at,factors:Dt}:at<=-20?u.monthly={bias:"BEARISH",color:"#ff8888",score:at,factors:Dt}:u.monthly={bias:"NEUTRAL",color:"#ffaa00",score:at,factors:Dt}}else if(ye>0&&ge>0){const le=(v-ge)/vt*100;le>=80?u.monthly={bias:"BULLISH",color:"#88ff88",factors:["Near Week High"]}:le<=20&&(u.monthly={bias:"BEARISH",color:"#ff8888",factors:["Near Week Low"]})}const pe=r.day_open||0;if(pe>0){const le=v-pe;le<-2?u.dayOpen={position:"BELOW",diff:le,price:pe,color:"#00ff88",bias:"BULLISH"}:le>2?u.dayOpen={position:"ABOVE",diff:le,price:pe,color:"#ff4466",bias:"BEARISH"}:u.dayOpen={position:"AT",diff:le,price:pe,color:"#ffaa00",bias:"NEUTRAL"}}if(Ge>0){const le=v-Ge;le<-5?u.weeklyOpen={position:"BELOW",diff:le,price:Ge,color:"#00ff88",bias:"BULLISH"}:le>5?u.weeklyOpen={position:"ABOVE",diff:le,price:Ge,color:"#ff4466",bias:"BEARISH"}:u.weeklyOpen={position:"AT",diff:le,price:Ge,color:"#ffaa00",bias:"NEUTRAL"}}}if(o){const Q=o.ib_range||0,ue=o.avg_daily_range||50,he=ue>0?Q/ue*100:0;Q===0||!o.ib_complete?u.daily.ib={level:"FORMING",color:"#888",pct:"--"}:he<35?u.daily.ib={level:"LOW",color:"#00ff88",pct:he.toFixed(0)}:he<=75?u.daily.ib={level:"MEDIUM",color:"#ffaa00",pct:he.toFixed(0)}:u.daily.ib={level:"HIGH",color:"#ff4466",pct:he.toFixed(0)}}if(r&&o){const Q=r.pd_high||0,ue=r.pd_low||0,he=Q-ue,ye=ue+he*.85,ge=ue+he*.15,Ge=r.day_open||v,vt=r.session_open||Ge;if(v>=ge&&v<=ye){const lt=vt>=ge&&vt<=ye;u.daily.pvaLocation={status:"IN",detail:lt?"Accepted":"Returned",color:"#00aaff"}}else if(v>ye){const lt=v>ye+5;u.daily.pvaLocation={status:"OUT",detail:lt?"Accepted Above":"Testing VAH",color:lt?"#00ff88":"#ffaa00"}}else{const lt=v<ge-5;u.daily.pvaLocation={status:"OUT",detail:lt?"Accepted Below":"Testing VAL",color:lt?"#ff4466":"#ffaa00"}}(Math.abs(v-ye)<=3||Math.abs(v-ge)<=3)&&(u.daily.pvaLocation.status="DYNAMIC",u.daily.pvaLocation.color="#ffaa00")}if(o!=null&&o.open_type){const Q=((Fe=o.open_type)==null?void 0:Fe.toUpperCase())||"DEVELOPING",ue={OD:{name:"OD",full:"Open Drive",color:"#00ff88"},OPEN_DRIVE:{name:"OD",full:"Open Drive",color:"#00ff88"},OTD:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},OPEN_TEST_DRIVE:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},ORR:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OPEN_REJECTION_REVERSE:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OA:{name:"OA",full:"Open Auction",color:"#ffaa00"},OPEN_AUCTION:{name:"OA",full:"Open Auction",color:"#ffaa00"},DEVELOPING:{name:"DEV",full:"Developing",color:"#888"}},he=ue[Q]||ue.DEVELOPING;u.daily.opening={type:he.name,full:he.full,color:he.color}}if((o==null?void 0:o.ab_overlap)!==void 0&&(o==null?void 0:o.ab_overlap)!==null){const Q=o.ab_overlap;Q<33?u.critical.abOverlap={pct:Q.toFixed(0),color:"#00ff88",level:"<33%"}:Q<=50?u.critical.abOverlap={pct:Q.toFixed(0),color:"#ffaa00",level:"33-50%"}:u.critical.abOverlap={pct:Q.toFixed(0),color:"#ff4466",level:">50%"}}if(o){const Q=o.single_prints_count||0,ue=(r==null?void 0:r.day_high)||0,he=(r==null?void 0:r.day_low)||0,ye=o.poc||v;Q>0&&(ye>(ue+he)/2?u.critical.buyingTail=!0:u.critical.sellingTail=!0)}if(o){const Q=o.poc||0,ue=o.vah||0,he=o.val||0,ye=(ue+he)/2;Q>ye+2?u.critical.tpoBias={direction:"BULLISH",color:"#00ff88"}:Q<ye-2?u.critical.tpoBias={direction:"BEARISH",color:"#ff4466"}:u.critical.tpoBias={direction:"NEUTRAL",color:"#ffaa00"}}const I={rank1:{name:"MACRO",points:3,factors:[],total:0,direction:"NEUTRAL"},rank2:{name:"VOLUME",points:2,factors:[],total:0,direction:"NEUTRAL"},rank3:{name:"STRUCTURE",points:2,factors:[],total:0,direction:"NEUTRAL"},rank4:{name:"TIMING",points:1,factors:[],total:0,direction:"NEUTRAL"},conflicts:[],totalScore:0,confidence:"LOW",positionSize:"25%",direction:"NEUTRAL"};if(r){const Q=r.week_high||0,ue=r.week_low||0,he=Q-ue;if(he>0){const ye=ue+he*.7,ge=ue+he*.3;v>ye?(I.rank1.factors.push({name:"Weekly VA",signal:"LONG",reason:"Price above weekly VAH",pts:3}),I.rank1.total+=3):v<ge?(I.rank1.factors.push({name:"Weekly VA",signal:"SHORT",reason:"Price below weekly VAL",pts:-3}),I.rank1.total-=3):I.rank1.factors.push({name:"Weekly VA",signal:"NEUTRAL",reason:"Price inside weekly VA",pts:0})}}if(r){const Q=r.rolling_20d_high||0,ue=r.rolling_20d_low||0,he=Q-ue;if(he>0){const ye=ue+he*.75,ge=ue+he*.25;v>ye?(I.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"LONG",reason:"At multi-day highs (breakout zone)",pts:3}),I.rank1.total+=3):v<ge?(I.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"SHORT",reason:"At multi-day lows (breakdown zone)",pts:-3}),I.rank1.total-=3):I.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"NEUTRAL",reason:"Mid-range (fair value)",pts:0})}}if((r==null?void 0:r.weekly_open)>0){const Q=r.weekly_open,ue=v-Q;ue>10?(I.rank1.factors.push({name:"Composite VPOC",signal:"LONG",reason:`+${ue.toFixed(0)}pts above weekly open`,pts:3}),I.rank1.total+=3):ue<-10?(I.rank1.factors.push({name:"Composite VPOC",signal:"SHORT",reason:`${ue.toFixed(0)}pts below weekly open`,pts:-3}),I.rank1.total-=3):I.rank1.factors.push({name:"Composite VPOC",signal:"NEUTRAL",reason:"Near weekly open",pts:0})}if(I.rank1.direction=I.rank1.total>0?"LONG":I.rank1.total<0?"SHORT":"NEUTRAL",r){const Q=r.day_open||0,ue=r.day_high||0,he=r.day_low||0;if(Q>0){const ye=ue-Q,ge=Q-he;ye>ge*1.5?(I.rank2.factors.push({name:"Delta Direction",signal:"LONG",reason:"Buyers dominating (up move > down)",pts:2}),I.rank2.total+=2):ge>ye*1.5?(I.rank2.factors.push({name:"Delta Direction",signal:"SHORT",reason:"Sellers dominating (down move > up)",pts:-2}),I.rank2.total-=2):I.rank2.factors.push({name:"Delta Direction",signal:"NEUTRAL",reason:"Balanced volume",pts:0})}}if(o){const Q=o.poc||0,ue=o.vah||0,he=o.val||0;if(Q>0&&ue>0&&he>0){const ye=ue-he,ge=(Q-he)/ye;ge>.65?(I.rank2.factors.push({name:"Daily HVN",signal:"LONG",reason:"POC in upper VA (HVN above)",pts:2}),I.rank2.total+=2):ge<.35?(I.rank2.factors.push({name:"Daily HVN",signal:"SHORT",reason:"POC in lower VA (HVN below)",pts:-2}),I.rank2.total-=2):I.rank2.factors.push({name:"Daily HVN",signal:"NEUTRAL",reason:"POC centered",pts:0})}}if(o!=null&&o.vpoc&&(o!=null&&o.poc)){const Q=o.vpoc,ue=o.poc;if(Math.abs(Q-ue)<3){const ye=Q>v;I.rank2.factors.push({name:"VPOC/POC Align",signal:ye?"SHORT":"LONG",reason:`VPOC & POC aligned at ${Q.toFixed(0)} (strong ${ye?"resistance":"support"})`,pts:ye?-2:2}),I.rank2.total+=ye?-2:2}else o.vpoc>o.poc?(I.rank2.factors.push({name:"VPOC/POC Align",signal:"LONG",reason:"VPOC above POC (volume leads up)",pts:2}),I.rank2.total+=2):(I.rank2.factors.push({name:"VPOC/POC Align",signal:"SHORT",reason:"VPOC below POC (volume leads down)",pts:-2}),I.rank2.total-=2)}else if(o!=null&&o.poc){const Q=o.poc>v?"SHORT":"LONG";I.rank2.factors.push({name:"POC Location",signal:Q,reason:`POC at ${(qe=o.poc)==null?void 0:qe.toFixed(0)} (${Q==="LONG"?"support":"resistance"})`,pts:Q==="LONG"?1:-1}),I.rank2.total+=Q==="LONG"?1:-1}if(I.rank2.direction=I.rank2.total>0?"LONG":I.rank2.total<0?"SHORT":"NEUTRAL",o&&(o.single_prints_count||0)>0&&(u.critical.buyingTail&&(I.rank3.factors.push({name:"Buying Tail",signal:"LONG",reason:"Single prints at lows (buyer aggression)",pts:2}),I.rank3.total+=2),u.critical.sellingTail&&(I.rank3.factors.push({name:"Selling Tail",signal:"SHORT",reason:"Single prints at highs (seller aggression)",pts:-2}),I.rank3.total-=2)),o){const Q=o.poc||0,ue=o.vah||0,he=o.val||0,ye=(r==null?void 0:r.day_high)||ue,ge=(r==null?void 0:r.day_low)||he,Ge=ye-ge;if(Ge>0){const vt=ye-ue,lt=he-ge,Ye=ue-he,N=(Q-ge)/Ge;let Xt="D",an="NEUTRAL",fn="Balanced D-shape profile",at=0;N<.4&&vt>Ye*.3?(Xt="P",an="LONG",fn="P-shape (accumulation, buyers loading)",at=2):N>.6&&lt>Ye*.3?(Xt="b",an="SHORT",fn="b-shape (distribution, sellers unloading)",at=-2):o.double_distribution&&(Xt="B",an="NEUTRAL",fn="B-shape (double distribution, range bound)",at=0),I.rank3.factors.push({name:`Profile Shape (${Xt})`,signal:an,reason:fn,pts:at}),I.rank3.total+=at}}if(o&&r){const Q=o.ib_high||0,ue=o.ib_low||0,he=r.day_high||0,ye=r.day_low||0;if(Q>0&&ue>0){const ge=he>Q+2,Ge=ye<ue-2;ge&&!Ge?(I.rank3.factors.push({name:"Range Extension",signal:"LONG",reason:"IB broken to upside",pts:2}),I.rank3.total+=2):Ge&&!ge?(I.rank3.factors.push({name:"Range Extension",signal:"SHORT",reason:"IB broken to downside",pts:-2}),I.rank3.total-=2):ge&&Ge?I.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"IB broken both ways",pts:0}):I.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"Inside IB",pts:0})}}if(I.rank3.direction=I.rank3.total>0?"LONG":I.rank3.total<0?"SHORT":"NEUTRAL",o!=null&&o.open_type){const Q=((Le=o.open_type)==null?void 0:Le.toUpperCase())||"",ue=o.open_direction||"";if(Q.includes("OD")||Q.includes("DRIVE")){const he=ue==="up"?1:ue==="down"?-1:0;I.rank4.factors.push({name:"Open Type",signal:he>0?"LONG":he<0?"SHORT":"NEUTRAL",reason:`Open Drive ${ue||""}`,pts:he}),I.rank4.total+=he}else if(Q.includes("ORR")||Q.includes("REJECTION")){const he=ue==="up"?-1:ue==="down"?1:0;I.rank4.factors.push({name:"Open Type",signal:he>0?"LONG":he<0?"SHORT":"NEUTRAL",reason:"Open Rejection Reverse",pts:he}),I.rank4.total+=he}else if(Q.includes("OTD")||Q.includes("TEST")){const he=ue==="up"?1:ue==="down"?-1:0;I.rank4.factors.push({name:"Open Type",signal:he>0?"LONG":he<0?"SHORT":"NEUTRAL",reason:`Open Test Drive ${ue||""}`,pts:he*.5}),I.rank4.total+=he*.5}}if(u.daily.ib.level!=="--"&&u.daily.ib.level!=="FORMING")if(u.daily.ib.level==="LOW"){const Q=I.rank3.direction!=="NEUTRAL"?I.rank3.direction:I.rank2.direction!=="NEUTRAL"?I.rank2.direction:"NEUTRAL";Q==="LONG"?(I.rank4.factors.push({name:"IB Width",signal:"LONG",reason:"Low IB + uptrend = expansion up",pts:1}),I.rank4.total+=1):Q==="SHORT"?(I.rank4.factors.push({name:"IB Width",signal:"SHORT",reason:"Low IB + downtrend = expansion down",pts:-1}),I.rank4.total-=1):I.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"Low IB (breakout pending)",pts:0})}else u.daily.ib.level==="HIGH"&&I.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"High IB (rotational day)",pts:0});if((o==null?void 0:o.single_prints_count)>0){const Q=o.single_print_level||0;Q>v+5?(I.rank4.factors.push({name:"Single Prints",signal:"LONG",reason:`Singles above at ${Q.toFixed(0)} (target)`,pts:1}),I.rank4.total+=1):Q<v-5&&(I.rank4.factors.push({name:"Single Prints",signal:"SHORT",reason:`Singles below at ${Q.toFixed(0)} (target)`,pts:-1}),I.rank4.total-=1)}I.rank4.direction=I.rank4.total>0?"LONG":I.rank4.total<0?"SHORT":"NEUTRAL";const _e=[{rank:1,name:"MACRO",dir:I.rank1.direction,total:I.rank1.total},{rank:2,name:"VOLUME",dir:I.rank2.direction,total:I.rank2.total},{rank:3,name:"STRUCTURE",dir:I.rank3.direction,total:I.rank3.total},{rank:4,name:"TIMING",dir:I.rank4.direction,total:I.rank4.total}].filter(Q=>Q.dir!=="NEUTRAL");for(let Q=0;Q<_e.length;Q++)for(let ue=Q+1;ue<_e.length;ue++)_e[Q].dir!==_e[ue].dir&&I.conflicts.push({higher:_e[Q],lower:_e[ue],resolution:`${_e[Q].name} (Rank ${_e[Q].rank}) overrides ${_e[ue].name}`});I.totalScore=I.rank1.total+I.rank2.total+I.rank3.total+I.rank4.total;const E=Math.abs(I.totalScore);E>=12?(I.confidence="VERY HIGH",I.positionSize="100%+",I.confidenceColor="#00ff88"):E>=8?(I.confidence="HIGH",I.positionSize="100%",I.confidenceColor="#88ff88"):E>=5?(I.confidence="MED-HIGH",I.positionSize="75%",I.confidenceColor="#ffdd00"):E>=2?(I.confidence="MEDIUM",I.positionSize="50%",I.confidenceColor="#ffaa00"):E>=0?(I.confidence="LOW",I.positionSize="25% or SKIP",I.confidenceColor="#ff8844"):(I.confidence="AVOID",I.positionSize="NO TRADE",I.confidenceColor="#ff4466"),I.direction=I.totalScore>0?"LONG":I.totalScore<0?"SHORT":"NEUTRAL";let oe=0,Xe=0;if(u.monthly.bias.includes("BULLISH")&&(oe+=u.monthly.bias.includes("VERY")?15:10),u.monthly.bias.includes("BEARISH")&&(Xe+=u.monthly.bias.includes("VERY")?15:10),u.weekly.bias.includes("BULLISH")&&(oe+=u.weekly.bias.includes("VERY")?15:10),u.weekly.bias.includes("BEARISH")&&(Xe+=u.weekly.bias.includes("VERY")?15:10),u.dayOpen.bias==="BULLISH"&&(oe+=10),u.dayOpen.bias==="BEARISH"&&(Xe+=10),u.weeklyOpen.bias==="BULLISH"&&(oe+=12),u.weeklyOpen.bias==="BEARISH"&&(Xe+=12),u.daily.ib.level==="LOW"&&(oe+=8),u.daily.ib.level==="HIGH"&&(Xe+=5),(bt=u.daily.pvaLocation.detail)!=null&&bt.includes("Above")&&(oe+=10),(Oe=u.daily.pvaLocation.detail)!=null&&Oe.includes("Below")&&(Xe+=10),u.daily.pvaLocation.status==="IN"&&(oe+=3,Xe+=3),u.daily.opening.type==="OD"){const Q=o==null?void 0:o.open_direction;Q==="up"?oe+=12:Q==="down"&&(Xe+=12)}if(u.daily.opening.type==="ORR"){const Q=o==null?void 0:o.open_direction;Q==="up"?Xe+=8:Q==="down"&&(oe+=8)}if(u.critical.abOverlap.pct!=="--"){const Q=parseFloat(u.critical.abOverlap.pct);Q<33&&(oe+=5),Q>50&&(Xe+=3)}u.critical.buyingTail&&(oe+=8),u.critical.sellingTail&&(Xe+=8),u.critical.tpoBias.direction==="BULLISH"&&(oe+=7),u.critical.tpoBias.direction==="BEARISH"&&(Xe+=7);const de=oe+Xe,Be=de>0?Math.round(oe/de*100):50,S=100-Be;let P="NEUTRAL",O="#ffaa00",ke=50;return Be>=65?(P=Be>=80?"VERY BULLISH":"BULLISH",O=Be>=80?"#00ff88":"#88ff88",ke=Be):S>=65?(P=S>=80?"VERY BEARISH":"BEARISH",O=S>=80?"#ff4466":"#ff8888",ke=S):ke=Math.max(Be,S),e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:d?10:12,border:`2px solid ${O}40`,padding:d?12:16,marginBottom:d?12:16},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#888",letterSpacing:1,marginBottom:4},children:"SIGNAL ENGINE"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:d?18:22,fontWeight:700,color:O},children:P}),e.jsxs("span",{style:{fontSize:12,padding:"3px 8px",background:`${O}25`,borderRadius:4,color:O,fontWeight:600},children:[ke,"%"]})]})]})}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden",marginBottom:16},children:[e.jsxs("div",{onClick:()=>x(!Me),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:d?12:16,cursor:"pointer",background:`linear-gradient(135deg, ${I.confidenceColor}12 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:Me?`1px solid ${I.confidenceColor}30`:"none",transition:"all 0.2s ease"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO HTF ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:d?20:26,fontWeight:800,color:I.direction==="LONG"?"#00ff88":I.direction==="SHORT"?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:[I.totalScore>0?"+":"",I.totalScore]}),e.jsx("span",{style:{fontSize:d?14:16,fontWeight:700,color:I.direction==="LONG"?"#00ff88":I.direction==="SHORT"?"#ff4466":"#ffaa00"},children:I.direction})]})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:I.confidenceColor,marginBottom:2},children:I.confidence}),e.jsxs("div",{style:{fontSize:10,padding:"3px 8px",background:`${I.confidenceColor}25`,borderRadius:4,color:I.confidenceColor,fontWeight:600},children:["Size: ",I.positionSize]})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:Me?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]})]}),Me&&e.jsxs("div",{style:{padding:d?12:16},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:d?"1fr 1fr":"1fr 1fr 1fr 1fr",gap:8,marginBottom:12},children:[I.rank1,I.rank2,I.rank3,I.rank4].map((Q,ue)=>{var Ge,vt;const he=ue+1,ye=Q.direction==="LONG"?"#00ff88":Q.direction==="SHORT"?"#ff4466":"#666",ge=Math.min(100,Math.abs(Q.total)*(he===1?15:he<=3?20:30));return e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"8px 10px",borderLeft:`3px solid ${ye}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsxs("span",{style:{fontSize:8,color:"#888",letterSpacing:.5},children:["R",he," ",Q.name]}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:ye,fontFamily:"monospace"},children:[Q.total>0?"+":"",Q.total]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${ge}%`,background:ye,borderRadius:2}})}),Q.factors.length>0&&e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(Ge=Q.factors[0])==null?void 0:Ge.name,": ",(vt=Q.factors[0])==null?void 0:vt.signal]})]},Q.name)})}),I.conflicts.length>0&&e.jsxs("details",{style:{padding:"8px 10px",background:"rgba(255,170,0,0.15)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:[e.jsxs("summary",{style:{cursor:"pointer",userSelect:"none",listStyle:"none"},children:[e.jsx("span",{style:{fontWeight:600},children:"Conflict: "}),I.conflicts[0].resolution,I.conflicts.length>1&&e.jsxs("span",{style:{marginLeft:8,opacity:.8},children:["(+",I.conflicts.length-1," more) "]})]}),I.conflicts.length>1&&e.jsx("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid rgba(255,170,0,0.3)"},children:I.conflicts.slice(1).map((Q,ue)=>e.jsxs("div",{style:{marginBottom:4,paddingLeft:8},children:[" ",Q.resolution]},ue))})]})]})]}),(()=>{var le,nt,Ht,ve;const Q=(je,Ae,Ee)=>Math.min(Math.max(je,Ae),Ee),ue=new Date,he=new Date(ue.toLocaleString("en-US",{timeZone:"America/New_York"})),ye=he.getHours(),ge=he.getMinutes(),vt=ye*100+ge<820,lt=je=>je>=75?{score:4,label:"EXTREMELY BULLISH",color:"#00ff88"}:je>=50?{score:3,label:"VERY BULLISH",color:"#88ff88"}:je>=25?{score:1,label:"CHECK ENTRY",color:"#ffaa00"}:{score:0,label:"WAIT",color:"#ff4466"},Ye=(r==null?void 0:r.day_high)||0,N=(r==null?void 0:r.day_low)||0,Xt=Ye-N,an=vt?v:(o==null?void 0:o.ib_open)||(r==null?void 0:r.day_open)||v,fn=Xt>0?Q((Ye-an)/Xt*100,0,100):50,at=lt(fn),Dt=at.label,pe=at.color;return`${at.score}`,e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3,background:"rgba(20,20,28,0.6)",borderRadius:12,padding:12,border:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${u.monthly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${u.monthly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"MONTHLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:u.monthly.color,padding:"5px 10px",background:`${u.monthly.color}20`,borderRadius:5,display:"inline-block"},children:u.monthly.bias}),u.monthly.factors&&u.monthly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:u.monthly.factors[0]})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${u.weekly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${u.weekly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"WEEKLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:u.weekly.color,padding:"5px 10px",background:`${u.weekly.color}20`,borderRadius:5,display:"inline-block"},children:u.weekly.bias}),u.weekly.factors&&u.weekly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:u.weekly.factors[0]})]}),e.jsxs("div",{onClick:()=>y(!w),style:{background:`linear-gradient(135deg, ${pe}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${w?pe:pe+"30"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:4,marginBottom:6},children:[e.jsx("span",{style:{fontSize:9,color:"#888",letterSpacing:1},children:"TPO DAILY"}),e.jsx("span",{style:{fontSize:9,color:"#666",transform:w?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:u.critical.tpoBias.color||pe,padding:"5px 10px",background:`${pe}20`,borderRadius:5,display:"inline-block"},children:u.critical.tpoBias.direction||"NEUTRAL"}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:"IB, PVA, Opening"})]})]})}),e.jsxs("div",{onClick:()=>G(!k),style:{flex:1,background:"linear-gradient(135deg, rgba(0,170,255,0.15) 0%, rgba(0,0,0,0.4) 100%)",borderRadius:12,padding:16,border:`1px solid ${k?"#00aaff":"rgba(0,170,255,0.3)"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8},children:[e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1},children:"INTRADAY"}),e.jsx("span",{style:{fontSize:12,color:"#666",transform:k?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",padding:"6px 14px",background:"rgba(0,170,255,0.2)",borderRadius:6,marginBottom:8},children:Dt}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:[fn.toFixed(0),"% from high"]})]})]}),(w||k)&&e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3},children:w&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(0,170,255,0.3)",padding:12},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:u.dayOpen.bias!=="NEUTRAL"?`1px solid ${u.dayOpen.color}40`:"none"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"DAY OPEN (18:00 ET)"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:d?14:16,fontWeight:700,color:u.dayOpen.color},children:u.dayOpen.position}),u.dayOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(le=u.dayOpen.price)==null?void 0:le.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:u.dayOpen.color},children:["(",u.dayOpen.diff>0?"+":"",(nt=u.dayOpen.diff)==null?void 0:nt.toFixed(1),"pts)"]})]})]}),u.dayOpen.bias&&u.dayOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:u.dayOpen.color,marginTop:4},children:u.dayOpen.bias==="BULLISH"?"Buying below open":"Selling above open"})]}),e.jsxs("div",{style:{background:u.weeklyOpen.position==="--"?"rgba(50,50,60,0.5)":"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:u.weeklyOpen.bias&&u.weeklyOpen.bias!=="NEUTRAL"?`1px solid ${u.weeklyOpen.color}40`:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"WEEKLY OPEN (Sun 18:00)"}),u.weeklyOpen.position==="--"?e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:d?13:14,fontWeight:600,color:"#666"},children:"N/A"}),e.jsx("div",{style:{fontSize:9,color:"#555",marginTop:4},children:"Not tracked yet - sets on Sunday 18:00 ET"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:d?14:16,fontWeight:700,color:u.weeklyOpen.color},children:u.weeklyOpen.position}),u.weeklyOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(Ht=u.weeklyOpen.price)==null?void 0:Ht.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:u.weeklyOpen.color},children:["(",u.weeklyOpen.diff>0?"+":"",(ve=u.weeklyOpen.diff)==null?void 0:ve.toFixed(1),"pts)"]})]})]}),u.weeklyOpen.bias&&u.weeklyOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:u.weeklyOpen.color,marginTop:4},children:u.weeklyOpen.bias==="BULLISH"?"Buying below weekly open":"Selling above weekly open"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:d?"1fr 1fr":"1fr 1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"INITIAL BALANCE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[e.jsx("span",{style:{fontSize:d?14:16,fontWeight:700,color:u.daily.ib.color},children:u.daily.ib.level}),u.daily.ib.pct!=="--"&&e.jsxs("span",{style:{fontSize:11,color:"#666"},children:[u.daily.ib.pct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"LOCATION wrt PVA"}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:d?14:16,fontWeight:700,color:u.daily.pvaLocation.color},children:u.daily.pvaLocation.status}),u.daily.pvaLocation.detail&&e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:2},children:u.daily.pvaLocation.detail})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",gridColumn:d?"1 / -1":"auto"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"OPENING TYPE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[e.jsx("span",{style:{fontSize:d?14:16,fontWeight:700,color:u.daily.opening.color},children:u.daily.opening.type}),u.daily.opening.full&&e.jsx("span",{style:{fontSize:10,color:"#666"},children:u.daily.opening.full})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"AB OVERLAP"}),e.jsx("div",{style:{fontSize:d?14:16,fontWeight:700,color:u.critical.abOverlap.color},children:u.critical.abOverlap.pct!=="--"?`${u.critical.abOverlap.pct}%`:"--"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TAIL/EXCESS"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:u.critical.buyingTail?"#00ff8830":"rgba(255,255,255,0.05)",color:u.critical.buyingTail?"#00ff88":"#555"},children:"BUY"}),e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:u.critical.sellingTail?"#ff446630":"rgba(255,255,255,0.05)",color:u.critical.sellingTail?"#ff4466":"#555"},children:"SELL"})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO BIAS"}),e.jsx("div",{style:{fontSize:d?14:16,fontWeight:700,color:u.critical.tpoBias.color},children:u.critical.tpoBias.direction})]})]})]})}),e.jsx("div",{style:{flex:1},children:k&&(()=>{const je=new Date,Ae=new Date(je.toLocaleString("en-US",{timeZone:"America/New_York"})),Ee=Ae.getHours(),He=Ae.getMinutes(),De=Ee*100+He,Bt=820,pt=930,yt=De<Bt,gt=De>=Bt&&De<pt,Ln=De>=pt,tn=(r==null?void 0:r.current_price)||(t==null?void 0:t.current_price)||0,mn=(r==null?void 0:r.day_high)||tn,On=(r==null?void 0:r.day_low)||tn;r!=null&&r.day_open;const bn=mn-On,_n=(o==null?void 0:o.ib_high)||0,Dn=(o==null?void 0:o.ib_low)||0,or=(o==null?void 0:o.ib_range)||_n-Dn||0,oi=(o==null?void 0:o.ib_complete)||Ln,Br=(o==null?void 0:o.vwap)||(r==null?void 0:r.vwap)||0,hr=Br>0?tn-Br:0,An=hr>=0,Er=(o==null?void 0:o.rth_vwap)||(r==null?void 0:r.rth_vwap)||0,Y=Er>0?tn-Er:0,Re=Y>=0,Ce=tn>mn;let Ie=50;bn>0&&(Ie=(mn-tn)/bn*100);const et=mn-tn,Ke=tn-On,Je=bn>0,_t=tn>_n;let jt=0,Ne=0;const rt=oi&&or>0&&_n>0&&Dn>0;rt&&tn>0&&(jt=_n-tn,Ne=tn-Dn);const Rn=(Ft=>Ft<=20?{label:"V.BULLISH",color:"#00ff88"}:Ft<=40?{label:"BULLISH",color:"#88ff88"}:Ft>=80?{label:"V.BEARISH",color:"#ff4466"}:Ft>=60?{label:"BEARISH",color:"#ff8888"}:{label:"NEUTRAL",color:"#ffaa00"})(Ie),Qe=Ae.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(245,158,11,0.08) 100%)",borderRadius:10,border:`1px solid ${pe}`,padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#fff",letterSpacing:1},children:"DAY BIAS ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:9,color:"#888",fontFamily:"monospace"},children:[Qe," ET"]}),e.jsx("span",{style:{fontSize:8,padding:"3px 8px",borderRadius:4,background:yt?"rgba(255,170,0,0.2)":gt?"rgba(0,170,255,0.2)":"rgba(0,255,136,0.2)",color:yt?"#ffaa00":gt?"#00aaff":"#00ff88",fontWeight:600},children:yt?"OVERNIGHT":gt?"IB FORMING":"RTH"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(59,130,246,0.2)"},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#3B82F6",marginBottom:8},children:["A. O/N  8:20 ",yt&&e.jsx("span",{style:{color:"#ffaa00",fontWeight:400},children:"(building)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"DAY RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#3B82F6"},children:bn>0?bn.toFixed(0):"--"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"% FROM HIGH"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:Ce?"#00ff88":Rn.color},children:Je?Ce?"ABOVE":`${Math.max(0,Ie).toFixed(0)}%`:"--"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"VWAP"}),Br>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:An?"#ff4466":"#00ff88"},children:[An?"+":"-",Math.abs(hr).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:An?"#ff4466":"#00ff88"},children:An?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:et>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:et>=0?"#00ff88":"#00aaff"},children:[et>=0?"+":"",et.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:Ke>=0?"DOWNSIDE":"EXT LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:Ke>=0?"#ff4466":"#00aaff"},children:[Ke>=0?"-":"+",Math.abs(Ke).toFixed(0)]})]})]})]}),e.jsxs("div",{style:{background:Ln?"rgba(245,158,11,0.1)":"rgba(255,255,255,0.03)",borderRadius:8,padding:12,border:`1px solid ${Ln?"rgba(245,158,11,0.2)":"rgba(255,255,255,0.08)"}`},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:Ln?"#F59E0B":"#666",marginBottom:8},children:["B. IB  9:30 ",yt&&e.jsx("span",{style:{color:"#666",fontWeight:400},children:"(waiting)"}),gt&&e.jsx("span",{style:{color:"#00aaff",fontWeight:400},children:"(forming)"})]}),Ln&&rt?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#F59E0B"},children:or.toFixed(0)})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"FROM IB HIGH"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:_t?"#00ff88":"#ff4466"},children:[_t?"+":"",(tn-_n).toFixed(0)," pts"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"RTH VWAP"}),Er>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:Re?"#ff4466":"#00ff88"},children:[Re?"+":"-",Math.abs(Y).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:Re?"#ff4466":"#00ff88"},children:Re?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:jt>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:jt>=0?"#00ff88":"#00aaff"},children:[jt>=0?"+":"",jt.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:Ne>=0?"EXT LOW":"DOWNSIDE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:Ne>=0?"#ff4466":"#00aaff"},children:[Ne>=0?"-":"+",Math.abs(Ne).toFixed(0)]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:100,color:"#555"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,opacity:.5},children:yt?"":""}),e.jsx("div",{style:{fontSize:11},children:yt?"Starts 8:20 ET":`IB: ${or.toFixed(0)} pts`})]})]})]})]})})()})]}),e.jsxs("div",{style:{marginBottom:12,marginTop:12,background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>M(!h),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:`linear-gradient(135deg, ${O}15 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:h?"1px solid rgba(255,255,255,0.08)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:11,fontWeight:600,color:O,letterSpacing:"0.1em"},children:"NON-DISCRETIONARY ANALYSIS"}),!h&&e.jsx("span",{style:{fontSize:10,color:"#666",fontStyle:"italic"},children:"(Detailed reasoning for bias)"})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:h?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),h&&e.jsx("div",{style:{padding:"14px 16px",background:`linear-gradient(135deg, ${O}08 0%, transparent 50%)`},children:e.jsx("div",{style:{fontSize:d?12:13,color:"#bbb",lineHeight:1.85},children:(()=>{var He,De,Bt;const je=[];if(u.monthly.bias!=="NEUTRAL"||u.weekly.bias!=="NEUTRAL"){if(u.weekly.bias!=="NEUTRAL"){const pt=((He=u.weekly.factors)==null?void 0:He.length)>0?` (${u.weekly.factors.slice(0,2).join(", ")})`:"";je.push(`Weekly bias is <span style="color:${u.weekly.color};font-weight:600">${u.weekly.bias}</span>${pt} based on week range, weekly open, and prior day position.`)}if(u.monthly.bias!=="NEUTRAL"){const pt=((De=u.monthly.factors)==null?void 0:De.length)>0?` (${u.monthly.factors.slice(0,2).join(", ")})`:"";je.push(`Monthly bias is <span style="color:${u.monthly.color};font-weight:600">${u.monthly.bias}</span>${pt} based on rolling 20-day range analysis.`)}}if(u.dayOpen.price>0&&u.dayOpen.bias!=="NEUTRAL"&&(u.dayOpen.bias==="BULLISH"?je.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(u.dayOpen.diff).toFixed(1)}pts BELOW</span> Day Open ($${u.dayOpen.price.toFixed(2)}) - buying below the open adds bullish confidence.`):je.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(u.dayOpen.diff).toFixed(1)}pts ABOVE</span> Day Open ($${u.dayOpen.price.toFixed(2)}) - selling above the open adds bearish confidence.`)),u.weeklyOpen.price>0&&u.weeklyOpen.bias!=="NEUTRAL"&&(u.weeklyOpen.bias==="BULLISH"?je.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(u.weeklyOpen.diff).toFixed(1)}pts BELOW</span> Weekly Open ($${u.weeklyOpen.price.toFixed(2)}) - buying below weekly open is a key bullish signal.`):je.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(u.weeklyOpen.diff).toFixed(1)}pts ABOVE</span> Weekly Open ($${u.weeklyOpen.price.toFixed(2)}) - selling above weekly open is a key bearish signal.`)),u.daily.ib.level!=="--"&&u.daily.ib.level!=="FORMING"){const pt={LOW:`Initial Balance is <span style="color:#00ff88;font-weight:600">LOW</span> (${u.daily.ib.pct}% of ADR) - expect range extension and directional move.`,MEDIUM:`Initial Balance is <span style="color:#ffaa00;font-weight:600">MEDIUM</span> (${u.daily.ib.pct}% of ADR) - balanced day possible, watch for breakout.`,HIGH:`Initial Balance is <span style="color:#ff4466;font-weight:600">HIGH</span> (${u.daily.ib.pct}% of ADR) - range may be set, rotational day likely.`};je.push(pt[u.daily.ib.level]||"")}if(u.daily.pvaLocation.status!=="--"){const pt={IN:`Price is <span style="color:#00aaff;font-weight:600">INSIDE</span> prior value area (${u.daily.pvaLocation.detail}) - value acceptance, mean reversion favored.`,OUT:(Bt=u.daily.pvaLocation.detail)!=null&&Bt.includes("Above")?`Price is <span style="color:#00ff88;font-weight:600">ABOVE</span> prior value area (${u.daily.pvaLocation.detail}) - bullish continuation if accepted.`:`Price is <span style="color:#ff4466;font-weight:600">BELOW</span> prior value area (${u.daily.pvaLocation.detail}) - bearish continuation if accepted.`,DYNAMIC:'Price is at <span style="color:#ffaa00;font-weight:600">DYNAMIC</span> boundary of prior value area - key decision point, watch for acceptance or rejection.'};je.push(pt[u.daily.pvaLocation.status]||"")}if(u.daily.opening.type!=="--"&&u.daily.opening.type!=="DEV"){const pt={OD:'Opening type is <span style="color:#00ff88;font-weight:600">Open Drive</span> - strong conviction, trend day likely, fade at your own risk.',OTD:'Opening type is <span style="color:#88ff88;font-weight:600">Open Test Drive</span> - tested and confirmed direction, follow the trend.',ORR:'Opening type is <span style="color:#ff8888;font-weight:600">Open Rejection Reverse</span> - initial move failed, expect reversal to dominate.',OA:'Opening type is <span style="color:#ffaa00;font-weight:600">Open Auction</span> - balanced open, wait for value to establish before trading.'};je.push(pt[u.daily.opening.type]||"")}if(u.critical.abOverlap.pct!=="--"){const pt=parseFloat(u.critical.abOverlap.pct);pt<33?je.push(`AB overlap is <span style="color:#00ff88;font-weight:600">${pt}%</span> (trending) - A and B periods show directional conviction, continuation expected.`):pt<=50?je.push(`AB overlap is <span style="color:#ffaa00;font-weight:600">${pt}%</span> (mixed) - some directional bias but not strong, be selective.`):je.push(`AB overlap is <span style="color:#ff4466;font-weight:600">${pt}%</span> (rotational) - high overlap suggests balance, range-bound trading likely.`)}if((u.critical.buyingTail||u.critical.sellingTail)&&(u.critical.buyingTail&&je.push('<span style="color:#00ff88;font-weight:600">Buying tail/excess</span> detected at lows - aggressive buyers defending, support is strong.'),u.critical.sellingTail&&je.push('<span style="color:#ff4466;font-weight:600">Selling tail/excess</span> detected at highs - aggressive sellers defending, resistance is strong.')),u.critical.tpoBias.direction!=="--"){const pt={BULLISH:'TPO distribution is <span style="color:#00ff88;font-weight:600">BULLISH</span> - POC is above value area midpoint, buyers in control.',BEARISH:'TPO distribution is <span style="color:#ff4466;font-weight:600">BEARISH</span> - POC is below value area midpoint, sellers in control.',NEUTRAL:'TPO distribution is <span style="color:#ffaa00;font-weight:600">NEUTRAL</span> - balanced profile, no clear directional bias from structure.'};je.push(pt[u.critical.tpoBias.direction]||"")}const Ae=P.includes("BULLISH")?'<strong style="color:#00ff88">Conclusion:</strong> Multiple factors align bullish. Look for long entries at support zones with proper risk management.':P.includes("BEARISH")?'<strong style="color:#ff4466">Conclusion:</strong> Multiple factors align bearish. Exercise caution on longs, consider short setups at resistance.':'<strong style="color:#ffaa00">Conclusion:</strong> Mixed signals present. Wait for clearer structure or trade both sides at extremes.';je.push(Ae);const Ee=je.map((pt,yt)=>{const gt=yt===je.length-1,Ln=gt?O:"rgba(255,255,255,0.1)",tn=gt?`${O}10`:"transparent";return`<div style="margin-bottom: ${gt?"0":"12px"}; margin-top: ${gt?"16px":"0"}; padding: ${gt?"10px 10px 10px 10px":"2px 0 2px 10px"}; border-left: 2px solid ${Ln}; background: ${tn}; border-radius: ${gt?"6px":"0"};">${pt}</div>`}).join("");return e.jsx("span",{dangerouslySetInnerHTML:{__html:Ee}})})()})})]})]})})()]})})(),((ae=t.buy_zones)==null?void 0:ae.length)>0?t.buy_zones.map((v,u)=>e.jsx(m,{zone:v,rank:u+1},v.id)):((q=t.all_zones)==null?void 0:q.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(100,100,100,0.1)",borderRadius:8,padding:12,marginBottom:16,border:"1px dashed rgba(255,255,255,0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:12,color:"#888"},children:" Waiting for price to approach support zones"}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Nearest zones shown below (greyed out until actionable)"})]}),[...t.all_zones].sort((v,u)=>Math.abs(v.distance)-Math.abs(u.distance)).slice(0,3).map((v,u)=>e.jsx("div",{style:{opacity:.5,filter:"grayscale(50%)"},children:e.jsx(m,{zone:v,rank:u+1,isWaiting:!0})},v.id))]}):e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,padding:d?24:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:d?36:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:d?14:16,marginBottom:8},children:"No zones available"}),e.jsx("div",{style:{fontSize:12},children:"Waiting for zone data to load..."})]})]}),(!b||d)&&e.jsx("div",{onClick:()=>!d&&C(!0),style:{flex:d?"none":1,minHeight:d?300:0,height:d?400:"auto",cursor:d?"default":"pointer"},title:d?"":"Click to minimize",children:e.jsx(R,{zones:t.all_zones,buyZones:t.buy_zones,currentPrice:t.current_price})})]})},Og=({selectedContract:t})=>{var je,Ae,Ee,He,De,Bt,pt,yt,gt,Ln,tn,mn,On,bn,_n,Dn,or,oi,Br,hr,An,Er,Y,Re,Ce,Ie,et,Ke,Je,_t,jt,Ne,rt,it,Rn,Qe,Ft,Hn,nn,Vt,Mt,rn,ln,xn,qn,er,gr,dt;const[n,r]=L.useState(null),[i,o]=L.useState(!1),[s,l]=L.useState("1week"),[a,c]=L.useState(!1),[p,w]=L.useState(null),[y,h]=L.useState(!1),[M,k]=L.useState(!1),[G,Me]=L.useState(!1),[x,b]=L.useState(null),[C,d]=L.useState(null),[A,m]=L.useState(0),[R,$]=L.useState(!1),[ae,q]=L.useState("compact"),[v,u]=L.useState(!1),[I,_e]=L.useState(!1),[E,oe]=L.useState({show:!1,x:0,y:0,price:0,dayIdx:-1,day:null}),Xe=Ar.useRef(!1),de=Ar.useRef(!1),Be=Ar.useRef(null),S=Ar.useRef(null),{isMobile:P,isTablet:O}=Ri(),ke=f=>{Xe.current=!1,de.current=!1,setTimeout(()=>{if(Be.current){Be.current.scrollLeft=Be.current.scrollWidth-Be.current.clientWidth;const B=(Be.current.scrollHeight-Be.current.clientHeight)/2;Be.current.scrollTop=B}if(S.current){S.current.scrollLeft=S.current.scrollWidth-S.current.clientWidth;const B=(S.current.scrollHeight-S.current.clientHeight)/2;S.current.scrollTop=B}const F=document.getElementById("price-scale-1w"),g=document.getElementById("price-scale-4w");F&&Be.current&&(F.scrollTop=Be.current.scrollTop),g&&S.current&&(g.scrollTop=S.current.scrollTop)},300)},Fe=Ar.useRef(!1);L.useEffect(()=>{n!=null&&n.current_price&&!Fe.current&&(ke(n.current_price),Fe.current=!0)},[n==null?void 0:n.current_price]),L.useEffect(()=>{Fe.current=!1},[t]);const qe=f=>f.length===1?f.charCodeAt(0)-65:26+(f.charCodeAt(0)-65)*26+(f.charCodeAt(1)-65),Le=31,bt=44,Oe=f=>{if(!f)return{};const F={};for(const[g,B]of Object.entries(f)){const X=B.filter(ne=>{const j=qe(ne);return j>=Le&&j<=bt});X.length>0&&(F[g]=X)}return F},Q=f=>{if(!f||Object.keys(f).length===0)return 0;let F=0,g=0;for(const[B,X]of Object.entries(f))X.length>F&&(F=X.length,g=parseFloat(B));return g},ue=(f,F,g=.1)=>{var be,J;if(!f||Object.keys(f).length===0)return{vah:0,val:0};const B=Object.keys(f).map(re=>parseFloat(re)).sort((re,te)=>te-re),X=Object.values(f).reduce((re,te)=>re+te.length,0),ne=Math.ceil(X*.7);let j=new Set,U=0;const K=F.toFixed(1);f[K]&&(j.add(F),U+=f[K].length);let ee=B.indexOf(F)-1,ie=B.indexOf(F)+1;for(;U<ne&&(ee>=0||ie<B.length);){const re=ee>=0?B[ee]:null,te=ie<B.length?B[ie]:null,ze=re&&((be=f[re.toFixed(1)])==null?void 0:be.length)||0,Z=te&&((J=f[te.toFixed(1)])==null?void 0:J.length)||0;if(ze>=Z&&re!==null)j.add(re),U+=ze,ee--;else if(te!==null)j.add(te),U+=Z,ie++;else break}const se=Array.from(j);return{vah:Math.max(...se),val:Math.min(...se)}},he=(f,F=!1)=>{if(!f||f.length===0)return null;const g=f.slice(0,20),B=2,X={};let ne=[],j=[];g.forEach((ie,se)=>{const be=se<26?String.fromCharCode(65+se):"A"+String.fromCharCode(65+se-26),J=F&&ie.ib_high||ie.high,re=F&&ie.ib_low||ie.low;if(J&&re){ne.push(J),j.push(re);for(let te=Math.floor(re/B)*B;te<=J;te+=B){const ze=te.toFixed(1);X[ze]||(X[ze]=[]),X[ze].push(be)}}});const U=Q(X),{vah:K,val:ee}=ue(X,U,B);return{profiles:X,poc:U,vah:K,val:ee,high:Math.max(...ne),low:Math.min(...j),period_count:g.length,current_letter:g.length>0?g.length<26?String.fromCharCode(65+g.length-1):"T":"A",ib_high:null,ib_low:null,is_composite:!0,days_included:g.length}};L.useEffect(()=>{r(null),o(!1);const f=async()=>{await new Promise(B=>setTimeout(B,3e3));const g=async()=>{try{const B=await fetch(`${Kt}/market-profile`);if(B.ok){const X=await B.json(),ne=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),j=X.poc||0,U=j>5e4;ne===U||j===0?(r(X),o(!0)):console.log(`Waiting for backend to switch - got POC ${j} but expected ${ne?"BTC":"non-BTC"}`)}}catch{o(!1)}};return g(),setInterval(g,1e3)};let F;return f().then(g=>{F=g}),()=>{F&&clearInterval(F)}},[t]);const ye=10,ge=f=>`tpo_historic_cache_${f||"GC"}`;L.useEffect(()=>{w(null),(async()=>{var ne,j,U;const F=ge(t);try{const K=localStorage.getItem(F);if(K){const ee=JSON.parse(K),ie=new Date().toISOString().split("T")[0],se=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),be=((j=(ne=ee.data)==null?void 0:ne.profiles)==null?void 0:j.length)>0;if(ee.version===ye&&ee.date===ie&&ee.data&&(be||se)){w(ee.data);return}else!be&&!se&&(localStorage.removeItem(F),console.log("Cleared stale cache with empty profiles"))}}catch{console.warn("Invalid cache, fetching fresh data")}await new Promise(K=>setTimeout(K,12e3)),h(!0);let g=3,B=null;for(;g>0;)try{B=await(await fetch(`${Kt}/historic-tpo?days=40`)).json();const ee=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(B.source==="spot_no_history"&&!ee){console.log(`Historic TPO: Backend still on spot, retrying in 5s... (${g} left)`),g--,await new Promise(se=>setTimeout(se,5e3));continue}break}catch(K){console.error("Failed to fetch historic TPO:",K),g--,await new Promise(ee=>setTimeout(ee,3e3))}if(!B){h(!1);return}const X=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(((U=B.profiles)==null?void 0:U.length)>0||X){const K={version:ye,date:new Date().toISOString().split("T")[0],contract:t,data:B};try{localStorage.setItem(F,JSON.stringify(K))}catch(ee){console.warn("Failed to cache historic data:",ee)}}w(B),h(!1)})()},[t]);const Ge=s==="1week"||s==="1week_rth",lt=Ge||(s==="4week"||s==="4week_rth");if((!i||!n)&&!(lt&&((je=p==null?void 0:p.profiles)==null?void 0:je.length)>0))return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#8b8b8b"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:18,marginBottom:8},children:"Connecting to Market Profile..."}),e.jsx("div",{style:{fontSize:13},children:"Waiting for TPO data from backend"})]});const N=(()=>{var F;if(!n&&!lt||lt)return null;if(s==="day")return{profiles:n.profiles,poc:n.poc,vah:n.vah,val:n.val,single_prints:n.single_prints||[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:n.period_count,current_letter:n.current_letter,open_price:n.open_price,high:n.high||Math.max(...Object.keys(n.profiles||{}).map(g=>parseFloat(g))),low:n.low||Math.min(...Object.keys(n.profiles||{}).map(g=>parseFloat(g))),volume:n.volume};if(s==="rth"){const g=Oe(n.profiles),B=Q(g),{vah:X,val:ne}=ue(g,B),j=Object.keys(g).map(U=>parseFloat(U));return{profiles:g,poc:B,vah:X,val:ne,single_prints:[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:Object.values(g).flat().filter((U,K,ee)=>ee.indexOf(U)===K).length,current_letter:n.current_letter,open_price:n.rth_open||n.open_price,high:j.length>0?Math.max(...j):0,low:j.length>0?Math.min(...j):0,volume:n.volume}}if(s==="4week")return he(p==null?void 0:p.profiles,!1);if(s==="4week_rth")return he(p==null?void 0:p.profiles,!0);const f=(F=n.sessions)==null?void 0:F[s];return f?{profiles:f.profiles,poc:f.poc,vah:f.vah,val:f.val,single_prints:f.single_prints||[],ib_high:f.ib_high,ib_low:f.ib_low,period_count:f.period_count,current_letter:f.current_letter,high:f.high,low:f.low,volume:f.volume}:null})(),Xt=(n==null?void 0:n.tick_size)||.1,fn=A===0?(f=>{if(!f||Object.keys(f).length===0)return 1;const F=Object.keys(f).map(U=>parseFloat(U)),g=Math.min(...F),j=(Math.max(...F)-g)/45;return j<=.1?.1:j<=.5?.5:j<=1?1:j<=2?2:j<=5?5:j<=10?10:Math.ceil(j/10)*10})(N==null?void 0:N.profiles):A,at=(f,F)=>{if(!f||F<=Xt)return Object.entries(f).map(([B,X])=>({price:parseFloat(B),letters:X})).sort((B,X)=>X.price-B.price);const g={};return Object.entries(f).forEach(([B,X])=>{const ne=parseFloat(B),j=Math.floor(ne/F)*F;g[j]||(g[j]=new Set),X.forEach(U=>g[j].add(U))}),Object.entries(g).map(([B,X])=>({price:parseFloat(B),letters:Array.from(X)})).sort((B,X)=>X.price-B.price)},Dt=N!=null&&N.profiles?at(N.profiles,fn):[],pe=Dt.map(f=>f.price);Math.min(...pe),Math.max(...pe);const le={developing:"#8b8b8b",normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},nt={developing:"#8b8b8b",OA:"#888888",ORR:"#ffaa00",OTD:"#00ff88",OD:"#00aaff"},Ht={developing:"",D:"D",P:"P",b:"b",B:"B"},ve=n||{};return e.jsxs("div",{style:{display:P?"flex":"grid",flexDirection:P?"column":void 0,gridTemplateColumns:P?void 0:O||R?"1fr":"280px 1fr 300px",gap:P?12:20,height:P?"auto":"100%",padding:P?12:0,overflow:P?"auto":"hidden"},children:[!R&&e.jsxs("div",{style:{display:"flex",flexDirection:P?"row":"column",gap:P?8:16,overflowX:P?"auto":void 0,flexWrap:P?"nowrap":void 0},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"TPO Ranges"}),e.jsxs("div",{style:{display:"flex",marginBottom:12,background:"rgba(20,20,30,0.8)",borderRadius:8,padding:3},children:[e.jsxs("button",{onClick:()=>{s.includes("_rth")&&l(s.replace("_rth","")),ke()},onMouseEnter:f=>{const F=f.currentTarget.querySelector(".tooltip");F&&(F.style.opacity="1")},onMouseLeave:f=>{const F=f.currentTarget.querySelector(".tooltip");F&&(F.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"transparent":"linear-gradient(135deg, rgba(0,170,255,0.3) 0%, rgba(0,221,255,0.2) 100%)",border:s.includes("_rth")?"1px solid transparent":"1px solid rgba(0,221,255,0.5)",borderRadius:6,color:s.includes("_rth")?"#666":"#00ddff",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["ETH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,221,255,0.3)",borderRadius:6,color:"#00ddff",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"18:00 - 17:00 ET"})]}),e.jsxs("button",{onClick:()=>{s.includes("_rth")||l(s+"_rth"),ke()},onMouseEnter:f=>{const F=f.currentTarget.querySelector(".tooltip");F&&(F.style.opacity="1")},onMouseLeave:f=>{const F=f.currentTarget.querySelector(".tooltip");F&&(F.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"linear-gradient(135deg, rgba(0,255,136,0.3) 0%, rgba(0,200,100,0.2) 100%)":"transparent",border:s.includes("_rth")?"1px solid rgba(0,255,136,0.5)":"1px solid transparent",borderRadius:6,color:s.includes("_rth")?"#00ff88":"#666",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["RTH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:6,color:"#00ff88",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"09:30 - 16:15 ET"})]})]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{onClick:()=>{const f=s.includes("_rth");l(f?"1week_rth":"1week"),ke()},style:{flex:1,padding:"12px 8px",background:s==="1week"||s==="1week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="1week"||s==="1week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="1week"||s==="1week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"1 Week"}),e.jsx("button",{onClick:()=>{const f=s.includes("_rth");l(f?"4week_rth":"4week"),ke()},style:{flex:1,padding:"12px 8px",background:s==="4week"||s==="4week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="4week"||s==="4week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="4week"||s==="4week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"4 Week"})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Key Levels"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#ffaa00",fontWeight:600,fontSize:12},children:"POC"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Ae=N==null?void 0:N.poc)==null?void 0:Ae.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAH"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Ee=N==null?void 0:N.vah)==null?void 0:Ee.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((He=N==null?void 0:N.val)==null?void 0:He.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB High"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((De=N==null?void 0:N.ib_high)==null?void 0:De.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB Low"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Bt=N==null?void 0:N.ib_low)==null?void 0:Bt.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466",fontWeight:600,fontSize:12},children:"Single Prints"}),e.jsx("span",{style:{color:"#ff4466",fontFamily:"monospace",fontSize:12},children:((pt=N==null?void 0:N.single_prints)==null?void 0:pt.length)||0})]})]}),(n==null?void 0:n.confluence)&&e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px",marginTop:8},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Confluence Score"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",background:n.confluence.total_score>=8?"rgba(0,255,136,0.15)":n.confluence.total_score>=5?"rgba(0,170,255,0.15)":n.confluence.total_score>=2?"rgba(255,170,0,0.15)":n.confluence.total_score>=-1?"rgba(139,139,139,0.15)":"rgba(255,68,102,0.15)",borderRadius:6,marginBottom:8,border:`1px solid ${n.confluence.total_score>=8?"rgba(0,255,136,0.3)":n.confluence.total_score>=5?"rgba(0,170,255,0.3)":n.confluence.total_score>=2?"rgba(255,170,0,0.3)":n.confluence.total_score>=-1?"rgba(139,139,139,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.confluence.total_score>=8?"#00ff88":n.confluence.total_score>=5?"#00aaff":n.confluence.total_score>=2?"#ffaa00":n.confluence.total_score>=-1?"#8b8b8b":"#ff4466",fontFamily:"monospace"},children:[n.confluence.total_score>0?"+":"",n.confluence.total_score]}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:n.confluence.confidence})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.confluence.trade_direction==="LONG"?"#00ff88":n.confluence.trade_direction==="SHORT"?"#ff4466":"#8b8b8b"},children:n.confluence.trade_direction==="LONG"?" LONG":n.confluence.trade_direction==="SHORT"?" SHORT":n.confluence.trade_direction}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:["Size: ",n.confluence.position_size_pct,"%"]})]})]}),e.jsx("div",{style:{padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:6,marginBottom:12,fontSize:12,color:(yt=n.confluence.action)!=null&&yt.includes("NO TRADE")||(gt=n.confluence.action)!=null&&gt.includes("SKIP")?"#ff4466":(Ln=n.confluence.action)!=null&&Ln.includes("ADD")?"#00ff88":"#fff"},children:n.confluence.action}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00ff88"},children:"R1 Macro"}),e.jsxs("span",{style:{color:n.confluence.rank1_score>0?"#00ff88":"#666"},children:[n.confluence.rank1_score>0?"+":"",n.confluence.rank1_score]})]}),((mn=(tn=n.confluence.factors)==null?void 0:tn.rank1_macro)==null?void 0:mn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#666"},children:n.confluence.factors.rank1_macro.map((f,F)=>e.jsx("div",{style:{padding:"2px 0"},children:f},F))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00aaff"},children:"R2 Volume"}),e.jsxs("span",{style:{color:n.confluence.rank2_score>0?"#00aaff":"#666"},children:[n.confluence.rank2_score>0?"+":"",n.confluence.rank2_score]})]}),((bn=(On=n.confluence.factors)==null?void 0:On.rank2_volume)==null?void 0:bn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#00aaff",opacity:.7},children:n.confluence.factors.rank2_volume.map((f,F)=>e.jsx("div",{style:{padding:"2px 0"},children:f},F))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ffaa00"},children:"R3 Structure"}),e.jsxs("span",{style:{color:n.confluence.rank3_score>0?"#ffaa00":"#666"},children:[n.confluence.rank3_score>0?"+":"",n.confluence.rank3_score]})]}),((Dn=(_n=n.confluence.factors)==null?void 0:_n.rank3_structure)==null?void 0:Dn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ffaa00",opacity:.7},children:n.confluence.factors.rank3_structure.map((f,F)=>e.jsx("div",{style:{padding:"2px 0"},children:f},F))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#9370DB"},children:"R4 Timing"}),e.jsxs("span",{style:{color:n.confluence.rank4_score>0?"#9370DB":"#666"},children:[n.confluence.rank4_score>0?"+":"",n.confluence.rank4_score]})]}),((oi=(or=n.confluence.factors)==null?void 0:or.rank4_timing)==null?void 0:oi.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#9370DB",opacity:.7},children:n.confluence.factors.rank4_timing.map((f,F)=>e.jsx("div",{style:{padding:"2px 0"},children:f},F))})]}),(n.confluence.conflict_penalty!==0||((hr=(Br=n.confluence.factors)==null?void 0:Br.conflicts)==null?void 0:hr.length)>0)&&e.jsxs("div",{style:{paddingBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466"},children:"Conflicts"}),e.jsx("span",{style:{color:"#ff4466"},children:n.confluence.conflict_penalty})]}),((Er=(An=n.confluence.factors)==null?void 0:An.conflicts)==null?void 0:Er.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ff4466",opacity:.7},children:n.confluence.factors.conflicts.map((f,F)=>e.jsx("div",{style:{padding:"2px 0"},children:f},F))})]})]}),((Re=(Y=n.confluence.factors)==null?void 0:Y.volume_override)==null?void 0:Re.length)>0&&e.jsx("div",{style:{marginTop:10,padding:"8px",background:"rgba(255,170,0,0.1)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:n.confluence.factors.volume_override[0]}),n.confluence.level_type&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:"#8b8b8b"},children:["At: ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:n.confluence.level_type}),n.confluence.at_key_level&&e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",marginLeft:6},children:n.confluence.at_key_level.toFixed(2)})]})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:20,overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{style:{fontSize:14,color:"#fff",fontWeight:600},children:["TPO Profile - ",s==="day"?"Full Day":(Ie=(Ce=n==null?void 0:n.sessions)==null?void 0:Ce[s])==null?void 0:Ie.display]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("button",{onClick:()=>u(!v),style:{padding:"4px 10px",background:v?"rgba(0,170,255,0.25)":"rgba(30,30,40,0.8)",border:v?"1px solid rgba(0,170,255,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:v?"#00aaff":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:v?"Zoomed":"Zoom"}),e.jsx("button",{onClick:()=>_e(!I),style:{padding:"4px 10px",background:I?"rgba(255,170,0,0.25)":"rgba(30,30,40,0.8)",border:I?"1px solid rgba(255,170,0,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:I?"#ffaa00":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:I?"IB Only":"Hide Non-IB"}),e.jsxs("span",{style:{fontSize:12,color:"#8b8b8b",whiteSpace:"nowrap"},children:["Period: ",e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(N==null?void 0:N.current_letter)||"A"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(30,30,40,0.8)",borderRadius:6,padding:"2px 4px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{fontSize:10,color:"#8b8b8b",paddingLeft:4},children:"View:"}),e.jsx("button",{onClick:()=>q("compact"),style:{padding:"4px 8px",background:ae==="compact"?"rgba(0,255,136,0.2)":"transparent",border:ae==="compact"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:ae==="compact"?"#00ff88":"#888",fontSize:10,fontWeight:ae==="compact"?600:400,cursor:"pointer"},children:"Compact"}),e.jsx("button",{onClick:()=>q("expanded"),style:{padding:"4px 8px",background:ae==="expanded"?"rgba(0,255,136,0.2)":"transparent",border:ae==="expanded"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:ae==="expanded"?"#00ff88":"#888",fontSize:10,fontWeight:ae==="expanded"?600:400,cursor:"pointer"},children:"Expanded"})]}),e.jsx("button",{onClick:()=>$(!R),style:{padding:"4px 10px",background:R?"rgba(0,170,255,0.2)":"rgba(30,30,40,0.8)",border:R?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:R?"#00aaff":"#888",fontSize:11,cursor:"pointer",display:"flex",alignItems:"center",gap:4},title:R?"Collapse TPO chart":"Expand TPO chart",children:R?"":" "})]})]}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:10,position:"relative"},children:lt&&(!p||y)?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16,animation:"pulse 1.5s ease-in-out infinite"},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8,color:"#9370DB"},children:"Loading Historic Data..."}),e.jsxs("div",{style:{fontSize:12},children:["Fetching ",Ge?"1-week":"4-week"," TPO profiles"]})]}):lt&&((et=p==null?void 0:p.profiles)==null?void 0:et.length)===0?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8},children:"No Historic Data Available"}),e.jsx("div",{style:{fontSize:12},children:"Try refreshing or check backend connection"})]}):(s==="1week"||s==="1week_rth")&&((Ke=p==null?void 0:p.profiles)==null?void 0:Ke.length)>0?(()=>{var f,F,g,B,X,ne,j,U,K,ee,ie;try{const se=s==="1week_rth",be=p.profiles[0],re=((be==null?void 0:be.high)||5e3)>1e4,te=re?v?25:50:v?2:4,ze=re?v?.1:1:v?.05:.3,Z=Math.max(2,Math.round(te/ze)),T=14,z=11,H=45,W=20,Pe=se?[{key:"us_rth",name:"US RTH",color:"#00ff88",start:31,end:44,time:"09:30-16:15",hasIB:!0,ibStart:31,ibEnd:33},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}]:[{key:"asia",name:"Asia",color:"#00ddff",start:0,end:17,time:"18:00-03:00"},{key:"london",name:"London",color:"#ffaa00",start:18,end:28,time:"03:00-08:20"},{key:"us",name:"US",color:"#00ff88",start:28,end:41,time:"08:20-15:00",hasIB:!0,ibStart:28,ibEnd:30},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}],Ze=V=>V.length===1?V.charCodeAt(0)-65:26+(V.charCodeAt(0)-65)*26+(V.charCodeAt(1)-65),Se=V=>{if(V.open_type&&V.open_type!=="developing")return V.open_type;const me=V.ib_high,ft=V.ib_low,Et=V.open,Zt=V.close||V.high;if(!me||!ft||ft>=999999||!Et)return"OA";const Ut=me-ft;if(Ut<=0)return"OA";const on=(me+ft)/2,kn=(Et-ft)/Ut*100;return kn<=20&&Zt>on||kn>=80&&Zt<on?"OD":Et>on&&V.low<ft&&Zt>me||Et<on&&V.high>me&&Zt<ft?"OTD":V.high>me&&Zt<on||V.low<ft&&Zt>on?"ORR":"OA"},tt=p.profiles.slice(0,5).filter(V=>V.tpo_profiles).reverse(),We=V=>V<26?String.fromCharCode(65+V):String.fromCharCode(65+Math.floor(V/26)-1)+String.fromCharCode(65+V%26),ot=[];tt.forEach(V=>{Pe.forEach(me=>{var Lt,Cn,Wt,un,Wn,sn;const ft=V.tpo_profiles||{},Et=V.price_volumes||{},Zt=V.delta_by_price||{},Ut={},on={},kn={};let Ot=0,dn=0,vn=0,zt=999999,$e=null,It=null,D=0,Ve=999999;Object.entries(ft).forEach(([ut,Yt])=>{const At=parseFloat(ut);Yt.filter($n=>{const Qt=Ze($n);return Qt>=me.start&&Qt<=me.end}).length>0&&(At>D&&(D=At),At<Ve&&(Ve=At))});const xe=re?100:5,St=D+xe,xt=Ve-xe;Object.entries(Et).forEach(([ut,Yt])=>{const At=parseFloat(ut);if(At>=xt&&At<=St){on[At]=(on[At]||0)+Yt;const qt=Zt[ut]||Zt[At.toFixed(1)]||0;kn[At]=(kn[At]||0)+qt}}),Object.entries(ft).forEach(([ut,Yt])=>{const At=parseFloat(ut),qt=Math.floor(At/te)*te,$n=Yt.filter(Qt=>{const xr=Ze(Qt);return xr>=me.start&&xr<=me.end});$n.length>0&&(Ut[qt]||(Ut[qt]=new Set),$n.forEach(Qt=>{const yr=Ze(Qt)-me.start,si=We(yr);Ut[qt].add(si),yr>dn&&(dn=yr)}),At>vn&&(vn=At),At<zt&&(zt=At)),me.hasIB&&Yt.filter(xr=>{const yr=Ze(xr);return yr>=me.ibStart&&yr<=me.ibEnd}).length>0&&(($e===null||At>$e)&&($e=At),(It===null||At<It)&&(It=At))}),Object.values(Ut).forEach(ut=>{ut.size>Ot&&(Ot=ut.size)});let Ct=0;if(Object.values(on).forEach(ut=>{ut>Ct&&(Ct=ut)}),Object.keys(Ut).length>0){let ut=0,Yt=0,At=null;Object.entries(Ut).forEach(([ct,st])=>{st.size>Yt&&(Yt=st.size,ut=parseFloat(ct),At=ct)});const qt=Object.keys(Ut).map(ct=>parseFloat(ct)).sort((ct,st)=>st-ct),$n=Object.values(Ut).reduce((ct,st)=>ct+st.size,0);let Qt=0,xr=ut,yr=ut;const si=qt.indexOf(Math.floor(ut/te)*te);if(si>=0){Qt=((Lt=Ut[qt[si]])==null?void 0:Lt.size)||0;let ct=si,st=si;for(;Qt<$n*.7&&(ct>0||st<qt.length-1);){const Pt=ct>0&&((Cn=Ut[qt[ct-1]])==null?void 0:Cn.size)||0,ar=st<qt.length-1&&((Wt=Ut[qt[st+1]])==null?void 0:Wt.size)||0;if(Pt>=ar&&ct>0)ct--,Qt+=Pt;else if(st<qt.length-1)st++,Qt+=ar;else break}xr=qt[ct]||ut,yr=qt[st]||ut}let Gr=ut,wo=0;Object.entries(on).forEach(([ct,st])=>{st>wo&&(wo=st,Gr=parseFloat(ct))});let ko=Gr,Yr=Gr;const Vn=Object.entries(on).map(([ct,st])=>({price:parseFloat(ct),vol:st})).sort((ct,st)=>ct.price-st.price),li=Vn.reduce((ct,st)=>ct+st.vol,0)*.7;if(Vn.length>0){const ct=Vn.findIndex(Ro=>Math.abs(Ro.price-Gr)<ze);let st=((un=Vn[ct])==null?void 0:un.vol)||0,Pt=ct>=0?ct:0,ar=ct>=0?ct:0;for(;st<li&&(Pt<Vn.length-1||ar>0);){const Ro=Pt<Vn.length-1?Vn[Pt+1].vol:0,Al=ar>0?Vn[ar-1].vol:0;if(Ro>=Al&&Pt<Vn.length-1)Pt++,st+=Vn[Pt].vol;else if(ar>0)ar--,st+=Vn[ar].vol;else break}ko=((Wn=Vn[Pt])==null?void 0:Wn.price)||Gr,Yr=((sn=Vn[ar])==null?void 0:sn.price)||Gr}const Vi=Math.max(Ot*z+W+H+40,120),Ui=Math.max((dn+1)*z+W+H+40,160);let zi=null,Co=null,To=null,_o=null;const Tt=[],wt=We(dn),mt=[];if(Object.entries(Ut).forEach(([ct,st])=>{const Pt=parseFloat(ct);st.has("A")&&Tt.push({price:Pt,key:ct}),st.has(wt)&&mt.push({price:Pt,key:ct})}),Tt.length>0){const ct=(Math.max(...Tt.map(Pt=>Pt.price))+Math.min(...Tt.map(Pt=>Pt.price)))/2;let st=Tt[0];Tt.forEach(Pt=>{Math.abs(Pt.price-ct)<Math.abs(st.price-ct)&&(st=Pt)}),zi=st.price,To=st.key}if(mt.length>0){const ct=(Math.max(...mt.map(Pt=>Pt.price))+Math.min(...mt.map(Pt=>Pt.price)))/2;let st=mt[0];mt.forEach(Pt=>{Math.abs(Pt.price-ct)<Math.abs(st.price-ct)&&(st=Pt)}),Co=st.price,_o=st.key}let cn="D";if(vn>zt&&ut>0){const ct=vn-zt,st=(ut-zt)/ct,Pt=zt+ct*.67,ar=zt+ct*.33;st>.6?cn="P":st<.4?cn="b":cn="D"}let lr=null;const Xn=[],Xr=[];if(Object.entries(Ut).forEach(([ct,st])=>{const Pt=parseFloat(ct);st.has("A")&&Xn.push(Pt),st.has("B")&&Xr.push(Pt)}),Xn.length>0&&Xr.length>0){const ct=Math.max(...Xn),st=Math.min(...Xn),Pt=Math.max(...Xr),ar=Math.min(...Xr),Ro=ct-st,Al=Pt-ar,Rf=Math.min(ct,Pt),zf=Math.max(st,ar),Zd=Math.max(0,Rf-zf),qd=Math.min(Ro,Al);qd>0?lr=Math.round(Zd/qd*100):Zd>0?lr=100:lr=0}ot.push({date:V.date,weekday:V.weekday,sessKey:me.key,sessName:me.name,sessTime:me.time,color:me.color,lettersByPrice:Ut,volumeByPrice:on,deltaByPrice:kn,maxVol:Ct,poc:ut,pocPriceKey:At,maxTPOCount:Yt,sessionVPOC:Gr,vah:xr,val:yr,volVAH:ko,volVAL:Yr,high:vn,low:zt,open:zi,close:Co,openPriceKey:To,closePriceKey:_o,ibHigh:$e,ibLow:It,hasIB:me.hasIB,maxLetters:Ot,maxPeriod:dn,sessStart:0,width:ae==="expanded"?Ui:Vi,day_type:V.day_type,open_type:Se(V),profile_shape:cn,abOverlap:lr})}})});const ht=I?ot.filter(V=>V.hasIB&&V.ibHigh&&V.ibLow):ot;if(ht.length===0)return e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:["No session data",I?" with IB":"","..."]});let kt=0,Rt=999999;ht.forEach(V=>{V.high>kt&&(kt=V.high),V.low<Rt&&(Rt=V.low)}),kt=Math.ceil(kt/te)*te+te*3,Rt=Math.floor(Rt/te)*te-te*3;const $t=[];for(let V=kt;V>=Rt;V-=te)$t.push(V);let Jt=0;const zn=ht.map(V=>{const me=Jt;return Jt+=V.width,me}),sr=Jt,In=(V,me)=>{if(!me)return;const ft=me.getBoundingClientRect(),Et=me.scrollLeft,Zt=me.scrollTop,Ut=V.clientX-ft.left,on=Ut+Et,kn=V.clientY-ft.top,Ot=kn-36+Zt;let dn=ht.length-1;for(let $e=0;$e<ht.length;$e++)if(on<zn[$e]+ht[$e].width){dn=$e;break}const vn=Math.floor(Ot/T),zt=$t[vn]||0;oe({show:!0,x:Ut,y:kn,clientX:V.clientX,clientY:V.clientY,chartLeft:ft.left,chartTop:ft.top,chartRight:ft.right,chartBottom:ft.bottom,scrollLeft:Et,scrollTop:Zt,price:zt,dayIdx:dn,day:ht[dn]})};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[E.show&&E.day&&e.jsxs("div",{style:{position:"absolute",left:E.x+65,top:Math.max(10,E.y-140),background:"rgba(20,20,35,0.95)",border:`1px solid ${E.day.color||"rgba(147,112,219,0.5)"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:E.day.color||"#ba68c8",fontWeight:700,marginBottom:4},children:[E.day.sessName," - ",E.day.weekday," ",(f=E.day.date)==null?void 0:f.slice(5)]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:E.day.sessTime||"--"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((F=E.price)==null?void 0:F.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof E.day.poc=="number"?E.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof E.day.vah=="number"?E.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof E.day.val=="number"?E.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof E.day.ibHigh=="number"?E.day.ibHigh.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof E.day.ibLow=="number"?E.day.ibLow.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof E.day.ibHigh=="number"&&typeof E.day.ibLow=="number"&&E.day.high>E.day.low?((E.day.ibHigh-E.day.ibLow)/(E.day.high-E.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof E.day.volVAH=="number"?E.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof E.day.volVAL=="number"?E.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:le[(g=E.day)==null?void 0:g.day_type]||"#888",fontWeight:600},children:((X=(B=E.day)==null?void 0:B.day_type)==null?void 0:X.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((j=(ne=E.day)==null?void 0:ne.open_type)==null?void 0:j.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((K=(U=E.day)==null?void 0:U.profile_shape)==null?void 0:K.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:((ee=E.day)==null?void 0:ee.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((ie=E.day)==null?void 0:ie.abOverlap)=="number"?E.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflow:"hidden",height:"calc(100% - 36px)"},id:"price-scale-1w",children:$t.map((V,me)=>{const ft=V%10===0,Et=V%50===0;return e.jsx("div",{style:{height:T,fontSize:Et?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:Et?"rgba(147,112,219,0.9)":ft?"#666":"transparent",fontWeight:Et?600:400,borderBottom:Et?"1px solid rgba(147,112,219,0.1)":"none"},children:ft?V.toFixed(0):""},V)})})]}),e.jsxs("div",{className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:E.show?"none":"crosshair"},onScroll:V=>{const me=document.getElementById("price-scale-1w"),ft=document.getElementById("time-scale-1w");me&&(me.scrollTop=V.target.scrollTop),ft&&(ft.scrollLeft=V.target.scrollLeft)},onMouseMove:V=>In(V,V.currentTarget),onMouseLeave:()=>oe({...E,show:!1}),ref:V=>{Be.current=V,V&&!Xe.current&&sr>V.clientWidth&&(V.scrollLeft=sr-V.clientWidth,Xe.current=!0)},children:[E.show&&E.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:E.chartLeft-58,right:window.innerWidth-E.chartRight,height:1,top:E.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:E.clientX,top:E.chartTop,height:E.chartBottom-E.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:10,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:ht.map((V,me)=>{var ft;return e.jsxs("div",{style:{width:V.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:V.sessKey==="asia"||se&&V.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:E.dayIdx===me?`${V.color}15`:"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:V.color,fontWeight:700},children:V.sessName}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[V.weekday," ",(ft=V.date)==null?void 0:ft.slice(5)]})]},`${V.date}-${V.sessKey}`)})}),e.jsxs("div",{style:{position:"relative",minHeight:"calc(100% - 36px)"},children:[ht.map((V,me)=>e.jsx("div",{style:{position:"absolute",left:zn[me]+V.width-1,top:0,bottom:0,minHeight:$t.length*T,width:1,background:"rgba(147,112,219,0.06)",pointerEvents:"none",zIndex:1}},`col-line-${me}`)),ht.map((V,me)=>V.sessKey==="asia"||se&&V.sessKey==="us_rth"?e.jsx("div",{style:{position:"absolute",left:zn[me],top:0,bottom:0,minHeight:$t.length*T,width:2,background:"rgba(255,255,255,0.1)",pointerEvents:"none",zIndex:1}},`day-line-${me}`):null),$t.map(V=>e.jsx("div",{style:{display:"flex",height:T,background:E.price===V?"rgba(186,104,200,0.04)":"transparent"},children:ht.map((me,ft)=>{const Et=me.lettersByPrice[V]?[...me.lettersByPrice[V]].sort():[],Zt=me.vah&&me.val&&V<=me.vah&&V>=me.val,Ut=me.hasIB&&me.ibHigh&&Math.abs(V-me.ibHigh)<te,on=me.hasIB&&me.ibLow&&Math.abs(V-me.ibLow)<te,kn=me.openPriceKey&&V.toString()===me.openPriceKey,Ot=me.maxPeriod>=0?me.maxPeriod<26?String.fromCharCode(65+me.maxPeriod):"A"+String.fromCharCode(65+me.maxPeriod-26):null,dn=me.closePriceKey&&V.toString()===me.closePriceKey,zt=me.close&&me.open&&me.close>=me.open?"#00ff88":"#ff4466",$e=me.pocPriceKey&&V.toString()===me.pocPriceKey;return e.jsx("div",{style:{width:me.width,flexShrink:0,height:T,display:"flex",alignItems:"center",borderRight:"none",borderLeft:me.sessKey==="asia"||se&&me.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",position:"relative",paddingLeft:21,paddingRight:H+W+19,background:Ut||on?"rgba(255,255,255,0.05)":"transparent"},children:ae==="expanded"?e.jsx("div",{style:{position:"relative",width:Math.max((me.maxPeriod-me.sessStart+1)*z,50),height:T-2,overflow:"visible"},children:Et.map((It,D)=>{const Ve=Ze(It)-me.sessStart;if(Ve<0)return null;const xe=It==="A"&&kn,St=It===Ot&&dn&&!xe,xt=$e?"#000":xe?"#fff":St?"#000":Zt?zt:"#888",Ct=$e?"#ffffff":xe?"rgba(100,100,100,0.6)":St?zt:Zt?`${zt}30`:"rgba(136,136,136,0.25)",Lt=$e||xe?"1px solid #fff":St?`1px solid ${zt}`:Zt?`1px solid ${zt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:Ve*z,width:It.length>1?z+4:z-1,height:T-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:It.length>1?7:9,fontWeight:700,color:xt,background:Ct,borderRadius:2,border:Lt},children:It},`${It}-${D}`)})}):Et.map((It,D)=>{const Ve=It==="A"&&kn,xe=It===Ot&&dn&&!Ve,St=$e?"#000":Ve?"#fff":xe?"#000":Zt?zt:"#888",xt=$e?"#ffffff":Ve?"rgba(100,100,100,0.6)":xe?zt:Zt?`${zt}30`:"rgba(136,136,136,0.25)",Ct=$e||Ve?"1px solid #fff":xe?`1px solid ${zt}`:Zt?`1px solid ${zt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{minWidth:It.length>1?z+4:z,height:T-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:It.length>1?8:10,fontWeight:700,color:St,background:xt,borderRadius:2,marginRight:1,border:Ct,padding:It.length>1?"0 2px":0},children:It},`${It}-${D}`)})},`${me.date}-${me.sessKey}-${V}`)})},V)),ht.map((V,me)=>{const ft=zn[me],Et=$t.length*T,Zt=(V.high+V.low)/2,Ut=Ot=>{const dn=Math.floor(Ot/te)*te,vn=(kt-dn)/te,zt=1-(Ot-dn)/te;return(vn+zt)*T},on=Object.entries(V.volumeByPrice||{}).map(([Ot,dn])=>{var $e,It;const vn=parseFloat(Ot),zt=(($e=V.deltaByPrice)==null?void 0:$e[Ot])??((It=V.deltaByPrice)==null?void 0:It[vn]);return{price:vn,vol:dn,delta:zt}}).filter(Ot=>Ot.vol>0).sort((Ot,dn)=>dn.price-Ot.price),kn=Math.max(...on.map(Ot=>Ot.vol),1);return e.jsx("div",{style:{position:"absolute",left:ft+V.width-H-15,top:0,width:H,height:Et,overflow:"hidden"},children:on.map((Ot,dn)=>{const vn=Ut(Ot.price),zt=1,$e=V.sessionVPOC&&Math.abs(Ot.price-V.sessionVPOC)<1,It=V.volVAH&&Math.abs(Ot.price-V.volVAH)<1,D=V.volVAL&&Math.abs(Ot.price-V.volVAL)<1,xe=Ot.delta!==void 0&&Ot.delta!==null&&Ot.delta!==0?Ot.delta>0:Ot.price>Zt;return e.jsx("div",{style:{position:"absolute",top:vn,left:4,width:`${Math.min(Ot.vol/kn*95,95)}%`,height:zt,background:$e?"#ff9900":It?"#00ff88":D?"#ff4466":xe?"#00dd77":"#cc3366",opacity:.9}},dn)})},`vp-sess-${me}`)}),ht.map((V,me)=>{const ft=Zt=>{const Ut=Math.floor(Zt/te)*te,on=(kt-Ut)/te,kn=1-(Zt-Ut)/te;return(on+kn)*T},Et=zn[me];return e.jsxs(Ar.Fragment,{children:[V.hasIB&&V.ibHigh&&V.ibLow&&e.jsx("div",{style:{position:"absolute",left:Et+7,top:ft(V.ibHigh)+T/2,width:2,height:ft(V.ibLow)-ft(V.ibHigh),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),V.vah&&e.jsx("div",{style:{position:"absolute",left:Et+V.width-12,top:ft(V.vah)+T/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),V.val&&e.jsx("div",{style:{position:"absolute",left:Et+V.width-12,top:ft(V.val)+T/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${V.date}-${V.sessKey}`)})]})]})]}),e.jsxs("div",{style:{display:"flex",flexShrink:0,background:"rgba(18,18,30,0.98)",borderTop:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{width:58,flexShrink:0,borderRight:"1px solid rgba(147,112,219,0.25)"}}),e.jsx("div",{id:"time-scale-1w",style:{display:"flex",flex:1,overflow:"hidden"},children:ht.map((V,me)=>e.jsx("div",{style:{width:V.width,flexShrink:0,textAlign:"center",padding:"2px 0",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:V.sessKey==="asia"||se&&V.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:E.dayIdx===me?`${V.color}15`:"transparent"},children:e.jsx("div",{style:{fontSize:9,color:"#666"},children:V.sessTime})},`time-${V.date}-${V.sessKey}`))})]})]})}catch(se){return console.error("1-Week chart error:",se),e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#ff4466"},children:["Error rendering 1-Week chart: ",se.message]})}})():(s==="4week"||s==="4week_rth")&&((Je=p==null?void 0:p.profiles)==null?void 0:Je.length)>0?(()=>{var ot,ht,kt,Rt,$t,Jt,zn,sr,In,V,me,ft,Et,Zt,Ut,on,kn,Ot,dn,vn,zt,$e,It;const f=s==="4week_rth",F=31,g=45,B=D=>D.length===1?D.charCodeAt(0)-65:26+(D.charCodeAt(0)-65)*26+(D.charCodeAt(1)-65),X=D=>f?D.filter(Ve=>{const xe=B(Ve);return xe>=F&&xe<=g}):D,ne=new Date().toISOString().split("T")[0],U=p.profiles.slice(0,20).filter(D=>D.tpo_profiles).map(D=>{let Ve=D;if(D.date===ne&&n&&(Ve={...D,poc:n.poc||D.poc,vah:n.vah||D.vah,val:n.val||D.val,ib_high:n.ib_high||D.ib_high,ib_low:n.ib_low||D.ib_low,high:Math.max(n.high||0,D.high||0),low:Math.min(n.low||999999,D.low||999999),tpo_profiles:n.profiles||D.tpo_profiles,day_type:n.day_type||D.day_type,open_type:n.open_type||D.open_type,profile_shape:n.profile_shape||D.profile_shape}),f&&Ve.tpo_profiles){const xe={};Object.entries(Ve.tpo_profiles).forEach(([xt,Ct])=>{const Lt=X(Ct);Lt.length>0&&(xe[xt]=Lt)}),Ve={...Ve,tpo_profiles:xe};const St=Object.keys(xe).map(xt=>parseFloat(xt));St.length>0&&(Ve.high=Math.max(...St),Ve.low=Math.min(...St))}return Ve}).reverse(),K=U.map(D=>D.high||0).filter(D=>D>0);U.map(D=>D.low||999999).filter(D=>D<999999);const ie=Math.max(...K)>1e4,se=ie?v?50:100:v?2:4,be=ie?v?.1:1:v?.05:.3,J=Math.max(2,Math.round(se/be)),re=14,te=12,ze=50,Z=16,T=D=>{const Ve=new Set;return D.forEach(xe=>{let St;xe.length===1?St=xe.charCodeAt(0)-65:St=26+(xe.charCodeAt(0)-65)*26+(xe.charCodeAt(1)-65);const xt=Math.floor(St/2);xt<26?Ve.add(String.fromCharCode(65+xt)):Ve.add(String.fromCharCode(65+Math.floor((xt-26)/26))+String.fromCharCode(65+(xt-26)%26))}),[...Ve].sort()},z=D=>{if(D.open_type&&D.open_type!=="developing")return D.open_type;const Ve=D.ib_high,xe=D.ib_low,St=D.open,xt=D.close||D.high;if(!Ve||!xe||xe>=999999||!St)return"OA";const Ct=Ve-xe;if(Ct<=0)return"OA";const Lt=(Ve+xe)/2,Cn=(St-xe)/Ct*100;return Cn<=20&&xt>Lt||Cn>=80&&xt<Lt?"OD":St>Lt&&D.low<xe&&xt>Ve||St<Lt&&D.high>Ve&&xt<xe?"OTD":D.high>Ve&&xt<Lt||D.low<xe&&xt>Lt?"ORR":"OA"},H=U.map(D=>{var Co,To,_o;const Ve=D.tpo_profiles||{};let xe=0,St=0;const xt={},Ct={},Lt={},Cn={},Wt=D.price_volumes&&Object.keys(D.price_volumes).length>0,un=D.delta_by_price||{};Object.entries(Ve).forEach(([Tt,wt])=>{const mt=parseFloat(Tt),cn=Math.floor(mt/se)*se;if(xt[cn]||(xt[cn]=new Set),T(wt).forEach(Xn=>{xt[cn].add(Xn);const Xr=B(Xn);Xr>St&&(St=Xr)}),!Wt){const Xn=Math.floor(mt/be)*be;Ct[Xn]=(Ct[Xn]||0)+wt.length,Lt[cn]=(Lt[cn]||0)+wt.length}}),Wt&&Object.entries(D.price_volumes).forEach(([Tt,wt])=>{const mt=parseFloat(Tt),cn=Math.floor(mt/be)*be,lr=Math.floor(mt/se)*se;Ct[cn]=(Ct[cn]||0)+wt,Lt[lr]=(Lt[lr]||0)+wt;const Xn=un[Tt]||un[mt.toFixed(1)]||0;Cn[cn]=(Cn[cn]||0)+Xn});let Wn=0,sn=0,ut=null;Object.entries(xt).forEach(([Tt,wt])=>{wt.size>sn&&(sn=wt.size,Wn=parseFloat(Tt),ut=Tt),wt.size>xe&&(xe=wt.size)});let Yt=D.poc||Wn,At=0;Object.entries(Ct).forEach(([Tt,wt])=>{wt>At&&(At=wt,Yt=parseFloat(Tt))});let qt=Yt,$n=Yt;const Qt=Object.entries(Ct).map(([Tt,wt])=>({price:parseFloat(Tt),vol:wt})).sort((Tt,wt)=>Tt.price-wt.price),yr=Qt.reduce((Tt,wt)=>Tt+wt.vol,0)*.7;if(Qt.length>0){const Tt=Qt.findIndex(lr=>Math.abs(lr.price-Yt)<be);let wt=((Co=Qt[Tt])==null?void 0:Co.vol)||0,mt=Tt,cn=Tt;for(;wt<yr&&(mt<Qt.length-1||cn>0);){const lr=mt<Qt.length-1?Qt[mt+1].vol:0,Xn=cn>0?Qt[cn-1].vol:0;if(lr>=Xn&&mt<Qt.length-1)mt++,wt+=Qt[mt].vol;else if(cn>0)cn--,wt+=Qt[cn].vol;else break}qt=((To=Qt[mt])==null?void 0:To.price)||Yt,$n=((_o=Qt[cn])==null?void 0:_o.price)||Yt}const si=Math.max(xe*te+Z+ze+45,130),Gr=Math.max((St+1)*te+Z+ze+45,180);let wo=null,ko=null;const Yr=[],Vn=St,Qd=Vn<26?String.fromCharCode(65+Vn):"A"+String.fromCharCode(65+Vn-26),li=[];if(Object.entries(xt).forEach(([Tt,wt])=>{const mt=parseFloat(Tt);wt.has("A")&&Yr.push({price:mt,key:Tt}),wt.has(Qd)&&li.push({price:mt,key:Tt})}),Yr.length>0){const Tt=(Math.max(...Yr.map(mt=>mt.price))+Math.min(...Yr.map(mt=>mt.price)))/2;let wt=Yr[0];Yr.forEach(mt=>{Math.abs(mt.price-Tt)<Math.abs(wt.price-Tt)&&(wt=mt)}),wo=wt.key}if(li.length>0){const Tt=(Math.max(...li.map(mt=>mt.price))+Math.min(...li.map(mt=>mt.price)))/2;let wt=li[0];li.forEach(mt=>{Math.abs(mt.price-Tt)<Math.abs(wt.price-Tt)&&(wt=mt)}),ko=wt.key}let Vi=null;const Ui=[],zi=[];if(Object.entries(xt).forEach(([Tt,wt])=>{const mt=parseFloat(Tt);wt.has("A")&&Ui.push(mt),wt.has("B")&&zi.push(mt)}),Ui.length>0&&zi.length>0){const Tt=Math.max(...Ui),wt=Math.min(...Ui),mt=Math.max(...zi),cn=Math.min(...zi),lr=Tt-wt,Xn=mt-cn,Xr=Math.min(Tt,mt),ct=Math.max(wt,cn),st=Math.max(0,Xr-ct),Pt=Math.min(lr,Xn);Pt>0?Vi=Math.round(st/Pt*100):st>0?Vi=100:Vi=0}return{...D,lettersByPrice:xt,volumeByPrice:Ct,volumeByPriceCoarse:Lt,deltaByPrice:Cn,maxVol:At,dayVPOC:Yt,tpoPOC:Wn,pocPriceKey:ut,openPriceKey:wo,closePriceKey:ko,abOverlap:Vi,volVAH:qt,volVAL:$n,maxLetters:Math.max(xe,1),maxPeriod:St,width:ae==="expanded"?Gr:si,open_type:z(D)}});let W=0,fe=999999;U.forEach(D=>{D.high>W&&(W=D.high),D.low<fe&&(fe=D.low)}),W=Math.ceil(W/se)*se+se*3,fe=Math.floor(fe/se)*se-se*3;const ce=[];for(let D=W;D>=fe;D-=se)ce.push(D);let Pe=0;const Ze=H.map(D=>{const Ve=Pe;return Pe+=D.width,Ve}),Se=Pe;let tt=0;const We=(D,Ve)=>{if(!Ve)return;const xe=Ve.getBoundingClientRect();tt=Ve.scrollLeft;const St=Ve.scrollTop,xt=D.clientX-xe.left,Ct=xt+tt,Lt=D.clientY-xe.top,Cn=Lt-36+St;let Wt=H.length-1;for(let sn=0;sn<H.length;sn++)if(Ct<Ze[sn]+H[sn].width){Wt=sn;break}const un=Math.floor(Cn/re),Wn=ce[un]||0;oe({show:!0,x:xt,y:Lt,clientX:D.clientX,clientY:D.clientY,chartLeft:xe.left,chartTop:xe.top,chartRight:xe.right,chartBottom:xe.bottom,scrollLeft:tt,scrollTop:St,price:Wn,dayIdx:Wt,day:H[Wt]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[E.show&&E.day&&e.jsxs("div",{style:{position:"absolute",left:E.x+65,top:Math.max(10,E.y-140),background:"rgba(20,20,35,0.95)",border:"1px solid rgba(147,112,219,0.5)",borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:"#ba68c8",fontWeight:700,marginBottom:4},children:[(ot=E.day)==null?void 0:ot.weekday," ",(ht=E.day)==null?void 0:ht.date]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:f?"09:30 - 16:15 ET":"18:00 - 17:00 ET"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((kt=E.price)==null?void 0:kt.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof((Rt=E.day)==null?void 0:Rt.poc)=="number"?E.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof(($t=E.day)==null?void 0:$t.vah)=="number"?E.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((Jt=E.day)==null?void 0:Jt.val)=="number"?E.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((zn=E.day)==null?void 0:zn.ib_high)=="number"?E.day.ib_high.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((sr=E.day)==null?void 0:sr.ib_low)=="number"?E.day.ib_low.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof((In=E.day)==null?void 0:In.ib_high)=="number"&&typeof((V=E.day)==null?void 0:V.ib_low)=="number"&&((me=E.day)==null?void 0:me.high)>((ft=E.day)==null?void 0:ft.low)?((E.day.ib_high-E.day.ib_low)/(E.day.high-E.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((Et=E.day)==null?void 0:Et.volVAH)=="number"?E.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((Zt=E.day)==null?void 0:Zt.volVAL)=="number"?E.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:le[(Ut=E.day)==null?void 0:Ut.day_type]||"#888",fontWeight:600},children:((kn=(on=E.day)==null?void 0:on.day_type)==null?void 0:kn.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((dn=(Ot=E.day)==null?void 0:Ot.open_type)==null?void 0:dn.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((zt=(vn=E.day)==null?void 0:vn.profile_shape)==null?void 0:zt.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:(($e=E.day)==null?void 0:$e.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((It=E.day)==null?void 0:It.abOverlap)=="number"?E.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-4w",children:ce.map(D=>{const Ve=D%20===0,xe=D%100===0;return e.jsx("div",{style:{height:re,fontSize:xe?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:xe?"rgba(147,112,219,0.9)":Ve?"#666":"transparent",fontWeight:xe?600:400,borderBottom:xe?"1px solid rgba(147,112,219,0.1)":"none"},children:Ve?D.toFixed(0):""},D)})})]}),e.jsxs("div",{id:"tpo-chart-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:E.show?"none":"crosshair"},onScroll:D=>{const Ve=document.getElementById("price-scale-4w");Ve&&(Ve.scrollTop=D.target.scrollTop)},onMouseMove:D=>We(D,D.currentTarget),onMouseLeave:()=>oe({...E,show:!1}),ref:D=>{S.current=D,D&&!de.current&&Se>D.clientWidth&&(D.scrollLeft=Se-D.clientWidth,de.current=!0)},children:[E.show&&E.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:E.chartLeft+50,right:window.innerWidth-E.chartRight,height:1,top:E.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:E.clientX,top:E.chartTop,height:E.chartBottom-E.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:H.map((D,Ve)=>e.jsxs("div",{style:{width:D.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.2)",background:E.dayIdx===Ve?"rgba(186,104,200,0.2)":"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:"#ba68c8",fontWeight:700},children:D.weekday}),e.jsx("div",{style:{fontSize:8,color:"#666"},children:D.date.slice(5)})]},D.date))}),e.jsxs("div",{style:{position:"relative"},children:[ce.map((D,Ve)=>e.jsx("div",{style:{display:"flex",height:re,borderBottom:D%20===0?"1px solid rgba(147,112,219,0.12)":"none",background:E.price===D?"rgba(186,104,200,0.06)":"transparent"},children:H.map((xe,St)=>{const xt=xe.lettersByPrice[D]?[...xe.lettersByPrice[D]].sort():[],Ct=xe.vah&&xe.val&&D<=xe.vah&&D>=xe.val;(xe.high+xe.low)/2;const Lt=xe.openPriceKey&&D.toString()===xe.openPriceKey,Cn=xe.maxPeriod>=0?xe.maxPeriod<26?String.fromCharCode(65+xe.maxPeriod):"A"+String.fromCharCode(65+xe.maxPeriod-26):null,Wt=xe.closePriceKey&&D.toString()===xe.closePriceKey,un=xe.pocPriceKey&&D.toString()===xe.pocPriceKey,sn=xe.close&&xe.open&&xe.close>=xe.open?"#00ff88":"#ff4466";for(let ut=0;ut<J;ut++){const Yt=D-ut*be;xe.volumeByPrice[Yt],xe.dayVPOC&&Math.abs(Yt-xe.dayVPOC)<be,xe.volVAH&&Math.abs(Yt-xe.volVAH)<be,xe.volVAL&&Math.abs(Yt-xe.volVAL)<be}return e.jsx("div",{style:{width:xe.width,flexShrink:0,height:re,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.15)",position:"relative",paddingLeft:14,paddingRight:ze+Z+14},children:ae==="expanded"?e.jsx("div",{style:{position:"relative",width:(xe.maxPeriod+1)*te,height:re-2},children:xt.map((ut,Yt)=>{const At=ut.length===1?ut.charCodeAt(0)-65:26+(ut.charCodeAt(0)-65)*26+(ut.charCodeAt(1)-65),qt=ut==="A"&&Lt,$n=ut===Cn&&Wt&&!qt,Qt=un?"#000":qt?"#fff":$n?"#000":Ct?sn:"#888",xr=un?"#ffffff":qt?"rgba(100,100,100,0.6)":$n?sn:Ct?`${sn}30`:"rgba(136,136,136,0.25)",yr=un||qt?"1px solid #fff":$n?`1px solid ${sn}`:Ct?`1px solid ${sn}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:At*te,width:te-1,height:re-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Qt,background:xr,borderRadius:2,border:yr},children:ut},Yt)})}):xt.map((ut,Yt)=>{const At=ut==="A"&&Lt,qt=ut===Cn&&Wt&&!At,$n=un?"#000":At?"#fff":qt?"#000":Ct?sn:"#888",Qt=un?"#ffffff":At?"rgba(100,100,100,0.6)":qt?sn:Ct?`${sn}30`:"rgba(136,136,136,0.25)",xr=un||At?"1px solid #fff":qt?`1px solid ${sn}`:Ct?`1px solid ${sn}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{width:te,height:re-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:700,color:$n,background:Qt,borderRadius:2,marginRight:1,border:xr},children:ut},Yt)})},`${xe.date}-${D}`)})},D)),H.map((D,Ve)=>{const xe=Ze[Ve],St=ce.length*re,xt=(D.high+D.low)/2,Ct=Wt=>{const un=Math.floor(Wt/se)*se,Wn=(W-un)/se,sn=1-(Wt-un)/se;return(Wn+sn)*re},Lt=Object.entries(D.volumeByPrice||{}).map(([Wt,un])=>{var ut,Yt;const Wn=parseFloat(Wt),sn=((ut=D.deltaByPrice)==null?void 0:ut[Wt])??((Yt=D.deltaByPrice)==null?void 0:Yt[Wn]);return{price:Wn,vol:un,delta:sn}}).filter(Wt=>Wt.vol>0).sort((Wt,un)=>un.price-Wt.price),Cn=Math.max(...Lt.map(Wt=>Wt.vol),1);return e.jsxs(Ar.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:xe+D.width-ze-10,top:0,width:ze,height:St,borderLeft:"1px solid rgba(147,112,219,0.25)",overflow:"hidden"},children:Lt.map((Wt,un)=>{const Wn=Ct(Wt.price),sn=1,ut=D.dayVPOC&&Math.abs(Wt.price-D.dayVPOC)<1,Yt=D.volVAH&&Math.abs(Wt.price-D.volVAH)<1,At=D.volVAL&&Math.abs(Wt.price-D.volVAL)<1,$n=Wt.delta!==void 0&&Wt.delta!==null&&Wt.delta!==0?Wt.delta>0:Wt.price>xt;return e.jsx("div",{style:{position:"absolute",top:Wn,left:4,width:`${Math.min(Wt.vol/Cn*95,95)}%`,height:sn,background:ut?"#ff9900":Yt?"#00ff88":At?"#ff4466":$n?"#00dd77":"#cc3366",opacity:.85}},un)})}),e.jsx("div",{style:{position:"absolute",left:xe+D.width-8,top:Ct(D.close||D.low)-5,fontSize:8,color:"#666",fontWeight:500,pointerEvents:"none",zIndex:5},children:"4pm"})]},`vp-${Ve}`)}),H.map((D,Ve)=>{const xe=xt=>{const Ct=Math.floor(xt/se)*se,Lt=(W-Ct)/se,Cn=1-(xt-Ct)/se;return(Lt+Cn)*re},St=Ze[Ve];return(D.high+D.low)/2,e.jsxs(Ar.Fragment,{children:[D.ib_high&&D.ib_low&&e.jsx("div",{style:{position:"absolute",left:St+7,top:xe(D.ib_high),width:2,height:xe(D.ib_low)-xe(D.ib_high),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),D.volVAH&&e.jsx("div",{style:{position:"absolute",left:St+D.width-8,top:xe(D.volVAH)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),D.volVAL&&e.jsx("div",{style:{position:"absolute",left:St+D.width-8,top:xe(D.volVAL)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${D.date}`)})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Range ",e.jsx("span",{style:{color:"#9370DB",fontWeight:600},children:(W-fe).toFixed(0)})]}),e.jsxs("span",{style:{color:"#666"},children:["Days ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:U.length})]}),e.jsx("span",{style:{color:"#fff",background:"#fff",padding:"0 4px",borderRadius:2},children:e.jsx("span",{style:{color:"#000"},children:"POC"})}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" IB"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():s==="session_view"&&(n!=null&&n.sessions)?(()=>{var ze,Z,T,z,H,W,fe,ce,Pe,Ze;const f=Object.entries((n==null?void 0:n.sessions)||{}).filter(([Se,tt])=>tt.profiles&&Object.keys(tt.profiles).length>0);if(f.length===0)return e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No session data yet..."});const F=.5,g=14,B=11,X=45,ne=16,j=11,U=Se=>Se.length===1?Se.charCodeAt(0)-65:26+(Se.charCodeAt(0)-65)*26+(Se.charCodeAt(1)-65),K=f.map(([Se,tt])=>{const We=tt.profiles||{};let ot=0,ht=0;const kt={},Rt={};Object.entries(We).forEach(([In,V])=>{const me=Math.floor(parseFloat(In)/F)*F;kt[me]||(kt[me]=new Set),V.forEach(ft=>{kt[me].add(ft);const Et=U(ft);Et>ht&&(ht=Et)}),Rt[me]=(Rt[me]||0)+V.length}),Object.values(kt).forEach(In=>{In.size>ot&&(ot=In.size)});let $t=tt.poc,Jt=0;Object.entries(Rt).forEach(([In,V])=>{V>Jt&&(Jt=V,$t=parseFloat(In))});const zn=Math.max(ot*B+ne+X+16,120),sr=Math.max((ht+1)*j+ne+X+16,150);return{key:Se,...tt,lettersByPrice:kt,volumeByPrice:Rt,maxVol:Jt,sessionVPOC:$t,maxLetters:Math.max(ot,1),maxPeriod:ht,width:ae==="expanded"?sr:zn}});let ee=0,ie=999999;f.forEach(([Se,tt])=>{tt.high>ee&&(ee=tt.high),tt.low<ie&&(ie=tt.low)}),ee=Math.ceil(ee/F)*F+F*5,ie=Math.floor(ie/F)*F-F*5;const se=[];for(let Se=ee;Se>=ie;Se-=F)se.push(Se);let be=0;const J=K.map(Se=>{const tt=be;return be+=Se.width,tt});let re=0;const te=(Se,tt)=>{if(!tt)return;const We=tt.getBoundingClientRect();re=tt.scrollLeft;const ot=tt.scrollTop,ht=Se.clientX-We.left,kt=ht+re,Rt=Se.clientY-We.top,$t=Rt-36+ot;let Jt=K.length-1;for(let In=0;In<K.length;In++)if(kt<J[In]+K[In].width){Jt=In;break}const zn=Math.floor($t/g),sr=se[zn]||0;oe({show:!0,x:ht,y:Rt,clientX:Se.clientX,clientY:Se.clientY,chartLeft:We.left,chartTop:We.top,chartRight:We.right,chartBottom:We.bottom,scrollLeft:re,scrollTop:ot,price:sr,dayIdx:Jt,day:K[Jt]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[E.show&&E.day&&e.jsxs("div",{style:{position:"absolute",left:Math.max(60,Math.min(E.x+60,500)),top:Math.max(50,Math.min(E.y,300)),background:"rgba(20,20,35,0.95)",border:`1px solid ${((ze=E.day)==null?void 0:ze.color)||"#9370DB"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",pointerEvents:"none"},children:[e.jsx("div",{style:{fontSize:12,color:((Z=E.day)==null?void 0:Z.color)||"#ba68c8",fontWeight:700,marginBottom:6},children:(T=E.day)==null?void 0:T.display}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:(z=E.price)==null?void 0:z.toFixed(1)}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:(W=(H=E.day)==null?void 0:H.poc)==null?void 0:W.toFixed(1)}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(ce=(fe=E.day)==null?void 0:fe.vah)==null?void 0:ce.toFixed(1)}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:(Ze=(Pe=E.day)==null?void 0:Pe.val)==null?void 0:Ze.toFixed(1)})]})]}),e.jsxs("div",{style:{width:50,flexShrink:0,background:"rgba(15,15,25,0.95)",borderRight:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{height:36,background:"rgba(147,112,219,0.08)",borderBottom:"1px solid rgba(147,112,219,0.2)"}}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-sess",children:se.map(Se=>e.jsx("div",{style:{height:g,fontSize:9,textAlign:"right",paddingRight:4,color:"#555",lineHeight:`${g}px`},children:Se%10===0?Se.toFixed(0):""},Se))})]}),e.jsxs("div",{id:"tpo-session-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:Se=>{const tt=document.getElementById("price-scale-sess");tt&&(tt.scrollTop=Se.target.scrollTop)},onMouseMove:Se=>te(Se,Se.currentTarget),onMouseLeave:()=>oe({...E,show:!1}),children:[E.show&&E.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:E.chartLeft+50,right:window.innerWidth-E.chartRight,height:1,top:E.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:E.clientX,top:E.chartTop,height:E.chartBottom-E.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:K.map((Se,tt)=>e.jsxs("div",{style:{width:Se.width,flexShrink:0,textAlign:"center",padding:"8px 4px",borderRight:"1px solid rgba(147,112,219,0.2)",background:E.dayIdx===tt?`${Se.color}20`:"transparent"},children:[e.jsx("div",{style:{fontSize:11,color:Se.color,fontWeight:700},children:Se.display}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[Se.period_count," periods"]})]},Se.key))}),e.jsxs("div",{style:{position:"relative"},children:[se.map((Se,tt)=>e.jsx("div",{style:{display:"flex",height:g,borderBottom:Se%10===0?"1px solid rgba(147,112,219,0.12)":"none",background:E.price===Se?"rgba(186,104,200,0.06)":"transparent"},children:K.map((We,ot)=>{var V;const ht=We.lettersByPrice[Se]?[...We.lettersByPrice[Se]].sort():[],kt=We.volumeByPrice[Se]||0,Rt=We.maxVol>0?kt/We.maxVol*100:0,$t=We.sessionVPOC&&Math.abs(Se-We.sessionVPOC)<F,Jt=We.vah&&We.val&&Se<=We.vah&&Se>=We.val,zn=((V=We.deltaByPrice)==null?void 0:V[Se])||0,In=We.deltaByPrice&&Object.keys(We.deltaByPrice).length>0?zn>=0:Se>(We.high+We.low)/2;return e.jsxs("div",{style:{width:We.width,flexShrink:0,height:g,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.1)",position:"relative",paddingLeft:14,paddingRight:X+ne+14},children:[ae==="expanded"?e.jsx("div",{style:{display:"flex",position:"relative",width:(We.maxPeriod+1)*j,height:g-2},children:ht.map((me,ft)=>{const Et=U(me);return e.jsx("span",{style:{position:"absolute",left:Et*j,width:j-1,height:g-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Jt?"#00ee88":We.color,background:`${We.color}30`,borderRadius:2,border:`1px solid ${We.color}50`},children:me},ft)})}):ht.map((me,ft)=>e.jsx("span",{style:{width:B,height:g-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Jt?"#00ee88":We.color,background:`${We.color}30`,borderRadius:2,marginRight:1,border:`1px solid ${We.color}50`},children:me},ft)),kt>0&&e.jsx("div",{style:{position:"absolute",right:12,width:X,height:g-2,display:"flex",alignItems:"center",paddingLeft:ne,borderLeft:"1px solid rgba(147,112,219,0.15)"},children:e.jsx("div",{style:{width:`${Rt}%`,height:1,marginBottom:1,opacity:.9,background:$t?"#ff9900":In?"#00ee88":"#ff2266",borderRadius:0}})})]},`${We.key}-${Se}`)})},Se)),K.map((Se,tt)=>{const We=Rt=>{const $t=Math.floor(Rt/F)*F,Jt=(ee-$t)/F,zn=1-(Rt-$t)/F;return(Jt+zn)*g},ot=J[tt],ht=(Se.high+Se.low)/2,kt=[];return Se.poc&&kt.push({price:Se.poc,color:"#ffcc00",label:"",type:"poc"}),kt.push({price:ht,color:"#00aaff",label:"",type:"mid"}),Se.vah&&kt.push({price:Se.vah,color:"#00ff88",label:"",type:"vah"}),Se.val&&kt.push({price:Se.val,color:"#ff4466",label:"",type:"val"}),kt.map(Rt=>e.jsx("div",{style:{position:"absolute",left:ot+1,top:We(Rt.price)-5,color:Rt.color,fontSize:Rt.type==="mid"?10:8,fontWeight:700,zIndex:10,textShadow:"0 0 3px rgba(0,0,0,0.8)",pointerEvents:"none"},children:Rt.label},`${Se.key}-${Rt.type}`))})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Sessions ",e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:K.length})]}),e.jsx("span",{style:{color:"#ffcc00"},children:" POC"}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():Dt.length===0?e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No TPO data yet. Waiting for trades..."}):e.jsxs(e.Fragment,{children:[(()=>{const f=Math.max(...Dt.map(K=>K.letters.length),1),F=Math.max(...Dt.flatMap(K=>K.letters.map(ee=>qe(ee))),0),g=11,B=fn||(n==null?void 0:n.tick_size)||.1,X=(N==null?void 0:N.open_price)||(n==null?void 0:n.open_price),ne=Math.max(...Dt.map(K=>K.price)),j=Math.min(...Dt.map(K=>K.price)),U=(ne+j)/2;return Dt.map(({price:K,letters:ee})=>{const ie=(N==null?void 0:N.poc)&&Math.abs(K-N.poc)<B,se=(N==null?void 0:N.vah)&&Math.abs(K-N.vah)<B,be=(N==null?void 0:N.val)&&Math.abs(K-N.val)<B,J=(N==null?void 0:N.vah)&&(N==null?void 0:N.val)&&K<=N.vah&&K>=N.val,re=(N==null?void 0:N.ib_high)&&(N==null?void 0:N.ib_low)&&K<=N.ib_high&&K>=N.ib_low;N!=null&&N.ib_high&&Math.abs(K-N.ib_high)<B,N!=null&&N.ib_low&&Math.abs(K-N.ib_low)<B;const te=ee.length===1,ze=(n==null?void 0:n.current_price)&&Math.abs(K-n.current_price)<B,Z=X&&Math.abs(K-X)<B,T=Math.abs(K-U)<B;return e.jsxs("div",{style:{display:"flex",alignItems:"center",height:16,position:"relative",background:re?"rgba(0, 188, 212, 0.08)":"transparent"},children:[e.jsx("div",{style:{width:55,textAlign:"right",paddingRight:6,fontSize:9,color:ie?"#fff":ze?"#00ff88":"#555",fontWeight:ie||ze?700:400,flexShrink:0},children:K.toFixed(1)}),e.jsxs("div",{style:{width:40,fontSize:8,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:4,flexShrink:0,gap:2},children:[se&&!ie&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAH"}),be&&!ie&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAL"}),T&&!ie&&e.jsx("span",{style:{color:"#ff9800",fontSize:7},children:"Mid"}),Z&&!ie&&e.jsx("span",{style:{color:"#888",fontSize:7},children:"Open"}),ze&&e.jsx("span",{style:{color:"#00ff88"},children:""})]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",gap:ae==="compact"?1:0,position:"relative",minHeight:14,minWidth:ae==="expanded"?(F+1)*g:"auto",overflowX:ae==="expanded"?"visible":"hidden"},children:ae==="compact"?ee.map((z,H)=>{const W=z==="A"&&Z;return e.jsx("div",{style:{width:13,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:ie?"#ffffff":W?"rgba(100,100,100,0.6)":te?"rgba(255,68,102,0.9)":J?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:8,fontWeight:600,color:ie?"#1a1a2e":"#fff",flexShrink:0,border:ie?"none":W?"1px solid #fff":J?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:z},`${K}-${z}-${H}`)}):e.jsx("div",{style:{position:"relative",width:(F+1)*g,height:14},children:ee.map((z,H)=>{const W=qe(z),fe=z==="A"&&Z;return e.jsx("div",{style:{position:"absolute",left:W*g,width:g-1,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:ie?"#ffffff":fe?"rgba(100,100,100,0.6)":te?"rgba(255,68,102,0.9)":J?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:7,fontWeight:600,color:ie?"#1a1a2e":"#fff",border:ie?"none":fe?"1px solid #fff":J?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:z},`${K}-${z}-${H}`)})})}),e.jsx("div",{style:{width:60,height:12,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:4,flexShrink:0},children:e.jsx("div",{style:{height:10,width:`${ee.length/f*100}%`,background:ie?"rgba(255,255,255,0.6)":J?"rgba(186, 104, 200, 0.5)":"rgba(100,100,120,0.4)",borderRadius:1}})})]},K)})})(),(N==null?void 0:N.ib_high)&&(N==null?void 0:N.ib_low)&&e.jsxs("div",{style:{marginTop:8,padding:"6px 10px",background:"rgba(0, 188, 212, 0.15)",borderRadius:4,border:"1px solid rgba(0, 188, 212, 0.3)",display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:"#00bcd4"},children:"IB Range"}),e.jsxs("span",{style:{color:"#fff"},children:[(_t=N.ib_high)==null?void 0:_t.toFixed(1)," - ",(jt=N.ib_low)==null?void 0:jt.toFixed(1),e.jsxs("span",{style:{color:"#888",marginLeft:8},children:["(",(N.ib_high-N.ib_low||0).toFixed(1)," pts)"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(20,20,28,0.6)",borderRadius:8,border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"HL range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:N!=null&&N.high&&(N!=null&&N.low)?(N.high-N.low).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VA range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:N!=null&&N.vah&&(N!=null&&N.val)?(N.vah-N.val).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAH"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:((Ne=N==null?void 0:N.vah)==null?void 0:Ne.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAL"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:((rt=N==null?void 0:N.val)==null?void 0:rt.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"POC"}),e.jsx("div",{style:{color:"#ffaa00",fontFamily:"monospace"},children:((it=N==null?void 0:N.poc)==null?void 0:it.toFixed(1))||"--"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,fontSize:11,marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"Total vol"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:N!=null&&N.volume?N.volume>=1e3?(N.volume/1e3).toFixed(2)+"K":N.volume:"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB high"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((Rn=N==null?void 0:N.ib_high)==null?void 0:Rn.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB low"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((Qe=N==null?void 0:N.ib_low)==null?void 0:Qe.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:N!=null&&N.ib_high&&(N!=null&&N.ib_low)?(N.ib_high-N.ib_low).toFixed(1):"--"})]})]})]})]})})]}),!R&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Day Type"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("div",{style:{padding:"8px 16px",background:`${le[ve.day_type]||"#888"}20`,border:`1px solid ${le[ve.day_type]||"#888"}`,borderRadius:8,color:le[ve.day_type]||"#888",fontWeight:700,fontSize:14},children:ve.day_type_name||"Developing"}),e.jsxs("div",{style:{color:"#8b8b8b",fontSize:12},children:[ve.day_type_confidence||0,"%"]})]}),ve.day_type_scores&&Object.entries(ve.day_type_scores).map(([f,F])=>e.jsxs("div",{style:{marginBottom:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,marginBottom:2},children:[e.jsx("span",{style:{color:"#aaa",textTransform:"capitalize"},children:f.replace("_"," ")}),e.jsxs("span",{style:{color:le[f]||"#888"},children:[F,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min(F,100)}%`,background:le[f]||"#888",borderRadius:2}})})]},f)),ve.trade_setup&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"rgba(0,255,136,0.08)",borderRadius:6,border:"1px solid rgba(0,255,136,0.2)"},children:[e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:4},children:"TRADE SETUP"}),e.jsx("div",{style:{fontSize:12,color:"#ccc"},children:ve.trade_setup})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Open Type (RTH)"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:e.jsx("div",{style:{padding:"8px 16px",background:`${nt[ve.open_type]||"#888"}20`,border:`1px solid ${nt[ve.open_type]||"#888"}`,borderRadius:8,color:nt[ve.open_type]||"#888",fontWeight:700,fontSize:14},children:((Ft=ve.open_type_info)==null?void 0:Ft.name)||"Developing"})}),ve.open_type_info&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:12,color:"#aaa",marginBottom:8},children:ve.open_type_info.description}),e.jsxs("div",{style:{display:"flex",gap:16,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Conviction: "}),e.jsx("span",{style:{color:nt[ve.open_type]||"#888",fontWeight:600},children:((Hn=ve.open_type_info)==null?void 0:Hn.conviction)||"N/A"})]}),(n==null?void 0:n.open_direction)&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Direction: "}),e.jsx("span",{style:{color:(n==null?void 0:n.open_direction)==="up"?"#00ff88":"#ff4466",fontWeight:600},children:(nn=n==null?void 0:n.open_direction)==null?void 0:nn.toUpperCase()})]})]})]}),(n==null?void 0:n.ab_overlap)!==void 0&&e.jsxs("div",{style:{marginTop:12,fontSize:11},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"AB Overlap"}),e.jsxs("span",{style:{color:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88"},children:[n==null?void 0:n.ab_overlap,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min((n==null?void 0:n.ab_overlap)||0,100)}%`,background:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88",borderRadius:2}})})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Profile Shape"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("div",{style:{width:48,height:48,background:"rgba(255,255,255,0.05)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:800,color:((Vt=ve.profile_shape_info)==null?void 0:Vt.sentiment)==="Bullish"?"#00ff88":((Mt=ve.profile_shape_info)==null?void 0:Mt.sentiment)==="Bearish"?"#ff4466":"#888"},children:Ht[ve.profile_shape]||""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((rn=ve.profile_shape_info)==null?void 0:rn.sentiment)==="Bullish"?"#00ff88":((ln=ve.profile_shape_info)==null?void 0:ln.sentiment)==="Bearish"?"#ff4466":"#aaa"},children:((xn=ve.profile_shape_info)==null?void 0:xn.name)||"Developing"}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b"},children:((qn=ve.profile_shape_info)==null?void 0:qn.sentiment)||"N/A"})]})]}),((er=ve.profile_shape_info)==null?void 0:er.description)&&e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:ve.profile_shape_info.description})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Metrics"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"IB Range %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[n!=null&&n.ib_range?(n.ib_range/n.avg_daily_range*100).toFixed(0):"--","%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"Range Ext %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[((gr=n==null?void 0:n.range_extension_pct)==null?void 0:gr.toFixed(0))||"--","%"]})]})]}),(n==null?void 0:n.ib_high)&&(n==null?void 0:n.ib_low)&&(n==null?void 0:n.ib_range)&&(()=>{const f=n.ib_range,F=ve.day_type||"normal",g=F==="trend"?2:F==="normal_var"?1.5:F==="neutral"?.5:1,B=f*g,X=n.high||n.ib_high,ne=n.low||n.ib_low,j=Math.max(0,X-n.ib_high),U=Math.max(0,n.ib_low-ne),K=Math.max(0,B-j),ee=Math.max(0,B-U),ie=n.ib_high+B,se=n.ib_low-B;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",marginBottom:12}}),e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Price Targets"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",marginBottom:2},children:"Upside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#00ff88"},children:["$",ie.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["+",K.toFixed(1)," pts remaining"]})]}),e.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#ff4466",marginBottom:2},children:"Downside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#ff4466"},children:["$",se.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["-",ee.toFixed(1)," pts remaining"]})]})]}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:8,textAlign:"center"},children:["Based on ",g,"x IB (",F.replace("_"," "),")"]})]})})()]})]}),e.jsx("div",{style:{gridColumn:"1 / -1",marginTop:20},children:e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>k(!M),style:{width:"100%",padding:"16px 20px",background:"transparent",border:"none",borderBottom:M?"1px solid rgba(255,255,255,0.08)":"none",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{children:"Historic TPO Profiles (Last 8 Weeks)"}),p&&e.jsxs("span",{style:{fontSize:11,color:"#8b8b8b",fontWeight:400},children:[p.days," trading days"]})]}),e.jsx("span",{style:{fontSize:18,transform:M?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"},children:""})]}),M&&e.jsx("div",{style:{padding:20},children:y?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading historic TPO data..."]}):((dt=p==null?void 0:p.profiles)==null?void 0:dt.length)>0?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("button",{onClick:()=>Me(!G),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"#aaa",cursor:"pointer",fontSize:12,fontWeight:500},children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,background:G?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.1)",color:G?"#00ff88":"#888",fontSize:12,fontWeight:700},children:G?"":"+"}),e.jsxs("span",{style:{color:G?"#fff":"#888"},children:[G?"Hide":"Show"," Data Table"]}),e.jsxs("span",{style:{fontSize:10,color:"#666"},children:["(",p.profiles.length," rows)"]})]}),e.jsxs("button",{onClick:()=>{const f=["Date","Day","Open","High","Low","Close","POC","VAH","VAL","IB_High","IB_Low","IB_Range","Range","Day_Type","Shape"],F=p.profiles.map(j=>{var U,K,ee,ie,se,be,J,re,te,ze,Z;return[j.date,j.weekday,((U=j.open)==null?void 0:U.toFixed(2))||"",((K=j.high)==null?void 0:K.toFixed(2))||"",((ee=j.low)==null?void 0:ee.toFixed(2))||"",((ie=j.close)==null?void 0:ie.toFixed(2))||"",((se=j.poc)==null?void 0:se.toFixed(2))||"",((be=j.vah)==null?void 0:be.toFixed(2))||"",((J=j.val)==null?void 0:J.toFixed(2))||"",((re=j.ib_high)==null?void 0:re.toFixed(2))||"",((te=j.ib_low)==null?void 0:te.toFixed(2))||"",((ze=j.ib_range)==null?void 0:ze.toFixed(2))||"",((Z=j.range)==null?void 0:Z.toFixed(2))||"",j.day_type||"",j.profile_shape||""].join(",")}),g=[f.join(","),...F].join(`
`),B=new Blob([g],{type:"text/csv"}),X=URL.createObjectURL(B),ne=document.createElement("a");ne.href=X,ne.download=`tpo_historic_${new Date().toISOString().slice(0,10)}.csv`,ne.click(),URL.revokeObjectURL(X)},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(0,170,255,0.15)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:6,color:"#00aaff",cursor:"pointer",fontSize:11,fontWeight:600},children:[e.jsx("span",{children:""})," Export CSV"]})]}),G&&e.jsx("div",{style:{overflowX:"auto",marginBottom:20},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,255,255,0.15)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#8b8b8b",fontWeight:500},children:"Date"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b",fontWeight:500},children:"Day"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontWeight:600},children:"POC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAH"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB H"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB L"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"High"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"Low"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b"},children:"Range"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Type"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Shape"})]})}),e.jsx("tbody",{children:p.profiles.map((f,F)=>{var ne,j,U,K,ee,ie,se,be;const g={normal:"#00aaff",trend:"#ff6600",normal_var:"#00ff88",neutral:"#9370DB",non_trend:"#888888",double_dist:"#ff4466"},B={normal:"Normal",trend:"Trend",normal_var:"NV",neutral:"Neutral",non_trend:"Non-Tr",double_dist:"DD"},X={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"};return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.06)",background:F===0?"rgba(0,255,136,0.05)":"transparent"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"monospace"},children:f.date}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:f.weekday}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontFamily:"monospace",fontWeight:600},children:((ne=f.poc)==null?void 0:ne.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((j=f.vah)==null?void 0:j.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((U=f.val)==null?void 0:U.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((K=f.ib_high)==null?void 0:K.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((ee=f.ib_low)==null?void 0:ee.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((ie=f.high)==null?void 0:ie.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((se=f.low)==null?void 0:se.toFixed(2))||"--"}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b",fontFamily:"monospace"},children:["$",((be=f.range)==null?void 0:be.toFixed(2))||"--"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,background:`${g[f.day_type]||"#888"}30`,color:g[f.day_type]||"#888",border:`1px solid ${g[f.day_type]||"#888"}50`},children:B[f.day_type]||f.day_type})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",width:22,height:22,lineHeight:"22px",textAlign:"center",borderRadius:4,fontSize:12,fontWeight:700,background:`${X[f.profile_shape]||"#888"}20`,color:X[f.profile_shape]||"#888",border:`1px solid ${X[f.profile_shape]||"#888"}50`},children:f.profile_shape})})]},f.date)})})]})}),(()=>{const f=p.profiles,F=f.reduce((j,U)=>j+(U.poc||0),0)/f.length||0,g=f.reduce((j,U)=>j+(U.range||0),0)/f.length||0,B=f.filter(j=>j.ib_range),X=B.reduce((j,U)=>j+U.ib_range,0)/B.length||0,ne=g>0?X/g*100:0;return e.jsxs("div",{style:{marginTop:20,padding:16,background:"rgba(30,30,40,0.6)",borderRadius:8,display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg POC"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#ffaa00",fontFamily:"monospace"},children:["$",F.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",g.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",X.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB %"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[ne.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Trend Days"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#ff6600"},children:f.filter(j=>j.day_type==="trend").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Normal Var"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#00ff88"},children:f.filter(j=>j.day_type==="normal_var").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Non-Trend"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#888"},children:f.filter(j=>j.day_type==="non_trend").length})]})]})})(),(()=>{const f=p.profiles,F=["Mon","Tue","Wed","Thu","Fri"],g={normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},B={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"},X={};F.forEach(j=>X[j]=[]),f.forEach(j=>{X[j.weekday]&&X[j.weekday].push(j)});const ne=F.map(j=>{const U=X[j];if(U.length===0)return{day:j,count:0};const K={},ee={};U.forEach(te=>{K[te.day_type]=(K[te.day_type]||0)+1,ee[te.profile_shape]=(ee[te.profile_shape]||0)+1});const ie=Object.entries(K).sort((te,ze)=>ze[1]-te[1])[0],se=Object.entries(ee).sort((te,ze)=>ze[1]-te[1])[0],be=U.reduce((te,ze)=>te+(ze.range||0),0)/U.length,J=U.filter(te=>te.ib_range).reduce((te,ze)=>te+ze.ib_range,0)/U.filter(te=>te.ib_range).length||0,re=be>0?J/be*100:0;return{day:j,count:U.length,profiles:U,mostCommonType:ie?ie[0]:"N/A",typePercent:ie?Math.round(ie[1]/U.length*100):0,mostCommonShape:se?se[0]:"N/A",shapePercent:se?Math.round(se[1]/U.length*100):0,avgRange:be.toFixed(2),avgIbRange:J.toFixed(2),ibPct:re.toFixed(1),typeCounts:K,shapeCounts:ee}});return e.jsxs("div",{style:{marginTop:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,marginBottom:16,color:"#fff",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Day of Week Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:ne.map(j=>e.jsxs("div",{style:{background:"rgba(30,30,40,0.8)",borderRadius:8,padding:12,border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#fff",marginBottom:8},children:j.day}),e.jsxs("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:[j.count," samples"]}),j.count>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:8,marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Most Common Type"}),e.jsxs("div",{style:{display:"inline-block",padding:"2px 8px",borderRadius:4,background:`${g[j.mostCommonType]||"#666"}22`,border:`1px solid ${g[j.mostCommonType]||"#666"}`,color:g[j.mostCommonType]||"#666",fontSize:10,fontWeight:600},children:[j.mostCommonType==="normal_var"?"N-Var":j.mostCommonType==="double_dist"?"Dbl-D":j.mostCommonType==="non_trend"?"Non-T":j.mostCommonType.charAt(0).toUpperCase()+j.mostCommonType.slice(1),e.jsxs("span",{style:{marginLeft:4,opacity:.7},children:[j.typePercent,"%"]})]})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Shape"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:4,background:`${B[j.mostCommonShape]||"#666"}22`,border:`1px solid ${B[j.mostCommonShape]||"#666"}44`,color:B[j.mostCommonShape]||"#888",fontSize:11,fontWeight:700},children:[j.mostCommonShape,e.jsxs("span",{style:{fontSize:9,fontWeight:400,opacity:.7},children:[j.shapePercent,"%"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4,marginTop:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:11,color:"#fff",fontFamily:"monospace"},children:["$",j.avgRange]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontFamily:"monospace"},children:[j.ibPct,"%"]})]})]})]})]},j.day))}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Trading Day Heatmap",e.jsx("span",{style:{fontSize:10,color:"#666",marginLeft:"auto"},children:"Most recent at top"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:20},children:ne.map(j=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#fff",marginBottom:10,textAlign:"center",fontWeight:600,padding:"6px 0",background:"rgba(255,255,255,0.05)",borderRadius:6},children:j.day}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:3,minHeight:90},children:j.profiles.slice(0,12).map((U,K)=>{var J;const ee=U.vah&&U.val?U.vah-U.val:0,ie=U.range>0?ee/U.range*100:0,se=U.range>0&&U.ib_range?U.ib_range/U.range*100:0,be=g[U.day_type]||"#666";return e.jsxs("div",{style:{aspectRatio:"1",borderRadius:4,background:`linear-gradient(135deg, ${be} 0%, ${be}99 100%)`,cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 2px 8px ${be}33`,transition:"all 0.2s ease",border:`1px solid ${be}44`},onMouseEnter:re=>{re.currentTarget.style.transform="scale(1.1)",re.currentTarget.style.boxShadow=`0 4px 20px ${be}66`,re.currentTarget.style.zIndex="10"},onMouseMove:re=>{b({...U,vaRange:ee,vaPct:ie,ibPct:se,baseColor:be,x:re.clientX,y:re.clientY})},onMouseLeave:re=>{re.currentTarget.style.transform="scale(1)",re.currentTarget.style.boxShadow=`0 2px 8px ${be}33`,re.currentTarget.style.zIndex="1",b(null)},children:[e.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:U.profile_shape}),e.jsx("span",{style:{position:"absolute",bottom:1,right:2,fontSize:7,color:"rgba(255,255,255,0.6)"},children:(J=U.date)==null?void 0:J.slice(8)})]},K)})}),j.count>12&&e.jsxs("div",{style:{fontSize:8,color:"#666",textAlign:"center",marginTop:4},children:["+",j.count-12," more"]})]},j.day))}),e.jsx("div",{style:{display:"flex",gap:20,marginTop:20,paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.08)",flexWrap:"wrap",justifyContent:"center"},children:Object.entries(g).map(([j,U])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:`${U}15`,borderRadius:20,border:`1px solid ${U}33`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:`linear-gradient(135deg, ${U} 0%, ${U}aa 100%)`,boxShadow:`0 0 6px ${U}66`}}),e.jsx("span",{style:{fontSize:10,color:"#bbb",fontWeight:500},children:j==="normal_var"?"Normal Var":j==="double_dist"?"Double Dist":j==="non_trend"?"Non-Trend":j.charAt(0).toUpperCase()+j.slice(1)})]},j))}),x&&(()=>{var K,ee,ie,se,be,J,re,te,ze,Z,T,z;const j=x.close>x.open,U=j?"#00ff88":"#ff4466";return e.jsxs("div",{style:{position:"fixed",left:x.x+15,top:x.y+15,transform:x.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:260,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px ${x.baseColor}44, 0 0 20px ${x.baseColor}22`,zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${x.baseColor}33 0%, ${x.baseColor}11 100%)`,borderBottom:`1px solid ${x.baseColor}44`,padding:"10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:x.date}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:x.weekday})]})]}),e.jsx("span",{style:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,fontSize:13,fontWeight:800,background:"rgba(255,255,255,0.1)",color:"#fff"},children:x.profile_shape})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${x.baseColor}33`,color:x.baseColor,border:`1px solid ${x.baseColor}55`,textTransform:"uppercase"},children:(K=x.day_type)==null?void 0:K.replace("_"," ")}),x.open_type&&x.open_type!=="developing"&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.4)",textTransform:"uppercase"},children:x.open_type})]})]}),e.jsxs("div",{style:{margin:"10px 14px",padding:"10px 12px",borderRadius:8,background:`${U}15`,border:`1px solid ${U}30`},children:[e.jsxs("div",{style:{fontSize:10,color:U,marginBottom:8,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{children:j?"":""}),"PRICE ACTION"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:[{label:"O",value:x.open,color:"#fff"},{label:"H",value:x.high,color:j?"#00ff88":"#fff"},{label:"L",value:x.low,color:j?"#fff":"#ff4466"},{label:"C",value:x.close,color:"#fff"}].map(H=>{var W;return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:7,color:"#888",marginBottom:2},children:H.label}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:H.color,fontFamily:"monospace"},children:["$",(W=H.value)==null?void 0:W.toFixed(2)]})]},H.label)})})]}),e.jsxs("div",{style:{padding:"0 14px 10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00ff88",fontFamily:"monospace"},children:["$",(ee=x.high)==null?void 0:ee.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"DAY RANGE"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#fff",fontFamily:"monospace"},children:["$",(ie=x.range)==null?void 0:ie.toFixed(2)]}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:2},children:"100%"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#ff4466",fontFamily:"monospace"},children:["$",(se=x.low)==null?void 0:se.toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB HIGH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((be=x.ib_high)==null?void 0:be.toFixed(2))||"N/A"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#9370DB",fontFamily:"monospace"},children:["$",((J=x.ib_range)==null?void 0:J.toFixed(2))||"N/A"]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(re=x.ibPct)==null?void 0:re.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB LOW"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((te=x.ib_low)==null?void 0:te.toFixed(2))||"N/A"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(ze=x.vah)==null?void 0:ze.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"VA RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#00aaff",fontFamily:"monospace"},children:["$",(Z=x.vaRange)==null?void 0:Z.toFixed(2)]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(T=x.vaPct)==null?void 0:T.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAL"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(z=x.val)==null?void 0:z.toFixed(2)]})]})]})]})]})})()]}),e.jsxs("div",{style:{marginTop:20,background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Day Type Distribution by Weekday"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:ne.map(j=>{var ie,se;const U=j.count;let K=0;const ee=Object.entries(j.typeCounts||{}).sort((be,J)=>J[1]-be[1]).map(([be,J])=>{const re=U>0?J/U*100:0,te=K;return K+=re,{type:be,count:J,percent:re,startPercent:te}});return e.jsxs("div",{style:{textAlign:"center",position:"relative"},children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:8,fontWeight:600},children:j.day}),e.jsx("div",{style:{width:70,height:70,borderRadius:"50%",margin:"0 auto",background:U>0?`conic-gradient(${ee.map(be=>`${g[be.type]} ${be.startPercent}% ${be.startPercent+be.percent}%`).join(", ")})`:"rgba(50,50,60,0.5)",position:"relative",boxShadow:"0 2px 12px rgba(0,0,0,0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:be=>{be.currentTarget.style.transform="scale(1.1)",be.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)"},onMouseMove:be=>{d({day:j.day,total:U,segments:ee,avgRange:j.avgRange,avgIbRange:j.avgIbRange,ibPct:j.ibPct,x:be.clientX,y:be.clientY})},onMouseLeave:be=>{be.currentTarget.style.transform="scale(1)",be.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.3)",d(null)},children:e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:40,height:40,borderRadius:"50%",background:"linear-gradient(135deg, #1a1a2e 0%, #252540 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#fff"},children:U})}),ee[0]&&e.jsxs("div",{style:{marginTop:8,fontSize:9,color:g[ee[0].type],fontWeight:600},children:[ee[0].type==="normal_var"?"N-Var":ee[0].type==="double_dist"?"Dbl-D":ee[0].type==="non_trend"?"Non-T":((ie=ee[0].type)==null?void 0:ie.charAt(0).toUpperCase())+((se=ee[0].type)==null?void 0:se.slice(1)),e.jsxs("span",{style:{color:"#666",marginLeft:4},children:[ee[0].percent.toFixed(0),"%"]})]})]},j.day)})}),C&&e.jsxs("div",{style:{position:"fixed",left:C.x+15,top:C.y+15,transform:C.x>window.innerWidth-260?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:200,boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1)",zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:C.day})]}),e.jsxs("span",{style:{fontSize:11,color:"#888",background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:10},children:[C.total," days"]})]}),e.jsxs("div",{style:{padding:"12px 14px"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:8,fontWeight:600,textTransform:"uppercase"},children:"Day Type Distribution"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:C.segments.map((j,U)=>{var ee,ie;const K=j.type==="normal_var"?"Normal Var":j.type==="double_dist"?"Double Dist":j.type==="non_trend"?"Non-Trend":((ee=j.type)==null?void 0:ee.charAt(0).toUpperCase())+((ie=j.type)==null?void 0:ie.slice(1));return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:3,background:g[j.type],boxShadow:`0 0 6px ${g[j.type]}66`}}),e.jsx("span",{style:{fontSize:11,color:"#ccc",flex:1},children:K}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:g[j.type]},children:j.count}),e.jsx("div",{style:{width:50,height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${j.percent}%`,height:"100%",background:g[j.type],borderRadius:2}})}),e.jsxs("span",{style:{fontSize:10,color:"#888",width:32,textAlign:"right"},children:[j.percent.toFixed(0),"%"]})]},U)})}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.08)",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG RANGE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",C.avgRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG IB"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",C.avgIbRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[C.ibPct,"%"]})]})]})]})]})]})]})})()]}):e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No historic data available"})})]})})]})},Wg=({settings:t,onSettingsChange:n})=>{const[r,i]=L.useState({ticker:"GC1!",current_price:0,delta_5m:0,delta_30m:0,cumulative_delta:0,ib_high:0,ib_low:0,ib_midpoint:0,ib_range:0,pdpoc:0,pd_high:0,pd_low:0,vwap:0,session_high:0,session_low:0,buying_imbalance_pct:0,absorption_ratio:0,stacked_buy_imbalances:0,current_phase:"CONNECTING...",conditions_met:0,entry_signal:!1,last_update:"",market_open:!1,candle_30m_stats:{avg:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},max:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},min:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0}}}),[o,s]=L.useState(!1),[l,a]=L.useState(0),[c,p]=L.useState(new Date),[w,y]=L.useState([]),[h,M]=L.useState({gamma_environment:"UNKNOWN",gamma_regime:"UNKNOWN",total_gex:0,zero_gamma:0,max_pain:0,key_levels:[],gex_profile:[],gex_levels:[],call_wall:0,put_wall:0,hvl:0,gamma_flip:0,beta_spx:0,beta_dxy:0,ib_locked:!1,ib_session_name:"",pd_high:0,pd_low:0,pdpoc:0,session_high:0,session_low:0,data_source:"CONNECTING"}),[k,G]=L.useState({etfs:[],total_flow_1d_mm:0,total_flow_5d_mm:0,timestamp:null}),[Me,x]=L.useState({gold:{overall_sentiment:"neutral",signals:[]},bitcoin:{overall_sentiment:"neutral",signals:[],etf_flow_1d:0},timestamp:null}),[b,C]=L.useState({btc_options:{put_call_ratio:0,max_pain:0,call_wall:0,put_wall:0,sentiment:"neutral"}}),[d,A]=L.useState({funding_rates:{average:0,annualized:0,sentiment:"neutral"}}),{isMobile:m}=Ri();L.useEffect(()=>{const q=async()=>{const u=performance.now();try{const I=await fetch(Kt);if(I.ok){const _e=await I.json(),E=performance.now(),oe=Math.round(E-u);i(_e),M(Xe=>({...Xe,..._e})),s(!0),a(oe),p(new Date)}else throw new Error("Backend error")}catch{s(!1),a(0),i(_e=>({..._e,current_phase:"DISCONNECTED"})),M(_e=>({..._e,data_source:"DISCONNECTED"}))}};q();const v=setInterval(q,300);return()=>clearInterval(v)},[]),L.useEffect(()=>{const q=async()=>{try{if((r==null?void 0:r.contract)==="BTC-SPOT"){const _e=await fetch(`${Kt.replace("?","/etf-flows?")}`);if(_e.ok){const Xe=await _e.json();G(Xe)}const E=await fetch(`${Kt.replace("?","/deribit-options?")}`);if(E.ok){const Xe=await E.json();C(Xe)}const oe=await fetch(`${Kt.replace("?","/funding-rates?")}`);if(oe.ok){const Xe=await oe.json();A(Xe)}}const I=await fetch(`${Kt.replace("?","/institutional?")}`);if(I.ok){const _e=await I.json();x(_e)}}catch(u){console.error("Error fetching institutional data:",u)}};q();const v=setInterval(q,6e4);return()=>clearInterval(v)},[r==null?void 0:r.contract]);const R=(q,v=5)=>!q||q<=0||!r.current_price||r.current_price<=0?!1:Math.abs(q-r.current_price)<=v,$=(q,v,u=5)=>R(q,u)?{color:"#ffffff",textShadow:"0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(255,255,255,0.5)",fontWeight:700}:{color:v},ae=({active:q,conditionsMet:v})=>e.jsxs("div",{style:{padding:16,borderRadius:12,background:q?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.02)",border:`2px solid ${q?"#00ff88":"rgba(255,255,255,0.1)"}`,textAlign:"center",animation:q?"glow 1s infinite alternate":"none"},children:[e.jsx("div",{style:{fontSize:14,color:"#888",marginBottom:8},children:"ENTRY SIGNAL"}),e.jsx("div",{style:{fontSize:36,fontWeight:700,color:q?"#00ff88":"#444"},children:q?" READY":" WAITING"}),e.jsxs("div",{style:{fontSize:14,color:q?"#00ff88":"#666",marginTop:8},children:[v,"/6 Conditions Met"]})]});return e.jsxs("div",{style:{..._.liveDashboard,maxWidth:m?"100%":"1000px",padding:m?"12px":"0"},children:[e.jsx(ug,{}),e.jsx("div",{style:{marginBottom:m?16:24},children:e.jsx(ae,{active:r.entry_signal,conditionsMet:r.conditions_met})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:m?12:16,padding:m?12:20,marginBottom:m?12:16},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#888",fontSize:m?12:14},children:"Initial Balance Sessions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:m?"1fr":"repeat(2, 1fr)",gap:12},children:h.ibs&&["japan","london","us","ny"].map(q=>{const v=h.ibs[q];if(!v)return null;const u=v.status==="ACTIVE",I=v.status==="ENDED",_e=v.high>0&&v.low>0;return e.jsxs("div",{style:{background:u?"rgba(0,255,136,0.05)":"rgba(255,255,255,0.02)",border:`2px solid ${u?"rgba(0,255,136,0.6)":I?"rgba(255,170,0,0.4)":"rgba(136,136,136,0.2)"}`,borderRadius:12,padding:12,position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:u?"#00ff88":I?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:v.name}),e.jsxs("div",{style:{fontSize:10,color:"#666",marginTop:2},children:[v.start," - ",v.end," ET"]})]}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:9,fontWeight:700,letterSpacing:1,background:u?"#001a00":I?"#1a1000":"#111",color:u?"#00ff88":I?"#ffaa00":"#666",border:`1px solid ${u?"#00ff88":I?"#ffaa00":"#333"}`,animation:u?"pulse 1.5s ease-in-out infinite":"none"},children:u?" ACTIVE":I?" ENDED":" WAITING"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:6},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"HIGH"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...$(_e?v.high:0,_e?"#ff4466":"#444")},children:_e?`$${v.high.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"MID"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...$(_e?v.mid:0,_e?"#ffaa00":"#444")},children:_e?`$${v.mid.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"LOW"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...$(_e?v.low:0,_e?"#00ff88":"#444")},children:_e?`$${v.low.toFixed(2)}`:"--"})]})]})]},q)})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(136,136,136,0.3)",borderRadius:16,padding:20,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{margin:0,color:"#888",fontSize:14},children:" Previous Day Levels"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:"rgba(136,136,136,0.15)",color:"#aaa",fontFamily:"monospace"},children:h.pd_date_range||"Loading..."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:m?"1fr":"repeat(3, 1fr)",gap:m?8:16},children:[e.jsxs("div",{style:_.levelCard,children:[e.jsx("div",{style:_.levelLabel,children:"PD High"}),e.jsxs("div",{style:{..._.levelValue,...$(h.pd_high,"#ff4466")},children:["$",h.pd_high&&h.pd_high>0?h.pd_high.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:_.levelCard,children:[e.jsx("div",{style:_.levelLabel,children:"pdPOC"}),e.jsxs("div",{style:{..._.levelValue,...$(h.pdpoc||r.pdpoc,"#ffaa00")},children:["$",h.pdpoc&&h.pdpoc>0?h.pdpoc.toFixed(2):r.pdpoc&&r.pdpoc>0?r.pdpoc.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:_.levelCard,children:[e.jsx("div",{style:_.levelLabel,children:"PD Low"}),e.jsxs("div",{style:{..._.levelValue,...$(h.pd_low,"#00ff88")},children:["$",h.pd_low&&h.pd_low<999999?h.pd_low.toFixed(2):"0.00"]})]})]})]}),e.jsx(Bg,{metrics:r,settings:t}),e.jsx("div",{style:{marginTop:20},children:e.jsx(hg,{gexData:h,currentPrice:r.current_price})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(fg,{gexData:h,currentPrice:r.current_price})})]})},Pg=({data:t,trades:n,dateRange:r,setDateRange:i})=>{const[o,s]=L.useState(2025),[l,a]=L.useState(r);L.useEffect(()=>{t.yearly_pnl.length>0&&!t.yearly_pnl.find(w=>w.year===o)&&s(t.yearly_pnl[t.yearly_pnl.length-1].year)},[t.yearly_pnl,o]);const c=()=>{i(l)},p=()=>{const w={start:"2025-08-20",end:"2025-12-28"};a(w),i(w)};return e.jsxs("div",{style:_.backtestDashboard,children:[e.jsxs("div",{style:_.dashboardHeader,children:[e.jsx("h2",{style:_.dashboardTitle,children:"Underground Setup - Backtest Analytics"}),e.jsxs("div",{style:_.dateFilter,children:[e.jsx("input",{type:"date",value:l.start,onChange:w=>a({...l,start:w.target.value}),style:_.dateInput}),e.jsx("span",{style:_.dateSeparator,children:"to"}),e.jsx("input",{type:"date",value:l.end,onChange:w=>a({...l,end:w.target.value}),style:_.dateInput}),e.jsx("button",{onClick:c,style:{..._.filterButton,background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000",fontWeight:600,border:"none"},children:"Apply"}),e.jsx("button",{style:_.filterButton,onClick:p,children:"Reset"})]})]}),e.jsxs("div",{style:_.filterInfo,children:["Showing ",t.summary.total_trades," trades from ",r.start," to ",r.end]}),e.jsx(Fg,{data:t}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 450px",gap:24,alignItems:"start"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:20},children:[e.jsx(Eg,{data:t,selectedYear:o,setSelectedYear:s}),e.jsx(Ag,{weeks:t.weekly_pnl,year:o})]}),e.jsx("div",{children:e.jsx(Lg,{trades:n})})]})]})},Ng=({trades:t,dateRange:n})=>{const r=t.filter(l=>l.date>=n.start&&l.date<=n.end).sort((l,a)=>new Date(a.date)-new Date(l.date)),i=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"],a=r.map(h=>{var M,k,G,Me,x;return[h.date,((M=h.entry)==null?void 0:M.toFixed(2))||"",((k=h.exit)==null?void 0:k.toFixed(2))||"",((G=h.stop_loss)==null?void 0:G.toFixed(2))||"",((Me=h.pnl)==null?void 0:Me.toFixed(2))||"",((x=h.r)==null?void 0:x.toFixed(2))||"",h.grade||"",h.tier||"",h.exitReason||"",h.delta||"",h.contracts||""]}),c=[l.join(","),...a.map(h=>h.join(","))].join(`
`),p=new Blob([c],{type:"text/csv"}),w=URL.createObjectURL(p),y=document.createElement("a");y.href=w,y.download=`trade_log_${n.start}_to_${n.end}.csv`,y.click(),URL.revokeObjectURL(w)},o=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"];let a='<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?>';a+='<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">',a+='<Worksheet ss:Name="Trades"><Table>',a+="<Row>"+l.map(y=>`<Cell><Data ss:Type="String">${y}</Data></Cell>`).join("")+"</Row>",r.forEach(y=>{a+="<Row>",a+=`<Cell><Data ss:Type="String">${y.date||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.entry||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.exit||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.stop_loss||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.pnl||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.r||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="String">${y.grade||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.tier||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="String">${y.exitReason||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.delta||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${y.contracts||0}</Data></Cell>`,a+="</Row>"}),a+="</Table></Worksheet></Workbook>";const c=new Blob([a],{type:"application/vnd.ms-excel"}),p=URL.createObjectURL(c),w=document.createElement("a");w.href=p,w.download=`trade_log_${n.start}_to_${n.end}.xls`,w.click(),URL.revokeObjectURL(p)},s=r.slice(0,50);return e.jsxs("div",{style:_.tradeLog,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:_.dashboardTitle,children:"Trade Log"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:i,style:{background:"rgba(0,255,136,0.1)",border:"1px solid #00ff88",color:"#00ff88",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" CSV (",r.length,")"]}),e.jsxs("button",{onClick:o,style:{background:"rgba(0,170,255,0.1)",border:"1px solid #00aaff",color:"#00aaff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" Excel (",r.length,")"]})]})]}),e.jsxs("p",{style:_.tradeLogInfo,children:["Showing ",s.length," of ",r.length," filtered trades (most recent first)"]}),e.jsxs("table",{style:_.tradeTable,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:_.th,children:"Date"}),e.jsx("th",{style:_.th,children:"Entry"}),e.jsx("th",{style:_.th,children:"Exit"}),e.jsx("th",{style:_.th,children:"P&L"}),e.jsx("th",{style:_.th,children:"R-Multiple"}),e.jsx("th",{style:_.th,children:"Grade"}),e.jsx("th",{style:_.th,children:"Tier"}),e.jsx("th",{style:_.th,children:"Exit Reason"})]})}),e.jsx("tbody",{children:s.map(l=>{var a;return e.jsxs("tr",{style:_.tr,children:[e.jsx("td",{style:_.td,children:l.date}),e.jsxs("td",{style:_.td,children:["$",l.entry.toFixed(2)]}),e.jsxs("td",{style:_.td,children:["$",l.exit.toFixed(2)]}),e.jsxs("td",{style:{..._.td,color:l.pnl>=0?"#00ff88":"#ff4466"},children:["$",l.pnl.toLocaleString()]}),e.jsxs("td",{style:{..._.td,color:l.r>=0?"#00ff88":"#ff4466"},children:[l.r.toFixed(1),"R"]}),e.jsx("td",{style:_.td,children:e.jsx("span",{style:{..._.gradeBadge,background:l.grade==="A"?"#00ff88":l.grade==="B"?"#ffaa00":"#ff4466"},children:l.grade})}),e.jsx("td",{style:_.td,children:l.tier}),e.jsx("td",{style:_.td,children:e.jsx("span",{style:{fontSize:"11px",color:l.exitReason==="STOP_LOSS"?"#ff4466":"#00ff88"},children:((a=l.exitReason)==null?void 0:a.replace("_"," "))||""})})]},l.id)})})]})]})},Oo={"BTC-SPOT":{symbol:"BTC-SPOT",name:"Bitcoin Spot 24/7",ticker:"BTCUSDT",asset:"BTC-SPOT",icon:"",isSpot:!0},ESH26:{symbol:"ESH26",name:"E-mini S&P Mar 2026",ticker:"ES1!",asset:"ES",icon:""},NQH26:{symbol:"NQH26",name:"Nasdaq Mar 2026",ticker:"NQ1!",asset:"NQ",icon:""},GCG26:{symbol:"GCG26",name:"Gold Feb 2026",ticker:"GC1!",asset:"GC",icon:""},BTCG26:{symbol:"BTCG26",name:"Bitcoin CME Feb 2026",ticker:"BTC1!",asset:"BTC",icon:""},CLG26:{symbol:"CLG26",name:"Crude Oil Feb 2026",ticker:"CL1!",asset:"CL",icon:""}},c0=({selectedContract:t,onContractChange:n,contracts:r,isMobile:i})=>{var c;const[o,s]=L.useState(!1),l=L.useRef(null),a=r[t];return L.useEffect(()=>{const p=w=>{l.current&&!l.current.contains(w.target)&&s(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),e.jsxs("div",{ref:l,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>s(!o),style:{display:"flex",alignItems:"center",gap:i?6:10,padding:i?"6px 10px":"10px 16px",background:"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,170,255,0.1) 100%)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:8,cursor:"pointer",transition:"all 0.2s ease",outline:"none"},children:[e.jsx("span",{style:{fontSize:i?14:18},children:(a==null?void 0:a.icon)||""}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:i?12:14,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace",letterSpacing:.5},children:(a==null?void 0:a.symbol)||"SELECT"}),!i&&e.jsx("div",{style:{fontSize:9,color:"#888",marginTop:1},children:((c=a==null?void 0:a.name)==null?void 0:c.split(" ").slice(0,2).join(" "))||"Contract"})]}),e.jsx("svg",{width:i?10:12,height:i?10:12,viewBox:"0 0 12 12",fill:"none",style:{marginLeft:i?2:6,transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:e.jsx("path",{d:"M2 4L6 8L10 4",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),o&&e.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,marginBottom:8,minWidth:i?180:240,background:"linear-gradient(180deg, rgba(20,20,30,0.98) 0%, rgba(10,10,18,0.99) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,overflow:"hidden",boxShadow:"0 -10px 40px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",zIndex:2e3,animation:"slideUp 0.2s ease"},children:[e.jsx("div",{style:{padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,0.08)",background:"rgba(0,255,136,0.05)"},children:e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1,textTransform:"uppercase"},children:"Select Contract"})}),e.jsx("div",{style:{maxHeight:280,overflowY:"auto"},children:Object.entries(r).map(([p,w])=>{const y=p===t;return e.jsxs("div",{onClick:()=>{n(p),s(!1)},style:{display:"flex",alignItems:"center",gap:12,padding:"12px 14px",cursor:"pointer",background:y?"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, transparent 100%)":"transparent",borderLeft:y?"3px solid #00ff88":"3px solid transparent",transition:"all 0.15s ease"},onMouseEnter:h=>{y||(h.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseLeave:h=>{y||(h.currentTarget.style.background="transparent")},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:y?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:w.icon||""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:y?"#00ff88":"#fff",fontFamily:"'JetBrains Mono', monospace",marginBottom:2},children:w.symbol}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:w.name})]}),y&&e.jsx("div",{style:{width:20,height:20,borderRadius:"50%",background:"#00ff88",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M2 6L5 9L10 3",stroke:"#000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},p)})}),e.jsx("div",{style:{padding:"8px 14px",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.2)"},children:e.jsx("span",{style:{fontSize:9,color:"#555"},children:"Live data from Databento"})})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbars for Windows users */
        .tpo-scroll-container::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }

        .tpo-scroll-container::-webkit-scrollbar-track {
          background: rgba(20, 20, 28, 0.8);
          border-radius: 5px;
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb {
          background: linear-gradient(180deg, rgba(100, 100, 120, 0.6) 0%, rgba(70, 70, 90, 0.6) 100%);
          border-radius: 5px;
          border: 2px solid rgba(20, 20, 28, 0.8);
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(180deg, rgba(130, 130, 150, 0.8) 0%, rgba(100, 100, 120, 0.8) 100%);
        }

        .tpo-scroll-container::-webkit-scrollbar-corner {
          background: rgba(20, 20, 28, 0.8);
        }

        /* Firefox scrollbar support */
        .tpo-scroll-container {
          scrollbar-width: thin;
          scrollbar-color: rgba(100, 100, 120, 0.6) rgba(20, 20, 28, 0.8);
        }
      `})]})},Dg=({globalData:t,selectedContract:n,onContractChange:r,contracts:i,isMobile:o})=>{var w,y,h,M;const s=["DISCONNECTED","NO_DATABENTO_LIB","NO_API_KEY","ERROR"],l=((w=t==null?void 0:t.data_source)==null?void 0:w.includes("RECONNECTING"))||(t==null?void 0:t.data_source)==="INITIALIZING"||(t==null?void 0:t.data_source)==="SWITCHING...",a=(t==null?void 0:t.data_source)&&!s.includes(t.data_source)&&!l,c=a?"LIVE":l?"RECONNECTING":"OFFLINE",p=a?"#00ff88":l?"#ffaa00":"#ff4466";return o?e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.98) 0%, rgba(5,5,10,1) 100%)",borderTop:"1px solid rgba(0,255,136,0.3)",padding:"8px 12px",zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[e.jsx(c0,{selectedContract:n,onContractChange:r,contracts:i,isMobile:!0}),e.jsx("div",{style:{padding:"6px 14px",background:a?"rgba(0,255,136,0.15)":l?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${a?"rgba(0,255,136,0.4)":l?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:8},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:a?"#00ff88":l?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace"},children:["$",((y=t==null?void 0:t.current_price)==null?void 0:y.toFixed(2))||"----.--"]})}),e.jsx("div",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6},children:e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff",fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.current_et_time)||"--:--"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"4px 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:p,boxShadow:`0 0 6px ${p}`,animation:a||l?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{fontSize:9,fontWeight:700,color:p},children:c})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsxs("span",{style:{fontSize:9,color:"#666"},children:["LATENCY: ",e.jsx("span",{style:{color:a?"#00ff88":"#666"},children:a?"~10ms":l?"...":"--"})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsx("span",{style:{fontSize:9,color:a?"#00aaff":l?"#ffaa00":"#666"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]}):e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.95) 0%, rgba(5,5,10,0.98) 100%)",borderTop:"1px solid rgba(0,255,136,0.2)",padding:"12px 24px",display:"flex",alignItems:"center",justifyContent:"center",gap:24,zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.5)"},children:[e.jsx(c0,{selectedContract:n,onContractChange:r,contracts:i,isMobile:!1}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{padding:"8px 16px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666"},children:"ET"}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:(t==null?void 0:t.current_et_time)||"--:--:--"})]})}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666",textTransform:"uppercase",letterSpacing:1},children:"Price"}),e.jsx("div",{style:{padding:"8px 20px",background:a?"rgba(0,255,136,0.15)":l?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${a?"rgba(0,255,136,0.4)":l?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:6,boxShadow:a?"0 0 20px rgba(0,255,136,0.2)":l?"0 0 15px rgba(255,170,0,0.15)":"none"},children:e.jsxs("span",{style:{fontSize:20,fontWeight:700,color:a?"#00ff88":l?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",textShadow:a?"0 0 10px rgba(0,255,136,0.5)":"none"},children:["$",((h=t==null?void 0:t.current_price)==null?void 0:h.toFixed(2))||"----.--"]})})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(255,255,255,0.02)",borderRadius:4,fontSize:11,color:"#888"},children:((M=i[n])==null?void 0:M.name)||"Gold Feb 2026"}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 14px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:p,boxShadow:`0 0 6px ${p}`,animation:a||l?"pulse 2s infinite":"none"}}),e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:p,boxShadow:`0 0 6px ${p}`,animation:a||l?"pulse 2s infinite 0.3s":"none"}}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:p,marginLeft:4,textTransform:"uppercase",letterSpacing:1},children:c})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"LATENCY:"}),e.jsx("span",{style:{fontSize:11,color:p,fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:a?"~10ms":l?"...":"--"}),a&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(0,255,136,0.2)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:3,color:"#00ff88",fontWeight:600},children:"EXCELLENT"}),l&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(255,170,0,0.2)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:3,color:"#ffaa00",fontWeight:600},children:"WAITING"})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"SOURCE:"}),e.jsx("span",{style:{fontSize:11,color:a?"#00aaff":l?"#ffaa00":"#666",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]})]})},Hg=()=>{var S;const{isMobile:t}=Ri(),[n,r]=aa("horizon_user",null),[i,o]=L.useState("backtest"),[s,l]=aa("horizon_settings",Tf),[a,c]=L.useState({start:"2025-08-20",end:"2025-12-28"}),[p,w]=aa("horizon_contract","GCG26");L.useEffect(()=>{(async()=>{let O;p==="BTC-SPOT"?O="BTC-SPOT":p.startsWith("BTC")?O="BTC":p.startsWith("GC")?O="GC":p.startsWith("NQ")?O="NQ":p.startsWith("ES")?O="ES":p.startsWith("CL")?O="CL":O="GC";try{await fetch(`${Kt}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:O})}),console.log(`Synced backend to ${p} (${O})`)}catch(ke){console.error("Failed to sync contract on load:",ke)}})()},[]);const[y,h]=L.useState({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),M=L.useRef(0),[k,G]=L.useState({contract:"GCG26",contract_name:"Gold Feb 2026",current_price:0,current_et_time:"--:--:--",current_et_date:""}),[Me,x]=L.useState(!1),[b,C]=L.useState([{role:"assistant",content:"Welcome to Horizon AI! I can help you analyze market structure, interpret TPO profiles, and provide trading insights based on live data."}]),[d,A]=L.useState(""),[m,R]=L.useState(!1),$=L.useRef(null);L.useEffect(()=>{var P;(P=$.current)==null||P.scrollIntoView({behavior:"smooth"})},[b]),L.useEffect(()=>{const P=["/live","/tpo","/zones","/market-overview","/historical-sessions?week=current"];console.log("Warming up caches..."),P.forEach(O=>{fetch(`${Kt}${O}`).then(()=>console.log(`Warmed up ${O}`)).catch(()=>{})})},[]),L.useEffect(()=>{const O={backtest:["/live"],live:["/tpo","/zones"],tpo:["/zones"],zones:["/live"],treemap:[],vsi:[],priceladder:["/tpo"]}[i]||[];i!=="treemap"&&O.push("/market-overview");const ke=setTimeout(()=>{O.forEach(Fe=>{fetch(`${Kt}${Fe}`).then(()=>console.log(`Preloaded ${Fe}`)).catch(()=>{})})},500);return()=>clearTimeout(ke)},[i]);const ae=async()=>{if(!d.trim()||m)return;const P=d.trim();A(""),C(qe=>[...qe,{role:"user",content:P}]),R(!0);let O={};try{const qe=await fetch(`${Kt}/live`);qe.ok&&(O=await qe.json())}catch{}let ke={};try{const qe=await fetch(`${Kt}/session-ohlc?week=current`);qe.ok&&(ke=await qe.json())}catch{}const Fe={currentPrice:k.current_price,contract:k.contract,contractName:k.contract_name,currentTime:k.current_et_time,liveSession:O.current_session||null,sessionHigh:O.session_high||null,sessionLow:O.session_low||null,dayHigh:O.day_high||null,dayLow:O.day_low||null,pdHigh:O.pd_high||null,pdLow:O.pd_low||null,pdPOC:O.pd_poc||null,cumulativeDelta:O.cumulative_delta||null,buyVolume:O.buy_volume||null,sellVolume:O.sell_volume||null,sessionData:ke.days?ke.days.slice(0,2):null};try{const qe=await fetch(`${Kt}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:P,context:Fe,provider:"claude"})});if(qe.ok){const Le=await qe.json();C(bt=>[...bt,{role:"assistant",content:Le.response,error:!1}])}else{const Le=await qe.json();C(bt=>[...bt,{role:"assistant",content:Le.error||"Sorry, I encountered an error. Please try again.",error:!0}])}}catch{C(Le=>[...Le,{role:"assistant",content:"Connection error. Please check your connection and try again.",error:!0}])}R(!1)};L.useEffect(()=>{let P=0,O=!1;const ke=3,Fe=1e3,qe=async()=>{if(!O){O=!0,console.log(" Auto-reconnecting to backend...");try{(await fetch(`${Kt}/reconnect`,{method:"POST"})).ok&&console.log(" Auto-reconnect triggered successfully")}catch{console.log(" Auto-reconnect request failed, backend may be restarting")}await new Promise(Q=>setTimeout(Q,2e3)),O=!1}},Le=async()=>{try{const Q=new AbortController,ue=setTimeout(()=>Q.abort(),3e3),he=await fetch(Kt,{signal:Q.signal});if(clearTimeout(ue),he.ok){const ye=await he.json(),ge=ye.data_source&&ye.data_source!=="DISCONNECTED"&&!ye.data_source.includes("RECONNECTING")&&ye.data_source!=="INITIALIZING",Ge=ye.data_source&&ye.data_source.includes("RECONNECTING");G({contract:ye.contract||"GCG26",contract_name:ye.contract_name||"Gold Feb 2026",current_price:ye.current_price||0,current_et_time:ye.current_et_time||"--:--:--",current_et_date:ye.current_et_date||"",available_contracts:ye.available_contracts||{},data_source:ye.data_source||"DISCONNECTED"}),ge?(P=0,h(vt=>({...vt,connected:!0,lastSuccessTime:new Date().toISOString(),reconnectAttempts:0,lastError:null}))):(Ge||(P++,P>=ke&&!O&&qe()),h(vt=>({...vt,connected:Ge?"reconnecting":!1,lastError:`Data source: ${ye.data_source||"DISCONNECTED"}`,reconnectAttempts:Ge?vt.reconnectAttempts:vt.reconnectAttempts+1})))}else throw new Error(`HTTP ${he.status}`)}catch(Q){P++;const ue=Q.name==="AbortError"?"Request timeout":Q.message||"Unknown error",he=ue.includes("ECONNRESET")||ue.includes("connection reset")||ue.includes("Failed to fetch")||ue.includes("NetworkError")||ue.includes("timeout");h(ye=>({...ye,connected:!1,lastError:he?`Network: ${ue}`:ue,errorCount:ye.errorCount+1,reconnectAttempts:ye.reconnectAttempts+1})),P>=ke&&!O&&qe()}};Le();let bt=setInterval(Le,Fe);const Oe=setInterval(()=>{P>0&&console.log(` Health check: ${P} consecutive failures`)},3e4);return()=>{clearInterval(bt),clearInterval(Oe)}},[M.current]);const q=async P=>{var ke,Fe;let O;P==="BTC-SPOT"?O="BTC-SPOT":P.startsWith("BTC")?O="BTC":P.startsWith("GC")?O="GC":P.startsWith("NQ")?O="NQ":P.startsWith("ES")?O="ES":P.startsWith("CL")?O="CL":O=((ke=Oo[P])==null?void 0:ke.asset)||"GC",w(P),G(qe=>({...qe,data_source:"SWITCHING...",current_price:0}));try{if((await fetch(`${Kt}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:O})})).ok){localStorage.removeItem("tpo_historic_cache"),console.log(`Switched to ${P} (${O})`);const Le=P==="BTC-SPOT"?"BTC-SPOT":((Fe=Oo[P])==null?void 0:Fe.symbol)||P;let bt=0;const Oe=20,Q=async()=>{var ue;try{const he=await fetch(Kt);if(he.ok){const ye=await he.json();if(ye.contract===Le||ye.asset_class===O||bt>=Oe){G({contract:ye.contract||P,contract_name:ye.contract_name||((ue=Oo[P])==null?void 0:ue.name)||P,current_price:ye.current_price||0,current_et_time:ye.current_et_time||"--:--:--",current_et_date:ye.current_et_date||"",available_contracts:ye.available_contracts||{},data_source:ye.data_source||"SWITCHING..."});return}}}catch{console.log("Polling for new contract data...")}bt++,bt<Oe&&setTimeout(Q,500)};setTimeout(Q,500)}}catch(qe){console.error("Failed to switch contract:",qe),G(Le=>({...Le,data_source:"ERROR"}))}},v=async()=>{h({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),M.current+=1,console.log("Connection reset triggered");try{const P=await fetch(`${Kt}/reconnect`,{method:"POST"});if(P.ok){const O=await P.json();console.log("Backend reconnect:",O.message)}}catch(P){console.error("Failed to trigger backend reconnect:",P)}},{trades:u,stats:I,source:_e}=bg(),E=L.useMemo(()=>u&&u.length>0?u:mg(),[u,s]);L.useEffect(()=>{if(u&&u.length>0){const P=u.map(O=>O.date).sort();c({start:P[0],end:P[P.length-1]})}},[u]);const oe=L.useMemo(()=>E.filter(P=>{var O,ke,Fe;return!(P.date<a.start||P.date>a.end||P.delta>s.deltaThreshold||P.pnl>0&&P.buyingImbalance<s.buyingImbalancePct||(O=s.filters)!=null&&O.grades&&!s.filters.grades[P.grade]||(ke=s.filters)!=null&&ke.tiers&&!s.filters.tiers[P.tier]||((Fe=s.filters)==null?void 0:Fe.minR)!==void 0&&P.r<s.filters.minR)}),[E,a,s.deltaThreshold,s.buyingImbalancePct,s.filters]),Xe=L.useMemo(()=>vg(oe,s),[oe,s]);new Date().toISOString();const de=P=>r(P),Be=()=>r(null);return n?e.jsx(Cf.Provider,{value:s,children:e.jsx(xg.Provider,{value:n,children:e.jsxs("div",{style:_.app,children:[e.jsx(_g,{activeTab:i,setActiveTab:o,onLogout:Be}),e.jsxs("main",{style:{..._.main,padding:t?"12px":"24px",paddingBottom:t?"85px":"80px"},children:[i==="backtest"&&e.jsx(Pg,{data:Xe,trades:oe,dateRange:a,setDateRange:c}),i==="live"&&e.jsx(Wg,{settings:s,onSettingsChange:l}),i==="tpo"&&e.jsx(Og,{selectedContract:p}),i==="zones"&&e.jsx(Mg,{}),i==="treemap"&&e.jsx(wg,{}),i==="vsi"&&e.jsx(Tg,{selectedContract:p}),i==="trades"&&e.jsx(Ng,{trades:E,dateRange:a}),i==="priceladder"&&e.jsx(kg,{selectedContract:p}),i==="settings"&&e.jsx(Ig,{settings:s,onSettingsChange:l,trades:oe,dateRange:a,connectionStatus:y,onResetConnection:v}),i==="redfolder"&&e.jsx(Rg,{})]}),e.jsxs("footer",{style:_.footer,children:[e.jsx("span",{children:"Project Horizon v2.0 | Underground Setup Strategy"}),e.jsxs("span",{children:[((S=Oo[p])==null?void 0:S.name)||"GC Futures"," | 2025 Market Regime"]})]}),Me&&e.jsxs("div",{style:{position:"fixed",bottom:t?70:100,right:t?10:24,left:t?10:"auto",width:t?"auto":380,height:t?"calc(100vh - 150px)":500,maxHeight:t?"70vh":500,background:"linear-gradient(180deg, rgba(12,12,18,0.98) 0%, rgba(8,8,14,1) 100%)",borderRadius:16,border:"1px solid rgba(0,255,136,0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(0,255,136,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:8,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"#000"},children:"H"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:14,color:"#fff"},children:"Horizon AI"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88"},children:"Trading Assistant"})]})]}),e.jsx("button",{onClick:()=>x(!1),style:{background:"transparent",border:"none",color:"#666",fontSize:20,cursor:"pointer",padding:4},children:""})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:16,display:"flex",flexDirection:"column",gap:12},children:[b.map((P,O)=>e.jsx("div",{style:{alignSelf:P.role==="user"?"flex-end":"flex-start",maxWidth:P.role==="user"?"85%":"95%",width:P.role==="user"?"auto":"95%"},children:e.jsx("div",{style:{padding:P.role==="assistant"?"14px 16px":"10px 14px",borderRadius:P.role==="user"?"14px 14px 4px 14px":"14px 14px 14px 4px",background:P.role==="user"?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.06)",border:P.role==="user"?"none":"1px solid rgba(255,255,255,0.1)",color:P.role==="user"?"#000":P.error?"#ff6b6b":"#e8e8e8",fontSize:13,lineHeight:1.6,fontWeight:P.role==="user"?500:400},children:P.role==="assistant"?e.jsx("div",{dangerouslySetInnerHTML:{__html:P.content.replace(/\*\*(.+?)\*\*/g,'<strong style="color:#00ff88">$1</strong>').replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,'<code style="background:rgba(0,255,136,0.15);padding:2px 6px;border-radius:4px;font-family:monospace;font-size:12px">$1</code>').replace(/\n- /g,"<br/> ").replace(/\n\d+\. /g,ke=>"<br/>"+ke.trim()+" ").replace(/\n\n/g,'</p><p style="margin:8px 0">').replace(/\n/g,"<br/>")}}):P.content})},O)),m&&e.jsx("div",{style:{alignSelf:"flex-start",width:"95%"},children:e.jsxs("div",{style:{padding:"14px 16px",borderRadius:"14px 14px 14px 4px",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",fontSize:13,display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite"}}),"Analyzing..."]})}),e.jsx("div",{ref:$})]}),e.jsxs("div",{style:{padding:12,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:d,onChange:P=>A(P.target.value),onKeyPress:P=>P.key==="Enter"&&ae(),placeholder:"Ask about trading...",style:{flex:1,padding:"10px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:13,outline:"none"}}),e.jsx("button",{onClick:ae,disabled:m||!d.trim(),style:{padding:"10px 16px",borderRadius:10,border:"none",background:d.trim()&&!m?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.1)",color:d.trim()&&!m?"#000":"#666",fontWeight:600,fontSize:13,cursor:d.trim()&&!m?"pointer":"not-allowed"},children:"Send"})]})]}),e.jsx("button",{onClick:()=>x(!Me),style:{position:"fixed",bottom:t?75:24,right:t?12:24,width:Me?48:"auto",height:t?40:48,padding:Me?0:t?"0 14px":"0 20px",borderRadius:Me?"50%":24,border:"none",background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",color:"#000",fontWeight:700,fontSize:t?12:14,cursor:"pointer",boxShadow:"0 4px 20px rgba(0,255,136,0.4)",zIndex:1001,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},children:Me?"":e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:18},children:"H"}),e.jsx("span",{children:"Horizon"})]})}),e.jsx(Dg,{globalData:k,selectedContract:p,onContractChange:q,contracts:Oo,isMobile:t}),e.jsx(pg,{})]})})}):e.jsx(Sg,{onLogin:de})},_={app:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",color:"#e0e0e0",fontFamily:"'JetBrains Mono', 'Fira Code', monospace",overflowX:"hidden",width:"100%",maxWidth:"100vw"},main:{padding:"24px",paddingBottom:"80px",maxWidth:"1600px",margin:"0 auto",overflowX:"hidden"},footer:{display:"flex",justifyContent:"space-between",padding:"16px 24px",paddingBottom:"70px",borderTop:"1px solid rgba(255,255,255,0.05)",fontSize:"12px",color:"#666"},loginContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",padding:"20px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginCard:{width:"100%",maxWidth:"420px",background:"rgba(20,20,28,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:"48px 40px",boxShadow:"0 25px 50px rgba(0,0,0,0.5)",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginHeader:{textAlign:"center",marginBottom:"40px"},logo:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"16px"},logoIcon:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},logoText:{fontSize:"22px",fontWeight:"700",color:"#fff",letterSpacing:"3px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, sans-serif"},loginSubtitle:{color:"#888",fontSize:"13px",fontFamily:"'Inter', sans-serif",letterSpacing:"0.5px"},loginForm:{display:"flex",flexDirection:"column",gap:"20px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},inputLabel:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"1px",fontFamily:"'Inter', sans-serif"},input:{padding:"14px 16px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",fontSize:"15px",outline:"none",transition:"border-color 0.2s",fontFamily:"'Inter', sans-serif"},error:{padding:"12px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:"8px",color:"#ff4466",fontSize:"13px",fontFamily:"'Inter', sans-serif"},loginButton:{padding:"16px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:"8px",color:"#000",fontSize:"13px",fontWeight:"700",cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s",fontFamily:"'Inter', sans-serif"},loginFooter:{textAlign:"center",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,0.05)"},footerText:{color:"#555",fontSize:"11px",margin:"4px 0",fontFamily:"'Inter', sans-serif"},nav:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)"},navBrand:{display:"flex",alignItems:"center",gap:"10px"},navTabs:{display:"flex",gap:"8px"},settingsPanel:{maxWidth:"1200px",margin:"0 auto"},settingsHeader:{marginBottom:"32px"},settingsSubtitle:{color:"#666",fontSize:"14px",marginTop:"8px"},settingsGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},settingsCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px"},settingsCardTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",marginBottom:"14px"},sliderGroup:{marginBottom:"16px"},sliderHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},sliderLabel:{fontSize:"11px",color:"#aaa"},sliderValue:{fontSize:"13px",fontWeight:"700",color:"#00ff88"},slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer",WebkitAppearance:"none"},sliderTicks:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#555",marginTop:"4px"},allocationNote:{fontSize:"12px",color:"#888",marginBottom:"16px"},tierVisual:{display:"flex",height:"8px",borderRadius:"4px",overflow:"hidden",marginTop:"16px"},tierBar:{height:"100%",transition:"width 0.3s"},tierLegend:{display:"flex",justifyContent:"space-around",fontSize:"11px",color:"#888",marginTop:"12px"},settingsActions:{display:"flex",gap:"16px",justifyContent:"center",marginBottom:"32px"},actionButton:{padding:"14px 32px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",border:"none"},resetButton:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"#888"},applyButton:{background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000"},settingsInfo:{padding:"24px",background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:"12px"},infoTitle:{fontSize:"14px",color:"#00aaff",marginBottom:"16px"},infoList:{listStyle:"none",padding:0,margin:0,fontSize:"13px",color:"#888",lineHeight:"1.8"},statsContainer:{marginBottom:"32px"},sectionTitle:{fontSize:"16px",fontWeight:"600",color:"#fff",marginBottom:"20px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px",marginBottom:"24px"},statsCard:{padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},statsTitle:{fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},statsValue:{fontSize:"24px",fontWeight:"700",color:"#fff"},statsSubtitle:{fontSize:"12px",color:"#666",marginTop:"4px"},statsTrend:{fontSize:"12px",marginTop:"8px",fontWeight:"600"},breakdownGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px"},breakdownCard:{padding:"20px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px"},breakdownTitle:{fontSize:"12px",color:"#666",textTransform:"uppercase",marginBottom:"16px"},breakdownRow:{display:"flex",alignItems:"center",gap:"12px",padding:"10px 0",borderBottom:"1px solid rgba(255,255,255,0.03)"},breakdownLabel:{flex:"0 0 100px",fontSize:"13px",color:"#888"},breakdownBarContainer:{flex:1,height:"6px",background:"rgba(255,255,255,0.05)",borderRadius:"3px",overflow:"hidden"},breakdownBar:{height:"100%",borderRadius:"3px",transition:"width 0.3s"},breakdownCount:{flex:"0 0 40px",textAlign:"right",fontSize:"13px",color:"#fff"},gradeStats:{flex:1,display:"flex",justifyContent:"flex-end",gap:"16px",fontSize:"13px"},drillDownContainer:{marginBottom:"32px"},yearGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px"},yearCard:{padding:"20px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s"},yearLabel:{fontSize:"24px",fontWeight:"700",color:"#fff",marginBottom:"8px"},yearPnl:{fontSize:"20px",fontWeight:"600",marginBottom:"12px"},yearStats:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#888"},weekContainer:{marginBottom:"32px"},weekGrid:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"16px"},weekBar:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"40px"},weekBarContainer:{width:"32px",height:"100px",background:"rgba(255,255,255,0.03)",borderRadius:"4px",display:"flex",alignItems:"flex-end",overflow:"hidden"},weekBarFill:{width:"100%",borderRadius:"4px 4px 0 0",transition:"height 0.3s"},weekLabel:{fontSize:"10px",color:"#666",marginTop:"8px"},weekPnl:{fontSize:"10px",fontWeight:"600",marginTop:"4px"},liveDashboard:{maxWidth:"1000px",margin:"0 auto"},levelCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px",textAlign:"center"},levelLabel:{fontSize:"11px",color:"#666",textTransform:"uppercase",marginBottom:"8px"},levelValue:{fontSize:"18px",fontWeight:"600",color:"#fff"},signalMatrix:{padding:"24px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",marginBottom:"24px"},signalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},signalTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",margin:0},signalCount:{fontSize:"14px",fontWeight:"600"},signalGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px"},signalItem:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",borderRadius:"8px",border:"1px solid"},signalIndicator:{width:"10px",height:"10px",borderRadius:"50%"},signalName:{fontSize:"12px",color:"#ddd"},criticalBadge:{marginLeft:"auto",fontSize:"10px",fontWeight:"700",color:"#ffaa00",background:"rgba(255,170,0,0.2)",padding:"2px 6px",borderRadius:"4px"},setupStatus:{display:"flex",alignItems:"center",gap:"12px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.05)"},phaseLabel:{fontSize:"12px",color:"#666"},phaseValue:{fontSize:"14px",fontWeight:"700"},dashboardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px",flexWrap:"wrap",gap:"16px"},dashboardTitle:{fontSize:"20px",fontWeight:"700",color:"#fff",margin:0},dateFilter:{display:"flex",alignItems:"center",gap:"12px"},dateInput:{padding:"10px 14px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",fontSize:"13px",cursor:"pointer"},dateSeparator:{color:"#666",fontSize:"13px"},filterButton:{padding:"10px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#888",fontSize:"12px",cursor:"pointer",transition:"all 0.2s"},filterInfo:{fontSize:"13px",color:"#666",marginBottom:"24px",padding:"12px 16px",background:"rgba(255,255,255,0.02)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.05)"},tradeLog:{maxWidth:"1200px",margin:"0 auto"},tradeLogInfo:{fontSize:"13px",color:"#666",marginTop:"8px",marginBottom:"16px"},tradeTable:{width:"100%",borderCollapse:"collapse",marginTop:"16px"},th:{padding:"14px 16px",textAlign:"left",fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",borderBottom:"1px solid rgba(255,255,255,0.1)"},tr:{transition:"background 0.2s"},td:{padding:"14px 16px",fontSize:"14px",borderBottom:"1px solid rgba(255,255,255,0.03)"},gradeBadge:{display:"inline-block",padding:"4px 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"700",color:"#000"},backtestDashboard:{maxWidth:"1400px",margin:"0 auto"}},_f=document.createElement("style");_f.textContent=`
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  input:focus {
    border-color: #00ff88 !important;
  }
  button:hover:not(:disabled) {
    transform: translateY(-1px);
  }
  tr:hover {
    background: rgba(255,255,255,0.02);
  }
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255,255,255,0.1);
    height: 8px;
    border-radius: 4px;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    cursor: pointer;
  }
`;document.head.appendChild(_f);da.createRoot(document.getElementById("root")).render(e.jsx(Ar.StrictMode,{children:e.jsx(Hg,{})}));
