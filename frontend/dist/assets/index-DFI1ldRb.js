(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function Ep(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p0={exports:{}},vl={},h0={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xs=Symbol.for("react.element"),Lp=Symbol.for("react.portal"),Ap=Symbol.for("react.fragment"),Fp=Symbol.for("react.strict_mode"),Wp=Symbol.for("react.profiler"),Mp=Symbol.for("react.provider"),Op=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Dp=Symbol.for("react.memo"),Hp=Symbol.for("react.lazy"),tc=Symbol.iterator;function $p(t){return t===null||typeof t!="object"?null:(t=tc&&t[tc]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g0=Object.assign,x0={};function Tr(t,n,i){this.props=t,this.context=n,this.refs=x0,this.updater=i||u0}Tr.prototype.isReactComponent={};Tr.prototype.setState=function(t,n){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,n,"setState")};Tr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y0(){}y0.prototype=Tr.prototype;function rd(t,n,i){this.props=t,this.context=n,this.refs=x0,this.updater=i||u0}var sd=rd.prototype=new y0;sd.constructor=rd;g0(sd,Tr.prototype);sd.isPureReactComponent=!0;var nc=Array.isArray,m0=Object.prototype.hasOwnProperty,ld={current:null},b0={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,n,i){var o,r={},s=null,l=null;if(n!=null)for(o in n.ref!==void 0&&(l=n.ref),n.key!==void 0&&(s=""+n.key),n)m0.call(n,o)&&!b0.hasOwnProperty(o)&&(r[o]=n[o]);var a=arguments.length-2;if(a===1)r.children=i;else if(1<a){for(var d=Array(a),p=0;p<a;p++)d[p]=arguments[p+2];r.children=d}if(t&&t.defaultProps)for(o in a=t.defaultProps,a)r[o]===void 0&&(r[o]=a[o]);return{$$typeof:xs,type:t,key:s,ref:l,props:r,_owner:ld.current}}function Vp(t,n){return{$$typeof:xs,type:t.type,key:n,ref:t.ref,props:t.props,_owner:t._owner}}function ad(t){return typeof t=="object"&&t!==null&&t.$$typeof===xs}function Up(t){var n={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return n[i]})}var ic=/\/+/g;function Ml(t,n){return typeof t=="object"&&t!==null&&t.key!=null?Up(""+t.key):n.toString(36)}function Os(t,n,i,o,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case xs:case Lp:l=!0}}if(l)return l=t,r=r(l),t=o===""?"."+Ml(l,0):o,nc(r)?(i="",t!=null&&(i=t.replace(ic,"$&/")+"/"),Os(r,n,i,"",function(p){return p})):r!=null&&(ad(r)&&(r=Vp(r,i+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(ic,"$&/")+"/")+t)),n.push(r)),1;if(l=0,o=o===""?".":o+":",nc(t))for(var a=0;a<t.length;a++){s=t[a];var d=o+Ml(s,a);l+=Os(s,n,i,d,r)}else if(d=$p(t),typeof d=="function")for(t=d.call(t),a=0;!(s=t.next()).done;)s=s.value,d=o+Ml(s,a++),l+=Os(s,n,i,d,r);else if(s==="object")throw n=String(t),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function js(t,n,i){if(t==null)return t;var o=[],r=0;return Os(t,o,"","",function(s){return n.call(i,s,r++)}),o}function Gp(t){if(t._status===-1){var n=t._result;n=n(),n.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=n)}if(t._status===1)return t._result.default;throw t._result}var Jn={current:null},Ps={transition:null},Yp={ReactCurrentDispatcher:Jn,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:ld};function j0(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:js,forEach:function(t,n,i){js(t,function(){n.apply(this,arguments)},i)},count:function(t){var n=0;return js(t,function(){n++}),n},toArray:function(t){return js(t,function(n){return n})||[]},only:function(t){if(!ad(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Dt.Component=Tr;Dt.Fragment=Ap;Dt.Profiler=Wp;Dt.PureComponent=rd;Dt.StrictMode=Fp;Dt.Suspense=Np;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yp;Dt.act=j0;Dt.cloneElement=function(t,n,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=g0({},t.props),r=t.key,s=t.ref,l=t._owner;if(n!=null){if(n.ref!==void 0&&(s=n.ref,l=ld.current),n.key!==void 0&&(r=""+n.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(d in n)m0.call(n,d)&&!b0.hasOwnProperty(d)&&(o[d]=n[d]===void 0&&a!==void 0?a[d]:n[d])}var d=arguments.length-2;if(d===1)o.children=i;else if(1<d){a=Array(d);for(var p=0;p<d;p++)a[p]=arguments[p+2];o.children=a}return{$$typeof:xs,type:t.type,key:r,ref:s,props:o,_owner:l}};Dt.createContext=function(t){return t={$$typeof:Op,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mp,_context:t},t.Consumer=t};Dt.createElement=v0;Dt.createFactory=function(t){var n=v0.bind(null,t);return n.type=t,n};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(t){return{$$typeof:Pp,render:t}};Dt.isValidElement=ad;Dt.lazy=function(t){return{$$typeof:Hp,_payload:{_status:-1,_result:t},_init:Gp}};Dt.memo=function(t,n){return{$$typeof:Dp,type:t,compare:n===void 0?null:n}};Dt.startTransition=function(t){var n=Ps.transition;Ps.transition={};try{t()}finally{Ps.transition=n}};Dt.unstable_act=j0;Dt.useCallback=function(t,n){return Jn.current.useCallback(t,n)};Dt.useContext=function(t){return Jn.current.useContext(t)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(t){return Jn.current.useDeferredValue(t)};Dt.useEffect=function(t,n){return Jn.current.useEffect(t,n)};Dt.useId=function(){return Jn.current.useId()};Dt.useImperativeHandle=function(t,n,i){return Jn.current.useImperativeHandle(t,n,i)};Dt.useInsertionEffect=function(t,n){return Jn.current.useInsertionEffect(t,n)};Dt.useLayoutEffect=function(t,n){return Jn.current.useLayoutEffect(t,n)};Dt.useMemo=function(t,n){return Jn.current.useMemo(t,n)};Dt.useReducer=function(t,n,i){return Jn.current.useReducer(t,n,i)};Dt.useRef=function(t){return Jn.current.useRef(t)};Dt.useState=function(t){return Jn.current.useState(t)};Dt.useSyncExternalStore=function(t,n,i){return Jn.current.useSyncExternalStore(t,n,i)};Dt.useTransition=function(){return Jn.current.useTransition()};Dt.version="18.3.1";h0.exports=Dt;var A=h0.exports;const Li=Ep(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=A,Kp=Symbol.for("react.element"),Jp=Symbol.for("react.fragment"),Qp=Object.prototype.hasOwnProperty,Zp=Xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qp={key:!0,ref:!0,__self:!0,__source:!0};function S0(t,n,i){var o,r={},s=null,l=null;i!==void 0&&(s=""+i),n.key!==void 0&&(s=""+n.key),n.ref!==void 0&&(l=n.ref);for(o in n)Qp.call(n,o)&&!qp.hasOwnProperty(o)&&(r[o]=n[o]);if(t&&t.defaultProps)for(o in n=t.defaultProps,n)r[o]===void 0&&(r[o]=n[o]);return{$$typeof:Kp,type:t,key:s,ref:l,props:r,_owner:Zp.current}}vl.Fragment=Jp;vl.jsx=S0;vl.jsxs=S0;p0.exports=vl;var e=p0.exports,fa={},w0={exports:{}},xi={},k0={exports:{}},C0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function n(te,_e){var v=te.length;te.push(_e);e:for(;0<v;){var he=v-1>>>1,le=te[he];if(0<r(le,_e))te[he]=_e,te[v]=le,v=he;else break e}}function i(te){return te.length===0?null:te[0]}function o(te){if(te.length===0)return null;var _e=te[0],v=te.pop();if(v!==_e){te[0]=v;e:for(var he=0,le=te.length,Ne=le>>>1;he<Ne;){var ot=2*(he+1)-1,_t=te[ot],Ge=ot+1,ft=te[Ge];if(0>r(_t,v))Ge<le&&0>r(ft,_t)?(te[he]=ft,te[Ge]=v,he=Ge):(te[he]=_t,te[ot]=v,he=ot);else if(Ge<le&&0>r(ft,v))te[he]=ft,te[Ge]=v,he=Ge;else break e}}return _e}function r(te,_e){var v=te.sortIndex-_e.sortIndex;return v!==0?v:te.id-_e.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var d=[],p=[],C=1,x=null,u=3,D=!1,O=!1,Q=!1,De=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(te){for(var _e=i(p);_e!==null;){if(_e.callback===null)o(p);else if(_e.startTime<=te)o(p),_e.sortIndex=_e.expirationTime,n(d,_e);else break;_e=i(p)}}function c(te){if(Q=!1,R(te),!O)if(i(d)!==null)O=!0,Fe(N);else{var _e=i(p);_e!==null&&He(c,_e.startTime-te)}}function N(te,_e){O=!1,Q&&(Q=!1,f(F),F=-1),D=!0;var v=u;try{for(R(_e),x=i(d);x!==null&&(!(x.expirationTime>_e)||te&&!m());){var he=x.callback;if(typeof he=="function"){x.callback=null,u=x.priorityLevel;var le=he(x.expirationTime<=_e);_e=t.unstable_now(),typeof le=="function"?x.callback=le:x===i(d)&&o(d),R(_e)}else o(d);x=i(d)}if(x!==null)var Ne=!0;else{var ot=i(p);ot!==null&&He(c,ot.startTime-_e),Ne=!1}return Ne}finally{x=null,u=v,D=!1}}var S=!1,B=null,F=-1,pe=5,U=-1;function m(){return!(t.unstable_now()-U<pe)}function h(){if(B!==null){var te=t.unstable_now();U=te;var _e=!0;try{_e=B(!0,te)}finally{_e?w():(S=!1,B=null)}}else S=!1}var w;if(typeof y=="function")w=function(){y(h)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,I=Me.port2;Me.port1.onmessage=h,w=function(){I.postMessage(null)}}else w=function(){De(h,0)};function Fe(te){B=te,S||(S=!0,w())}function He(te,_e){F=De(function(){te(t.unstable_now())},_e)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){O||D||(O=!0,Fe(N))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return i(d)},t.unstable_next=function(te){switch(u){case 1:case 2:case 3:var _e=3;break;default:_e=u}var v=u;u=_e;try{return te()}finally{u=v}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,_e){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var v=u;u=te;try{return _e()}finally{u=v}},t.unstable_scheduleCallback=function(te,_e,v){var he=t.unstable_now();switch(typeof v=="object"&&v!==null?(v=v.delay,v=typeof v=="number"&&0<v?he+v:he):v=he,te){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=v+le,te={id:C++,callback:_e,priorityLevel:te,startTime:v,expirationTime:le,sortIndex:-1},v>he?(te.sortIndex=v,n(p,te),i(d)===null&&te===i(p)&&(Q?(f(F),F=-1):Q=!0,He(c,v-he))):(te.sortIndex=le,n(d,te),O||D||(O=!0,Fe(N))),te},t.unstable_shouldYield=m,t.unstable_wrapCallback=function(te){var _e=u;return function(){var v=u;u=_e;try{return te.apply(this,arguments)}finally{u=v}}}})(C0);k0.exports=C0;var eh=k0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th=A,gi=eh;function We(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _0=new Set,qr={};function qo(t,n){vr(t,n),vr(t+"Capture",n)}function vr(t,n){for(qr[t]=n,t=0;t<n.length;t++)_0.add(n[t])}var ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=Object.prototype.hasOwnProperty,nh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oc={},rc={};function ih(t){return pa.call(rc,t)?!0:pa.call(oc,t)?!1:nh.test(t)?rc[t]=!0:(oc[t]=!0,!1)}function oh(t,n,i,o){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rh(t,n,i,o){if(n===null||typeof n>"u"||oh(t,n,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Qn(t,n,i,o,r,s,l){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=s,this.removeEmptyString=l}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new Qn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];Wn[n]=new Qn(n,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new Qn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new Qn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new Qn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new Qn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new Qn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new Qn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new Qn(t,5,!1,t.toLowerCase(),null,!1,!1)});var dd=/[\-:]([a-z])/g;function cd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(dd,cd);Wn[n]=new Qn(n,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(dd,cd);Wn[n]=new Qn(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(dd,cd);Wn[n]=new Qn(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new Qn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new Qn(t,1,!1,t.toLowerCase(),null,!0,!0)});function fd(t,n,i,o){var r=Wn.hasOwnProperty(n)?Wn[n]:null;(r!==null?r.type!==0:o||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(rh(n,i,r,o)&&(i=null),o||r===null?ih(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):r.mustUseProperty?t[r.propertyName]=i===null?r.type===3?!1:"":i:(n=r.attributeName,o=r.attributeNamespace,i===null?t.removeAttribute(n):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,o?t.setAttributeNS(o,n,i):t.setAttribute(n,i))))}var co=th.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ss=Symbol.for("react.element"),nr=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),pd=Symbol.for("react.strict_mode"),ha=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),R0=Symbol.for("react.context"),hd=Symbol.for("react.forward_ref"),ua=Symbol.for("react.suspense"),ga=Symbol.for("react.suspense_list"),ud=Symbol.for("react.memo"),bo=Symbol.for("react.lazy"),z0=Symbol.for("react.offscreen"),sc=Symbol.iterator;function Ir(t){return t===null||typeof t!="object"?null:(t=sc&&t[sc]||t["@@iterator"],typeof t=="function"?t:null)}var hn=Object.assign,Ol;function Nr(t){if(Ol===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Ol=n&&n[1]||""}return`
`+Ol+t}var Pl=!1;function Nl(t,n){if(!t||Pl)return"";Pl=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(p){var o=p}Reflect.construct(t,[],n)}else{try{n.call()}catch(p){o=p}t.call(n.prototype)}else{try{throw Error()}catch(p){o=p}t()}}catch(p){if(p&&o&&typeof p.stack=="string"){for(var r=p.stack.split(`
`),s=o.stack.split(`
`),l=r.length-1,a=s.length-1;1<=l&&0<=a&&r[l]!==s[a];)a--;for(;1<=l&&0<=a;l--,a--)if(r[l]!==s[a]){if(l!==1||a!==1)do if(l--,a--,0>a||r[l]!==s[a]){var d=`
`+r[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=a);break}}}finally{Pl=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Nr(t):""}function sh(t){switch(t.tag){case 5:return Nr(t.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 2:case 15:return t=Nl(t.type,!1),t;case 11:return t=Nl(t.type.render,!1),t;case 1:return t=Nl(t.type,!0),t;default:return""}}function xa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ir:return"Fragment";case nr:return"Portal";case ha:return"Profiler";case pd:return"StrictMode";case ua:return"Suspense";case ga:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R0:return(t.displayName||"Context")+".Consumer";case T0:return(t._context.displayName||"Context")+".Provider";case hd:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ud:return n=t.displayName||null,n!==null?n:xa(t.type)||"Memo";case bo:n=t._payload,t=t._init;try{return xa(t(n))}catch{}}return null}function lh(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xa(n);case 8:return n===pd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function B0(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ah(t){var n=B0(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return r.call(this)},set:function(l){o=""+l,s.call(this,l)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(l){o=""+l},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ws(t){t._valueTracker||(t._valueTracker=ah(t))}function I0(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return t&&(o=B0(t)?t.checked?"true":"false":t.value),t=o,t!==i?(n.setValue(t),!0):!1}function Js(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ya(t,n){var i=n.checked;return hn({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function lc(t,n){var i=n.defaultValue==null?"":n.defaultValue,o=n.checked!=null?n.checked:n.defaultChecked;i=Lo(n.value!=null?n.value:i),t._wrapperState={initialChecked:o,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function E0(t,n){n=n.checked,n!=null&&fd(t,"checked",n,!1)}function ma(t,n){E0(t,n);var i=Lo(n.value),o=n.type;if(i!=null)o==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?ba(t,n.type,i):n.hasOwnProperty("defaultValue")&&ba(t,n.type,Lo(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function ac(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var o=n.type;if(!(o!=="submit"&&o!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function ba(t,n,i){(n!=="number"||Js(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Dr=Array.isArray;function ur(t,n,i,o){if(t=t.options,n){n={};for(var r=0;r<i.length;r++)n["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=n.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&o&&(t[i].defaultSelected=!0)}else{for(i=""+Lo(i),n=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}n!==null||t[r].disabled||(n=t[r])}n!==null&&(n.selected=!0)}}function va(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(We(91));return hn({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dc(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(We(92));if(Dr(i)){if(1<i.length)throw Error(We(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:Lo(i)}}function L0(t,n){var i=Lo(n.value),o=Lo(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),o!=null&&(t.defaultValue=""+o)}function cc(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function A0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ja(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?A0(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ks,F0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,o,r){MSApp.execUnsafeLocalFunction(function(){return t(n,i,o,r)})}:t}(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(ks=ks||document.createElement("div"),ks.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ks.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function es(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dh=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(t){dh.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Vr[n]=Vr[t]})});function W0(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Vr.hasOwnProperty(t)&&Vr[t]?(""+n).trim():n+"px"}function M0(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var o=i.indexOf("--")===0,r=W0(i,n[i],o);i==="float"&&(i="cssFloat"),o?t.setProperty(i,r):t[i]=r}}var ch=hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sa(t,n){if(n){if(ch[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(We(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(We(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(We(61))}if(n.style!=null&&typeof n.style!="object")throw Error(We(62))}}function wa(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ka=null;function gd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ca=null,gr=null,xr=null;function fc(t){if(t=bs(t)){if(typeof Ca!="function")throw Error(We(280));var n=t.stateNode;n&&(n=Cl(n),Ca(t.stateNode,t.type,n))}}function O0(t){gr?xr?xr.push(t):xr=[t]:gr=t}function P0(){if(gr){var t=gr,n=xr;if(xr=gr=null,fc(t),n)for(t=0;t<n.length;t++)fc(n[t])}}function N0(t,n){return t(n)}function D0(){}var Dl=!1;function H0(t,n,i){if(Dl)return t(n,i);Dl=!0;try{return N0(t,n,i)}finally{Dl=!1,(gr!==null||xr!==null)&&(D0(),P0())}}function ts(t,n){var i=t.stateNode;if(i===null)return null;var o=Cl(i);if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(We(231,n,typeof i));return i}var _a=!1;if(ro)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){_a=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{_a=!1}function fh(t,n,i,o,r,s,l,a,d){var p=Array.prototype.slice.call(arguments,3);try{n.apply(i,p)}catch(C){this.onError(C)}}var Ur=!1,Qs=null,Zs=!1,Ta=null,ph={onError:function(t){Ur=!0,Qs=t}};function hh(t,n,i,o,r,s,l,a,d){Ur=!1,Qs=null,fh.apply(ph,arguments)}function uh(t,n,i,o,r,s,l,a,d){if(hh.apply(this,arguments),Ur){if(Ur){var p=Qs;Ur=!1,Qs=null}else throw Error(We(198));Zs||(Zs=!0,Ta=p)}}function er(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,n.flags&4098&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function $0(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function pc(t){if(er(t)!==t)throw Error(We(188))}function gh(t){var n=t.alternate;if(!n){if(n=er(t),n===null)throw Error(We(188));return n!==t?null:t}for(var i=t,o=n;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(o=r.return,o!==null){i=o;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return pc(r),t;if(s===o)return pc(r),n;s=s.sibling}throw Error(We(188))}if(i.return!==o.return)i=r,o=s;else{for(var l=!1,a=r.child;a;){if(a===i){l=!0,i=r,o=s;break}if(a===o){l=!0,o=r,i=s;break}a=a.sibling}if(!l){for(a=s.child;a;){if(a===i){l=!0,i=s,o=r;break}if(a===o){l=!0,o=s,i=r;break}a=a.sibling}if(!l)throw Error(We(189))}}if(i.alternate!==o)throw Error(We(190))}if(i.tag!==3)throw Error(We(188));return i.stateNode.current===i?t:n}function V0(t){return t=gh(t),t!==null?U0(t):null}function U0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=U0(t);if(n!==null)return n;t=t.sibling}return null}var G0=gi.unstable_scheduleCallback,hc=gi.unstable_cancelCallback,xh=gi.unstable_shouldYield,yh=gi.unstable_requestPaint,jn=gi.unstable_now,mh=gi.unstable_getCurrentPriorityLevel,xd=gi.unstable_ImmediatePriority,Y0=gi.unstable_UserBlockingPriority,qs=gi.unstable_NormalPriority,bh=gi.unstable_LowPriority,X0=gi.unstable_IdlePriority,jl=null,Xi=null;function vh(t){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(jl,t,void 0,(t.current.flags&128)===128)}catch{}}var Mi=Math.clz32?Math.clz32:wh,jh=Math.log,Sh=Math.LN2;function wh(t){return t>>>=0,t===0?32:31-(jh(t)/Sh|0)|0}var Cs=64,_s=4194304;function Hr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function el(t,n){var i=t.pendingLanes;if(i===0)return 0;var o=0,r=t.suspendedLanes,s=t.pingedLanes,l=i&268435455;if(l!==0){var a=l&~r;a!==0?o=Hr(a):(s&=l,s!==0&&(o=Hr(s)))}else l=i&~r,l!==0?o=Hr(l):s!==0&&(o=Hr(s));if(o===0)return 0;if(n!==0&&n!==o&&!(n&r)&&(r=o&-o,s=n&-n,r>=s||r===16&&(s&4194240)!==0))return n;if(o&4&&(o|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=o;0<n;)i=31-Mi(n),r=1<<i,o|=t[i],n&=~r;return o}function kh(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ch(t,n){for(var i=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var l=31-Mi(s),a=1<<l,d=r[l];d===-1?(!(a&i)||a&o)&&(r[l]=kh(a,n)):d<=n&&(t.expiredLanes|=a),s&=~a}}function Ra(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function K0(){var t=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),t}function Hl(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function ys(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Mi(n),t[n]=i}function _h(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<i;){var r=31-Mi(i),s=1<<r;n[r]=0,o[r]=-1,t[r]=-1,i&=~s}}function yd(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var o=31-Mi(i),r=1<<o;r&n|t[o]&n&&(t[o]|=n),i&=~r}}var tn=0;function J0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Q0,md,Z0,q0,ef,za=!1,Ts=[],Co=null,_o=null,To=null,ns=new Map,is=new Map,jo=[],Th="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uc(t,n){switch(t){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":ns.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":is.delete(n.pointerId)}}function Lr(t,n,i,o,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:s,targetContainers:[r]},n!==null&&(n=bs(n),n!==null&&md(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,r!==null&&n.indexOf(r)===-1&&n.push(r),t)}function Rh(t,n,i,o,r){switch(n){case"focusin":return Co=Lr(Co,t,n,i,o,r),!0;case"dragenter":return _o=Lr(_o,t,n,i,o,r),!0;case"mouseover":return To=Lr(To,t,n,i,o,r),!0;case"pointerover":var s=r.pointerId;return ns.set(s,Lr(ns.get(s)||null,t,n,i,o,r)),!0;case"gotpointercapture":return s=r.pointerId,is.set(s,Lr(is.get(s)||null,t,n,i,o,r)),!0}return!1}function tf(t){var n=$o(t.target);if(n!==null){var i=er(n);if(i!==null){if(n=i.tag,n===13){if(n=$0(i),n!==null){t.blockedOn=n,ef(t.priority,function(){Z0(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ns(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=Ba(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);ka=o,i.target.dispatchEvent(o),ka=null}else return n=bs(i),n!==null&&md(n),t.blockedOn=i,!1;n.shift()}return!0}function gc(t,n,i){Ns(t)&&i.delete(n)}function zh(){za=!1,Co!==null&&Ns(Co)&&(Co=null),_o!==null&&Ns(_o)&&(_o=null),To!==null&&Ns(To)&&(To=null),ns.forEach(gc),is.forEach(gc)}function Ar(t,n){t.blockedOn===n&&(t.blockedOn=null,za||(za=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,zh)))}function os(t){function n(r){return Ar(r,t)}if(0<Ts.length){Ar(Ts[0],t);for(var i=1;i<Ts.length;i++){var o=Ts[i];o.blockedOn===t&&(o.blockedOn=null)}}for(Co!==null&&Ar(Co,t),_o!==null&&Ar(_o,t),To!==null&&Ar(To,t),ns.forEach(n),is.forEach(n),i=0;i<jo.length;i++)o=jo[i],o.blockedOn===t&&(o.blockedOn=null);for(;0<jo.length&&(i=jo[0],i.blockedOn===null);)tf(i),i.blockedOn===null&&jo.shift()}var yr=co.ReactCurrentBatchConfig,tl=!0;function Bh(t,n,i,o){var r=tn,s=yr.transition;yr.transition=null;try{tn=1,bd(t,n,i,o)}finally{tn=r,yr.transition=s}}function Ih(t,n,i,o){var r=tn,s=yr.transition;yr.transition=null;try{tn=4,bd(t,n,i,o)}finally{tn=r,yr.transition=s}}function bd(t,n,i,o){if(tl){var r=Ba(t,n,i,o);if(r===null)Zl(t,n,o,nl,i),uc(t,o);else if(Rh(r,t,n,i,o))o.stopPropagation();else if(uc(t,o),n&4&&-1<Th.indexOf(t)){for(;r!==null;){var s=bs(r);if(s!==null&&Q0(s),s=Ba(t,n,i,o),s===null&&Zl(t,n,o,nl,i),s===r)break;r=s}r!==null&&o.stopPropagation()}else Zl(t,n,o,null,i)}}var nl=null;function Ba(t,n,i,o){if(nl=null,t=gd(o),t=$o(t),t!==null)if(n=er(t),n===null)t=null;else if(i=n.tag,i===13){if(t=$0(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return nl=t,null}function nf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mh()){case xd:return 1;case Y0:return 4;case qs:case bh:return 16;case X0:return 536870912;default:return 16}default:return 16}}var wo=null,vd=null,Ds=null;function of(){if(Ds)return Ds;var t,n=vd,i=n.length,o,r="value"in wo?wo.value:wo.textContent,s=r.length;for(t=0;t<i&&n[t]===r[t];t++);var l=i-t;for(o=1;o<=l&&n[i-o]===r[s-o];o++);return Ds=r.slice(t,1<o?1-o:void 0)}function Hs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Rs(){return!0}function xc(){return!1}function yi(t){function n(i,o,r,s,l){this._reactName=i,this._targetInst=r,this.type=o,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],this[a]=i?i(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Rs:xc,this.isPropagationStopped=xc,this}return hn(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Rs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Rs)},persist:function(){},isPersistent:Rs}),n}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=yi(Rr),ms=hn({},Rr,{view:0,detail:0}),Eh=yi(ms),$l,Vl,Fr,Sl=hn({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?($l=t.screenX-Fr.screenX,Vl=t.screenY-Fr.screenY):Vl=$l=0,Fr=t),$l)},movementY:function(t){return"movementY"in t?t.movementY:Vl}}),yc=yi(Sl),Lh=hn({},Sl,{dataTransfer:0}),Ah=yi(Lh),Fh=hn({},ms,{relatedTarget:0}),Ul=yi(Fh),Wh=hn({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Mh=yi(Wh),Oh=hn({},Rr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ph=yi(Oh),Nh=hn({},Rr,{data:0}),mc=yi(Nh),Dh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$h={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vh(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=$h[t])?!!n[t]:!1}function Sd(){return Vh}var Uh=hn({},ms,{key:function(t){if(t.key){var n=Dh[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Hs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sd,charCode:function(t){return t.type==="keypress"?Hs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gh=yi(Uh),Yh=hn({},Sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bc=yi(Yh),Xh=hn({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sd}),Kh=yi(Xh),Jh=hn({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qh=yi(Jh),Zh=hn({},Sl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qh=yi(Zh),eu=[9,13,27,32],wd=ro&&"CompositionEvent"in window,Gr=null;ro&&"documentMode"in document&&(Gr=document.documentMode);var tu=ro&&"TextEvent"in window&&!Gr,rf=ro&&(!wd||Gr&&8<Gr&&11>=Gr),vc=" ",jc=!1;function sf(t,n){switch(t){case"keyup":return eu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var or=!1;function nu(t,n){switch(t){case"compositionend":return lf(n);case"keypress":return n.which!==32?null:(jc=!0,vc);case"textInput":return t=n.data,t===vc&&jc?null:t;default:return null}}function iu(t,n){if(or)return t==="compositionend"||!wd&&sf(t,n)?(t=of(),Ds=vd=wo=null,or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return rf&&n.locale!=="ko"?null:n.data;default:return null}}var ou={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!ou[t.type]:n==="textarea"}function af(t,n,i,o){O0(o),n=il(n,"onChange"),0<n.length&&(i=new jd("onChange","change",null,i,o),t.push({event:i,listeners:n}))}var Yr=null,rs=null;function ru(t){bf(t,0)}function wl(t){var n=lr(t);if(I0(n))return t}function su(t,n){if(t==="change")return n}var df=!1;if(ro){var Gl;if(ro){var Yl="oninput"in document;if(!Yl){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),Yl=typeof wc.oninput=="function"}Gl=Yl}else Gl=!1;df=Gl&&(!document.documentMode||9<document.documentMode)}function kc(){Yr&&(Yr.detachEvent("onpropertychange",cf),rs=Yr=null)}function cf(t){if(t.propertyName==="value"&&wl(rs)){var n=[];af(n,rs,t,gd(t)),H0(ru,n)}}function lu(t,n,i){t==="focusin"?(kc(),Yr=n,rs=i,Yr.attachEvent("onpropertychange",cf)):t==="focusout"&&kc()}function au(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wl(rs)}function du(t,n){if(t==="click")return wl(n)}function cu(t,n){if(t==="input"||t==="change")return wl(n)}function fu(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Pi=typeof Object.is=="function"?Object.is:fu;function ss(t,n){if(Pi(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var r=i[o];if(!pa.call(n,r)||!Pi(t[r],n[r]))return!1}return!0}function Cc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _c(t,n){var i=Cc(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=n&&o>=n)return{node:i,offset:n-t};t=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Cc(i)}}function ff(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?ff(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function pf(){for(var t=window,n=Js();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=Js(t.document)}return n}function kd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function pu(t){var n=pf(),i=t.focusedElem,o=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&ff(i.ownerDocument.documentElement,i)){if(o!==null&&kd(i)){if(n=o.start,t=o.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var r=i.textContent.length,s=Math.min(o.start,r);o=o.end===void 0?s:Math.min(o.end,r),!t.extend&&s>o&&(r=o,o=s,s=r),r=_c(i,s);var l=_c(i,o);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(n=n.createRange(),n.setStart(r.node,r.offset),t.removeAllRanges(),s>o?(t.addRange(n),t.extend(l.node,l.offset)):(n.setEnd(l.node,l.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hu=ro&&"documentMode"in document&&11>=document.documentMode,rr=null,Ia=null,Xr=null,Ea=!1;function Tc(t,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ea||rr==null||rr!==Js(o)||(o=rr,"selectionStart"in o&&kd(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Xr&&ss(Xr,o)||(Xr=o,o=il(Ia,"onSelect"),0<o.length&&(n=new jd("onSelect","select",null,n,i),t.push({event:n,listeners:o}),n.target=rr)))}function zs(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var sr={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},Xl={},hf={};ro&&(hf=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function kl(t){if(Xl[t])return Xl[t];if(!sr[t])return t;var n=sr[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in hf)return Xl[t]=n[i];return t}var uf=kl("animationend"),gf=kl("animationiteration"),xf=kl("animationstart"),yf=kl("transitionend"),mf=new Map,Rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fo(t,n){mf.set(t,n),qo(n,[t])}for(var Kl=0;Kl<Rc.length;Kl++){var Jl=Rc[Kl],uu=Jl.toLowerCase(),gu=Jl[0].toUpperCase()+Jl.slice(1);Fo(uu,"on"+gu)}Fo(uf,"onAnimationEnd");Fo(gf,"onAnimationIteration");Fo(xf,"onAnimationStart");Fo("dblclick","onDoubleClick");Fo("focusin","onFocus");Fo("focusout","onBlur");Fo(yf,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xu=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function zc(t,n,i){var o=t.type||"unknown-event";t.currentTarget=i,uh(o,n,void 0,t),t.currentTarget=null}function bf(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],r=o.event;o=o.listeners;e:{var s=void 0;if(n)for(var l=o.length-1;0<=l;l--){var a=o[l],d=a.instance,p=a.currentTarget;if(a=a.listener,d!==s&&r.isPropagationStopped())break e;zc(r,a,p),s=d}else for(l=0;l<o.length;l++){if(a=o[l],d=a.instance,p=a.currentTarget,a=a.listener,d!==s&&r.isPropagationStopped())break e;zc(r,a,p),s=d}}}if(Zs)throw t=Ta,Zs=!1,Ta=null,t}function sn(t,n){var i=n[Ma];i===void 0&&(i=n[Ma]=new Set);var o=t+"__bubble";i.has(o)||(vf(n,t,2,!1),i.add(o))}function Ql(t,n,i){var o=0;n&&(o|=4),vf(i,t,o,n)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function ls(t){if(!t[Bs]){t[Bs]=!0,_0.forEach(function(i){i!=="selectionchange"&&(xu.has(i)||Ql(i,!1,t),Ql(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Bs]||(n[Bs]=!0,Ql("selectionchange",!1,n))}}function vf(t,n,i,o){switch(nf(n)){case 1:var r=Bh;break;case 4:r=Ih;break;default:r=bd}i=r.bind(null,n,i,t),r=void 0,!_a||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(n,i,{capture:!0,passive:r}):t.addEventListener(n,i,!0):r!==void 0?t.addEventListener(n,i,{passive:r}):t.addEventListener(n,i,!1)}function Zl(t,n,i,o,r){var s=o;if(!(n&1)&&!(n&2)&&o!==null)e:for(;;){if(o===null)return;var l=o.tag;if(l===3||l===4){var a=o.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(l===4)for(l=o.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===r||d.nodeType===8&&d.parentNode===r))return;l=l.return}for(;a!==null;){if(l=$o(a),l===null)return;if(d=l.tag,d===5||d===6){o=s=l;continue e}a=a.parentNode}}o=o.return}H0(function(){var p=s,C=gd(i),x=[];e:{var u=mf.get(t);if(u!==void 0){var D=jd,O=t;switch(t){case"keypress":if(Hs(i)===0)break e;case"keydown":case"keyup":D=Gh;break;case"focusin":O="focus",D=Ul;break;case"focusout":O="blur",D=Ul;break;case"beforeblur":case"afterblur":D=Ul;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=Ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=Kh;break;case uf:case gf:case xf:D=Mh;break;case yf:D=Qh;break;case"scroll":D=Eh;break;case"wheel":D=qh;break;case"copy":case"cut":case"paste":D=Ph;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=bc}var Q=(n&4)!==0,De=!Q&&t==="scroll",f=Q?u!==null?u+"Capture":null:u;Q=[];for(var y=p,R;y!==null;){R=y;var c=R.stateNode;if(R.tag===5&&c!==null&&(R=c,f!==null&&(c=ts(y,f),c!=null&&Q.push(as(y,c,R)))),De)break;y=y.return}0<Q.length&&(u=new D(u,O,null,i,C),x.push({event:u,listeners:Q}))}}if(!(n&7)){e:{if(u=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",u&&i!==ka&&(O=i.relatedTarget||i.fromElement)&&($o(O)||O[so]))break e;if((D||u)&&(u=C.window===C?C:(u=C.ownerDocument)?u.defaultView||u.parentWindow:window,D?(O=i.relatedTarget||i.toElement,D=p,O=O?$o(O):null,O!==null&&(De=er(O),O!==De||O.tag!==5&&O.tag!==6)&&(O=null)):(D=null,O=p),D!==O)){if(Q=yc,c="onMouseLeave",f="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(Q=bc,c="onPointerLeave",f="onPointerEnter",y="pointer"),De=D==null?u:lr(D),R=O==null?u:lr(O),u=new Q(c,y+"leave",D,i,C),u.target=De,u.relatedTarget=R,c=null,$o(C)===p&&(Q=new Q(f,y+"enter",O,i,C),Q.target=R,Q.relatedTarget=De,c=Q),De=c,D&&O)t:{for(Q=D,f=O,y=0,R=Q;R;R=tr(R))y++;for(R=0,c=f;c;c=tr(c))R++;for(;0<y-R;)Q=tr(Q),y--;for(;0<R-y;)f=tr(f),R--;for(;y--;){if(Q===f||f!==null&&Q===f.alternate)break t;Q=tr(Q),f=tr(f)}Q=null}else Q=null;D!==null&&Bc(x,u,D,Q,!1),O!==null&&De!==null&&Bc(x,De,O,Q,!0)}}e:{if(u=p?lr(p):window,D=u.nodeName&&u.nodeName.toLowerCase(),D==="select"||D==="input"&&u.type==="file")var N=su;else if(Sc(u))if(df)N=cu;else{N=au;var S=lu}else(D=u.nodeName)&&D.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(N=du);if(N&&(N=N(t,p))){af(x,N,i,C);break e}S&&S(t,u,p),t==="focusout"&&(S=u._wrapperState)&&S.controlled&&u.type==="number"&&ba(u,"number",u.value)}switch(S=p?lr(p):window,t){case"focusin":(Sc(S)||S.contentEditable==="true")&&(rr=S,Ia=p,Xr=null);break;case"focusout":Xr=Ia=rr=null;break;case"mousedown":Ea=!0;break;case"contextmenu":case"mouseup":case"dragend":Ea=!1,Tc(x,i,C);break;case"selectionchange":if(hu)break;case"keydown":case"keyup":Tc(x,i,C)}var B;if(wd)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else or?sf(t,i)&&(F="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(F="onCompositionStart");F&&(rf&&i.locale!=="ko"&&(or||F!=="onCompositionStart"?F==="onCompositionEnd"&&or&&(B=of()):(wo=C,vd="value"in wo?wo.value:wo.textContent,or=!0)),S=il(p,F),0<S.length&&(F=new mc(F,t,null,i,C),x.push({event:F,listeners:S}),B?F.data=B:(B=lf(i),B!==null&&(F.data=B)))),(B=tu?nu(t,i):iu(t,i))&&(p=il(p,"onBeforeInput"),0<p.length&&(C=new mc("onBeforeInput","beforeinput",null,i,C),x.push({event:C,listeners:p}),C.data=B))}bf(x,n)})}function as(t,n,i){return{instance:t,listener:n,currentTarget:i}}function il(t,n){for(var i=n+"Capture",o=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ts(t,i),s!=null&&o.unshift(as(t,s,r)),s=ts(t,n),s!=null&&o.push(as(t,s,r))),t=t.return}return o}function tr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bc(t,n,i,o,r){for(var s=n._reactName,l=[];i!==null&&i!==o;){var a=i,d=a.alternate,p=a.stateNode;if(d!==null&&d===o)break;a.tag===5&&p!==null&&(a=p,r?(d=ts(i,s),d!=null&&l.unshift(as(i,d,a))):r||(d=ts(i,s),d!=null&&l.push(as(i,d,a)))),i=i.return}l.length!==0&&t.push({event:n,listeners:l})}var yu=/\r\n?/g,mu=/\u0000|\uFFFD/g;function Ic(t){return(typeof t=="string"?t:""+t).replace(yu,`
`).replace(mu,"")}function Is(t,n,i){if(n=Ic(n),Ic(t)!==n&&i)throw Error(We(425))}function ol(){}var La=null,Aa=null;function Fa(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wa=typeof setTimeout=="function"?setTimeout:void 0,bu=typeof clearTimeout=="function"?clearTimeout:void 0,Ec=typeof Promise=="function"?Promise:void 0,vu=typeof queueMicrotask=="function"?queueMicrotask:typeof Ec<"u"?function(t){return Ec.resolve(null).then(t).catch(ju)}:Wa;function ju(t){setTimeout(function(){throw t})}function ql(t,n){var i=n,o=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(o===0){t.removeChild(r),os(n);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=r}while(i);os(n)}function Ro(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Lc(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var zr=Math.random().toString(36).slice(2),Yi="__reactFiber$"+zr,ds="__reactProps$"+zr,so="__reactContainer$"+zr,Ma="__reactEvents$"+zr,Su="__reactListeners$"+zr,wu="__reactHandles$"+zr;function $o(t){var n=t[Yi];if(n)return n;for(var i=t.parentNode;i;){if(n=i[so]||i[Yi]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Lc(t);t!==null;){if(i=t[Yi])return i;t=Lc(t)}return n}t=i,i=t.parentNode}return null}function bs(t){return t=t[Yi]||t[so],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function lr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(We(33))}function Cl(t){return t[ds]||null}var Oa=[],ar=-1;function Wo(t){return{current:t}}function ln(t){0>ar||(t.current=Oa[ar],Oa[ar]=null,ar--)}function on(t,n){ar++,Oa[ar]=t.current,t.current=n}var Ao={},Vn=Wo(Ao),si=Wo(!1),Xo=Ao;function jr(t,n){var i=t.type.contextTypes;if(!i)return Ao;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===n)return o.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=n[s];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=r),r}function li(t){return t=t.childContextTypes,t!=null}function rl(){ln(si),ln(Vn)}function Ac(t,n,i){if(Vn.current!==Ao)throw Error(We(168));on(Vn,n),on(si,i)}function jf(t,n,i){var o=t.stateNode;if(n=n.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var r in o)if(!(r in n))throw Error(We(108,lh(t)||"Unknown",r));return hn({},i,o)}function sl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ao,Xo=Vn.current,on(Vn,t),on(si,si.current),!0}function Fc(t,n,i){var o=t.stateNode;if(!o)throw Error(We(169));i?(t=jf(t,n,Xo),o.__reactInternalMemoizedMergedChildContext=t,ln(si),ln(Vn),on(Vn,t)):ln(si),on(si,i)}var to=null,_l=!1,ea=!1;function Sf(t){to===null?to=[t]:to.push(t)}function ku(t){_l=!0,Sf(t)}function Mo(){if(!ea&&to!==null){ea=!0;var t=0,n=tn;try{var i=to;for(tn=1;t<i.length;t++){var o=i[t];do o=o(!0);while(o!==null)}to=null,_l=!1}catch(r){throw to!==null&&(to=to.slice(t+1)),G0(xd,Mo),r}finally{tn=n,ea=!1}}return null}var dr=[],cr=0,ll=null,al=0,ji=[],Si=0,Ko=null,no=1,io="";function Do(t,n){dr[cr++]=al,dr[cr++]=ll,ll=t,al=n}function wf(t,n,i){ji[Si++]=no,ji[Si++]=io,ji[Si++]=Ko,Ko=t;var o=no;t=io;var r=32-Mi(o)-1;o&=~(1<<r),i+=1;var s=32-Mi(n)+r;if(30<s){var l=r-r%5;s=(o&(1<<l)-1).toString(32),o>>=l,r-=l,no=1<<32-Mi(n)+r|i<<r|o,io=s+t}else no=1<<s|i<<r|o,io=t}function Cd(t){t.return!==null&&(Do(t,1),wf(t,1,0))}function _d(t){for(;t===ll;)ll=dr[--cr],dr[cr]=null,al=dr[--cr],dr[cr]=null;for(;t===Ko;)Ko=ji[--Si],ji[Si]=null,io=ji[--Si],ji[Si]=null,no=ji[--Si],ji[Si]=null}var ui=null,hi=null,cn=!1,Wi=null;function kf(t,n){var i=wi(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function Wc(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,ui=t,hi=Ro(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,ui=t,hi=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=Ko!==null?{id:no,overflow:io}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=wi(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,ui=t,hi=null,!0):!1;default:return!1}}function Pa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Na(t){if(cn){var n=hi;if(n){var i=n;if(!Wc(t,n)){if(Pa(t))throw Error(We(418));n=Ro(i.nextSibling);var o=ui;n&&Wc(t,n)?kf(o,i):(t.flags=t.flags&-4097|2,cn=!1,ui=t)}}else{if(Pa(t))throw Error(We(418));t.flags=t.flags&-4097|2,cn=!1,ui=t}}}function Mc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ui=t}function Es(t){if(t!==ui)return!1;if(!cn)return Mc(t),cn=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Fa(t.type,t.memoizedProps)),n&&(n=hi)){if(Pa(t))throw Cf(),Error(We(418));for(;n;)kf(t,n),n=Ro(n.nextSibling)}if(Mc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(We(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){hi=Ro(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}hi=null}}else hi=ui?Ro(t.stateNode.nextSibling):null;return!0}function Cf(){for(var t=hi;t;)t=Ro(t.nextSibling)}function Sr(){hi=ui=null,cn=!1}function Td(t){Wi===null?Wi=[t]:Wi.push(t)}var Cu=co.ReactCurrentBatchConfig;function Wr(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(We(309));var o=i.stateNode}if(!o)throw Error(We(147,t));var r=o,s=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===s?n.ref:(n=function(l){var a=r.refs;l===null?delete a[s]:a[s]=l},n._stringRef=s,n)}if(typeof t!="string")throw Error(We(284));if(!i._owner)throw Error(We(290,t))}return t}function Ls(t,n){throw t=Object.prototype.toString.call(n),Error(We(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Oc(t){var n=t._init;return n(t._payload)}function _f(t){function n(f,y){if(t){var R=f.deletions;R===null?(f.deletions=[y],f.flags|=16):R.push(y)}}function i(f,y){if(!t)return null;for(;y!==null;)n(f,y),y=y.sibling;return null}function o(f,y){for(f=new Map;y!==null;)y.key!==null?f.set(y.key,y):f.set(y.index,y),y=y.sibling;return f}function r(f,y){return f=Eo(f,y),f.index=0,f.sibling=null,f}function s(f,y,R){return f.index=R,t?(R=f.alternate,R!==null?(R=R.index,R<y?(f.flags|=2,y):R):(f.flags|=2,y)):(f.flags|=1048576,y)}function l(f){return t&&f.alternate===null&&(f.flags|=2),f}function a(f,y,R,c){return y===null||y.tag!==6?(y=la(R,f.mode,c),y.return=f,y):(y=r(y,R),y.return=f,y)}function d(f,y,R,c){var N=R.type;return N===ir?C(f,y,R.props.children,c,R.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===bo&&Oc(N)===y.type)?(c=r(y,R.props),c.ref=Wr(f,y,R),c.return=f,c):(c=Ks(R.type,R.key,R.props,null,f.mode,c),c.ref=Wr(f,y,R),c.return=f,c)}function p(f,y,R,c){return y===null||y.tag!==4||y.stateNode.containerInfo!==R.containerInfo||y.stateNode.implementation!==R.implementation?(y=aa(R,f.mode,c),y.return=f,y):(y=r(y,R.children||[]),y.return=f,y)}function C(f,y,R,c,N){return y===null||y.tag!==7?(y=Yo(R,f.mode,c,N),y.return=f,y):(y=r(y,R),y.return=f,y)}function x(f,y,R){if(typeof y=="string"&&y!==""||typeof y=="number")return y=la(""+y,f.mode,R),y.return=f,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ss:return R=Ks(y.type,y.key,y.props,null,f.mode,R),R.ref=Wr(f,null,y),R.return=f,R;case nr:return y=aa(y,f.mode,R),y.return=f,y;case bo:var c=y._init;return x(f,c(y._payload),R)}if(Dr(y)||Ir(y))return y=Yo(y,f.mode,R,null),y.return=f,y;Ls(f,y)}return null}function u(f,y,R,c){var N=y!==null?y.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return N!==null?null:a(f,y,""+R,c);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Ss:return R.key===N?d(f,y,R,c):null;case nr:return R.key===N?p(f,y,R,c):null;case bo:return N=R._init,u(f,y,N(R._payload),c)}if(Dr(R)||Ir(R))return N!==null?null:C(f,y,R,c,null);Ls(f,R)}return null}function D(f,y,R,c,N){if(typeof c=="string"&&c!==""||typeof c=="number")return f=f.get(R)||null,a(y,f,""+c,N);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Ss:return f=f.get(c.key===null?R:c.key)||null,d(y,f,c,N);case nr:return f=f.get(c.key===null?R:c.key)||null,p(y,f,c,N);case bo:var S=c._init;return D(f,y,R,S(c._payload),N)}if(Dr(c)||Ir(c))return f=f.get(R)||null,C(y,f,c,N,null);Ls(y,c)}return null}function O(f,y,R,c){for(var N=null,S=null,B=y,F=y=0,pe=null;B!==null&&F<R.length;F++){B.index>F?(pe=B,B=null):pe=B.sibling;var U=u(f,B,R[F],c);if(U===null){B===null&&(B=pe);break}t&&B&&U.alternate===null&&n(f,B),y=s(U,y,F),S===null?N=U:S.sibling=U,S=U,B=pe}if(F===R.length)return i(f,B),cn&&Do(f,F),N;if(B===null){for(;F<R.length;F++)B=x(f,R[F],c),B!==null&&(y=s(B,y,F),S===null?N=B:S.sibling=B,S=B);return cn&&Do(f,F),N}for(B=o(f,B);F<R.length;F++)pe=D(B,f,F,R[F],c),pe!==null&&(t&&pe.alternate!==null&&B.delete(pe.key===null?F:pe.key),y=s(pe,y,F),S===null?N=pe:S.sibling=pe,S=pe);return t&&B.forEach(function(m){return n(f,m)}),cn&&Do(f,F),N}function Q(f,y,R,c){var N=Ir(R);if(typeof N!="function")throw Error(We(150));if(R=N.call(R),R==null)throw Error(We(151));for(var S=N=null,B=y,F=y=0,pe=null,U=R.next();B!==null&&!U.done;F++,U=R.next()){B.index>F?(pe=B,B=null):pe=B.sibling;var m=u(f,B,U.value,c);if(m===null){B===null&&(B=pe);break}t&&B&&m.alternate===null&&n(f,B),y=s(m,y,F),S===null?N=m:S.sibling=m,S=m,B=pe}if(U.done)return i(f,B),cn&&Do(f,F),N;if(B===null){for(;!U.done;F++,U=R.next())U=x(f,U.value,c),U!==null&&(y=s(U,y,F),S===null?N=U:S.sibling=U,S=U);return cn&&Do(f,F),N}for(B=o(f,B);!U.done;F++,U=R.next())U=D(B,f,F,U.value,c),U!==null&&(t&&U.alternate!==null&&B.delete(U.key===null?F:U.key),y=s(U,y,F),S===null?N=U:S.sibling=U,S=U);return t&&B.forEach(function(h){return n(f,h)}),cn&&Do(f,F),N}function De(f,y,R,c){if(typeof R=="object"&&R!==null&&R.type===ir&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Ss:e:{for(var N=R.key,S=y;S!==null;){if(S.key===N){if(N=R.type,N===ir){if(S.tag===7){i(f,S.sibling),y=r(S,R.props.children),y.return=f,f=y;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===bo&&Oc(N)===S.type){i(f,S.sibling),y=r(S,R.props),y.ref=Wr(f,S,R),y.return=f,f=y;break e}i(f,S);break}else n(f,S);S=S.sibling}R.type===ir?(y=Yo(R.props.children,f.mode,c,R.key),y.return=f,f=y):(c=Ks(R.type,R.key,R.props,null,f.mode,c),c.ref=Wr(f,y,R),c.return=f,f=c)}return l(f);case nr:e:{for(S=R.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===R.containerInfo&&y.stateNode.implementation===R.implementation){i(f,y.sibling),y=r(y,R.children||[]),y.return=f,f=y;break e}else{i(f,y);break}else n(f,y);y=y.sibling}y=aa(R,f.mode,c),y.return=f,f=y}return l(f);case bo:return S=R._init,De(f,y,S(R._payload),c)}if(Dr(R))return O(f,y,R,c);if(Ir(R))return Q(f,y,R,c);Ls(f,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,y!==null&&y.tag===6?(i(f,y.sibling),y=r(y,R),y.return=f,f=y):(i(f,y),y=la(R,f.mode,c),y.return=f,f=y),l(f)):i(f,y)}return De}var wr=_f(!0),Tf=_f(!1),dl=Wo(null),cl=null,fr=null,Rd=null;function zd(){Rd=fr=cl=null}function Bd(t){var n=dl.current;ln(dl),t._currentValue=n}function Da(t,n,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===i)break;t=t.return}}function mr(t,n){cl=t,Rd=fr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&n&&(ri=!0),t.firstContext=null)}function Ci(t){var n=t._currentValue;if(Rd!==t)if(t={context:t,memoizedValue:n,next:null},fr===null){if(cl===null)throw Error(We(308));fr=t,cl.dependencies={lanes:0,firstContext:t}}else fr=fr.next=t;return n}var Vo=null;function Id(t){Vo===null?Vo=[t]:Vo.push(t)}function Rf(t,n,i,o){var r=n.interleaved;return r===null?(i.next=i,Id(n)):(i.next=r.next,r.next=i),n.interleaved=i,lo(t,o)}function lo(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var vo=!1;function Ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oo(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function zo(t,n,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,Kt&2){var r=o.pending;return r===null?n.next=n:(n.next=r.next,r.next=n),o.pending=n,lo(t,i)}return r=o.interleaved,r===null?(n.next=n,Id(o)):(n.next=r.next,r.next=n),o.interleaved=n,lo(t,i)}function $s(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var o=n.lanes;o&=t.pendingLanes,i|=o,n.lanes=i,yd(t,i)}}function Pc(t,n){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var r=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var l={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?r=s=l:s=s.next=l,i=i.next}while(i!==null);s===null?r=s=n:s=s.next=n}else r=s=n;i={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:o.shared,effects:o.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function fl(t,n,i,o){var r=t.updateQueue;vo=!1;var s=r.firstBaseUpdate,l=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var d=a,p=d.next;d.next=null,l===null?s=p:l.next=p,l=d;var C=t.alternate;C!==null&&(C=C.updateQueue,a=C.lastBaseUpdate,a!==l&&(a===null?C.firstBaseUpdate=p:a.next=p,C.lastBaseUpdate=d))}if(s!==null){var x=r.baseState;l=0,C=p=d=null,a=s;do{var u=a.lane,D=a.eventTime;if((o&u)===u){C!==null&&(C=C.next={eventTime:D,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var O=t,Q=a;switch(u=n,D=i,Q.tag){case 1:if(O=Q.payload,typeof O=="function"){x=O.call(D,x,u);break e}x=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=Q.payload,u=typeof O=="function"?O.call(D,x,u):O,u==null)break e;x=hn({},x,u);break e;case 2:vo=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,u=r.effects,u===null?r.effects=[a]:u.push(a))}else D={eventTime:D,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},C===null?(p=C=D,d=x):C=C.next=D,l|=u;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;u=a,a=u.next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}while(!0);if(C===null&&(d=x),r.baseState=d,r.firstBaseUpdate=p,r.lastBaseUpdate=C,n=r.shared.interleaved,n!==null){r=n;do l|=r.lane,r=r.next;while(r!==n)}else s===null&&(r.shared.lanes=0);Qo|=l,t.lanes=l,t.memoizedState=x}}function Nc(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var o=t[n],r=o.callback;if(r!==null){if(o.callback=null,o=i,typeof r!="function")throw Error(We(191,r));r.call(o)}}}var vs={},Ki=Wo(vs),cs=Wo(vs),fs=Wo(vs);function Uo(t){if(t===vs)throw Error(We(174));return t}function Ld(t,n){switch(on(fs,n),on(cs,t),on(Ki,vs),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ja(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=ja(n,t)}ln(Ki),on(Ki,n)}function kr(){ln(Ki),ln(cs),ln(fs)}function Bf(t){Uo(fs.current);var n=Uo(Ki.current),i=ja(n,t.type);n!==i&&(on(cs,t),on(Ki,i))}function Ad(t){cs.current===t&&(ln(Ki),ln(cs))}var fn=Wo(0);function pl(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ta=[];function Fd(){for(var t=0;t<ta.length;t++)ta[t]._workInProgressVersionPrimary=null;ta.length=0}var Vs=co.ReactCurrentDispatcher,na=co.ReactCurrentBatchConfig,Jo=0,pn=null,Tn=null,zn=null,hl=!1,Kr=!1,ps=0,_u=0;function Dn(){throw Error(We(321))}function Wd(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Pi(t[i],n[i]))return!1;return!0}function Md(t,n,i,o,r,s){if(Jo=s,pn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Vs.current=t===null||t.memoizedState===null?Bu:Iu,t=i(o,r),Kr){s=0;do{if(Kr=!1,ps=0,25<=s)throw Error(We(301));s+=1,zn=Tn=null,n.updateQueue=null,Vs.current=Eu,t=i(o,r)}while(Kr)}if(Vs.current=ul,n=Tn!==null&&Tn.next!==null,Jo=0,zn=Tn=pn=null,hl=!1,n)throw Error(We(300));return t}function Od(){var t=ps!==0;return ps=0,t}function Gi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?pn.memoizedState=zn=t:zn=zn.next=t,zn}function _i(){if(Tn===null){var t=pn.alternate;t=t!==null?t.memoizedState:null}else t=Tn.next;var n=zn===null?pn.memoizedState:zn.next;if(n!==null)zn=n,Tn=t;else{if(t===null)throw Error(We(310));Tn=t,t={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},zn===null?pn.memoizedState=zn=t:zn=zn.next=t}return zn}function hs(t,n){return typeof n=="function"?n(t):n}function ia(t){var n=_i(),i=n.queue;if(i===null)throw Error(We(311));i.lastRenderedReducer=t;var o=Tn,r=o.baseQueue,s=i.pending;if(s!==null){if(r!==null){var l=r.next;r.next=s.next,s.next=l}o.baseQueue=r=s,i.pending=null}if(r!==null){s=r.next,o=o.baseState;var a=l=null,d=null,p=s;do{var C=p.lane;if((Jo&C)===C)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),o=p.hasEagerState?p.eagerState:t(o,p.action);else{var x={lane:C,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(a=d=x,l=o):d=d.next=x,pn.lanes|=C,Qo|=C}p=p.next}while(p!==null&&p!==s);d===null?l=o:d.next=a,Pi(o,n.memoizedState)||(ri=!0),n.memoizedState=o,n.baseState=l,n.baseQueue=d,i.lastRenderedState=o}if(t=i.interleaved,t!==null){r=t;do s=r.lane,pn.lanes|=s,Qo|=s,r=r.next;while(r!==t)}else r===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function oa(t){var n=_i(),i=n.queue;if(i===null)throw Error(We(311));i.lastRenderedReducer=t;var o=i.dispatch,r=i.pending,s=n.memoizedState;if(r!==null){i.pending=null;var l=r=r.next;do s=t(s,l.action),l=l.next;while(l!==r);Pi(s,n.memoizedState)||(ri=!0),n.memoizedState=s,n.baseQueue===null&&(n.baseState=s),i.lastRenderedState=s}return[s,o]}function If(){}function Ef(t,n){var i=pn,o=_i(),r=n(),s=!Pi(o.memoizedState,r);if(s&&(o.memoizedState=r,ri=!0),o=o.queue,Pd(Ff.bind(null,i,o,t),[t]),o.getSnapshot!==n||s||zn!==null&&zn.memoizedState.tag&1){if(i.flags|=2048,us(9,Af.bind(null,i,o,r,n),void 0,null),Bn===null)throw Error(We(349));Jo&30||Lf(i,n,r)}return r}function Lf(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=pn.updateQueue,n===null?(n={lastEffect:null,stores:null},pn.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function Af(t,n,i,o){n.value=i,n.getSnapshot=o,Wf(n)&&Mf(t)}function Ff(t,n,i){return i(function(){Wf(n)&&Mf(t)})}function Wf(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Pi(t,i)}catch{return!0}}function Mf(t){var n=lo(t,1);n!==null&&Oi(n,t,1,-1)}function Dc(t){var n=Gi();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:t},n.queue=t,t=t.dispatch=zu.bind(null,pn,t),[n.memoizedState,t]}function us(t,n,i,o){return t={tag:t,create:n,destroy:i,deps:o,next:null},n=pn.updateQueue,n===null?(n={lastEffect:null,stores:null},pn.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,n.lastEffect=t)),t}function Of(){return _i().memoizedState}function Us(t,n,i,o){var r=Gi();pn.flags|=t,r.memoizedState=us(1|n,i,void 0,o===void 0?null:o)}function Tl(t,n,i,o){var r=_i();o=o===void 0?null:o;var s=void 0;if(Tn!==null){var l=Tn.memoizedState;if(s=l.destroy,o!==null&&Wd(o,l.deps)){r.memoizedState=us(n,i,s,o);return}}pn.flags|=t,r.memoizedState=us(1|n,i,s,o)}function Hc(t,n){return Us(8390656,8,t,n)}function Pd(t,n){return Tl(2048,8,t,n)}function Pf(t,n){return Tl(4,2,t,n)}function Nf(t,n){return Tl(4,4,t,n)}function Df(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Hf(t,n,i){return i=i!=null?i.concat([t]):null,Tl(4,4,Df.bind(null,n,t),i)}function Nd(){}function $f(t,n){var i=_i();n=n===void 0?null:n;var o=i.memoizedState;return o!==null&&n!==null&&Wd(n,o[1])?o[0]:(i.memoizedState=[t,n],t)}function Vf(t,n){var i=_i();n=n===void 0?null:n;var o=i.memoizedState;return o!==null&&n!==null&&Wd(n,o[1])?o[0]:(t=t(),i.memoizedState=[t,n],t)}function Uf(t,n,i){return Jo&21?(Pi(i,n)||(i=K0(),pn.lanes|=i,Qo|=i,t.baseState=!0),n):(t.baseState&&(t.baseState=!1,ri=!0),t.memoizedState=i)}function Tu(t,n){var i=tn;tn=i!==0&&4>i?i:4,t(!0);var o=na.transition;na.transition={};try{t(!1),n()}finally{tn=i,na.transition=o}}function Gf(){return _i().memoizedState}function Ru(t,n,i){var o=Io(t);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},Yf(t))Xf(n,i);else if(i=Rf(t,n,i,o),i!==null){var r=Kn();Oi(i,t,o,r),Kf(i,n,o)}}function zu(t,n,i){var o=Io(t),r={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(Yf(t))Xf(n,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=n.lastRenderedReducer,s!==null))try{var l=n.lastRenderedState,a=s(l,i);if(r.hasEagerState=!0,r.eagerState=a,Pi(a,l)){var d=n.interleaved;d===null?(r.next=r,Id(n)):(r.next=d.next,d.next=r),n.interleaved=r;return}}catch{}finally{}i=Rf(t,n,r,o),i!==null&&(r=Kn(),Oi(i,t,o,r),Kf(i,n,o))}}function Yf(t){var n=t.alternate;return t===pn||n!==null&&n===pn}function Xf(t,n){Kr=hl=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function Kf(t,n,i){if(i&4194240){var o=n.lanes;o&=t.pendingLanes,i|=o,n.lanes=i,yd(t,i)}}var ul={readContext:Ci,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},Bu={readContext:Ci,useCallback:function(t,n){return Gi().memoizedState=[t,n===void 0?null:n],t},useContext:Ci,useEffect:Hc,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,Us(4194308,4,Df.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Us(4194308,4,t,n)},useInsertionEffect:function(t,n){return Us(4,2,t,n)},useMemo:function(t,n){var i=Gi();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var o=Gi();return n=i!==void 0?i(n):n,o.memoizedState=o.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},o.queue=t,t=t.dispatch=Ru.bind(null,pn,t),[o.memoizedState,t]},useRef:function(t){var n=Gi();return t={current:t},n.memoizedState=t},useState:Dc,useDebugValue:Nd,useDeferredValue:function(t){return Gi().memoizedState=t},useTransition:function(){var t=Dc(!1),n=t[0];return t=Tu.bind(null,t[1]),Gi().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var o=pn,r=Gi();if(cn){if(i===void 0)throw Error(We(407));i=i()}else{if(i=n(),Bn===null)throw Error(We(349));Jo&30||Lf(o,n,i)}r.memoizedState=i;var s={value:i,getSnapshot:n};return r.queue=s,Hc(Ff.bind(null,o,s,t),[t]),o.flags|=2048,us(9,Af.bind(null,o,s,i,n),void 0,null),i},useId:function(){var t=Gi(),n=Bn.identifierPrefix;if(cn){var i=io,o=no;i=(o&~(1<<32-Mi(o)-1)).toString(32)+i,n=":"+n+"R"+i,i=ps++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=_u++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Iu={readContext:Ci,useCallback:$f,useContext:Ci,useEffect:Pd,useImperativeHandle:Hf,useInsertionEffect:Pf,useLayoutEffect:Nf,useMemo:Vf,useReducer:ia,useRef:Of,useState:function(){return ia(hs)},useDebugValue:Nd,useDeferredValue:function(t){var n=_i();return Uf(n,Tn.memoizedState,t)},useTransition:function(){var t=ia(hs)[0],n=_i().memoizedState;return[t,n]},useMutableSource:If,useSyncExternalStore:Ef,useId:Gf,unstable_isNewReconciler:!1},Eu={readContext:Ci,useCallback:$f,useContext:Ci,useEffect:Pd,useImperativeHandle:Hf,useInsertionEffect:Pf,useLayoutEffect:Nf,useMemo:Vf,useReducer:oa,useRef:Of,useState:function(){return oa(hs)},useDebugValue:Nd,useDeferredValue:function(t){var n=_i();return Tn===null?n.memoizedState=t:Uf(n,Tn.memoizedState,t)},useTransition:function(){var t=oa(hs)[0],n=_i().memoizedState;return[t,n]},useMutableSource:If,useSyncExternalStore:Ef,useId:Gf,unstable_isNewReconciler:!1};function Ai(t,n){if(t&&t.defaultProps){n=hn({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}function Ha(t,n,i,o){n=t.memoizedState,i=i(o,n),i=i==null?n:hn({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Rl={isMounted:function(t){return(t=t._reactInternals)?er(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var o=Kn(),r=Io(t),s=oo(o,r);s.payload=n,i!=null&&(s.callback=i),n=zo(t,s,r),n!==null&&(Oi(n,t,r,o),$s(n,t,r))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var o=Kn(),r=Io(t),s=oo(o,r);s.tag=1,s.payload=n,i!=null&&(s.callback=i),n=zo(t,s,r),n!==null&&(Oi(n,t,r,o),$s(n,t,r))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Kn(),o=Io(t),r=oo(i,o);r.tag=2,n!=null&&(r.callback=n),n=zo(t,r,o),n!==null&&(Oi(n,t,o,i),$s(n,t,o))}};function $c(t,n,i,o,r,s,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,s,l):n.prototype&&n.prototype.isPureReactComponent?!ss(i,o)||!ss(r,s):!0}function Jf(t,n,i){var o=!1,r=Ao,s=n.contextType;return typeof s=="object"&&s!==null?s=Ci(s):(r=li(n)?Xo:Vn.current,o=n.contextTypes,s=(o=o!=null)?jr(t,r):Ao),n=new n(i,s),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Rl,t.stateNode=n,n._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),n}function Vc(t,n,i,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==t&&Rl.enqueueReplaceState(n,n.state,null)}function $a(t,n,i,o){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs={},Ed(t);var s=n.contextType;typeof s=="object"&&s!==null?r.context=Ci(s):(s=li(n)?Xo:Vn.current,r.context=jr(t,s)),r.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Ha(t,n,s,i),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(n=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),n!==r.state&&Rl.enqueueReplaceState(r,r.state,null),fl(t,i,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Cr(t,n){try{var i="",o=n;do i+=sh(o),o=o.return;while(o);var r=i}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:n,stack:r,digest:null}}function ra(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function Va(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var Lu=typeof WeakMap=="function"?WeakMap:Map;function Qf(t,n,i){i=oo(-1,i),i.tag=3,i.payload={element:null};var o=n.value;return i.callback=function(){xl||(xl=!0,ed=o),Va(t,n)},i}function Zf(t,n,i){i=oo(-1,i),i.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=n.value;i.payload=function(){return o(r)},i.callback=function(){Va(t,n)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){Va(t,n),typeof o!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})}),i}function Uc(t,n,i){var o=t.pingCache;if(o===null){o=t.pingCache=new Lu;var r=new Set;o.set(n,r)}else r=o.get(n),r===void 0&&(r=new Set,o.set(n,r));r.has(i)||(r.add(i),t=Yu.bind(null,t,n,i),n.then(t,t))}function Gc(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Yc(t,n,i,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=oo(-1,1),n.tag=2,zo(i,n,1))),i.lanes|=1),t)}var Au=co.ReactCurrentOwner,ri=!1;function Xn(t,n,i,o){n.child=t===null?Tf(n,null,i,o):wr(n,t.child,i,o)}function Xc(t,n,i,o,r){i=i.render;var s=n.ref;return mr(n,r),o=Md(t,n,i,o,s,r),i=Od(),t!==null&&!ri?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r,ao(t,n,r)):(cn&&i&&Cd(n),n.flags|=1,Xn(t,n,o,r),n.child)}function Kc(t,n,i,o,r){if(t===null){var s=i.type;return typeof s=="function"&&!Xd(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=s,qf(t,n,s,o,r)):(t=Ks(i.type,null,o,n,n.mode,r),t.ref=n.ref,t.return=n,n.child=t)}if(s=t.child,!(t.lanes&r)){var l=s.memoizedProps;if(i=i.compare,i=i!==null?i:ss,i(l,o)&&t.ref===n.ref)return ao(t,n,r)}return n.flags|=1,t=Eo(s,o),t.ref=n.ref,t.return=n,n.child=t}function qf(t,n,i,o,r){if(t!==null){var s=t.memoizedProps;if(ss(s,o)&&t.ref===n.ref)if(ri=!1,n.pendingProps=o=s,(t.lanes&r)!==0)t.flags&131072&&(ri=!0);else return n.lanes=t.lanes,ao(t,n,r)}return Ua(t,n,i,o,r)}function ep(t,n,i){var o=n.pendingProps,r=o.children,s=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},on(hr,pi),pi|=i;else{if(!(i&1073741824))return t=s!==null?s.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,on(hr,pi),pi|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=s!==null?s.baseLanes:i,on(hr,pi),pi|=o}else s!==null?(o=s.baseLanes|i,n.memoizedState=null):o=i,on(hr,pi),pi|=o;return Xn(t,n,r,i),n.child}function tp(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function Ua(t,n,i,o,r){var s=li(i)?Xo:Vn.current;return s=jr(n,s),mr(n,r),i=Md(t,n,i,o,s,r),o=Od(),t!==null&&!ri?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r,ao(t,n,r)):(cn&&o&&Cd(n),n.flags|=1,Xn(t,n,i,r),n.child)}function Jc(t,n,i,o,r){if(li(i)){var s=!0;sl(n)}else s=!1;if(mr(n,r),n.stateNode===null)Gs(t,n),Jf(n,i,o),$a(n,i,o,r),o=!0;else if(t===null){var l=n.stateNode,a=n.memoizedProps;l.props=a;var d=l.context,p=i.contextType;typeof p=="object"&&p!==null?p=Ci(p):(p=li(i)?Xo:Vn.current,p=jr(n,p));var C=i.getDerivedStateFromProps,x=typeof C=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==o||d!==p)&&Vc(n,l,o,p),vo=!1;var u=n.memoizedState;l.state=u,fl(n,o,l,r),d=n.memoizedState,a!==o||u!==d||si.current||vo?(typeof C=="function"&&(Ha(n,i,C,o),d=n.memoizedState),(a=vo||$c(n,i,a,o,u,d,p))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(n.flags|=4194308)):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=d),l.props=o,l.state=d,l.context=p,o=a):(typeof l.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{l=n.stateNode,zf(t,n),a=n.memoizedProps,p=n.type===n.elementType?a:Ai(n.type,a),l.props=p,x=n.pendingProps,u=l.context,d=i.contextType,typeof d=="object"&&d!==null?d=Ci(d):(d=li(i)?Xo:Vn.current,d=jr(n,d));var D=i.getDerivedStateFromProps;(C=typeof D=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==x||u!==d)&&Vc(n,l,o,d),vo=!1,u=n.memoizedState,l.state=u,fl(n,o,l,r);var O=n.memoizedState;a!==x||u!==O||si.current||vo?(typeof D=="function"&&(Ha(n,i,D,o),O=n.memoizedState),(p=vo||$c(n,i,p,o,u,O,d)||!1)?(C||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(o,O,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(o,O,d)),typeof l.componentDidUpdate=="function"&&(n.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=O),l.props=o,l.state=O,l.context=d,o=p):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&u===t.memoizedState||(n.flags|=1024),o=!1)}return Ga(t,n,i,o,s,r)}function Ga(t,n,i,o,r,s){tp(t,n);var l=(n.flags&128)!==0;if(!o&&!l)return r&&Fc(n,i,!1),ao(t,n,s);o=n.stateNode,Au.current=n;var a=l&&typeof i.getDerivedStateFromError!="function"?null:o.render();return n.flags|=1,t!==null&&l?(n.child=wr(n,t.child,null,s),n.child=wr(n,null,a,s)):Xn(t,n,a,s),n.memoizedState=o.state,r&&Fc(n,i,!0),n.child}function np(t){var n=t.stateNode;n.pendingContext?Ac(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Ac(t,n.context,!1),Ld(t,n.containerInfo)}function Qc(t,n,i,o,r){return Sr(),Td(r),n.flags|=256,Xn(t,n,i,o),n.child}var Ya={dehydrated:null,treeContext:null,retryLane:0};function Xa(t){return{baseLanes:t,cachePool:null,transitions:null}}function ip(t,n,i){var o=n.pendingProps,r=fn.current,s=!1,l=(n.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),on(fn,r&1),t===null)return Na(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(n.mode&1?t.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(l=o.children,t=o.fallback,s?(o=n.mode,s=n.child,l={mode:"hidden",children:l},!(o&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Il(l,o,0,null),t=Yo(t,o,i,null),s.return=n,t.return=n,s.sibling=t,n.child=s,n.child.memoizedState=Xa(i),n.memoizedState=Ya,t):Dd(n,l));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Fu(t,n,l,o,a,r,i);if(s){s=o.fallback,l=n.mode,r=t.child,a=r.sibling;var d={mode:"hidden",children:o.children};return!(l&1)&&n.child!==r?(o=n.child,o.childLanes=0,o.pendingProps=d,n.deletions=null):(o=Eo(r,d),o.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Eo(a,s):(s=Yo(s,l,i,null),s.flags|=2),s.return=n,o.return=n,o.sibling=s,n.child=o,o=s,s=n.child,l=t.child.memoizedState,l=l===null?Xa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~i,n.memoizedState=Ya,o}return s=t.child,t=s.sibling,o=Eo(s,{mode:"visible",children:o.children}),!(n.mode&1)&&(o.lanes=i),o.return=n,o.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=o,n.memoizedState=null,o}function Dd(t,n){return n=Il({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function As(t,n,i,o){return o!==null&&Td(o),wr(n,t.child,null,i),t=Dd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Fu(t,n,i,o,r,s,l){if(i)return n.flags&256?(n.flags&=-257,o=ra(Error(We(422))),As(t,n,l,o)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(s=o.fallback,r=n.mode,o=Il({mode:"visible",children:o.children},r,0,null),s=Yo(s,r,l,null),s.flags|=2,o.return=n,s.return=n,o.sibling=s,n.child=o,n.mode&1&&wr(n,t.child,null,l),n.child.memoizedState=Xa(l),n.memoizedState=Ya,s);if(!(n.mode&1))return As(t,n,l,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var a=o.dgst;return o=a,s=Error(We(419)),o=ra(s,o,void 0),As(t,n,l,o)}if(a=(l&t.childLanes)!==0,ri||a){if(o=Bn,o!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|l)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,lo(t,r),Oi(o,t,r,-1))}return Yd(),o=ra(Error(We(421))),As(t,n,l,o)}return r.data==="$?"?(n.flags|=128,n.child=t.child,n=Xu.bind(null,t),r._reactRetry=n,null):(t=s.treeContext,hi=Ro(r.nextSibling),ui=n,cn=!0,Wi=null,t!==null&&(ji[Si++]=no,ji[Si++]=io,ji[Si++]=Ko,no=t.id,io=t.overflow,Ko=n),n=Dd(n,o.children),n.flags|=4096,n)}function Zc(t,n,i){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),Da(t.return,n,i)}function sa(t,n,i,o,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:r}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=o,s.tail=i,s.tailMode=r)}function op(t,n,i){var o=n.pendingProps,r=o.revealOrder,s=o.tail;if(Xn(t,n,o.children,i),o=fn.current,o&2)o=o&1|2,n.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zc(t,i,n);else if(t.tag===19)Zc(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(on(fn,o),!(n.mode&1))n.memoizedState=null;else switch(r){case"forwards":for(i=n.child,r=null;i!==null;)t=i.alternate,t!==null&&pl(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=n.child,n.child=null):(r=i.sibling,i.sibling=null),sa(n,!1,r,i,s);break;case"backwards":for(i=null,r=n.child,n.child=null;r!==null;){if(t=r.alternate,t!==null&&pl(t)===null){n.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}sa(n,!0,i,null,s);break;case"together":sa(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Gs(t,n){!(n.mode&1)&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function ao(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),Qo|=n.lanes,!(i&n.childLanes))return null;if(t!==null&&n.child!==t.child)throw Error(We(153));if(n.child!==null){for(t=n.child,i=Eo(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=Eo(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function Wu(t,n,i){switch(n.tag){case 3:np(n),Sr();break;case 5:Bf(n);break;case 1:li(n.type)&&sl(n);break;case 4:Ld(n,n.stateNode.containerInfo);break;case 10:var o=n.type._context,r=n.memoizedProps.value;on(dl,o._currentValue),o._currentValue=r;break;case 13:if(o=n.memoizedState,o!==null)return o.dehydrated!==null?(on(fn,fn.current&1),n.flags|=128,null):i&n.child.childLanes?ip(t,n,i):(on(fn,fn.current&1),t=ao(t,n,i),t!==null?t.sibling:null);on(fn,fn.current&1);break;case 19:if(o=(i&n.childLanes)!==0,t.flags&128){if(o)return op(t,n,i);n.flags|=128}if(r=n.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),on(fn,fn.current),o)break;return null;case 22:case 23:return n.lanes=0,ep(t,n,i)}return ao(t,n,i)}var rp,Ka,sp,lp;rp=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Ka=function(){};sp=function(t,n,i,o){var r=t.memoizedProps;if(r!==o){t=n.stateNode,Uo(Ki.current);var s=null;switch(i){case"input":r=ya(t,r),o=ya(t,o),s=[];break;case"select":r=hn({},r,{value:void 0}),o=hn({},o,{value:void 0}),s=[];break;case"textarea":r=va(t,r),o=va(t,o),s=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=ol)}Sa(i,o);var l;i=null;for(p in r)if(!o.hasOwnProperty(p)&&r.hasOwnProperty(p)&&r[p]!=null)if(p==="style"){var a=r[p];for(l in a)a.hasOwnProperty(l)&&(i||(i={}),i[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(qr.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in o){var d=o[p];if(a=r!=null?r[p]:void 0,o.hasOwnProperty(p)&&d!==a&&(d!=null||a!=null))if(p==="style")if(a){for(l in a)!a.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in d)d.hasOwnProperty(l)&&a[l]!==d[l]&&(i||(i={}),i[l]=d[l])}else i||(s||(s=[]),s.push(p,i)),i=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,a=a?a.__html:void 0,d!=null&&a!==d&&(s=s||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(qr.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&sn("scroll",t),s||a===d||(s=[])):(s=s||[]).push(p,d))}i&&(s=s||[]).push("style",i);var p=s;(n.updateQueue=p)&&(n.flags|=4)}};lp=function(t,n,i,o){i!==o&&(n.flags|=4)};function Mr(t,n){if(!cn)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Hn(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(n)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=i,n}function Mu(t,n,i){var o=n.pendingProps;switch(_d(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(n),null;case 1:return li(n.type)&&rl(),Hn(n),null;case 3:return o=n.stateNode,kr(),ln(si),ln(Vn),Fd(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Es(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Wi!==null&&(id(Wi),Wi=null))),Ka(t,n),Hn(n),null;case 5:Ad(n);var r=Uo(fs.current);if(i=n.type,t!==null&&n.stateNode!=null)sp(t,n,i,o,r),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!o){if(n.stateNode===null)throw Error(We(166));return Hn(n),null}if(t=Uo(Ki.current),Es(n)){o=n.stateNode,i=n.type;var s=n.memoizedProps;switch(o[Yi]=n,o[ds]=s,t=(n.mode&1)!==0,i){case"dialog":sn("cancel",o),sn("close",o);break;case"iframe":case"object":case"embed":sn("load",o);break;case"video":case"audio":for(r=0;r<$r.length;r++)sn($r[r],o);break;case"source":sn("error",o);break;case"img":case"image":case"link":sn("error",o),sn("load",o);break;case"details":sn("toggle",o);break;case"input":lc(o,s),sn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!s.multiple},sn("invalid",o);break;case"textarea":dc(o,s),sn("invalid",o)}Sa(i,s),r=null;for(var l in s)if(s.hasOwnProperty(l)){var a=s[l];l==="children"?typeof a=="string"?o.textContent!==a&&(s.suppressHydrationWarning!==!0&&Is(o.textContent,a,t),r=["children",a]):typeof a=="number"&&o.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Is(o.textContent,a,t),r=["children",""+a]):qr.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&sn("scroll",o)}switch(i){case"input":ws(o),ac(o,s,!0);break;case"textarea":ws(o),cc(o);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(o.onclick=ol)}o=r,n.updateQueue=o,o!==null&&(n.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=A0(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=l.createElement(i,{is:o.is}):(t=l.createElement(i),i==="select"&&(l=t,o.multiple?l.multiple=!0:o.size&&(l.size=o.size))):t=l.createElementNS(t,i),t[Yi]=n,t[ds]=o,rp(t,n,!1,!1),n.stateNode=t;e:{switch(l=wa(i,o),i){case"dialog":sn("cancel",t),sn("close",t),r=o;break;case"iframe":case"object":case"embed":sn("load",t),r=o;break;case"video":case"audio":for(r=0;r<$r.length;r++)sn($r[r],t);r=o;break;case"source":sn("error",t),r=o;break;case"img":case"image":case"link":sn("error",t),sn("load",t),r=o;break;case"details":sn("toggle",t),r=o;break;case"input":lc(t,o),r=ya(t,o),sn("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=hn({},o,{value:void 0}),sn("invalid",t);break;case"textarea":dc(t,o),r=va(t,o),sn("invalid",t);break;default:r=o}Sa(i,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var d=a[s];s==="style"?M0(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&F0(t,d)):s==="children"?typeof d=="string"?(i!=="textarea"||d!=="")&&es(t,d):typeof d=="number"&&es(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qr.hasOwnProperty(s)?d!=null&&s==="onScroll"&&sn("scroll",t):d!=null&&fd(t,s,d,l))}switch(i){case"input":ws(t),ac(t,o,!1);break;case"textarea":ws(t),cc(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Lo(o.value));break;case"select":t.multiple=!!o.multiple,s=o.value,s!=null?ur(t,!!o.multiple,s,!1):o.defaultValue!=null&&ur(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ol)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Hn(n),null;case 6:if(t&&n.stateNode!=null)lp(t,n,t.memoizedProps,o);else{if(typeof o!="string"&&n.stateNode===null)throw Error(We(166));if(i=Uo(fs.current),Uo(Ki.current),Es(n)){if(o=n.stateNode,i=n.memoizedProps,o[Yi]=n,(s=o.nodeValue!==i)&&(t=ui,t!==null))switch(t.tag){case 3:Is(o.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Is(o.nodeValue,i,(t.mode&1)!==0)}s&&(n.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Yi]=n,n.stateNode=o}return Hn(n),null;case 13:if(ln(fn),o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(cn&&hi!==null&&n.mode&1&&!(n.flags&128))Cf(),Sr(),n.flags|=98560,s=!1;else if(s=Es(n),o!==null&&o.dehydrated!==null){if(t===null){if(!s)throw Error(We(318));if(s=n.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(We(317));s[Yi]=n}else Sr(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Hn(n),s=!1}else Wi!==null&&(id(Wi),Wi=null),s=!0;if(!s)return n.flags&65536?n:null}return n.flags&128?(n.lanes=i,n):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(n.child.flags|=8192,n.mode&1&&(t===null||fn.current&1?Rn===0&&(Rn=3):Yd())),n.updateQueue!==null&&(n.flags|=4),Hn(n),null);case 4:return kr(),Ka(t,n),t===null&&ls(n.stateNode.containerInfo),Hn(n),null;case 10:return Bd(n.type._context),Hn(n),null;case 17:return li(n.type)&&rl(),Hn(n),null;case 19:if(ln(fn),s=n.memoizedState,s===null)return Hn(n),null;if(o=(n.flags&128)!==0,l=s.rendering,l===null)if(o)Mr(s,!1);else{if(Rn!==0||t!==null&&t.flags&128)for(t=n.child;t!==null;){if(l=pl(t),l!==null){for(n.flags|=128,Mr(s,!1),o=l.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),n.subtreeFlags=0,o=i,i=n.child;i!==null;)s=i,t=o,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return on(fn,fn.current&1|2),n.child}t=t.sibling}s.tail!==null&&jn()>_r&&(n.flags|=128,o=!0,Mr(s,!1),n.lanes=4194304)}else{if(!o)if(t=pl(l),t!==null){if(n.flags|=128,o=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),Mr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!cn)return Hn(n),null}else 2*jn()-s.renderingStartTime>_r&&i!==1073741824&&(n.flags|=128,o=!0,Mr(s,!1),n.lanes=4194304);s.isBackwards?(l.sibling=n.child,n.child=l):(i=s.last,i!==null?i.sibling=l:n.child=l,s.last=l)}return s.tail!==null?(n=s.tail,s.rendering=n,s.tail=n.sibling,s.renderingStartTime=jn(),n.sibling=null,i=fn.current,on(fn,o?i&1|2:i&1),n):(Hn(n),null);case 22:case 23:return Gd(),o=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(n.flags|=8192),o&&n.mode&1?pi&1073741824&&(Hn(n),n.subtreeFlags&6&&(n.flags|=8192)):Hn(n),null;case 24:return null;case 25:return null}throw Error(We(156,n.tag))}function Ou(t,n){switch(_d(n),n.tag){case 1:return li(n.type)&&rl(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return kr(),ln(si),ln(Vn),Fd(),t=n.flags,t&65536&&!(t&128)?(n.flags=t&-65537|128,n):null;case 5:return Ad(n),null;case 13:if(ln(fn),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(We(340));Sr()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ln(fn),null;case 4:return kr(),null;case 10:return Bd(n.type._context),null;case 22:case 23:return Gd(),null;case 24:return null;default:return null}}var Fs=!1,$n=!1,Pu=typeof WeakSet=="function"?WeakSet:Set,tt=null;function pr(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){xn(t,n,o)}else i.current=null}function Ja(t,n,i){try{i()}catch(o){xn(t,n,o)}}var qc=!1;function Nu(t,n){if(La=tl,t=pf(),kd(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var r=o.anchorOffset,s=o.focusNode;o=o.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var l=0,a=-1,d=-1,p=0,C=0,x=t,u=null;t:for(;;){for(var D;x!==i||r!==0&&x.nodeType!==3||(a=l+r),x!==s||o!==0&&x.nodeType!==3||(d=l+o),x.nodeType===3&&(l+=x.nodeValue.length),(D=x.firstChild)!==null;)u=x,x=D;for(;;){if(x===t)break t;if(u===i&&++p===r&&(a=l),u===s&&++C===o&&(d=l),(D=x.nextSibling)!==null)break;x=u,u=x.parentNode}x=D}i=a===-1||d===-1?null:{start:a,end:d}}else i=null}i=i||{start:0,end:0}}else i=null;for(Aa={focusedElem:t,selectionRange:i},tl=!1,tt=n;tt!==null;)if(n=tt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,tt=t;else for(;tt!==null;){n=tt;try{var O=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var Q=O.memoizedProps,De=O.memoizedState,f=n.stateNode,y=f.getSnapshotBeforeUpdate(n.elementType===n.type?Q:Ai(n.type,Q),De);f.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var R=n.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(We(163))}}catch(c){xn(n,n.return,c)}if(t=n.sibling,t!==null){t.return=n.return,tt=t;break}tt=n.return}return O=qc,qc=!1,O}function Jr(t,n,i){var o=n.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Ja(n,i,s)}r=r.next}while(r!==o)}}function zl(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.create;i.destroy=o()}i=i.next}while(i!==n)}}function Qa(t){var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof n=="function"?n(t):n.current=t}}function ap(t){var n=t.alternate;n!==null&&(t.alternate=null,ap(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[Yi],delete n[ds],delete n[Ma],delete n[Su],delete n[wu])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dp(t){return t.tag===5||t.tag===3||t.tag===4}function e0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Za(t,n,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=ol));else if(o!==4&&(t=t.child,t!==null))for(Za(t,n,i),t=t.sibling;t!==null;)Za(t,n,i),t=t.sibling}function qa(t,n,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(qa(t,n,i),t=t.sibling;t!==null;)qa(t,n,i),t=t.sibling}var An=null,Fi=!1;function mo(t,n,i){for(i=i.child;i!==null;)cp(t,n,i),i=i.sibling}function cp(t,n,i){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(jl,i)}catch{}switch(i.tag){case 5:$n||pr(i,n);case 6:var o=An,r=Fi;An=null,mo(t,n,i),An=o,Fi=r,An!==null&&(Fi?(t=An,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):An.removeChild(i.stateNode));break;case 18:An!==null&&(Fi?(t=An,i=i.stateNode,t.nodeType===8?ql(t.parentNode,i):t.nodeType===1&&ql(t,i),os(t)):ql(An,i.stateNode));break;case 4:o=An,r=Fi,An=i.stateNode.containerInfo,Fi=!0,mo(t,n,i),An=o,Fi=r;break;case 0:case 11:case 14:case 15:if(!$n&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var s=r,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Ja(i,n,l),r=r.next}while(r!==o)}mo(t,n,i);break;case 1:if(!$n&&(pr(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(a){xn(i,n,a)}mo(t,n,i);break;case 21:mo(t,n,i);break;case 22:i.mode&1?($n=(o=$n)||i.memoizedState!==null,mo(t,n,i),$n=o):mo(t,n,i);break;default:mo(t,n,i)}}function t0(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Pu),n.forEach(function(o){var r=Ku.bind(null,t,o);i.has(o)||(i.add(o),o.then(r,r))})}}function Ei(t,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var r=i[o];try{var s=t,l=n,a=l;e:for(;a!==null;){switch(a.tag){case 5:An=a.stateNode,Fi=!1;break e;case 3:An=a.stateNode.containerInfo,Fi=!0;break e;case 4:An=a.stateNode.containerInfo,Fi=!0;break e}a=a.return}if(An===null)throw Error(We(160));cp(s,l,r),An=null,Fi=!1;var d=r.alternate;d!==null&&(d.return=null),r.return=null}catch(p){xn(r,n,p)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)fp(n,t),n=n.sibling}function fp(t,n){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ei(n,t),Ui(t),o&4){try{Jr(3,t,t.return),zl(3,t)}catch(Q){xn(t,t.return,Q)}try{Jr(5,t,t.return)}catch(Q){xn(t,t.return,Q)}}break;case 1:Ei(n,t),Ui(t),o&512&&i!==null&&pr(i,i.return);break;case 5:if(Ei(n,t),Ui(t),o&512&&i!==null&&pr(i,i.return),t.flags&32){var r=t.stateNode;try{es(r,"")}catch(Q){xn(t,t.return,Q)}}if(o&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,l=i!==null?i.memoizedProps:s,a=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&E0(r,s),wa(a,l);var p=wa(a,s);for(l=0;l<d.length;l+=2){var C=d[l],x=d[l+1];C==="style"?M0(r,x):C==="dangerouslySetInnerHTML"?F0(r,x):C==="children"?es(r,x):fd(r,C,x,p)}switch(a){case"input":ma(r,s);break;case"textarea":L0(r,s);break;case"select":var u=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var D=s.value;D!=null?ur(r,!!s.multiple,D,!1):u!==!!s.multiple&&(s.defaultValue!=null?ur(r,!!s.multiple,s.defaultValue,!0):ur(r,!!s.multiple,s.multiple?[]:"",!1))}r[ds]=s}catch(Q){xn(t,t.return,Q)}}break;case 6:if(Ei(n,t),Ui(t),o&4){if(t.stateNode===null)throw Error(We(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(Q){xn(t,t.return,Q)}}break;case 3:if(Ei(n,t),Ui(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{os(n.containerInfo)}catch(Q){xn(t,t.return,Q)}break;case 4:Ei(n,t),Ui(t);break;case 13:Ei(n,t),Ui(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Vd=jn())),o&4&&t0(t);break;case 22:if(C=i!==null&&i.memoizedState!==null,t.mode&1?($n=(p=$n)||C,Ei(n,t),$n=p):Ei(n,t),Ui(t),o&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!C&&t.mode&1)for(tt=t,C=t.child;C!==null;){for(x=tt=C;tt!==null;){switch(u=tt,D=u.child,u.tag){case 0:case 11:case 14:case 15:Jr(4,u,u.return);break;case 1:pr(u,u.return);var O=u.stateNode;if(typeof O.componentWillUnmount=="function"){o=u,i=u.return;try{n=o,O.props=n.memoizedProps,O.state=n.memoizedState,O.componentWillUnmount()}catch(Q){xn(o,i,Q)}}break;case 5:pr(u,u.return);break;case 22:if(u.memoizedState!==null){i0(x);continue}}D!==null?(D.return=u,tt=D):i0(x)}C=C.sibling}e:for(C=null,x=t;;){if(x.tag===5){if(C===null){C=x;try{r=x.stateNode,p?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=x.stateNode,d=x.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,a.style.display=W0("display",l))}catch(Q){xn(t,t.return,Q)}}}else if(x.tag===6){if(C===null)try{x.stateNode.nodeValue=p?"":x.memoizedProps}catch(Q){xn(t,t.return,Q)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;C===x&&(C=null),x=x.return}C===x&&(C=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Ei(n,t),Ui(t),o&4&&t0(t);break;case 21:break;default:Ei(n,t),Ui(t)}}function Ui(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(dp(i)){var o=i;break e}i=i.return}throw Error(We(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(es(r,""),o.flags&=-33);var s=e0(t);qa(t,s,r);break;case 3:case 4:var l=o.stateNode.containerInfo,a=e0(t);Za(t,a,l);break;default:throw Error(We(161))}}catch(d){xn(t,t.return,d)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Du(t,n,i){tt=t,pp(t)}function pp(t,n,i){for(var o=(t.mode&1)!==0;tt!==null;){var r=tt,s=r.child;if(r.tag===22&&o){var l=r.memoizedState!==null||Fs;if(!l){var a=r.alternate,d=a!==null&&a.memoizedState!==null||$n;a=Fs;var p=$n;if(Fs=l,($n=d)&&!p)for(tt=r;tt!==null;)l=tt,d=l.child,l.tag===22&&l.memoizedState!==null?o0(r):d!==null?(d.return=l,tt=d):o0(r);for(;s!==null;)tt=s,pp(s),s=s.sibling;tt=r,Fs=a,$n=p}n0(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,tt=s):n0(t)}}function n0(t){for(;tt!==null;){var n=tt;if(n.flags&8772){var i=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:$n||zl(5,n);break;case 1:var o=n.stateNode;if(n.flags&4&&!$n)if(i===null)o.componentDidMount();else{var r=n.elementType===n.type?i.memoizedProps:Ai(n.type,i.memoizedProps);o.componentDidUpdate(r,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var s=n.updateQueue;s!==null&&Nc(n,s,o);break;case 3:var l=n.updateQueue;if(l!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Nc(n,l,i)}break;case 5:var a=n.stateNode;if(i===null&&n.flags&4){i=a;var d=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&i.focus();break;case"img":d.src&&(i.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var p=n.alternate;if(p!==null){var C=p.memoizedState;if(C!==null){var x=C.dehydrated;x!==null&&os(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(We(163))}$n||n.flags&512&&Qa(n)}catch(u){xn(n,n.return,u)}}if(n===t){tt=null;break}if(i=n.sibling,i!==null){i.return=n.return,tt=i;break}tt=n.return}}function i0(t){for(;tt!==null;){var n=tt;if(n===t){tt=null;break}var i=n.sibling;if(i!==null){i.return=n.return,tt=i;break}tt=n.return}}function o0(t){for(;tt!==null;){var n=tt;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{zl(4,n)}catch(d){xn(n,i,d)}break;case 1:var o=n.stateNode;if(typeof o.componentDidMount=="function"){var r=n.return;try{o.componentDidMount()}catch(d){xn(n,r,d)}}var s=n.return;try{Qa(n)}catch(d){xn(n,s,d)}break;case 5:var l=n.return;try{Qa(n)}catch(d){xn(n,l,d)}}}catch(d){xn(n,n.return,d)}if(n===t){tt=null;break}var a=n.sibling;if(a!==null){a.return=n.return,tt=a;break}tt=n.return}}var Hu=Math.ceil,gl=co.ReactCurrentDispatcher,Hd=co.ReactCurrentOwner,ki=co.ReactCurrentBatchConfig,Kt=0,Bn=null,Cn=null,Fn=0,pi=0,hr=Wo(0),Rn=0,gs=null,Qo=0,Bl=0,$d=0,Qr=null,oi=null,Vd=0,_r=1/0,eo=null,xl=!1,ed=null,Bo=null,Ws=!1,ko=null,yl=0,Zr=0,td=null,Ys=-1,Xs=0;function Kn(){return Kt&6?jn():Ys!==-1?Ys:Ys=jn()}function Io(t){return t.mode&1?Kt&2&&Fn!==0?Fn&-Fn:Cu.transition!==null?(Xs===0&&(Xs=K0()),Xs):(t=tn,t!==0||(t=window.event,t=t===void 0?16:nf(t.type)),t):1}function Oi(t,n,i,o){if(50<Zr)throw Zr=0,td=null,Error(We(185));ys(t,i,o),(!(Kt&2)||t!==Bn)&&(t===Bn&&(!(Kt&2)&&(Bl|=i),Rn===4&&So(t,Fn)),ai(t,o),i===1&&Kt===0&&!(n.mode&1)&&(_r=jn()+500,_l&&Mo()))}function ai(t,n){var i=t.callbackNode;Ch(t,n);var o=el(t,t===Bn?Fn:0);if(o===0)i!==null&&hc(i),t.callbackNode=null,t.callbackPriority=0;else if(n=o&-o,t.callbackPriority!==n){if(i!=null&&hc(i),n===1)t.tag===0?ku(r0.bind(null,t)):Sf(r0.bind(null,t)),vu(function(){!(Kt&6)&&Mo()}),i=null;else{switch(J0(o)){case 1:i=xd;break;case 4:i=Y0;break;case 16:i=qs;break;case 536870912:i=X0;break;default:i=qs}i=vp(i,hp.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function hp(t,n){if(Ys=-1,Xs=0,Kt&6)throw Error(We(327));var i=t.callbackNode;if(br()&&t.callbackNode!==i)return null;var o=el(t,t===Bn?Fn:0);if(o===0)return null;if(o&30||o&t.expiredLanes||n)n=ml(t,o);else{n=o;var r=Kt;Kt|=2;var s=gp();(Bn!==t||Fn!==n)&&(eo=null,_r=jn()+500,Go(t,n));do try{Uu();break}catch(a){up(t,a)}while(!0);zd(),gl.current=s,Kt=r,Cn!==null?n=0:(Bn=null,Fn=0,n=Rn)}if(n!==0){if(n===2&&(r=Ra(t),r!==0&&(o=r,n=nd(t,r))),n===1)throw i=gs,Go(t,0),So(t,o),ai(t,jn()),i;if(n===6)So(t,o);else{if(r=t.current.alternate,!(o&30)&&!$u(r)&&(n=ml(t,o),n===2&&(s=Ra(t),s!==0&&(o=s,n=nd(t,s))),n===1))throw i=gs,Go(t,0),So(t,o),ai(t,jn()),i;switch(t.finishedWork=r,t.finishedLanes=o,n){case 0:case 1:throw Error(We(345));case 2:Ho(t,oi,eo);break;case 3:if(So(t,o),(o&130023424)===o&&(n=Vd+500-jn(),10<n)){if(el(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){Kn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Wa(Ho.bind(null,t,oi,eo),n);break}Ho(t,oi,eo);break;case 4:if(So(t,o),(o&4194240)===o)break;for(n=t.eventTimes,r=-1;0<o;){var l=31-Mi(o);s=1<<l,l=n[l],l>r&&(r=l),o&=~s}if(o=r,o=jn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Hu(o/1960))-o,10<o){t.timeoutHandle=Wa(Ho.bind(null,t,oi,eo),o);break}Ho(t,oi,eo);break;case 5:Ho(t,oi,eo);break;default:throw Error(We(329))}}}return ai(t,jn()),t.callbackNode===i?hp.bind(null,t):null}function nd(t,n){var i=Qr;return t.current.memoizedState.isDehydrated&&(Go(t,n).flags|=256),t=ml(t,n),t!==2&&(n=oi,oi=i,n!==null&&id(n)),t}function id(t){oi===null?oi=t:oi.push.apply(oi,t)}function $u(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var r=i[o],s=r.getSnapshot;r=r.value;try{if(!Pi(s(),r))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function So(t,n){for(n&=~$d,n&=~Bl,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Mi(n),o=1<<i;t[i]=-1,n&=~o}}function r0(t){if(Kt&6)throw Error(We(327));br();var n=el(t,0);if(!(n&1))return ai(t,jn()),null;var i=ml(t,n);if(t.tag!==0&&i===2){var o=Ra(t);o!==0&&(n=o,i=nd(t,o))}if(i===1)throw i=gs,Go(t,0),So(t,n),ai(t,jn()),i;if(i===6)throw Error(We(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ho(t,oi,eo),ai(t,jn()),null}function Ud(t,n){var i=Kt;Kt|=1;try{return t(n)}finally{Kt=i,Kt===0&&(_r=jn()+500,_l&&Mo())}}function Zo(t){ko!==null&&ko.tag===0&&!(Kt&6)&&br();var n=Kt;Kt|=1;var i=ki.transition,o=tn;try{if(ki.transition=null,tn=1,t)return t()}finally{tn=o,ki.transition=i,Kt=n,!(Kt&6)&&Mo()}}function Gd(){pi=hr.current,ln(hr)}function Go(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,bu(i)),Cn!==null)for(i=Cn.return;i!==null;){var o=i;switch(_d(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&rl();break;case 3:kr(),ln(si),ln(Vn),Fd();break;case 5:Ad(o);break;case 4:kr();break;case 13:ln(fn);break;case 19:ln(fn);break;case 10:Bd(o.type._context);break;case 22:case 23:Gd()}i=i.return}if(Bn=t,Cn=t=Eo(t.current,null),Fn=pi=n,Rn=0,gs=null,$d=Bl=Qo=0,oi=Qr=null,Vo!==null){for(n=0;n<Vo.length;n++)if(i=Vo[n],o=i.interleaved,o!==null){i.interleaved=null;var r=o.next,s=i.pending;if(s!==null){var l=s.next;s.next=r,o.next=l}i.pending=o}Vo=null}return t}function up(t,n){do{var i=Cn;try{if(zd(),Vs.current=ul,hl){for(var o=pn.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}hl=!1}if(Jo=0,zn=Tn=pn=null,Kr=!1,ps=0,Hd.current=null,i===null||i.return===null){Rn=1,gs=n,Cn=null;break}e:{var s=t,l=i.return,a=i,d=n;if(n=Fn,a.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,C=a,x=C.tag;if(!(C.mode&1)&&(x===0||x===11||x===15)){var u=C.alternate;u?(C.updateQueue=u.updateQueue,C.memoizedState=u.memoizedState,C.lanes=u.lanes):(C.updateQueue=null,C.memoizedState=null)}var D=Gc(l);if(D!==null){D.flags&=-257,Yc(D,l,a,s,n),D.mode&1&&Uc(s,p,n),n=D,d=p;var O=n.updateQueue;if(O===null){var Q=new Set;Q.add(d),n.updateQueue=Q}else O.add(d);break e}else{if(!(n&1)){Uc(s,p,n),Yd();break e}d=Error(We(426))}}else if(cn&&a.mode&1){var De=Gc(l);if(De!==null){!(De.flags&65536)&&(De.flags|=256),Yc(De,l,a,s,n),Td(Cr(d,a));break e}}s=d=Cr(d,a),Rn!==4&&(Rn=2),Qr===null?Qr=[s]:Qr.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,n&=-n,s.lanes|=n;var f=Qf(s,d,n);Pc(s,f);break e;case 1:a=d;var y=s.type,R=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Bo===null||!Bo.has(R)))){s.flags|=65536,n&=-n,s.lanes|=n;var c=Zf(s,a,n);Pc(s,c);break e}}s=s.return}while(s!==null)}yp(i)}catch(N){n=N,Cn===i&&i!==null&&(Cn=i=i.return);continue}break}while(!0)}function gp(){var t=gl.current;return gl.current=ul,t===null?ul:t}function Yd(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Bn===null||!(Qo&268435455)&&!(Bl&268435455)||So(Bn,Fn)}function ml(t,n){var i=Kt;Kt|=2;var o=gp();(Bn!==t||Fn!==n)&&(eo=null,Go(t,n));do try{Vu();break}catch(r){up(t,r)}while(!0);if(zd(),Kt=i,gl.current=o,Cn!==null)throw Error(We(261));return Bn=null,Fn=0,Rn}function Vu(){for(;Cn!==null;)xp(Cn)}function Uu(){for(;Cn!==null&&!xh();)xp(Cn)}function xp(t){var n=bp(t.alternate,t,pi);t.memoizedProps=t.pendingProps,n===null?yp(t):Cn=n,Hd.current=null}function yp(t){var n=t;do{var i=n.alternate;if(t=n.return,n.flags&32768){if(i=Ou(i,n),i!==null){i.flags&=32767,Cn=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Rn=6,Cn=null;return}}else if(i=Mu(i,n,pi),i!==null){Cn=i;return}if(n=n.sibling,n!==null){Cn=n;return}Cn=n=t}while(n!==null);Rn===0&&(Rn=5)}function Ho(t,n,i){var o=tn,r=ki.transition;try{ki.transition=null,tn=1,Gu(t,n,i,o)}finally{ki.transition=r,tn=o}return null}function Gu(t,n,i,o){do br();while(ko!==null);if(Kt&6)throw Error(We(327));i=t.finishedWork;var r=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(We(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(_h(t,s),t===Bn&&(Cn=Bn=null,Fn=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Ws||(Ws=!0,vp(qs,function(){return br(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=ki.transition,ki.transition=null;var l=tn;tn=1;var a=Kt;Kt|=4,Hd.current=null,Nu(t,i),fp(i,t),pu(Aa),tl=!!La,Aa=La=null,t.current=i,Du(i),yh(),Kt=a,tn=l,ki.transition=s}else t.current=i;if(Ws&&(Ws=!1,ko=t,yl=r),s=t.pendingLanes,s===0&&(Bo=null),vh(i.stateNode),ai(t,jn()),n!==null)for(o=t.onRecoverableError,i=0;i<n.length;i++)r=n[i],o(r.value,{componentStack:r.stack,digest:r.digest});if(xl)throw xl=!1,t=ed,ed=null,t;return yl&1&&t.tag!==0&&br(),s=t.pendingLanes,s&1?t===td?Zr++:(Zr=0,td=t):Zr=0,Mo(),null}function br(){if(ko!==null){var t=J0(yl),n=ki.transition,i=tn;try{if(ki.transition=null,tn=16>t?16:t,ko===null)var o=!1;else{if(t=ko,ko=null,yl=0,Kt&6)throw Error(We(331));var r=Kt;for(Kt|=4,tt=t.current;tt!==null;){var s=tt,l=s.child;if(tt.flags&16){var a=s.deletions;if(a!==null){for(var d=0;d<a.length;d++){var p=a[d];for(tt=p;tt!==null;){var C=tt;switch(C.tag){case 0:case 11:case 15:Jr(8,C,s)}var x=C.child;if(x!==null)x.return=C,tt=x;else for(;tt!==null;){C=tt;var u=C.sibling,D=C.return;if(ap(C),C===p){tt=null;break}if(u!==null){u.return=D,tt=u;break}tt=D}}}var O=s.alternate;if(O!==null){var Q=O.child;if(Q!==null){O.child=null;do{var De=Q.sibling;Q.sibling=null,Q=De}while(Q!==null)}}tt=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,tt=l;else e:for(;tt!==null;){if(s=tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jr(9,s,s.return)}var f=s.sibling;if(f!==null){f.return=s.return,tt=f;break e}tt=s.return}}var y=t.current;for(tt=y;tt!==null;){l=tt;var R=l.child;if(l.subtreeFlags&2064&&R!==null)R.return=l,tt=R;else e:for(l=y;tt!==null;){if(a=tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zl(9,a)}}catch(N){xn(a,a.return,N)}if(a===l){tt=null;break e}var c=a.sibling;if(c!==null){c.return=a.return,tt=c;break e}tt=a.return}}if(Kt=r,Mo(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(jl,t)}catch{}o=!0}return o}finally{tn=i,ki.transition=n}}return!1}function s0(t,n,i){n=Cr(i,n),n=Qf(t,n,1),t=zo(t,n,1),n=Kn(),t!==null&&(ys(t,1,n),ai(t,n))}function xn(t,n,i){if(t.tag===3)s0(t,t,i);else for(;n!==null;){if(n.tag===3){s0(n,t,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Bo===null||!Bo.has(o))){t=Cr(i,t),t=Zf(n,t,1),n=zo(n,t,1),t=Kn(),n!==null&&(ys(n,1,t),ai(n,t));break}}n=n.return}}function Yu(t,n,i){var o=t.pingCache;o!==null&&o.delete(n),n=Kn(),t.pingedLanes|=t.suspendedLanes&i,Bn===t&&(Fn&i)===i&&(Rn===4||Rn===3&&(Fn&130023424)===Fn&&500>jn()-Vd?Go(t,0):$d|=i),ai(t,n)}function mp(t,n){n===0&&(t.mode&1?(n=_s,_s<<=1,!(_s&130023424)&&(_s=4194304)):n=1);var i=Kn();t=lo(t,n),t!==null&&(ys(t,n,i),ai(t,i))}function Xu(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),mp(t,i)}function Ku(t,n){var i=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(We(314))}o!==null&&o.delete(n),mp(t,i)}var bp;bp=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||si.current)ri=!0;else{if(!(t.lanes&i)&&!(n.flags&128))return ri=!1,Wu(t,n,i);ri=!!(t.flags&131072)}else ri=!1,cn&&n.flags&1048576&&wf(n,al,n.index);switch(n.lanes=0,n.tag){case 2:var o=n.type;Gs(t,n),t=n.pendingProps;var r=jr(n,Vn.current);mr(n,i),r=Md(null,n,o,t,r,i);var s=Od();return n.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,li(o)?(s=!0,sl(n)):s=!1,n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ed(n),r.updater=Rl,n.stateNode=r,r._reactInternals=n,$a(n,o,t,i),n=Ga(null,n,o,!0,s,i)):(n.tag=0,cn&&s&&Cd(n),Xn(null,n,r,i),n=n.child),n;case 16:o=n.elementType;e:{switch(Gs(t,n),t=n.pendingProps,r=o._init,o=r(o._payload),n.type=o,r=n.tag=Qu(o),t=Ai(o,t),r){case 0:n=Ua(null,n,o,t,i);break e;case 1:n=Jc(null,n,o,t,i);break e;case 11:n=Xc(null,n,o,t,i);break e;case 14:n=Kc(null,n,o,Ai(o.type,t),i);break e}throw Error(We(306,o,""))}return n;case 0:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Ai(o,r),Ua(t,n,o,r,i);case 1:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Ai(o,r),Jc(t,n,o,r,i);case 3:e:{if(np(n),t===null)throw Error(We(387));o=n.pendingProps,s=n.memoizedState,r=s.element,zf(t,n),fl(n,o,null,i);var l=n.memoizedState;if(o=l.element,s.isDehydrated)if(s={element:o,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},n.updateQueue.baseState=s,n.memoizedState=s,n.flags&256){r=Cr(Error(We(423)),n),n=Qc(t,n,o,i,r);break e}else if(o!==r){r=Cr(Error(We(424)),n),n=Qc(t,n,o,i,r);break e}else for(hi=Ro(n.stateNode.containerInfo.firstChild),ui=n,cn=!0,Wi=null,i=Tf(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Sr(),o===r){n=ao(t,n,i);break e}Xn(t,n,o,i)}n=n.child}return n;case 5:return Bf(n),t===null&&Na(n),o=n.type,r=n.pendingProps,s=t!==null?t.memoizedProps:null,l=r.children,Fa(o,r)?l=null:s!==null&&Fa(o,s)&&(n.flags|=32),tp(t,n),Xn(t,n,l,i),n.child;case 6:return t===null&&Na(n),null;case 13:return ip(t,n,i);case 4:return Ld(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=wr(n,null,o,i):Xn(t,n,o,i),n.child;case 11:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Ai(o,r),Xc(t,n,o,r,i);case 7:return Xn(t,n,n.pendingProps,i),n.child;case 8:return Xn(t,n,n.pendingProps.children,i),n.child;case 12:return Xn(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(o=n.type._context,r=n.pendingProps,s=n.memoizedProps,l=r.value,on(dl,o._currentValue),o._currentValue=l,s!==null)if(Pi(s.value,l)){if(s.children===r.children&&!si.current){n=ao(t,n,i);break e}}else for(s=n.child,s!==null&&(s.return=n);s!==null;){var a=s.dependencies;if(a!==null){l=s.child;for(var d=a.firstContext;d!==null;){if(d.context===o){if(s.tag===1){d=oo(-1,i&-i),d.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var C=p.pending;C===null?d.next=d:(d.next=C.next,C.next=d),p.pending=d}}s.lanes|=i,d=s.alternate,d!==null&&(d.lanes|=i),Da(s.return,i,n),a.lanes|=i;break}d=d.next}}else if(s.tag===10)l=s.type===n.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(We(341));l.lanes|=i,a=l.alternate,a!==null&&(a.lanes|=i),Da(l,i,n),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===n){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Xn(t,n,r.children,i),n=n.child}return n;case 9:return r=n.type,o=n.pendingProps.children,mr(n,i),r=Ci(r),o=o(r),n.flags|=1,Xn(t,n,o,i),n.child;case 14:return o=n.type,r=Ai(o,n.pendingProps),r=Ai(o.type,r),Kc(t,n,o,r,i);case 15:return qf(t,n,n.type,n.pendingProps,i);case 17:return o=n.type,r=n.pendingProps,r=n.elementType===o?r:Ai(o,r),Gs(t,n),n.tag=1,li(o)?(t=!0,sl(n)):t=!1,mr(n,i),Jf(n,o,r),$a(n,o,r,i),Ga(null,n,o,!0,t,i);case 19:return op(t,n,i);case 22:return ep(t,n,i)}throw Error(We(156,n.tag))};function vp(t,n){return G0(t,n)}function Ju(t,n,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(t,n,i,o){return new Ju(t,n,i,o)}function Xd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qu(t){if(typeof t=="function")return Xd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hd)return 11;if(t===ud)return 14}return 2}function Eo(t,n){var i=t.alternate;return i===null?(i=wi(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Ks(t,n,i,o,r,s){var l=2;if(o=t,typeof t=="function")Xd(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case ir:return Yo(i.children,r,s,n);case pd:l=8,r|=8;break;case ha:return t=wi(12,i,n,r|2),t.elementType=ha,t.lanes=s,t;case ua:return t=wi(13,i,n,r),t.elementType=ua,t.lanes=s,t;case ga:return t=wi(19,i,n,r),t.elementType=ga,t.lanes=s,t;case z0:return Il(i,r,s,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T0:l=10;break e;case R0:l=9;break e;case hd:l=11;break e;case ud:l=14;break e;case bo:l=16,o=null;break e}throw Error(We(130,t==null?t:typeof t,""))}return n=wi(l,i,n,r),n.elementType=t,n.type=o,n.lanes=s,n}function Yo(t,n,i,o){return t=wi(7,t,o,n),t.lanes=i,t}function Il(t,n,i,o){return t=wi(22,t,o,n),t.elementType=z0,t.lanes=i,t.stateNode={isHidden:!1},t}function la(t,n,i){return t=wi(6,t,null,n),t.lanes=i,t}function aa(t,n,i){return n=wi(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function Zu(t,n,i,o,r){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Kd(t,n,i,o,r,s,l,a,d){return t=new Zu(t,n,i,a,d),n===1?(n=1,s===!0&&(n|=8)):n=0,s=wi(3,null,null,n),t.current=s,s.stateNode=t,s.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ed(s),t}function qu(t,n,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:nr,key:o==null?null:""+o,children:t,containerInfo:n,implementation:i}}function jp(t){if(!t)return Ao;t=t._reactInternals;e:{if(er(t)!==t||t.tag!==1)throw Error(We(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(li(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(We(171))}if(t.tag===1){var i=t.type;if(li(i))return jf(t,i,n)}return n}function Sp(t,n,i,o,r,s,l,a,d){return t=Kd(i,o,!0,t,r,s,l,a,d),t.context=jp(null),i=t.current,o=Kn(),r=Io(i),s=oo(o,r),s.callback=n??null,zo(i,s,r),t.current.lanes=r,ys(t,r,o),ai(t,o),t}function El(t,n,i,o){var r=n.current,s=Kn(),l=Io(r);return i=jp(i),n.context===null?n.context=i:n.pendingContext=i,n=oo(s,l),n.payload={element:t},o=o===void 0?null:o,o!==null&&(n.callback=o),t=zo(r,n,l),t!==null&&(Oi(t,r,l,s),$s(t,r,l)),l}function bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function l0(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function Jd(t,n){l0(t,n),(t=t.alternate)&&l0(t,n)}function eg(){return null}var wp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qd(t){this._internalRoot=t}Ll.prototype.render=Qd.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(We(409));El(t,n,null,null)};Ll.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Zo(function(){El(null,t,null,null)}),n[so]=null}};function Ll(t){this._internalRoot=t}Ll.prototype.unstable_scheduleHydration=function(t){if(t){var n=q0();t={blockedOn:null,target:t,priority:n};for(var i=0;i<jo.length&&n!==0&&n<jo[i].priority;i++);jo.splice(i,0,t),i===0&&tf(t)}};function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Al(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a0(){}function tg(t,n,i,o,r){if(r){if(typeof o=="function"){var s=o;o=function(){var p=bl(l);s.call(p)}}var l=Sp(n,o,t,0,null,!1,!1,"",a0);return t._reactRootContainer=l,t[so]=l.current,ls(t.nodeType===8?t.parentNode:t),Zo(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var a=o;o=function(){var p=bl(d);a.call(p)}}var d=Kd(t,0,!1,null,null,!1,!1,"",a0);return t._reactRootContainer=d,t[so]=d.current,ls(t.nodeType===8?t.parentNode:t),Zo(function(){El(n,d,i,o)}),d}function Fl(t,n,i,o,r){var s=i._reactRootContainer;if(s){var l=s;if(typeof r=="function"){var a=r;r=function(){var d=bl(l);a.call(d)}}El(n,l,t,r)}else l=tg(i,n,t,r,o);return bl(l)}Q0=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=Hr(n.pendingLanes);i!==0&&(yd(n,i|1),ai(n,jn()),!(Kt&6)&&(_r=jn()+500,Mo()))}break;case 13:Zo(function(){var o=lo(t,1);if(o!==null){var r=Kn();Oi(o,t,1,r)}}),Jd(t,1)}};md=function(t){if(t.tag===13){var n=lo(t,134217728);if(n!==null){var i=Kn();Oi(n,t,134217728,i)}Jd(t,134217728)}};Z0=function(t){if(t.tag===13){var n=Io(t),i=lo(t,n);if(i!==null){var o=Kn();Oi(i,t,n,o)}Jd(t,n)}};q0=function(){return tn};ef=function(t,n){var i=tn;try{return tn=t,n()}finally{tn=i}};Ca=function(t,n,i){switch(n){case"input":if(ma(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==t&&o.form===t.form){var r=Cl(o);if(!r)throw Error(We(90));I0(o),ma(o,r)}}}break;case"textarea":L0(t,i);break;case"select":n=i.value,n!=null&&ur(t,!!i.multiple,n,!1)}};N0=Ud;D0=Zo;var ng={usingClientEntryPoint:!1,Events:[bs,lr,Cl,O0,P0,Ud]},Or={findFiberByHostInstance:$o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ig={bundleType:Or.bundleType,version:Or.version,rendererPackageName:Or.rendererPackageName,rendererConfig:Or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:co.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V0(t),t===null?null:t.stateNode},findFiberByHostInstance:Or.findFiberByHostInstance||eg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ms=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ms.isDisabled&&Ms.supportsFiber)try{jl=Ms.inject(ig),Xi=Ms}catch{}}xi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ng;xi.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zd(n))throw Error(We(200));return qu(t,n,null,i)};xi.createRoot=function(t,n){if(!Zd(t))throw Error(We(299));var i=!1,o="",r=wp;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(r=n.onRecoverableError)),n=Kd(t,1,!1,null,null,i,!1,o,r),t[so]=n.current,ls(t.nodeType===8?t.parentNode:t),new Qd(n)};xi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(We(188)):(t=Object.keys(t).join(","),Error(We(268,t)));return t=V0(n),t=t===null?null:t.stateNode,t};xi.flushSync=function(t){return Zo(t)};xi.hydrate=function(t,n,i){if(!Al(n))throw Error(We(200));return Fl(null,t,n,!0,i)};xi.hydrateRoot=function(t,n,i){if(!Zd(t))throw Error(We(405));var o=i!=null&&i.hydratedSources||null,r=!1,s="",l=wp;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(l=i.onRecoverableError)),n=Sp(n,null,t,1,i??null,r,!1,s,l),t[so]=n.current,ls(t),o)for(t=0;t<o.length;t++)i=o[t],r=i._getVersion,r=r(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,r]:n.mutableSourceEagerHydrationData.push(i,r);return new Ll(n)};xi.render=function(t,n,i){if(!Al(n))throw Error(We(200));return Fl(null,t,n,!1,i)};xi.unmountComponentAtNode=function(t){if(!Al(t))throw Error(We(40));return t._reactRootContainer?(Zo(function(){Fl(null,null,t,!1,function(){t._reactRootContainer=null,t[so]=null})}),!0):!1};xi.unstable_batchedUpdates=Ud;xi.unstable_renderSubtreeIntoContainer=function(t,n,i,o){if(!Al(i))throw Error(We(200));if(t==null||t._reactInternals===void 0)throw Error(We(38));return Fl(t,n,i,!1,o)};xi.version="18.3.1-next-f1338f8080-20240426";function kp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kp)}catch(t){console.error(t)}}kp(),w0.exports=xi;var og=w0.exports,d0=og;fa.createRoot=d0.createRoot,fa.hydrateRoot=d0.hydrateRoot;var c0={},rg="@vercel/speed-insights",sg="1.3.1",lg=()=>{window.si||(window.si=function(...n){(window.siq=window.siq||[]).push(n)})};function ag(){return typeof window<"u"}function dg(){try{const t="production"}catch{}return"production"}function Cp(){return dg()==="development"}function cg(t){return t.scriptSrc?t.scriptSrc:Cp()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":t.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":t.basePath?`${t.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function fg(t={}){var n;if(!ag()||t.route===null)return null;lg();const i=cg(t);if(document.head.querySelector(`script[src*="${i}"]`))return null;t.beforeSend&&((n=window.si)==null||n.call(window,"beforeSend",t.beforeSend));const o=document.createElement("script");return o.src=i,o.defer=!0,o.dataset.sdkn=rg+(t.framework?`/${t.framework}`:""),o.dataset.sdkv=sg,t.sampleRate&&(o.dataset.sampleRate=t.sampleRate.toString()),t.route&&(o.dataset.route=t.route),t.endpoint?o.dataset.endpoint=t.endpoint:t.basePath&&(o.dataset.endpoint=`${t.basePath}/speed-insights/vitals`),t.dsn&&(o.dataset.dsn=t.dsn),Cp()&&t.debug===!1&&(o.dataset.debug="false"),o.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${i}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(o),{setRoute:r=>{o.dataset.route=r??void 0}}}function pg(){if(!(typeof process>"u"||typeof c0>"u"))return c0.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function hg(t){A.useEffect(()=>{var i;t.beforeSend&&((i=window.si)==null||i.call(window,"beforeSend",t.beforeSend))},[t.beforeSend]);const n=A.useRef(null);return A.useEffect(()=>{if(n.current)t.route&&n.current(t.route);else{const i=fg({framework:t.framework??"react",basePath:t.basePath??pg(),...t});i&&(n.current=i.setRoute)}},[t.route]),null}const ug=({gexData:t,currentPrice:n})=>{const[i,o]=A.useState("table"),[r,s]=A.useState(10),[l,a]=A.useState(null),[d,p]=A.useState(null),C=(t==null?void 0:t.gex_profile)||[];t!=null&&t.gex_levels;const x=(t==null?void 0:t.gamma_regime)||"UNKNOWN",u=(t==null?void 0:t.total_gex)||0,D=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0,O=(t==null?void 0:t.max_pain)||0;t!=null&&t.call_wall,t!=null&&t.put_wall,t!=null&&t.hvl;const Q=C.filter(v=>Math.abs(v.gex)>.1).sort((v,he)=>he.strike-v.strike).slice(0,r).map(v=>{const he=v.gex<0,le=n?Math.round(v.strike-n):0,Ne=Math.round(50+Math.abs(v.gex)*10),ot=100-Ne;return{strike:v.strike,gex:v.gex,type:he?"CALL":"PUT",wallType:Math.abs(v.gex)>.5?"WALL":"LEVEL",role:he?v.strike>n?"POT. RESISTANCE":"POT. RESISTANCE (EX-SUPP)":(v.strike<n,"POT. SUPPORT"),distance:le,holdPct:Math.min(Ne,85),breakPct:Math.max(ot,15),callPct:he?70+Math.random()*20:10+Math.random()*20,putPct:he?30-Math.random()*20:80+Math.random()*10,mass:Math.abs(v.gex).toFixed(1),effective:Math.abs(v.gex*.9).toFixed(1),integrity:Math.round(85+Math.random()*15),fieldHigh:v.strike+8,fieldLow:v.strike-8,influence:Math.round(15+Math.random()*10)}}),De=n?n*1.015:0,f=n?n*.985:0,y=n?n*1.012:0,R=n?n*.988:0,c={cyan:"#22d3ee",green:"#22c55e",red:"#ef4444",amber:"#f59e0b",purple:"#a855f7",magenta:"#ec4899",border:"rgba(34, 211, 238, 0.2)",text:"#f4f4f5",textMuted:"#71717a"},N=v=>{const he=Q.findIndex(ot=>ot.strike===v.strike),le=Q[he+1],Ne=Q[he-1];return{nextLevel:le,prevLevel:Ne}},S=({level:v,onClose:he})=>{if(!v)return null;const{nextLevel:le,prevLevel:Ne}=N(v),ot=D?Math.round(v.strike-D):0,_t=v.gex<0,Ge=_t?v.strike>n?"Continuation Short":"Reversal Long":v.strike<n?"Continuation Long":"Reversal Short";return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:he,children:e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20, 22, 35, 0.98) 0%, rgba(15, 17, 28, 0.99) 100%)",borderRadius:16,width:560,maxWidth:"90vw",maxHeight:"85vh",overflow:"auto",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 50px rgba(0,0,0,0.5)"},onClick:ft=>ft.stopPropagation(),children:[e.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("span",{style:{fontSize:32,fontWeight:700,color:v.type==="PUT"?c.cyan:c.magenta,fontFamily:"'JetBrains Mono', monospace"},children:v.strike}),e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:v.type==="PUT"?c.cyan:c.magenta},children:[v.type," ",v.wallType]}),e.jsx("span",{style:{padding:"4px 10px",background:v.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${v.role.includes("SUPPORT")?c.green:c.red}`,borderRadius:4,fontSize:10,fontWeight:600,color:v.role.includes("SUPPORT")?c.green:c.red},children:v.role.includes("SUPPORT")?"POTENTIAL SUPPORT":"POTENTIAL RESISTANCE"})]}),e.jsxs("div",{style:{fontSize:11,color:c.textMuted},children:[e.jsx("span",{style:{color:_t?c.red:c.green},children:_t?"NEGATIVE GAMMA":"POSITIVE GAMMA"}),e.jsx("span",{style:{margin:"0 8px"},children:"|"}),"ZG Dist: ",ot>0?"+":"",ot]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,marginBottom:4},children:"DISTANCE FROM SPOT"}),e.jsxs("div",{style:{fontSize:28,fontWeight:600,color:v.distance>0?c.green:c.red},children:[v.distance>0?"+":"",v.distance,e.jsx("span",{style:{fontSize:14,color:c.textMuted,marginLeft:4},children:"pts"})]}),e.jsx("button",{onClick:he,style:{position:"absolute",top:16,right:16,background:"transparent",border:"none",color:c.textMuted,fontSize:24,cursor:"pointer",padding:4},children:""})]})]}),e.jsxs("div",{style:{padding:24},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,letterSpacing:"0.1em",marginBottom:4},children:" REGIME EXPECTED REACTION"}),e.jsx("div",{style:{fontSize:24,fontWeight:600,color:Ge.includes("Long")?c.cyan:c.magenta,fontFamily:"'JetBrains Mono', monospace"},children:Ge})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:c.cyan,letterSpacing:"0.1em",textAlign:"center",marginBottom:16},children:"DEALER POSITIONING & GREEKS"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:c.textMuted},children:"TOT GEX PROFILE"}),e.jsxs("span",{style:{fontSize:13,fontWeight:600,color:v.gex<0?c.magenta:c.cyan},children:[(v.gex*1e3).toFixed(1),"M"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:e.jsx("div",{style:{width:`${Math.min(Math.abs(v.gex)*100,90)}%`,height:"100%",background:v.gex<0?"linear-gradient(90deg, rgba(236,72,153,0.8), rgba(236,72,153,0.4))":"linear-gradient(90deg, rgba(34,211,238,0.8), rgba(34,211,238,0.4))",borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16,borderTop:"1px solid rgba(255,255,255,0.05)",paddingTop:16},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"SPEED"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:c.text},children:[(Math.abs(v.gex)*60).toFixed(1),"K"]})]}),e.jsxs("div",{style:{textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"VANNA"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:c.cyan},children:[(Math.abs(v.gex)*25).toFixed(1),"M"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"CHARM"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:c.magenta},children:[(v.gex*-500).toFixed(1),"M"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,marginBottom:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,letterSpacing:"0.1em",textAlign:"center",marginBottom:12},children:"HOLD / BREAK PROBABILITIES"}),e.jsxs("div",{style:{display:"flex",height:28,borderRadius:6,overflow:"hidden",fontSize:11,fontWeight:600},children:[e.jsxs("div",{style:{width:`${v.holdPct}%`,background:c.green,display:"flex",alignItems:"center",justifyContent:"center",color:"#000"},children:["Hold ",v.holdPct,"%"]}),e.jsxs("div",{style:{width:`${v.breakPct}%`,background:c.red,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff"},children:["Break ",v.breakPct,"%"]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,borderLeft:`3px solid ${c.amber}`},children:[e.jsxs("div",{style:{fontSize:12,color:c.text,marginBottom:8},children:[e.jsx("strong",{children:"High Sensitivity."})," Dealer hedging activity increases rapidly here, creating potential for sharp reactions or rejection."]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(245,158,11,0.2)",border:`1px solid ${c.amber}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.amber},children:"REACTIVE ZONE"})]})]}),e.jsxs("div",{style:{background:"rgba(30, 32, 45, 0.6)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted,letterSpacing:"0.1em",marginBottom:16},children:"STRUCTURAL CONTEXT"}),le&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(239,68,68,0.2)",border:`1px solid ${c.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.red},children:"IF BREAK"}),e.jsxs("span",{style:{fontSize:12,color:c.text},children:["Next: ",le.type," ",le.wallType," (@ ",le.strike,")"]})]}),Ne&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.green},children:"IF HOLD"}),e.jsxs("span",{style:{fontSize:12,color:c.text},children:["Target: ",Ne.type," ",Ne.wallType," (@ ",Ne.strike,")"]})]})]})]})]})})},B=({label:v,value:he,color:le=c.textMuted})=>e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 16px",background:"rgba(40, 40, 50, 0.4)",borderRadius:6,marginBottom:8},children:e.jsxs("span",{style:{fontSize:12,color:le,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.1em"},children:[" ",v,": ",he," "]})}),F=()=>e.jsxs("div",{style:{background:"linear-gradient(90deg, rgba(34,211,238,0.1) 0%, rgba(34,211,238,0.2) 50%, rgba(34,211,238,0.1) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",border:"1px solid rgba(34,211,238,0.3)"},children:[e.jsxs("span",{style:{fontSize:14,fontWeight:600,color:c.cyan,fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" ZERO GAMMA FLIP: ",D.toFixed(2)," "]}),e.jsx("div",{style:{marginTop:4},children:e.jsxs("span",{style:{fontSize:10,color:c.textMuted},children:["Above: Dealers dampen volatility (",e.jsx("span",{style:{color:c.cyan},children:"Reversal Playbook"}),")"]})}),e.jsx("div",{style:{marginTop:2},children:e.jsxs("span",{style:{fontSize:10,color:c.textMuted},children:["Below: Dealers amplify volatility (",e.jsx("span",{style:{color:c.amber},children:"Trend/Breakout Playbook"}),")"]})})]}),pe=()=>e.jsx("div",{style:{background:"linear-gradient(90deg, rgba(234,179,8,0.2) 0%, rgba(234,179,8,0.4) 50%, rgba(234,179,8,0.2) 100%)",padding:"12px 20px",borderRadius:8,margin:"16px 0",textAlign:"center",boxShadow:"0 0 20px rgba(234,179,8,0.3)"},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:"#eab308",fontFamily:"'JetBrains Mono', monospace",letterSpacing:"0.15em"},children:[" CURRENT SPOT: ",(n==null?void 0:n.toFixed(2))||""," "]})}),U=({pts:v})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"8px 16px",background:"rgba(0,0,0,0.4)",borderRadius:6,margin:"8px 0"},children:[e.jsx("span",{style:{fontSize:14,color:c.textMuted,letterSpacing:"0.15em"},children:"LOW DENSITY"}),e.jsx("span",{style:{width:60,height:1,background:c.textMuted}}),e.jsxs("span",{style:{fontSize:12,color:c.textMuted},children:[v," PTS"]}),e.jsx("span",{style:{fontSize:12,color:c.amber,fontWeight:600},children:"FAST LANE"})]}),m=({holdPct:v,breakPct:he,size:le="normal"})=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsxs("span",{style:{fontSize:le==="small"?9:11,color:c.green},children:["H:",v,"%"]}),e.jsx("div",{style:{flex:1,height:le==="small"?4:6,background:c.red,borderRadius:3,overflow:"hidden",display:"flex"},children:e.jsx("div",{style:{width:`${v}%`,height:"100%",background:c.green}})}),e.jsxs("span",{style:{fontSize:le==="small"?9:11,color:c.red},children:["B:",he,"%"]})]}),h=({value:v,maxVal:he=1e3})=>{const le=Math.min(Math.abs(v)/he*100,100),Ne=v>0;return e.jsx("div",{style:{width:"100%",height:6,background:"rgba(255,255,255,0.1)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${le}%`,height:"100%",background:Ne?"linear-gradient(90deg, #22c55e, #4ade80)":"linear-gradient(90deg, #22d3ee, #67e8f9)",borderRadius:3}})})},w=()=>e.jsxs("div",{style:{overflowX:"auto"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.1)",marginBottom:8},children:["LEVEL","TOT. GEX PROFILE","ROLE","CONFLUENCES","WARNING","HOLD / BREAK PROB."].map(v=>e.jsx("span",{style:{fontSize:10,color:c.textMuted,fontWeight:600,letterSpacing:"0.05em"},children:v},v))}),e.jsx(B,{label:"EM HIGH",value:De.toFixed(2)}),e.jsx(B,{label:"VOL BAND HIGH",value:y.toFixed(2)}),Q.filter(v=>v.strike>n).map((v,he)=>{const le=l===`above-${he}`;return e.jsxs("div",{onMouseEnter:()=>a(`above-${he}`),onMouseLeave:()=>a(null),onClick:()=>p(v),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:le?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${v.type==="CALL"?c.green:c.magenta}`,transform:le?"translateX(4px)":"none",boxShadow:le?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[le&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:c.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:v.type==="CALL"?c.green:c.magenta},children:v.strike}),e.jsxs("div",{style:{fontSize:10,color:v.type==="CALL"?c.green:c.magenta},children:[v.type," WALL"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:c.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:c.text,marginBottom:4},children:[(v.gex*1e3).toFixed(1),"M"]}),e.jsx(h,{value:v.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:v.role.includes("SUPPORT")?"rgba(34,197,94,0.2)":"rgba(239,68,68,0.2)",border:`1px solid ${v.role.includes("SUPPORT")?c.green:c.red}`,borderRadius:4,fontSize:9,fontWeight:600,color:v.role.includes("SUPPORT")?c.green:c.red},children:v.role})}),e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${c.amber}40`,borderRadius:4,color:c.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(m,{holdPct:v.holdPct,breakPct:v.breakPct})]},he)}),e.jsx(F,{}),e.jsx(B,{label:"VOL BAND LOW",value:R.toFixed(2)}),e.jsx(B,{label:"MAX PAIN",value:O.toFixed(2)}),Q.filter(v=>v.strike<=n).slice(0,3).map((v,he)=>{const le=l===`below-${he}`;return e.jsxs("div",{onMouseEnter:()=>a(`below-${he}`),onMouseLeave:()=>a(null),onClick:()=>p(v),style:{display:"grid",gridTemplateColumns:"80px 150px 140px 120px 100px 180px",gap:8,padding:"12px 16px",background:le?"rgba(255,255,255,0.06)":"rgba(255,255,255,0.02)",borderRadius:8,marginBottom:4,cursor:"pointer",transition:"all 0.2s ease",borderLeft:`3px solid ${c.cyan}`,transform:le?"translateX(4px)":"none",boxShadow:le?"0 4px 12px rgba(0,0,0,0.3)":"none",position:"relative"},children:[le&&e.jsx("div",{style:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%)",background:"rgba(20, 22, 30, 0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 10px",fontSize:10,color:c.textMuted,whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",zIndex:10,fontFamily:"'Inter', sans-serif"},children:"Click for Details"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700,color:c.cyan},children:v.strike}),e.jsx("div",{style:{fontSize:10,color:c.cyan},children:"PUT WALL"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:c.cyan,marginBottom:4},children:"DIRECTIONAL"}),e.jsxs("div",{style:{fontSize:12,color:c.text,marginBottom:4},children:[(v.gex*1e3).toFixed(1),"M"]}),e.jsx(h,{value:v.gex*100})]}),e.jsx("div",{children:e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.green},children:"POT. SUPPORT"})}),e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:""}),e.jsx("div",{style:{fontSize:10,padding:"2px 6px",background:"rgba(245,158,11,0.15)",border:`1px solid ${c.amber}40`,borderRadius:4,color:c.amber,width:"fit-content"},children:"HIGH VOL"}),e.jsx(m,{holdPct:v.holdPct,breakPct:v.breakPct})]},he)}),e.jsx(pe,{}),e.jsx(B,{label:"EM LOW",value:f.toFixed(2)})]}),Me=()=>e.jsxs("div",{children:[e.jsx(B,{label:"EM HIGH",value:De.toFixed(2)}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:Q.filter(v=>v.strike>n).slice(0,3).map((v,he)=>e.jsxs("div",{onClick:()=>p(v),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:v.type==="CALL"?c.green:c.magenta},children:v.strike}),e.jsxs("div",{style:{fontSize:10,color:c.cyan},children:[v.type," WALL"]})]}),e.jsx("span",{style:{padding:"4px 8px",background:v.role.includes("RESISTANCE")?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",border:`1px solid ${v.role.includes("RESISTANCE")?c.red:c.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:v.role.includes("RESISTANCE")?c.red:c.green},children:v.role})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:10,color:c.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:c.text},children:[v.gex.toFixed(1),"M"]})]}),e.jsx(h,{value:v.gex*100})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(m,{holdPct:v.holdPct,breakPct:v.breakPct,size:"small"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:c.cyan},children:"BREAK"}),e.jsx("span",{style:{color:c.textMuted},children:"Open Space"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginTop:4},children:[e.jsx("span",{style:{color:c.green},children:"HOLD"}),e.jsx("span",{style:{color:c.textMuted},children:"Hold"})]})]})]},he))}),e.jsx(F,{}),e.jsx(pe,{}),e.jsx(U,{pts:42}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:Q.filter(v=>v.strike<=n).slice(0,3).map((v,he)=>e.jsxs("div",{onClick:()=>p(v),style:{background:"rgba(20,20,30,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:c.cyan},children:v.strike}),e.jsx("div",{style:{fontSize:10,color:c.cyan},children:"PUT WALL"})]}),e.jsx("span",{style:{padding:"4px 8px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:8,fontWeight:600,color:c.green},children:"POT. SUPPORT"})]}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"TOT. GEX PROFILE"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:10,color:c.cyan},children:"DIRECTIONAL"}),e.jsxs("span",{style:{fontSize:12,fontWeight:600,color:c.text},children:[v.gex.toFixed(1),"M"]})]}),e.jsx(h,{value:v.gex*100})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:c.textMuted,marginBottom:4},children:"HOLD / BREAK PROB."}),e.jsx(m,{holdPct:v.holdPct,breakPct:v.breakPct,size:"small"})]})]},he))})]}),I=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,padding:"12px 16px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:c.textMuted}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:"FIELD"}),e.jsx("div",{style:{fontSize:12,color:c.text,fontWeight:600},children:"NEUTRAL"})]})]}),e.jsx("span",{style:{padding:"6px 16px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:12,color:c.text},children:"WAIT"}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:c.textMuted},children:"MID"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:40,height:4,background:c.green,borderRadius:2}}),e.jsx("div",{style:{width:20,height:4,background:c.red,borderRadius:2}}),e.jsx("span",{style:{fontSize:11,color:c.text},children:"67%"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:11,color:c.purple},children:""}),e.jsx("span",{style:{fontSize:10,color:c.text},children:"QUANTUM FIELD"}),e.jsx("span",{style:{padding:"2px 6px",background:c.cyan,borderRadius:4,fontSize:8,color:"#000",fontWeight:600},children:"BETA"})]}),["EXPANDED","NAV","BOUNDS"].map(v=>e.jsx("span",{style:{padding:"4px 12px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,fontSize:10,color:c.text},children:v},v)),e.jsxs("div",{style:{marginLeft:"auto",fontSize:11,color:c.textMuted},children:["LEVELS: ",r," | SPOT: ",e.jsx("span",{style:{color:c.amber},children:n==null?void 0:n.toFixed(2)})]})]}),Q.slice(0,r).map((v,he)=>{const le=v.strike>n,Ne=Math.abs(v.strike-n)<10;return e.jsxs("div",{children:[Ne&&le&&e.jsx(pe,{}),e.jsxs("div",{onClick:()=>p(v),style:{background:`linear-gradient(90deg, rgba(139,92,246,${.1+Math.abs(v.gex)*.05}) 0%, rgba(139,92,246,${.2+Math.abs(v.gex)*.1}) 50%, rgba(139,92,246,${.1+Math.abs(v.gex)*.05}) 100%)`,padding:"20px 24px",marginBottom:4,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[e.jsx("div",{style:{width:4,height:30,background:v.type==="CALL"?c.green:c.cyan,borderRadius:2}}),e.jsx("span",{style:{fontSize:32,fontWeight:700,color:c.cyan,fontFamily:"'JetBrains Mono', monospace"},children:v.strike})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,flex:1,justifyContent:"center"},children:[e.jsxs("span",{style:{fontSize:11,color:v.type==="CALL"?c.green:c.magenta},children:[v.type," | WALL"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(34,197,94,0.2)",border:`1px solid ${c.green}`,borderRadius:4,fontSize:9,fontWeight:600,color:c.green},children:["POT. ","SUPPORT"]}),e.jsxs("span",{style:{padding:"4px 10px",background:"rgba(255,255,255,0.1)",borderRadius:4,fontSize:9,color:c.textMuted},children:[Math.abs(v.distance),"pt ",v.distance>0?"above":"below"," spot"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,padding:"2px 8px",background:"rgba(0,0,0,0.3)",borderRadius:4},children:[e.jsxs("span",{style:{fontSize:9,color:c.green},children:["H:",v.holdPct,"%"]}),e.jsx("div",{style:{width:30,height:4,background:c.green,borderRadius:2}}),e.jsx("div",{style:{width:15,height:4,background:c.red,borderRadius:2}}),e.jsxs("span",{style:{fontSize:9,color:c.red},children:["B:",v.breakPct,"%"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{fontSize:28,fontWeight:600,color:c.text},children:Math.abs(v.gex*100).toFixed(1)}),e.jsx("span",{style:{fontSize:14,color:c.textMuted},children:"M"}),e.jsxs("div",{style:{fontSize:10,color:c.textMuted},children:["18PT | L ",v.fieldHigh.toFixed(1)," - L ",v.fieldLow.toFixed(1)]})]})]}),he===2&&e.jsx(U,{pts:42})]},he)})]});Math.max(...C.map(v=>Math.abs(v.gex||0)),.01);const[Fe,He]=A.useState(null),[te,_e]=A.useState({x:0,y:0});return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(11, 17, 32, 0.98) 0%, rgba(8, 12, 24, 0.99) 100%)",borderRadius:16,border:`1px solid ${c.border}`,padding:24,fontFamily:"'Inter', -apple-system, sans-serif",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.4)",position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("h3",{style:{margin:0,color:c.text,fontSize:18,fontWeight:600},children:"GEX Profile"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:c.cyan,animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:10,color:c.cyan,letterSpacing:"0.05em"},children:"LIVE"})]})]}),e.jsx("div",{style:{padding:"6px 12px",borderRadius:6,background:x==="POSITIVE"?"rgba(34,197,94,0.15)":x==="NEGATIVE"?"rgba(239,68,68,0.15)":"rgba(161,161,170,0.15)",border:`1px solid ${x==="POSITIVE"?c.green:x==="NEGATIVE"?c.red:c.textMuted}40`},children:e.jsxs("span",{style:{color:x==="POSITIVE"?c.green:x==="NEGATIVE"?c.red:c.textMuted,fontSize:12,fontWeight:600},children:[x," GEX: ",u>0?"+":"",u.toFixed(3),"B"]})})]}),e.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.95)",borderRadius:12,padding:"16px 0",marginBottom:24,position:"relative",border:"1px solid rgba(255,255,255,0.05)",cursor:Fe?"none":"default"},children:[e.jsx("div",{style:{position:"relative",display:"flex"},children:(()=>{const v=D||n||4600,Ne=[...C].filter(ne=>Math.abs(ne.strike-v)<=300).sort((ne,ke)=>Math.abs(ne.strike-v)-Math.abs(ke.strike-v)).slice(0,40).sort((ne,ke)=>ke.strike-ne.strike),ot=Math.max(...Ne.map(ne=>Math.abs(ne.gex||0)),.01);n&&Ne.reduce((ne,ke)=>Math.abs(ke.strike-n)<Math.abs(ne.strike-n)?ke:ne,Ne[0]),D&&Ne.reduce((ne,ke)=>Math.abs(ke.strike-D)<Math.abs(ne.strike-D)?ke:ne,Ne[0]);const _t=Ne.map(ne=>ne.strike),Ge=Math.min(..._t),ft=Math.max(..._t),qe=Math.ceil((ft+20)/10)*10,oe=Math.floor((Ge-20)/10)*10,Le=qe-oe,Be=900,P=[];for(let ne=qe;ne>=oe;ne-=10)P.push(ne);return e.jsxs("div",{style:{display:"flex",width:"100%"},children:[e.jsx("div",{style:{width:55,height:Be,position:"relative",borderRight:"1px solid rgba(255,255,255,0.1)",marginRight:8,flexShrink:0},children:P.map((ne,ke)=>{const Ae=(qe-ne)/Le*Be;return e.jsx("div",{style:{position:"absolute",top:Ae-6,right:8,fontSize:10,fontFamily:"'JetBrains Mono', monospace",color:"rgba(148,163,184,0.5)"},children:ne},ne)})}),e.jsxs("div",{style:{flex:1,height:Be,position:"relative"},children:[P.map(ne=>{const ke=(qe-ne)/Le*Be;return e.jsx("div",{style:{position:"absolute",top:ke,left:0,right:0,height:1,background:"rgba(255,255,255,0.04)",pointerEvents:"none"}},`grid-${ne}`)}),n&&e.jsx("div",{style:{position:"absolute",top:(qe-n)/Le*Be,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(132,204,22,0.8) 0%, rgba(132,204,22,0.2) 100%)",zIndex:5},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(132,204,22,0.2)",border:"1px solid rgba(132,204,22,0.4)",padding:"2px 6px",borderRadius:3,color:"#84cc16",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["SPOT ",n==null?void 0:n.toFixed(2)]})}),D&&Math.abs(D-n)>5&&e.jsx("div",{style:{position:"absolute",top:(qe-D)/Le*Be,left:0,right:0,height:2,background:"linear-gradient(90deg, rgba(34,211,238,0.6) 0%, rgba(34,211,238,0.1) 100%)",zIndex:4},children:e.jsxs("span",{style:{position:"absolute",right:0,top:-10,fontSize:9,background:"rgba(34,211,238,0.15)",border:"1px solid rgba(34,211,238,0.35)",padding:"2px 6px",borderRadius:3,color:"#22d3ee",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:["ZG ",D==null?void 0:D.toFixed(0)]})}),Ne.map((ne,ke)=>{const Ae=(ne.gex||0)<0,ze=Math.min(Math.abs(ne.gex||0)/ot*60,60),Te=(Fe==null?void 0:Fe.strike)===ne.strike,Ze=Math.abs(ne.gex||0),Et=Ze>=1?`${Ze.toFixed(1)}B`:`${(Ze*1e3).toFixed(0)}M`,Y=Ze>ot*.25,Ke=n?Math.abs(Math.round(ne.strike-n)):0,rt=ne.call_oi||0,et=ne.put_oi||0,me=rt+et||1,g=Math.round(rt/me*100),j=100-g,K=Ae?"#22d3ee":"#f472b6",$=(qe-ne.strike)/Le*Be;return e.jsxs("div",{onMouseEnter:G=>{_e({x:G.clientX,y:G.clientY}),He({strike:ne.strike,gex:ne.gex,isCall:Ae,gexLabel:Et,isWall:Y,callPct:g,putPct:j,callOI:rt,putOI:et,distance:n?Math.round(ne.strike-n):0})},onMouseMove:G=>_e({x:G.clientX,y:G.clientY}),onMouseLeave:()=>He(null),style:{position:"absolute",top:$-12,left:0,right:0,display:"flex",alignItems:"center",height:24,cursor:Fe?"none":"pointer",zIndex:Te?10:1},children:[e.jsx("div",{style:{width:`${ze}%`,minWidth:ze>3?10:0,height:Te?28:22,background:Ae?"rgba(34, 211, 238, 0.5)":"rgba(244, 114, 182, 0.5)",backdropFilter:"blur(4px)",borderRadius:"3px 8px 8px 3px",border:Ae?"1px solid rgba(34, 211, 238, 0.3)":"1px solid rgba(244, 114, 182, 0.3)",boxShadow:Te?Ae?"0 0 12px rgba(34,211,238,0.7), 0 0 30px rgba(34,211,238,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 0 12px rgba(244,114,182,0.7), 0 0 30px rgba(244,114,182,0.4), 0 8px 16px rgba(0,0,0,0.4)":"0 2px 6px rgba(0,0,0,0.25)",transition:"all 0.15s ease-out",transform:Te?"scale(1.02)":"none",flexShrink:0}}),e.jsxs("div",{style:{marginLeft:8,display:"flex",alignItems:"center",gap:4,fontSize:10,fontFamily:"'Inter', sans-serif",whiteSpace:"nowrap"},children:[e.jsx("span",{style:{color:"rgba(148,163,184,0.6)"},children:""}),e.jsx("span",{style:{color:"rgba(255,255,255,0.85)",fontWeight:500},children:Y?"WALL":"LEVEL"}),e.jsxs("span",{style:{color:K,fontWeight:600,background:Ae?"rgba(34,211,238,0.12)":"rgba(244,114,182,0.12)",padding:"1px 5px",borderRadius:3},children:["(",Ae?"CALL":"PUT",")"]}),e.jsx("span",{style:{color:"#fff",fontWeight:700,marginLeft:2},children:Et}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.5)",fontSize:9},children:["[",Ke,"pts]"]}),e.jsxs("span",{style:{color:"rgba(148,163,184,0.4)",fontSize:9},children:["C:",g,"% P:",j,"%"]})]})]},ke)})]})]})})()}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-start",gap:24,marginTop:14,paddingTop:10,paddingLeft:70,borderTop:"1px solid rgba(255,255,255,0.04)",fontSize:9,color:"rgba(148,163,184,0.5)",fontFamily:"'Inter', sans-serif"},children:[e.jsx("span",{children:" MAGNET (attractor)"}),e.jsx("span",{children:" WALL (barrier)"}),e.jsx("span",{children:"Glow = Field Width"})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsx("h3",{style:{margin:0,color:c.text,fontSize:18,fontWeight:600},children:"Strategic Levels"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(255,255,255,0.05)",borderRadius:6},children:[e.jsx("span",{style:{fontSize:11,color:c.textMuted},children:"LEVELS"}),e.jsx("select",{value:r,onChange:v=>s(Number(v.target.value)),style:{background:"transparent",border:"none",color:c.text,fontSize:12,cursor:"pointer"},children:[5,10,15,20].map(v=>e.jsx("option",{value:v,children:v},v))})]}),e.jsx("div",{style:{display:"flex",background:"rgba(255,255,255,0.05)",borderRadius:6,overflow:"hidden"},children:[{id:"table",icon:""},{id:"card",icon:""},{id:"quantum",icon:""}].map(v=>e.jsx("button",{onClick:()=>o(v.id),style:{padding:"8px 12px",background:i===v.id?c.purple:"transparent",border:"none",color:i===v.id?"#fff":c.textMuted,fontSize:14,cursor:"pointer",transition:"all 0.2s ease"},children:v.icon},v.id))})]})]}),i==="table"&&e.jsx(w,{}),i==="card"&&e.jsx(Me,{}),i==="quantum"&&e.jsx(I,{}),d&&e.jsx(S,{level:d,onClose:()=>p(null)}),Fe&&(()=>{var ft;const v=Fe.isCall?"#22d3ee":"#f472b6",he=Fe.isCall?"rgba(34,211,238,0.1)":"rgba(244,114,182,0.1)",le=Fe.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)",Ne=Fe.isCall?71:48,ot=100-Ne;let _t=te.x+8,Ge=te.y-8;return _t+240>window.innerWidth-10&&(_t=te.x-248),Ge<10&&(Ge=10),Ge+340>window.innerHeight-10&&(Ge=window.innerHeight-350),e.jsxs("div",{style:{position:"fixed",left:_t,top:Ge,width:240,background:"rgba(15, 23, 42, 0.98)",border:`1px solid ${le}`,borderRadius:12,padding:16,zIndex:99999,pointerEvents:"none",boxShadow:`0 0 20px ${Fe.isCall?"rgba(34,211,238,0.3)":"rgba(244,114,182,0.3)"}, 0 8px 32px rgba(0,0,0,0.5)`,fontFamily:"'Inter', sans-serif",transform:"translateZ(0)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:14},children:[e.jsx("span",{style:{fontSize:30,fontWeight:700,color:v,fontFamily:"'JetBrains Mono', monospace"},children:(ft=Fe.strike)==null?void 0:ft.toFixed(0)}),e.jsxs("span",{style:{fontSize:11,fontWeight:600,color:v,background:he,padding:"4px 10px",borderRadius:5,border:`1px solid ${le}`},children:[" ",Fe.isWall?"WALL":"LEVEL"," (",Fe.isCall?"CALL":"PUT",")"]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.6)",marginBottom:5},children:[e.jsx("span",{children:"OPEN INTEREST"}),e.jsx("span",{style:{color:"#e2e8f0"},children:((Fe.callOI||0)+(Fe.putOI||0)).toLocaleString()})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsxs("span",{children:["C: ",(Fe.callOI||0).toLocaleString()]}),e.jsxs("span",{children:["P: ",(Fe.putOI||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${Fe.callPct}%`,background:"#22d3ee"}}),e.jsx("div",{style:{width:`${Fe.putPct}%`,background:"#f472b6"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:9,marginTop:3},children:[e.jsxs("span",{style:{color:"#22d3ee"},children:[Fe.callPct,"%"]}),e.jsxs("span",{style:{color:"#f472b6"},children:[Fe.putPct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",border:"1px solid rgba(139,92,246,0.2)",borderRadius:8,padding:10,marginBottom:14},children:[e.jsx("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:5},children:"QUANTUM FIELD"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:13,color:"#e2e8f0"},children:[e.jsxs("span",{children:["L ",(Fe.strike+9).toFixed(0)]}),e.jsx("span",{style:{color:"rgba(148,163,184,0.4)"},children:""}),e.jsxs("span",{children:[(Fe.strike-9).toFixed(0)," L"]})]}),e.jsx("div",{style:{fontSize:11,color:"#a855f7",textAlign:"center",marginTop:5},children:"18.4 pts influence"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:14},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"MASS"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:Fe.gexLabel})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,color:"rgba(148,163,184,0.5)"},children:"EFFECTIVE"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#e2e8f0"},children:Fe.gexLabel})]})]}),e.jsxs("div",{style:{marginBottom:14},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"INTEGRITY"}),e.jsx("span",{style:{color:"#e2e8f0"},children:"100%"})]}),e.jsx("div",{style:{height:5,background:"rgba(0,0,0,0.4)",borderRadius:3},children:e.jsx("div",{style:{width:"100%",height:"100%",background:v,borderRadius:3}})})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,color:"rgba(148,163,184,0.5)",marginBottom:4},children:[e.jsx("span",{children:"HOLD / BREAK"}),e.jsxs("span",{children:["H:",Ne,"% B:",ot,"%"]})]}),e.jsxs("div",{style:{display:"flex",height:8,borderRadius:4,overflow:"hidden",background:"rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{width:`${Ne}%`,background:"#22c55e"}}),e.jsx("div",{style:{width:`${ot}%`,background:"#ef4444"}})]})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:12,color:"rgba(148,163,184,0.6)",paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.05)"},children:[Fe.distance>0?"+":"",Fe.distance," pts (",(Math.abs(Fe.distance)/(n||1)*100).toFixed(2),"%)"]})]})})()]})},gg=()=>{const[t,n]=A.useState(new Date),[i,o]=A.useState(null);A.useEffect(()=>{const d=setInterval(()=>n(new Date),1e3);return()=>clearInterval(d)},[]);const r=[{id:"japan",name:"Japan",time:"19:00-20:00",color:"#9370DB",start:1900,end:2e3},{id:"china",name:"China",time:"20:00-23:00",color:"#F472B6",start:2e3,end:2300},{id:"deadzone",name:"Deadzone",time:"02:00-03:00",color:"#6B7280",start:200,end:300},{id:"london",name:"London",time:"03:00-06:00",color:"#3B82F6",start:300,end:600},{id:"us_ib",name:"US IB",time:"08:20-09:30",color:"#F59E0B",start:820,end:930},{id:"ny_1h",name:"NY 1H",time:"09:30-10:30",color:"#10B981",start:930,end:1030},{id:"ny_2h",name:"NY 2H",time:"10:30-11:30",color:"#06B6D4",start:1030,end:1130},{id:"lunch",name:"Lunch",time:"11:30-13:30",color:"#8B5CF6",start:1130,end:1330},{id:"ny_pm",name:"NY PM",time:"13:30-16:00",color:"#EF4444",start:1330,end:1600}],l=(()=>{const d=new Date(t.toLocaleString("en-US",{timeZone:"America/New_York"})),p=d.getHours(),C=d.getMinutes(),x=p*100+C;return x>=1900&&x<2e3?"japan":x>=2e3&&x<2300?"china":x>=200&&x<300?"deadzone":x>=300&&x<600?"london":x>=820&&x<930?"us_ib":x>=930&&x<1030?"ny_1h":x>=1030&&x<1130?"ny_2h":x>=1130&&x<1330?"lunch":x>=1330&&x<1600?"ny_pm":null})(),a=l!==null;return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",marginBottom:16,padding:"24px 16px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative",width:"100%"},children:[e.jsx("div",{style:{position:"absolute",top:60,left:50,right:50,height:1,background:"rgba(255,255,255,0.1)",zIndex:0}}),r.map((d,p)=>{const C=d.id===l,x=i===d.id,u=(()=>{if(!a)return!1;const O=r.findIndex(Q=>Q.id===l);return p<O})(),D=90;return e.jsx("div",{onMouseEnter:()=>o(d.id),onMouseLeave:()=>o(null),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",position:"relative",zIndex:x?10:1,cursor:"pointer",minWidth:80,height:120},children:e.jsxs("div",{style:{width:D,height:D,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,background:C?"linear-gradient(135deg, rgba(20,20,28,1) 0%, rgba(15,15,22,1) 100%)":x?"linear-gradient(135deg, rgba(30,30,40,1) 0%, rgba(25,25,35,1) 100%)":"rgb(20, 20, 28)",border:C?`2px solid ${d.color}`:x?`2px solid ${d.color}80`:"1px solid rgba(255,255,255,0.08)",opacity:a?u?.5:1:.7,transition:"all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:C?`0 0 25px ${d.color}50, 0 8px 32px rgba(0,0,0,0.4)`:x?`0 0 30px ${d.color}40, 0 12px 40px rgba(0,0,0,0.5)`:"0 4px 12px rgba(0,0,0,0.3)",position:"relative",transform:x?"scale(1.2) translateY(-5px)":"scale(1) translateY(0)",zIndex:x?5:1},children:[e.jsx("div",{style:{width:x?12:10,height:x?12:10,borderRadius:"50%",background:d.color,boxShadow:C||x?`0 0 12px ${d.color}`:"none",animation:C?"sessionDotPulse 1.5s ease-in-out infinite":"none",transition:"all 0.3s ease"}}),e.jsx("span",{style:{fontSize:x?16:14,color:C?d.color:x?"#fff":a?"#e5e5e5":"#888",fontWeight:600,textAlign:"center",lineHeight:1.1,transition:"all 0.3s ease",textShadow:x?`0 0 10px ${d.color}60`:"none"},children:d.name}),e.jsx("span",{style:{fontSize:x?9:8,color:C||x?d.color:a?"#666":"#555",fontFamily:"'JetBrains Mono', monospace",opacity:.9,transition:"all 0.3s ease"},children:d.time}),C&&a&&e.jsx("div",{style:{position:"absolute",bottom:-10,left:"50%",transform:"translateX(-50%)",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000",fontSize:8,fontWeight:700,padding:"3px 10px",borderRadius:10,letterSpacing:"0.05em",boxShadow:"0 4px 12px rgba(0,255,136,0.6)",animation:"liveBadgePulse 2s ease-in-out infinite"},children:"LIVE"})]})},d.id)})]})}),e.jsx("style",{children:`
        @keyframes sessionDotPulse {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.7; transform: scale(1.2); }
        }
        @keyframes liveBadgePulse {
          0%, 100% { box-shadow: 0 4px 12px rgba(0,255,136,0.6); }
          50% { box-shadow: 0 4px 20px rgba(0,255,136,0.9); }
        }
      `})]})},xg=({gexData:t,currentPrice:n})=>{const[i,o]=A.useState(!1),[r,s]=A.useState(!1),l=(t==null?void 0:t.gamma_regime)||"UNKNOWN",a=(t==null?void 0:t.total_gex)||0,d=(t==null?void 0:t.zero_gamma)||(t==null?void 0:t.gamma_flip)||0,p=(t==null?void 0:t.hvl)||0,C=n?(n-d).toFixed(1):0,x=n>d,u=54.09,D=17.73,O=94.8,Q=85,De=1.75,f={green:"#22c55e",red:"#ef4444",cyan:"#22d3ee",purple:"#a855f7",amber:"#f59e0b",text:"#f4f4f5",textMuted:"#71717a"};return i?e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:"16px 24px",marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:f.purple,fontSize:16,fontWeight:600},children:"Market Pulse"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:4,fontSize:11,fontWeight:600,background:l==="NEGATIVE"?"rgba(239,68,68,0.2)":"rgba(34,197,94,0.2)",color:l==="NEGATIVE"?f.red:f.green},children:l})]}),e.jsx("button",{onClick:()=>o(!1),style:{padding:"8px 16px",background:"transparent",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:f.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:"+ EXPAND"})]}):e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(15,20,35,0.98) 0%, rgba(10,15,25,1) 100%)",borderRadius:16,border:"1px solid rgba(168,85,247,0.3)",padding:24,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:f.purple,fontSize:18,fontWeight:600},children:"Market Pulse"})]}),e.jsx("button",{onClick:()=>o(!0),style:{padding:"8px 16px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,color:f.text,fontSize:12,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:" COLLAPSE"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"300px 1fr",gap:24},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:8},children:"GAMMA REGIME"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:l==="NEGATIVE"?f.red:f.green,boxShadow:`0 0 10px ${l==="NEGATIVE"?f.red:f.green}`}}),e.jsxs("span",{style:{fontSize:18,fontWeight:700,color:l==="NEGATIVE"?f.red:f.green,letterSpacing:"0.05em"},children:["CONFIRMED ",l]})]}),e.jsxs("div",{style:{fontSize:12,color:f.textMuted,marginBottom:16},children:["Net GEX: ",e.jsxs("span",{style:{color:a<0?f.red:f.green,fontWeight:600},children:[a.toFixed(2),"B"]})]}),e.jsx("div",{style:{fontSize:10,color:f.textMuted,letterSpacing:"0.1em",marginBottom:8,marginTop:24},children:"VOLATILITY REGIME"}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:f.text,marginBottom:4},children:l==="NEGATIVE"?"EXPANSION":"CONTRACTION"}),e.jsxs("div",{style:{fontSize:12,color:f.cyan},children:["GVI Magnitude: ",e.jsx("span",{style:{fontWeight:600},children:De})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginBottom:16,fontSize:13,color:f.textMuted,lineHeight:1.6},children:["Spot price is ",e.jsxs("span",{style:{color:f.text,fontWeight:600},children:[Math.abs(C)," points ",x?"above":"below"," Zero Gamma"]}),".",l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[" Dealers hedge against explosive moves by amplifying volatility and reinforcing trend continuation. Requires ",e.jsx("span",{style:{color:f.amber},children:"extreme caution"})," around breakouts."]}):e.jsxs(e.Fragment,{children:[" Dealers hedge by dampening volatility and providing mean reversion. Expect ",e.jsx("span",{style:{color:f.green},children:"range-bound"})," price action."]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginBottom:16},children:[{label:"ATR",value:u.toFixed(2)},{label:"VIX",value:D.toFixed(2)},{label:"EXP. MOVE",value:O.toFixed(1)}].map(({label:y,value:R})=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:16,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:6},children:y}),e.jsx("div",{style:{fontSize:20,fontWeight:600,color:f.text},children:R})]},y))}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:6},children:[e.jsx("span",{style:{fontSize:11,color:f.textMuted},children:"REALIZED VS EXPECTED RANGE"}),e.jsxs("span",{style:{fontSize:11,color:f.text},children:[Q," / ",O.toFixed(1)," (",Math.round(Q/O*100),"%)"]})]}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(Q/O*100,100)}%`,height:"100%",background:f.amber,borderRadius:4}})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,fontSize:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Sentiment (Skew):"}),e.jsx("span",{style:{color:f.text},children:"Neutral (-0.01)"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Stability (Speed):"}),e.jsx("span",{style:{color:f.text},children:"Normal"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Vanna:"}),e.jsx("span",{style:{color:f.cyan},children:"Vol Support"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Charm:"}),e.jsx("span",{style:{color:f.text},children:"Price Pressure"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:f.textMuted},children:"Magnete Charm:"}),e.jsxs("span",{style:{color:f.purple},children:["Pressione (",d.toFixed(2),")"]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:16,background:"rgba(34,197,94,0.1)",borderRadius:8,marginTop:20,border:"1px solid rgba(34,197,94,0.3)"},children:[e.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:f.green,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:12,color:f.green,fontWeight:600,marginBottom:2},children:"VOLATILITY DIAGNOSIS"}),e.jsx("div",{style:{fontSize:12,color:f.textMuted},children:"Confirmation: The multi-factor analysis (Speed/Convexity) confirms the detected regime."})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,background:"rgba(0,0,0,0.3)",borderRadius:8,marginTop:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:"rgba(168,85,247,0.2)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,color:f.text,fontWeight:600},children:"AI Deep Analysis"}),e.jsx("div",{style:{fontSize:11,color:f.textMuted},children:"Market Structure & 0DTE Strategy"})]})]}),e.jsx("button",{onClick:()=>s(!r),style:{padding:"10px 20px",background:r?"rgba(168,85,247,0.3)":"linear-gradient(135deg, #a855f7 0%, #7c3aed 100%)",border:r?"1px solid #a855f7":"none",borderRadius:8,color:"#fff",fontSize:12,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:8},children:r?" CLOSE":" VIEW ANALYSIS"})]}),r&&e.jsxs("div",{style:{marginTop:16,padding:20,background:"linear-gradient(135deg, rgba(168,85,247,0.1) 0%, rgba(124,58,237,0.1) 100%)",border:"1px solid rgba(168,85,247,0.3)",borderRadius:12},children:[e.jsxs("div",{style:{fontSize:14,color:f.purple,fontWeight:600,marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," AI Market Structure Analysis"]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:f.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"MARKET CONTEXT"}),e.jsx("div",{style:{fontSize:13,color:f.text,lineHeight:1.7},children:l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.red,fontWeight:600},children:" High Volatility Environment:"})," The market is in a negative gamma regime, meaning dealers are short gamma and must hedge in the same direction as price moves. This creates a",e.jsx("span",{style:{color:f.amber},children:" feedback loop that amplifies volatility"}),"."]}),e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.cyan,fontWeight:600},children:"Key Implications:"}),e.jsx("br",{})," Breakouts tend to extend further than expected",e.jsx("br",{})," Mean reversion strategies carry higher risk",e.jsx("br",{})," Gamma squeezes can occur at key levels",e.jsx("br",{})," Stop runs are more likely"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.green,fontWeight:600},children:" Stable Environment:"})," The market is in a positive gamma regime, meaning dealers are long gamma and hedge against price moves. This creates a",e.jsx("span",{style:{color:f.green},children:" dampening effect that reduces volatility"}),"."]}),e.jsxs("p",{style:{margin:"0 0 12px 0"},children:[e.jsx("span",{style:{color:f.cyan,fontWeight:600},children:"Key Implications:"}),e.jsx("br",{})," Price tends to revert to mean (VWAP, HVL)",e.jsx("br",{})," Range-bound trading strategies favored",e.jsx("br",{})," Breakout attempts often fade",e.jsx("br",{})," Options premium selling has edge"]})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:f.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"0DTE STRATEGY RECOMMENDATION"}),e.jsxs("div",{style:{padding:16,background:l==="NEGATIVE"?"rgba(239,68,68,0.1)":"rgba(34,197,94,0.1)",border:`1px solid ${l==="NEGATIVE"?"rgba(239,68,68,0.3)":"rgba(34,197,94,0.3)"}`,borderRadius:8},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:l==="NEGATIVE"?f.red:f.green,marginBottom:8},children:l==="NEGATIVE"?" TREND FOLLOWING / BREAKOUT":" MEAN REVERSION / RANGE"}),e.jsx("div",{style:{fontSize:12,color:f.text,lineHeight:1.6},children:l==="NEGATIVE"?e.jsxs(e.Fragment,{children:[" Trade with momentum, not against it",e.jsx("br",{})," Use wider stops due to increased volatility",e.jsx("br",{})," Consider strangles/straddles for directional plays",e.jsx("br",{})," Watch for gamma squeeze at ",d.toFixed(2)," (Zero Gamma)"]}):e.jsxs(e.Fragment,{children:[" Fade moves away from VWAP and HVL",e.jsx("br",{})," Iron condors and butterflies have edge",e.jsx("br",{})," Tighter stops acceptable in low-vol environment",e.jsx("br",{})," Expect reversion to ",p>0?p.toFixed(2):d.toFixed(2)," (HVL/ZG)"]})})]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:f.textMuted,marginBottom:8,letterSpacing:"0.05em"},children:"KEY GAMMA LEVELS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"ZERO GAMMA"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.amber},children:["$",d.toFixed(2)]}),e.jsxs("div",{style:{fontSize:9,color:n>d?f.green:f.red},children:[n>d?"":""," ",Math.abs(C)," pts"]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"HVL"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:f.cyan},children:["$",p>0?p.toFixed(2):"--"]}),e.jsx("div",{style:{fontSize:9,color:f.textMuted},children:"High Volume Level"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:f.textMuted,marginBottom:4},children:"NET GEX"}),e.jsxs("div",{style:{fontSize:16,fontWeight:600,color:a<0?f.red:f.green},children:[a.toFixed(2),"B"]}),e.jsx("div",{style:{fontSize:9,color:f.textMuted},children:a<0?"Dealer Short Gamma":"Dealer Long Gamma"})]})]})]})]})]})},Zt="https://projecthorizon-production.up.railway.app",da="https://projecthorizon-production.up.railway.app/redfolder",yg="18.7.0";console.log("Horizon v"+yg);const mg=A.createContext(null),_p=A.createContext(null),bg=()=>A.useContext(_p);A.createContext({isMobile:!1,isTablet:!1,screenWidth:1200});const Oo=()=>{const[t,n]=A.useState({width:typeof window<"u"?window.innerWidth:1200,height:typeof window<"u"?window.innerHeight:800});return A.useEffect(()=>{const i=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",i),i(),()=>window.removeEventListener("resize",i)},[]),{isMobile:t.width<768,isTablet:t.width>=768&&t.width<1024,isDesktop:t.width>=1024,screenWidth:t.width,screenHeight:t.height}},Tp={deltaThreshold:-2500,buyingImbalancePct:400,entryTiers:{tier1:25,tier2:40,tier3:35},targetTiers:{vwap:50,ibMid:35,ibHigh:15},filters:{grades:{A:!0,B:!0,C:!0,F:!0},tiers:{1:!0,2:!0,3:!0},minR:-10},divergenceThreshold:0},vg=t=>{const n=[],i=new Date("2025-08-20"),o=new Date("2025-12-28");let r=12345;const s=()=>(r=(r*9301+49297)%233280,r/233280);let l=1,a=new Date(i);for(;a<=o;){if(s()<.35){const d=s()<.35?"A":s()<.65?"B":"C",p=s()<.25?1:s()<.65?2:3,C=["I","II","III"][p-1],x=d==="A"?.82:d==="B"?.71:.52,u=s()<x,D=u?s()<.5?"VWAP":s()<.7?"IB_MID":"IB_HIGH":"STOP_LOSS",O=Math.ceil(s()*8)+2,Q=D==="STOP_LOSS"?-1:1.5+s()*2,f=3320+(a-i)/(1e3*60*60*24)*.5+(s()-.5)*40,y=Math.round(Q*35*10*O);n.push({id:l++,date:a.toISOString().split("T")[0],entry:Math.round(f*100)/100,exit:Math.round((f+(u?Q*3.5:-3.5))*100)/100,stop_loss:Math.round((f-3.5)*100)/100,pnl:y,r:Math.round(Q*10)/10,grade:d,tier:p,tierRoman:C,exitReason:D,contracts:O,delta:-1500-Math.floor(s()*3500),buyingImbalance:250+Math.floor(s()*400),conditionsMet:d==="A"?6:d==="B"?5:4,levels:{ib_high:Math.round((f+15)*100)/100,ib_low:Math.round((f-10)*100)/100,ib_mid:Math.round((f+2.5)*100)/100,pdpoc:Math.round((f-5)*100)/100,vwap:Math.round((f+5)*100)/100,pd_high:Math.round((f+20)*100)/100,pd_low:Math.round((f-15)*100)/100}})}for(a.setDate(a.getDate()+1);a.getDay()===0||a.getDay()===6;)a.setDate(a.getDate()+1)}return n},jg=()=>{const[t,n]=A.useState({trades:null,stats:null,source:"loading",metadata:null,sessions:null,volumeProfiles:null,bigVolumeDays:null,supportResistance:null,seasonality:null,dailyCandles:null,hourlyCandles:null,featureStatistics:null,distributions:null});return A.useEffect(()=>{(async()=>{var o,r,s,l;try{const a=await fetch("/backtest_data.json");if(a.ok){const d=await a.json();if(d.trades&&d.trades.length>0){console.log(` Loaded ${d.trades.length} trades from ${((r=(o=d.metadata)==null?void 0:o.data_range)==null?void 0:r.start)||"backtest_data.json"} to ${(l=(s=d.metadata)==null?void 0:s.data_range)==null?void 0:l.end}`),n({trades:d.trades,stats:d.statistics||d.stats,source:"historical_5y",metadata:d.metadata,sessions:d.sessions,volumeProfiles:d.volume_profiles,bigVolumeDays:d.big_volume_days,supportResistance:d.support_resistance,seasonality:d.seasonality,dailyCandles:d.daily_candles,hourlyCandles:d.hourly_candles,featureStatistics:d.feature_statistics,distributions:d.distributions});return}}}catch(a){console.log("No backtest_data.json found:",a)}console.log("Using generated mock data (run generate_backtest.py for real data)"),n({trades:null,stats:null,source:"mock"})})()},[]),t},Sg=(t,n)=>{var N,S,B,F,pe,U;if(t.length===0)return{summary:{total_trades:0,winners:0,losers:0,win_rate:0,total_pnl:0,adjusted_pnl:0,gross_profit:0,gross_loss:0,profit_factor:0,avg_win:0,avg_loss:0,avg_r_multiple:0,max_drawdown:0,max_drawdown_pct:0,final_equity:1e6},yearly_pnl:[],weekly_pnl:[],exit_reasons:{VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0},grade_stats:{A:{trades:0,winners:0,pnl:0,win_rate:0},B:{trades:0,winners:0,pnl:0,win_rate:0},C:{trades:0,winners:0,pnl:0,win_rate:0}},tier_stats:{TIER_I:{trades:0,winners:0,pnl:0,win_rate:0},TIER_II:{trades:0,winners:0,pnl:0,win_rate:0},TIER_III:{trades:0,winners:0,pnl:0,win_rate:0}}};const i={1:(((N=n.entryTiers)==null?void 0:N.tier1)||25)/25,2:(((S=n.entryTiers)==null?void 0:S.tier2)||40)/40,3:(((B=n.entryTiers)==null?void 0:B.tier3)||35)/35},o={VWAP:(((F=n.targetTiers)==null?void 0:F.vwap)||50)/50,IB_MID:(((pe=n.targetTiers)==null?void 0:pe.ibMid)||35)/35,IB_HIGH:(((U=n.targetTiers)==null?void 0:U.ibHigh)||15)/15,STOP_LOSS:1},r=t.map(m=>{const h=i[m.tier]||1,w=m.pnl>0&&o[m.exitReason]||1,Me=m.pnl*h*w;return{...m,adjustedPnl:Me,originalPnl:m.pnl}}),s=r.filter(m=>m.adjustedPnl>0),l=r.filter(m=>m.adjustedPnl<=0),a=s.reduce((m,h)=>m+h.adjustedPnl,0),d=Math.abs(l.reduce((m,h)=>m+h.adjustedPnl,0)),p=a-d,C=t.reduce((m,h)=>m+h.pnl,0);let x=1e6,u=x,D=0;r.forEach(m=>{x+=m.adjustedPnl,x>u&&(u=x);const h=u-x;h>D&&(D=h)});const O={};r.forEach(m=>{const h=parseInt(m.date.split("-")[0]);O[h]||(O[h]={year:h,trades:0,winners:0,losers:0,pnl:0}),O[h].trades++,m.adjustedPnl>0?O[h].winners++:O[h].losers++,O[h].pnl+=m.adjustedPnl});const Q=Object.values(O).map(m=>({...m,win_rate:m.trades>0?m.winners/m.trades:0})).sort((m,h)=>m.year-h.year),De={};r.forEach(m=>{const h=new Date(m.date),w=h.getFullYear(),Me=Math.ceil((h-new Date(w,0,1))/(7*24*60*60*1e3)),I=`${w}-W${Me}`;De[I]||(De[I]={week:Me,year:w,trades:0,pnl:0,winners:0}),De[I].trades++,De[I].pnl+=m.adjustedPnl,m.adjustedPnl>0&&De[I].winners++});const f=Object.values(De).map(m=>({...m,win_rate:m.trades>0?m.winners/m.trades:0})),y={VWAP:0,IB_MID:0,IB_HIGH:0,STOP_LOSS:0};t.forEach(m=>{y[m.exitReason]!==void 0&&y[m.exitReason]++});const R={A:{trades:0,winners:0,pnl:0},B:{trades:0,winners:0,pnl:0},C:{trades:0,winners:0,pnl:0}};r.forEach(m=>{R[m.grade]&&(R[m.grade].trades++,m.adjustedPnl>0&&R[m.grade].winners++,R[m.grade].pnl+=m.adjustedPnl)}),Object.keys(R).forEach(m=>{R[m].win_rate=R[m].trades>0?R[m].winners/R[m].trades:0});const c={TIER_I:{trades:0,winners:0,pnl:0},TIER_II:{trades:0,winners:0,pnl:0},TIER_III:{trades:0,winners:0,pnl:0}};return r.forEach(m=>{const h=["TIER_I","TIER_II","TIER_III"][m.tier-1]||"TIER_I";c[h].trades++,m.adjustedPnl>0&&c[h].winners++,c[h].pnl+=m.adjustedPnl}),Object.keys(c).forEach(m=>{c[m].win_rate=c[m].trades>0?c[m].winners/c[m].trades:0}),{summary:{total_trades:t.length,winners:s.length,losers:l.length,win_rate:t.length>0?s.length/t.length:0,total_pnl:p,original_pnl:C,pnl_difference:p-C,gross_profit:a,gross_loss:-d,profit_factor:d>0?a/d:a>0?1/0:0,avg_win:s.length>0?a/s.length:0,avg_loss:l.length>0?-d/l.length:0,avg_r_multiple:t.length>0?t.reduce((m,h)=>m+h.r,0)/t.length:0,max_drawdown:D,max_drawdown_pct:u>0?D/u:0,final_equity:1e6+p},yearly_pnl:Q,weekly_pnl:f,exit_reasons:y,grade_stats:R,tier_stats:c}},ca=(t,n)=>{const[i,o]=A.useState(()=>{try{const r=window.localStorage.getItem(t);return r?JSON.parse(r):n}catch{return n}});return A.useEffect(()=>{window.localStorage.setItem(t,JSON.stringify(i))},[t,i]),[i,o]},od="JBSWY3DPEHPK3PXP",wg=async(t,n=od)=>{const i=[-1,0,1];for(const o of i){const r=Math.floor(Date.now()/1e3/30)+o,s=new Uint8Array(8);let l=r;for(let d=7;d>=0;d--)s[d]=l&255,l=Math.floor(l/256);const a=d=>{const p="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let C="";for(let u=0;u<d.length;u++){const D=p.indexOf(d.charAt(u).toUpperCase());D!==-1&&(C+=D.toString(2).padStart(5,"0"))}const x=[];for(let u=0;u+8<=C.length;u+=8)x.push(parseInt(C.substr(u,8),2));return new Uint8Array(x)};try{const d=a(n),p=await crypto.subtle.importKey("raw",d,{name:"HMAC",hash:"SHA-1"},!1,["sign"]),C=new Uint8Array(await crypto.subtle.sign("HMAC",p,s)),x=C[C.length-1]&15,D=(((C[x]&127)<<24|(C[x+1]&255)<<16|(C[x+2]&255)<<8|C[x+3]&255)%1e6).toString().padStart(6,"0");if(t===D)return!0}catch(d){console.error("TOTP verification error:",d)}}return!1},kg=({onLogin:t})=>{const[n,i]=A.useState({username:"",password:""}),[o,r]=A.useState(""),[s,l]=A.useState(1),[a,d]=A.useState(!1),[p,C]=A.useState(""),[x,u]=A.useState(!1),D=async f=>{f.preventDefault(),u(!0),C(""),await new Promise(y=>setTimeout(y,500)),n.username==="horizon"&&n.password==="[i68E[4S1k,4"?l(2):C("Invalid credentials"),u(!1)},O=async f=>{f.preventDefault(),u(!0),C(""),await wg(o)?t({username:n.username,role:"trader"}):C("Invalid 2FA code. Please try again."),u(!1)},Q=`otpauth://totp/ProjectHorizon:horizon?secret=${od}&issuer=ProjectHorizon&algorithm=SHA1&digits=6&period=30`,De=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(Q)}`;return e.jsx("div",{style:J.loginContainer,children:e.jsxs("div",{style:J.loginCard,children:[e.jsxs("div",{style:J.loginHeader,children:[e.jsxs("div",{style:J.logo,children:[e.jsx("div",{style:J.logoIcon,children:e.jsxs("svg",{width:"36",height:"36",viewBox:"0 0 40 40",fill:"none",children:[e.jsx("rect",{x:"4",y:"4",width:"32",height:"32",rx:"8",stroke:"#00ff88",strokeWidth:"2",fill:"rgba(0,255,136,0.1)"}),e.jsx("path",{d:"M20 12L28 20L20 28L12 20L20 12Z",fill:"#00ff88"}),e.jsx("circle",{cx:"20",cy:"20",r:"4",fill:"#0a0a0f"})]})}),e.jsx("span",{style:J.logoText,children:"PROJECT HORIZON"})]}),e.jsx("p",{style:J.loginSubtitle,children:"Not the, 1%."})]}),s===1?e.jsxs("form",{onSubmit:D,style:J.loginForm,children:[e.jsxs("div",{style:J.inputGroup,children:[e.jsx("label",{style:J.inputLabel,children:"Username"}),e.jsx("input",{type:"text",value:n.username,onChange:f=>i({...n,username:f.target.value}),style:J.input,placeholder:"Enter username"})]}),e.jsxs("div",{style:J.inputGroup,children:[e.jsx("label",{style:J.inputLabel,children:"Password"}),e.jsx("input",{type:"password",value:n.password,onChange:f=>i({...n,password:f.target.value}),style:J.input,placeholder:"Enter password"})]}),p&&e.jsx("div",{style:J.error,children:p}),e.jsx("button",{type:"submit",style:J.loginButton,disabled:x,children:x?"Verifying...":"Continue"})]}):e.jsx("div",{style:J.loginForm,children:a?e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("p",{style:{color:"#888",marginBottom:16,fontSize:13},children:"Scan this QR code with your authenticator app:"}),e.jsx("img",{src:De,alt:"2FA QR Code",style:{width:180,height:180,borderRadius:8,marginBottom:16,background:"#fff",padding:8}}),e.jsxs("p",{style:{color:"#666",fontSize:11,marginBottom:8},children:["Or enter manually: ",e.jsx("code",{style:{color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"2px 6px",borderRadius:4},children:od})]}),e.jsx("button",{onClick:()=>d(!1),style:{...J.loginButton,marginTop:16},children:"I've Added It"})]}):e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx("div",{style:{width:64,height:64,borderRadius:"50%",background:"rgba(0,255,136,0.1)",border:"2px solid #00ff88",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px"},children:e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),e.jsx("p",{style:{color:"#fff",fontSize:15,fontWeight:600,fontFamily:"'Inter', sans-serif",marginBottom:6},children:"Two-Factor Authentication"}),e.jsx("p",{style:{color:"#888",fontSize:12,fontFamily:"'Inter', sans-serif"},children:"Enter the 6-digit code from your authenticator app"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:8,marginBottom:20},children:[0,1,2,3,4,5].map(f=>e.jsx("input",{id:`totp-${f}`,type:"text",inputMode:"numeric",maxLength:1,value:o[f]||"",onChange:y=>{var c;const R=y.target.value.replace(/\D/g,"");if(R.length<=1){const N=o.split("");N[f]=R,r(N.join("").slice(0,6)),R&&f<5&&((c=document.getElementById(`totp-${f+1}`))==null||c.focus())}},onKeyDown:y=>{var R;y.key==="Backspace"&&!o[f]&&f>0&&((R=document.getElementById(`totp-${f-1}`))==null||R.focus())},onPaste:y=>{var N;y.preventDefault();const R=y.clipboardData.getData("text").replace(/\D/g,"").slice(0,6);r(R);const c=Math.min(R.length,5);(N=document.getElementById(`totp-${c}`))==null||N.focus()},style:{width:48,height:56,textAlign:"center",fontSize:24,fontFamily:'"SF Mono", "JetBrains Mono", "Fira Code", Consolas, monospace',fontWeight:600,background:"rgba(0,0,0,0.5)",border:o[f]?"2px solid #00ff88":"2px solid rgba(255,255,255,0.15)",borderRadius:10,color:"#fff",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",boxShadow:o[f]?"0 0 10px rgba(0,255,136,0.2)":"none"},onFocus:y=>y.target.style.borderColor="#00ff88",onBlur:y=>y.target.style.borderColor=o[f]?"#00ff88":"rgba(255,255,255,0.15)",autoFocus:f===0},f))}),p&&e.jsx("div",{style:J.error,children:p}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("button",{type:"submit",style:{...J.loginButton,width:"200px"},disabled:x||o.length!==6,children:x?"Verifying...":"VERIFY & LOGIN"}),e.jsx("div",{style:{width:"200px",display:"flex",justifyContent:"flex-end",marginTop:10},children:e.jsx("button",{type:"button",onClick:()=>{l(1),C(""),r("")},style:{background:"transparent",border:"none",color:"#666",fontSize:11,cursor:"pointer",fontFamily:"'Inter', sans-serif"},children:" Back to login"})})]})]})}),e.jsx("div",{style:J.loginFooter,children:e.jsx("p",{style:J.footerText,children:"2FA Protected"})})]})})},Cg=()=>{var S;const[t,n]=A.useState(null),[i,o]=A.useState(!0),[r,s]=A.useState(null),[l,a]=A.useState("1D"),[d,p]=A.useState("1M"),[C,x]=A.useState(null),[u,D]=A.useState({x:0,y:0}),{isMobile:O}=Oo(),Q={"1D":{GC:{GC:1,SI:.92,CHF:.7,JPY:.66,US10Y:-.44,DXY:-.82},SI:{GC:.92,SI:1,CHF:.62,JPY:.56,US10Y:-.38,DXY:-.74},CHF:{GC:.7,SI:.62,CHF:1,JPY:.76,US10Y:-.32,DXY:-.86},JPY:{GC:.66,SI:.56,JPY:1,CHF:.76,US10Y:-.28,DXY:-.72},US10Y:{GC:-.44,SI:-.38,CHF:-.32,JPY:-.28,US10Y:1,DXY:.54},DXY:{GC:-.82,SI:-.74,CHF:-.86,JPY:-.72,US10Y:.54,DXY:1}},"1W":{GC:{GC:1,SI:.94,CHF:.74,JPY:.7,US10Y:-.48,DXY:-.85},SI:{GC:.94,SI:1,CHF:.66,JPY:.6,US10Y:-.42,DXY:-.78},CHF:{GC:.74,SI:.66,CHF:1,JPY:.8,US10Y:-.36,DXY:-.9},JPY:{GC:.7,SI:.6,JPY:1,CHF:.8,US10Y:-.32,DXY:-.76},US10Y:{GC:-.48,SI:-.42,CHF:-.36,JPY:-.32,US10Y:1,DXY:.58},DXY:{GC:-.85,SI:-.78,CHF:-.9,JPY:-.76,US10Y:.58,DXY:1}},"1M":{GC:{GC:1,SI:.96,CHF:.78,JPY:.74,US10Y:-.52,DXY:-.88},SI:{GC:.96,SI:1,CHF:.7,JPY:.64,US10Y:-.46,DXY:-.82},CHF:{GC:.78,SI:.7,CHF:1,JPY:.84,US10Y:-.4,DXY:-.92},JPY:{GC:.74,SI:.64,JPY:1,CHF:.84,US10Y:-.36,DXY:-.8},US10Y:{GC:-.52,SI:-.46,CHF:-.4,JPY:-.36,US10Y:1,DXY:.62},DXY:{GC:-.88,SI:-.82,CHF:-.92,JPY:-.8,US10Y:.62,DXY:1}}};A.useEffect(()=>{let B=!0;const F=async()=>{try{o(!0);const U=await fetch(`${Zt}/market-overview`);if(!U.ok)throw new Error("Failed to fetch market data");const m=await U.json();if(m.error)throw new Error(m.error);if(B&&m.sectors){const h=m.correlations||Q;n({sectors:m.sectors,correlationsByTimeframe:h}),s(null)}}catch(U){console.error("Market data fetch error:",U),B&&s(U.message)}finally{B&&o(!1)}};F();const pe=setInterval(F,3e4);return()=>{B=!1,clearInterval(pe)}},[]);const De=B=>l==="1D"?B.change1D||0:l==="1W"?B.change1W||0:B.change1M||0,f=B=>l==="1D"?B.prev1D:l==="1W"?B.prev1W:B.prev1M,y=B=>B>2?"#00ff88":B>0?"#4ade80":B>-1?"#f87171":B>-2?"#ef4444":"#dc2626",R=(B,F)=>!B||isNaN(B)?"":F!=null&&F.includes("6J")||F!=null&&F.includes("6")||F!=null&&F.includes("DX")?B.toFixed(4):F!=null&&F.includes("US")&&!(F!=null&&F.includes("USD"))?B.toFixed(2)+"%":B>1e3||B>10?B.toFixed(2):B.toFixed(4),c=()=>l==="1D"?"vs Yesterday":l==="1W"?"vs Last Week":"vs Last Month",N=()=>l==="1D"?"Yesterday":l==="1W"?"Last Week":"Last Month";return i&&!t?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading live market data..."]}):t?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:O?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:O?"column":"row",justifyContent:"space-between",alignItems:O?"flex-start":"center",marginBottom:O?16:24,gap:O?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:O?16:20},children:O?"Correlation Matrix":" Correlation Matrix"}),e.jsxs("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:O?11:13},children:["Futures price change ",c(),"  Color = % Change"]})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(B=>e.jsx("button",{onClick:()=>a(B),style:{padding:O?"6px 12px":"8px 16px",borderRadius:6,border:l===B?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",background:l===B?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.03)",color:l===B?"#00ff88":"#888",fontWeight:600,fontSize:O?10:12,cursor:"pointer",transition:"all 0.2s"},children:B},B))})]}),r&&e.jsxs("div",{style:{padding:16,marginBottom:16,background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:8,color:"#ff6b6b",fontSize:13},children:[" ",r," - Install yfinance: pip install yfinance"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:O?"1fr":"repeat(2, 1fr)",gap:O?8:12,marginBottom:O?16:24},children:(S=t==null?void 0:t.sectors)==null?void 0:S.map(B=>e.jsxs("div",{style:{padding:14,background:"rgba(255,255,255,0.02)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",borderLeft:`3px solid ${B.color}`},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:10},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:B.color}}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:B.color,textTransform:"uppercase",letterSpacing:.5},children:B.name})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${Math.min(B.stocks.length,5)}, 1fr)`,gap:6},children:B.stocks.map(F=>{const pe=De(F),U=(C==null?void 0:C.symbol)===F.symbol;return e.jsxs("div",{style:{position:"relative",padding:"8px 10px",borderRadius:6,background:y(pe),cursor:"pointer",transition:"all 0.2s ease",transform:U?"scale(1.05)":"scale(1)",boxShadow:U?"0 4px 20px rgba(0,0,0,0.4)":"none",textAlign:"center"},onMouseEnter:m=>{const h=m.currentTarget.getBoundingClientRect();x({...F,sectorName:B.name,sectorColor:B.color}),D({x:h.left+h.width/2,y:h.top})},onMouseLeave:()=>x(null),children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:"#000",marginBottom:2},children:F.symbol}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#000"},children:[pe>=0?"+":"",pe.toFixed(2),"%"]})]},F.symbol)})})]},B.name))}),C&&e.jsxs("div",{style:{position:"fixed",left:Math.max(20,Math.min(u.x-150,window.innerWidth-320)),top:u.y+60,background:"linear-gradient(135deg, rgba(20,20,28,0.98) 0%, rgba(15,15,20,0.98) 100%)",border:`1px solid ${C.sectorColor}40`,borderRadius:12,padding:0,zIndex:1e3,boxShadow:`0 8px 32px rgba(0,0,0,0.6), 0 0 20px ${C.sectorColor}20`,minWidth:280,maxWidth:300,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:`${C.sectorColor}15`,borderBottom:`1px solid ${C.sectorColor}30`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#fff"},children:C.name}),e.jsx("div",{style:{fontSize:11,color:C.sectorColor,marginTop:2},children:C.sectorName})]}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:De(C)>=0?"#00ff88":"#ff4466"},children:[De(C)>=0?"+":"",De(C).toFixed(2),"%"]})]}),e.jsxs("div",{style:{padding:"12px 16px"},children:[(()=>{const B=C.current||{},F=B.c>=B.o,pe=F?"#00ff88":"#ff4466";return e.jsxs("div",{style:{marginBottom:8,padding:"8px 10px",borderRadius:6,background:F?"rgba(0,255,136,0.08)":"rgba(255,68,102,0.08)",border:`1px solid ${pe}30`},children:[e.jsxs("div",{style:{fontSize:9,color:pe,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,fontWeight:600},children:[F?"":""," Current"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(U=>{const m=B[U.toLowerCase()],h=U==="H"&&F?"#00ff88":U==="L"&&!F?"#ff4466":"#fff";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:U}),e.jsx("div",{style:{fontSize:10,color:h,fontFamily:"monospace",fontWeight:600},children:R(m,C.symbol)})]},U)})})]})})(),(()=>{const B=f(C)||{},F=B.c>=B.o,pe=F?"#00ff88":"#ff4466";return e.jsxs("div",{style:{padding:"8px 10px",borderRadius:6,background:F?"rgba(0,255,136,0.05)":"rgba(255,68,102,0.05)",border:`1px solid ${pe}20`},children:[e.jsxs("div",{style:{fontSize:9,color:pe,marginBottom:4,textTransform:"uppercase",letterSpacing:.5,opacity:.8,fontWeight:600},children:[F?"":""," ",N()]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:6},children:["O","H","L","C"].map(U=>{const m=B[U.toLowerCase()],h=U==="H"&&F?"#00ff88":U==="L"&&!F?"#ff4466":"#aaa";return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#555",marginBottom:1},children:U}),e.jsx("div",{style:{fontSize:10,color:h,fontFamily:"monospace"},children:R(m,C.symbol)})]},U)})})]})})()]}),e.jsx("div",{style:{padding:"8px 16px",background:"rgba(0,0,0,0.3)",fontSize:10,color:"#666",textAlign:"center"},children:"Live data from Yahoo Finance"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:24,padding:16,background:"rgba(255,255,255,0.02)",borderRadius:12,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#dc2626"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"< -2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#f87171"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"-2% to 0%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#4ade80"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:"0% to +2%"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:16,height:16,borderRadius:4,background:"#00ff88"}}),e.jsx("span",{style:{color:"#888",fontSize:12},children:">+2%"})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:16,padding:24,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:10},children:[" GC & SI Correlation Matrix (",d==="30m"?"30 Minutes":d==="1H"?"1 Hour":d==="4H"?"4 Hours":d==="1D"?"1 Day":d==="1W"?"1 Week":"1 Month",")",e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",background:"rgba(0,255,136,0.1)",padding:"3px 8px",borderRadius:4,border:"1px solid rgba(0,255,136,0.3)",letterSpacing:.5},children:" LIVE"})]}),e.jsx("div",{style:{display:"flex",gap:4},children:["1D","1W","1M"].map(B=>e.jsx("button",{onClick:()=>p(B),style:{padding:"6px 12px",borderRadius:6,border:d===B?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",background:d===B?"rgba(0,170,255,0.15)":"rgba(255,255,255,0.03)",color:d===B?"#00aaff":"#888",fontWeight:600,fontSize:11,cursor:"pointer",transition:"all 0.2s"},children:B},B))})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:500},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:12,textAlign:"left",color:"#888",fontSize:12}}),["GC","SI","CHF","JPY","US10Y","DXY"].map(B=>e.jsx("th",{style:{padding:12,textAlign:"center",color:B==="GC"?"#FFD700":B==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:B==="CHF"?" CHF":B==="JPY"?" JPY":B==="US10Y"?" 10Y":B==="DXY"?" DXY":B==="GC"?" GC":" SI"},B))]})}),e.jsx("tbody",{children:["GC","SI","CHF","JPY","US10Y","DXY"].map(B=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:12,color:B==="GC"?"#FFD700":B==="SI"?"#C0C0C0":"#fff",fontSize:12,fontWeight:600},children:B==="CHF"?" Swiss":B==="JPY"?" Yen":B==="US10Y"?" Yield":B==="DXY"?" DXY":B==="GC"?" Gold":" Silver"}),["GC","SI","CHF","JPY","US10Y","DXY"].map(F=>{var w,Me,I;const pe=((I=(Me=(w=t.correlationsByTimeframe)==null?void 0:w[d])==null?void 0:Me[B])==null?void 0:I[F])??0,U=Math.abs(pe),m=pe<0,h=pe===1?"rgba(100,100,100,0.3)":m?`rgba(255,68,102,${U*.4})`:pe>.7?`rgba(0,255,136,${U*.4})`:pe>.3?`rgba(0,255,136,${U*.25})`:`rgba(255,170,0,${U*.3})`;return e.jsxs("td",{style:{padding:12,textAlign:"center",background:h,color:pe===1?"#888":m?"#ff4466":pe>.5?"#00ff88":"#ffaa00",fontSize:13,fontWeight:600,border:"1px solid rgba(255,255,255,0.05)"},children:[pe>=0?"+":"",pe.toFixed(2)]},F)})]},B))})]})}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:" Green = Positive correlation |  Red = Negative correlation (inverse relationship)"})]})]}):e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No market data available"]})},fi=({children:t,content:n,position:i="top"})=>{const[o,r]=A.useState(!1),[s,l]=A.useState({x:0,y:0}),a=Li.useRef(null),d=p=>{const C=p.currentTarget.getBoundingClientRect();l({x:C.left+C.width/2,y:i==="top"?C.top:C.bottom}),r(!0)};return e.jsxs("div",{ref:a,onMouseEnter:d,onMouseLeave:()=>r(!1),style:{position:"relative",display:"inline-block",width:"100%"},children:[t,o&&n&&e.jsxs("div",{style:{position:"fixed",left:s.x,top:i==="top"?s.y-8:s.y+8,transform:i==="top"?"translate(-50%, -100%)":"translate(-50%, 0)",background:"rgba(20, 22, 28, 0.98)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:6,padding:"8px 12px",fontSize:10,color:"#ccc",whiteSpace:"pre-line",zIndex:9999,pointerEvents:"none",boxShadow:"0 4px 20px rgba(0,0,0,0.5)",minWidth:150,maxWidth:280,lineHeight:1.5},children:[n,e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",...i==="top"?{bottom:-6,borderTop:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}:{top:-6,borderBottom:"6px solid rgba(20, 22, 28, 0.98)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"},width:0,height:0}})]})]})},_g=({selectedContract:t})=>{const n=()=>{try{const l=localStorage.getItem("metrics_cache");if(l){const a=JSON.parse(l);if(a.timestamp&&Date.now()-a.timestamp<3e5)return a.data||{}}}catch{}return{}},[i,o]=A.useState(n),[r,s]=A.useState(n);return A.useEffect(()=>{n().contract!==t&&(o({}),s({}));const a=async()=>{try{const C=await(await fetch(Zt)).json();o(C),s(C);try{localStorage.setItem("metrics_cache",JSON.stringify({data:C,timestamp:Date.now()}))}catch{}}catch(p){console.error("PriceLadder fetch error:",p)}};a();const d=setInterval(a,300);return()=>clearInterval(d)},[t]),e.jsx(Tg,{metrics:i,gexData:r})},Tg=({metrics:t={},gexData:n={}})=>{var un,Sn,In,Mn,Un,wn,yn,Ji,di,Zn,En,qn,ei,Ti,mi,ci,bi,vi,Ri,Ni,ti,ni,zi,Qi,Di,Hi,Gn,kn,fo,po,ho,uo,go,xo,ie,Je,_,W,ue,fe,ye,Ue,H,ae,we;bg();const[i,o]=A.useState("5m"),[r,s]=A.useState("all"),[l,a]=A.useState(!1),[d,p]=A.useState(!1),[C,x]=A.useState(!0),[u,D]=A.useState(null),O=A.useRef(null),Q=A.useRef(null),[De,f]=A.useState(!1),[y,R]=A.useState(!1),[c,N]=A.useState(null),[S,B]=A.useState(null),[F,pe]=A.useState(!1),[U,m]=A.useState(1),[h,w]=A.useState(1),[Me,I]=A.useState(1),[Fe,He]=A.useState({}),[te,_e]=A.useState({}),[v,he]=A.useState({etfs:[]}),[le,Ne]=A.useState({}),[ot,_t]=A.useState({}),{isMobile:Ge,isTablet:ft}=Oo(),qe=t.current_price||0,oe=A.useCallback(k=>{Q.current&&(clearTimeout(Q.current),Q.current=null),O.current=k,D(k)},[]),Le=A.useCallback(()=>{Q.current=setTimeout(()=>{(O.current===null||Q.current!==null)&&(O.current=null,D(null))},100)},[]);A.useEffect(()=>()=>{Q.current&&clearTimeout(Q.current)},[]),A.useEffect(()=>{const k=async()=>{try{const L=await fetch(`${Zt}/institutional`);if(L.ok){const M=await L.json();_e(M)}}catch(L){console.log("Institutional data fetch error:",L)}};k();const q=setInterval(k,6e4);return()=>clearInterval(q)},[]),A.useEffect(()=>{if((t==null?void 0:t.contract)!=="BTC-SPOT")return;const k=async()=>{try{const L=await fetch("https://fapi.binance.com/fapi/v1/fundingRate?symbol=BTCUSDT&limit=1");if(L.ok){const T=await L.json();if(T&&T.length>0){const b=parseFloat(T[0].fundingRate)*100,z=b*3*365;_t({funding_rates:{average:b,annualized:z,sentiment:b>.01?"bullish_extreme":b>0?"bullish":b<-.01?"bearish_extreme":b<0?"bearish":"neutral"}})}}try{const T=await fetch("https://www.deribit.com/api/v2/public/get_book_summary_by_currency?currency=BTC&kind=option");if(T.ok){const b=await T.json();if(b!=null&&b.result){let z=0,E=0,se=0,de=0,Se=0,be=0;b.result.forEach(ve=>{const Oe=ve.instrument_name.includes("-C"),Ve=ve.open_interest||0,Tt=parseFloat(ve.instrument_name.split("-")[2])||0;Oe?(z+=Ve,Ve>Se&&(Se=Ve,se=Tt)):(E+=Ve,Ve>be&&(be=Ve,de=Tt))});const Xe=z>0?E/z:0,Mt=Xe>1.2?"bearish":Xe<.7?"bullish":"neutral",St=Math.round((se+de)/2);Ne({btc_options:{max_pain:St,put_call_ratio:Xe,sentiment:Mt,call_wall:se,put_wall:de}})}}}catch(T){console.log("Deribit fetch error:",T)}const M=t.current_price||0,xe=(M-(t.session_open||M))/(t.session_open||M)*100,re=xe>0?Math.round(xe*50):Math.round(xe*30);he({total_flow_1d_mm:re,total_flow_5d_mm:re*3,etfs:[{symbol:"IBIT",price:M*5e-4,price_change_1d:xe*.9},{symbol:"FBTC",price:M*48e-5,price_change_1d:xe*.95},{symbol:"GBTC",price:M*9e-4,price_change_1d:xe*.85},{symbol:"ARKB",price:M*47e-5,price_change_1d:xe*.92}]})}catch(L){console.error("Error fetching BTC data:",L)}};k();const q=setInterval(k,6e4);return()=>clearInterval(q)},[t==null?void 0:t.contract,t==null?void 0:t.current_price,t==null?void 0:t.session_open]);const P=(()=>{const k={buy:0,sell:0,delta:0,prev_buy:0,prev_sell:0,prev_delta:0};switch(i){case"5m":return{...k,...t.volume_5m};case"15m":return{...k,...t.volume_15m};case"30m":return{...k,...t.volume_30m};case"1h":return{...k,...t.volume_1h};default:return{buy:t.buy_volume||0,sell:t.sell_volume||0,delta:t.cumulative_delta||0,prev_buy:0,prev_sell:0,prev_delta:0}}})(),ne=P.history||[],ke=()=>{const k=t.asset_class||n.asset_class||"GC";return{GC:2650,ES:5200,NQ:18500,BTC:95e3,"BTC-SPOT":93e3,CL:75}[k]||2650},Ae=qe>0?qe:ke();A.useMemo(()=>{const k=Ae,q=100,L=[];let M=k,xe=0;const re=i==="5m"?300:i==="15m"?900:i==="30m"?1800:3600,T=Math.floor(Date.now()/1e3),b=Math.floor(T/re)*re-q*re;let z=Math.round(k)*100+12345;const E=()=>(z=(z*9301+49297)%233280,z/233280),se=.1,de=8;for(let Se=0;Se<q;Se++){const be=(E()-.5)*se*2;M=k+be+(E()-.5)*se*4;const Xe=E()>.45,Mt=150+E()*100,St=Xe?20+E()*60:-(20+E()*60),ve=Math.max(0,(Mt+St)/2),Oe=Math.max(0,(Mt-St)/2),Ve=se*de/2,Tt=M+(E()-.5)*Ve,dt=M+(E()-.5)*Ve,Rt=Math.max(Tt,dt)+E()*se*2,Lt=Math.min(Tt,dt)-E()*se*2;xe+=St,L.push({ts:b+Se*re,buy:Math.round(ve),sell:Math.round(Oe),delta:Math.round(St),price_open:Tt,price_high:Rt,price_low:Lt,price_close:dt,delta_open:xe-St,delta_high:xe+Math.abs(St)*.2,delta_low:xe-Math.abs(St)*.2,delta_close:xe})}return L},[Math.round(Ae/10)*10,i]);const ze=ne,Te=P.buy+P.sell||(ze.length>0?((un=ze[ze.length-1])==null?void 0:un.buy)+((Sn=ze[ze.length-1])==null?void 0:Sn.sell):0);(P.prev_buy||0)+(P.prev_sell||0);const Ze=(k,q)=>q===0?null:((k-q)/q*100).toFixed(1);i!=="session"&&Ze(P.buy,P.prev_buy),i!=="session"&&Ze(P.sell,P.prev_sell);const Et=(t==null?void 0:t.current_session_name)||(t==null?void 0:t.sessionId)||"Session",Y=new Date(new Date().toLocaleString("en-US",{timeZone:"America/New_York"})),Ke=Y.getHours()*100+Y.getMinutes(),rt=[((Mn=(In=t==null?void 0:t.ibs)==null?void 0:In.japan)==null?void 0:Mn.high)>0&&{price:t.ibs.japan.high,name:Ke<1900&&Ke>=1800?"(pd) Japan IB High":"Japan IB High",color:"#9370DB"},((wn=(Un=t==null?void 0:t.ibs)==null?void 0:Un.japan)==null?void 0:wn.low)>0&&((Ji=(yn=t==null?void 0:t.ibs)==null?void 0:yn.japan)==null?void 0:Ji.low)<999999&&{price:t.ibs.japan.low,name:Ke<1900&&Ke>=1800?"(pd) Japan IB Low":"Japan IB Low",color:"#9370DB"},((Zn=(di=t==null?void 0:t.ibs)==null?void 0:di.japan)==null?void 0:Zn.poc)>0&&{price:t.ibs.japan.poc,name:Ke<1900&&Ke>=1800?"(pd) Japan IB POC":"Japan IB POC",color:"#B8A3D9"},((qn=(En=t==null?void 0:t.ibs)==null?void 0:En.london)==null?void 0:qn.high)>0&&{price:t.ibs.london.high,name:Ke<300||Ke>=1800?"(pd) London IB High":"London IB High",color:"#a855f7"},((Ti=(ei=t==null?void 0:t.ibs)==null?void 0:ei.london)==null?void 0:Ti.low)>0&&((ci=(mi=t==null?void 0:t.ibs)==null?void 0:mi.london)==null?void 0:ci.low)<999999&&{price:t.ibs.london.low,name:Ke<300||Ke>=1800?"(pd) London IB Low":"London IB Low",color:"#a855f7"},((vi=(bi=t==null?void 0:t.ibs)==null?void 0:bi.london)==null?void 0:vi.poc)>0&&{price:t.ibs.london.poc,name:Ke<300||Ke>=1800?"(pd) London IB POC":"London IB POC",color:"#C084FC"},((Ni=(Ri=t==null?void 0:t.ibs)==null?void 0:Ri.us)==null?void 0:Ni.high)>0&&{price:t.ibs.us.high,name:Ke<820?"(pd) US IB High":"US IB High",color:"#F59E0B"},((ni=(ti=t==null?void 0:t.ibs)==null?void 0:ti.us)==null?void 0:ni.low)>0&&((Qi=(zi=t==null?void 0:t.ibs)==null?void 0:zi.us)==null?void 0:Qi.low)<999999&&{price:t.ibs.us.low,name:Ke<820?"(pd) US IB Low":"US IB Low",color:"#F59E0B"},((Hi=(Di=t==null?void 0:t.ibs)==null?void 0:Di.us)==null?void 0:Hi.mid)>0&&{price:t.ibs.us.mid,name:Ke<820?"(pd) US IB Mid":"US IB Mid",color:"#F59E0B"},((kn=(Gn=t==null?void 0:t.ibs)==null?void 0:Gn.us)==null?void 0:kn.poc)>0&&{price:t.ibs.us.poc,name:Ke<820?"(pd) US IB POC":"US IB POC",color:"#FBBF24"},((po=(fo=t==null?void 0:t.ibs)==null?void 0:fo.ny)==null?void 0:po.high)>0&&{price:t.ibs.ny.high,name:Ke<930?"(pd) NY IB High":"NY IB High",color:"#10B981"},((uo=(ho=t==null?void 0:t.ibs)==null?void 0:ho.ny)==null?void 0:uo.low)>0&&((xo=(go=t==null?void 0:t.ibs)==null?void 0:go.ny)==null?void 0:xo.low)<999999&&{price:t.ibs.ny.low,name:Ke<930?"(pd) NY IB Low":"NY IB Low",color:"#10B981"},((Je=(ie=t==null?void 0:t.ibs)==null?void 0:ie.ny)==null?void 0:Je.mid)>0&&{price:t.ibs.ny.mid,name:Ke<930?"(pd) NY IB Mid":"NY IB Mid",color:"#10B981"},((W=(_=t==null?void 0:t.ibs)==null?void 0:_.ny)==null?void 0:W.poc)>0&&{price:t.ibs.ny.poc,name:Ke<930?"(pd) NY IB POC":"NY IB POC",color:"#34D399"}],et=(t==null?void 0:t.tpo_poc)>0?{price:t.tpo_poc,name:`${Et} POC`,color:"#ffaa00"}:null,me=(t==null?void 0:t.dayHigh)||(t==null?void 0:t.day_high)||0,g=(t==null?void 0:t.dayLow)||(t==null?void 0:t.day_low)||0,j=me-g,K=(me+g)/2,$=qe<K,G=j>0?$?[{price:g-j*.27,name:"Day Fib 127%",color:"#ff1744"},{price:g-j*.618,name:"Day Fib 162%",color:"#d50000"},{price:g+j*.236,name:"Day Fib 23.6%",color:"#10B981"},{price:g+j*.382,name:"Day Fib 38.2%",color:"#00bcd4"},{price:g+j*.5,name:"Day Fib 50%",color:"#f97316"},{price:g+j*.618,name:"Day Fib 61.8%",color:"#ffd93d"},{price:g+j*.786,name:"Day Fib 78.6%",color:"#ff6b6b"}]:[{price:me+j*.27,name:"Day Fib -27%",color:"#00e676"},{price:me+j*.618,name:"Day Fib -62%",color:"#00c853"},{price:me-j*.236,name:"Day Fib 23.6%",color:"#10B981"},{price:me-j*.382,name:"Day Fib 38.2%",color:"#00bcd4"},{price:me-j*.5,name:"Day Fib 50%",color:"#f97316"},{price:me-j*.618,name:"Day Fib 61.8%",color:"#ffd93d"},{price:me-j*.786,name:"Day Fib 78.6%",color:"#ff6b6b"}]:[],Z=(t==null?void 0:t.swing)||{},ge=Z.swing_high||0,X=Z.swing_low||0,Ie=Z.swing_direction||"neutral";Z.extensions_direction;const st=ge-X,at=st>20?Ie==="up"?[{price:ge+st*.618,name:"Swing -62%",color:"#00E676"},{price:ge+st*.27,name:"Swing -27%",color:"#69F0AE"},{price:ge-st*.236,name:"Swing 23.6%",color:"#A78BFA"},{price:ge-st*.382,name:"Swing 38.2%",color:"#8B5CF6"},{price:ge-st*.5,name:"Swing 50%",color:"#7C3AED"},{price:ge-st*.618,name:"Swing 61.8%",color:"#6D28D9"},{price:ge-st*.786,name:"Swing 78.6%",color:"#5B21B6"}]:Ie==="down"?[{price:X-st*.618,name:"Swing 162%",color:"#AA00FF"},{price:X-st*.27,name:"Swing 127%",color:"#E040FB"},{price:X+st*.236,name:"Swing 23.6%",color:"#A78BFA"},{price:X+st*.382,name:"Swing 38.2%",color:"#8B5CF6"},{price:X+st*.5,name:"Swing 50%",color:"#7C3AED"},{price:X+st*.618,name:"Swing 61.8%",color:"#6D28D9"},{price:X+st*.786,name:"Swing 78.6%",color:"#5B21B6"}]:[]:[],ut=[n.pd_high>0&&{price:n.pd_high,name:"pd High",color:"#ff4466"},l&&n.hvl>0&&{price:n.hvl,name:"HVL",color:"#00aaff"},l&&{price:qe+50,name:"R3",color:"#ff6b6b"},l&&{price:qe+30,name:"R2",color:"#ff8c8c"},l&&{price:qe+15,name:"R1",color:"#ffaaaa"},l&&n.zero_gamma>0&&{price:n.zero_gamma,name:"Zero Gamma",color:"#00ff88"},t.vwap>0&&{price:t.vwap,name:`${Et} VWAP`,color:"#00ddff"},t.day_vwap>0&&{price:t.day_vwap,name:"Day VWAP",color:"#E879F9"},t.us_ib_vwap>0&&{price:t.us_ib_vwap,name:Ke<820?"(pd) US IB VWAP":"US IB VWAP",color:"#F59E0B"},t.ny_1h_vwap>0&&{price:t.ny_1h_vwap,name:Ke<930?"(pd) NY 1H VWAP":"NY 1H VWAP",color:"#10B981"},et,t.day_vah>0&&{price:t.day_vah,name:"Day VAH",color:"#E879F9"},t.day_val>0&&{price:t.day_val,name:"Day VAL",color:"#E879F9"},t.day_poc>0&&{price:t.day_poc,name:"Day POC",color:"#E879F9"},l&&{price:qe-15,name:"S1",color:"#88ff88"},l&&{price:qe-30,name:"S2",color:"#66dd66"},l&&{price:qe-50,name:"S3",color:"#44bb44"},n.pdpoc>0&&{price:n.pdpoc,name:"pd POC",color:"#ffaa00"},t.pd_vah>0&&{price:t.pd_vah,name:"pd VAH",color:"#ffaa00"},t.pd_val>0&&{price:t.pd_val,name:"pd VAL",color:"#ffaa00"},n.pd_low>0&&{price:n.pd_low,name:"pd Low",color:"#00ff88"},((ue=t==null?void 0:t.pd_us_ib)==null?void 0:ue.high)>0&&{price:t.pd_us_ib.high,name:"pd US IB High",color:"#F59E0B"},((fe=t==null?void 0:t.pd_us_ib)==null?void 0:fe.low)>0&&{price:t.pd_us_ib.low,name:"pd US IB Low",color:"#F59E0B"},((ye=t==null?void 0:t.pd_us_ib)==null?void 0:ye.poc)>0&&{price:t.pd_us_ib.poc,name:"pd US IB POC",color:"#FBBF24"},((Ue=t==null?void 0:t.pd_ny_1h)==null?void 0:Ue.high)>0&&{price:t.pd_ny_1h.high,name:"pd NY 1H High",color:"#10B981"},((H=t==null?void 0:t.pd_ny_1h)==null?void 0:H.low)>0&&{price:t.pd_ny_1h.low,name:"pd NY 1H Low",color:"#10B981"},((ae=t==null?void 0:t.pd_ny_1h)==null?void 0:ae.poc)>0&&{price:t.pd_ny_1h.poc,name:"pd NY 1H POC",color:"#34D399"},...G,...at,...rt].filter(Boolean).sort((k,q)=>q.price-k.price),zt=ut.filter(k=>k.price>qe).slice(-10),an=ut.filter(k=>k.price<=qe).slice(0,10),mt=Te>0?(P.buy/Te*100).toFixed(1):50,qt=Te>0?(P.sell/Te*100).toFixed(1):50,dn={session:"Session","5m":"5 Min","15m":"15 Min","30m":"30 Min","1h":"1 Hour"},rn=({level:k,position:q})=>{const L=Math.abs(k.price-qe).toFixed(2),M=Math.abs(k.price-qe)<20;return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 16px",background:M?`${k.color}15`:"transparent",borderLeft:`3px solid ${k.color}`,marginBottom:2,transition:"all 0.3s ease",opacity:M?1:.7,flexWrap:"nowrap",whiteSpace:"nowrap"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,minWidth:90,flex:"0 0 auto"},children:e.jsx("span",{style:{color:k.color,fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:1},children:k.name})}),e.jsxs("div",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:16,fontWeight:700,color:k.color,textShadow:M?`0 0 10px ${k.color}`:"none",minWidth:110,textAlign:"right",flex:"0 0 auto"},children:["$",k.price.toFixed(2)]}),e.jsxs("div",{style:{fontSize:11,color:"#666",minWidth:90,textAlign:"right",flex:"0 0 auto"},children:[q==="above"?"":""," $",L]})]})};return e.jsxs("div",{style:{padding:Ge?12:24},children:[e.jsxs("div",{style:{display:"flex",flexDirection:Ge?"column":"row",justifyContent:"space-between",alignItems:"flex-start",marginBottom:Ge?16:24,gap:Ge?12:0},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{color:"#fff",marginBottom:8,display:"flex",alignItems:"center",gap:12,fontSize:Ge?18:24},children:Ge?"Price Ladder":" Price Ladder"}),e.jsx("p",{style:{color:"#888",fontSize:Ge?11:13},children:"Live price with reference levels  Updates in real-time"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:Ge?8:12,background:"rgba(255,255,255,0.05)",padding:Ge?"6px 12px":"8px 16px",borderRadius:8,border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{color:"#888",fontSize:Ge?10:12},children:"Gamma Levels"}),e.jsx("button",{onClick:()=>a(!l),style:{width:Ge?40:48,height:Ge?20:24,borderRadius:12,border:"none",background:l?"#00ff88":"rgba(255,255,255,0.2)",cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:e.jsx("div",{style:{width:Ge?14:18,height:Ge?14:18,borderRadius:"50%",background:"#fff",position:"absolute",top:3,left:l?Ge?23:27:3,transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"}})})]})]}),e.jsxs("div",{style:{display:Ge?"flex":"grid",flexDirection:Ge?"column":void 0,gridTemplateColumns:Ge?void 0:ft?"1fr":"550px 1fr",gap:Ge?12:20,maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,170,255,0.08)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:8,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:8,letterSpacing:1},children:"SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",fontFamily:"'JetBrains Mono', monospace"},children:n.current_session_name||"Loading..."})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{color:"#555",fontSize:9},children:[n.current_session_start," - ",n.current_session_end]}),e.jsx("div",{style:{color:"#666",fontSize:8},children:"ET"})]})]}),e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(20,20,30,0.95) 0%, rgba(10,10,15,0.98) 100%)",border:"2px solid rgba(255,255,255,0.1)",borderRadius:16,overflow:"hidden",flex:1},children:[e.jsx("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:zt.map((k,q)=>e.jsx(rn,{level:k,position:"above"},q))}),e.jsxs("div",{style:{padding:"16px 12px",background:"linear-gradient(180deg, rgba(0,170,255,0.2) 0%, rgba(0,100,200,0.1) 100%)",borderTop:"2px solid #00aaff",borderBottom:"2px solid #00aaff",textAlign:"center"},children:[e.jsx("div",{style:{color:"#888",fontSize:9,letterSpacing:2,marginBottom:4},children:"CURRENT PRICE"}),e.jsxs("div",{style:{fontSize:36,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",textShadow:"0 0 30px rgba(0,170,255,0.5)"},children:["$",qe.toFixed(2)]}),e.jsxs("div",{style:{marginTop:4,fontSize:11,color:t.cumulative_delta>=0?"#00ff88":"#ff4466",fontWeight:600},children:[t.cumulative_delta>=0?"":""," Delta: ",((we=t.cumulative_delta)==null?void 0:we.toLocaleString())||0]})]}),e.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)"},children:an.map((k,q)=>e.jsx(rn,{level:k,position:"below"},q))})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8,minWidth:0,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx("div",{style:{display:"flex",gap:4,alignItems:"center"},children:["5m","15m","30m","1h"].map(k=>e.jsx("button",{onClick:()=>o(k),style:{padding:"6px 12px",borderRadius:6,border:"none",background:i===k?"#00ff88":"rgba(255,255,255,0.1)",color:i===k?"#000":"#888",fontSize:10,fontWeight:600,cursor:"pointer"},children:dn[k]},k))}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(0,255,136,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"BUY"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",fontFamily:"monospace"},children:P.buy>999?`${(P.buy/1e3).toFixed(1)}k`:P.buy}),e.jsxs("span",{style:{fontSize:9,color:"#00ff88",opacity:.7},children:[mt,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"SELL"}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#ff4466",fontFamily:"monospace"},children:P.sell>999?`${(P.sell/1e3).toFixed(1)}k`:P.sell}),e.jsxs("span",{style:{fontSize:9,color:"#ff4466",opacity:.7},children:[qt,"%"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:P.delta>=0?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",padding:"4px 10px",borderRadius:6},children:[e.jsx("span",{style:{color:"#666",fontSize:8},children:"DELTA"}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:P.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[P.delta>=0?"+":"",Math.abs(P.delta)>999?`${(P.delta/1e3).toFixed(1)}k`:P.delta]}),e.jsx("span",{style:{fontSize:9,color:P.delta>=0?"#00ff88":"#ff4466",opacity:.7},children:Te>0?`${(P.delta/Te*100).toFixed(0)}%`:"0%"})]})]})]}),(()=>{var Tt,dt,Rt,Lt,Jt;const k=Math.min(200,Math.round(100/h)),q=[...ze].slice(-k),L=ze.length>0?ze[ze.length-1]:null,M={price_open:P.price_open||(L==null?void 0:L.price_open)||qe,price_high:P.price_high||(L==null?void 0:L.price_high)||qe,price_low:P.price_low||(L==null?void 0:L.price_low)||qe,price_close:qe||(L==null?void 0:L.price_close)||0,buy:P.buy||(L==null?void 0:L.buy)||100,sell:P.sell||(L==null?void 0:L.sell)||80,delta:P.delta||(L==null?void 0:L.delta)||20,volume:Te||(L?L.buy+L.sell:180)},xe=[...q,M],re=xe.slice(-10),T=()=>{if(re.length<3)return{exhaustion:!1,absorption:!1,deltaTrend:"neutral",volTrend:"neutral"};const lt=re.slice(-3),bt=lt.map(vt=>vt.delta||0),en=lt.map(vt=>(vt.buy||0)+(vt.sell||0)),je=lt.map(vt=>vt.price_close||0),V=bt[2]>bt[1]&&bt[1]>bt[0]?"increasing":bt[2]<bt[1]&&bt[1]<bt[0]?"decreasing":"neutral",ce=en[2]>en[1]?"increasing":en[2]<en[1]?"decreasing":"neutral",$e=bt.reduce((vt,gt)=>vt+gt,0)/3,nt=$e<0&&ce==="decreasing"&&Math.abs(bt[2])<Math.abs(bt[0]),wt=je[2]>=je[0]-2,It=$e<-10&&wt&&en[2]>50;return{exhaustion:nt,absorption:It,deltaTrend:V,volTrend:ce,avgDelta:$e}},b=()=>{if(re.length<5)return{microRange:null,initiation:!1,vRecovery:!1};const lt=re.slice(-5),bt=lt.map(vt=>vt.price_high||vt.price_close||0),en=lt.map(vt=>vt.price_low||vt.price_close||0),je=Math.max(...bt),V=Math.min(...en),ce=je-V,$e=lt.reduce((vt,gt)=>vt+(gt.price_close||0),0)/5,nt=ce<$e*.005,wt=M.price_close>je&&nt,pt=lt.slice(-3).map(vt=>vt.delta||0),It=pt[0]<-50&&pt[2]>50;return{microRange:nt?{high:je,low:V}:null,initiation:wt,vRecovery:It,rangeSize:ce}},z=()=>{if(re.length<3)return{pocMigration:"neutral",imbalances:0,bullishClose:!1};const lt=re.slice(-3),bt=lt.map(ce=>((ce.price_high||ce.price_close)+(ce.price_low||ce.price_close))/2),en=bt[2]>bt[1]&&bt[1]>bt[0]?"up":bt[2]<bt[1]&&bt[1]<bt[0]?"down":"neutral",je=lt.filter(ce=>(ce.buy||0)>(ce.sell||0)*1.5).length,V=M.price_close>bt[1]&&M.delta>0;return{pocMigration:en,imbalances:je,bullishClose:V,pocs:bt}},E=T(),se=b(),de=z(),be=de.pocMigration==="up"&&de.imbalances>=2&&de.bullishClose?"C":se.initiation||se.vRecovery?"B":E.exhaustion||E.absorption?"A":"-",Xe=Math.min(100,Math.max(0,50+(E.avgDelta||0)/5+(de.pocMigration==="up"?20:de.pocMigration==="down"?-20:0)+de.imbalances*10)),St=Math.min(k,Math.round(50/h)),ve=xe.slice(-St),Oe=ve.map((lt,bt)=>({...lt,isEmpty:!1,isCurrent:bt===ve.length-1})),Ve=Oe.filter(lt=>!lt.isEmpty&&lt.price_close>0);return Ve.length>0&&Math.max(...Ve.map(lt=>lt.price_high||lt.price_close)),Ve.length>0&&Math.min(...Ve.map(lt=>lt.price_low||lt.price_close)),Math.max(...Ve.map(lt=>Math.abs(lt.delta||0)),1),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{color:"#888",fontSize:11,fontWeight:600,letterSpacing:1},children:"EXECUTION ANALYSIS"}),e.jsxs("div",{style:{position:"relative"},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[e.jsxs("div",{style:{padding:"3px 10px",borderRadius:4,fontSize:10,fontWeight:700,cursor:"help",background:be==="C"?"rgba(0,255,136,0.2)":be==="B"?"rgba(255,170,0,0.2)":be==="A"?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",color:be==="C"?"#00ff88":be==="B"?"#ffaa00":be==="A"?"#00aaff":"#666",border:`1px solid ${be==="C"?"#00ff8850":be==="B"?"#ffaa0050":be==="A"?"#00aaff50":"#ffffff20"}`},children:["PHASE ",be]}),De&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:0,marginTop:8,background:"linear-gradient(135deg, rgba(20,22,30,0.98), rgba(15,17,23,0.98))",border:"1px solid rgba(255,255,255,0.15)",borderRadius:10,padding:14,minWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)",backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:10,marginBottom:10},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:be==="C"?"#00ff88":be==="B"?"#ffaa00":be==="A"?"#00aaff":"#888",marginBottom:4},children:be==="A"?"PHASE A: Exhaustion & Absorption":be==="B"?"PHASE B: Micro Range & Initiation":be==="C"?"PHASE C: POC Migration & Imbalances":"NO CLEAR PHASE"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:be==="A"?"Sell pressure ending, watching for reversal setup":be==="B"?"Consolidation detected, preparing for breakout":be==="C"?"Strong directional move confirmed with buying pressure":"Market in transition between phases"})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:be==="A"?"#00aaff":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:E.exhaustion||E.absorption?"#00aaff":"#333"}}),"PHASE A METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Avg Delta (3 bars):"}),e.jsx("div",{style:{color:(E.avgDelta||0)<0?"#ff4466":"#00ff88",fontFamily:"monospace",fontWeight:600},children:(E.avgDelta||0).toFixed(0)}),e.jsx("div",{style:{color:"#666"},children:"Delta Trend:"}),e.jsx("div",{style:{color:E.deltaTrend==="increasing"?"#00ff88":E.deltaTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((Tt=E.deltaTrend)==null?void 0:Tt.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Volume Trend:"}),e.jsx("div",{style:{color:E.volTrend==="increasing"?"#00ff88":E.volTrend==="decreasing"?"#ff4466":"#888",fontWeight:600},children:((dt=E.volTrend)==null?void 0:dt.toUpperCase())||"N/A"}),e.jsx("div",{style:{color:"#666"},children:"Exhaustion:"}),e.jsx("div",{style:{color:E.exhaustion?"#00aaff":"#444",fontWeight:600},children:E.exhaustion?"DETECTED":"No"}),e.jsx("div",{style:{color:"#666"},children:"Absorption:"}),e.jsx("div",{style:{color:E.absorption?"#00aaff":"#444",fontWeight:600},children:E.absorption?"DETECTED":"No"})]})]}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{fontSize:9,color:be==="B"?"#ffaa00":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:se.initiation||se.vRecovery?"#ffaa00":"#333"}}),"PHASE B METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"Range Size:"}),e.jsxs("div",{style:{color:"#ccc",fontFamily:"monospace",fontWeight:600},children:["$",(se.rangeSize||0).toFixed(2)]}),e.jsx("div",{style:{color:"#666"},children:"Micro Range:"}),e.jsx("div",{style:{color:se.microRange?"#ffaa00":"#444",fontWeight:600},children:se.microRange?`H:$${(Rt=se.microRange.high)==null?void 0:Rt.toFixed(2)} L:$${(Lt=se.microRange.low)==null?void 0:Lt.toFixed(2)}`:"No tight range"}),e.jsx("div",{style:{color:"#666"},children:"Initiation:"}),e.jsx("div",{style:{color:se.initiation?"#ffaa00":"#444",fontWeight:600},children:se.initiation?"BREAKOUT":"No"}),e.jsx("div",{style:{color:"#666"},children:"V-Recovery:"}),e.jsx("div",{style:{color:se.vRecovery?"#ffaa00":"#444",fontWeight:600},children:se.vRecovery?"DETECTED":"No"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:9,color:be==="C"?"#00ff88":"#555",fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",background:de.pocMigration==="up"&&de.imbalances>=2?"#00ff88":"#333"}}),"PHASE C METRICS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px 12px",fontSize:9},children:[e.jsx("div",{style:{color:"#666"},children:"POC Migration:"}),e.jsxs("div",{style:{color:de.pocMigration==="up"?"#00ff88":de.pocMigration==="down"?"#ff4466":"#888",fontWeight:600},children:[((Jt=de.pocMigration)==null?void 0:Jt.toUpperCase())||"NEUTRAL"," ",de.pocMigration==="up"?"":de.pocMigration==="down"?"":""]}),e.jsx("div",{style:{color:"#666"},children:"Buy Imbalances:"}),e.jsxs("div",{style:{color:de.imbalances>=2?"#00ff88":"#888",fontFamily:"monospace",fontWeight:600},children:[de.imbalances||0,"/3 bars"]}),e.jsx("div",{style:{color:"#666"},children:"Bullish Close:"}),e.jsx("div",{style:{color:de.bullishClose?"#00ff88":"#444",fontWeight:600},children:de.bullishClose?"YES":"No"}),e.jsx("div",{style:{color:"#666"},children:"POC Levels:"}),e.jsx("div",{style:{color:"#888",fontFamily:"monospace",fontSize:8},children:de.pocs?de.pocs.map(lt=>`$${lt==null?void 0:lt.toFixed(0)}`).join("  "):"N/A"})]})]}),e.jsxs("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:"Momentum Score:"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:80,height:4,background:"#222",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Xe}%`,height:"100%",background:Xe>60?"#00ff88":Xe<40?"#ff4466":"#ffaa00",borderRadius:2}})}),e.jsx("span",{style:{fontSize:11,fontWeight:700,fontFamily:"monospace",color:Xe>60?"#00ff88":Xe<40?"#ff4466":"#ffaa00"},children:Xe.toFixed(0)})]})]})]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:9,color:"#666"},children:dn[i]}),e.jsx("button",{onClick:()=>p(!d),style:{background:d?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:d?"Hide Chart":"Show Chart"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"MOMENTUM"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:Xe>60?"#00ff88":Xe<40?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:Xe.toFixed(0)}),e.jsx("div",{style:{height:3,background:"rgba(255,255,255,0.1)",borderRadius:2,marginTop:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Xe}%`,height:"100%",background:Xe>60?"#00ff88":Xe<40?"#ff4466":"#ffaa00",transition:"width 0.3s"}})})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"DELTA"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:E.deltaTrend==="increasing"?"#00ff88":E.deltaTrend==="decreasing"?"#ff4466":"#888"},children:E.deltaTrend==="increasing"?" UP":E.deltaTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VOLUME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:E.volTrend==="increasing"?"#00aaff":E.volTrend==="decreasing"?"#ff8800":"#888"},children:E.volTrend==="increasing"?" UP":E.volTrend==="decreasing"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"POC"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:de.pocMigration==="up"?"#00ff88":de.pocMigration==="down"?"#ff4466":"#888"},children:de.pocMigration==="up"?" UP":de.pocMigration==="down"?" DN":" FLAT"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IMBAL"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:de.imbalances>=2?"#00ff88":de.imbalances===1?"#ffaa00":"#666",fontFamily:"monospace"},children:[de.imbalances,"/3"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:6,marginBottom:10,flexWrap:"wrap"},children:[E.exhaustion&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,170,255,0.2)",color:"#00aaff",border:"1px solid rgba(0,170,255,0.3)"},children:" EXHAUSTION"}),E.absorption&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(138,43,226,0.2)",color:"#a855f7",border:"1px solid rgba(138,43,226,0.3)"},children:" ABSORPTION"}),se.microRange&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.3)"},children:" MICRO RANGE"}),se.initiation&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" INITIATION"}),se.vRecovery&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" V-RECOVERY"}),de.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(0,255,136,0.2)",color:"#00ff88",border:"1px solid rgba(0,255,136,0.3)"},children:" BULLISH CLOSE"}),!E.exhaustion&&!E.absorption&&!se.microRange&&!se.initiation&&!se.vRecovery&&!de.bullishClose&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:"rgba(255,255,255,0.05)",color:"#666",border:"1px solid rgba(255,255,255,0.1)"},children:"SCANNING..."})]}),d&&e.jsx(e.Fragment,{children:(()=>{const lt=t.asset_class||"GC",bt=lt==="BTC-SPOT"?10:lt==="BTC"?5:lt==="ES"||lt==="NQ"?.25:.1,en=(lt.includes("BTC"),2),je=bt*en,ce=Math.round((F?52:40)*h),$e=F?window.innerHeight-150:340,nt=55,wt=Oe.filter(Ce=>!Ce.isEmpty&&Ce.price_close>0),pt=wt.map(Ce=>Ce.price_high||Ce.price_close),It=wt.map(Ce=>Ce.price_low||Ce.price_close),vt=pt.length>0?Math.max(...pt):qe+5,gt=It.length>0?Math.min(...It):qe-5,Ut=vt-gt,nn=(vt+gt)/2,Ot=Ut/U,Gt=Math.ceil((nn+Ot/2+je*10)/je)*je,Ht=Math.floor((nn-Ot/2-je*10)/je)*je,ee=Oe.length*ce,Ee=$e-10,Re=Ce=>(Gt-Ce)/(Gt-Ht)*Ee,At=Ce=>Ce?new Date(Ce*1e3).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"America/New_York"}):"";return e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(12,12,20,0.99) 0%, rgba(8,8,14,1) 100%)",borderRadius:F?0:8,border:F?"none":"1px solid rgba(255,255,255,0.08)",position:F?"fixed":"relative",top:F?0:void 0,left:F?0:void 0,right:F?0:void 0,bottom:F?0:void 0,zIndex:F?9999:1,overflow:"hidden",width:F?"100vw":"100%",height:F?"100vh":void 0,maxWidth:"100%",boxSizing:"border-box"},children:[F&&e.jsx("button",{onClick:()=>pe(!1),style:{position:"absolute",top:20,right:20,background:"rgba(255,100,100,0.5)",border:"1px solid rgba(255,100,100,0.7)",borderRadius:6,padding:"10px 20px",cursor:"pointer",fontSize:14,fontWeight:600,color:"#fff",zIndex:1e4},children:" Close Fullscreen"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",maxWidth:"100%"},children:[e.jsxs("div",{style:{display:"flex",maxWidth:"100%"},children:[e.jsx("div",{ref:Ce=>{Ce&&ee>Ce.clientWidth&&(Ce.scrollLeft=ee-Ce.clientWidth)},style:{flex:1,maxWidth:`calc(100% - ${nt}px)`,height:$e,overflow:"auto",position:"relative"},children:e.jsx("div",{style:{width:Math.max(ee+80,400),height:$e-10,position:"relative",background:"rgba(8,8,14,1)",paddingRight:60},children:Oe.map((Ce,Ye)=>{if(Ce.isEmpty)return null;const Qe=Ce.buy||0,$t=Ce.sell||0,jt=Ce.price_high||Ce.price_close||qe+1,Vt=Ce.price_low||Ce.price_close||qe-1,Qt=Ce.price_open||Ce.price_close||qe,kt=Ce.price_close||qe,it=kt>=Qt,Wt=Re(jt),Ft=Re(Vt),Yt=Re(Qt),gn=Re(kt),Xt=Math.min(Yt,gn),Ln=Math.max(Math.abs(gn-Yt),2),mn=Math.max(jt-Vt,je),Bi=Math.max(Ft-Wt,20),On=F?12:10,$i=Math.max(2,Math.floor(Bi/On)),Po=mn/$i,Pn=[],_n=(Ce.ts||Ye)*9301+49297;for(let Bt=0;Bt<$i;Bt++){const Ct=jt-(Bt+.5)*Po,ct=Math.abs(Ct-kt)/(mn||1),xt=Math.exp(-ct*2)*.6+.3,Nt=(_n+Bt*7919)%233280/233280,vn=Nt>.1?Nt>.7?1.8:Nt>.4?1.2:.8:0,Yn=xt*vn,ht=(Ct-Vt)/(mn||1),yt=it?ht>.5?1.3:.8:ht<.5?1.3:.8,Pt=it?ht<.5?1.3:.8:ht>.5?1.3:.8,Nn=Math.round(Qe*Yn*yt/$i),No=Math.round($t*Yn*Pt/$i);Pn.push({price:Ct,sell:No,buy:Nn})}const Br=Math.max(...Pn.map(Bt=>Bt.sell+Bt.buy),1),Ii=Math.max(...Pn.map(Bt=>Bt.sell),1),Zi=Math.max(...Pn.map(Bt=>Bt.buy),1);Pn.forEach(Bt=>Bt.isPOC=Bt.sell+Bt.buy===Br&&Br>0);const yo=(Bt,Ct)=>{if(Ct)return{bg:"#ffffff",border:"2px solid #fff"};if(Bt===0)return{bg:"rgba(60,40,40,0.4)",border:"1px solid rgba(80,60,60,0.3)"};const ct=Math.min(1,Bt/Ii),xt=255,Nt=Math.round(255-ct*200),bn=Math.round(255-ct*200);return{bg:`rgb(${xt},${Nt},${bn})`,border:`1px solid rgba(255,${80+(1-ct)*120},${80+(1-ct)*120},0.8)`}},qi=(Bt,Ct)=>{if(Ct)return{bg:"#ffffff",border:"2px solid #fff"};if(Bt===0)return{bg:"rgba(40,50,45,0.4)",border:"1px solid rgba(60,80,70,0.3)"};const ct=Math.min(1,Bt/Zi),xt=Math.round(255-ct*200),Nt=255,bn=Math.round(255-ct*180);return{bg:`rgb(${xt},${Nt},${bn})`,border:`1px solid rgba(${100+(1-ct)*100},255,${100+(1-ct)*100},0.8)`}},Vi=12,ii=(ce-Vi)/2;return e.jsxs("div",{style:{position:"absolute",left:Ye*ce,top:0,width:ce,height:Ee,borderRight:"1px solid rgba(40,40,50,0.5)"},children:[Pn.map((Bt,Ct)=>{const ct=Wt+Ct*On,xt=14,Nt=Bt.sell===0?xt:Math.max(xt,ii*.3+ii*.7*(Bt.sell/Ii)),bn=Bt.buy===0?xt:Math.max(xt,ii*.3+ii*.7*(Bt.buy/Zi)),vn=yo(Bt.sell,Bt.isPOC),Yn=qi(Bt.buy,Bt.isPOC),ht=Bt.isPOC?"#000":"#8b0000",yt=Bt.isPOC?"#000":"#006400";return e.jsxs(Li.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:ii-Nt,top:ct,width:Nt,height:On-1,background:vn.bg,border:vn.border,borderRadius:"2px 0 0 2px",boxShadow:Bt.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:2,fontSize:8,fontFamily:"monospace",color:Bt.sell===0?"#666":ht,fontWeight:Bt.isPOC?700:600,textShadow:"none",overflow:"hidden"},children:F&&Bt.sell}),e.jsx("div",{style:{position:"absolute",left:ii+Vi,top:ct,width:bn,height:On-1,background:Yn.bg,border:Yn.border,borderRadius:"0 2px 2px 0",boxShadow:Bt.isPOC?"0 0 4px rgba(255,255,255,0.8)":"none",display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:2,fontSize:8,fontFamily:"monospace",color:Bt.buy===0?"#666":yt,fontWeight:Bt.isPOC?700:400,textShadow:Bt.isPOC||Bt.buy===0?"none":"0 0 2px rgba(0,0,0,0.8)",overflow:"hidden"},children:F&&Bt.buy})]},Ct)}),e.jsx("div",{style:{position:"absolute",left:ii+Vi/2-1,top:Wt,width:2,height:Math.max(Ft-Wt,1),background:it?"rgba(0,255,200,0.6)":"rgba(255,0,150,0.6)",boxShadow:it?"0 0 3px rgba(0,255,255,0.5)":"0 0 3px rgba(255,0,150,0.5)"}}),e.jsx("div",{style:{position:"absolute",left:ii+1,top:Xt,width:Vi-2,height:Math.max(Ln,3),background:it?"rgba(100,255,200,0.7)":"rgba(255,100,150,0.7)",border:it?"1px solid rgba(0,255,255,0.9)":"1px solid rgba(255,0,150,0.9)",borderRadius:2,boxShadow:it?"0 0 4px rgba(0,255,255,0.6)":"0 0 4px rgba(255,0,150,0.6)"}}),Ye===Oe.length-1&&Ce.ts&&e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Math.min(Ft+10,Ee-25),background:"#00cccc",border:"2px solid #00ffff",borderRadius:4,padding:"4px 12px",fontSize:12,fontWeight:700,color:"#000",whiteSpace:"nowrap",boxShadow:"0 0 15px rgba(0,255,255,0.9)",zIndex:500},children:At(Ce.ts)})]},Ye)})})}),e.jsx("div",{style:{width:nt,height:$e,overflow:"hidden",borderLeft:"1px solid rgba(255,255,255,0.2)",background:"rgba(20,20,30,0.95)",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"4px 0",cursor:"ns-resize",userSelect:"none"},onMouseDown:Ce=>{const Ye=Ce.clientY,Qe=U,$t=Vt=>{const Qt=(Ye-Vt.clientY)/100,kt=Math.max(.5,Math.min(5,Qe+Qt));m(kt)},jt=()=>{document.removeEventListener("mousemove",$t),document.removeEventListener("mouseup",jt)};document.addEventListener("mousemove",$t),document.addEventListener("mouseup",jt)},onWheel:Ce=>{Ce.preventDefault();const Ye=Ce.deltaY>0?-.1:.1;m(Qe=>Math.max(.5,Math.min(5,Qe+Ye)))},children:[...Array(8)].map((Ce,Ye)=>{const Qe=Gt-Ye*(Gt-Ht)/7;return e.jsx("div",{style:{fontSize:9,fontFamily:"monospace",color:"#aaa",paddingLeft:4,lineHeight:1},children:Qe.toFixed(1)},Ye)})})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.4)",maxWidth:"100%",overflowX:"auto"},children:[e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Oe.map((Ce,Ye)=>e.jsx("div",{style:{width:ce,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",color:"#777",padding:"2px 0"},children:Ce.isEmpty?"":(Ce.buy||0)+(Ce.sell||0)},Ye))}),e.jsx("div",{style:{width:nt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Oe.map((Ce,Ye)=>{const Qe=Ce.delta||(Ce.buy||0)-(Ce.sell||0),$t=Qe>=0;return e.jsx("div",{style:{width:ce,flexShrink:0,textAlign:"center",padding:"2px 1px"},children:!Ce.isEmpty&&e.jsxs("span",{style:{fontSize:8,fontFamily:"monospace",fontWeight:600,color:"#000",background:$t?"#40dd80":"#ff5555",padding:"1px 4px",borderRadius:2},children:[$t?"+":"",typeof Qe=="number"?Qe.toFixed(0):Qe]})},Ye)})}),e.jsx("div",{style:{width:nt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",paddingRight:60},children:Oe.map((Ce,Ye)=>{const Qe=Ce.delta||(Ce.buy||0)-(Ce.sell||0),$t=(Ce.buy||0)+(Ce.sell||0),jt=$t>0?Qe/$t*100:0;return e.jsx("div",{style:{width:ce,flexShrink:0,textAlign:"center",fontSize:7,fontFamily:"monospace",color:jt>=0?"#40dd80":"#ff5555",padding:"1px 0"},children:Ce.isEmpty?"":`${jt.toFixed(1)}%`},Ye)})}),e.jsx("div",{style:{width:nt,flexShrink:0}})]}),e.jsxs("div",{style:{display:"flex",cursor:"ew-resize",userSelect:"none"},onMouseDown:Ce=>{const Ye=Ce.clientX,Qe=h,$t=Vt=>{const Qt=(Ye-Vt.clientX)/100,kt=Math.max(.5,Math.min(3,Qe+Qt));w(kt)},jt=()=>{document.removeEventListener("mousemove",$t),document.removeEventListener("mouseup",jt)};document.addEventListener("mousemove",$t),document.addEventListener("mouseup",jt)},onWheel:Ce=>{Ce.preventDefault();const Ye=Ce.deltaY>0?-.1:.1;w(Qe=>Math.max(.5,Math.min(3,Qe+Ye)))},children:[e.jsxs("div",{style:{flex:1,display:"flex",overflowX:"auto",justifyContent:"flex-end",position:"relative",paddingRight:60},children:[Oe.map((Ce,Ye)=>{const Qe=Ye===Oe.length-1;return e.jsx("div",{style:{width:ce,flexShrink:0,textAlign:"center",fontSize:8,fontFamily:"monospace",padding:"3px 0"},children:Ce.isEmpty?"":e.jsx("span",{style:{color:Qe?"#00ffff":"#555",fontWeight:Qe?700:400,background:Qe?"rgba(0,255,255,0.25)":"transparent",padding:Qe?"2px 6px":0,borderRadius:Qe?4:0,border:Qe?"1px solid rgba(0,255,255,0.7)":"none",boxShadow:Qe?"0 0 6px rgba(0,255,255,0.5)":"none"},children:At(Ce.ts)})},Ye)}),Oe.length>0&&!Oe[Oe.length-1].isEmpty&&e.jsxs("div",{style:{position:"absolute",right:0,top:-20,background:"rgba(0,255,255,0.3)",border:"1px solid rgba(0,255,255,0.8)",borderRadius:4,padding:"2px 8px",fontSize:9,fontWeight:700,color:"#00ffff",boxShadow:"0 0 8px rgba(0,255,255,0.5)",zIndex:100},children:["LIVE: ",At(Oe[Oe.length-1].ts)]})]}),e.jsx("div",{style:{width:nt,flexShrink:0}})]})]})]}),!F&&e.jsx("button",{onClick:()=>pe(!0),style:{position:"absolute",top:8,right:8,background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"4px 8px",cursor:"pointer",fontSize:10,color:"#888",zIndex:200},children:" Expand"})]})})()})]})})(),(t==null?void 0:t.contract)==="BTC-SPOT"&&e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10,marginTop:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"BTC ETF FLOWS & INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"TOTAL ETF FLOWS"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"1D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:v.total_flow_1d_mm>0?"#00ff88":v.total_flow_1d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(v.total_flow_1d_mm||0).toFixed(0),"M",v.total_flow_1d_mm>0?" IN":v.total_flow_1d_mm<0?" OUT":""]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"5D Flow"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:v.total_flow_5d_mm>0?"#00ff88":v.total_flow_5d_mm<0?"#ff4466":"#888"},children:["$",Math.abs(v.total_flow_5d_mm||0).toFixed(0),"M"]})]})]}),(v.etfs||[]).slice(0,4).map((k,q)=>{var L,M;return e.jsxs("div",{style:{flex:"1 1 120px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"6px 8px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#ffaa00",fontWeight:700,marginBottom:4},children:k.symbol}),e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#fff",marginBottom:2},children:["$",((L=k.price)==null?void 0:L.toFixed(2))||"--"]}),e.jsxs("div",{style:{fontSize:9,color:k.price_change_1d>0?"#00ff88":k.price_change_1d<0?"#ff4466":"#888"},children:[k.price_change_1d>0?"+":"",((M=k.price_change_1d)==null?void 0:M.toFixed(2))||"0","%"]})]},q)}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"INSTITUTIONAL SENTIMENT"}),(()=>{const k=(te==null?void 0:te.bitcoin)||{},q=k.overall_sentiment||"neutral",L=q==="bullish"?"#00ff88":q==="bearish"?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Overall"}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:L,textTransform:"uppercase"},children:q})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"ETF Trend"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:k.etf_flow_trend==="bullish"?"#00ff88":k.etf_flow_trend==="bearish"?"#ff4466":"#888"},children:k.etf_flow_trend||"neutral"})]})]})})()]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 200px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#ff6b6b",fontWeight:700,marginBottom:6},children:"DERIBIT OPTIONS"}),(()=>{const k=(le==null?void 0:le.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Max Pain"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:"#ffaa00"},children:["$",(k.max_pain||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"P/C Ratio"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:k.put_call_ratio>1?"#ff4466":k.put_call_ratio<.7?"#00ff88":"#888"},children:(k.put_call_ratio||0).toFixed(2)})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Sentiment"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:k.sentiment==="bullish"?"#00ff88":k.sentiment==="bearish"?"#ff4466":"#888"},children:k.sentiment||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",fontWeight:700,marginBottom:6},children:"GAMMA LEVELS"}),(()=>{const k=(le==null?void 0:le.btc_options)||{};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#00ff88"},children:"Call Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(k.call_wall||0).toLocaleString()]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#ff4466"},children:"Put Wall"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:["$",(k.put_wall||0).toLocaleString()]})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"PERP FUNDING RATE"}),(()=>{var M,xe,re;const k=(ot==null?void 0:ot.funding_rates)||{},q=k.average||0,L=q>.01?"#00ff88":q<-.01?"#ff4466":"#888";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"8H Rate"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:L},children:[q>0?"+":"",(q||0).toFixed(4),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Annual"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:L},children:[k.annualized>0?"+":"",(k.annualized||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:(M=k.sentiment)!=null&&M.includes("bullish")?"#00ff88":(xe=k.sentiment)!=null&&xe.includes("bearish")?"#ff4466":"#888"},children:((re=k.sentiment)==null?void 0:re.replace("_"," "))||"neutral"})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CME BASIS"}),(()=>{var L;const q=(((L=te==null?void 0:te.bitcoin)==null?void 0:L.cme_basis)||{}).basis_pct||0;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Futures vs Spot"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:q>0?"#00ff88":"#ff4466"},children:[q>0?"+":"",q.toFixed(2),"%"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Premium tracking"})]})})()]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8,marginTop:8},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var se;const k=((se=te==null?void 0:te.bitcoin)==null?void 0:se.cot)||{},q=k.sentiment||"neutral",L=q==="bullish"?"#00ff88":q==="bearish"?"#ff4466":"#888",M=k.asset_mgr_net||0,xe=k.asset_mgr_net_prev||0,re=k.asset_mgr_change||M-xe,T=k.lev_funds_net||0,b=k.lev_funds_net_prev||0,z=k.lev_funds_change||T-b,E=k.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Asset Managers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466",fontWeight:600},children:[(M/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(xe/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:re>0?"#00ff88":"#ff4466",fontWeight:600},children:[re>0?"+":"",(re/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",E]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Asset Mgrs"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:M>0?"#00ff88":"#ff4466"},children:[M>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:re>0?"#00ff88":"#ff4466"},children:["(",re>0?"+":"",(re/1e3).toFixed(1),"K)"]})]})]})}),e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Leveraged Funds Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:T>0?"#00ff88":"#ff4466",fontWeight:600},children:[(T/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(b/1e3).toFixed(1),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:z>0?"#00ff88":"#ff4466",fontWeight:600},children:[z>0?"+":"",(z/1e3).toFixed(1),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Lev Funds"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:T>0?"#00ff88":"#ff4466"},children:[T>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:z>0?"#00ff88":"#ff4466"},children:["(",z>0?"+":"",(z/1e3).toFixed(1),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:L,textTransform:"capitalize"},children:q})]})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"CME OPEN INTEREST"}),(()=>{var xe;const k=((xe=te==null?void 0:te.bitcoin)==null?void 0:xe.open_interest)||{},q=k.total||0,L=k.total_prev||0,M=k.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"CME Bitcoin Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(q/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(L/1e3).toFixed(1),"K BTC"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466"},children:[M>0?"+":"",M.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(q/1e3).toFixed(1),"K BTC"]})]})}),e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(k.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(k.change_pct||0)>0?"+":"",(k.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466"},children:[M>0?"+":"",M.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(k.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(k.change_pct||0)>0?"+":"",(k.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",fontWeight:700,marginBottom:6},children:"GBTC PREMIUM"}),(()=>{var xe;const k=((xe=te==null?void 0:te.bitcoin)==null?void 0:xe.gbtc)||{},q=k.premium_pct||0,L=k.premium_pct_prev||0,M=q-L;return e.jsxs(e.Fragment,{children:[e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#888",fontWeight:600,marginBottom:4},children:"GBTC NAV Premium/Discount"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:q>0?"#00ff88":"#ff4466",fontWeight:600},children:[q>0?"+":"",q.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[L>0?"+":"",L.toFixed(2),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Change:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466"},children:[M>0?"+":"",M.toFixed(2),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Premium = bullish demand"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Discount = bearish pressure"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"NAV Premium"}),e.jsxs("span",{style:{fontSize:11,fontWeight:700,color:q>0?"#00ff88":"#ff4466"},children:[q>0?"+":"",q.toFixed(2),"%"]})]})}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Institutional demand"})]})})()]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"CFTC COT Report"}),e.jsx("div",{style:{marginBottom:4,color:"#aaa"},children:"Commitments of Traders"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Data as of:"}),e.jsx("span",{style:{color:"#fff"},children:"Tuesday"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16},children:[e.jsx("span",{style:{color:"#888"},children:"Released:"}),e.jsx("span",{style:{color:"#fff"},children:"Friday 3:30pm ET"})]}),e.jsx("div",{style:{marginTop:6,fontSize:9,color:"#666"},children:"Shows institutional positioning in CME Bitcoin futures"})]}),children:e.jsxs("div",{style:{cursor:"help"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CFTC REPORT"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Weekly Tuesday"}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"Released Fri 3:30pm"})]})})})]})]}),(()=>{const q=[...ze].slice(0,21).reverse(),L=3,M=180;let xe=0;const re=q.map((je,V,ce)=>{const $e=je.delta??0,nt=(je.buy||0)+(je.sell||0),wt=nt>0?$e/nt*100:0,pt=V>0&&ce[V-1].delta||0,It=$e-pt,vt=xe;xe+=$e;const gt=xe,Ut=Math.abs($e)*.15,nn=Math.max(vt,gt)+Ut,Ot=Math.min(vt,gt)-Ut;return{price_open:je.price_open||0,price_high:je.price_high||0,price_low:je.price_low||0,price_close:je.price_close||0,delta_open:vt,delta_high:nn,delta_low:Ot,delta_close:gt,delta:$e,deltaPct:wt,deltaChange:It,volume:nt,ts:je.ts||0,isCurrent:!1,isEmpty:!1}});if(P.buy>0||P.sell>0||P.price_open>0){const je=P.delta??0,V=Te>0?je/Te*100:0,ce=q.length>0&&q[q.length-1].delta||0,$e=je-ce,nt=re.length>0?re[re.length-1].delta_close:0,wt=nt,pt=nt+je,It=Math.abs(je)*.15,vt=Math.max(wt,pt)+It,gt=Math.min(wt,pt)-It;re.push({price_open:P.price_open||0,price_high:P.price_high||qe,price_low:P.price_low||qe,price_close:qe,delta_open:wt,delta_high:vt,delta_low:gt,delta_close:pt,delta:je,deltaPct:V,deltaChange:$e,volume:Te,ts:P.candle_start||Date.now()/1e3,isCurrent:!0,isEmpty:!1})}const T=re,b=T.filter(je=>je.price_open>0),z=b.map(je=>je.price_high),E=b.map(je=>je.price_low),se=z.length>0?Math.max(...z):0,de=E.length>0?Math.min(...E):0,Se=se-de||1,be=se+Se*.1,Xe=de-Se*.1,Mt=be-Xe||1,St=T,ve=St.map(je=>je.delta_high),Oe=St.map(je=>je.delta_low),Ve=ve.length>0?Math.max(...ve):0,Tt=Oe.length>0?Math.min(...Oe):0,dt=Ve-Tt||50,Rt=Ve+dt*.15,Lt=Tt-dt*.15,Jt=Rt-Lt||1,lt=je=>(be-je)/Mt*M,bt=je=>(Rt-je)/Jt*M,en=je=>je?new Date(je*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",hour12:!1}):"";return e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsx("span",{style:{color:"#888",fontSize:10,fontWeight:600,letterSpacing:1},children:"PRICE & DELTA CHARTS"}),e.jsx("button",{onClick:()=>x(!C),style:{background:C?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"3px 8px",fontSize:9,color:"#888",cursor:"pointer"},children:C?"Hide Charts":"Show Charts"})]}),C&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"PRICE OHLC"}),e.jsxs("div",{style:{display:"flex",gap:L,height:M,overflow:"hidden",position:"relative"},children:[T.map((je,V)=>{if(je.price_open<=0)return null;const ce=je.price_close>=je.price_open,$e=lt(Math.max(je.price_open,je.price_close)),nt=Math.max(Math.abs(lt(je.price_open)-lt(je.price_close)),2),wt=lt(je.price_high),pt=lt(je.price_low)-wt,It=ce?"#00ff88":"#ff4466",vt=je.isCurrent?1:.5+V/T.length*.5,gt=c===V;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:M,opacity:gt?1:vt,cursor:"crosshair"},onMouseEnter:()=>N(V),onMouseLeave:()=>N(null),children:[gt&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:wt,width:1,height:pt,background:It,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:$e,width:je.isCurrent?"90%":"70%",height:nt,background:It,borderRadius:1,border:je.isCurrent?"1px solid rgba(255,255,255,0.5)":"none"}}),gt&&je.ts&&!je.isCurrent&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.9)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:4,padding:"2px 6px",fontSize:9,color:"#aaa",whiteSpace:"nowrap",pointerEvents:"none",zIndex:100},children:en(je.ts)}),je.isCurrent&&je.ts&&e.jsx("div",{style:{position:"absolute",bottom:-16,left:"50%",transform:"translateX(-50%)",background:"rgba(0,170,255,0.3)",border:"1px solid rgba(0,170,255,0.6)",borderRadius:3,padding:"1px 4px",fontSize:8,fontWeight:600,color:"#00aaff",whiteSpace:"nowrap",pointerEvents:"none",zIndex:50},children:en(je.ts)})]},V)}),(()=>{var ee;const je=t.big_trades||[],V=t.big_trades_historical||[],ce=new Set(je.map(Ee=>Ee.ts)),nt=[...je,...V.filter(Ee=>!ce.has(Ee.ts))].sort((Ee,Re)=>Re.ts-Ee.ts);if(nt.length===0)return null;const wt=100/T.length,pt=i==="5m"?300:i==="15m"?900:i==="30m"?1800:3600,It=T.filter(Ee=>Ee.ts>0),vt=It.length>0?Math.min(...It.map(Ee=>Ee.ts)):0,gt=It.length>0?Math.max(...It.map(Ee=>Ee.ts))+pt*2:0,Ut=nt.filter(Ee=>Ee.ts>=vt&&Ee.ts<=gt),nn={GC:100,NQ:20,ES:50,CL:1e3,BTC:1},Ot=t.asset_class||"GC",Gt=nn[Ot]||100,Ht=((ee=t.threshold_stats)==null?void 0:ee.avg_size)||3;return t.big_trade_threshold,e.jsxs(e.Fragment,{children:[e.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:M,pointerEvents:"none",zIndex:25,overflow:"visible"},children:[e.jsxs("defs",{children:[e.jsxs("radialGradient",{id:"buyGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#88ffcc",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#00ff88",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#006633",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"buyGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ccffee",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#44ffaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#00cc66",stopOpacity:"0.7"})]}),e.jsxs("radialGradient",{id:"sellGradient",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffaaaa",stopOpacity:"0.9"}),e.jsx("stop",{offset:"40%",stopColor:"#ff4466",stopOpacity:"0.7"}),e.jsx("stop",{offset:"100%",stopColor:"#881133",stopOpacity:"0.5"})]}),e.jsxs("radialGradient",{id:"sellGradientHover",cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffdddd",stopOpacity:"1"}),e.jsx("stop",{offset:"30%",stopColor:"#ff6688",stopOpacity:"0.9"}),e.jsx("stop",{offset:"100%",stopColor:"#cc2244",stopOpacity:"0.7"})]}),e.jsxs("filter",{id:"buyGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"sellGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),Ut.map((Ee,Re)=>{const At=Ee.ts,Ce=T.findIndex((Xt,Ln)=>{if(!Xt.ts)return!1;const mn=Xt.ts,On=Ln===T.length-1?mn+pt*2:mn+pt;return At>=mn&&At<On});if(Ce===-1)return null;const Ye=(Ce+.5)*wt,Qe=lt(Ee.price),$t=i==="5m"?2:i==="15m"?1.5:i==="30m"?1.2:.8,Vt=Math.min(i==="1h"?14:i==="30m"?16:22,Math.max(6,Math.sqrt(Ee.size)*$t)),Qt=Ee.ts,kt=u===Qt,it=kt?Vt*1.5:Vt,Wt=Ee.side==="BUY",Ft=Wt?kt?"url(#buyGradientHover)":"url(#buyGradient)":kt?"url(#sellGradientHover)":"url(#sellGradient)",Yt=Wt?"#00ff88":"#ff4466",gn=Wt?"#00ff88":"#ff4466";return e.jsxs("g",{style:{cursor:"pointer",pointerEvents:"all"},onMouseEnter:()=>oe(Qt),onMouseLeave:Le,children:[e.jsx("circle",{cx:`${Ye}%`,cy:Qe,r:it+15,fill:"transparent",style:{pointerEvents:"visiblePainted",cursor:"pointer"}}),e.jsx("circle",{cx:`${Ye}%`,cy:Qe,r:it+(kt?12:4),fill:"none",stroke:Yt,strokeWidth:kt?3:1,strokeOpacity:kt?.5:.2,style:{transition:"all 0.2s ease",pointerEvents:"none"}}),e.jsx("circle",{cx:`${Ye}%`,cy:Qe,r:it+(kt?6:2),fill:Yt,fillOpacity:kt?.25:.1,style:{transition:"all 0.2s ease"}}),e.jsx("circle",{cx:`${Ye}%`,cy:Qe,r:it,fill:Ft,stroke:kt?"#ffffff":gn,strokeWidth:kt?2:1,filter:kt?Wt?"url(#buyGlow)":"url(#sellGlow)":"none",style:{transition:"all 0.2s ease"}}),e.jsx("ellipse",{cx:`${Ye}%`,cy:Qe-it*.35,rx:it*.5,ry:it*.25,fill:"rgba(255,255,255,0.4)",style:{transition:"all 0.2s ease"}}),(Ee.size>=10||kt)&&e.jsx("text",{x:`${Ye}%`,y:Qe+(kt?4:3),textAnchor:"middle",fontSize:kt?11:8,fontWeight:"bold",fill:"#fff",style:{transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:Ee.size>=1e3?`${(Ee.size/1e3).toFixed(1)}K`:Ee.size})]},Qt)}),Ut.length===0&&nt.length>0&&e.jsxs("text",{x:"50%",y:"20",textAnchor:"middle",fontSize:9,fill:"#666",children:[nt.length," big trades (",V.length," historical) - scroll to see"]})]}),u!==null&&(()=>{const Ee=Ut.find(jt=>jt.ts===u);if(!Ee)return null;const Re=Ee.ts,Ce=T.findIndex((jt,Vt)=>{if(!jt.ts)return!1;const Qt=jt.ts,it=Vt===T.length-1?Qt+pt*2:Qt+pt;return Re>=Qt&&Re<it})>=T.length*.7,Ye=Ee.size*Ee.price*Gt,Qe=Ht>0?(Ee.size/Ht).toFixed(1):"",$t=new Date(Ee.ts*1e3).toLocaleString("en-US",{timeZone:"America/New_York",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return e.jsxs("div",{style:{position:"absolute",top:4,...Ce?{left:4}:{right:4},background:"rgba(10,10,20,0.95)",border:`2px solid ${Ee.side==="BUY"?"#00ff88":"#ff4466"}`,borderRadius:8,padding:10,zIndex:100,minWidth:180,boxShadow:`0 4px 20px ${Ee.side==="BUY"?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:Ee.side==="BUY"?"#00ff88":"#ff4466",marginBottom:6},children:Ee.side==="BUY"?" BIG BUY":" BIG SELL"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr",gap:"3px 8px",fontSize:10},children:[e.jsx("span",{style:{color:"#666"},children:"Size:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:700},children:[Ee.size," contracts"]}),e.jsx("span",{style:{color:"#666"},children:"Price:"}),e.jsxs("span",{style:{color:"#fff"},children:["$",Ee.price.toFixed(2)]}),e.jsx("span",{style:{color:"#666"},children:"Notional:"}),e.jsxs("span",{style:{color:"#ffaa00",fontWeight:600},children:["$",(Ye/1e6).toFixed(2),"M"]}),e.jsx("span",{style:{color:"#666"},children:"vs Average:"}),e.jsxs("span",{style:{color:parseFloat(Qe)>2?"#00ff88":"#fff"},children:[Qe,"x larger"]}),e.jsx("span",{style:{color:"#666"},children:"Time:"}),e.jsxs("span",{style:{color:"#888"},children:[$t," ET"]}),Ee.date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#666"},children:"Date:"}),e.jsx("span",{style:{color:"#888"},children:Ee.date})]})]}),e.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#666"},children:["Top 10% of trades by size ",Ee.date?"(historical)":"(live)"]})]})})()]})})()]}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center",alignItems:"center",marginTop:4,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG BUY"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:3},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#ff4466",opacity:.7}}),e.jsx("span",{style:{color:"#888"},children:"BIG SELL"})]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("div",{style:{color:"#f97316"},children:[(t.big_trades||[]).length," live + ",(t.big_trades_historical||[]).length," historical ",t.big_trade_threshold||10," (P90)"]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,padding:"8px 10px",overflow:"hidden"},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6,letterSpacing:1},children:"DELTA OHLC  DIVERGENCE GLOW"}),e.jsx("div",{style:{display:"flex",gap:L,height:M,overflow:"hidden",position:"relative"},children:T.map((je,V)=>{const ce=je.delta_open,$e=je.delta_high,nt=je.delta_low,wt=je.delta_close,pt=je.price_open,It=je.price_close,vt=wt>=ce,gt=It>=pt,Ut=vt!==gt,nn=bt(Math.max(ce,wt)),Ot=Math.max(Math.abs(bt(ce)-bt(wt)),2),Gt=bt($e),Ht=bt(nt)-Gt,ee=vt?"#00ff88":"#ff4466",Ee=je.isCurrent?1:.5+V/T.length*.5,Re=c===V;return e.jsxs("div",{style:{position:"relative",flex:"1 1 0",minWidth:0,height:M,opacity:Re?1:Ee,cursor:"crosshair"},onMouseEnter:()=>N(V),onMouseLeave:()=>N(null),children:[Re&&e.jsx("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,width:0,borderLeft:"1px dashed rgba(255,255,255,0.4)",transform:"translateX(-50%)",pointerEvents:"none",zIndex:10}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:Gt,width:1,height:Math.max(Ht,0),background:ee,opacity:.7}}),e.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",top:nn,width:je.isCurrent?"90%":"70%",height:Ot,background:ee,borderRadius:1,border:je.isCurrent?"1px solid rgba(255,255,255,0.5)":"none",boxShadow:Ut?`0 0 8px ${ee}, 0 0 12px ${ee}`:"none"}})]},V)})}),e.jsx("div",{style:{display:"flex",gap:L,marginTop:6},children:T.map((je,V)=>{const ce=je.delta>=0?"#00ff88":"#ff4466",$e=je.isCurrent?1:.5+V/T.length*.5,nt=pt=>Math.abs(pt)>=1e3?`${(pt/1e3).toFixed(1)}k`:Math.round(pt),wt=c===V;return e.jsxs("div",{onMouseEnter:()=>N(V),onMouseLeave:()=>N(null),style:{flex:"1 1 0",minWidth:0,textAlign:"center",opacity:wt?1:$e,background:je.isCurrent?"rgba(0,170,255,0.12)":wt?"rgba(255,255,255,0.05)":"transparent",borderRadius:4,padding:"3px 1px",border:je.isCurrent?"1px solid rgba(0,170,255,0.25)":"none",cursor:"pointer",transition:"opacity 0.15s"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",fontFamily:"monospace",overflow:"hidden",textOverflow:"ellipsis"},children:en(je.ts)}),e.jsxs("div",{style:{fontSize:10,color:ce,fontFamily:"monospace",fontWeight:700},children:[je.deltaPct>=0?"+":"",(je.deltaPct||0).toFixed(0),"%"]}),e.jsx("div",{style:{fontSize:8,color:"#888",fontFamily:"monospace"},children:nt(je.volume||0)})]},V)})})]})]})]})})(),(()=>{var Lt,Jt,lt,bt,en,je,V,ce;const k=((Lt=t.volume_5m)==null?void 0:Lt.history)||[],q=k.length<5,L=k.slice(0,10),M=k.slice(10,20),xe=L.reduce(($e,nt)=>$e+(nt.delta||0),0),re=M.reduce(($e,nt)=>$e+(nt.delta||0),0),T=xe-re,b=((Jt=L[L.length-1])==null?void 0:Jt.price_open)||0,z=((lt=L[0])==null?void 0:lt.price_close)||0,E=z-b,se=b>0?E/b*100:0,de=500,Se=.1;let be="BALANCED";Math.abs(T)>de&&(T<-de&&se>-Se?be="DISTRIBUTION":T>de&&se<Se&&(be="ACCUMULATION"));const Xe=L[0]||{},Mt=Math.abs((Xe.price_high||0)-(Xe.price_low||0)),St=Xe.delta||0;let ve="NEUTRAL";Math.abs(St)>100&&Mt<5?ve=St>0?"BULL_ABSORPTION":"BEAR_ABSORPTION":Mt>10&&Math.abs(St)>100&&(ve=St>0?"BULL_FOLLOW":"BEAR_FOLLOW");const Oe=T*E<0&&Math.abs(T)>de,Ve=L.length>0?xe/L.length:0;M.length>0&&re/M.length;const Tt=t.big_trades_buy||0,dt=t.big_trades_sell||0,Rt=(t.big_trades||[]).length;return e.jsxs("div",{style:{marginTop:8,background:q?"rgba(255,255,255,0.02)":be==="DISTRIBUTION"?"rgba(255,68,102,0.08)":be==="ACCUMULATION"?"rgba(0,255,136,0.08)":"rgba(255,255,255,0.02)",border:`1px solid ${q?"rgba(255,255,255,0.08)":be==="DISTRIBUTION"?"rgba(255,68,102,0.3)":be==="ACCUMULATION"?"rgba(0,255,136,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:8,padding:10},children:[e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",gap:6},onClick:()=>R(!y),children:["ORDER FLOW ANALYSIS",e.jsx("span",{style:{fontSize:10,color:y?"#00aaff":"#555",background:y?"rgba(0,170,255,0.2)":"rgba(255,255,255,0.1)",borderRadius:10,padding:"1px 6px",transition:"all 0.2s"},children:""}),q&&e.jsxs("span",{style:{color:"#ffaa00"},children:[" Collecting data (",k.length,"/5 candles)"]})]}),y&&e.jsxs("div",{style:{marginTop:12,background:"#0a0a12",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:16},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:12,marginBottom:12},children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:be==="DISTRIBUTION"?"#ff4466":be==="ACCUMULATION"?"#00ff88":"#00aaff",marginBottom:6},children:be==="DISTRIBUTION"?" DISTRIBUTION DETECTED":be==="ACCUMULATION"?" ACCUMULATION DETECTED":" BALANCED / NO CLEAR REGIME"}),e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:be==="DISTRIBUTION"?"Sellers building pressure while price holds - expect downside breakout":be==="ACCUMULATION"?"Buyers building pressure while price holds - expect upside breakout":"CVD and price moving together or no significant pressure detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#00aaff",borderRadius:"50%"}}),"CVD ANALYSIS (Cumulative Volume Delta)"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Session CVD:"}),e.jsxs("div",{style:{color:(t.cumulative_delta||0)>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[(t.cumulative_delta||0)>=0?"+":"",(t.cumulative_delta||0).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Recent CVD (10 bars):"}),e.jsxs("div",{style:{color:xe>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[xe>=0?"+":"",xe.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Prior CVD (10 bars):"}),e.jsxs("div",{style:{color:re>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:[re>=0?"+":"",re.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"CVD Trend ():"}),e.jsxs("div",{style:{color:T>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:13},children:[T>=0?"+":"",T.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Avg Delta/Bar:"}),e.jsxs("div",{style:{color:Ve>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[Ve>=0?"+":"",Ve.toFixed(0)]}),e.jsx("div",{style:{color:"#777"},children:"Regime Threshold:"}),e.jsxs("div",{style:{color:"#999",fontFamily:"monospace"},children:["",de]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#ffaa00",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#ffaa00",borderRadius:"50%"}}),"PRICE ANALYSIS"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Current Price:"}),e.jsxs("div",{style:{color:"#00aaff",fontFamily:"monospace",fontWeight:700,fontSize:13},children:["$",(t.current_price||0).toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"50m Start Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:b>0?`$${b.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"50m End Price:"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:z>0?`$${z.toFixed(2)}`:""}),e.jsx("div",{style:{color:"#777"},children:"Price Change (50m):"}),e.jsx("div",{style:{color:E>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600},children:b>0?`${E>=0?"+":""}${E.toFixed(2)} (${se>=0?"+":""}${se.toFixed(3)}%)`:""})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#a855f7",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#a855f7",borderRadius:"50%"}}),"VSA (Volume Spread Analysis) - Last 5m Bar"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Price Spread:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:["$",Mt.toFixed(2)]}),e.jsx("div",{style:{color:"#777"},children:"Bar Delta:"}),e.jsxs("div",{style:{color:St>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:[St>=0?"+":"",St.toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Buy Volume:"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:(Xe.buy||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Sell Volume:"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:(Xe.sell||0).toLocaleString()}),e.jsx("div",{style:{color:"#777"},children:"Signal:"}),e.jsx("div",{style:{color:ve.includes("BULL")?"#00ff88":ve.includes("BEAR")?"#ff4466":"#888",fontWeight:700},children:ve.replace("_"," ")})]}),e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:8,padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6,marginLeft:14},children:ve.includes("ABSORPTION")?" High delta + Low spread = Strong hands absorbing pressure":ve.includes("FOLLOW")?" High delta + High spread = Momentum follow-through":" No significant volume-price relationship detected"})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:11,color:"#f97316",fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{width:8,height:8,background:"#f97316",borderRadius:"50%"}}),"BIG TRADES (",t.big_trade_threshold||10," contracts) - Institutional Activity"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"160px 1fr",gap:"6px 20px",fontSize:11,paddingLeft:14},children:[e.jsx("div",{style:{color:"#777"},children:"Big Buy Volume:"}),e.jsxs("div",{style:{color:"#00ff88",fontFamily:"monospace",fontWeight:600},children:[Tt.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Big Sell Volume:"}),e.jsxs("div",{style:{color:"#ff4466",fontFamily:"monospace",fontWeight:600},children:[dt.toLocaleString()," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Net Big Delta:"}),e.jsxs("div",{style:{color:Tt-dt>=0?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:700,fontSize:14},children:[Tt-dt>=0?"+":"",(Tt-dt).toLocaleString()]}),e.jsx("div",{style:{color:"#777"},children:"Trade Count:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[Rt," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Imbalance:"}),e.jsx("div",{style:{color:Tt>dt?"#00ff88":dt>Tt?"#ff4466":"#888",fontWeight:600},children:Tt>dt?" BUYERS dominant":dt>Tt?" SELLERS dominant":" Balanced"})]}),e.jsxs("div",{style:{background:"rgba(249,115,22,0.1)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:6,padding:10,marginTop:12,marginLeft:14},children:[e.jsx("div",{style:{fontSize:10,color:"#f97316",fontWeight:600,marginBottom:6},children:"THRESHOLD CALCULATION (90th Percentile)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"110px 1fr",gap:"4px 12px",fontSize:10},children:[e.jsx("div",{style:{color:"#777"},children:"Sample Size:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((bt=t.threshold_stats)==null?void 0:bt.sample_count)||0).toLocaleString()," trades"]}),e.jsx("div",{style:{color:"#777"},children:"Average Trade:"}),e.jsxs("div",{style:{color:"#fff",fontFamily:"monospace"},children:[(((en=t.threshold_stats)==null?void 0:en.avg_size)||0).toFixed(1)," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"90th Percentile:"}),e.jsxs("div",{style:{color:"#f97316",fontFamily:"monospace",fontWeight:700},children:[((je=t.threshold_stats)==null?void 0:je.p90_size)||t.big_trade_threshold||10," contracts"]}),e.jsx("div",{style:{color:"#777"},children:"Trade Range:"}),e.jsxs("div",{style:{color:"#888",fontFamily:"monospace"},children:[((V=t.threshold_stats)==null?void 0:V.min_size)||1," - ",((ce=t.threshold_stats)==null?void 0:ce.max_size)||"?"]})]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:8,fontStyle:"italic"},children:"Trades above 90th percentile are flagged as institutional activity"})]})]}),e.jsxs("div",{style:{background:Oe?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.1)",borderRadius:8,padding:12},children:[e.jsx("div",{style:{fontSize:11,color:Oe?"#ffaa00":"#00ff88",fontWeight:600,marginBottom:6},children:Oe?" DIVERGENCE DETECTED":" CVD & PRICE ALIGNED"}),e.jsx("div",{style:{fontSize:10,color:"#999",lineHeight:1.4},children:Oe?`CVD trending ${T>0?"UP":"DOWN"} while price moving ${E>0?"UP":"DOWN"} - potential reversal signal`:"CVD direction matches price direction - trend continuation likely"})]}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:10,color:"#666",textAlign:"center"},children:["Order Flow Analysis  ",k.length," candles analyzed"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",justifyContent:"center"},children:[e.jsxs("div",{style:{flex:"0 0 auto",background:be==="DISTRIBUTION"?"rgba(255,68,102,0.15)":be==="ACCUMULATION"?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.05)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:`1px solid ${be==="DISTRIBUTION"?"#ff446650":be==="ACCUMULATION"?"#00ff8850":"#ffffff10"}`},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"REGIME"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:be==="DISTRIBUTION"?"#ff4466":be==="ACCUMULATION"?"#00ff88":"#888"},children:[be==="DISTRIBUTION"?"":be==="ACCUMULATION"?"":""," ",be]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"CVD TREND (50m)"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:T>=0?"#00ff88":"#ff4466"},children:[T>=0?"+":"",T.toLocaleString()]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"PRICE "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:E>=0?"#00ff88":"#ff4466"},children:[E>=0?"+":"",E.toFixed(2)]})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:Oe?"rgba(255,170,0,0.15)":"rgba(0,255,136,0.08)",borderRadius:6,padding:"8px 16px",textAlign:"center",border:Oe?"1px solid #ffaa0050":"1px solid #00ff8830"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"DIVERGENCE"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:Oe?"#ffaa00":"#00ff88"},children:Oe?" DETECTED":" ALIGNED"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:ve.includes("ABSORPTION")?"rgba(0,170,255,0.1)":ve.includes("FOLLOW")?"rgba(0,255,136,0.1)":"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"VSA SIGNAL"}),e.jsx("div",{style:{fontSize:11,fontWeight:700,color:ve.includes("BULL")?"#00ff88":ve.includes("BEAR")?"#ff4466":"#888"},children:ve==="BULL_ABSORPTION"?" ABSORPTION":ve==="BEAR_ABSORPTION"?" ABSORPTION":ve==="BULL_FOLLOW"?" FOLLOW":ve==="BEAR_FOLLOW"?" FOLLOW":" NEUTRAL"})]}),e.jsxs("div",{style:{flex:"0 0 auto",background:"rgba(255,255,255,0.03)",borderRadius:6,padding:"8px 16px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:4},children:"BIG TRADES "}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,fontFamily:"monospace",color:(t.big_trades_delta||0)>=0?"#00ff88":"#ff4466"},children:[(t.big_trades_delta||0)>=0?"+":"",(t.big_trades_delta||0).toLocaleString()]})]})]})]})})(),(t==null?void 0:t.contract)!=="BTC-SPOT"&&e.jsxs("div",{style:{marginTop:8,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:8,letterSpacing:1,fontWeight:600,textAlign:"center"},children:"GOLD INSTITUTIONAL SENTIMENT"}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"CENTRAL BANKS"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:2},children:"Net Buyers 15+ Years"}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:"Accumulating gold reserves"})]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#00aaff",fontWeight:700,marginBottom:6},children:"COT POSITIONING"}),(()=>{var se,de;const k=((se=te==null?void 0:te.gold)==null?void 0:se.cot)||{},q=k.sentiment||((de=te==null?void 0:te.gold)==null?void 0:de.cot_sentiment)||"neutral",L=q==="bullish"?"#00ff88":q==="bearish"?"#ff4466":"#888",M=k.managed_money_net||0,xe=k.managed_money_net_prev||0,re=k.managed_money_change||M-xe,T=k.swap_dealers_net||0,b=k.swap_dealers_net_prev||0,z=k.swap_dealers_change||T-b,E=k.report_date||"N/A";return e.jsxs(e.Fragment,{children:[e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Managed Money Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466",fontWeight:600},children:[(M/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(xe/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:re>0?"#00ff88":"#ff4466",fontWeight:600},children:[re>0?"+":"",(re/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:["Report: ",E]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Managed Money"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:M>0?"#00ff88":"#ff4466"},children:[M>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:re>0?"#00ff88":"#ff4466"},children:["(",re>0?"+":"",(re/1e3).toFixed(0),"K)"]})]})]})}),e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#00aaff",fontWeight:600,marginBottom:4},children:"Swap Dealers Position"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:T>0?"#00ff88":"#ff4466",fontWeight:600},children:[(T/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(b/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:z>0?"#00ff88":"#ff4466",fontWeight:600},children:[z>0?"+":"",(z/1e3).toFixed(0),"K"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Swap Dealers"}),e.jsxs("span",{style:{fontSize:9,fontWeight:600,color:T>0?"#00ff88":"#ff4466"},children:[T>0?"LONG":"SHORT"," ",e.jsxs("span",{style:{fontSize:8,color:z>0?"#00ff88":"#ff4466"},children:["(",z>0?"+":"",(z/1e3).toFixed(0),"K)"]})]})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Signal"}),e.jsx("span",{style:{fontSize:9,fontWeight:600,color:L,textTransform:"capitalize"},children:q})]})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#9370DB",fontWeight:700,marginBottom:6},children:"COMEX OPEN INTEREST"}),(()=>{var xe;const k=((xe=te==null?void 0:te.gold)==null?void 0:xe.open_interest)||{},q=k.total||0,L=k.total_prev||0,M=k.change_5d_pct||0;return e.jsxs(e.Fragment,{children:[e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"COMEX Gold Open Interest"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(q/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Day:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(L/1e3).toFixed(0),"K contracts"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day Change:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466"},children:[M>0?"+":"",M.toFixed(1),"%"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Total OI"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(q/1e3).toFixed(0),"K Contracts"]})]})}),e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#9370DB",fontWeight:600,marginBottom:4},children:"OI Change"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"24h:"}),e.jsxs("span",{style:{color:(k.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(k.change_pct||0)>0?"+":"",(k.change_pct||0).toFixed(1),"%"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"5-Day:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466"},children:[M>0?"+":"",M.toFixed(1),"%"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Rising OI + Rising Price = Bullish"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"24h Change"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:(k.change_pct||0)>0?"#00ff88":"#ff4466"},children:[(k.change_pct||0)>0?"+":"",(k.change_pct||0).toFixed(1),"%"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 180px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px"},children:[e.jsx("div",{style:{fontSize:9,color:"#FFD700",fontWeight:700,marginBottom:6},children:"GOLD ETF FLOWS"}),(()=>{var T;const k=((T=te==null?void 0:te.gold)==null?void 0:T.etf)||{},q=k.gld_holdings||0,L=k.gld_holdings_prev||0,M=q-L,xe=k.monthly_flow||0,re=k.weekly_flow||0;return e.jsxs(e.Fragment,{children:[e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"GLD ETF Holdings"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Current:"}),e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[(q/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Prior Week:"}),e.jsxs("span",{style:{color:"#aaa"},children:[(L/1e6).toFixed(2),"M oz"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"WoW Change:"}),e.jsxs("span",{style:{color:M>0?"#00ff88":"#ff4466"},children:[M>0?"+":"",(M/1e3).toFixed(0),"K oz"]})]})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3,cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"GLD Holdings"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:"#fff"},children:[(q/1e6).toFixed(1),"M oz"]})]})}),e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#FFD700",fontWeight:600,marginBottom:4},children:"ETF Flow Data"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Weekly:"}),e.jsxs("span",{style:{color:re>0?"#00ff88":"#ff4466"},children:[re>0?"+":"",re," tons"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:20},children:[e.jsx("span",{style:{color:"#888"},children:"Monthly:"}),e.jsxs("span",{style:{color:xe>0?"#00ff88":"#ff4466"},children:[xe>0?"+":"",xe," tons"]})]}),e.jsx("div",{style:{marginTop:4,fontSize:9,color:"#666"},children:"Positive = inflows (bullish)"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Negative = outflows (bearish)"})]}),children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",cursor:"help"},children:[e.jsx("span",{style:{fontSize:9,color:"#888"},children:"Weekly Flow"}),e.jsxs("span",{style:{fontSize:10,fontWeight:600,color:re>0?"#00ff88":"#ff4466"},children:[re>0?"+":"",re.toFixed(0)," tons"]})]})})]})})()]}),e.jsxs("div",{style:{flex:"1 1 150px",background:"rgba(255,255,255,0.02)",borderRadius:6,padding:"8px 10px",textAlign:"center"},children:[e.jsx(fi,{content:e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:600,marginBottom:6},children:"Signal Composition"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"COT Positioning:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"Central Banks:"}),e.jsx("span",{style:{color:"#aaa"},children:"30%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:2},children:[e.jsx("span",{style:{color:"#888"},children:"ETF Flows:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:16,marginBottom:4},children:[e.jsx("span",{style:{color:"#888"},children:"Options Gamma:"}),e.jsx("span",{style:{color:"#aaa"},children:"20%"})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:4,marginTop:4},children:[e.jsx("div",{style:{fontSize:9,color:"#666"},children:"CFTC Report: Tuesday data"}),e.jsx("div",{style:{fontSize:9,color:"#666"},children:"Released: Friday 3:30pm ET"})]})]}),children:e.jsx("div",{style:{cursor:"help"},children:e.jsx("div",{style:{fontSize:9,color:"#888",marginBottom:4},children:"OVERALL SIGNAL"})})}),(()=>{const k=(te==null?void 0:te.gold)||{},q=k.overall_sentiment||"neutral";k.confidence;const L=q==="bullish"?"#00ff88":q==="bearish"?"#ff4466":"#ffaa00";return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:L,textTransform:"uppercase",marginBottom:4},children:q}),e.jsx("div",{style:{fontSize:9,color:"#555"},children:"CFTC Fri 3:30pm"})]})})()]})]})]})]})]})]})},Rg=({selectedContract:t="ES"})=>{const[n,i]=A.useState("horizon"),[o,r]=A.useState(null),[s,l]=A.useState(!1),[a,d]=A.useState(null),[p,C]=A.useState(null),[x,u]=A.useState(null),[D,O]=A.useState({x:0,y:0}),[Q,De]=A.useState("current"),[f,y]=A.useState(null),[R,c]=A.useState(null),{isMobile:N}=Oo(),[S,B]=A.useState(!1),[F,pe]=A.useState("japan_ib"),[U,m]=A.useState(10),[h,w]=A.useState("long"),[Me,I]=A.useState(new Set),[Fe,He]=A.useState("all"),[te,_e]=A.useState("all"),[v,he]=A.useState(null),[le,Ne]=A.useState(!1),[ot,_t]=A.useState(!0),ft=(()=>{const $=new Date,Z=(Ie=>{const st=new Date(Date.UTC(Ie.getFullYear(),Ie.getMonth(),Ie.getDate())),at=st.getUTCDay()||7;st.setUTCDate(st.getUTCDate()+4-at);const ut=new Date(Date.UTC(st.getUTCFullYear(),0,1));return Math.ceil(((st-ut)/864e5+1)/7)})($),ge=$.getFullYear(),X=[];for(let Ie=5;Ie>=1;Ie--){let st=Z-Ie,at=ge;st<=0&&(st=52+st,at=ge-1),X.push({id:`w${Ie}`,label:`W${st}`,weekNum:st,year:at})}return X.push({id:"current",label:"Current",weekNum:Z,year:ge}),X})(),oe=(()=>{const $=[{id:"all",label:"All 12 Months"}],G=new Date;for(let Z=0;Z<12;Z++){const ge=new Date(G.getFullYear(),G.getMonth()-Z,1),X=`${ge.getFullYear()}-${String(ge.getMonth()+1).padStart(2,"0")}`,Ie=ge.toLocaleDateString("en-US",{month:"short",year:"2-digit"});$.push({id:X,label:Ie,year:ge.getFullYear(),month:ge.getMonth()+1})}return $})(),Le=[{id:"pre_asia",name:"Pre Asia",start:"18:00",end:"19:00",color:"#4B5563",horizon:!1},{id:"japan_ib",name:"Japan",start:"19:00",end:"20:00",color:"#9370DB",horizon:!0},{id:"china",name:"China",start:"20:00",end:"23:00",color:"#F472B6",horizon:!0},{id:"asia_close",name:"Asia Close",start:"23:00",end:"02:00",color:"#4B5563",horizon:!1},{id:"deadzone",name:"Dead Zone",start:"02:00",end:"03:00",color:"#6B7280",horizon:!0},{id:"london",name:"London",start:"03:00",end:"06:00",color:"#3B82F6",horizon:!0},{id:"low_volume",name:"Low Vol",start:"06:00",end:"08:20",color:"#4B5563",horizon:!1},{id:"us_ib",name:"US IB",start:"08:20",end:"09:30",color:"#F59E0B",horizon:!0},{id:"ny_1h",name:"NY 1H",start:"09:30",end:"10:30",color:"#10B981",horizon:!0},{id:"ny_2h",name:"NY 2H",start:"10:30",end:"11:30",color:"#06B6D4",horizon:!0},{id:"lunch",name:"Lunch",start:"11:30",end:"13:30",color:"#8B5CF6",horizon:!0},{id:"ny_pm",name:"NY PM",start:"13:30",end:"16:00",color:"#EF4444",horizon:!0},{id:"ny_close",name:"NY Close",start:"16:00",end:"17:00",color:"#4B5563",horizon:!1},{id:"market_closed",name:"Market Closed",start:"17:00",end:"18:00",color:"#1F2937",horizon:!1}],Be=(n==="horizon"?Le.filter($=>$.horizon):Le).filter($=>$.id!=="market_closed"),ne=(()=>{const $=new Date,G=$.getTime()+$.getTimezoneOffset()*6e4,Z=new Date(G-5*36e5),ge=Z.getHours(),X=Z.getMinutes(),Ie=ge*100+X;return Ie>=1900&&Ie<2e3?"japan_ib":Ie>=2e3&&Ie<2300?"china":Ie>=2300||Ie<200?"asia_close":Ie>=200&&Ie<300?"deadzone":Ie>=300&&Ie<600?"london":Ie>=600&&Ie<820?"low_volume":Ie>=820&&Ie<930?"us_ib":Ie>=930&&Ie<1030?"ny_1h":Ie>=1030&&Ie<1130?"ny_2h":Ie>=1130&&Ie<1330?"lunch":Ie>=1330&&Ie<1600?"ny_pm":Ie>=1600&&Ie<1700?"ny_close":Ie>=1700&&Ie<1800?"market_closed":Ie>=1800&&Ie<1900?"pre_asia":null})(),ke=["pre_asia","japan_ib","china","asia_close","deadzone","london","low_volume","us_ib","ny_1h","ny_2h","lunch","ny_pm","ny_close","market_closed"],Ae=$=>{if($===ne)return"NOW";const G=ke.indexOf(ne),Z=ke.indexOf($);return G===-1?"WAITING":Z<G?"ENDED":"WAITING"},Te=(()=>{const $=new Date,G={timeZone:"America/New_York"},ge=new Intl.DateTimeFormat("en-US",{...G,weekday:"long",hour:"numeric",minute:"numeric",hour12:!1}).formatToParts($),X=ge.find(ut=>ut.type==="weekday").value,Ie=parseInt(ge.find(ut=>ut.type==="hour").value),st=parseInt(ge.find(ut=>ut.type==="minute").value),at=Ie*100+st;return X==="Saturday"?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:X==="Sunday"&&at<1800?{closed:!0,isWeekend:!0,reopenDay:"Today",reopenTime:"18:00 ET"}:X==="Friday"&&at>=1700?{closed:!0,isWeekend:!0,reopenDay:"Sunday",reopenTime:"18:00 ET"}:at>=1700&&at<1800?{closed:!0,isWeekend:!1,reopenTime:"18:00 ET"}:{closed:!1,isWeekend:!1}})(),[Ze,Et]=A.useState(!0),[Y,Ke]=A.useState(null);A.useEffect(()=>{let $=!0;const G=async()=>{try{const ge=await fetch(Zt);if(ge.ok&&$){const X=await ge.json();C({sessionHigh:X.session_high||0,sessionLow:X.session_low||0,sessionOpen:X.session_open||0,currentPrice:X.current_price||0,sessionId:X.current_session_id,current_session_name:X.current_session_name||"",vwap:X.vwap||0,dayOpen:X.day_open||0,dayHigh:X.day_high||0,dayLow:X.day_low||0,totalVolume:X.total_volume||0,sessionVolume:X.session_volume||X.total_volume||0,sessionDelta:X.session_delta||X.cumulative_delta||0,cumulativeDelta:X.cumulative_delta||0,endedSessions:X.ended_sessions||{},ibs:X.ibs||{},currentIB:X.current_ib||null,ibHigh:X.ib_high||0,ibLow:X.ib_low||0,overnightHigh:X.overnight_high||X.globex_high||0,overnightLow:X.overnight_low||X.globex_low||0,tpo_poc:X.tpo_poc||0,tpo_vah:X.tpo_vah||0,tpo_val:X.tpo_val||0,us_ib_vwap:X.us_ib_vwap||0,ny_1h_vwap:X.ny_1h_vwap||0,day_vwap:X.day_vwap||0})}}catch(ge){console.error("Live data fetch error:",ge)}};G();const Z=setInterval(G,2e3);return()=>{$=!1,clearInterval(Z)}},[]),A.useEffect(()=>{let $=!0,G=null;const Z=async()=>{if($){Et(!0),Ke(null);try{const ge=await fetch(`${Zt}/session-history`);if(!ge.ok)throw new Error(`HTTP ${ge.status}: ${ge.statusText}`);const X=await ge.json();if(X.loading){G=setTimeout(()=>{$&&Z()},2e3);return}const Ie={japan_ib:"japan_ib",china:"china",london:"london",us_ib:"us_ib",ny_1h:"ny_1h"},st={};Le.forEach(at=>{const ut=X[at.id];if(ut)st[at.id]={todayRange:ut.todayRange||0,pDR:ut.pDR||0,avgRange:ut.avgRange||0,cW:ut.cW||0,pW:ut.pW||0,CM:ut.CM||0,PM:ut.PM||0,max:ut.max||0,min:ut.min||0};else{let zt=at.id.split("").reduce((un,Sn)=>un+Sn.charCodeAt(0),0);const an=()=>(zt=(zt*9301+49297)%233280,zt/233280),mt=at.horizon?5+an()*10:3+an()*5,qt=Array.from({length:40},()=>mt*(.8+an()*.4)),dn=un=>un.length>0?un.reduce((Sn,In)=>Sn+In,0)/un.length:0,rn=qt.slice(1,11);st[at.id]={todayRange:qt[0]||0,pDR:qt[1]||0,avgRange:dn(rn),cW:dn(qt.slice(0,5)),pW:dn(qt.slice(5,10))||0,CM:dn(qt.slice(0,20)),PM:dn(qt.slice(20,40))||0,max:rn.length>0?Math.max(...rn):0,min:rn.length>0?Math.min(...rn):0}}}),r(st)}catch(ge){console.error("Failed to fetch session history:",ge),Ke(ge.message)}finally{Et(!1)}}};return Z(),()=>{$=!1,G&&clearTimeout(G)}},[]);const rt=$=>`horizon_sessions_${t}_${$}`,et=$=>{try{const G=localStorage.getItem(rt($));if(G){const{data:Z,timestamp:ge}=JSON.parse(G),X=$==="current"?3e5:36e5;if(Date.now()-ge<X)return Z}}catch{}return null},me=($,G)=>{try{localStorage.setItem(rt($),JSON.stringify({data:G,timestamp:Date.now()}))}catch{}},g={ES:[5500,6500],GC:[2500,3100],BTC:[75e3,13e4]},j=($,G)=>{if(!$||!$.length)return!1;const Z=(G==null?void 0:G.substring(0,2))||"",ge=g[Z];if(!ge)return!0;for(const X of $)if(X.sessions)for(const Ie of Object.keys(X.sessions)){const st=X.sessions[Ie];if((st==null?void 0:st.h)>0)return st.h>=ge[0]&&st.h<=ge[1]?!0:(console.warn(`Data validation failed: price ${st.h} not in expected range ${ge[0]}-${ge[1]} for ${G}`),!1)}return!0},K=async()=>{try{["current","w1","w2","w3","w4","w5"].forEach(Z=>localStorage.removeItem(rt(Z))),d(null);const G=await fetch(`${Zt}/historical-sessions?week=${Q}&stock=${t}&nocache=${Date.now()}`);if(G.ok){const Z=await G.json();Z.days&&!Z.loading&&(j(Z.days,t)?(d(Z.days),me(Q,Z.days)):(console.error("Received data for wrong contract, not caching"),d(Z.days)))}}catch($){console.error("Failed to refresh:",$)}};return A.useEffect(()=>{const $=async()=>{const Z=et(Q);Z&&j(Z,t)?d(Z):Z&&localStorage.removeItem(rt(Q));try{const ge=await fetch(`${Zt}/historical-sessions?week=${Q}&stock=${t}`);if(ge.ok){const X=await ge.json();X.days&&!X.loading&&(j(X.days,t)?(d(X.days),me(Q,X.days)):(d(X.days),console.error(`Backend returned wrong data for ${t}. Backend needs to clear its cache.`)))}}catch(ge){console.error("Failed to fetch historical sessions:",ge)}};$();const G=setInterval($,Q==="current"?3e5:36e5);return()=>clearInterval(G)},[Q,t]),A.useEffect(()=>{(async()=>{const G=`horizon_strategy_${t}_12m`;try{const Z=localStorage.getItem(G);if(Z){const{data:ge,timestamp:X}=JSON.parse(Z);if(Date.now()-X<864e5&&j(ge,t)){he(ge);return}}}catch{}Ne(!0);try{const Z=await fetch(`${Zt}/historical-sessions?months=12&stock=${t}`);if(Z.ok){const ge=await Z.json();ge.days&&!ge.loading&&(j(ge.days,t)?(he(ge.days),localStorage.setItem(G,JSON.stringify({data:ge.days,timestamp:Date.now()}))):he(ge.days))}}catch(Z){console.error("Failed to fetch strategy data:",Z)}Ne(!1)})()},[t]),Ze?e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading session history from Databento..."]}):Y?e.jsxs("div",{style:{padding:40,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,color:"#ff4466"},children:""}),e.jsx("div",{style:{color:"#ff4466",marginBottom:8},children:"Failed to load session data"}),e.jsx("div",{style:{color:"#666",fontSize:12},children:Y})]}):o?e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",padding:N?12:0},children:[e.jsxs("div",{style:{display:"flex",flexDirection:N?"column":"row",justifyContent:"space-between",alignItems:N?"flex-start":"center",marginBottom:N?16:24,gap:N?12:16},children:[e.jsxs("div",{children:[e.jsx("h2",{style:{margin:0,color:"#fff",fontSize:N?16:20},children:N?"Session Analysis":" Session Analysis"}),e.jsx("p",{style:{margin:"8px 0 0 0",color:"#888",fontSize:N?11:13},children:"Historical Session Range Analysis  Range = High - Low"})]}),e.jsx("div",{style:{display:"flex",gap:N?8:12,alignItems:"center",flexWrap:"wrap"},children:e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>i("horizon"),style:{padding:N?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="horizon"?"#8B5CF6":"rgba(255,255,255,0.1)",color:n==="horizon"?"#fff":"#888",fontSize:N?10:11,fontWeight:600,cursor:"pointer"},children:"Horizon"}),e.jsx("button",{onClick:()=>i("universe"),style:{padding:N?"5px 10px":"6px 12px",borderRadius:6,border:"none",background:n==="universe"?"#3B82F6":"rgba(255,255,255,0.1)",color:n==="universe"?"#fff":"#888",fontSize:N?10:11,fontWeight:600,cursor:"pointer"},children:"Universe"})]})})]}),Te.closed&&e.jsxs("div",{style:{background:Te.isWeekend?"linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%)":"linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",border:Te.isWeekend?"1px solid rgba(139, 92, 246, 0.3)":"1px solid rgba(0, 255, 136, 0.3)",borderRadius:12,padding:"16px 24px",marginBottom:20,display:"flex",alignItems:"center",justifyContent:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:Te.isWeekend?"":""}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{color:Te.isWeekend?"#A78BFA":"#00ff88",fontSize:14,fontWeight:700,letterSpacing:1,textTransform:"uppercase"},children:Te.isWeekend?"Weekend":"Market Closed"}),e.jsx("div",{style:{color:"#888",fontSize:12,marginTop:4},children:Te.isWeekend?`Market Reopens ${Te.reopenDay} ${Te.reopenTime}`:`Reopens ${Te.reopenTime}`})]})]}),(()=>{var ni,zi,Qi,Di,Hi,Gn,kn,fo,po,ho,uo,go,xo;let $=0,G=1/0,Z=null,ge=null,X=null,Ie=null;const st=new Set(Be.map(ie=>ie.id));a&&a.length>0&&a.forEach(ie=>{Object.entries(ie.sessions||{}).forEach(([Je,_])=>{st.has(Je)&&_&&_.h>0&&(_.h>$&&($=_.h,Z=ie.date,ge=Je),_.l>0&&_.l<G&&(G=_.l,X=ie.date,Ie=Je))})});const at=(()=>{const ie=new Date;return`${ie.getFullYear()}-${String(ie.getMonth()+1).padStart(2,"0")}-${String(ie.getDate()).padStart(2,"0")}`})(),ut=Te.closed&&a&&a.length>0,zt=ut?a[0]:null,an=zt?Object.fromEntries(Object.entries(zt.sessions||{}).map(([ie,Je])=>[ie,{open:Je.o,high:Je.h,low:Je.l,close:Je.c,volume:Je.v||0,delta:Je.d||0}])):{},mt=ut?an:(p==null?void 0:p.endedSessions)||{},qt=ut?((ni=zt==null?void 0:zt.day)==null?void 0:ni.c)||0:(p==null?void 0:p.currentPrice)||0,dn=ut?((zi=zt==null?void 0:zt.day)==null?void 0:zi.o)||0:(p==null?void 0:p.dayOpen)||0,rn=ut?((Qi=zt==null?void 0:zt.day)==null?void 0:Qi.h)||0:(p==null?void 0:p.dayHigh)||0,un=ut?((Di=zt==null?void 0:zt.day)==null?void 0:Di.l)||0:(p==null?void 0:p.dayLow)||0,Sn=ut?((Hi=zt==null?void 0:zt.day)==null?void 0:Hi.v)||0:(p==null?void 0:p.totalVolume)||0,In=ut?((Gn=zt==null?void 0:zt.day)==null?void 0:Gn.d)||0:(p==null?void 0:p.cumulativeDelta)||0,Un=ut?(zt==null?void 0:zt.label)||"Friday":(()=>{const ie=new Date,Je=String(ie.getMonth()+1).padStart(2,"0"),_=String(ie.getDate()).padStart(2,"0");return`${Je}-${_} ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][ie.getDay()]}`})(),wn=Be.map(ie=>{const Je=Ae(ie.id),_=mt[ie.id]||{},W=Je==="NOW",ue=o[ie.id]||{},fe=W?(p==null?void 0:p.sessionOpen)||0:_.open||0,ye=W?(p==null?void 0:p.sessionHigh)||0:_.high||0,Ue=W?(p==null?void 0:p.sessionLow)||0:_.low||0,H=W?qt:_.close||0,ae=W?(p==null?void 0:p.sessionVolume)||0:_.volume||0,we=W?(p==null?void 0:p.sessionDelta)||0:_.delta||0,k=ye>0&&Ue>0?ye-Ue:0,q=ae>0?we/ae*100:0;return{...ie,status:Je,open:fe,high:ye,low:Ue,close:H,volume:ae,delta:we,deltaPct:q,range:k,hasData:ye>0||W,pdr:ue.pDR||0,avg10d:ue.avgRange||0,cW:ue.cW||0,pW:ue.pW||0,cM:ue.CM||0,pM:ue.PM||0,max:ue.max||0,min:ue.min||0,todayRange:ue.todayRange||0}});Q==="current"&&wn.forEach(ie=>{ie.high>0&&(ie.high>$&&($=ie.high,Z=at,ge=ie.id),ie.low>0&&ie.low<G&&(G=ie.low,X=at,Ie=ie.id))});const yn=ie=>{const Je=Object.values(o||{}).map(_=>_[ie]||0).filter(_=>_>0);return Je.length>0?Je.reduce((_,W)=>_+W,0)/Je.length:0},Ji=qt>0?qt:((kn=mt.ny_close)==null?void 0:kn.close)||((fo=mt.ny_pm)==null?void 0:fo.close)||rn,di={id:"1d",name:"1D",color:"#FFFFFF",open:dn,high:rn,low:un,close:Ji,volume:Sn,delta:In,deltaPct:Sn>0?In/Sn*100:0,range:rn>0&&un>0?rn-un:0,hasData:dn>0,pdr:yn("pDR"),avg10d:yn("avgRange"),cW:yn("cW"),pW:yn("pW"),cM:yn("CM"),pM:yn("PM"),max:yn("max"),min:yn("min")},Zn=[di.low,...wn.filter(ie=>ie.hasData).map(ie=>ie.low)].filter(ie=>ie>0),En=[di.high,...wn.filter(ie=>ie.hasData).map(ie=>ie.high)].filter(ie=>ie>0),qn=Zn.length>0?Math.min(...Zn):0,ei=En.length>0?Math.max(...En):0,Ti=ei-qn||1,mi=qn-Ti*.08,ci=ei+Ti*.08,bi=ci-mi,vi=180,Ri=[di,...wn],Ni=138,ti=(ie,Je,_=!1,W=null,ue=null,fe=null)=>{let ye=mi,Ue=ci,H=bi;const ae=_?vi:Ni;if(!_&&ie){const M=ie.day,xe=Object.values(ie.sessions||{}).filter(b=>b&&b.h>0),re=xe.map(b=>b.h),T=xe.map(b=>b.l);if((M==null?void 0:M.h)>0&&(re.push(M.h),T.push(M.l)),re.length>0){const b=Math.max(...re),z=Math.min(...T),E=b-z||1;ye=z-E*.08,Ue=b+E*.08,H=Ue-ye}}const we=_?Ri:(()=>{if(!ie)return[];const M=ie.day||{},xe={id:"1d",name:"1D",color:"#FFFFFF",open:M.o||0,high:M.h||0,low:M.l||0,close:M.c||0,hasData:M.h>0},re=Be.map(T=>{var z;const b=((z=ie.sessions)==null?void 0:z[T.id])||{};return{...T,open:b.o||0,high:b.h||0,low:b.l||0,close:b.c||0,hasData:b.h>0}});return[xe,...re]})(),k=we.slice(1).filter(M=>M.hasData&&M.high>0);let q=null,L=null;if(k.length>0){const M=Math.max(...k.map(b=>b.high)),xe=Math.min(...k.map(b=>b.low)),re=k.find(b=>b.high===M),T=k.find(b=>b.low===xe);re&&(q=re.id),T&&(L=T.id)}return e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"8px 12px",borderRadius:12,border:"1px solid rgba(255,255,255,0.1)",background:_?"rgba(0,255,136,0.02)":"rgba(255,255,255,0.02)",overflow:"hidden"},children:[e.jsx("div",{style:{width:70,minWidth:70,padding:"8px 12px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRight:"1px solid rgba(255,255,255,0.05)",background:_&&Te.closed?"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(99, 102, 241, 0.1) 100%)":_?"rgba(0, 255, 136, 0.05)":"transparent"},children:_&&Te.closed?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:16,marginBottom:4},children:""}),e.jsx("div",{style:{color:"#A78BFA",fontSize:11,fontWeight:700,letterSpacing:.5},children:Je}),e.jsx("div",{style:{color:"#666",fontSize:9,marginTop:2},children:"(Closed)"})]}):_?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#00ff88",fontSize:12,fontWeight:600,lineHeight:1.2},children:Je.split(" ")[0]}),e.jsxs("div",{style:{color:"#00ff88",fontSize:10,fontWeight:500,marginTop:2,display:"flex",alignItems:"center",gap:4},children:[Je.split(" ")[1]||"",e.jsx("div",{style:{width:5,height:5,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 6px rgba(0, 255, 136, 0.6)"}})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{color:"#A78BFA",fontSize:12,fontWeight:600,lineHeight:1.2},children:Je.split(" ")[0]}),e.jsx("div",{style:{color:"#8B7FC7",fontSize:10,fontWeight:500,marginTop:2},children:Je.split(" ")[1]||""})]})}),e.jsx("div",{style:{flex:1,display:"flex",height:ae,position:"relative"},children:we.map((M,xe)=>{const re=xe===0,T=`${Je}-${M.id||M.name}`,b=!re&&M.id===q,z=!re&&M.id===L,E=!re&&ue&&ue.dayDate===W&&ue.sessionId===M.id,se=!re&&fe&&fe.dayDate===W&&fe.sessionId===M.id,de=re?"rgba(255,255,255,0.02)":`${M.color}06`;return e.jsxs("div",{style:{flex:re?"0 0 8%":1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:b||E?14:0,paddingBottom:z||se?14:0,background:de,borderLeft:xe>0?"1px solid rgba(255,255,255,0.02)":"none"},onMouseEnter:Se=>{if(M.hasData&&M.high>0){u({...M,label:`${Je} - ${M.name||"1D"}`,isHOD:b,isLOD:z,isHOW:E,isLOW:se});const be=Se.currentTarget.getBoundingClientRect();O({x:be.left+be.width/2,y:be.top})}},onMouseLeave:()=>u(null),children:[b&&!E&&e.jsx("div",{style:{position:"absolute",top:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #10B981"}}),z&&!se&&e.jsx("div",{style:{position:"absolute",bottom:6,left:"50%",transform:"translateX(-50%)",width:24,height:0,borderTop:"1px dashed #EF4444"}}),E&&e.jsx("div",{style:{position:"absolute",top:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 4px #00ff88)"}}),se&&e.jsx("div",{style:{position:"absolute",bottom:4,left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 4px #ff4466)"}}),M.hasData&&M.high>0&&(()=>{const Se=M.close>=M.open,be=Se?"#00ff88":"#ff4466",Xe=Se?"#00ff88":"#ff4466",Mt=1.5,St=7,ve=2,Oe=1,Ve=ae-(M.high-ye)/H*ae,Tt=ae-(M.low-ye)/H*ae,dt=ae-(M.open-ye)/H*ae,Rt=ae-(M.close-ye)/H*ae;return e.jsxs("svg",{width:"100%",height:ae,viewBox:`0 0 40 ${ae}`,preserveAspectRatio:"xMidYMid meet",style:{overflow:"visible",cursor:"pointer"},children:[e.jsx("line",{x1:"20",y1:Math.max(2,Ve),x2:"20",y2:Math.min(ae-2,Tt),stroke:E?"#00ff88":se?"#ff4466":be,strokeWidth:Mt,strokeLinecap:"butt",style:{filter:`drop-shadow(0 0 2px ${be}60)`}}),e.jsx("rect",{x:20-Oe-St,y:Math.max(0,Math.min(ae-ve,dt-ve/2)),width:St,height:ve,fill:"#FFFFFF",style:{opacity:.9}}),e.jsx("rect",{x:20+Oe,y:Math.max(0,Math.min(ae-ve,Rt-ve/2)),width:St,height:ve,fill:Xe,style:{filter:`drop-shadow(0 0 2px ${Xe}60)`}})]})})()]},T)})})]})};return e.jsxs("div",{className:"hide-scrollbar",style:{background:"linear-gradient(180deg, rgba(12,12,16,0.98) 0%, rgba(8,8,12,1) 100%)",borderRadius:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 8px 32px rgba(0,0,0,0.6)",position:"relative",maxHeight:"90vh",overflowY:"auto",overflowX:"hidden"},children:[e.jsx("div",{style:{position:"sticky",top:0,zIndex:20,background:"linear-gradient(180deg, rgba(12,12,16,1) 0%, rgba(12,12,16,0.98) 100%)",padding:"12px 12px 8px 12px",borderBottom:"1px solid rgba(255,255,255,0.06)",borderTopLeftRadius:16,borderTopRightRadius:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"stretch",margin:"0 12px",borderRadius:12},children:[e.jsx("div",{style:{width:70,minWidth:70}}),e.jsx("div",{style:{flex:1,display:"flex",position:"relative"},children:Ri.map((ie,Je)=>{var ae,we;const _=Je===0,W=ie.status==="NOW",ue=ie.status==="WAITING",fe=_?"#FFFFFF":ie.color||"#FFFFFF",ye=R===(ie.id||Je),Ue=(ae=ie.name)!=null&&ae.includes(" ")?ie.name.split(" "):[ie.name],H=Ue.length>1;return e.jsx("div",{onMouseEnter:()=>c(ie.id||Je),onMouseLeave:()=>c(null),style:{flex:_?"0 0 8%":1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",position:"relative",cursor:"pointer",paddingBottom:8},children:e.jsxs("div",{style:{width:73,height:73,borderRadius:"50%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:3,padding:10,background:W&&!Te.closed?`linear-gradient(135deg, ${fe}30 0%, ${fe}15 100%)`:ye?`linear-gradient(135deg, ${fe}20 0%, ${fe}10 100%)`:"rgba(20, 20, 28, 0.9)",border:W&&!Te.closed?`2px solid ${fe}`:ye?`2px solid ${fe}60`:"1px solid rgba(255,255,255,0.1)",opacity:ue?.4:Te.closed&&!_?.6:1,transition:"all 0.2s ease",boxShadow:W&&!Te.closed?`0 0 12px ${fe}50`:ye?`0 0 10px ${fe}30`:"0 2px 8px rgba(0,0,0,0.3)",position:"relative"},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:_?"#888":Te.closed?"#555":fe,boxShadow:W&&!Te.closed||ye?`0 0 6px ${fe}`:"none",animation:W&&!Te.closed?"sessionDotPulse 1.5s ease-in-out infinite":"none"}}),H?e.jsxs("div",{style:{textAlign:"center",lineHeight:1.1},children:[e.jsx("div",{style:{fontSize:11,color:W&&!Te.closed||ye?fe:Te.closed&&!_?"#666":"#e5e5e5",fontWeight:600},children:Ue[0]}),e.jsx("div",{style:{fontSize:10,color:W&&!Te.closed||ye?fe:Te.closed&&!_?"#555":"#bbb",fontWeight:500},children:Ue.slice(1).join(" ")})]}):e.jsx("span",{style:{fontSize:((we=ie.name)==null?void 0:we.length)>6?10:12,color:_?ye?"#ccc":"#999":W&&!Te.closed||ye?fe:Te.closed?"#666":"#e5e5e5",fontWeight:600,textAlign:"center",lineHeight:1.1},children:ie.name}),W&&!Te.closed&&e.jsx("div",{style:{position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 6px",borderRadius:8,letterSpacing:"0.05em",boxShadow:"0 2px 6px rgba(0,255,136,0.4)"},children:"LIVE"}),ye&&!_&&e.jsxs("div",{style:{position:"absolute",top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:12,background:"linear-gradient(135deg, rgba(12, 12, 18, 0.98) 0%, rgba(18, 18, 28, 0.98) 100%)",border:`1px solid ${fe}30`,borderRadius:12,padding:"14px 18px",minWidth:200,zIndex:100,boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 0 1px rgba(255,255,255,0.05) inset",pointerEvents:"none"},children:[e.jsx("div",{style:{position:"absolute",top:-6,left:"50%",width:10,height:10,background:"rgba(12, 12, 18, 0.98)",border:`1px solid ${fe}30`,borderRight:"none",borderBottom:"none",transform:"translateX(-50%) rotate(45deg)"}}),e.jsxs("div",{style:{textAlign:"center",marginBottom:10,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:6},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:fe,boxShadow:`0 0 8px ${fe}`}}),e.jsx("span",{style:{color:fe,fontWeight:700,fontSize:14,letterSpacing:.5},children:ie.name}),W&&!Te.closed&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:7,fontWeight:700,padding:"2px 5px",borderRadius:4},children:"LIVE"})]}),ie.start&&ie.end&&e.jsxs("div",{style:{fontSize:10,color:"#666",fontFamily:"'JetBrains Mono', monospace",marginTop:4},children:[ie.start," - ",ie.end," ET"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px 16px",fontSize:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#8B5CF6"},children:"VOL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.volume?ie.volume>=1e3?(ie.volume/1e3).toFixed(1)+"K":ie.volume:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:ie.delta>=0?"#00ff88":"#ff4466"},children:"DELTA"}),e.jsx("span",{style:{color:ie.delta>=0?"#00ff88":"#ff4466",fontFamily:"monospace"},children:ie.delta?Math.abs(ie.delta)>=1e3?(ie.delta/1e3).toFixed(1)+"K":ie.delta:""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#6366F1"},children:"pDR"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.pdr>0?ie.pdr.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#06B6D4"},children:"10D"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.avg10d>0?ie.avg10d.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#84CC16"},children:"cW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.cW>0?ie.cW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#22C55E"},children:"pW"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.pW>0?ie.pW.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#F97316"},children:"cM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.cM>0?ie.cM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#FB923C"},children:"pM"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.pM>0?ie.pM.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#10B981"},children:"MAX"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.max>0?ie.max.toFixed(1):""})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#EF4444"},children:"MIN"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:ie.min>0?ie.min.toFixed(1):""})]})]}),e.jsx("div",{style:{marginTop:10,paddingTop:8,borderTop:"1px solid rgba(255,255,255,0.06)",fontSize:9,color:W&&!Te.closed?"#00ff88":ue?"#555":"#666",textTransform:"uppercase",letterSpacing:"0.5px",textAlign:"center"},children:W&&!Te.closed?" Active Session":ue?" Upcoming":" Ended"})]})]})},ie.id||Je)})})]})}),ti(null,Un,!0,at,{dayDate:Z,sessionId:ge},{dayDate:X,sessionId:Ie}),e.jsxs("div",{style:{padding:"8px 12px",borderTop:"1px solid rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:12,background:"rgba(15, 15, 20, 0.5)"},children:[e.jsx("div",{style:{display:"flex",gap:4},children:ft.map(ie=>e.jsx("button",{onClick:()=>De(ie.id),style:{padding:"6px 10px",background:Q===ie.id?"rgba(59, 130, 246, 0.2)":"rgba(255,255,255,0.03)",border:Q===ie.id?"1px solid rgba(59, 130, 246, 0.4)":"1px solid rgba(255,255,255,0.08)",borderRadius:4,color:Q===ie.id?"#60A5FA":"#666",fontSize:10,fontWeight:600,cursor:"pointer",transition:"all 0.15s ease",letterSpacing:"0.5px"},children:ie.label},ie.id))}),e.jsx("button",{onClick:K,title:`Clear cached data for ${((po=ft.find(ie=>ie.id===Q))==null?void 0:po.label)||Q} and refresh from server`,style:{padding:"6px 8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:4,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer",transition:"all 0.15s ease",display:"flex",alignItems:"center",gap:4},children:" Refresh"})]}),e.jsx("div",{children:a&&a.length>0?(()=>{const ie=new Date,Je=`${ie.getFullYear()}-${String(ie.getMonth()+1).padStart(2,"0")}-${String(ie.getDate()).padStart(2,"0")}`;return(Q==="current"?a.filter(W=>W.date!==Je):a).map((W,ue)=>{let fe=W.label||`Day ${ue+1}`;if(W.date){const H=W.date.split("-"),ae=new Date(W.date+"T12:00:00"),we=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=`${H[1]}-${H[2]}`,q=we[ae.getDay()];fe=`${k} ${q}`}const ye={dayDate:Z,sessionId:ge},Ue={dayDate:X,sessionId:Ie};return ti(W,fe,!1,W.date,ye,Ue)})})():e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading historical data..."})}),e.jsxs("div",{style:{padding:"10px 16px",margin:"0 12px",background:"rgba(0,0,0,0.3)",borderRadius:8,display:"flex",gap:16,justifyContent:"center",alignItems:"center",flexWrap:"wrap",fontSize:11,color:"#555"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#10B981",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#10B981"},children:"High of Day"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("svg",{width:"16",height:"4",style:{display:"block"},children:e.jsx("line",{x1:"0",y1:"2",x2:"16",y2:"2",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"3,2"})}),e.jsx("span",{style:{color:"#EF4444"},children:"Low of Day"})]}),e.jsx("span",{style:{borderLeft:"1px solid #333",height:16,margin:"0 4px"}}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderTop:"8px solid #00ff88",filter:"drop-shadow(0 0 3px #00ff88)"}}),e.jsx("span",{style:{color:"#00ff88"},children:"High of Week"})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"8px solid #ff4466",filter:"drop-shadow(0 0 3px #ff4466)"}}),e.jsx("span",{style:{color:"#ff4466"},children:"Low of Week"})]})]}),e.jsxs("div",{style:{margin:"12px",background:"rgba(20, 20, 30, 0.8)",borderRadius:12,border:"1px solid rgba(139, 92, 246, 0.3)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>B(!S),style:{padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",background:S?"rgba(139, 92, 246, 0.15)":"transparent",borderBottom:S?"1px solid rgba(139, 92, 246, 0.2)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{color:"#A78BFA",fontWeight:600,fontSize:13},children:"Session Trade Calculator"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:" Entry  Target Analysis"})]}),e.jsx("span",{style:{color:"#8B5CF6",fontSize:12,transform:S?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),S&&e.jsxs("div",{style:{padding:16},children:[e.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginBottom:16},children:[e.jsxs("div",{style:{flex:"1 1 180px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"ENTRY SESSION"}),e.jsx("select",{value:F,onChange:ie=>pe(ie.target.value),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,cursor:"pointer",outline:"none"},children:Be.map(ie=>e.jsx("option",{value:ie.id,style:{background:"#1a1a2e"},children:ie.name},ie.id))})]}),e.jsxs("div",{style:{flex:"1 1 120px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"TARGET POINTS"}),e.jsx("input",{type:"number",value:U,onChange:ie=>m(Math.max(0,parseFloat(ie.target.value)||0)),style:{width:"100%",padding:"10px 12px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:8,color:"#fff",fontSize:13,outline:"none",textAlign:"center"},min:"0",step:"0.5"})]}),e.jsxs("div",{style:{flex:"1 1 160px"},children:[e.jsx("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:6,letterSpacing:"0.5px"},children:"DIRECTION"}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{onClick:()=>w("long"),style:{flex:1,padding:"10px 16px",background:h==="long"?"rgba(0, 255, 136, 0.2)":"rgba(0,0,0,0.3)",border:h==="long"?"1px solid #00ff88":"1px solid rgba(255,255,255,0.1)",borderRadius:"8px 0 0 8px",color:h==="long"?"#00ff88":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" LONG"}),e.jsx("button",{onClick:()=>w("short"),style:{flex:1,padding:"10px 16px",background:h==="short"?"rgba(255, 68, 102, 0.2)":"rgba(0,0,0,0.3)",border:h==="short"?"1px solid #ff4466":"1px solid rgba(255,255,255,0.1)",borderRadius:"0 8px 8px 0",color:h==="short"?"#ff4466":"#666",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:" SHORT"})]})]})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("label",{style:{display:"block",fontSize:10,color:"#888",marginBottom:8,letterSpacing:"0.5px"},children:["FILTER SESSIONS ",e.jsx("span",{style:{color:"#666"},children:" Click to exclude from analysis"})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:[Be.map(ie=>{const Je=Me.has(ie.id),_=ie.id===F;return e.jsxs("button",{onClick:()=>{if(_)return;const W=new Set(Me);Je?W.delete(ie.id):W.add(ie.id),I(W)},style:{padding:"6px 12px",background:_?"rgba(139, 92, 246, 0.3)":Je?"rgba(255,255,255,0.02)":`${ie.color}22`,border:_?"1px solid #8B5CF6":Je?"1px solid rgba(255,255,255,0.1)":`1px solid ${ie.color}66`,borderRadius:6,color:_?"#A78BFA":Je?"#444":ie.color,fontSize:10,fontWeight:500,cursor:_?"not-allowed":"pointer",transition:"all 0.15s ease",textDecoration:Je?"line-through":"none",opacity:Je?.5:1},title:_?"Entry session (cannot exclude)":Je?"Click to include":"Click to exclude",children:[_&&" ",ie.name]},ie.id)}),Me.size>0&&e.jsx("button",{onClick:()=>I(new Set),style:{padding:"6px 12px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:6,color:"#EF4444",fontSize:10,fontWeight:500,cursor:"pointer"},children:"Reset All"})]})]}),a&&a.length>0&&(()=>{var ae,we,k,q;const ie=Be.findIndex(L=>L.id===F),Je=Be.slice(ie+1).filter(L=>!Me.has(L.id)),_=a.map(L=>{var de;const M=(de=L.sessions)==null?void 0:de[F];if(!M||!M.o||M.o<=0)return null;const xe=M.o,re=h==="long"?xe+U:xe-U;let T=0,b=h==="long"?1/0:0,z=-1;const E=Je.map((Se,be)=>{var ve;const Xe=(ve=L.sessions)==null?void 0:ve[Se.id];if(!Xe||!Xe.h||Xe.h<=0)return{session:Se,hit:!1,noData:!0,drawdownAtSession:0};const Mt=h==="long"?Xe.h>=re:Xe.l<=re;if(z===-1)if(h==="long"){b=Math.min(b,Xe.l);const Oe=xe-b;T=Math.max(T,Oe)}else{b=Math.max(b,Xe.h);const Oe=b-xe;T=Math.max(T,Oe)}Mt&&z===-1&&(z=be);const St=h==="long"?Xe.h:Xe.l;return{session:Se,hit:Mt,hitPrice:St,high:Xe.h,low:Xe.l,overshoot:Mt?h==="long"?Xe.h-re:re-Xe.l:0,drawdownAtSession:h==="long"?Math.max(0,xe-Xe.l):Math.max(0,Xe.h-xe)}}),se=E.find(Se=>Se.hit);return{date:L.date,label:L.label,entryPrice:xe,targetPrice:re,sessionResults:E,firstHit:se,hitAny:E.some(Se=>Se.hit),maxDrawdown:T>0?T:0}}).filter(Boolean),W=_.length>0?(_.filter(L=>L.hitAny).length/_.length*100).toFixed(0):0,ue={};_.forEach(L=>{L.firstHit&&(ue[L.firstHit.session.id]=(ue[L.firstHit.session.id]||0)+1)});const fe=Object.entries(ue).sort((L,M)=>M[1]-L[1])[0],ye=_.map(L=>L.maxDrawdown).filter(L=>L>0),Ue=ye.length>0?ye.reduce((L,M)=>L+M,0)/ye.length:0,H=ye.length>0?Math.max(...ye):0;return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:16,padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsxs("div",{style:{flex:1,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"SUCCESS RATE"}),e.jsxs("div",{style:{fontSize:24,fontWeight:700,color:W>=70?"#00ff88":W>=50?"#F59E0B":"#ff4466"},children:[W,"%"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"MOST LIKELY HIT"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#A78BFA"},children:fe&&((ae=Be.find(L=>L.id===fe[0]))==null?void 0:ae.name)||""}),fe&&e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[fe[1]," of ",_.length," days"]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"ENTRY SESSION"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((we=Be.find(L=>L.id===F))==null?void 0:we.color)||"#fff"},children:((k=Be.find(L=>L.id===F))==null?void 0:k.name)||F}),e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[" +",U," pts ",h==="long"?"":""]})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"AVG DRAWDOWN"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#F59E0B"},children:Ue>0?Ue.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"points"})]}),e.jsxs("div",{style:{flex:1,textAlign:"center",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:12},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"WORST DD"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#EF4444"},children:H>0?H.toFixed(1):"0"}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"max risk"})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"8px 12px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Target"}),Je.map(L=>e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:L.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",minWidth:60},children:L.name.split(" ")[0]},L.id)),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max DD"}),e.jsx("th",{style:{padding:"8px 12px",textAlign:"center",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Result"})]})}),e.jsx("tbody",{children:_.map((L,M)=>e.jsxs("tr",{style:{background:M%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"8px 12px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:L.label||L.date}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:L.entryPrice.toFixed(2)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"right",color:h==="long"?"#00ff88":"#ff4466",fontFamily:"monospace",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:L.targetPrice.toFixed(2)}),L.sessionResults.map(xe=>{var re;return e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",background:xe.hit&&((re=L.firstHit)==null?void 0:re.session.id)===xe.session.id?"rgba(0, 255, 136, 0.1)":"transparent",verticalAlign:"middle"},children:xe.noData?e.jsx("span",{style:{color:"#444"},children:""}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[xe.hit?e.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["",xe.overshoot>0&&e.jsxs("span",{style:{fontSize:9,marginLeft:2},children:["+",xe.overshoot.toFixed(1)]})]}):e.jsx("span",{style:{color:"#ff4466",opacity:.5},children:""}),xe.drawdownAtSession>0&&e.jsxs("span",{style:{fontSize:8,color:"#F59E0B",opacity:.8},children:["DD: ",xe.drawdownAtSession.toFixed(1)]})]})},xe.session.id)}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontFamily:"monospace"},children:e.jsx("span",{style:{color:L.maxDrawdown>U?"#EF4444":L.maxDrawdown>U*.5?"#F59E0B":"#888",fontWeight:L.maxDrawdown>U?700:400},children:L.maxDrawdown>0?L.maxDrawdown.toFixed(1):"0"})}),e.jsx("td",{style:{padding:"8px 12px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:L.hitAny?e.jsx("span",{style:{color:"#00ff88",fontWeight:600,fontSize:10},children:L.firstHit.session.name}):e.jsx("span",{style:{color:"#ff4466",fontSize:10},children:"NO HIT"})})]},L.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[" Analysis based on ",_.length," trading days  Entry at ",(q=Be.find(L=>L.id===F))==null?void 0:q.name," session open price  Target: ",h==="long"?"+":"-",U," points"]})]})})()]})]}),a&&a.length>0&&(()=>{const ie=Le.filter(T=>T.horizon);let Je=1/0,_=0;a.forEach(T=>{ie.forEach(b=>{var E;const z=(E=T.sessions)==null?void 0:E[b.id];(z==null?void 0:z.h)>0&&(_=Math.max(_,z.h)),(z==null?void 0:z.l)>0&&(z==null?void 0:z.l)<1/0&&(Je=Math.min(Je,z.l))})});const W={min:Je===1/0?0:Je,max:_},ue={ES:[5500,7e3],GC:[4500,6e3],NQ:[18e3,25e3],CL:[60,120],BTC:[8e4,15e4],BT:[8e4,15e4]},fe=(t==null?void 0:t.substring(0,2))||"",ye=ue[fe],Ue=ye&&(W.max<ye[0]||W.min>ye[1]),H=ie.map(T=>{const b=a.map(de=>{var be;const Se=(be=de.sessions)==null?void 0:be[T.id];return!Se||!Se.o||!Se.c||Se.o<=0?null:Se.c>=Se.o?"bullish":"bearish"}).filter(Boolean),z=b.filter(de=>de==="bullish").length,E=b.filter(de=>de==="bearish").length,se=b.length;return{session:T,trends:a.map(de=>{var be;const Se=(be=de.sessions)==null?void 0:be[T.id];return!Se||!Se.o||!Se.c||Se.o<=0?null:Se.c>=Se.o?"bullish":"bearish"}),bullishPct:se>0?Math.round(z/se*100):0,bullishCount:z,bearishCount:E,total:se}}),ae=ie.map(T=>{const b=a.map(de=>{var be;const Se=(be=de.sessions)==null?void 0:be[T.id];return!Se||!Se.h||!Se.l||Se.h<=0?null:Se.h-Se.l}).filter(de=>de!==null&&de>0),z=b.length>0?b.reduce((de,Se)=>de+Se,0)/b.length:0,E=b.length>0?Math.min(...b):0,se=b.length>0?Math.max(...b):0;return{session:T,avgRange:z,minRange:E,maxRange:se,rangeCount:b.length}}),we=a.map(T=>{let b=0,z=1/0;return ie.forEach(E=>{var de;const se=(de=T.sessions)==null?void 0:de[E.id];se&&se.h>0&&se.l>0&&(b=Math.max(b,se.h),z=Math.min(z,se.l))}),z<1/0?b-z:0}).filter(T=>T>0),k=we.length>0?we.reduce((T,b)=>T+b,0)/we.length:0,L=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],M=ie.slice(0,-1).map(T=>{const b=L.map(z=>{let E=0,se=0,de=0,Se=0;return a.forEach(be=>{var Tt;const Xe=(Tt=be.sessions)==null?void 0:Tt[T.id];if(!Xe||!Xe.o||Xe.o<=0)return;const Mt=Xe.o,St=Mt+z;let ve=!1,Oe=0;const Ve=ie.findIndex(dt=>dt.id===T.id);ie.slice(Ve+1).forEach(dt=>{var Lt;const Rt=(Lt=be.sessions)==null?void 0:Lt[dt.id];!Rt||!Rt.h||Rt.h<=0||ve||(Oe=Math.max(Oe,Mt-Rt.l),Rt.h>=St&&(ve=!0))}),ve&&E++,se+=Oe,de=Math.max(de,Oe),Se++}),{target:z,winRate:Se>0?Math.round(E/Se*100):0,avgDD:Se>0?se/Se:0,maxDD:de,validDays:Se,riskReward:Se>0&&se>0?(z/(se/Se)).toFixed(1):""}});return{session:T,results:b}}),xe=L[1];M.reduce((T,b)=>{var se;const z=b.results.find(de=>de.target===xe),E=(se=T==null?void 0:T.results)==null?void 0:se.find(de=>de.target===xe);return!E||z.winRate>E.winRate||z.winRate===E.winRate&&z.avgDD<E.avgDD?b:T},null),a.forEach(T=>{var E,se;const b=(E=T.sessions)==null?void 0:E.japan_ib,z=(se=T.sessions)==null?void 0:se.china;(b==null?void 0:b.h)>0&&(b==null?void 0:b.l)>0&&(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(z.h>b.h||z.l<b.l)}),a.forEach(T=>{var E,se;const b=(E=T.sessions)==null?void 0:E.china,z=(se=T.sessions)==null?void 0:se.london;(b==null?void 0:b.h)>0&&(b==null?void 0:b.l)>0&&(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(z.h>b.h||z.l<b.l)}),a.forEach(T=>{var E,se;const b=(E=T.sessions)==null?void 0:E.london,z=(se=T.sessions)==null?void 0:se.ny_1h;(b==null?void 0:b.o)>0&&(b==null?void 0:b.c)>0&&(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(b.c>b.o,z.c>z.o)}),a.forEach(T=>{var E,se;const b=(E=T.sessions)==null?void 0:E.us_ib,z=(se=T.sessions)==null?void 0:se.ny_pm;(b==null?void 0:b.o)>0&&(b==null?void 0:b.c)>0&&(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(b.c>b.o,z.c>z.o)});const re={};return ie.forEach(T=>re[T.id]={hod:0,lod:0}),a.forEach(T=>{let b=0,z=1/0,E=null,se=null;ie.forEach(de=>{var be;const Se=(be=T.sessions)==null?void 0:be[de.id];Se&&Se.h>0&&Se.l>0&&(Se.h>b&&(b=Se.h,E=de.id),Se.l<z&&(z=Se.l,se=de.id))}),E&&re[E].hod++,se&&re[se].lod++}),Ue?e.jsx("div",{style:{marginTop:20},children:e.jsxs("div",{style:{padding:"20px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:12,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:12},children:""}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#EF4444",marginBottom:8},children:"DATA MISMATCH - Wrong Contract Data"}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginBottom:12},children:["Received prices: ",e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",W.min.toFixed(0)," - $",W.max.toFixed(0)]}),e.jsx("br",{}),"Expected for ",fe,": ",e.jsxs("span",{style:{color:"#10B981",fontFamily:"monospace"},children:["$",ye==null?void 0:ye[0]," - $",ye==null?void 0:ye[1]]})]}),e.jsxs("div",{style:{fontSize:11,color:"#666",marginBottom:16},children:["The backend is returning cached data for a different contract.",e.jsx("br",{}),"This requires clearing the backend cache or redeploying."]}),e.jsx("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:e.jsx("button",{onClick:K,style:{padding:"8px 16px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",borderRadius:6,color:"#EF4444",fontSize:11,fontWeight:600,cursor:"pointer"},children:" Try Refresh Again"})})]})}):e.jsxs("div",{style:{marginTop:20},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",marginBottom:12,background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:8,fontSize:10},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#10B981"},children:" DATA OK"}),e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsx("span",{style:{color:"#888"},children:"Price Range:"}),e.jsxs("span",{style:{color:"#fff",fontFamily:"monospace"},children:["$",W.min.toFixed(2)," - $",W.max.toFixed(2)]}),ye&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{color:"#888"},children:"|"}),e.jsxs("span",{style:{color:"#666"},children:["Expected ",fe,":"]}),e.jsxs("span",{style:{color:"#666",fontFamily:"monospace"},children:["$",ye[0]," - $",ye[1]]})]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16,overflow:"hidden"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#A78BFA",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION TREND DIRECTION"]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),a.map((T,b)=>{var z;return e.jsx("th",{style:{padding:"6px 4px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:((z=T.label)==null?void 0:z.split(" ")[0])||`Day ${b+1}`},b)}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#00ff88",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Bullish"})]})}),e.jsx("tbody",{children:H.map((T,b)=>e.jsxs("tr",{style:{background:b%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:T.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:T.session.name}),T.trends.map((z,E)=>e.jsx("td",{style:{padding:"4px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:z==="bullish"?e.jsx("span",{style:{color:"#00ff88",fontSize:14},children:""}):z==="bearish"?e.jsx("span",{style:{color:"#ff4466",fontSize:14},children:""}):e.jsx("span",{style:{color:"#333"},children:""})},E)),e.jsxs("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",fontWeight:700,color:T.bullishPct>=70?"#00ff88":T.bullishPct>=50?"#F59E0B":"#ff4466"},children:[T.bullishPct,"%"]})]},T.session.id))})]})}),(()=>{const T=H.reduce((z,E)=>z.bullishPct>E.bullishPct?z:E),b=H.reduce((z,E)=>z.bullishPct<E.bullishPct?z:E);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(139, 92, 246, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:T.session.name})," most bullish (",T.bullishPct,"%) ",e.jsx("span",{style:{color:"#ff4466",fontWeight:600,marginLeft:4},children:b.session.name})," most bearish (",100-b.bullishPct,"%)"]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#EC4899",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"RANGE ANALYSIS",e.jsxs("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:["Avg Daily: ",e.jsxs("span",{style:{color:"#EC4899"},children:[k.toFixed(1)," pts"]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Session"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Avg"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Min"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Max"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"% Daily"})]})}),e.jsx("tbody",{children:ae.filter(T=>T.avgRange>0).sort((T,b)=>b.avgRange-T.avgRange).map((T,b)=>e.jsxs("tr",{style:{background:b%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 8px",color:T.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:T.session.name}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:T.avgRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#666",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:T.minRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:T.maxRange.toFixed(1)}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"right",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{background:`rgba(236, 72, 153, ${Math.min(.8,T.avgRange/k*.6)})`,padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,color:"#fff"},children:[k>0?Math.round(T.avgRange/k*100):0,"%"]})})]},T.session.id))})]})}),(()=>{const T=ae.reduce((b,z)=>b.avgRange>z.avgRange?b:z);return e.jsxs("div",{style:{marginTop:12,padding:"8px 10px",background:"rgba(236, 72, 153, 0.1)",borderRadius:6,fontSize:10,color:"#888"},children:[e.jsx("span",{style:{color:T.session.color,fontWeight:600},children:T.session.name})," has largest avg range (",T.avgRange.toFixed(1)," pts) ",e.jsxs("span",{style:{color:"#EC4899"},children:[" ",Math.round(T.avgRange/k*100),"%"]})," of daily range"]})})()]})]})]})})(),a&&a.length>0&&(()=>{const ie=["japan_ib","china","asia_close","deadzone","london","low_volume"];Le.filter(W=>W.horizon);const Je=a.map(W=>{if(!W.sessions)return null;let ue=0,fe=1/0,ye=0,Ue=0;ie.forEach(ve=>{const Oe=W.sessions[ve];if(Oe&&Oe.h>0&&Oe.l>0){ue=Math.max(ue,Oe.h),fe=Math.min(fe,Oe.l);const Ve=(Oe.h+Oe.l+Oe.c)/3,Tt=Oe.v||1;Ue+=Ve*Tt,ye+=Tt}});const H=W.sessions.us_ib,ae=(H==null?void 0:H.o)||0;if(ue===0||fe===1/0||ae===0)return null;const we=ue-fe,k=we>0?((ue-ae)/we*100).toFixed(1):0,q=ye>0?Ue/ye:(ue+fe)/2,L=(ae-q).toFixed(1),M=ae>=q;let xe="NEUTRAL";const re=parseFloat(k);re<=20?xe="VERY BULLISH":re<=40?xe="BULLISH":re>=80?xe="VERY BEARISH":re>=60&&(xe="BEARISH");const T=(H==null?void 0:H.h)||0,b=(H==null?void 0:H.l)||0,z=T-b,E=W.sessions.ny_1h,se=(E==null?void 0:E.o)||0,de=z>0&&se>0?((T-se)/z*100).toFixed(1):"";let Se="NEUTRAL";const be=parseFloat(de);isNaN(be)||(be<=20?Se="VERY BULLISH":be<=40?Se="BULLISH":be>=80?Se="VERY BEARISH":be>=60&&(Se="BEARISH"));const Xe=ve=>ve==="VERY BULLISH"?2:ve==="BULLISH"?1:ve==="BEARISH"?-1:ve==="VERY BEARISH"?-2:0,Mt=(Xe(xe)+Xe(Se))/2;let St="NEUTRAL";return Mt>=1.5?St="VERY BULLISH":Mt>=.5?St="BULLISH":Mt<=-1.5?St="VERY BEARISH":Mt<=-.5&&(St="BEARISH"),{date:W.date,label:W.label,overnightHigh:ue,overnightLow:fe,overnightRange:we,usIbOpen:ae,pctFromHigh:k,estimatedVwap:q,vwapDistance:Math.abs(parseFloat(L)),aboveVwap:M,biasA:xe,ibHigh:T,ibLow:b,ibRange:z,nyOpen:se,pctFromIbHigh:de,biasB:Se,combinedBias:St}}).filter(Boolean);if(Je.length===0)return null;const _=Je[0];return e.jsxs("div",{style:{margin:"12px",background:"rgba(0,0,0,0.4)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"12px 16px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.15) 0%, rgba(59, 130, 246, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:600,color:"#10B981"},children:"DAY BIAS"}),e.jsx("span",{style:{fontSize:10,color:"#666"},children:" Overnight & IB Range Analysis"})]}),_&&e.jsx("div",{style:{padding:"4px 12px",borderRadius:6,background:_.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":_.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",border:`1px solid ${_.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.3)":_.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.3)":"rgba(255,255,255,0.1)"}`,color:_.combinedBias.includes("BULLISH")?"#00ff88":_.combinedBias.includes("BEARISH")?"#ff4466":"#888",fontSize:11,fontWeight:700},children:_.combinedBias})]}),e.jsxs("div",{style:{padding:16},children:[_&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#3B82F6"},children:"A. OVERNIGHT  8:20 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:_.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":_.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:_.biasA.includes("BULLISH")?"#00ff88":_.biasA.includes("BEARISH")?"#ff4466":"#888"},children:_.biasA})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"O/N RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#3B82F6"},children:_.overnightRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",_.overnightHigh.toFixed(0)," L: ",_.overnightLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"8:20 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(_.pctFromHigh)<=50?"#00ff88":"#ff4466"},children:[_.pctFromHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from O/N high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"PRICE vs VWAP"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:_.aboveVwap?"#00ff88":"#ff4466",padding:"4px 8px",borderRadius:4,background:_.aboveVwap?"rgba(0, 255, 136, 0.15)":"rgba(255, 68, 102, 0.15)"},children:_.aboveVwap?"ABOVE":"BELOW"}),e.jsxs("div",{style:{fontSize:8,color:"#555",marginTop:2},children:[_.vwapDistance.toFixed(1)," pts"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.05)",borderRadius:10,padding:14,border:"1px solid rgba(245, 158, 11, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:"#F59E0B"},children:"B. US IB  9:30 OPEN"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:_.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":_.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.1)",color:_.biasB.includes("BULLISH")?"#00ff88":_.biasB.includes("BEARISH")?"#ff4466":"#888"},children:_.biasB})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#F59E0B"},children:_.ibRange.toFixed(1)}),e.jsxs("div",{style:{fontSize:8,color:"#555"},children:["H: ",_.ibHigh.toFixed(0)," L: ",_.ibLow.toFixed(0)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"9:30 OPEN"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:parseFloat(_.pctFromIbHigh)<=50?"#00ff88":"#ff4466"},children:[_.pctFromIbHigh,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"from IB high"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"NY OPEN"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#fff"},children:_.nyOpen>0?_.nyOpen.toFixed(2):""}),e.jsx("div",{style:{fontSize:8,color:"#555"},children:"9:30 ET"})]})]})]})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"rgba(0,0,0,0.4)"},children:[e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)"},children:"Date"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#3B82F6",fontWeight:600,borderBottom:"1px solid rgba(59,130,246,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(59,130,246,0.08)"},children:"A: Overnight  8:20"}),e.jsx("th",{colSpan:3,style:{padding:"6px 10px",textAlign:"center",color:"#F59E0B",fontWeight:600,borderBottom:"1px solid rgba(245,158,11,0.3)",borderRight:"1px solid rgba(255,255,255,0.1)",background:"rgba(245,158,11,0.08)"},children:"B: US IB  9:30"}),e.jsx("th",{rowSpan:2,style:{padding:"6px 10px",textAlign:"center",color:"#10B981",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Combined"})]}),e.jsxs("tr",{style:{background:"rgba(0,0,0,0.3)"},children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"VWAP"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"% High"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"9:30"}),e.jsx("th",{style:{padding:"6px 8px",textAlign:"center",color:"#666",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.1)",borderRight:"1px solid rgba(255,255,255,0.1)",fontSize:9},children:"Bias"})]})]}),e.jsx("tbody",{children:Je.map((W,ue)=>e.jsxs("tr",{style:{background:ue%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsx("td",{style:{padding:"6px 10px",color:"#fff",fontWeight:500,borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)",fontSize:10},children:W.label||W.date}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(W.pctFromHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(W.pctFromHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(W.pctFromHigh)<=30?"#00ff88":parseFloat(W.pctFromHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[W.pctFromHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{color:W.aboveVwap?"#00ff88":"#ff4466",fontSize:9,fontWeight:500},children:W.aboveVwap?"ABOVE":"BELOW"})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:W.biasA.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":W.biasA.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:W.biasA.includes("BULLISH")?"#00ff88":W.biasA.includes("BEARISH")?"#ff4466":"#666"},children:W.biasA.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsxs("span",{style:{padding:"2px 6px",borderRadius:4,background:parseFloat(W.pctFromIbHigh)<=30?"rgba(0, 255, 136, 0.2)":parseFloat(W.pctFromIbHigh)>=70?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:parseFloat(W.pctFromIbHigh)<=30?"#00ff88":parseFloat(W.pctFromIbHigh)>=70?"#ff4466":"#888",fontSize:9,fontWeight:600},children:[W.pctFromIbHigh,"%"]})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",color:"#888",fontFamily:"monospace",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:9},children:W.nyOpen>0?W.nyOpen.toFixed(0):""}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)",borderRight:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:8,fontWeight:600,background:W.biasB.includes("BULLISH")?"rgba(0, 255, 136, 0.15)":W.biasB.includes("BEARISH")?"rgba(255, 68, 102, 0.15)":"rgba(255,255,255,0.05)",color:W.biasB.includes("BULLISH")?"#00ff88":W.biasB.includes("BEARISH")?"#ff4466":"#666"},children:W.biasB.replace("VERY ","V.")})}),e.jsx("td",{style:{padding:"6px 8px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:W.combinedBias.includes("BULLISH")?"rgba(0, 255, 136, 0.2)":W.combinedBias.includes("BEARISH")?"rgba(255, 68, 102, 0.2)":"rgba(255,255,255,0.05)",color:W.combinedBias.includes("BULLISH")?"#00ff88":W.combinedBias.includes("BEARISH")?"#ff4466":"#888"},children:W.combinedBias.replace("VERY ","V.")})})]},W.date))})]})}),e.jsxs("div",{style:{marginTop:12,padding:"8px 12px",background:"rgba(16, 185, 129, 0.1)",borderRadius:6,fontSize:9,color:"#888"},children:[e.jsx("strong",{style:{color:"#10B981"},children:"Bias Logic:"})," 0-20% from high = Very Bullish  20-40% = Bullish  40-60% = Neutral  60-80% = Bearish  80-100% = Very Bearish"]})]})]})})(),ot&&e.jsxs("div",{style:{marginTop:24,background:"rgba(0,0,0,0.4)",borderRadius:16,border:"1px solid rgba(139, 92, 246, 0.2)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",background:"linear-gradient(135deg, rgba(139, 92, 246, 0.15) 0%, rgba(16, 185, 129, 0.1) 100%)",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:20},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#A78BFA"},children:"STRATEGY ANALYTICS"}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Optimal entry points & session patterns"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("span",{style:{fontSize:10,color:"#666"},children:"Using data from selected week above"})})]}),(()=>{var T;const ie=a;if(!ie||ie.length===0)return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"No historical data available. Select a week above first."]});const Je=Le.filter(b=>b.horizon),W=(t==null?void 0:t.includes("BTC"))?[250,500,750,1e3,1250]:[5,10,15,20,25],ue=Je.slice(0,-1).map(b=>{const z=W.map(E=>{let se=0,de=0,Se=0,be=0;return ie.forEach(Xe=>{var dt;const Mt=(dt=Xe.sessions)==null?void 0:dt[b.id];if(!Mt||!Mt.o||Mt.o<=0)return;const St=Mt.o,ve=St+E;let Oe=!1,Ve=0;const Tt=Je.findIndex(Rt=>Rt.id===b.id);Je.slice(Tt+1).forEach(Rt=>{var Jt;const Lt=(Jt=Xe.sessions)==null?void 0:Jt[Rt.id];!Lt||!Lt.h||Lt.h<=0||Oe||(Ve=Math.max(Ve,St-Lt.l),Lt.h>=ve&&(Oe=!0))}),Oe&&se++,de+=Ve,Se=Math.max(Se,Ve),be++}),{target:E,winRate:be>0?Math.round(se/be*100):0,avgDD:be>0?de/be:0,maxDD:Se,validDays:be,riskReward:be>0&&de>0?(E/(de/be)).toFixed(1):""}});return{session:b,results:z}}),fe=W[1],ye=ue.reduce((b,z)=>{var de;const E=z.results.find(Se=>Se.target===fe),se=(de=b==null?void 0:b.results)==null?void 0:de.find(Se=>Se.target===fe);return!se||E.winRate>se.winRate||E.winRate===se.winRate&&E.avgDD<se.avgDD?z:b},null),Ue=[];let H=0,ae=0;ie.forEach(b=>{var se,de;const z=(se=b.sessions)==null?void 0:se.japan_ib,E=(de=b.sessions)==null?void 0:de.china;(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(E==null?void 0:E.h)>0&&(E==null?void 0:E.l)>0&&(ae++,(E.h>z.h||E.l<z.l)&&H++)}),ae>0&&Ue.push({name:"China breaks Japan range",occurrences:H,total:ae,pct:Math.round(H/ae*100),color:"#F472B6"});let we=0,k=0;ie.forEach(b=>{var se,de;const z=(se=b.sessions)==null?void 0:se.china,E=(de=b.sessions)==null?void 0:de.london;(z==null?void 0:z.h)>0&&(z==null?void 0:z.l)>0&&(E==null?void 0:E.h)>0&&(E==null?void 0:E.l)>0&&(k++,(E.h>z.h||E.l<z.l)&&we++)}),k>0&&Ue.push({name:"London breaks China range",occurrences:we,total:k,pct:Math.round(we/k*100),color:"#3B82F6"});let q=0,L=0;ie.forEach(b=>{var se,de;const z=(se=b.sessions)==null?void 0:se.london,E=(de=b.sessions)==null?void 0:de.ny_1h;(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(E==null?void 0:E.o)>0&&(E==null?void 0:E.c)>0&&(L++,z.c>z.o==E.c>E.o&&q++)}),L>0&&Ue.push({name:"NY 1H continues London trend",occurrences:q,total:L,pct:Math.round(q/L*100),color:"#10B981"});let M=0,xe=0;ie.forEach(b=>{var se,de;const z=(se=b.sessions)==null?void 0:se.us_ib,E=(de=b.sessions)==null?void 0:de.ny_pm;(z==null?void 0:z.o)>0&&(z==null?void 0:z.c)>0&&(E==null?void 0:E.o)>0&&(E==null?void 0:E.c)>0&&(xe++,z.c>z.o==E.c>E.o&&M++)}),xe>0&&Ue.push({name:"US IB direction = NY PM direction",occurrences:M,total:xe,pct:Math.round(M/xe*100),color:"#F59E0B"});const re={};return Je.forEach(b=>re[b.id]={hod:0,lod:0}),ie.forEach(b=>{let z=0,E=1/0,se=null,de=null;Je.forEach(Se=>{var Xe;const be=(Xe=b.sessions)==null?void 0:Xe[Se.id];be&&be.h>0&&be.l>0&&(be.h>z&&(z=be.h,se=Se.id),be.l<E&&(E=be.l,de=Se.id))}),se&&re[se].hod++,de&&re[de].lod++}),e.jsxs("div",{style:{padding:20},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:16,padding:"10px 16px",background:"rgba(139, 92, 246, 0.1)",borderRadius:8,fontSize:11},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" ",ie.length," trading days"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#888"},children:[Fe==="all"?"All available data":`${((T=oe.find(b=>b.id===Fe))==null?void 0:T.label)||Fe}`,te!=="all"&&`  Week ${te}`]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:16},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(16, 185, 129, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#10B981",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"OPTIMAL ENTRY FINDER",e.jsx("span",{style:{marginLeft:"auto",fontSize:9,color:"#666",fontWeight:400},children:"Long entries  Target capture"})]}),e.jsx("div",{className:"hide-scrollbar",style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:11},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"6px 8px",textAlign:"left",color:"#888",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"Entry"}),W.map(b=>e.jsxs("th",{style:{padding:"6px 6px",textAlign:"center",color:b===fe?"#10B981":"#666",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:10},children:["+",b,"pt"]},b))]})}),e.jsx("tbody",{children:ue.map((b,z)=>e.jsxs("tr",{style:{background:(ye==null?void 0:ye.session.id)===b.session.id?"rgba(16, 185, 129, 0.1)":z%2===0?"transparent":"rgba(255,255,255,0.02)"},children:[e.jsxs("td",{style:{padding:"6px 8px",color:b.session.color,fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)",whiteSpace:"nowrap"},children:[b.session.name,(ye==null?void 0:ye.session.id)===b.session.id&&e.jsx("span",{style:{marginLeft:6,color:"#00ff88",fontSize:10},children:""})]}),b.results.map(E=>e.jsxs("td",{style:{padding:"4px 6px",textAlign:"center",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:E.winRate>=70?"#00ff88":E.winRate>=50?"#F59E0B":"#ff4466"},children:[E.winRate,"%"]}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:["DD: ",E.avgDD.toFixed(1)]})]},E.target))]},b.session.id))})]})}),ye&&(()=>{const b=W[1],z=ye.results.find(E=>E.target===b);return e.jsxs("div",{style:{marginTop:12,padding:"10px 12px",background:"rgba(16, 185, 129, 0.15)",borderRadius:6,borderLeft:"3px solid #10B981"},children:[e.jsx("div",{style:{fontSize:10,color:"#10B981",fontWeight:700,marginBottom:4},children:" RECOMMENDED ENTRY"}),e.jsxs("div",{style:{fontSize:11,color:"#fff"},children:[e.jsx("span",{style:{color:ye.session.color,fontWeight:600},children:ye.session.name})," offers best risk-adjusted entry for ",b,"pt long targets"]}),e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:4},children:[z.winRate,"% win rate  ",z.avgDD.toFixed(1)," pts avg drawdown  ",z.riskReward,":1 R:R"]})]})})()]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:12,border:"1px solid rgba(245, 158, 11, 0.2)",padding:16},children:[e.jsxs("div",{style:{fontSize:12,fontWeight:700,color:"#F59E0B",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"SESSION PATTERNS & BEHAVIOR"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:Ue.map((b,z)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 12px",background:"rgba(255,255,255,0.03)",borderRadius:8,borderLeft:`3px solid ${b.color}`},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:11,color:"#fff",fontWeight:500},children:b.name}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:2},children:[b.occurrences,"/",b.total," days"]})]}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:b.pct>=70?"#00ff88":b.pct>=50?"#F59E0B":"#888"},children:[b.pct,"%"]})]},z))}),e.jsxs("div",{style:{marginTop:16,paddingTop:12,borderTop:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:8,fontWeight:600},children:"WHO SETS HIGH/LOW OF DAY"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#10B981",marginBottom:6,fontWeight:600},children:"HIGH OF DAY"}),Object.entries(re).filter(([b,z])=>z.hod>0).sort((b,z)=>z[1].hod-b[1].hod).slice(0,3).map(([b,z])=>{const E=Je.find(se=>se.id===b);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(E==null?void 0:E.color)||"#888"},children:(E==null?void 0:E.name)||b}),e.jsxs("span",{style:{color:"#10B981",fontWeight:600},children:[Math.round(z.hod/ie.length*100),"%"]})]},b)})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",borderRadius:8,padding:10},children:[e.jsx("div",{style:{fontSize:9,color:"#EF4444",marginBottom:6,fontWeight:600},children:"LOW OF DAY"}),Object.entries(re).filter(([b,z])=>z.lod>0).sort((b,z)=>z[1].lod-b[1].lod).slice(0,3).map(([b,z])=>{const E=Je.find(se=>se.id===b);return e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10,marginBottom:3},children:[e.jsx("span",{style:{color:(E==null?void 0:E.color)||"#888"},children:(E==null?void 0:E.name)||b}),e.jsxs("span",{style:{color:"#EF4444",fontWeight:600},children:[Math.round(z.lod/ie.length*100),"%"]})]},b)})]})]})]})]})]})]})})()]}),x&&e.jsxs("div",{style:{position:"fixed",left:D.x,top:D.y-10,transform:"translate(-50%, -100%)",background:"rgba(0,0,0,0.95)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,padding:"10px 14px",zIndex:1e3,boxShadow:"0 4px 20px rgba(0,0,0,0.8)",minWidth:140,pointerEvents:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:11,fontWeight:700,color:x.close>=x.open?"#00ff88":"#ff4466",marginBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:6},children:[e.jsx("span",{children:x.label||x.name}),x.isHOD&&e.jsx("span",{style:{background:"#10B981",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"HIGH OF DAY"}),x.isLOD&&e.jsx("span",{style:{background:"#EF4444",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3},children:"LOW OF DAY"}),x.isHOW&&e.jsx("span",{style:{background:"#00ff88",color:"#000",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #00ff88"},children:"HIGH OF WEEK"}),x.isLOW&&e.jsx("span",{style:{background:"#ff4466",color:"#fff",fontSize:8,fontWeight:700,padding:"2px 5px",borderRadius:3,boxShadow:"0 0 8px #ff4466"},children:"LOW OF WEEK"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto auto",gap:"4px 12px",fontSize:10},children:[e.jsx("span",{style:{color:"#3B82F6"},children:"O"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((ho=x.open)==null?void 0:ho.toFixed(2))||""}),e.jsx("span",{style:{color:(x.isHOD,"#10B981")},children:"H"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:x.isHOD?"rgba(16, 185, 129, 0.2)":"transparent",padding:x.isHOD?"1px 4px":0,borderRadius:3},children:((uo=x.high)==null?void 0:uo.toFixed(2))||""}),e.jsx("span",{style:{color:(x.isLOD,"#EF4444")},children:"L"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",background:x.isLOD?"rgba(239, 68, 68, 0.2)":"transparent",padding:x.isLOD?"1px 4px":0,borderRadius:3},children:((go=x.low)==null?void 0:go.toFixed(2))||""}),e.jsx("span",{style:{color:"#F59E0B"},children:"C"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:((xo=x.close)==null?void 0:xo.toFixed(2))||""})]}),x.high>0&&x.low>0&&e.jsxs("div",{style:{marginTop:6,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.1)",fontSize:9,color:"#888"},children:["Range: ",e.jsx("span",{style:{color:"#EC4899"},children:(x.high-x.low).toFixed(2)})]})]})]})})()]}):e.jsx("div",{style:{padding:40,textAlign:"center",color:"#888"},children:"No data available"})},zg=({activeTab:t,setActiveTab:n,onLogout:i})=>{var x;const{isMobile:o,isTablet:r}=Oo(),[s,l]=A.useState(!1),[a,d]=A.useState(!1),p=[{id:"backtest",icon:"",label:"Backtest",fullLabel:"Backtest Analytics"},{id:"live",icon:"",label:"Live",fullLabel:"Live Metrics",iconColor:"#ef4444"},{id:"tpo",icon:"",label:"TPO",fullLabel:"Market Profile",iconColor:"#ffaa00"},{id:"zones",icon:"",label:"Zones",fullLabel:"Zone Participation",iconColor:"#00ff88"},{id:"treemap",icon:"",label:"Matrix",fullLabel:"Correlation Matrix"},{id:"vsi",icon:"",label:"Sessions",fullLabel:"Session Analysis"},{id:"trades",icon:"",label:"Trades",fullLabel:"Trade Log"},{id:"priceladder",icon:"",label:"Ladder",fullLabel:"Price Ladder"},{id:"redfolder",icon:"",label:"Red",fullLabel:"Red Folder",iconColor:"#ff4466",accent:"#ff4466"}],C=u=>{n(u),l(!1)};return o?e.jsxs(e.Fragment,{children:[e.jsxs("nav",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"rgba(0,0,0,0.4)",borderBottom:"1px solid rgba(255,255,255,0.08)",position:"sticky",top:0,zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsx("span",{style:{fontSize:12,fontWeight:700,color:"#00ff88",letterSpacing:"2px"},children:"HORIZON"})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(0,255,136,0.1)",borderRadius:6,border:"1px solid rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{color:"#00ff88",fontSize:11,fontWeight:600},children:((x=p.find(u=>u.id===t))==null?void 0:x.label)||"Menu"})}),e.jsxs("button",{onClick:()=>l(!s),style:{width:40,height:40,background:s?"rgba(0,255,136,0.15)":"transparent",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:5,transition:"all 0.2s"},children:[e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(45deg) translateY(7px)":"none"}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",opacity:s?0:1}}),e.jsx("span",{style:{width:18,height:2,background:s?"#00ff88":"#888",borderRadius:1,transition:"all 0.3s",transform:s?"rotate(-45deg) translateY(-7px)":"none"}})]})]}),s&&e.jsxs("div",{style:{position:"fixed",top:57,left:0,right:0,bottom:0,background:"rgba(10,10,15,0.98)",zIndex:999,padding:16,overflowY:"auto",animation:"slideIn 0.2s ease"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12},children:p.map(u=>{const D=t===u.id,O=u.accent||"#00ff88";return e.jsxs("button",{onClick:()=>C(u.id),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:8,padding:"20px 12px",background:D?`linear-gradient(180deg, ${O}20 0%, ${O}08 100%)`:"rgba(255,255,255,0.03)",border:D?`2px solid ${O}`:"1px solid rgba(255,255,255,0.08)",borderRadius:12,color:D?O:"#aaa",cursor:"pointer",transition:"all 0.2s"},children:[e.jsx("span",{style:{fontSize:24,color:D?O:u.iconColor||"#666",filter:D?`drop-shadow(0 0 8px ${O})`:"none"},children:u.icon}),e.jsx("span",{style:{fontSize:12,fontWeight:D?700:500},children:u.fullLabel})]},u.id)})}),e.jsxs("div",{style:{display:"flex",gap:12,marginTop:20},children:[e.jsxs("button",{onClick:()=>{n("settings"),l(!1)},style:{flex:1,padding:"16px",background:"rgba(0,255,136,0.1)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:12,color:"#00ff88",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Settings"]}),e.jsxs("button",{onClick:i,style:{flex:1,padding:"16px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.4)",borderRadius:12,color:"#ff4466",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[e.jsx("span",{children:""})," Logout"]})]})]})]}):r?e.jsxs("nav",{style:{display:"flex",alignItems:"center",padding:"12px 16px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)",gap:16},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,flexShrink:0},children:e.jsx("div",{style:{width:32,height:32,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:16,color:"#0a0a0a",fontWeight:800},children:"H"})})}),e.jsx("div",{style:{display:"flex",gap:4,overflowX:"auto",flex:1,WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none"},children:p.map(u=>{const D=t===u.id,O=u.accent||"#00ff88";return e.jsxs("button",{onClick:()=>n(u.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 12px",background:D?`${O}15`:"transparent",border:D?`1px solid ${O}`:"1px solid transparent",borderRadius:6,color:D?O:"#888",fontSize:11,fontWeight:D?600:500,cursor:"pointer",whiteSpace:"nowrap",flexShrink:0},children:[e.jsx("span",{style:{color:D?O:u.iconColor||"#666"},children:u.icon}),e.jsx("span",{children:u.label})]},u.id)})}),e.jsxs("div",{style:{position:"relative",flexShrink:0},children:[e.jsx("button",{onClick:()=>d(!a),style:{width:36,height:36,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:14,color:"#fff",boxShadow:a?"0 0 15px rgba(0,255,136,0.5)":"none"},children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>d(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:10,padding:6,minWidth:150,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",zIndex:999},children:[e.jsxs("button",{onClick:()=>{n("settings"),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ccc",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Settings"]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 6px"}}),e.jsxs("button",{onClick:()=>{i(),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:10,padding:"10px 14px",background:"transparent",border:"none",borderRadius:6,color:"#ff4466",fontSize:13,cursor:"pointer"},children:[e.jsx("span",{children:""})," Logout"]})]})]})]})]}):e.jsxs("nav",{style:J.nav,children:[e.jsxs("div",{style:J.navBrand,children:[e.jsx("div",{style:{width:36,height:36,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 15px rgba(0,255,136,0.3)"},children:e.jsx("span",{style:{fontSize:18,color:"#0a0a0a",fontWeight:800},children:"H"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[e.jsx("span",{style:{fontSize:14,fontWeight:800,color:"#fff",letterSpacing:"1.5px"},children:"PROJECT"}),e.jsx("span",{style:{fontSize:10,fontWeight:600,color:"#00ff88",letterSpacing:"3px"},children:"HORIZON"})]})]}),e.jsx("div",{style:{...J.navTabs,marginLeft:24},children:p.map(u=>{const D=t===u.id,O=u.accent||"#00ff88";return e.jsxs("button",{style:{display:"flex",alignItems:"center",gap:8,padding:"10px 18px",background:D?`linear-gradient(180deg, ${O}20 0%, ${O}05 100%)`:"transparent",border:D?`1px solid ${O}`:"1px solid transparent",borderRadius:8,color:D?O:"#8b8b8b",fontSize:13,fontWeight:D?600:500,cursor:"pointer",transition:"all 0.2s ease",position:"relative",overflow:"hidden"},onClick:()=>n(u.id),onMouseEnter:Q=>{D||(Q.target.style.background="rgba(255,255,255,0.05)",Q.target.style.color="#ccc")},onMouseLeave:Q=>{D||(Q.target.style.background="transparent",Q.target.style.color="#8b8b8b")},children:[e.jsx("span",{style:{fontSize:u.icon.length===1?14:15,color:D?O:u.iconColor||"#8b8b8b",filter:D&&u.iconColor?`drop-shadow(0 0 4px ${u.iconColor})`:"none"},children:u.icon}),e.jsx("span",{children:u.fullLabel}),D&&e.jsx("div",{style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-50%)",width:"60%",height:2,background:O,borderRadius:"2px 2px 0 0",boxShadow:`0 0 10px ${O}`}})]},u.id)})}),e.jsxs("div",{style:{position:"relative",marginLeft:16},children:[e.jsx("button",{onClick:()=>d(!a),style:{width:40,height:40,borderRadius:"50%",background:"transparent",border:"1px solid rgba(255,255,255,0.5)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",fontSize:18,color:"#fff",boxShadow:a?"0 0 15px rgba(0,255,136,0.5)":"none"},onMouseEnter:u=>{u.currentTarget.style.borderColor="#00ff88",u.currentTarget.style.boxShadow="0 0 15px rgba(0,255,136,0.5)"},onMouseLeave:u=>{a||(u.currentTarget.style.borderColor="rgba(255,255,255,0.5)",u.currentTarget.style.boxShadow="none")},children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:998},onClick:()=>d(!1)}),e.jsxs("div",{style:{position:"absolute",top:"calc(100% + 8px)",right:0,background:"rgba(20,20,25,0.98)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:8,minWidth:180,boxShadow:"0 10px 40px rgba(0,0,0,0.5)",zIndex:999,backdropFilter:"blur(20px)"},children:[e.jsxs("button",{onClick:()=>{n("settings"),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ccc",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,255,255,0.08)",u.currentTarget.style.color="#fff"},onMouseLeave:u=>{u.currentTarget.style.background="transparent",u.currentTarget.style.color="#ccc"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Settings"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.08)",margin:"4px 8px"}}),e.jsxs("button",{onClick:()=>{i(),d(!1)},style:{width:"100%",display:"flex",alignItems:"center",gap:12,padding:"12px 16px",background:"transparent",border:"none",borderRadius:8,color:"#ff4466",fontSize:14,cursor:"pointer",transition:"all 0.15s"},onMouseEnter:u=>{u.currentTarget.style.background="rgba(255,68,102,0.15)"},onMouseLeave:u=>{u.currentTarget.style.background="transparent"},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{children:"Logout"})]})]})]})]})]})},Bg=()=>{var Q,De,f,y,R,c,N,S,B,F,pe,U,m,h,w,Me,I,Fe,He,te,_e,v,he,le,Ne,ot,_t,Ge,ft,qe,oe,Le,Be,P,ne,ke,Ae,ze,Te,Ze,Et,Y,Ke,rt,et;const[t,n]=A.useState(""),[i,o]=A.useState(!1),[r,s]=A.useState(!1),[l,a]=A.useState({stream_active:!1,stream_title:"",transcript_buffer:[],current_segment:"",sentiment:{current:"neutral",score:0,confidence:0,history:[]},voice_tone:{confidence_level:0,hesitation_count:0,stress_indicators:0,speaking_rate:0},keywords:{},market_direction:{signal:"neutral",strength:0,components:{sentiment_weight:0,tone_weight:0,keyword_weight:0}},error:null}),d=A.useRef(null);A.useEffect(()=>{const me=async()=>{try{const K=await(await fetch(da)).json();a(K),o(K.stream_active),s(!0)}catch{s(!1)}};me();const g=setInterval(me,300);return()=>clearInterval(g)},[]),A.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[l.transcript_buffer]);const p=async()=>{if(t)try{await fetch(`${da}/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})})}catch(me){console.error("Failed to start stream:",me)}},C=async()=>{try{await fetch(`${da}/stop`,{method:"POST"})}catch(me){console.error("Failed to stop stream:",me)}},x=me=>{if(!me)return me;const g=Object.keys(l.keywords||{});let j=me;return g.forEach(K=>{const $=new RegExp(`\\b(${K})\\b`,"gi");j=j.replace($,'<span style="background: rgba(0,255,136,0.2); color: #00ff88; padding: 2px 4px; border-radius: 4px; font-weight: 600;">$1</span>')}),j},u=me=>me>.05?"#00ff88":me<-.05?"#ff4466":"#ffaa00",O=(me=>{switch(me){case"bullish":return{color:"#00ff88",icon:"",glow:"rgba(0,255,136,0.3)"};case"bearish":return{color:"#ff4466",icon:"",glow:"rgba(255,68,102,0.3)"};default:return{color:"#ffaa00",icon:"",glow:"rgba(255,170,0,0.3)"}}})((Q=l.market_direction)==null?void 0:Q.signal);return e.jsxs("div",{style:{maxWidth:1400,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24,flexWrap:"wrap",gap:16},children:[e.jsxs("h2",{style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:28},children:""}),e.jsx("span",{children:"Red Folder"}),e.jsx("span",{style:{fontSize:14,color:"#888",fontWeight:400},children:"Live Event Transcription & Analysis"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 16px",borderRadius:8,background:r?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${r?"#00ff88":"#ff4466"}`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:r?"#00ff88":"#ff4466",boxShadow:r?"0 0 10px #00ff88":"none",animation:r&&i?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{color:r?"#00ff88":"#ff4466",fontSize:12,fontWeight:600},children:i?"LIVE TRANSCRIBING":r?"SERVICE ONLINE":"SERVICE OFFLINE"})]})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20,marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[e.jsx("input",{type:"text",placeholder:"Enter YouTube Live URL (e.g., https://youtube.com/watch?v=...)",value:t,onChange:me=>n(me.target.value),style:{flex:1,minWidth:300,padding:"12px 16px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"#fff",fontSize:14,fontFamily:"'JetBrains Mono', monospace"}}),e.jsx("button",{onClick:p,disabled:i||!t,style:{padding:"12px 24px",borderRadius:8,background:i?"rgba(255,255,255,0.05)":"linear-gradient(135deg, #00ff88, #00cc6a)",border:"none",color:i?"#666":"#000",fontWeight:700,cursor:i?"not-allowed":"pointer",transition:"all 0.2s"},children:" START"}),e.jsx("button",{onClick:C,disabled:!i,style:{padding:"12px 24px",borderRadius:8,background:i?"linear-gradient(135deg, #ff4466, #cc3355)":"rgba(255,255,255,0.05)",border:"none",color:i?"#fff":"#666",fontWeight:700,cursor:i?"pointer":"not-allowed",transition:"all 0.2s"},children:" STOP"})]}),l.stream_title&&e.jsxs("div",{style:{marginTop:12,color:"#888",fontSize:13},children:[e.jsx("span",{style:{color:"#00aaff"},children:"Now transcribing:"})," ",l.stream_title]}),l.error&&e.jsxs("div",{style:{marginTop:12,color:"#ff4466",fontSize:13},children:["Error: ",l.error]}),l.scheduler&&e.jsxs("div",{style:{marginTop:16,padding:"12px 16px",borderRadius:8,background:l.scheduler.event_active?"rgba(255,170,0,0.1)":"rgba(0,170,255,0.05)",border:`1px solid ${l.scheduler.event_active?"#ffaa00":"rgba(0,170,255,0.2)"}`,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:l.scheduler.event_active?"":""}),e.jsx("span",{style:{color:"#888",fontSize:12,fontWeight:600},children:"AUTO-SCHEDULER"}),e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:l.scheduler.enabled?"rgba(0,255,136,0.2)":"rgba(255,68,102,0.2)",color:l.scheduler.enabled?"#00ff88":"#ff4466"},children:l.scheduler.enabled?"ENABLED":"DISABLED"})]}),l.scheduler.next_event&&e.jsxs("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{color:"#666",fontSize:11},children:"Next:"}),e.jsx("span",{style:{color:l.scheduler.event_active?"#ffaa00":"#00aaff",fontSize:12,fontWeight:600},children:l.scheduler.next_event}),e.jsx("span",{style:{color:"#888",fontSize:11},children:l.scheduler.next_time}),l.scheduler.event_active&&e.jsx("span",{style:{padding:"2px 8px",borderRadius:4,fontSize:10,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",animation:"pulse 2s infinite"},children:"EVENT ACTIVE"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:24},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:24,height:600,display:"flex",flexDirection:"column"},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Live Transcript",i&&e.jsx("span",{style:{fontSize:11,color:"#00ff88",marginLeft:"auto"},children:" RECORDING"})]}),e.jsx("div",{ref:d,style:{flex:1,overflowY:"auto",fontFamily:"'JetBrains Mono', monospace",fontSize:14,lineHeight:1.8},children:((De=l.transcript_buffer)==null?void 0:De.length)===0&&!l.current_segment?e.jsx("div",{style:{color:"#666",textAlign:"center",padding:40},children:i?"Waiting for speech...":"Start a stream to begin transcription"}):e.jsxs(e.Fragment,{children:[(f=l.transcript_buffer)==null?void 0:f.map((me,g)=>e.jsxs("div",{style:{padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.03)",opacity:me.is_final?1:.6},children:[e.jsx("span",{style:{color:"#666",marginRight:12,fontSize:12},children:me.timestamp}),e.jsx("span",{style:{color:"#e0e0e0"},dangerouslySetInnerHTML:{__html:x(me.text)}})]},g)),l.current_segment&&e.jsxs("div",{style:{padding:"8px 0",opacity:.6,color:"#888"},children:[e.jsx("span",{style:{marginRight:12,fontSize:12},children:"..."}),l.current_segment]})]})})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`1px solid ${((y=l.sentiment)==null?void 0:y.score)>.1?"rgba(0,255,136,0.3)":((R=l.sentiment)==null?void 0:R.score)<-.1?"rgba(255,68,102,0.3)":"rgba(255,255,255,0.08)"}`,borderRadius:16,padding:20,textAlign:"center",transition:"border-color 0.5s ease, box-shadow 0.5s ease",boxShadow:((c=l.sentiment)==null?void 0:c.score)>.1?"0 0 20px rgba(0,255,136,0.1)":((N=l.sentiment)==null?void 0:N.score)<-.1?"0 0 20px rgba(255,68,102,0.1)":"none"},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"SENTIMENT GAUGE"}),e.jsxs("svg",{width:"200",height:"110",viewBox:"0 0 200 110",style:{margin:"0 auto",display:"block"},children:[e.jsx("defs",{children:e.jsxs("filter",{id:"glow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 180 100",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"12"}),e.jsx("path",{d:"M 20 100 A 80 80 0 0 1 60 35",fill:"none",stroke:"#ff4466",strokeWidth:"12",opacity:((S=l.sentiment)==null?void 0:S.score)<-.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 60 35 A 80 80 0 0 1 140 35",fill:"none",stroke:"#ffaa00",strokeWidth:"12",opacity:Math.abs(((B=l.sentiment)==null?void 0:B.score)||0)<=.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("path",{d:"M 140 35 A 80 80 0 0 1 180 100",fill:"none",stroke:"#00ff88",strokeWidth:"12",opacity:((F=l.sentiment)==null?void 0:F.score)>.1?"0.8":"0.25",style:{transition:"opacity 0.5s"}}),e.jsx("g",{style:{transform:`rotate(${((((pe=l.sentiment)==null?void 0:pe.score)||0)+1)*90-180}deg)`,transformOrigin:"100px 100px",transition:"transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e.jsx("line",{x1:"100",y1:"100",x2:"165",y2:"100",stroke:u(((U=l.sentiment)==null?void 0:U.score)||0),strokeWidth:"3",strokeLinecap:"round",filter:"url(#glow)"})}),e.jsx("circle",{cx:"100",cy:"100",r:"10",fill:u(((m=l.sentiment)==null?void 0:m.score)||0),style:{transition:"fill 0.5s"}}),e.jsx("circle",{cx:"100",cy:"100",r:"5",fill:"#1a1a1a"}),e.jsx("text",{x:"20",y:"108",fill:"#ff4466",fontSize:"10",fontWeight:"600",children:"BEAR"}),e.jsx("text",{x:"160",y:"108",fill:"#00ff88",fontSize:"10",fontWeight:"600",children:"BULL"})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("span",{style:{fontSize:28,fontWeight:800,color:u(((h=l.sentiment)==null?void 0:h.score)||0),textShadow:((w=l.sentiment)==null?void 0:w.current)!=="neutral"?`0 0 20px ${u(((Me=l.sentiment)==null?void 0:Me.score)||0)}40`:"none",transition:"color 0.5s, text-shadow 0.5s"},children:(((I=l.sentiment)==null?void 0:I.current)||"neutral").toUpperCase()}),e.jsxs("div",{style:{fontSize:12,color:"#888",marginTop:6},children:["Score: ",e.jsxs("span",{style:{color:u(((Fe=l.sentiment)==null?void 0:Fe.score)||0),fontWeight:600},children:[((((He=l.sentiment)==null?void 0:He.score)||0)*100).toFixed(0),"%"]})," | Confidence: ",e.jsxs("span",{style:{color:"#fff",fontWeight:600},children:[((((te=l.sentiment)==null?void 0:te.confidence)||0)*100).toFixed(0),"%"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"VOICE ANALYSIS"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Confidence"}),e.jsx("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((_e=l.voice_tone)==null?void 0:_e.confidence_level)||0}%`,height:"100%",borderRadius:4,background:(((v=l.voice_tone)==null?void 0:v.confidence_level)||0)>70?"#00ff88":(((he=l.voice_tone)==null?void 0:he.confidence_level)||0)>40?"#ffaa00":"#ff4466",transition:"width 0.3s"}})}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",marginTop:4},children:[(((le=l.voice_tone)==null?void 0:le.confidence_level)||0).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Speaking Rate"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#00aaff"},children:(((Ne=l.voice_tone)==null?void 0:Ne.speaking_rate)||0).toFixed(0)}),e.jsx("div",{style:{fontSize:10,color:"#666"},children:"WPM"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Hesitations"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((ot=l.voice_tone)==null?void 0:ot.hesitation_count)||0)>5?"#ff4466":"#888"},children:((_t=l.voice_tone)==null?void 0:_t.hesitation_count)||0})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Stress Signs"}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:(((Ge=l.voice_tone)==null?void 0:Ge.stress_indicators)||0)>3?"#ff4466":"#888"},children:((ft=l.voice_tone)==null?void 0:ft.stress_indicators)||0})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:16,padding:20},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"KEYWORD TRACKING"}),e.jsxs("div",{style:{maxHeight:150,overflowY:"auto"},children:[Object.entries(l.keywords||{}).filter(([me,g])=>g.count>0).sort((me,g)=>g[1].count-me[1].count).slice(0,8).map(([me,g])=>{const j=Math.max(...Object.values(l.keywords||{}).map(Z=>Z.count||0),1),K=["growth","dovish","easing","employment","jobs"],$=["inflation","hawkish","tightening","recession","rates"],G=K.includes(me)?"#00ff88":$.includes(me)?"#ff4466":"#00aaff";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[e.jsx("span",{style:{minWidth:70,fontSize:11,color:G,fontWeight:600,textTransform:"capitalize"},children:me}),e.jsx("div",{style:{flex:1,height:6,background:"rgba(255,255,255,0.05)",borderRadius:3,overflow:"hidden"},children:e.jsx("div",{style:{width:`${g.count/j*100}%`,height:"100%",background:G,borderRadius:3,transition:"width 0.3s"}})}),e.jsx("span",{style:{fontSize:12,color:"#888",minWidth:24,textAlign:"right"},children:g.count})]},me)}),Object.values(l.keywords||{}).every(me=>me.count===0)&&e.jsx("div",{style:{color:"#666",fontSize:12,textAlign:"center",padding:20},children:"No keywords detected yet"})]})]}),(()=>{var $,G,Z,ge;const me=((($=l.sentiment)==null?void 0:$.score)||0)>.05?"bullish":(((G=l.sentiment)==null?void 0:G.score)||0)<-.05?"bearish":"neutral",g=((Z=l.market_direction)==null?void 0:Z.signal)||"neutral",j=me!=="neutral"&&g!=="neutral"&&me!==g,K=me!=="neutral"&&g==="neutral"||me==="neutral"&&g!=="neutral";if(j)return e.jsx("div",{style:{background:"linear-gradient(135deg, rgba(255,170,0,0.15) 0%, rgba(255,170,0,0.05) 100%)",border:"2px solid #ffaa00",borderRadius:12,padding:16,marginBottom:16,animation:"pulse 1.5s infinite"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#ffaa00",fontWeight:700,fontSize:14},children:"DIVERGENCE ALERT"}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment: ",e.jsx("span",{style:{color:me==="bullish"?"#00ff88":"#ff4466"},children:me.toUpperCase()})," vs ","Direction: ",e.jsx("span",{style:{color:g==="bullish"?"#00ff88":"#ff4466"},children:g.toUpperCase()})]}),e.jsx("div",{style:{color:"#ffaa00",fontSize:10,marginTop:4},children:"Voice tone or keywords offsetting text sentiment"})]})]})});if(K)return e.jsx("div",{style:{background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:12,marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{style:{color:"#888",fontSize:11},children:["Mixed signals: Sentiment ",me.toUpperCase()," | Direction ",g.toUpperCase()]})]})});if(me!=="neutral"&&me===g){const X=((ge=l.market_direction)==null?void 0:ge.strength)||0,Ie=me==="bullish"?"#00ff88":"#ff4466";return e.jsx("div",{style:{background:`linear-gradient(135deg, ${Ie}20 0%, ${Ie}08 100%)`,border:`2px solid ${Ie}`,borderRadius:12,padding:16,marginBottom:16,boxShadow:`0 0 20px ${Ie}30`},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:24},children:me==="bullish"?"":""}),e.jsxs("div",{children:[e.jsxs("div",{style:{color:Ie,fontWeight:700,fontSize:14},children:["STRONG ",me.toUpperCase()," SIGNAL"]}),e.jsxs("div",{style:{color:"#888",fontSize:11,marginTop:2},children:["Sentiment + Direction aligned | Strength: ",X.toFixed(0),"%"]})]})]})})}return null})(),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:`2px solid ${O.color}`,borderRadius:16,padding:24,textAlign:"center",boxShadow:`0 0 30px ${O.glow}`},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#888",fontSize:12,letterSpacing:1},children:"MARKET DIRECTION"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,margin:"20px 0",transition:"transform 0.5s ease"},children:[e.jsx("span",{style:{fontSize:56,color:O.color,textShadow:`0 0 30px ${O.color}`,transition:"color 0.5s, text-shadow 0.5s, transform 0.3s",animation:((qe=l.market_direction)==null?void 0:qe.signal)!=="neutral"?"pulse 2s infinite":"none"},children:O.icon}),e.jsx("span",{style:{fontSize:36,fontWeight:800,color:O.color,letterSpacing:4,transition:"color 0.5s ease",textShadow:`0 0 15px ${O.color}40`},children:(((oe=l.market_direction)==null?void 0:oe.signal)||"neutral").toUpperCase()})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:4},children:"Strength"}),e.jsx("div",{style:{height:10,background:"rgba(255,255,255,0.1)",borderRadius:5,overflow:"hidden"},children:e.jsx("div",{style:{width:`${((Le=l.market_direction)==null?void 0:Le.strength)||0}%`,height:"100%",borderRadius:5,background:`linear-gradient(90deg, ${O.color}80 0%, ${O.color} 100%)`,transition:"width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)",boxShadow:`0 0 10px ${O.color}`}})}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:O.color,marginTop:6,transition:"color 0.5s"},children:[(((Be=l.market_direction)==null?void 0:Be.strength)||0).toFixed(0),"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Sentiment"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((ne=(P=l.market_direction)==null?void 0:P.components)==null?void 0:ne.sentiment_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Voice"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((Ae=(ke=l.market_direction)==null?void 0:ke.components)==null?void 0:Ae.tone_weight)||0)*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#666"},children:"Keywords"}),e.jsxs("div",{style:{fontSize:12,color:"#fff"},children:[((((Te=(ze=l.market_direction)==null?void 0:ze.components)==null?void 0:Te.keyword_weight)||0)*100).toFixed(0),"%"]})]})]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Fed Speech Transcription Analysis"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(139,92,246,0.2)",color:"#A78BFA",fontSize:10,fontWeight:600},children:"DEEPGRAM LIVE TRANSCRIPTION"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Real-time sentiment analysis of Fed Chair, FOMC Press Conferences & Presidential speeches  OHLC during speech duration"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#A78BFA",fontSize:12,fontWeight:600},children:" PAST SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Last 6 Months)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(139,92,246,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SENTIMENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"SIGNAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"RESULT"})]})}),e.jsx("tbody",{children:[{date:"Tue, Jan 28",dateStr:"2026-01-28",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.12,direction:"bearish",o:2765.8,h:2772.4,l:2748.5,c:2752.2},{date:"Tue, Jan 28",dateStr:"2026-01-28",time:"14:00",event:"FOMC Rate Decision",speaker:"Fed",duration:25,sentiment:-.05,direction:"neutral",o:2768.5,h:2775.2,l:2762.8,c:2765.8},{date:"Wed, Jan 8",dateStr:"2026-01-08",time:"14:00",event:"FOMC Minutes Release Discussion",speaker:"Fed Officials",duration:45,sentiment:-.08,direction:"bearish",o:4495,h:4498.5,l:4486.2,c:4488.8},{date:"Wed, Dec 18",dateStr:"2025-12-18",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:52,sentiment:.15,direction:"bullish",o:4425,h:4452.3,l:4420.5,c:4448.6},{date:"Fri, Dec 6",dateStr:"2025-12-06",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:38,sentiment:-.12,direction:"bearish",o:4380,h:4385.4,l:4358.2,c:4362.5},{date:"Wed, Nov 26",dateStr:"2025-11-26",time:"14:30",event:"FOMC Minutes Discussion",speaker:"Fed Officials",duration:42,sentiment:.05,direction:"neutral",o:4320,h:4328.5,l:4315.8,c:4322.4},{date:"Thu, Nov 14",dateStr:"2025-11-14",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:55,sentiment:.22,direction:"bullish",o:4285.5,h:4318.2,l:4282,c:4312.8},{date:"Mon, Nov 4",dateStr:"2025-11-04",time:"15:00",event:"U.S. President Trump Speaks",speaker:"Trump",duration:28,sentiment:.18,direction:"bullish",o:4245,h:4272.5,l:4242.3,c:4268.9},{date:"Wed, Oct 22",dateStr:"2025-10-22",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:48,sentiment:-.15,direction:"bearish",o:4195,h:4202.8,l:4168.5,c:4175.2},{date:"Tue, Oct 8",dateStr:"2025-10-08",time:"09:30",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:35,sentiment:.08,direction:"bullish",o:4150,h:4168.4,l:4145.2,c:4162.5},{date:"Wed, Sep 17",dateStr:"2025-09-17",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:58,sentiment:.28,direction:"bullish",o:4085,h:4135.6,l:4080.5,c:4128.4},{date:"Fri, Sep 5",dateStr:"2025-09-05",time:"10:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:42,sentiment:-.05,direction:"neutral",o:4055,h:4068.2,l:4048.5,c:4058.8},{date:"Fri, Aug 22",dateStr:"2025-08-22",time:"10:00",event:"Jackson Hole - Powell Speaks",speaker:"Powell",duration:65,sentiment:.35,direction:"bullish",o:3985,h:4058.5,l:3978.2,c:4045.8},{date:"Thu, Aug 7",dateStr:"2025-08-07",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:50,sentiment:.12,direction:"bullish",o:3925,h:3958.4,l:3920.5,c:3952.2},{date:"Wed, Jul 30",dateStr:"2025-07-30",time:"14:30",event:"FOMC Press Conference",speaker:"Powell",duration:55,sentiment:-.18,direction:"bearish",o:3895,h:3902.5,l:3858.2,c:3865.4},{date:"Tue, Jul 15",dateStr:"2025-07-15",time:"11:00",event:"Fed Chair Powell Speaks",speaker:"Powell",duration:40,sentiment:.1,direction:"bullish",o:3845,h:3872.8,l:3840.5,c:3868.2}].map((g,j)=>{const K=g.h-g.l,$=g.c>g.o+3?"bullish":g.c<g.o-3?"bearish":"neutral",G=g.direction===$||g.direction==="neutral"&&Math.abs(g.c-g.o)<=3,Z=g.sentiment>.1?"#00ff88":g.sentiment<-.1?"#ff4466":"#ffaa00",ge=g.direction==="bullish"?"#00ff88":g.direction==="bearish"?"#ff4466":"#ffaa00",X=g.speaker==="Powell"?"#A78BFA":g.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:j%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:g.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:g.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:g.event}),e.jsx("div",{style:{color:X,fontSize:10,marginTop:2},children:g.speaker})]}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:[g.duration,"m"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"3px 8px",borderRadius:4,background:`${Z}15`,border:`1px solid ${Z}30`},children:e.jsxs("span",{style:{color:Z,fontWeight:600,fontSize:11},children:[(g.sentiment*100).toFixed(0),"%"]})})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("span",{style:{color:ge,fontWeight:600,fontSize:11,display:"inline-flex",alignItems:"center",gap:3},children:[e.jsx("span",{children:g.direction==="bullish"?"":g.direction==="bearish"?"":""}),g.direction.toUpperCase()]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsxs("div",{style:{fontSize:9,fontFamily:"'JetBrains Mono', monospace",lineHeight:1.4},children:[e.jsx("span",{style:{color:"#888"},children:"O:"}),e.jsx("span",{style:{color:"#fff"},children:g.o.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"H:"}),e.jsx("span",{style:{color:"#00ff88"},children:g.h.toFixed(0)}),e.jsx("br",{}),e.jsx("span",{style:{color:"#888"},children:"L:"}),e.jsx("span",{style:{color:"#ff4466"},children:g.l.toFixed(0)}),e.jsx("span",{style:{color:"#888",marginLeft:4},children:"C:"}),e.jsx("span",{style:{color:g.c>=g.o?"#00ff88":"#ff4466"},children:g.c.toFixed(0)})]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right"},children:e.jsxs("span",{style:{color:"#FFD700",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:12},children:["$",K.toFixed(2)]})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,borderRadius:"50%",background:G?"rgba(0,255,136,0.15)":"rgba(255,68,102,0.15)",color:G?"#00ff88":"#ff4466",fontSize:12,fontWeight:700},children:G?"":""})})]},j)})})]})})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING SPEECHES"}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"(Scheduled for Transcription)"})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EST. DURATION"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"STATUS"})]})}),e.jsx("tbody",{children:(()=>{const me=[{date:"Fri, Feb 7",dateStr:"2026-02-07",time:"10:00",durationMin:40,event:"Fed Chair Powell Speaks",speaker:"Powell",estDuration:"~40m"},{date:"Wed, Feb 12",dateStr:"2026-02-12",time:"15:00",durationMin:30,event:"U.S. President Trump Speaks",speaker:"Trump",estDuration:"~30m"},{date:"Wed, Mar 19",dateStr:"2026-03-19",time:"14:30",durationMin:55,event:"FOMC Press Conference",speaker:"Powell",estDuration:"~55m"}],g=new Date,j=new Date(g.toLocaleString("en-US",{timeZone:"America/New_York"})),K=me.map($=>{const[G,Z]=$.time.split(":").map(Number),ge=new Date($.dateStr+"T"+$.time+":00"),X=new Date(ge.toLocaleString("en-US",{timeZone:"America/New_York"})),Ie=new Date(X.getTime()+$.durationMin*60*1e3);let st="SCHEDULED",at="#A78BFA",ut="rgba(139,92,246,0.2)";return j>=X&&j<=Ie?(st=" LIVE",at="#ff4466",ut="rgba(255,68,102,0.3)"):j>Ie&&(st="ENDED",at="#666",ut="rgba(100,100,100,0.2)"),{...$,status:st,statusColor:at,statusBg:ut,eventEnd:Ie}}).filter($=>$.status!=="ENDED");return K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming speeches scheduled"})}):K.map(($,G)=>{const Z=$.speaker==="Powell"?"#A78BFA":$.speaker==="Trump"?"#FF6B6B":"#00aaff";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:$.status===" LIVE"?"rgba(255,68,102,0.05)":G%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:$.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:$.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:$.event}),e.jsx("div",{style:{color:Z,fontSize:10,marginTop:2},children:$.speaker})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:$.estDuration}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:600,background:$.statusBg,color:$.statusColor,animation:$.status===" LIVE"?"pulse 1.5s infinite":"none"},children:$.status})})]},G)})})()})]})})]}),(()=>{const me=[{sentiment:-.08,direction:"bearish",o:4495,c:4488.8},{sentiment:.15,direction:"bullish",o:4425,c:4448.6},{sentiment:-.12,direction:"bearish",o:4380,c:4362.5},{sentiment:.05,direction:"neutral",o:4320,c:4322.4},{sentiment:.22,direction:"bullish",o:4285.5,c:4312.8},{sentiment:.18,direction:"bullish",o:4245,c:4268.9},{sentiment:-.15,direction:"bearish",o:4195,c:4175.2},{sentiment:.08,direction:"bullish",o:4150,c:4162.5},{sentiment:.28,direction:"bullish",o:4085,c:4128.4},{sentiment:-.05,direction:"neutral",o:4055,c:4058.8},{sentiment:.35,direction:"bullish",o:3985,c:4045.8},{sentiment:.12,direction:"bullish",o:3925,c:3952.2},{sentiment:-.18,direction:"bearish",o:3895,c:3865.4},{sentiment:.1,direction:"bullish",o:3845,c:3868.2}];let g=0,j=0;me.forEach(Z=>{const ge=Z.c-Z.o,X=ge>3?"bullish":ge<-3?"bearish":"neutral";(Z.direction===X||Z.direction==="neutral"&&Math.abs(ge)<=3)&&(g++,j+=Math.abs(ge))});const K=Math.round(g/me.length*100),$=(me.reduce((Z,ge)=>Z+Math.abs(ge.c-ge.o),0)/me.length).toFixed(2),G=Math.round(j*100);return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.1) 0%, rgba(0,170,255,0.05) 100%)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:12,padding:20,marginTop:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:16},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{style:{color:"#fff",fontSize:14,fontWeight:600},children:"Deepgram Speech Analysis ROI (6 Months)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:[e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"SPEECHES"}),e.jsx("div",{style:{color:"#fff",fontSize:24,fontWeight:700},children:me.length})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"CORRECT"}),e.jsx("div",{style:{color:"#00ff88",fontSize:24,fontWeight:700},children:g})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"ACCURACY"}),e.jsxs("div",{style:{color:K>=70?"#00ff88":"#ffaa00",fontSize:24,fontWeight:700},children:[K,"%"]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"AVG MOVE"}),e.jsxs("div",{style:{color:"#00aaff",fontSize:24,fontWeight:700},children:["$",$]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"12px 8px",background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{color:"#888",fontSize:10,marginBottom:6},children:"$ VALUE"}),e.jsxs("div",{style:{color:"#FFD700",fontSize:24,fontWeight:700},children:["$",G.toLocaleString()]})]})]}),e.jsx("div",{style:{marginTop:16,padding:"12px 16px",background:"rgba(139,92,246,0.1)",borderRadius:8,border:"1px solid rgba(139,92,246,0.2)"},children:e.jsxs("p",{style:{color:"#aaa",fontSize:11,margin:0,lineHeight:1.5},children:[e.jsxs("span",{style:{color:"#A78BFA",fontWeight:600},children:[" VERDICT: ",K>=70?"KEEP DEEPGRAM":"MONITOR"]})," - At ",K,"% accuracy on Fed speeches, capturing $",G.toLocaleString()," in value over 6 months.",e.jsx("span",{style:{color:"#888"},children:" Note: Fed Chair position may change - monitor for new appointments."})]})})]})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:16,padding:24,marginTop:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[e.jsxs("h3",{style:{margin:0,color:"#fff",fontSize:18,display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:22},children:""}),"Red Folder News Events"]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsx("span",{style:{padding:"4px 10px",borderRadius:6,background:"rgba(255,68,102,0.2)",color:"#ff4466",fontSize:10,fontWeight:600},children:"HIGH IMPACT DATA RELEASES"})})]}),e.jsx("p",{style:{color:"#666",fontSize:12,margin:"0 0 20px 0"},children:"Instant economic data releases  30-minute candle OHLC at release time  No transcription (instant release)"}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ff4466",fontSize:12,fontWeight:600},children:" PAST RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,68,102,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"ACTUAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"30m OHLC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"$ RANGE"})]})}),e.jsxs("tbody",{children:[(((Ze=l.economic_calendar)==null?void 0:Ze.past)||[]).map((me,g)=>{const j=me.impact==="high"||me.impact==="critical"?"#ff4466":me.impact==="medium"?"#ffaa00":"#888";return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:g%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#aaa",fontSize:11,whiteSpace:"nowrap"},children:me.date}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:me.time}),e.jsxs("td",{style:{padding:"10px 8px"},children:[e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:me.event}),e.jsx("span",{style:{padding:"2px 6px",borderRadius:3,fontSize:8,fontWeight:600,background:`${j}20`,color:j,marginTop:4,display:"inline-block"},children:me.impact.toUpperCase()})]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:me.actual||me.forecast})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:me.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#666",fontSize:10},children:"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#666",fontSize:10},children:"--"})]},g)}),(!((Et=l.economic_calendar)!=null&&Et.past)||l.economic_calendar.past.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",style:{padding:20,textAlign:"center",color:"#666"},children:"No past events this month"})})]})]})})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{color:"#ffaa00",fontSize:12,fontWeight:600},children:" UPCOMING RELEASES"}),e.jsxs("span",{style:{color:"#666",fontSize:11},children:["(",((Y=l.economic_calendar)==null?void 0:Y.current_month)||new Date().toLocaleDateString("en-US",{timeZone:"America/New_York",month:"long",year:"numeric"}),")"]}),((Ke=l.economic_calendar)==null?void 0:Ke.last_updated)&&e.jsxs("span",{style:{color:"#444",fontSize:9,marginLeft:"auto"},children:["Updated: ",l.economic_calendar.last_updated]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,170,0,0.2)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"DATE"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"TIME (ET)"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"EVENT"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"FORECAST"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"PREVIOUS"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontWeight:600,fontSize:10,letterSpacing:.5},children:"IMPACT"})]})}),e.jsxs("tbody",{children:[(((rt=l.economic_calendar)==null?void 0:rt.upcoming)||[]).map((me,g)=>{const j=me.impact==="high"||me.impact==="critical"?"#ff4466":me.impact==="medium"?"#ffaa00":"#888",K=me.is_today;return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.05)",background:K?"rgba(255,170,0,0.1)":g%2===0?"transparent":"rgba(255,255,255,0.01)"},children:[e.jsxs("td",{style:{padding:"10px 8px",color:K?"#ffaa00":"#aaa",fontSize:11,whiteSpace:"nowrap",fontWeight:K?600:400},children:[K&&e.jsx("span",{style:{marginRight:4},children:""}),me.date]}),e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:me.time}),e.jsx("td",{style:{padding:"10px 8px"},children:e.jsx("div",{style:{color:"#fff",fontWeight:500,fontSize:12},children:me.event})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#00aaff",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:me.forecast}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#888",fontFamily:"'JetBrains Mono', monospace",fontSize:11},children:me.previous}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${j}20`,color:j},children:me.impact.toUpperCase()})})]},g)}),(!((et=l.economic_calendar)!=null&&et.upcoming)||l.economic_calendar.upcoming.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:20,textAlign:"center",color:"#666"},children:"No upcoming events"})})]})]})})]})]})]})},Ig=({onResetComplete:t})=>{const[n,i]=A.useState(!1),[o,r]=A.useState(null),[s,l]=A.useState(""),a=async()=>{i(!0),r(null),l("Initiating full system reset...");try{l("Stopping all connections...");const d=await fetch(`${Zt}/reset-connection`,{method:"POST",headers:{"Content-Type":"application/json"}});if(d.ok){const p=await d.json();l("Clearing state and reconnecting..."),await new Promise(x=>setTimeout(x,2e3)),l("Verifying connection...");let C=0;for(;C<10;){try{const x=await fetch(`${Zt}`);if(x.ok){const u=await x.json();if(u.data_source&&u.data_source!=="DISCONNECTED"){r({type:"success",message:"System reset complete! Live data restored."}),t&&t();break}}}catch{}C++,l(`Waiting for connection... (${C}/10)`),await new Promise(x=>setTimeout(x,1e3))}C>=10&&r({type:"warning",message:"Reset complete. Connection may take a moment to establish."})}else r({type:"error",message:"Failed to reset - backend may need manual restart"})}catch{r({type:"error",message:"Network error - check if backend is running on port 8080"})}l(""),i(!1)};return e.jsxs("div",{children:[e.jsx("button",{onClick:a,disabled:n,style:{width:"100%",padding:"16px 24px",background:n?"linear-gradient(135deg, #555 0%, #333 100%)":"linear-gradient(135deg, #ff4466 0%, #cc2244 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:15,fontWeight:700,cursor:n?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10,transition:"all 0.2s ease",boxShadow:n?"none":"0 4px 20px rgba(255,68,102,0.3)"},children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"spin 1s linear infinite"},children:""}),s||"Resetting..."]}):e.jsx(e.Fragment,{children:" FULL SYSTEM RESET"})}),o&&e.jsxs("div",{style:{marginTop:12,padding:"12px 16px",borderRadius:8,background:o.type==="success"?"rgba(0,255,136,0.15)":o.type==="warning"?"rgba(255,170,0,0.15)":"rgba(255,68,102,0.15)",border:`1px solid ${o.type==="success"?"#00ff88":o.type==="warning"?"#ffaa00":"#ff4466"}`,color:o.type==="success"?"#00ff88":o.type==="warning"?"#ffaa00":"#ff4466",fontSize:13,textAlign:"center"},children:[o.type==="success"?"":o.type==="warning"?"":""," ",o.message]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(255,68,102,0.05)",borderRadius:8,border:"1px solid rgba(255,68,102,0.1)"},children:[e.jsx("div",{style:{fontSize:11,color:"#ff6688",marginBottom:8,fontWeight:600},children:"THIS WILL:"}),e.jsxs("ul",{style:{margin:0,paddingLeft:16,lineHeight:1.8,fontSize:11,color:"#888"},children:[e.jsx("li",{children:"Kill all active data connections"}),e.jsx("li",{children:"Clear volume, delta, and TPO counters"}),e.jsx("li",{children:"Reset session high/low tracking"}),e.jsx("li",{children:"Restart Databento live feed"}),e.jsx("li",{children:"Re-establish fresh connection"})]})]})]})},Eg=({settings:t,onSettingsChange:n,trades:i=[],dateRange:o,connectionStatus:r,onResetConnection:s})=>{var R,c;const[l,a]=A.useState(t),[d,p]=A.useState(!1),[C,x]=A.useState(!1),[u,D]=A.useState(null),O=(N,S)=>{const B=JSON.parse(JSON.stringify(l)),F=N.split(".");let pe=B;for(let U=0;U<F.length-1;U++)pe=pe[F[U]];pe[F[F.length-1]]=S,a(B),p(!0)},Q=()=>{const N=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,S=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;if(Math.abs(N-100)>.1){alert(`Entry Tier allocations must sum to 100%. Currently: ${N}%`);return}if(Math.abs(S-100)>.1){alert(`Target Tier allocations must sum to 100%. Currently: ${S}%`);return}n(l),p(!1)},De=()=>{a(Tp),p(!0)},f=l.entryTiers.tier1+l.entryTiers.tier2+l.entryTiers.tier3,y=l.targetTiers.vwap+l.targetTiers.ibMid+l.targetTiers.ibHigh;return e.jsxs("div",{style:J.settingsPanel,children:[e.jsxs("div",{style:J.settingsHeader,children:[e.jsx("h2",{style:J.dashboardTitle,children:" Strategy Parameters"}),e.jsx("p",{style:J.settingsSubtitle,children:"Adjust thresholds and allocations to see how analytics change"})]}),e.jsxs("div",{style:J.settingsGrid,children:[e.jsxs("div",{style:J.settingsCard,children:[e.jsx("h3",{style:J.settingsCardTitle,children:" Signal Thresholds"}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"Delta Threshold"}),e.jsx("span",{style:J.sliderValue,children:l.deltaThreshold.toLocaleString()})]}),e.jsx("input",{type:"range",min:"-5000",max:"-1000",step:"100",value:l.deltaThreshold,onChange:N=>O("deltaThreshold",parseInt(N.target.value)),style:J.slider}),e.jsxs("div",{style:J.sliderTicks,children:[e.jsx("span",{children:"-5000"}),e.jsx("span",{children:"-3000"}),e.jsx("span",{children:"-1000"})]})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"Buying Imbalance %"}),e.jsxs("span",{style:J.sliderValue,children:[l.buyingImbalancePct,"%"]})]}),e.jsx("input",{type:"range",min:"200",max:"600",step:"25",value:l.buyingImbalancePct,onChange:N=>O("buyingImbalancePct",parseInt(N.target.value)),style:J.slider}),e.jsxs("div",{style:J.sliderTicks,children:[e.jsx("span",{children:"200%"}),e.jsx("span",{children:"400%"}),e.jsx("span",{children:"600%"})]})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"Divergence Highlight Threshold"}),e.jsx("span",{style:J.sliderValue,children:l.divergenceThreshold||0})]}),e.jsx("input",{type:"range",min:"0",max:"200",step:"10",value:l.divergenceThreshold||0,onChange:N=>O("divergenceThreshold",parseInt(N.target.value)),style:J.slider}),e.jsxs("div",{style:J.sliderTicks,children:[e.jsx("span",{children:"0 (All)"}),e.jsx("span",{children:"100"}),e.jsx("span",{children:"200"})]}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Delta divergence amount required for white glow on candles (0 = always highlight)"})]})]}),e.jsxs("div",{style:J.settingsCard,children:[e.jsx("h3",{style:J.settingsCardTitle,children:" Entry Tier Allocation"}),e.jsxs("p",{style:J.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(f-100)<.1?"#00ff88":"#ff4466"},children:[f,"%"]}),Math.abs(f-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"Tier I (Feeler)  8:45-9:20 ET"}),e.jsxs("span",{style:J.sliderValue,children:[l.entryTiers.tier1,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier1,onChange:N=>O("entryTiers.tier1",parseInt(N.target.value)),style:J.slider})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"Tier II (Builder)  9:35-10:00 ET"}),e.jsxs("span",{style:J.sliderValue,children:[l.entryTiers.tier2,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier2,onChange:N=>O("entryTiers.tier2",parseInt(N.target.value)),style:J.slider})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"Tier III (Runner)  10:15-10:45 ET"}),e.jsxs("span",{style:J.sliderValue,children:[l.entryTiers.tier3,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.entryTiers.tier3,onChange:N=>O("entryTiers.tier3",parseInt(N.target.value)),style:J.slider})]}),e.jsxs("div",{style:J.tierVisual,children:[e.jsx("div",{style:{...J.tierBar,width:`${l.entryTiers.tier1}%`,background:"#00aaff"}}),e.jsx("div",{style:{...J.tierBar,width:`${l.entryTiers.tier2}%`,background:"#00ff88"}}),e.jsx("div",{style:{...J.tierBar,width:`${l.entryTiers.tier3}%`,background:"#ffaa00"}})]}),e.jsxs("div",{style:J.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00aaff"},children:""})," Tier I"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," Tier II"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," Tier III"]})]})]}),e.jsxs("div",{style:J.settingsCard,children:[e.jsx("h3",{style:J.settingsCardTitle,children:" Target Allocation"}),e.jsxs("p",{style:J.allocationNote,children:["Total: ",e.jsxs("span",{style:{color:Math.abs(y-100)<.1?"#00ff88":"#ff4466"},children:[y,"%"]}),Math.abs(y-100)>=.1&&e.jsx("span",{style:{color:"#ff4466"},children:" (must equal 100%)"})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"VWAP Target (88% historical hit rate)"}),e.jsxs("span",{style:J.sliderValue,children:[l.targetTiers.vwap,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.vwap,onChange:N=>O("targetTiers.vwap",parseInt(N.target.value)),style:J.slider})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"IB Mid Target (75% historical hit rate)"}),e.jsxs("span",{style:J.sliderValue,children:[l.targetTiers.ibMid,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibMid,onChange:N=>O("targetTiers.ibMid",parseInt(N.target.value)),style:J.slider})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"IB High Target (40% historical hit rate)"}),e.jsxs("span",{style:J.sliderValue,children:[l.targetTiers.ibHigh,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l.targetTiers.ibHigh,onChange:N=>O("targetTiers.ibHigh",parseInt(N.target.value)),style:J.slider})]}),e.jsxs("div",{style:J.tierVisual,children:[e.jsx("div",{style:{...J.tierBar,width:`${l.targetTiers.vwap}%`,background:"#00ff88"}}),e.jsx("div",{style:{...J.tierBar,width:`${l.targetTiers.ibMid}%`,background:"#ffaa00"}}),e.jsx("div",{style:{...J.tierBar,width:`${l.targetTiers.ibHigh}%`,background:"#ff4466"}})]}),e.jsxs("div",{style:J.tierLegend,children:[e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00ff88"},children:""})," VWAP"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ffaa00"},children:""})," IB Mid"]}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#ff4466"},children:""})," IB High"]})]})]}),e.jsxs("div",{style:J.settingsCard,children:[e.jsx("h3",{style:J.settingsCardTitle,children:" Backtest Filters"}),e.jsx("p",{style:J.allocationNote,children:"Filter trades by grade, tier, and R-multiple"}),e.jsxs("div",{style:{display:"flex",gap:16,marginBottom:12},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{...J.sliderLabel,fontSize:10},children:"Grade"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:["A","B","C","F"].map(N=>{var S,B;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((B=(S=l.filters)==null?void 0:S.grades)==null?void 0:B[N])??!0,onChange:F=>{const pe={...l.filters};pe.grades||(pe.grades={A:!0,B:!0,C:!0,F:!0}),pe.grades[N]=F.target.checked,O("filters",pe)},style:{width:14,height:14}}),e.jsx("span",{style:{color:N==="A"?"#00ff88":N==="B"?"#ffaa00":"#ff4466",fontWeight:600,fontSize:11},children:N})]},N)})})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{style:{...J.sliderLabel,fontSize:10},children:"Tier"}),e.jsx("div",{style:{display:"flex",gap:6,marginTop:4},children:[1,2,3].map(N=>{var S,B;return e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:3,cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:((B=(S=l.filters)==null?void 0:S.tiers)==null?void 0:B[N])??!0,onChange:F=>{const pe={...l.filters};pe.tiers||(pe.tiers={1:!0,2:!0,3:!0}),pe.tiers[N]=F.target.checked,O("filters",pe)},style:{width:14,height:14}}),e.jsx("span",{style:{color:N===1?"#00aaff":N===2?"#00ff88":"#ffaa00",fontWeight:600,fontSize:11},children:N===1?"I":N===2?"II":"III"})]},N)})})]})]}),e.jsxs("div",{style:J.sliderGroup,children:[e.jsxs("div",{style:J.sliderHeader,children:[e.jsx("label",{style:J.sliderLabel,children:"Minimum R-Multiple"}),e.jsxs("span",{style:J.sliderValue,children:[(((R=l.filters)==null?void 0:R.minR)??-10).toFixed(1),"R"]})]}),e.jsx("input",{type:"range",min:"-10",max:"5",step:"0.5",value:((c=l.filters)==null?void 0:c.minR)??-10,onChange:N=>{const S={...l.filters,minR:parseFloat(N.target.value)};O("filters",S)},style:J.slider}),e.jsxs("div",{style:J.sliderTicks,children:[e.jsx("span",{children:"-10R (All)"}),e.jsx("span",{children:"0R"}),e.jsx("span",{children:"5R"})]})]})]})]}),e.jsxs("div",{style:J.settingsActions,children:[e.jsx("button",{style:{...J.actionButton,...J.resetButton},onClick:De,children:"Reset to Defaults"}),e.jsx("button",{style:{...J.actionButton,...J.applyButton,opacity:d?1:.5,cursor:d?"pointer":"not-allowed"},onClick:Q,disabled:!d,children:d?" Apply Changes & Recalculate":"No Changes"})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(138,43,226,0.1) 0%, rgba(75,0,130,0.05) 100%)",border:"2px solid rgba(138,43,226,0.3)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#9370DB",fontSize:18},children:" Project Horizon AI Optimizer"}),e.jsxs("p",{style:{color:"#888",fontSize:13,marginBottom:20},children:["Analyzes ",i.length," trades from ",o==null?void 0:o.start," to ",o==null?void 0:o.end," to find optimal parameters."]}),e.jsx("button",{style:{width:"100%",padding:"16px 32px",background:C?"linear-gradient(135deg, #666 0%, #444 100%)":"linear-gradient(135deg, #9370DB 0%, #8B5CF6 100%)",border:"none",borderRadius:12,color:"#fff",fontSize:16,fontWeight:700,cursor:C?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:10},disabled:C||i.length===0,onClick:()=>{if(i.length===0){alert("No trades available to optimize. Please load trade data first.");return}x(!0),D(null),setTimeout(()=>{const N=[-1500,-2e3,-2500,-3e3,-3500,-4e3],S=[300,350,400,450,500];let B={pnl:-1/0,winRate:0,settings:null,tradesUsed:0};if(N.forEach(h=>{S.forEach(w=>{const Me=i.filter(I=>!(I.delta!==void 0&&I.delta>h||I.buyingImbalance!==void 0&&I.buyingImbalance<w));if(Me.length>0){const I=Me.reduce((_e,v)=>_e+(v.pnl||0),0),He=Me.filter(_e=>(_e.pnl||0)>0).length/Me.length*100;(I*(He/100)>B.pnl*(B.winRate/100)||I>B.pnl&&He>=50)&&(B={pnl:I,winRate:He,tradesUsed:Me.length,settings:{deltaThreshold:h,buyingImbalancePct:w}})}})}),!B.settings){const h=i.reduce((Me,I)=>Me+(I.pnl||0),0),w=i.filter(Me=>(Me.pnl||0)>0).length;B={pnl:h,winRate:w/i.length*100,tradesUsed:i.length,settings:{deltaThreshold:-2500,buyingImbalancePct:400}}}const F=i.filter(h=>(h.pnl||0)>0),pe=F.length>0?F.reduce((h,w)=>h+(w.r||0),0)/F.length:1.5;let U={tier1:25,tier2:40,tier3:35},m={vwap:50,ibMid:35,ibHigh:15};pe>2?(U={tier1:20,tier2:35,tier3:45},m={vwap:40,ibMid:35,ibHigh:25}):pe<1&&(U={tier1:30,tier2:45,tier3:25},m={vwap:60,ibMid:30,ibHigh:10}),D({...B,entryTiers:U,targetTiers:m,avgR:pe.toFixed(2),totalTrades:i.length}),x(!1)},1500)},children:C?e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{animation:"pulse 1s infinite"},children:""}),e.jsx("span",{children:"Optimizing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Run AI Optimization"})]})}),u&&e.jsxs("div",{style:{marginTop:20,padding:20,background:"rgba(0,255,136,0.05)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12},children:[e.jsx("h4",{style:{margin:"0 0 16px 0",color:"#00ff88",fontSize:14},children:" Optimization Complete"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"PROJECTED P&L"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.pnl>=0?"#00ff88":"#ff4466"},children:["$",u.pnl.toLocaleString()]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"WIN RATE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:u.winRate>=50?"#00ff88":"#ffaa00"},children:[u.winRate.toFixed(1),"%"]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"TRADES USED"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#fff"},children:[u.tradesUsed,"/",u.totalTrades]})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.2)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:11,color:"#888"},children:"AVG R-MULTIPLE"}),e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:"#00aaff"},children:[u.avgR,"R"]})]})]}),e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16},children:[e.jsx("strong",{children:"Recommended Settings:"}),e.jsxs("div",{style:{marginTop:8,display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{children:["Delta Threshold: ",e.jsx("span",{style:{color:"#9370DB"},children:u.settings.deltaThreshold.toLocaleString()})]}),e.jsxs("div",{children:["Buy Imbalance: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.settings.buyingImbalancePct,"%"]})]}),e.jsxs("div",{children:["Entry Tiers: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.entryTiers.tier1,"/",u.entryTiers.tier2,"/",u.entryTiers.tier3]})]}),e.jsxs("div",{children:["Targets: ",e.jsxs("span",{style:{color:"#9370DB"},children:[u.targetTiers.vwap,"/",u.targetTiers.ibMid,"/",u.targetTiers.ibHigh]})]})]})]}),e.jsx("button",{style:{width:"100%",padding:"12px 20px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:8,color:"#000",fontSize:14,fontWeight:700,cursor:"pointer"},onClick:()=>{const N={...l,deltaThreshold:u.settings.deltaThreshold,buyingImbalancePct:u.settings.buyingImbalancePct,entryTiers:u.entryTiers,targetTiers:u.targetTiers};a(N),n(N),D(null),alert(" Optimal settings applied!")},children:" Apply Optimal Settings"})]}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666",textAlign:"center"},children:"Grid search optimization across Delta & Imbalance parameters"})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:16,padding:24,marginBottom:24},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#fff",fontSize:16},children:" Timezone"}),e.jsx("div",{style:{padding:"14px 20px",background:"rgba(0,170,255,0.1)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:10,color:"#00aaff",fontSize:14,fontWeight:500},children:" New York (ET) - Eastern Time"}),e.jsx("div",{style:{marginTop:12,fontSize:11,color:"#666"},children:"All session times are displayed in Eastern Time (ET). Market hours: 6:00 PM - 5:00 PM ET (Sun-Fri)"})]}),e.jsxs("div",{style:{background:r!=null&&r.connected?"linear-gradient(135deg, rgba(0,255,136,0.05) 0%, rgba(0,200,100,0.02) 100%)":"linear-gradient(135deg, rgba(255,68,102,0.1) 0%, rgba(200,50,80,0.05) 100%)",border:`2px solid ${r!=null&&r.connected?"rgba(0,255,136,0.3)":"rgba(255,68,102,0.3)"}`,borderRadius:16,padding:24,marginBottom:24},children:[e.jsxs("h3",{style:{margin:"0 0 16px 0",color:r!=null&&r.connected?"#00ff88":"#ff4466",fontSize:18},children:[r!=null&&r.connected?"":""," Live Data Connection"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12,marginBottom:20},children:[e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"STATUS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:r!=null&&r.connected?"#00ff88":"#ff4466"},children:r!=null&&r.connected?"LIVE":"OFFLINE"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"UPTIME"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:r!=null&&r.connected?"#00aaff":"#888"},children:r!=null&&r.lastSuccessTime?Math.floor((Date.now()-new Date(r.lastSuccessTime).getTime())/1e3)<60?"STABLE":"RECONNECTING":"--"})]}),e.jsxs("div",{style:{padding:12,background:"rgba(0,0,0,0.3)",borderRadius:8},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:4},children:"ERRORS"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:(r==null?void 0:r.errorCount)>0?"#ffaa00":"#00ff88"},children:(r==null?void 0:r.errorCount)||0})]})]}),(r==null?void 0:r.lastError)&&e.jsxs("div",{style:{padding:12,background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.2)",borderRadius:8,marginBottom:16},children:[e.jsx("div",{style:{fontSize:10,color:"#ff4466",marginBottom:4},children:"LAST ERROR"}),e.jsx("div",{style:{fontSize:12,color:"#ffaa00",fontFamily:"monospace",wordBreak:"break-all"},children:r.lastError}),r.reconnectAttempts>0&&e.jsxs("div",{style:{fontSize:10,color:"#888",marginTop:8},children:["Auto-reconnect attempts: ",r.reconnectAttempts]})]}),(r==null?void 0:r.lastSuccessTime)&&e.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:16},children:["Last successful data: ",new Date(r.lastSuccessTime).toLocaleTimeString()]}),e.jsx(Ig,{onResetComplete:s})]}),e.jsxs("div",{style:J.settingsInfo,children:[e.jsx("h4",{style:J.infoTitle,children:" How Settings Affect Analytics"}),e.jsxs("ul",{style:J.infoList,children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Delta Threshold:"})," Trades with delta deeper than this value are considered valid setups"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Buying Imbalance %:"})," Minimum imbalance required for entry confirmation"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Entry Tier Allocation:"})," How position size is distributed across the three entry phases"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Target Allocation:"})," Distribution of profit-taking across the three target levels"]})]})]})]})};A.memo(({title:t,value:n,subtitle:i,trend:o,color:r})=>{const s=o>0?"#00ff88":o<0?"#ff4466":"#888",l=r||"rgba(255,255,255,0.03)";return e.jsxs("div",{style:{...J.statsCard,background:l},children:[e.jsx("div",{style:J.statsTitle,children:t}),e.jsx("div",{style:J.statsValue,children:n}),i&&e.jsx("div",{style:J.statsSubtitle,children:i}),o!==void 0&&e.jsxs("div",{style:{...J.statsTrend,color:s},children:[o>0?"":o<0?"":""," ",Math.abs(o).toFixed(1),"%"]})]})});const Lg=({metrics:t,settings:n})=>{var C,x;const[i,o]=A.useState(null),[r,s]=A.useState({x:0,y:0}),l=[{name:`Delta < ${((C=n.deltaThreshold)==null?void 0:C.toLocaleString())||"-2500"}`,active:(t.delta_30m||0)<=(n.deltaThreshold||-2500),critical:!0,tooltip:(t.delta_30m||0)<=(n.deltaThreshold||-2500)?` 30m delta (${(t.delta_30m||0).toLocaleString()}) is below threshold (${(n.deltaThreshold||-2500).toLocaleString()}), indicating strong selling pressure`:` 30m delta (${(t.delta_30m||0).toLocaleString()}) is above threshold (${(n.deltaThreshold||-2500).toLocaleString()}), not enough selling pressure`},{name:"Outside IB",active:(t.current_price||0)>(t.ib_high||0)&&(t.ib_high||0)>0||(t.current_price||0)<(t.ib_low||999999)&&(t.ib_low||999999)<999999,critical:!0,tooltip:(()=>{const u=t.current_price||0,D=t.ib_high||0,O=t.ib_low||999999,Q=u>D&&D>0,De=u<O&&O<999999;return Q?` Price ($${u.toFixed(2)}) is ABOVE IB High ($${D.toFixed(2)}), potential breakout`:De?` Price ($${u.toFixed(2)}) is BELOW IB Low ($${O.toFixed(2)}), potential breakdown`:` Price ($${u.toFixed(2)}) is within IB range ($${O.toFixed(2)} - $${D.toFixed(2)})`})()},{name:"At pdPOC",active:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0,critical:!1,tooltip:Math.abs((t.current_price||0)-(t.pdpoc||0))<=2&&(t.pdpoc||0)>0?` Price is within $2 of previous day POC ($${(t.pdpoc||0).toFixed(2)}), key support level`:` Price is $${Math.abs((t.current_price||0)-(t.pdpoc||0)).toFixed(2)} away from pdPOC ($${(t.pdpoc||0).toFixed(2)})`},{name:"Absorption",active:(t.absorption_ratio||0)>1.2,critical:!0,tooltip:(t.absorption_ratio||0)>1.2?` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)}) > 1.2, buyers absorbing selling pressure`:` Absorption ratio (${(t.absorption_ratio||0).toFixed(2)})  1.2, not enough buying absorption`},{name:`Buy Imb. ${n.buyingImbalancePct||400}%+`,active:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400),critical:!1,tooltip:(t.buying_imbalance_pct||0)>=(n.buyingImbalancePct||400)?` Buying imbalance (${t.buying_imbalance_pct||0}%) meets threshold (${n.buyingImbalancePct||400}%)`:` Buying imbalance (${t.buying_imbalance_pct||0}%) below threshold (${n.buyingImbalancePct||400}%)`},{name:"Stacked Imb. 3+",active:(t.stacked_buy_imbalances||0)>=3,critical:!1,tooltip:(t.stacked_buy_imbalances||0)>=3?` ${t.stacked_buy_imbalances||0} stacked buy imbalances detected, strong buying interest`:` Only ${t.stacked_buy_imbalances||0} stacked imbalances, need 3+ for confirmation`}],a=l.filter(u=>u.active).length,d=(u,D)=>{const O=u.target.getBoundingClientRect();s({x:O.left,y:O.bottom+8}),o(D)},p=()=>{o(null)};return e.jsxs("div",{style:J.signalMatrix,children:[e.jsxs("div",{style:J.signalHeader,children:[e.jsx("h3",{style:J.signalTitle,children:"Signal Matrix"}),e.jsx("div",{style:J.signalCount,children:e.jsxs("span",{style:{color:a>=4?"#00ff88":"#ffaa00"},children:[a,"/6 Active"]})})]}),e.jsx("div",{style:J.signalGrid,children:l.map((u,D)=>e.jsxs("div",{onMouseEnter:O=>d(O,u),onMouseLeave:p,style:{...J.signalItem,background:u.active?"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,255,136,0.05) 100%)":"rgba(255,68,102,0.1)",borderColor:u.active?"#00ff88":"#ff4466",cursor:"help"},children:[e.jsx("div",{style:{...J.signalIndicator,background:u.active?"#00ff88":"#ff4466",boxShadow:u.active?"0 0 10px #00ff88":"none"}}),e.jsx("span",{style:J.signalName,children:u.name}),u.critical&&e.jsx("span",{style:J.criticalBadge,children:"!"})]},D))}),i&&e.jsxs("div",{style:{position:"fixed",left:r.x,top:r.y,background:"rgba(20,20,30,0.98)",border:`2px solid ${i.active?"#00ff88":"#ff4466"}`,borderRadius:12,padding:"14px 18px",maxWidth:320,zIndex:1e3,boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:i.active?"#00ff88":"#ff4466",boxShadow:i.active?"0 0 8px #00ff88":"none"}}),e.jsx("span",{style:{color:i.active?"#00ff88":"#ff4466",fontWeight:700,fontSize:14},children:i.active?"CONDITION MET":"NOT MET"}),i.critical&&e.jsx("span",{style:{background:"#ff4466",color:"#000",padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:700},children:"CRITICAL"})]}),e.jsx("div",{style:{color:"#ddd",fontSize:13,lineHeight:1.5},children:i.tooltip})]}),e.jsxs("div",{style:J.setupStatus,children:[e.jsx("span",{style:J.phaseLabel,children:"Current Phase:"}),e.jsx("span",{style:{...J.phaseValue,color:(x=t.current_phase)!=null&&x.includes("IB")?"#00ff88":t.current_phase==="POST_IB"?"#ffaa00":t.current_phase==="DISCONNECTED"?"#ff4466":"#888"},children:t.current_phase})]})]})},Ag=({trades:t,onDayClick:n})=>{const[i,o]=A.useState(()=>{if(t.length>0){const S=t[t.length-1],B=new Date(S.date);return{year:B.getFullYear(),month:B.getMonth()}}return{year:2025,month:11}}),[r,s]=A.useState(null),[l,a]=A.useState(null),[d,p]=A.useState({x:0,y:0}),C=A.useMemo(()=>{const S={};return t.forEach(B=>{S[B.date]||(S[B.date]=[]),S[B.date].push(B)}),S},[t]),x=(S,B)=>new Date(S,B+1,0).getDate(),u=(S,B)=>new Date(S,B,1).getDay(),D=x(i.year,i.month),O=u(i.year,i.month),Q=["January","February","March","April","May","June","July","August","September","October","November","December"],De=()=>{o(S=>S.month===0?{year:S.year-1,month:11}:{...S,month:S.month-1})},f=()=>{o(S=>S.month===11?{year:S.year+1,month:0}:{...S,month:S.month+1})},y=[];for(let S=0;S<O;S++)y.push({day:null,date:null});for(let S=1;S<=D;S++){const B=`${i.year}-${String(i.month+1).padStart(2,"0")}-${String(S).padStart(2,"0")}`,F=C[B]||[],pe=F.reduce((U,m)=>U+m.pnl,0);y.push({day:S,date:B,trades:F,pnl:pe,hasTradeData:F.length>0})}const R=(S,B)=>{if(B.hasTradeData){const F=S.target.getBoundingClientRect();p({x:F.left+F.width/2,y:F.top-10}),s(B)}},c=S=>{S.hasTradeData&&(a(S),n&&n(S))},N=A.useMemo(()=>{const S=t.filter(pe=>{const U=new Date(pe.date);return U.getFullYear()===i.year&&U.getMonth()===i.month}),B=S.reduce((pe,U)=>pe+U.pnl,0),F=S.filter(pe=>pe.pnl>0).length;return{trades:S.length,pnl:B,winRate:S.length>0?(F/S.length*100).toFixed(0):0}},[t,i]);return e.jsxs("div",{style:Pe.container,children:[e.jsxs("div",{style:Pe.header,children:[e.jsx("h3",{style:Pe.title,children:" Daily P&L Calendar"}),e.jsxs("div",{style:Pe.monthNav,children:[e.jsx("button",{onClick:De,style:Pe.navButton,children:""}),e.jsxs("span",{style:Pe.monthLabel,children:[Q[i.month]," ",i.year]}),e.jsx("button",{onClick:f,style:Pe.navButton,children:""})]}),e.jsxs("div",{style:Pe.monthStats,children:[e.jsxs("span",{children:[N.trades," trades"]}),e.jsxs("span",{style:{color:N.pnl>=0?"#00ff88":"#ff4466"},children:["$",N.pnl.toLocaleString()]}),e.jsxs("span",{style:{color:"#00ff88"},children:[N.winRate,"% WR"]})]})]}),e.jsx("div",{style:Pe.weekdays,children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>e.jsx("div",{style:Pe.weekday,children:S},S))}),e.jsx("div",{style:Pe.grid,children:y.map((S,B)=>e.jsx("div",{style:{...Pe.day,...S.day?{}:Pe.emptyDay,...S.hasTradeData?{background:S.pnl>=0?`rgba(0, 255, 136, ${Math.min(.4,Math.abs(S.pnl)/5e4+.1)})`:`rgba(255, 68, 102, ${Math.min(.4,Math.abs(S.pnl)/5e4+.1)})`,cursor:"pointer",border:`1px solid ${S.pnl>=0?"#00ff88":"#ff4466"}`}:{},...(l==null?void 0:l.date)===S.date?{border:"2px solid #fff",boxShadow:"0 0 15px rgba(0,255,136,0.5)"}:{}},onMouseEnter:F=>R(F,S),onMouseLeave:()=>s(null),onClick:()=>S.day&&c(S),children:S.day&&e.jsxs(e.Fragment,{children:[e.jsx("span",{style:Pe.dayNumber,children:S.day}),S.hasTradeData&&e.jsxs("span",{style:{...Pe.dayPnl,color:S.pnl>=0?"#00ff88":"#ff4466"},children:[S.pnl>=0?"+":"",(S.pnl/1e3).toFixed(1),"k"]}),S.trades.length>1&&e.jsx("span",{style:Pe.tradeCount,children:S.trades.length})]})},B))}),r&&r.hasTradeData&&e.jsxs("div",{style:{...Pe.tooltip,left:d.x,top:d.y,transform:"translate(-50%, -100%)"},children:[e.jsxs("div",{style:Pe.tooltipHeader,children:[r.date,"  ",r.trades.length," trade(s)"]}),r.trades.map((S,B)=>e.jsxs("div",{style:Pe.tooltipTrade,children:[e.jsxs("div",{style:Pe.tooltipRow,children:[e.jsxs("span",{children:["Grade ",S.grade,"  Tier ",S.tier]}),e.jsxs("span",{style:{color:S.pnl>=0?"#00ff88":"#ff4466"},children:["$",S.pnl.toLocaleString()]})]}),e.jsxs("div",{style:Pe.tooltipRow,children:[e.jsxs("span",{children:["Entry: $",S.entry.toFixed(2)]}),e.jsxs("span",{children:["Exit: $",S.exit.toFixed(2)]})]}),e.jsxs("div",{style:Pe.tooltipRow,children:[e.jsxs("span",{children:["Delta: ",S.delta]}),e.jsxs("span",{children:["Imb: ",S.buyingImbalance,"%"]})]}),e.jsxs("div",{style:Pe.tooltipRow,children:[e.jsxs("span",{children:["Conditions: ",S.grade==="A"?"6/6":S.grade==="B"?"5/6":"4/6"]}),e.jsxs("span",{children:[S.r>0?"+":"",S.r,"R"]})]})]},B)),e.jsx("div",{style:Pe.tooltipFooter,children:"Click for full details"})]}),l&&l.hasTradeData&&e.jsx("div",{style:Pe.modalOverlay,onClick:()=>a(null),children:e.jsxs("div",{style:Pe.modal,onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{style:Pe.modalHeader,children:[e.jsxs("h3",{children:[" Trade Details - ",l.date]}),e.jsx("button",{onClick:()=>a(null),style:Pe.closeButton,children:""})]}),e.jsx("div",{style:Pe.modalContent,children:l.trades.map((S,B)=>{var F,pe,U,m,h,w,Me;return e.jsxs("div",{style:Pe.tradeDetail,children:[e.jsxs("div",{style:Pe.tradeHeader,children:[e.jsxs("span",{style:Pe.tradeBadge,children:["Trade #",S.id]}),e.jsxs("span",{style:{...Pe.tradePnl,color:S.pnl>=0?"#00ff88":"#ff4466"},children:[S.pnl>=0?"+":"","$",S.pnl.toLocaleString()]})]}),e.jsxs("div",{style:Pe.tradeSection,children:[e.jsx("h4",{children:"Entry & Exit"}),e.jsxs("div",{style:Pe.tradeGrid,children:[e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"Entry Price"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",S.entry.toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"Exit Price"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",S.exit.toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"Stop Loss"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",(S.entry-3.5).toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"R-Multiple"}),e.jsxs("span",{style:{...Pe.tradeValue,color:S.r>=0?"#00ff88":"#ff4466"},children:[S.r>0?"+":"",S.r,"R"]})]})]})]}),e.jsxs("div",{style:Pe.tradeSection,children:[e.jsx("h4",{children:"Reference Levels"}),e.jsxs("div",{style:Pe.tradeGrid,children:[e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"IB High"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",(((F=S.levels)==null?void 0:F.ib_high)||S.entry+15).toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"IB Low"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",(((pe=S.levels)==null?void 0:pe.ib_low)||S.entry-10).toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"IB Mid"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",(((U=S.levels)==null?void 0:U.ib_mid)||S.entry+2.5).toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"pdPOC"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",(((m=S.levels)==null?void 0:m.pdpoc)||S.entry-5).toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"VWAP"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",(((h=S.levels)==null?void 0:h.vwap)||S.entry+5).toFixed(2)]})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"pd High"}),e.jsxs("span",{style:Pe.tradeValue,children:["$",(((w=S.levels)==null?void 0:w.pd_high)||S.entry+20).toFixed(2)]})]})]})]}),e.jsxs("div",{style:Pe.tradeSection,children:[e.jsx("h4",{children:"Entry Criteria Met"}),e.jsx("div",{style:Pe.criteriaGrid,children:[{name:"Price < IB Low",met:S.entry<(((Me=S.levels)==null?void 0:Me.ib_low)||S.entry)},{name:"At pdPOC",met:S.grade!=="C"},{name:`Delta Spike (${S.delta})`,met:S.delta<-2500},{name:"Absorption Detected",met:S.grade==="A"},{name:`Buying Imbalance (${S.buyingImbalance}%)`,met:S.buyingImbalance>=400},{name:"Stacked Imbalances",met:S.grade==="A"||S.grade==="B"}].map((I,Fe)=>e.jsxs("div",{style:{...Pe.criterion,background:I.met?"rgba(0,255,136,0.1)":"rgba(255,68,102,0.1)",borderColor:I.met?"#00ff88":"#ff4466"},children:[e.jsx("span",{style:{...Pe.criterionIcon,color:I.met?"#00ff88":"#ff4466"},children:I.met?"":""}),e.jsx("span",{style:Pe.criterionName,children:I.name})]},Fe))}),e.jsxs("div",{style:Pe.criteriaCount,children:["Conditions Met: ",e.jsxs("strong",{children:[S.conditionsMet||(S.grade==="A"?6:S.grade==="B"?5:4),"/6"]})]})]}),e.jsxs("div",{style:Pe.tradeSection,children:[e.jsx("h4",{children:"Trade Info"}),e.jsxs("div",{style:Pe.tradeGrid,children:[e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"Grade"}),e.jsx("span",{style:{...Pe.tradeBadgeSmall,background:S.grade==="A"?"#00ff88":S.grade==="B"?"#ffaa00":"#888"},children:S.grade})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"Tier"}),e.jsx("span",{style:Pe.tradeValue,children:S.tier})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"Contracts"}),e.jsx("span",{style:Pe.tradeValue,children:S.contracts})]}),e.jsxs("div",{style:Pe.tradeItem,children:[e.jsx("span",{style:Pe.tradeLabel,children:"Exit Reason"}),e.jsx("span",{style:Pe.tradeValue,children:S.exitReason.replace("target_","").replace("_"," ").toUpperCase()})]})]})]})]},B)})}),e.jsx("div",{style:Pe.modalFooter,children:e.jsxs("span",{style:{color:l.pnl>=0?"#00ff88":"#ff4466"},children:["Day Total: ",l.pnl>=0?"+":"","$",l.pnl.toLocaleString()]})})]})})]})},Pe={container:{background:"linear-gradient(180deg, rgba(15,18,25,0.95) 0%, rgba(10,12,18,0.98) 100%)",borderRadius:16,padding:16,marginTop:16,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)",maxWidth:420},header:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:8},title:{fontSize:14,fontWeight:600,color:"#fff",margin:0},monthNav:{display:"flex",alignItems:"center",gap:8},navButton:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:11,transition:"all 0.15s ease"},monthLabel:{fontSize:13,fontWeight:600,color:"#fff",minWidth:110,textAlign:"center"},monthStats:{display:"flex",gap:10,fontSize:11,color:"#666"},weekdays:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2,marginBottom:4},weekday:{textAlign:"center",color:"#555",fontSize:9,fontWeight:600,padding:4,letterSpacing:"0.5px"},grid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:2},day:{aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",borderRadius:6,background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)",position:"relative",transition:"all 0.15s ease",minHeight:42,maxHeight:50},emptyDay:{background:"transparent",border:"none"},dayNumber:{fontSize:11,color:"#777",fontWeight:500},dayPnl:{fontSize:9,fontWeight:600,marginTop:1},tradeCount:{position:"absolute",top:2,right:2,background:"rgba(0,170,255,0.9)",color:"#fff",fontSize:8,fontWeight:700,padding:"1px 4px",borderRadius:8,lineHeight:1.2},tooltip:{position:"fixed",background:"rgba(20, 25, 35, 0.98)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:12,padding:16,zIndex:1e3,minWidth:280,maxWidth:350,boxShadow:"0 10px 40px rgba(0,0,0,0.5)"},tooltipHeader:{fontSize:14,fontWeight:600,color:"#fff",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.1)"},tooltipTrade:{marginBottom:12,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.05)"},tooltipRow:{display:"flex",justifyContent:"space-between",fontSize:12,color:"#aaa",marginBottom:4},tooltipFooter:{fontSize:11,color:"#666",textAlign:"center",marginTop:8},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:20},modal:{background:"linear-gradient(180deg, #1a1f2e 0%, #0d1117 100%)",borderRadius:16,maxWidth:700,width:"100%",maxHeight:"90vh",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 25px 80px rgba(0,0,0,0.6)"},modalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px 24px",borderBottom:"1px solid rgba(255,255,255,0.1)",background:"rgba(0,255,136,0.05)"},closeButton:{background:"rgba(255,255,255,0.1)",border:"none",color:"#fff",fontSize:18,width:36,height:36,borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},modalContent:{padding:24,maxHeight:"calc(90vh - 150px)",overflowY:"auto"},modalFooter:{padding:"16px 24px",borderTop:"1px solid rgba(255,255,255,0.1)",textAlign:"center",fontSize:16,fontWeight:600},tradeDetail:{background:"rgba(255,255,255,0.03)",borderRadius:12,padding:20,marginBottom:16,border:"1px solid rgba(255,255,255,0.05)"},tradeHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},tradeBadge:{background:"rgba(0,170,255,0.2)",color:"#00aaff",padding:"4px 12px",borderRadius:20,fontSize:12,fontWeight:600},tradePnl:{fontSize:20,fontWeight:700},tradeSection:{marginBottom:16},tradeGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12,marginTop:8},tradeItem:{display:"flex",flexDirection:"column",gap:4},tradeLabel:{fontSize:11,color:"#666",textTransform:"uppercase"},tradeValue:{fontSize:14,color:"#fff",fontWeight:500},tradeBadgeSmall:{display:"inline-block",padding:"2px 8px",borderRadius:4,fontSize:12,fontWeight:600,color:"#000"},criteriaGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:8,marginTop:8},criterion:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",borderRadius:8,border:"1px solid",fontSize:12},criterionIcon:{fontSize:14,fontWeight:700},criterionName:{color:"#ccc"},criteriaCount:{marginTop:12,textAlign:"center",fontSize:14,color:"#888"}},Fg=()=>{var F,pe,U;const[t,n]=A.useState(null),[i,o]=A.useState(null),[r,s]=A.useState(null),[l,a]=A.useState(!0),[d,p]=A.useState(null),[C,x]=A.useState(!1),[u,D]=A.useState(!1),[O,Q]=A.useState(!1),[De,f]=A.useState(!1),[y,R]=A.useState(!0),{isMobile:c}=Oo();A.useEffect(()=>{const m=async()=>{try{const w=`_t=${Date.now()}`,Me={cache:"no-store"},[I,Fe,He]=await Promise.all([fetch(`${Zt}/zones?${w}`,Me),fetch(`${Zt}/?${w}`,Me),fetch(`${Zt}/market-profile?${w}`,Me)]);if(I.ok&&n(await I.json()),Fe.ok){const te=await Fe.json();console.log(" LIVE DATA FROM BACKEND:",{contract:te.contract,day_open:te.day_open,weekly_open:te.weekly_open,current_price:te.current_price}),o(te)}He.ok&&s(await He.json()),p(null)}catch{p("Connection error")}a(!1)};m();const h=setInterval(m,1e3);return()=>clearInterval(h)},[]);const N=A.useMemo(()=>{var ze,Te;if(!i)return{phase:"-",signal:"neutral",description:"No data"};const m=((ze=i.volume_5m)==null?void 0:ze.history)||((Te=i.volume_15m)==null?void 0:Te.history)||[],h=i.current_price||0;if(m.length<3)return{phase:"-",signal:"neutral",description:"Insufficient data"};const w=m.slice(-10),Me=w.slice(-3),I=w.slice(-5),Fe={price_close:h,price_high:i.session_high||h,price_low:i.session_low||h,buy:i.buy_volume||0,sell:i.sell_volume||0,delta:i.cumulative_delta||0},He=Me.map(Ze=>Ze.delta||0),te=Me.map(Ze=>(Ze.buy||0)+(Ze.sell||0)),_e=Me.map(Ze=>Ze.price_close||0),v=He.reduce((Ze,Et)=>Ze+Et,0)/3,he=He[2]>He[1]&&He[1]>He[0]?"increasing":He[2]<He[1]&&He[1]<He[0]?"decreasing":"neutral",le=te[2]>te[1]?"increasing":te[2]<te[1]?"decreasing":"neutral",Ne=v<0&&le==="decreasing"&&Math.abs(He[2])<Math.abs(He[0]),ot=_e.length>=3&&_e[2]>=_e[0]-2,_t=v<-10&&ot&&te[2]>50;let Ge=!1,ft=!1;if(I.length>=5){const Ze=I.map(j=>j.price_high||j.price_close||0),Et=I.map(j=>j.price_low||j.price_close||0),Y=Math.max(...Ze),Ke=Math.min(...Et),rt=Y-Ke,et=I.reduce((j,K)=>j+(K.price_close||0),0)/5,me=rt<et*.005;Ge=Fe.price_close>Y&&me;const g=I.slice(-3).map(j=>j.delta||0);ft=g[0]<-50&&g[2]>50}const qe=Me.map(Ze=>((Ze.price_high||Ze.price_close)+(Ze.price_low||Ze.price_close))/2),oe=qe[2]>qe[1]&&qe[1]>qe[0]?"up":qe[2]<qe[1]&&qe[1]<qe[0]?"down":"neutral",Le=Me.filter(Ze=>(Ze.buy||0)>(Ze.sell||0)*1.5).length,Be=Fe.price_close>qe[1]&&Fe.delta>0;let P="-",ne="neutral",ke="Scanning...";oe==="up"&&Le>=2&&Be?(P="C",ne="bullish",ke="POC Migration Up - Strong Trend"):Ge||ft?(P="B",ne="bullish",ke=Ge?"Breakout Initiation":"V-Recovery"):Ne||_t?(P="A",ne="preparing",ke=Ne?"Seller Exhaustion":"Absorption Detected"):oe==="down"&&(ne="bearish",ke="POC Migrating Down");const Ae=Math.min(100,Math.max(0,50+(v||0)/5+(oe==="up"?20:oe==="down"?-20:0)+Le*10));return{phase:P,signal:ne,description:ke,momentumScore:Ae,deltaTrend:he,volTrend:le,exhaustion:Ne,absorption:_t,initiation:Ge,vRecovery:ft,pocMigration:oe,imbalances:Le}},[i]),S=({zone:m,rank:h})=>{var I,Fe,He,te,_e,v,he,le,Ne,ot,_t,Ge,ft,qe,oe,Le,Be,P,ne,ke;const w={approaching:"#ffaa00",at_zone:"#00ff88",watching:"#888",distant:"#555"},Me=((I=m.readiness)==null?void 0:I.overall_score)>=80?"#00ff88":((Fe=m.readiness)==null?void 0:Fe.overall_score)>=60?"#ffaa00":"#ff4466";return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",border:`2px solid ${h===1?"#00ff88":"rgba(255,255,255,0.1)"}`,borderRadius:c?10:12,padding:c?12:20,marginBottom:c?12:16,overflow:"hidden"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:c?"column":"row",justifyContent:"space-between",gap:c?10:0,marginBottom:c?12:16},children:[e.jsxs("div",{children:[e.jsxs("span",{style:{background:h===1?"#00ff88":"#ffaa00",color:"#000",padding:c?"3px 10px":"4px 12px",borderRadius:20,fontSize:c?10:12,fontWeight:700},children:["#",h," PRIORITY"]}),e.jsx("h3",{style:{margin:"8px 0 0",color:"#fff",fontSize:c?15:18},children:m.name}),e.jsxs("span",{style:{color:"#888",fontSize:c?10:12},children:["Session ",m.session_number,"  ",(He=m.type)==null?void 0:He.toUpperCase()]})]}),e.jsxs("div",{style:{textAlign:c?"left":"right",display:"flex",flexDirection:c?"row":"column",alignItems:c?"center":"flex-end",gap:c?12:0},children:[e.jsx("div",{style:{color:w[m.status]||"#888",fontSize:c?11:14,fontWeight:600},children:(te=m.status)==null?void 0:te.toUpperCase()}),e.jsxs("div",{style:{color:"#fff",fontSize:c?18:24,fontFamily:"monospace",fontWeight:700},children:["$",(_e=m.price)==null?void 0:_e.toFixed(2)]}),e.jsxs("div",{style:{color:m.distance>0?"#00ff88":"#ff4466",fontSize:c?11:14},children:[m.distance>0?"+":"",(v=m.distance)==null?void 0:v.toFixed(2)," pts"]})]})]}),m.trade&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:c?12:16,marginBottom:c?12:16},children:[e.jsx("div",{style:{color:"#00aaff",fontSize:c?10:12,marginBottom:8,letterSpacing:1},children:"TRADE FRAMEWORK"}),e.jsxs("div",{style:{marginBottom:c?8:12},children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"ENTRY TRIGGER"}),e.jsx("div",{style:{color:"#fff",fontSize:c?11:13},children:m.trade.entry_trigger})]}),e.jsxs("div",{style:{display:"flex",flexDirection:c?"column":"row",gap:c?8:20,marginBottom:c?8:12},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"TARGET 1"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:c?11:14},children:[(he=m.trade.target1)==null?void 0:he.name,": $",(Ne=(le=m.trade.target1)==null?void 0:le.price)==null?void 0:Ne.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:c?10:12},children:["+",(_t=(ot=m.trade.target1)==null?void 0:ot.pts)==null?void 0:_t.toFixed(2),"pts"]})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"TARGET 2"}),e.jsxs("div",{style:{color:"#00ff88",fontSize:c?11:14},children:[(Ge=m.trade.target2)==null?void 0:Ge.name,": $",(qe=(ft=m.trade.target2)==null?void 0:ft.price)==null?void 0:qe.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:c?10:12},children:["+",(Le=(oe=m.trade.target2)==null?void 0:oe.pts)==null?void 0:Le.toFixed(2),"pts"]})]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"STOP"}),e.jsxs("div",{style:{color:"#ff4466",fontSize:c?11:14},children:["$",(P=(Be=m.trade.stop)==null?void 0:Be.price)==null?void 0:P.toFixed(2),e.jsxs("span",{style:{color:"#888",marginLeft:8,fontSize:c?10:12},children:["-",(ke=(ne=m.trade.stop)==null?void 0:ne.pts)==null?void 0:ke.toFixed(2),"pts"]})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("span",{style:{color:"#888",fontSize:c?9:11},children:"R:R"}),e.jsxs("div",{style:{color:"#ffaa00",fontSize:c?16:18,fontWeight:700},children:[m.trade.r_ratio,":1"]})]})]})]}),m.readiness&&e.jsxs("div",{style:{background:Me==="#00ff88"?"rgba(0,255,136,0.1)":Me==="#ffaa00"?"rgba(255,170,0,0.1)":"rgba(255,68,102,0.1)",border:`1px solid ${Me}`,borderRadius:8,padding:c?10:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[e.jsx("span",{style:{color:Me,fontWeight:600,fontSize:c?11:14},children:"SETUP READINESS"}),e.jsxs("span",{style:{color:Me,fontWeight:700,fontSize:c?16:18},children:[m.readiness.overall_score,"%"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:c?3:4,fontSize:c?9:11},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:m.readiness.price_at_zone?"#00ff88":"#666"},children:[e.jsx("span",{children:m.readiness.price_at_zone?"":""}),e.jsx("span",{children:"Price at Zone"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:m.readiness.tpo_confirmation?"#00ff88":"#666"},children:[e.jsx("span",{children:m.readiness.tpo_confirmation?"":""}),e.jsx("span",{children:"2+ TPO"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:m.readiness.session_context?"#00ff88":"#666"},children:[e.jsx("span",{children:m.readiness.session_context?"":""}),e.jsx("span",{children:"Session OK"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:m.readiness.single_print_nearby?"#00ff88":"#666"},children:[e.jsx("span",{children:m.readiness.single_print_nearby?"":""}),e.jsx("span",{children:"Single Print"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:m.readiness.poc_alignment?"#00ff88":"#666"},children:[e.jsx("span",{children:m.readiness.poc_alignment?"":""}),e.jsx("span",{children:"POC Align"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:m.readiness.ib_intact?"#00ff88":"#666"},children:[e.jsx("span",{children:m.readiness.ib_intact?"":""}),e.jsx("span",{children:"IB Intact"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:N.signal==="bullish"?"#00ff88":N.signal==="preparing"?"#ffaa00":N.signal==="bearish"?"#ff4466":"#666"},children:[e.jsx("span",{children:N.signal==="bullish"||N.signal==="preparing"?"":""}),e.jsx("span",{children:N.phase!=="-"?`Phase ${N.phase}`:"Vol Scan"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:N.momentumScore>=60?"#00ff88":N.momentumScore>=40?"#ffaa00":"#ff4466"},children:[e.jsx("span",{children:N.momentumScore>=50?"":""}),e.jsxs("span",{children:["Momentum ",Math.round(N.momentumScore||50)]})]})]}),N.phase!=="-"&&e.jsx("div",{style:{marginTop:8,padding:"6px 8px",background:N.signal==="bullish"?"rgba(0,255,136,0.1)":N.signal==="preparing"?"rgba(255,170,0,0.1)":N.signal==="bearish"?"rgba(255,68,102,0.1)":"rgba(255,255,255,0.05)",borderRadius:6,border:`1px solid ${N.signal==="bullish"?"#00ff8840":N.signal==="preparing"?"#ffaa0040":N.signal==="bearish"?"#ff446640":"#ffffff20"}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:c?9:10,fontWeight:600,color:N.signal==="bullish"?"#00ff88":N.signal==="preparing"?"#ffaa00":N.signal==="bearish"?"#ff4466":"#888"},children:["PHASE ",N.phase,": ",N.description]}),e.jsxs("span",{style:{fontSize:c?8:9,color:"#666",display:"flex",gap:8},children:[e.jsxs("span",{children:[" ",N.deltaTrend==="increasing"?"":N.deltaTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["Vol ",N.volTrend==="increasing"?"":N.volTrend==="decreasing"?"":""]}),e.jsxs("span",{children:["POC ",N.pocMigration==="up"?"":N.pocMigration==="down"?"":""]})]})]})})]})]})},B=({zones:m,buyZones:h,currentPrice:w,compact:Me=!1})=>{const I=[...m||[]].filter(le=>le.price>w).sort((le,Ne)=>Ne.price-le.price),Fe=[...m||[]].filter(le=>le.price<=w).sort((le,Ne)=>Ne.price-le.price),He=new Set((h||[]).map(le=>le.id)),te=le=>le.type==="ib_high"?"#ffaa00":le.type==="ib_low"?"#00ff88":le.type==="poc"?"#9370DB":le.type==="vah"?"#ff6b6b":le.type==="val"?"#4ECDC4":"#888",_e=le=>He.has(le.id)?le.status==="at_zone"?{label:"TRIGGERED",color:"#00ff88",bg:"rgba(0,255,136,0.15)"}:le.status==="approaching"?{label:"APPROACHING",color:"#ffaa00",bg:"rgba(255,170,0,0.15)"}:{label:"VALID",color:"#00aaff",bg:"rgba(0,170,255,0.1)"}:null,v=le=>{const Ne=(h||[]).findIndex(ot=>ot.id===le.id);return Ne>=0?Ne+1:null},he=le=>{var qe;const Ne=_e(le),ot=v(le),_t=le.price>w,Ge=le.price-w,ft=Math.abs(Ge)<=2;return e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"6px 12px",margin:"2px 8px",borderRadius:6,background:ft?"rgba(0,255,136,0.1)":Ne?Ne.bg:"transparent",borderLeft:`3px solid ${te(le)}`,transition:"background 0.2s"},children:[e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[ot&&e.jsxs("span",{style:{background:ot===1?"#00ff88":ot===2?"#ffaa00":"#00aaff",color:"#000",fontSize:9,fontWeight:700,padding:"1px 5px",borderRadius:3},children:["#",ot]}),e.jsx("span",{style:{color:"#fff",fontSize:11,fontWeight:ot?600:400,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:le.name})]}),Ne&&e.jsx("span",{style:{fontSize:9,color:Ne.color,fontWeight:600,letterSpacing:.5},children:Ne.label})]}),e.jsxs("div",{style:{textAlign:"right",flexShrink:0},children:[e.jsx("div",{style:{color:"#fff",fontSize:12,fontFamily:"monospace",fontWeight:ft?700:400},children:(qe=le.price)==null?void 0:qe.toFixed(2)}),e.jsxs("div",{style:{fontSize:10,fontFamily:"monospace",color:_t?"#ff4466":"#00ff88"},children:[_t?"+":"",Ge==null?void 0:Ge.toFixed(1)]})]})]},le.id)};return e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid rgba(255,255,255,0.08)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#888",fontSize:11,letterSpacing:1},children:"PRICE LADDER"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{color:"#ff4466",fontSize:10},children:[I.length," above"]}),e.jsx("span",{style:{color:"#666"},children:"|"}),e.jsxs("span",{style:{color:"#00ff88",fontSize:10},children:[Fe.length," below"]})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"8px 0"},children:[I.map(le=>he(le)),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"10px 12px",margin:"8px",borderRadius:8,background:"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, rgba(0,255,136,0.05) 50%, rgba(0,255,136,0.2) 100%)",border:"1px solid rgba(0,255,136,0.4)",position:"relative"},children:[e.jsxs("div",{style:{position:"absolute",left:12,display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite",boxShadow:"0 0 8px rgba(0,255,136,0.6)"}}),e.jsx("span",{style:{color:"#00ff88",fontSize:10,fontWeight:600},children:"LIVE"})]}),e.jsxs("span",{style:{color:"#00ff88",fontSize:16,fontFamily:"monospace",fontWeight:700,textShadow:"0 0 10px rgba(0,255,136,0.5)"},children:["$",w==null?void 0:w.toFixed(2)]}),e.jsx("span",{style:{position:"absolute",right:12,color:"#888",fontSize:10},children:"CURRENT"})]}),Fe.map(le=>he(le))]}),e.jsxs("div",{style:{padding:"10px 12px",borderTop:"1px solid rgba(255,255,255,0.08)",display:"flex",flexWrap:"wrap",gap:8,fontSize:9},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ffaa00",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB High"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#00ff88",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"IB Low"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#9370DB",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"POC"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#ff6b6b",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAH"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:8,height:8,background:"#4ECDC4",borderRadius:1}}),e.jsx("span",{style:{color:"#666"},children:"VAL"})]})]})]})};return l?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#888"},children:"Loading zones..."}):d||!t?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#ff4466"},children:d||"No zone data available"}):e.jsxs("div",{style:{display:"flex",flexDirection:c?"column":"row",gap:c?12:20,padding:c?12:20,height:c?"auto":"100%",overflow:c?"auto":"hidden",position:"relative"},children:[y&&!c&&e.jsxs("div",{onClick:()=>R(!1),style:{position:"fixed",top:80,right:20,background:"rgba(15, 15, 25, 0.98)",borderRadius:10,border:"1px solid rgba(0, 255, 136, 0.4)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 0 15px rgba(0, 255, 136, 0.15)",zIndex:1e3,cursor:"pointer",transition:"all 0.2s ease",padding:"12px 16px"},title:"Click to show Price Ladder",children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"LIVE PRICE"}),e.jsxs("div",{style:{fontSize:22,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace"},children:["$",((F=t==null?void 0:t.current_price)==null?void 0:F.toFixed(2))||"--"]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:6},children:"Click for ladder "})]}),e.jsxs("div",{style:{flex:c?"none":y?1:2,overflowY:c?"visible":"auto"},children:[e.jsx("div",{style:{display:"flex",flexDirection:c?"column":"row",justifyContent:"space-between",alignItems:c?"flex-start":"center",gap:c?8:0,marginBottom:c?12:16},children:e.jsx("h2",{style:{color:"#fff",margin:0,fontSize:c?16:24},children:c?"10pt Buy Setup":"Zone Participation - 10pt Buy Setup"})}),(()=>{var ot,_t,Ge,ft,qe;const m=(t==null?void 0:t.current_price)||(i==null?void 0:i.current_price)||0;t!=null&&t.all_zones;const h={monthly:{bias:"NEUTRAL",color:"#ffaa00"},weekly:{bias:"NEUTRAL",color:"#ffaa00"},dayOpen:{position:"--",diff:0,color:"#888"},weeklyOpen:{position:"--",diff:0,color:"#888"},daily:{ib:{level:"--",color:"#888"},pvaLocation:{status:"--",detail:"",color:"#888"},opening:{type:"--",color:"#888"}},critical:{abOverlap:{pct:"--",color:"#888"},buyingTail:!1,sellingTail:!1,tpoBias:{direction:"--",color:"#888"}}};if(i){const oe=i.pd_high||0,Le=i.pd_low||0,Be=(oe+Le)/2,P=i.week_high||0,ne=i.week_low||0,ke=i.weekly_open||0,Ae=P-ne;let ze=0,Te=[];if(P>0&&ne>0&&Ae>0){const g=(m-ne)/Ae*100;if(g>=90?(ze+=40,Te.push("Near Week High")):g>=70?(ze+=30,Te.push("Upper Week Range")):g<=10?(ze-=40,Te.push("Near Week Low")):g<=30?(ze-=30,Te.push("Lower Week Range")):Te.push("Mid Week Range"),ke>0){const j=m-ke;j<-Ae*.1?(ze+=35,Te.push("Below Weekly Open")):j>Ae*.1?ze-=25:ze+=10}m>oe?(ze+=25,Te.push("Above pd High")):m>Be?ze+=15:m<Le?(ze-=25,Te.push("Below pd Low")):m<Be&&(ze-=15),ze>=60?h.weekly={bias:"VERY BULLISH",color:"#00ff88",score:ze,factors:Te}:ze>=25?h.weekly={bias:"BULLISH",color:"#88ff88",score:ze,factors:Te}:ze<=-60?h.weekly={bias:"VERY BEARISH",color:"#ff4466",score:ze,factors:Te}:ze<=-25?h.weekly={bias:"BEARISH",color:"#ff8888",score:ze,factors:Te}:h.weekly={bias:"NEUTRAL",color:"#ffaa00",score:ze,factors:Te}}else m>oe?h.weekly={bias:"BULLISH",color:"#88ff88",factors:["Above pd High"]}:m<Le&&(h.weekly={bias:"BEARISH",color:"#ff8888",factors:["Below pd Low"]});const Ze=i.rolling_20d_high||0,Et=i.rolling_20d_low||0,Y=Ze-Et,Ke=(Ze+Et)/2;let rt=0,et=[];if(Ze>0&&Et>0&&Y>0){const g=(m-Et)/Y*100;g>=90?(rt+=50,et.push("Near 20d High")):g>=75?(rt+=35,et.push("Upper 20d Range")):g>=60?rt+=20:g<=10?(rt-=50,et.push("Near 20d Low")):g<=25?(rt-=35,et.push("Lower 20d Range")):g<=40&&(rt-=20),P>0&&ne>0&&(P>=Ze*.998?(rt+=30,et.push("Week at 20d High")):ne<=Et*1.002?(rt-=30,et.push("Week at 20d Low")):P>Ke?rt+=15:ne<Ke&&(rt-=15)),ke>0&&(m>ke&&ke>Et+Y*.4?(rt+=20,et.push("Uptrend confirmed")):m<ke&&ke<Ze-Y*.4&&(rt-=20,et.push("Downtrend confirmed"))),rt>=50?h.monthly={bias:"VERY BULLISH",color:"#00ff88",score:rt,factors:et}:rt>=20?h.monthly={bias:"BULLISH",color:"#88ff88",score:rt,factors:et}:rt<=-50?h.monthly={bias:"VERY BEARISH",color:"#ff4466",score:rt,factors:et}:rt<=-20?h.monthly={bias:"BEARISH",color:"#ff8888",score:rt,factors:et}:h.monthly={bias:"NEUTRAL",color:"#ffaa00",score:rt,factors:et}}else if(P>0&&ne>0){const g=(m-ne)/Ae*100;g>=80?h.monthly={bias:"BULLISH",color:"#88ff88",factors:["Near Week High"]}:g<=20&&(h.monthly={bias:"BEARISH",color:"#ff8888",factors:["Near Week Low"]})}const me=i.day_open||0;if(me>0){const g=m-me;g<-2?h.dayOpen={position:"BELOW",diff:g,price:me,color:"#00ff88",bias:"BULLISH"}:g>2?h.dayOpen={position:"ABOVE",diff:g,price:me,color:"#ff4466",bias:"BEARISH"}:h.dayOpen={position:"AT",diff:g,price:me,color:"#ffaa00",bias:"NEUTRAL"}}if(ke>0){const g=m-ke;g<-5?h.weeklyOpen={position:"BELOW",diff:g,price:ke,color:"#00ff88",bias:"BULLISH"}:g>5?h.weeklyOpen={position:"ABOVE",diff:g,price:ke,color:"#ff4466",bias:"BEARISH"}:h.weeklyOpen={position:"AT",diff:g,price:ke,color:"#ffaa00",bias:"NEUTRAL"}}}if(r){const oe=r.ib_range||0,Le=r.avg_daily_range||50,Be=Le>0?oe/Le*100:0;oe===0||!r.ib_complete?h.daily.ib={level:"FORMING",color:"#888",pct:"--"}:Be<35?h.daily.ib={level:"LOW",color:"#00ff88",pct:Be.toFixed(0)}:Be<=75?h.daily.ib={level:"MEDIUM",color:"#ffaa00",pct:Be.toFixed(0)}:h.daily.ib={level:"HIGH",color:"#ff4466",pct:Be.toFixed(0)}}if(i&&r){const oe=i.pd_high||0,Le=i.pd_low||0,Be=oe-Le,P=Le+Be*.85,ne=Le+Be*.15,ke=i.day_open||m,Ae=i.session_open||ke;if(m>=ne&&m<=P){const ze=Ae>=ne&&Ae<=P;h.daily.pvaLocation={status:"IN",detail:ze?"Accepted":"Returned",color:"#00aaff"}}else if(m>P){const ze=m>P+5;h.daily.pvaLocation={status:"OUT",detail:ze?"Accepted Above":"Testing VAH",color:ze?"#00ff88":"#ffaa00"}}else{const ze=m<ne-5;h.daily.pvaLocation={status:"OUT",detail:ze?"Accepted Below":"Testing VAL",color:ze?"#ff4466":"#ffaa00"}}(Math.abs(m-P)<=3||Math.abs(m-ne)<=3)&&(h.daily.pvaLocation.status="DYNAMIC",h.daily.pvaLocation.color="#ffaa00")}if(r!=null&&r.open_type){const oe=((ot=r.open_type)==null?void 0:ot.toUpperCase())||"DEVELOPING",Le={OD:{name:"OD",full:"Open Drive",color:"#00ff88"},OPEN_DRIVE:{name:"OD",full:"Open Drive",color:"#00ff88"},OTD:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},OPEN_TEST_DRIVE:{name:"OTD",full:"Open Test Drive",color:"#88ff88"},ORR:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OPEN_REJECTION_REVERSE:{name:"ORR",full:"Open Rejection Reverse",color:"#ff8888"},OA:{name:"OA",full:"Open Auction",color:"#ffaa00"},OPEN_AUCTION:{name:"OA",full:"Open Auction",color:"#ffaa00"},DEVELOPING:{name:"DEV",full:"Developing",color:"#888"}},Be=Le[oe]||Le.DEVELOPING;h.daily.opening={type:Be.name,full:Be.full,color:Be.color}}if((r==null?void 0:r.ab_overlap)!==void 0&&(r==null?void 0:r.ab_overlap)!==null){const oe=r.ab_overlap;oe<33?h.critical.abOverlap={pct:oe.toFixed(0),color:"#00ff88",level:"<33%"}:oe<=50?h.critical.abOverlap={pct:oe.toFixed(0),color:"#ffaa00",level:"33-50%"}:h.critical.abOverlap={pct:oe.toFixed(0),color:"#ff4466",level:">50%"}}if(r){const oe=r.single_prints_count||0,Le=(i==null?void 0:i.day_high)||0,Be=(i==null?void 0:i.day_low)||0,P=r.poc||m;oe>0&&(P>(Le+Be)/2?h.critical.buyingTail=!0:h.critical.sellingTail=!0)}if(r){const oe=r.poc||0,Le=r.vah||0,Be=r.val||0,P=(Le+Be)/2;oe>P+2?h.critical.tpoBias={direction:"BULLISH",color:"#00ff88"}:oe<P-2?h.critical.tpoBias={direction:"BEARISH",color:"#ff4466"}:h.critical.tpoBias={direction:"NEUTRAL",color:"#ffaa00"}}const w={rank1:{name:"MACRO",points:3,factors:[],total:0,direction:"NEUTRAL"},rank2:{name:"VOLUME",points:2,factors:[],total:0,direction:"NEUTRAL"},rank3:{name:"STRUCTURE",points:2,factors:[],total:0,direction:"NEUTRAL"},rank4:{name:"TIMING",points:1,factors:[],total:0,direction:"NEUTRAL"},conflicts:[],totalScore:0,confidence:"LOW",positionSize:"25%",direction:"NEUTRAL"};if(i){const oe=i.week_high||0,Le=i.week_low||0,Be=oe-Le;if(Be>0){const P=Le+Be*.7,ne=Le+Be*.3;m>P?(w.rank1.factors.push({name:"Weekly VA",signal:"LONG",reason:"Price above weekly VAH",pts:3}),w.rank1.total+=3):m<ne?(w.rank1.factors.push({name:"Weekly VA",signal:"SHORT",reason:"Price below weekly VAL",pts:-3}),w.rank1.total-=3):w.rank1.factors.push({name:"Weekly VA",signal:"NEUTRAL",reason:"Price inside weekly VA",pts:0})}}if(i){const oe=i.rolling_20d_high||0,Le=i.rolling_20d_low||0,Be=oe-Le;if(Be>0){const P=Le+Be*.75,ne=Le+Be*.25;m>P?(w.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"LONG",reason:"At multi-day highs (breakout zone)",pts:3}),w.rank1.total+=3):m<ne?(w.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"SHORT",reason:"At multi-day lows (breakdown zone)",pts:-3}),w.rank1.total-=3):w.rank1.factors.push({name:"Multi-day HVN/LVN",signal:"NEUTRAL",reason:"Mid-range (fair value)",pts:0})}}if((i==null?void 0:i.weekly_open)>0){const oe=i.weekly_open,Le=m-oe;Le>10?(w.rank1.factors.push({name:"Composite VPOC",signal:"LONG",reason:`+${Le.toFixed(0)}pts above weekly open`,pts:3}),w.rank1.total+=3):Le<-10?(w.rank1.factors.push({name:"Composite VPOC",signal:"SHORT",reason:`${Le.toFixed(0)}pts below weekly open`,pts:-3}),w.rank1.total-=3):w.rank1.factors.push({name:"Composite VPOC",signal:"NEUTRAL",reason:"Near weekly open",pts:0})}if(w.rank1.direction=w.rank1.total>0?"LONG":w.rank1.total<0?"SHORT":"NEUTRAL",i){const oe=i.day_open||0,Le=i.day_high||0,Be=i.day_low||0;if(oe>0){const P=Le-oe,ne=oe-Be;P>ne*1.5?(w.rank2.factors.push({name:"Delta Direction",signal:"LONG",reason:"Buyers dominating (up move > down)",pts:2}),w.rank2.total+=2):ne>P*1.5?(w.rank2.factors.push({name:"Delta Direction",signal:"SHORT",reason:"Sellers dominating (down move > up)",pts:-2}),w.rank2.total-=2):w.rank2.factors.push({name:"Delta Direction",signal:"NEUTRAL",reason:"Balanced volume",pts:0})}}if(r){const oe=r.poc||0,Le=r.vah||0,Be=r.val||0;if(oe>0&&Le>0&&Be>0){const P=Le-Be,ne=(oe-Be)/P;ne>.65?(w.rank2.factors.push({name:"Daily HVN",signal:"LONG",reason:"POC in upper VA (HVN above)",pts:2}),w.rank2.total+=2):ne<.35?(w.rank2.factors.push({name:"Daily HVN",signal:"SHORT",reason:"POC in lower VA (HVN below)",pts:-2}),w.rank2.total-=2):w.rank2.factors.push({name:"Daily HVN",signal:"NEUTRAL",reason:"POC centered",pts:0})}}if(r!=null&&r.vpoc&&(r!=null&&r.poc)){const oe=r.vpoc,Le=r.poc;if(Math.abs(oe-Le)<3){const P=oe>m;w.rank2.factors.push({name:"VPOC/POC Align",signal:P?"SHORT":"LONG",reason:`VPOC & POC aligned at ${oe.toFixed(0)} (strong ${P?"resistance":"support"})`,pts:P?-2:2}),w.rank2.total+=P?-2:2}else r.vpoc>r.poc?(w.rank2.factors.push({name:"VPOC/POC Align",signal:"LONG",reason:"VPOC above POC (volume leads up)",pts:2}),w.rank2.total+=2):(w.rank2.factors.push({name:"VPOC/POC Align",signal:"SHORT",reason:"VPOC below POC (volume leads down)",pts:-2}),w.rank2.total-=2)}else if(r!=null&&r.poc){const oe=r.poc>m?"SHORT":"LONG";w.rank2.factors.push({name:"POC Location",signal:oe,reason:`POC at ${(_t=r.poc)==null?void 0:_t.toFixed(0)} (${oe==="LONG"?"support":"resistance"})`,pts:oe==="LONG"?1:-1}),w.rank2.total+=oe==="LONG"?1:-1}if(w.rank2.direction=w.rank2.total>0?"LONG":w.rank2.total<0?"SHORT":"NEUTRAL",r&&(r.single_prints_count||0)>0&&(h.critical.buyingTail&&(w.rank3.factors.push({name:"Buying Tail",signal:"LONG",reason:"Single prints at lows (buyer aggression)",pts:2}),w.rank3.total+=2),h.critical.sellingTail&&(w.rank3.factors.push({name:"Selling Tail",signal:"SHORT",reason:"Single prints at highs (seller aggression)",pts:-2}),w.rank3.total-=2)),r){const oe=r.poc||0,Le=r.vah||0,Be=r.val||0,P=(i==null?void 0:i.day_high)||Le,ne=(i==null?void 0:i.day_low)||Be,ke=P-ne;if(ke>0){const Ae=P-Le,ze=Be-ne,Te=Le-Be,Ze=(oe-ne)/ke;let Et="D",Y="NEUTRAL",Ke="Balanced D-shape profile",rt=0;Ze<.4&&Ae>Te*.3?(Et="P",Y="LONG",Ke="P-shape (accumulation, buyers loading)",rt=2):Ze>.6&&ze>Te*.3?(Et="b",Y="SHORT",Ke="b-shape (distribution, sellers unloading)",rt=-2):r.double_distribution&&(Et="B",Y="NEUTRAL",Ke="B-shape (double distribution, range bound)",rt=0),w.rank3.factors.push({name:`Profile Shape (${Et})`,signal:Y,reason:Ke,pts:rt}),w.rank3.total+=rt}}if(r&&i){const oe=r.ib_high||0,Le=r.ib_low||0,Be=i.day_high||0,P=i.day_low||0;if(oe>0&&Le>0){const ne=Be>oe+2,ke=P<Le-2;ne&&!ke?(w.rank3.factors.push({name:"Range Extension",signal:"LONG",reason:"IB broken to upside",pts:2}),w.rank3.total+=2):ke&&!ne?(w.rank3.factors.push({name:"Range Extension",signal:"SHORT",reason:"IB broken to downside",pts:-2}),w.rank3.total-=2):ne&&ke?w.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"IB broken both ways",pts:0}):w.rank3.factors.push({name:"Range Extension",signal:"NEUTRAL",reason:"Inside IB",pts:0})}}if(w.rank3.direction=w.rank3.total>0?"LONG":w.rank3.total<0?"SHORT":"NEUTRAL",r!=null&&r.open_type){const oe=((Ge=r.open_type)==null?void 0:Ge.toUpperCase())||"",Le=r.open_direction||"";if(oe.includes("OD")||oe.includes("DRIVE")){const Be=Le==="up"?1:Le==="down"?-1:0;w.rank4.factors.push({name:"Open Type",signal:Be>0?"LONG":Be<0?"SHORT":"NEUTRAL",reason:`Open Drive ${Le||""}`,pts:Be}),w.rank4.total+=Be}else if(oe.includes("ORR")||oe.includes("REJECTION")){const Be=Le==="up"?-1:Le==="down"?1:0;w.rank4.factors.push({name:"Open Type",signal:Be>0?"LONG":Be<0?"SHORT":"NEUTRAL",reason:"Open Rejection Reverse",pts:Be}),w.rank4.total+=Be}else if(oe.includes("OTD")||oe.includes("TEST")){const Be=Le==="up"?1:Le==="down"?-1:0;w.rank4.factors.push({name:"Open Type",signal:Be>0?"LONG":Be<0?"SHORT":"NEUTRAL",reason:`Open Test Drive ${Le||""}`,pts:Be*.5}),w.rank4.total+=Be*.5}}if(h.daily.ib.level!=="--"&&h.daily.ib.level!=="FORMING")if(h.daily.ib.level==="LOW"){const oe=w.rank3.direction!=="NEUTRAL"?w.rank3.direction:w.rank2.direction!=="NEUTRAL"?w.rank2.direction:"NEUTRAL";oe==="LONG"?(w.rank4.factors.push({name:"IB Width",signal:"LONG",reason:"Low IB + uptrend = expansion up",pts:1}),w.rank4.total+=1):oe==="SHORT"?(w.rank4.factors.push({name:"IB Width",signal:"SHORT",reason:"Low IB + downtrend = expansion down",pts:-1}),w.rank4.total-=1):w.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"Low IB (breakout pending)",pts:0})}else h.daily.ib.level==="HIGH"&&w.rank4.factors.push({name:"IB Width",signal:"NEUTRAL",reason:"High IB (rotational day)",pts:0});if((r==null?void 0:r.single_prints_count)>0){const oe=r.single_print_level||0;oe>m+5?(w.rank4.factors.push({name:"Single Prints",signal:"LONG",reason:`Singles above at ${oe.toFixed(0)} (target)`,pts:1}),w.rank4.total+=1):oe<m-5&&(w.rank4.factors.push({name:"Single Prints",signal:"SHORT",reason:`Singles below at ${oe.toFixed(0)} (target)`,pts:-1}),w.rank4.total-=1)}w.rank4.direction=w.rank4.total>0?"LONG":w.rank4.total<0?"SHORT":"NEUTRAL";const Me=[{rank:1,name:"MACRO",dir:w.rank1.direction,total:w.rank1.total},{rank:2,name:"VOLUME",dir:w.rank2.direction,total:w.rank2.total},{rank:3,name:"STRUCTURE",dir:w.rank3.direction,total:w.rank3.total},{rank:4,name:"TIMING",dir:w.rank4.direction,total:w.rank4.total}].filter(oe=>oe.dir!=="NEUTRAL");for(let oe=0;oe<Me.length;oe++)for(let Le=oe+1;Le<Me.length;Le++)Me[oe].dir!==Me[Le].dir&&w.conflicts.push({higher:Me[oe],lower:Me[Le],resolution:`${Me[oe].name} (Rank ${Me[oe].rank}) overrides ${Me[Le].name}`});w.totalScore=w.rank1.total+w.rank2.total+w.rank3.total+w.rank4.total;const I=Math.abs(w.totalScore);I>=12?(w.confidence="VERY HIGH",w.positionSize="100%+",w.confidenceColor="#00ff88"):I>=8?(w.confidence="HIGH",w.positionSize="100%",w.confidenceColor="#88ff88"):I>=5?(w.confidence="MED-HIGH",w.positionSize="75%",w.confidenceColor="#ffdd00"):I>=2?(w.confidence="MEDIUM",w.positionSize="50%",w.confidenceColor="#ffaa00"):I>=0?(w.confidence="LOW",w.positionSize="25% or SKIP",w.confidenceColor="#ff8844"):(w.confidence="AVOID",w.positionSize="NO TRADE",w.confidenceColor="#ff4466"),w.direction=w.totalScore>0?"LONG":w.totalScore<0?"SHORT":"NEUTRAL";let Fe=0,He=0;if(h.monthly.bias.includes("BULLISH")&&(Fe+=h.monthly.bias.includes("VERY")?15:10),h.monthly.bias.includes("BEARISH")&&(He+=h.monthly.bias.includes("VERY")?15:10),h.weekly.bias.includes("BULLISH")&&(Fe+=h.weekly.bias.includes("VERY")?15:10),h.weekly.bias.includes("BEARISH")&&(He+=h.weekly.bias.includes("VERY")?15:10),h.dayOpen.bias==="BULLISH"&&(Fe+=10),h.dayOpen.bias==="BEARISH"&&(He+=10),h.weeklyOpen.bias==="BULLISH"&&(Fe+=12),h.weeklyOpen.bias==="BEARISH"&&(He+=12),h.daily.ib.level==="LOW"&&(Fe+=8),h.daily.ib.level==="HIGH"&&(He+=5),(ft=h.daily.pvaLocation.detail)!=null&&ft.includes("Above")&&(Fe+=10),(qe=h.daily.pvaLocation.detail)!=null&&qe.includes("Below")&&(He+=10),h.daily.pvaLocation.status==="IN"&&(Fe+=3,He+=3),h.daily.opening.type==="OD"){const oe=r==null?void 0:r.open_direction;oe==="up"?Fe+=12:oe==="down"&&(He+=12)}if(h.daily.opening.type==="ORR"){const oe=r==null?void 0:r.open_direction;oe==="up"?He+=8:oe==="down"&&(Fe+=8)}if(h.critical.abOverlap.pct!=="--"){const oe=parseFloat(h.critical.abOverlap.pct);oe<33&&(Fe+=5),oe>50&&(He+=3)}h.critical.buyingTail&&(Fe+=8),h.critical.sellingTail&&(He+=8),h.critical.tpoBias.direction==="BULLISH"&&(Fe+=7),h.critical.tpoBias.direction==="BEARISH"&&(He+=7);const te=Fe+He,_e=te>0?Math.round(Fe/te*100):50,v=100-_e;let he="NEUTRAL",le="#ffaa00",Ne=50;return _e>=65?(he=_e>=80?"VERY BULLISH":"BULLISH",le=_e>=80?"#00ff88":"#88ff88",Ne=_e):v>=65?(he=v>=80?"VERY BEARISH":"BEARISH",le=v>=80?"#ff4466":"#ff8888",Ne=v):Ne=Math.max(_e,v),e.jsxs("div",{style:{background:"rgba(20,20,28,0.95)",borderRadius:c?10:12,border:`2px solid ${le}40`,padding:c?12:16,marginBottom:c?12:16},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingBottom:12,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#888",letterSpacing:1,marginBottom:4},children:"SIGNAL ENGINE"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:c?18:22,fontWeight:700,color:le},children:he}),e.jsxs("span",{style:{fontSize:12,padding:"3px 8px",background:`${le}25`,borderRadius:4,color:le,fontWeight:600},children:[Ne,"%"]})]})]})}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden",marginBottom:16},children:[e.jsxs("div",{onClick:()=>f(!De),style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:c?12:16,cursor:"pointer",background:`linear-gradient(135deg, ${w.confidenceColor}12 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:De?`1px solid ${w.confidenceColor}30`:"none",transition:"all 0.2s ease"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO HTF ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:c?20:26,fontWeight:800,color:w.direction==="LONG"?"#00ff88":w.direction==="SHORT"?"#ff4466":"#ffaa00",fontFamily:"monospace"},children:[w.totalScore>0?"+":"",w.totalScore]}),e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:w.direction==="LONG"?"#00ff88":w.direction==="SHORT"?"#ff4466":"#ffaa00"},children:w.direction})]})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:11,fontWeight:700,color:w.confidenceColor,marginBottom:2},children:w.confidence}),e.jsxs("div",{style:{fontSize:10,padding:"3px 8px",background:`${w.confidenceColor}25`,borderRadius:4,color:w.confidenceColor,fontWeight:600},children:["Size: ",w.positionSize]})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:De?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]})]}),De&&e.jsxs("div",{style:{padding:c?12:16},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:c?"1fr 1fr":"1fr 1fr 1fr 1fr",gap:8,marginBottom:12},children:[w.rank1,w.rank2,w.rank3,w.rank4].map((oe,Le)=>{var ke,Ae;const Be=Le+1,P=oe.direction==="LONG"?"#00ff88":oe.direction==="SHORT"?"#ff4466":"#666",ne=Math.min(100,Math.abs(oe.total)*(Be===1?15:Be<=3?20:30));return e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:"8px 10px",borderLeft:`3px solid ${P}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[e.jsxs("span",{style:{fontSize:8,color:"#888",letterSpacing:.5},children:["R",Be," ",oe.name]}),e.jsxs("span",{style:{fontSize:12,fontWeight:700,color:P,fontFamily:"monospace"},children:[oe.total>0?"+":"",oe.total]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{height:"100%",width:`${ne}%`,background:P,borderRadius:2}})}),oe.factors.length>0&&e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(ke=oe.factors[0])==null?void 0:ke.name,": ",(Ae=oe.factors[0])==null?void 0:Ae.signal]})]},oe.name)})}),w.conflicts.length>0&&e.jsxs("details",{style:{padding:"8px 10px",background:"rgba(255,170,0,0.15)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:[e.jsxs("summary",{style:{cursor:"pointer",userSelect:"none",listStyle:"none"},children:[e.jsx("span",{style:{fontWeight:600},children:"Conflict: "}),w.conflicts[0].resolution,w.conflicts.length>1&&e.jsxs("span",{style:{marginLeft:8,opacity:.8},children:["(+",w.conflicts.length-1," more) "]})]}),w.conflicts.length>1&&e.jsx("div",{style:{marginTop:8,paddingTop:8,borderTop:"1px solid rgba(255,170,0,0.3)"},children:w.conflicts.slice(1).map((oe,Le)=>e.jsxs("div",{style:{marginBottom:4,paddingLeft:8},children:[" ",oe.resolution]},Le))})]})]})]}),(()=>{var g,j,K,$;const oe=(G,Z,ge)=>Math.min(Math.max(G,Z),ge),Le=new Date,Be=new Date(Le.toLocaleString("en-US",{timeZone:"America/New_York"})),P=Be.getHours(),ne=Be.getMinutes(),Ae=P*100+ne<820,ze=G=>G>=75?{score:4,label:"EXTREMELY BULLISH",color:"#00ff88"}:G>=50?{score:3,label:"VERY BULLISH",color:"#88ff88"}:G>=25?{score:1,label:"CHECK ENTRY",color:"#ffaa00"}:{score:0,label:"WAIT",color:"#ff4466"},Te=(i==null?void 0:i.day_high)||0,Ze=(i==null?void 0:i.day_low)||0,Et=Te-Ze,Y=Ae?m:(r==null?void 0:r.ib_open)||(i==null?void 0:i.day_open)||m,Ke=Et>0?oe((Te-Y)/Et*100,0,100):50,rt=ze(Ke),et=rt.label,me=rt.color;return`${rt.score}`,e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3,background:"rgba(20,20,28,0.6)",borderRadius:12,padding:12,border:"1px solid rgba(255,255,255,0.08)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${h.monthly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${h.monthly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"MONTHLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.monthly.color,padding:"5px 10px",background:`${h.monthly.color}20`,borderRadius:5,display:"inline-block"},children:h.monthly.bias}),h.monthly.factors&&h.monthly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:h.monthly.factors[0]})]}),e.jsxs("div",{style:{background:`linear-gradient(135deg, ${h.weekly.color}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${h.weekly.color}30`,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:6},children:"WEEKLY"}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.weekly.color,padding:"5px 10px",background:`${h.weekly.color}20`,borderRadius:5,display:"inline-block"},children:h.weekly.bias}),h.weekly.factors&&h.weekly.factors.length>0&&e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:h.weekly.factors[0]})]}),e.jsxs("div",{onClick:()=>x(!C),style:{background:`linear-gradient(135deg, ${me}15 0%, rgba(0,0,0,0.4) 100%)`,borderRadius:8,padding:12,border:`1px solid ${C?me:me+"30"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:4,marginBottom:6},children:[e.jsx("span",{style:{fontSize:9,color:"#888",letterSpacing:1},children:"TPO DAILY"}),e.jsx("span",{style:{fontSize:9,color:"#666",transform:C?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:12,fontWeight:700,color:h.critical.tpoBias.color||me,padding:"5px 10px",background:`${me}20`,borderRadius:5,display:"inline-block"},children:h.critical.tpoBias.direction||"NEUTRAL"}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:5},children:"IB, PVA, Opening"})]})]})}),e.jsxs("div",{onClick:()=>Q(!O),style:{flex:1,background:"linear-gradient(135deg, rgba(0,170,255,0.15) 0%, rgba(0,0,0,0.4) 100%)",borderRadius:12,padding:16,border:`1px solid ${O?"#00aaff":"rgba(0,170,255,0.3)"}`,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,marginBottom:8},children:[e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1},children:"INTRADAY"}),e.jsx("span",{style:{fontSize:12,color:"#666",transform:O?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff",padding:"6px 14px",background:"rgba(0,170,255,0.2)",borderRadius:6,marginBottom:8},children:et}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:[Ke.toFixed(0),"% from high"]})]})]}),(C||O)&&e.jsxs("div",{style:{display:"flex",gap:12,marginBottom:12},children:[e.jsx("div",{style:{flex:3},children:C&&e.jsxs("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(0,170,255,0.3)",padding:12},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:h.dayOpen.bias!=="NEUTRAL"?`1px solid ${h.dayOpen.color}40`:"none"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"DAY OPEN (18:00 ET)"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.dayOpen.color},children:h.dayOpen.position}),h.dayOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(g=h.dayOpen.price)==null?void 0:g.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:h.dayOpen.color},children:["(",h.dayOpen.diff>0?"+":"",(j=h.dayOpen.diff)==null?void 0:j.toFixed(1),"pts)"]})]})]}),h.dayOpen.bias&&h.dayOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:h.dayOpen.color,marginTop:4},children:h.dayOpen.bias==="BULLISH"?"Buying below open":"Selling above open"})]}),e.jsxs("div",{style:{background:h.weeklyOpen.position==="--"?"rgba(50,50,60,0.5)":"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",border:h.weeklyOpen.bias&&h.weeklyOpen.bias!=="NEUTRAL"?`1px solid ${h.weeklyOpen.color}40`:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"WEEKLY OPEN (Sun 18:00)"}),h.weeklyOpen.position==="--"?e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:c?13:14,fontWeight:600,color:"#666"},children:"N/A"}),e.jsx("div",{style:{fontSize:9,color:"#555",marginTop:4},children:"Not tracked yet - sets on Sunday 18:00 ET"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.weeklyOpen.color},children:h.weeklyOpen.position}),h.weeklyOpen.price>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{style:{fontSize:11,color:"#666",fontFamily:"monospace"},children:["$",(K=h.weeklyOpen.price)==null?void 0:K.toFixed(2)]}),e.jsxs("span",{style:{fontSize:10,color:h.weeklyOpen.color},children:["(",h.weeklyOpen.diff>0?"+":"",($=h.weeklyOpen.diff)==null?void 0:$.toFixed(1),"pts)"]})]})]}),h.weeklyOpen.bias&&h.weeklyOpen.bias!=="NEUTRAL"&&e.jsx("div",{style:{fontSize:9,color:h.weeklyOpen.color,marginTop:4},children:h.weeklyOpen.bias==="BULLISH"?"Buying below weekly open":"Selling above weekly open"})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:c?"1fr 1fr":"1fr 1fr 1fr",gap:12,marginBottom:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"INITIAL BALANCE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:6},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.daily.ib.color},children:h.daily.ib.level}),h.daily.ib.pct!=="--"&&e.jsxs("span",{style:{fontSize:11,color:"#666"},children:[h.daily.ib.pct,"%"]})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"LOCATION wrt PVA"}),e.jsxs("div",{children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.daily.pvaLocation.color},children:h.daily.pvaLocation.status}),h.daily.pvaLocation.detail&&e.jsx("div",{style:{fontSize:10,color:"#888",marginTop:2},children:h.daily.pvaLocation.detail})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px",gridColumn:c?"1 / -1":"auto"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"OPENING TYPE"}),e.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:8},children:[e.jsx("span",{style:{fontSize:c?14:16,fontWeight:700,color:h.daily.opening.color},children:h.daily.opening.type}),h.daily.opening.full&&e.jsx("span",{style:{fontSize:10,color:"#666"},children:h.daily.opening.full})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:12},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"AB OVERLAP"}),e.jsx("div",{style:{fontSize:c?14:16,fontWeight:700,color:h.critical.abOverlap.color},children:h.critical.abOverlap.pct!=="--"?`${h.critical.abOverlap.pct}%`:"--"})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TAIL/EXCESS"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:h.critical.buyingTail?"#00ff8830":"rgba(255,255,255,0.05)",color:h.critical.buyingTail?"#00ff88":"#555"},children:"BUY"}),e.jsx("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:4,background:h.critical.sellingTail?"#ff446630":"rgba(255,255,255,0.05)",color:h.critical.sellingTail?"#ff4466":"#555"},children:"SELL"})]})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:9,color:"#888",letterSpacing:1,marginBottom:4},children:"TPO BIAS"}),e.jsx("div",{style:{fontSize:c?14:16,fontWeight:700,color:h.critical.tpoBias.color},children:h.critical.tpoBias.direction})]})]})]})}),e.jsx("div",{style:{flex:1},children:O&&(()=>{const G=new Date,Z=new Date(G.toLocaleString("en-US",{timeZone:"America/New_York"})),ge=Z.getHours(),X=Z.getMinutes(),Ie=ge*100+X,st=820,at=930,ut=Ie<st,zt=Ie>=st&&Ie<at,an=Ie>=at,mt=(i==null?void 0:i.current_price)||(t==null?void 0:t.current_price)||0;i!=null&&i.day_high,i!=null&&i.day_low,i!=null&&i.day_open;const qt=(r==null?void 0:r.ib_high)||0,dn=(r==null?void 0:r.ib_low)||0,rn=(r==null?void 0:r.ib_range)||qt-dn||0,un=(r==null?void 0:r.ib_complete)||an,Sn=(r==null?void 0:r.vwap)||(i==null?void 0:i.vwap)||0,In=Sn>0?mt-Sn:0,Mn=In>=0,Un=(r==null?void 0:r.rth_vwap)||(i==null?void 0:i.rth_vwap)||0,wn=Un>0?mt-Un:0,yn=wn>=0,Ji=(i==null?void 0:i.endedSessions)||(i==null?void 0:i.ended_sessions)||{};let di=0,Zn=999999;["pre_asia","asia_open","asia_close","low_volume","london","pre_us"].forEach(Gn=>{const kn=Ji[Gn];(kn==null?void 0:kn.high)>0&&(di=Math.max(di,kn.high)),(kn==null?void 0:kn.low)>0&&(kn==null?void 0:kn.low)<999999&&(Zn=Math.min(Zn,kn.low))}),Zn===999999&&(Zn=0);const En=di||(i==null?void 0:i.overnight_high)||0,qn=Zn||(i==null?void 0:i.overnight_low)||0,ei=En>0&&qn>0?En-qn:0;i!=null&&i.us_ib_vwap;const Ti=mt>En;let mi=50,ci=0;ei>0&&(mi=(En-mt)/ei*100,ci=En-mt);const bi=En-mt,vi=mt-qn,Ri=ei>0,Ni=mt>qt;let ti=0,ni=0;const zi=un&&rn>0&&qt>0&&dn>0;zi&&mt>0&&(ti=qt-mt,ni=mt-dn);const Di=(Gn=>Gn<=20?{label:"V.BULLISH",color:"#00ff88"}:Gn<=40?{label:"BULLISH",color:"#88ff88"}:Gn>=80?{label:"V.BEARISH",color:"#ff4466"}:Gn>=60?{label:"BEARISH",color:"#ff8888"}:{label:"NEUTRAL",color:"#ffaa00"})(mi),Hi=Z.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(59,130,246,0.08) 0%, rgba(245,158,11,0.08) 100%)",borderRadius:10,border:`1px solid ${me}`,padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,paddingBottom:8,borderBottom:"1px solid rgba(255,255,255,0.08)"},children:[e.jsx("div",{style:{fontSize:10,fontWeight:700,color:"#fff",letterSpacing:1},children:"DAY BIAS ANALYSIS"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("span",{style:{fontSize:9,color:"#888",fontFamily:"monospace"},children:[Hi," ET"]}),e.jsx("span",{style:{fontSize:8,padding:"3px 8px",borderRadius:4,background:ut?"rgba(255,170,0,0.2)":zt?"rgba(0,170,255,0.2)":"rgba(0,255,136,0.2)",color:ut?"#ffaa00":zt?"#00aaff":"#00ff88",fontWeight:600},children:ut?"OVERNIGHT":zt?"IB FORMING":"RTH"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(59,130,246,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(59,130,246,0.2)"},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#3B82F6",marginBottom:8},children:["A. O/N  8:20 ",ut&&e.jsx("span",{style:{color:"#ffaa00",fontWeight:400},children:"(building)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"O/N RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#3B82F6"},children:ei>0?ei.toFixed(1):"--"}),e.jsx("div",{style:{fontSize:7,color:"#555"},children:En>0&&qn>0?`${qn.toFixed(1)}-${En.toFixed(1)}`:""})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"% FROM HIGH"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:Ti?"#00ff88":Di.color},children:Ri?Ti?"ABOVE":`${Math.max(0,mi).toFixed(0)}%`:"--"}),e.jsx("div",{style:{fontSize:10,fontWeight:600,color:ci>=0?"#ff4466":"#00ff88"},children:Ri?`${ci>=0?"-":"+"}${Math.abs(ci).toFixed(1)} pts`:""})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"VWAP"}),Sn>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:Mn?"#ff4466":"#00ff88"},children:[Mn?"+":"-",Math.abs(In).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:Mn?"#ff4466":"#00ff88"},children:Mn?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:bi>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:bi>=0?"#00ff88":"#00aaff"},children:[bi>=0?"+":"",bi.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:vi>=0?"DOWNSIDE":"EXT LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:vi>=0?"#ff4466":"#00aaff"},children:[vi>=0?"-":"+",Math.abs(vi).toFixed(0)]})]})]})]}),e.jsxs("div",{style:{background:an?"rgba(245,158,11,0.1)":"rgba(255,255,255,0.03)",borderRadius:8,padding:12,border:`1px solid ${an?"rgba(245,158,11,0.2)":"rgba(255,255,255,0.08)"}`},children:[e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:an?"#F59E0B":"#666",marginBottom:8},children:["B. IB  9:30 ",ut&&e.jsx("span",{style:{color:"#666",fontWeight:400},children:"(waiting)"}),zt&&e.jsx("span",{style:{color:"#00aaff",fontWeight:400},children:"(forming)"})]}),an&&zi?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginBottom:10},children:[e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#F59E0B"},children:rn.toFixed(0)})]}),e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"FROM IB HIGH"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:Ni?"#00ff88":"#ff4466"},children:[Ni?"+":"",(mt-qt).toFixed(0)," pts"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},children:[e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:"RTH VWAP"}),Un>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:yn?"#ff4466":"#00ff88"},children:[yn?"+":"-",Math.abs(wn).toFixed(0)," pts"]}),e.jsx("div",{style:{fontSize:8,color:yn?"#ff4466":"#00ff88"},children:yn?"ABOVE":"BELOW"})]}):e.jsx("div",{style:{fontSize:11,color:"#666"},children:"--"})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:ti>=0?"UPSIDE":"EXT HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:ti>=0?"#00ff88":"#00aaff"},children:[ti>=0?"+":"",ti.toFixed(0)]})]}),e.jsxs("div",{style:{textAlign:"center",background:"rgba(0,0,0,0.2)",borderRadius:4,padding:6},children:[e.jsx("div",{style:{fontSize:7,color:"#666"},children:ni>=0?"EXT LOW":"DOWNSIDE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:ni>=0?"#ff4466":"#00aaff"},children:[ni>=0?"-":"+",Math.abs(ni).toFixed(0)]})]})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:100,color:"#555"},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8,opacity:.5},children:ut?"":""}),e.jsx("div",{style:{fontSize:11},children:ut?"Starts 8:20 ET":`IB: ${rn.toFixed(0)} pts`})]})]})]})]})})()})]}),e.jsxs("div",{style:{marginBottom:12,marginTop:12,background:"rgba(0,0,0,0.2)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("div",{onClick:()=>D(!u),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:`linear-gradient(135deg, ${le}15 0%, rgba(0,0,0,0.3) 100%)`,borderBottom:u?"1px solid rgba(255,255,255,0.08)":"none",transition:"all 0.2s ease"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("span",{style:{fontSize:11,fontWeight:600,color:le,letterSpacing:"0.1em"},children:"NON-DISCRETIONARY ANALYSIS"}),!u&&e.jsx("span",{style:{fontSize:10,color:"#666",fontStyle:"italic"},children:"(Detailed reasoning for bias)"})]}),e.jsx("span",{style:{fontSize:16,color:"#666",transform:u?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:""})]}),u&&e.jsx("div",{style:{padding:"14px 16px",background:`linear-gradient(135deg, ${le}08 0%, transparent 50%)`},children:e.jsx("div",{style:{fontSize:c?12:13,color:"#bbb",lineHeight:1.85},children:(()=>{var X,Ie,st;const G=[];if(h.monthly.bias!=="NEUTRAL"||h.weekly.bias!=="NEUTRAL"){if(h.weekly.bias!=="NEUTRAL"){const at=((X=h.weekly.factors)==null?void 0:X.length)>0?` (${h.weekly.factors.slice(0,2).join(", ")})`:"";G.push(`Weekly bias is <span style="color:${h.weekly.color};font-weight:600">${h.weekly.bias}</span>${at} based on week range, weekly open, and prior day position.`)}if(h.monthly.bias!=="NEUTRAL"){const at=((Ie=h.monthly.factors)==null?void 0:Ie.length)>0?` (${h.monthly.factors.slice(0,2).join(", ")})`:"";G.push(`Monthly bias is <span style="color:${h.monthly.color};font-weight:600">${h.monthly.bias}</span>${at} based on rolling 20-day range analysis.`)}}if(h.dayOpen.price>0&&h.dayOpen.bias!=="NEUTRAL"&&(h.dayOpen.bias==="BULLISH"?G.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(h.dayOpen.diff).toFixed(1)}pts BELOW</span> Day Open ($${h.dayOpen.price.toFixed(2)}) - buying below the open adds bullish confidence.`):G.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(h.dayOpen.diff).toFixed(1)}pts ABOVE</span> Day Open ($${h.dayOpen.price.toFixed(2)}) - selling above the open adds bearish confidence.`)),h.weeklyOpen.price>0&&h.weeklyOpen.bias!=="NEUTRAL"&&(h.weeklyOpen.bias==="BULLISH"?G.push(`Price is <span style="color:#00ff88;font-weight:600">${Math.abs(h.weeklyOpen.diff).toFixed(1)}pts BELOW</span> Weekly Open ($${h.weeklyOpen.price.toFixed(2)}) - buying below weekly open is a key bullish signal.`):G.push(`Price is <span style="color:#ff4466;font-weight:600">${Math.abs(h.weeklyOpen.diff).toFixed(1)}pts ABOVE</span> Weekly Open ($${h.weeklyOpen.price.toFixed(2)}) - selling above weekly open is a key bearish signal.`)),h.daily.ib.level!=="--"&&h.daily.ib.level!=="FORMING"){const at={LOW:`Initial Balance is <span style="color:#00ff88;font-weight:600">LOW</span> (${h.daily.ib.pct}% of ADR) - expect range extension and directional move.`,MEDIUM:`Initial Balance is <span style="color:#ffaa00;font-weight:600">MEDIUM</span> (${h.daily.ib.pct}% of ADR) - balanced day possible, watch for breakout.`,HIGH:`Initial Balance is <span style="color:#ff4466;font-weight:600">HIGH</span> (${h.daily.ib.pct}% of ADR) - range may be set, rotational day likely.`};G.push(at[h.daily.ib.level]||"")}if(h.daily.pvaLocation.status!=="--"){const at={IN:`Price is <span style="color:#00aaff;font-weight:600">INSIDE</span> prior value area (${h.daily.pvaLocation.detail}) - value acceptance, mean reversion favored.`,OUT:(st=h.daily.pvaLocation.detail)!=null&&st.includes("Above")?`Price is <span style="color:#00ff88;font-weight:600">ABOVE</span> prior value area (${h.daily.pvaLocation.detail}) - bullish continuation if accepted.`:`Price is <span style="color:#ff4466;font-weight:600">BELOW</span> prior value area (${h.daily.pvaLocation.detail}) - bearish continuation if accepted.`,DYNAMIC:'Price is at <span style="color:#ffaa00;font-weight:600">DYNAMIC</span> boundary of prior value area - key decision point, watch for acceptance or rejection.'};G.push(at[h.daily.pvaLocation.status]||"")}if(h.daily.opening.type!=="--"&&h.daily.opening.type!=="DEV"){const at={OD:'Opening type is <span style="color:#00ff88;font-weight:600">Open Drive</span> - strong conviction, trend day likely, fade at your own risk.',OTD:'Opening type is <span style="color:#88ff88;font-weight:600">Open Test Drive</span> - tested and confirmed direction, follow the trend.',ORR:'Opening type is <span style="color:#ff8888;font-weight:600">Open Rejection Reverse</span> - initial move failed, expect reversal to dominate.',OA:'Opening type is <span style="color:#ffaa00;font-weight:600">Open Auction</span> - balanced open, wait for value to establish before trading.'};G.push(at[h.daily.opening.type]||"")}if(h.critical.abOverlap.pct!=="--"){const at=parseFloat(h.critical.abOverlap.pct);at<33?G.push(`AB overlap is <span style="color:#00ff88;font-weight:600">${at}%</span> (trending) - A and B periods show directional conviction, continuation expected.`):at<=50?G.push(`AB overlap is <span style="color:#ffaa00;font-weight:600">${at}%</span> (mixed) - some directional bias but not strong, be selective.`):G.push(`AB overlap is <span style="color:#ff4466;font-weight:600">${at}%</span> (rotational) - high overlap suggests balance, range-bound trading likely.`)}if((h.critical.buyingTail||h.critical.sellingTail)&&(h.critical.buyingTail&&G.push('<span style="color:#00ff88;font-weight:600">Buying tail/excess</span> detected at lows - aggressive buyers defending, support is strong.'),h.critical.sellingTail&&G.push('<span style="color:#ff4466;font-weight:600">Selling tail/excess</span> detected at highs - aggressive sellers defending, resistance is strong.')),h.critical.tpoBias.direction!=="--"){const at={BULLISH:'TPO distribution is <span style="color:#00ff88;font-weight:600">BULLISH</span> - POC is above value area midpoint, buyers in control.',BEARISH:'TPO distribution is <span style="color:#ff4466;font-weight:600">BEARISH</span> - POC is below value area midpoint, sellers in control.',NEUTRAL:'TPO distribution is <span style="color:#ffaa00;font-weight:600">NEUTRAL</span> - balanced profile, no clear directional bias from structure.'};G.push(at[h.critical.tpoBias.direction]||"")}const Z=he.includes("BULLISH")?'<strong style="color:#00ff88">Conclusion:</strong> Multiple factors align bullish. Look for long entries at support zones with proper risk management.':he.includes("BEARISH")?'<strong style="color:#ff4466">Conclusion:</strong> Multiple factors align bearish. Exercise caution on longs, consider short setups at resistance.':'<strong style="color:#ffaa00">Conclusion:</strong> Mixed signals present. Wait for clearer structure or trade both sides at extremes.';G.push(Z);const ge=G.map((at,ut)=>{const zt=ut===G.length-1,an=zt?le:"rgba(255,255,255,0.1)",mt=zt?`${le}10`:"transparent";return`<div style="margin-bottom: ${zt?"0":"12px"}; margin-top: ${zt?"16px":"0"}; padding: ${zt?"10px 10px 10px 10px":"2px 0 2px 10px"}; border-left: 2px solid ${an}; background: ${mt}; border-radius: ${zt?"6px":"0"};">${at}</div>`}).join("");return e.jsx("span",{dangerouslySetInnerHTML:{__html:ge}})})()})})]})]})})()]})})(),((pe=t.buy_zones)==null?void 0:pe.length)>0?t.buy_zones.map((m,h)=>e.jsx(S,{zone:m,rank:h+1},m.id)):((U=t.all_zones)==null?void 0:U.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{background:"rgba(100,100,100,0.1)",borderRadius:8,padding:12,marginBottom:16,border:"1px dashed rgba(255,255,255,0.2)",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:12,color:"#888"},children:" Waiting for price to approach support zones"}),e.jsx("div",{style:{fontSize:10,color:"#666",marginTop:4},children:"Nearest zones shown below (greyed out until actionable)"})]}),[...t.all_zones].sort((m,h)=>Math.abs(m.distance)-Math.abs(h.distance)).slice(0,3).map((m,h)=>e.jsx("div",{style:{opacity:.5,filter:"grayscale(50%)"},children:e.jsx(S,{zone:m,rank:h+1,isWaiting:!0})},m.id))]}):e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,padding:c?24:40,textAlign:"center",color:"#888"},children:[e.jsx("div",{style:{fontSize:c?36:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:c?14:16,marginBottom:8},children:"No zones available"}),e.jsx("div",{style:{fontSize:12},children:"Waiting for zone data to load..."})]})]}),(!y||c)&&e.jsx("div",{onClick:()=>!c&&R(!0),style:{flex:c?"none":1,minHeight:c?300:0,height:c?400:"auto",cursor:c?"default":"pointer"},title:c?"":"Click to minimize",children:e.jsx(B,{zones:t.all_zones,buyZones:t.buy_zones,currentPrice:t.current_price})})]})},Wg=({selectedContract:t})=>{var ge,X,Ie,st,at,ut,zt,an,mt,qt,dn,rn,un,Sn,In,Mn,Un,wn,yn,Ji,di,Zn,En,qn,ei,Ti,mi,ci,bi,vi,Ri,Ni,ti,ni,zi,Qi,Di,Hi,Gn,kn,fo,po,ho,uo,go,xo,ie,Je;const[n,i]=A.useState(null),[o,r]=A.useState(!1),[s,l]=A.useState("1week"),[a,d]=A.useState(!1),[p,C]=A.useState(null),[x,u]=A.useState(!1),[D,O]=A.useState(!1),[Q,De]=A.useState(!1),[f,y]=A.useState(null),[R,c]=A.useState(null),[N,S]=A.useState(0),[B,F]=A.useState(!1),[pe,U]=A.useState("compact"),[m,h]=A.useState(!1),[w,Me]=A.useState(!1),[I,Fe]=A.useState({show:!1,x:0,y:0,price:0,dayIdx:-1,day:null}),[He,te]=A.useState(!1),_e=Li.useRef(!1),v=Li.useRef(!1),he=Li.useRef(null),le=Li.useRef(null),{isMobile:Ne,isTablet:ot}=Oo(),_t=_=>{_e.current=!1,v.current=!1,setTimeout(()=>{if(he.current){he.current.scrollLeft=he.current.scrollWidth-he.current.clientWidth;const fe=(he.current.scrollHeight-he.current.clientHeight)/2;he.current.scrollTop=fe}if(le.current){le.current.scrollLeft=le.current.scrollWidth-le.current.clientWidth;const fe=(le.current.scrollHeight-le.current.clientHeight)/2;le.current.scrollTop=fe}const W=document.getElementById("price-scale-1w"),ue=document.getElementById("price-scale-4w");W&&he.current&&(W.scrollTop=he.current.scrollTop),ue&&le.current&&(ue.scrollTop=le.current.scrollTop)},300)},Ge=Li.useRef(!1);A.useEffect(()=>{n!=null&&n.current_price&&!Ge.current&&(_t(n.current_price),Ge.current=!0)},[n==null?void 0:n.current_price]),A.useEffect(()=>{Ge.current=!1},[t]);const ft=_=>_.length===1?_.charCodeAt(0)-65:26+(_.charCodeAt(0)-65)*26+(_.charCodeAt(1)-65),qe=31,oe=44,Le=_=>{if(!_)return{};const W={};for(const[ue,fe]of Object.entries(_)){const ye=fe.filter(Ue=>{const H=ft(Ue);return H>=qe&&H<=oe});ye.length>0&&(W[ue]=ye)}return W},Be=_=>{if(!_||Object.keys(_).length===0)return 0;let W=0,ue=0;for(const[fe,ye]of Object.entries(_))ye.length>W&&(W=ye.length,ue=parseFloat(fe));return ue},P=(_,W,ue=.1)=>{var M,xe;if(!_||Object.keys(_).length===0)return{vah:0,val:0};const fe=Object.keys(_).map(re=>parseFloat(re)).sort((re,T)=>T-re),ye=Object.values(_).reduce((re,T)=>re+T.length,0),Ue=Math.ceil(ye*.7);let H=new Set,ae=0;const we=W.toFixed(1);_[we]&&(H.add(W),ae+=_[we].length);let k=fe.indexOf(W)-1,q=fe.indexOf(W)+1;for(;ae<Ue&&(k>=0||q<fe.length);){const re=k>=0?fe[k]:null,T=q<fe.length?fe[q]:null,b=re&&((M=_[re.toFixed(1)])==null?void 0:M.length)||0,z=T&&((xe=_[T.toFixed(1)])==null?void 0:xe.length)||0;if(b>=z&&re!==null)H.add(re),ae+=b,k--;else if(T!==null)H.add(T),ae+=z,q++;else break}const L=Array.from(H);return{vah:Math.max(...L),val:Math.min(...L)}},ne=(_,W=!1)=>{if(!_||_.length===0)return null;const ue=_.slice(0,20),fe=2,ye={};let Ue=[],H=[];ue.forEach((q,L)=>{const M=L<26?String.fromCharCode(65+L):"A"+String.fromCharCode(65+L-26),xe=W&&q.ib_high||q.high,re=W&&q.ib_low||q.low;if(xe&&re){Ue.push(xe),H.push(re);for(let T=Math.floor(re/fe)*fe;T<=xe;T+=fe){const b=T.toFixed(1);ye[b]||(ye[b]=[]),ye[b].push(M)}}});const ae=Be(ye),{vah:we,val:k}=P(ye,ae,fe);return{profiles:ye,poc:ae,vah:we,val:k,high:Math.max(...Ue),low:Math.min(...H),period_count:ue.length,current_letter:ue.length>0?ue.length<26?String.fromCharCode(65+ue.length-1):"T":"A",ib_high:null,ib_low:null,is_composite:!0,days_included:ue.length}};A.useEffect(()=>{i(null),r(!1);const _=async()=>{await new Promise(fe=>setTimeout(fe,3e3));const ue=async()=>{try{const fe=await fetch(`${Zt}/market-profile`);if(fe.ok){const ye=await fe.json(),Ue=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),H=ye.poc||0,ae=H>5e4;Ue===ae||H===0?(i(ye),r(!0)):console.log(`Waiting for backend to switch - got POC ${H} but expected ${Ue?"BTC":"non-BTC"}`)}}catch{r(!1)}};return ue(),setInterval(ue,1e3)};let W;return _().then(ue=>{W=ue}),()=>{W&&clearInterval(W)}},[t]);const ke=10,Ae=_=>`tpo_historic_cache_${_||"GC"}`;A.useEffect(()=>{C(null),(async()=>{var Ue,H,ae;const W=Ae(t);try{const we=localStorage.getItem(W);if(we){const k=JSON.parse(we),q=new Date().toISOString().split("T")[0],L=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC")),M=((H=(Ue=k.data)==null?void 0:Ue.profiles)==null?void 0:H.length)>0;if(k.version===ke&&k.date===q&&k.data&&(M||L)){C(k.data);return}else!M&&!L&&(localStorage.removeItem(W),console.log("Cleared stale cache with empty profiles"))}}catch{console.warn("Invalid cache, fetching fresh data")}await new Promise(we=>setTimeout(we,12e3)),u(!0);let ue=3,fe=null;for(;ue>0;)try{fe=await(await fetch(`${Zt}/historic-tpo?days=40`)).json();const k=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(fe.source==="spot_no_history"&&!k){console.log(`Historic TPO: Backend still on spot, retrying in 5s... (${ue} left)`),ue--,await new Promise(L=>setTimeout(L,5e3));continue}break}catch(we){console.error("Failed to fetch historic TPO:",we),ue--,await new Promise(k=>setTimeout(k,3e3))}if(!fe){u(!1);return}const ye=t==="BTC-SPOT"||(t==null?void 0:t.startsWith("BTC"));if(((ae=fe.profiles)==null?void 0:ae.length)>0||ye){const we={version:ke,date:new Date().toISOString().split("T")[0],contract:t,data:fe};try{localStorage.setItem(W,JSON.stringify(we))}catch(k){console.warn("Failed to cache historic data:",k)}}C(fe),u(!1)})()},[t]);const ze=s==="1week"||s==="1week_rth",Ze=ze||(s==="4week"||s==="4week_rth");if((!o||!n)&&!(Ze&&((ge=p==null?void 0:p.profiles)==null?void 0:ge.length)>0))return e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#8b8b8b"},children:[e.jsx("div",{style:{fontSize:48,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:18,marginBottom:8},children:"Connecting to Market Profile..."}),e.jsx("div",{style:{fontSize:13},children:"Waiting for TPO data from backend"})]});const Y=(()=>{var W;if(!n&&!Ze||Ze)return null;if(s==="day")return{profiles:n.profiles,poc:n.poc,vah:n.vah,val:n.val,single_prints:n.single_prints||[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:n.period_count,current_letter:n.current_letter,open_price:n.open_price,high:n.high||Math.max(...Object.keys(n.profiles||{}).map(ue=>parseFloat(ue))),low:n.low||Math.min(...Object.keys(n.profiles||{}).map(ue=>parseFloat(ue))),volume:n.volume};if(s==="rth"){const ue=Le(n.profiles),fe=Be(ue),{vah:ye,val:Ue}=P(ue,fe),H=Object.keys(ue).map(ae=>parseFloat(ae));return{profiles:ue,poc:fe,vah:ye,val:Ue,single_prints:[],ib_high:n.ib_high,ib_low:n.ib_low,period_count:Object.values(ue).flat().filter((ae,we,k)=>k.indexOf(ae)===we).length,current_letter:n.current_letter,open_price:n.rth_open||n.open_price,high:H.length>0?Math.max(...H):0,low:H.length>0?Math.min(...H):0,volume:n.volume}}if(s==="4week")return ne(p==null?void 0:p.profiles,!1);if(s==="4week_rth")return ne(p==null?void 0:p.profiles,!0);const _=(W=n.sessions)==null?void 0:W[s];return _?{profiles:_.profiles,poc:_.poc,vah:_.vah,val:_.val,single_prints:_.single_prints||[],ib_high:_.ib_high,ib_low:_.ib_low,period_count:_.period_count,current_letter:_.current_letter,high:_.high,low:_.low,volume:_.volume}:null})(),Ke=(n==null?void 0:n.tick_size)||.1,et=N===0?(_=>{if(!_||Object.keys(_).length===0)return 1;const W=Object.keys(_).map(ae=>parseFloat(ae)),ue=Math.min(...W),H=(Math.max(...W)-ue)/45;return H<=.1?.1:H<=.5?.5:H<=1?1:H<=2?2:H<=5?5:H<=10?10:Math.ceil(H/10)*10})(Y==null?void 0:Y.profiles):N,me=(_,W)=>{if(!_||W<=Ke)return Object.entries(_).map(([fe,ye])=>({price:parseFloat(fe),letters:ye})).sort((fe,ye)=>ye.price-fe.price);const ue={};return Object.entries(_).forEach(([fe,ye])=>{const Ue=parseFloat(fe),H=Math.floor(Ue/W)*W;ue[H]||(ue[H]=new Set),ye.forEach(ae=>ue[H].add(ae))}),Object.entries(ue).map(([fe,ye])=>({price:parseFloat(fe),letters:Array.from(ye)})).sort((fe,ye)=>ye.price-fe.price)},g=Y!=null&&Y.profiles?me(Y.profiles,et):[],j=g.map(_=>_.price);Math.min(...j),Math.max(...j);const K={developing:"#8b8b8b",normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},$={developing:"#8b8b8b",OA:"#888888",ORR:"#ffaa00",OTD:"#00ff88",OD:"#00aaff"},G={developing:"",D:"D",P:"P",b:"b",B:"B"},Z=n||{};return e.jsxs("div",{style:{display:Ne?"flex":"grid",flexDirection:Ne?"column":void 0,gridTemplateColumns:Ne?void 0:ot||B?"1fr":"280px 1fr 300px",gap:Ne?12:20,height:Ne?"auto":"100%",padding:Ne?12:0,overflow:Ne?"auto":"hidden"},children:[!B&&e.jsxs("div",{style:{display:"flex",flexDirection:Ne?"row":"column",gap:Ne?8:16,overflowX:Ne?"auto":void 0,flexWrap:Ne?"nowrap":void 0},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:10,color:"#666",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"TPO Ranges"}),e.jsxs("div",{style:{display:"flex",marginBottom:12,background:"rgba(20,20,30,0.8)",borderRadius:8,padding:3},children:[e.jsxs("button",{onClick:()=>{s.includes("_rth")&&l(s.replace("_rth","")),_t()},onMouseEnter:_=>{const W=_.currentTarget.querySelector(".tooltip");W&&(W.style.opacity="1")},onMouseLeave:_=>{const W=_.currentTarget.querySelector(".tooltip");W&&(W.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"transparent":"linear-gradient(135deg, rgba(0,170,255,0.3) 0%, rgba(0,221,255,0.2) 100%)",border:s.includes("_rth")?"1px solid transparent":"1px solid rgba(0,221,255,0.5)",borderRadius:6,color:s.includes("_rth")?"#666":"#00ddff",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["ETH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,221,255,0.3)",borderRadius:6,color:"#00ddff",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"18:00 - 17:00 ET"})]}),e.jsxs("button",{onClick:()=>{s.includes("_rth")||l(s+"_rth"),_t()},onMouseEnter:_=>{const W=_.currentTarget.querySelector(".tooltip");W&&(W.style.opacity="1")},onMouseLeave:_=>{const W=_.currentTarget.querySelector(".tooltip");W&&(W.style.opacity="0")},style:{flex:1,padding:"8px 12px",background:s.includes("_rth")?"linear-gradient(135deg, rgba(0,255,136,0.3) 0%, rgba(0,200,100,0.2) 100%)":"transparent",border:s.includes("_rth")?"1px solid rgba(0,255,136,0.5)":"1px solid transparent",borderRadius:6,color:s.includes("_rth")?"#00ff88":"#666",fontSize:11,fontWeight:600,cursor:"pointer",position:"relative",transition:"all 0.2s ease"},children:["RTH",e.jsx("div",{className:"tooltip",style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:6,padding:"6px 10px",background:"rgba(15,15,25,0.95)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:6,color:"#00ff88",fontSize:10,fontWeight:500,whiteSpace:"nowrap",opacity:0,transition:"opacity 0.2s ease",pointerEvents:"none",zIndex:100},children:"09:30 - 16:15 ET"})]})]}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{onClick:()=>{const _=s.includes("_rth");l(_?"1week_rth":"1week"),_t()},style:{flex:1,padding:"12px 8px",background:s==="1week"||s==="1week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="1week"||s==="1week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="1week"||s==="1week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"1 Week"}),e.jsx("button",{onClick:()=>{const _=s.includes("_rth");l(_?"4week_rth":"4week"),_t()},style:{flex:1,padding:"12px 8px",background:s==="4week"||s==="4week_rth"?"linear-gradient(135deg, rgba(147,112,219,0.25) 0%, rgba(100,80,180,0.15) 100%)":"rgba(30,30,40,0.6)",border:s==="4week"||s==="4week_rth"?"1px solid rgba(147,112,219,0.6)":"1px solid rgba(255,255,255,0.06)",borderRadius:8,color:s==="4week"||s==="4week_rth"?"#ba68c8":"#888",fontSize:12,fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},children:"4 Week"})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px"},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Key Levels"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#ffaa00",fontWeight:600,fontSize:12},children:"POC"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((X=Y==null?void 0:Y.poc)==null?void 0:X.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAH"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((Ie=Y==null?void 0:Y.vah)==null?void 0:Ie.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#00aaff",fontWeight:600,fontSize:12},children:"VAL"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((st=Y==null?void 0:Y.val)==null?void 0:st.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB High"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((at=Y==null?void 0:Y.ib_high)==null?void 0:at.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:"#9370DB",fontWeight:600,fontSize:12},children:"US IB Low"}),e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",fontSize:12},children:((ut=Y==null?void 0:Y.ib_low)==null?void 0:ut.toFixed(2))||"--"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466",fontWeight:600,fontSize:12},children:"Single Prints"}),e.jsx("span",{style:{color:"#ff4466",fontFamily:"monospace",fontSize:12},children:((zt=Y==null?void 0:Y.single_prints)==null?void 0:zt.length)||0})]})]}),(n==null?void 0:n.confluence)&&e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:10,border:"1px solid rgba(255,255,255,0.08)",padding:"10px 12px",marginTop:8},children:[e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Confluence Score"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 10px",background:n.confluence.total_score>=8?"rgba(0,255,136,0.15)":n.confluence.total_score>=5?"rgba(0,170,255,0.15)":n.confluence.total_score>=2?"rgba(255,170,0,0.15)":n.confluence.total_score>=-1?"rgba(139,139,139,0.15)":"rgba(255,68,102,0.15)",borderRadius:6,marginBottom:8,border:`1px solid ${n.confluence.total_score>=8?"rgba(0,255,136,0.3)":n.confluence.total_score>=5?"rgba(0,170,255,0.3)":n.confluence.total_score>=2?"rgba(255,170,0,0.3)":n.confluence.total_score>=-1?"rgba(139,139,139,0.3)":"rgba(255,68,102,0.3)"}`},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:20,fontWeight:700,color:n.confluence.total_score>=8?"#00ff88":n.confluence.total_score>=5?"#00aaff":n.confluence.total_score>=2?"#ffaa00":n.confluence.total_score>=-1?"#8b8b8b":"#ff4466",fontFamily:"monospace"},children:[n.confluence.total_score>0?"+":"",n.confluence.total_score]}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:n.confluence.confidence})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:n.confluence.trade_direction==="LONG"?"#00ff88":n.confluence.trade_direction==="SHORT"?"#ff4466":"#8b8b8b"},children:n.confluence.trade_direction==="LONG"?" LONG":n.confluence.trade_direction==="SHORT"?" SHORT":n.confluence.trade_direction}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b",marginTop:2},children:["Size: ",n.confluence.position_size_pct,"%"]})]})]}),e.jsx("div",{style:{padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:6,marginBottom:12,fontSize:12,color:(an=n.confluence.action)!=null&&an.includes("NO TRADE")||(mt=n.confluence.action)!=null&&mt.includes("SKIP")?"#ff4466":(qt=n.confluence.action)!=null&&qt.includes("ADD")?"#00ff88":"#fff"},children:n.confluence.action}),e.jsxs("div",{style:{fontSize:11,color:"#8b8b8b"},children:[e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00ff88"},children:"R1 Macro"}),e.jsxs("span",{style:{color:n.confluence.rank1_score>0?"#00ff88":"#666"},children:[n.confluence.rank1_score>0?"+":"",n.confluence.rank1_score]})]}),((rn=(dn=n.confluence.factors)==null?void 0:dn.rank1_macro)==null?void 0:rn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#666"},children:n.confluence.factors.rank1_macro.map((_,W)=>e.jsx("div",{style:{padding:"2px 0"},children:_},W))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#00aaff"},children:"R2 Volume"}),e.jsxs("span",{style:{color:n.confluence.rank2_score>0?"#00aaff":"#666"},children:[n.confluence.rank2_score>0?"+":"",n.confluence.rank2_score]})]}),((Sn=(un=n.confluence.factors)==null?void 0:un.rank2_volume)==null?void 0:Sn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#00aaff",opacity:.7},children:n.confluence.factors.rank2_volume.map((_,W)=>e.jsx("div",{style:{padding:"2px 0"},children:_},W))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ffaa00"},children:"R3 Structure"}),e.jsxs("span",{style:{color:n.confluence.rank3_score>0?"#ffaa00":"#666"},children:[n.confluence.rank3_score>0?"+":"",n.confluence.rank3_score]})]}),((Mn=(In=n.confluence.factors)==null?void 0:In.rank3_structure)==null?void 0:Mn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ffaa00",opacity:.7},children:n.confluence.factors.rank3_structure.map((_,W)=>e.jsx("div",{style:{padding:"2px 0"},children:_},W))})]}),e.jsxs("div",{style:{borderBottom:"1px solid rgba(255,255,255,0.04)",paddingBottom:4,marginBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#9370DB"},children:"R4 Timing"}),e.jsxs("span",{style:{color:n.confluence.rank4_score>0?"#9370DB":"#666"},children:[n.confluence.rank4_score>0?"+":"",n.confluence.rank4_score]})]}),((wn=(Un=n.confluence.factors)==null?void 0:Un.rank4_timing)==null?void 0:wn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#9370DB",opacity:.7},children:n.confluence.factors.rank4_timing.map((_,W)=>e.jsx("div",{style:{padding:"2px 0"},children:_},W))})]}),(n.confluence.conflict_penalty!==0||((Ji=(yn=n.confluence.factors)==null?void 0:yn.conflicts)==null?void 0:Ji.length)>0)&&e.jsxs("div",{style:{paddingBottom:4},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[e.jsx("span",{style:{color:"#ff4466"},children:"Conflicts"}),e.jsx("span",{style:{color:"#ff4466"},children:n.confluence.conflict_penalty})]}),((Zn=(di=n.confluence.factors)==null?void 0:di.conflicts)==null?void 0:Zn.length)>0&&e.jsx("div",{style:{paddingLeft:8,fontSize:10,color:"#ff4466",opacity:.7},children:n.confluence.factors.conflicts.map((_,W)=>e.jsx("div",{style:{padding:"2px 0"},children:_},W))})]})]}),((qn=(En=n.confluence.factors)==null?void 0:En.volume_override)==null?void 0:qn.length)>0&&e.jsx("div",{style:{marginTop:10,padding:"8px",background:"rgba(255,170,0,0.1)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:6,fontSize:10,color:"#ffaa00"},children:n.confluence.factors.volume_override[0]}),n.confluence.level_type&&e.jsxs("div",{style:{marginTop:8,fontSize:11,color:"#8b8b8b"},children:["At: ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:n.confluence.level_type}),n.confluence.at_key_level&&e.jsx("span",{style:{color:"#fff",fontFamily:"monospace",marginLeft:6},children:n.confluence.at_key_level.toFixed(2)})]})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:20,overflow:"auto"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsxs("div",{style:{fontSize:14,color:"#fff",fontWeight:600},children:["TPO Profile - ",s==="day"?"Full Day":(Ti=(ei=n==null?void 0:n.sessions)==null?void 0:ei[s])==null?void 0:Ti.display]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("button",{onClick:()=>h(!m),style:{padding:"4px 10px",background:m?"rgba(0,170,255,0.25)":"rgba(30,30,40,0.8)",border:m?"1px solid rgba(0,170,255,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:m?"#00aaff":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:m?"Zoomed":"Zoom"}),e.jsx("button",{onClick:()=>Me(!w),style:{padding:"4px 10px",background:w?"rgba(255,170,0,0.25)":"rgba(30,30,40,0.8)",border:w?"1px solid rgba(255,170,0,0.6)":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:w?"#ffaa00":"#888",fontSize:11,fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:w?"IB Only":"Hide Non-IB"}),e.jsxs("span",{style:{fontSize:12,color:"#8b8b8b",whiteSpace:"nowrap"},children:["Period: ",e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(Y==null?void 0:Y.current_letter)||"A"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,background:"rgba(30,30,40,0.8)",borderRadius:6,padding:"2px 4px",border:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("span",{style:{fontSize:10,color:"#8b8b8b",paddingLeft:4},children:"View:"}),e.jsx("button",{onClick:()=>U("compact"),style:{padding:"4px 8px",background:pe==="compact"?"rgba(0,255,136,0.2)":"transparent",border:pe==="compact"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:pe==="compact"?"#00ff88":"#888",fontSize:10,fontWeight:pe==="compact"?600:400,cursor:"pointer"},children:"Compact"}),e.jsx("button",{onClick:()=>U("expanded"),style:{padding:"4px 8px",background:pe==="expanded"?"rgba(0,255,136,0.2)":"transparent",border:pe==="expanded"?"1px solid #00ff88":"1px solid transparent",borderRadius:4,color:pe==="expanded"?"#00ff88":"#888",fontSize:10,fontWeight:pe==="expanded"?600:400,cursor:"pointer"},children:"Expanded"})]}),e.jsx("button",{onClick:()=>F(!B),style:{padding:"4px 10px",background:B?"rgba(0,170,255,0.2)":"rgba(30,30,40,0.8)",border:B?"1px solid #00aaff":"1px solid rgba(255,255,255,0.1)",borderRadius:6,color:B?"#00aaff":"#888",fontSize:11,cursor:"pointer",display:"flex",alignItems:"center",gap:4},title:B?"Collapse TPO chart":"Expand TPO chart",children:B?"":" "})]})]}),e.jsx("div",{style:{fontFamily:"monospace",fontSize:10,position:"relative"},children:Ze&&(!p||x)?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16,animation:"pulse 1.5s ease-in-out infinite"},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8,color:"#9370DB"},children:"Loading Historic Data..."}),e.jsxs("div",{style:{fontSize:12},children:["Fetching ",ze?"1-week":"4-week"," TPO profiles"]})]}):Ze&&((mi=p==null?void 0:p.profiles)==null?void 0:mi.length)===0?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:60},children:[e.jsx("div",{style:{fontSize:36,marginBottom:16},children:""}),e.jsx("div",{style:{fontSize:16,marginBottom:8},children:"No Historic Data Available"}),e.jsx("div",{style:{fontSize:12},children:"Try refreshing or check backend connection"})]}):(s==="1week"||s==="1week_rth")&&((ci=p==null?void 0:p.profiles)==null?void 0:ci.length)>0?(()=>{var _,W,ue,fe,ye,Ue,H,ae,we,k,q;try{const L=s==="1week_rth",M=p.profiles[0],re=((M==null?void 0:M.high)||5e3)>1e4,T=re?m?25:50:m?2:4,b=re?m?.1:1:m?.05:.3,z=Math.max(2,Math.round(T/b)),E=m?14:11,se=m?11:10,de=45,Se=20,Mt=L?[{key:"us_rth",name:"US RTH",color:"#00ff88",start:31,end:44,time:"09:30-16:15",hasIB:!0,ibStart:31,ibEnd:33},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}]:[{key:"asia",name:"Asia",color:"#00ddff",start:0,end:17,time:"18:00-03:00"},{key:"london",name:"London",color:"#ffaa00",start:18,end:28,time:"03:00-08:20"},{key:"us",name:"US",color:"#00ff88",start:28,end:41,time:"08:20-15:00",hasIB:!0,ibStart:28,ibEnd:30},{key:"close",name:"Close",color:"#ba68c8",start:42,end:47,time:"15:00-17:00"}],St=V=>V.length===1?V.charCodeAt(0)-65:26+(V.charCodeAt(0)-65)*26+(V.charCodeAt(1)-65),ve=V=>{if(V.open_type&&V.open_type!=="developing")return V.open_type;const ce=V.ib_high,$e=V.ib_low,nt=V.open,wt=V.close||V.high;if(!ce||!$e||$e>=999999||!nt)return"OA";const pt=ce-$e;if(pt<=0)return"OA";const It=(ce+$e)/2,vt=(nt-$e)/pt*100;return vt<=20&&wt>It||vt>=80&&wt<It?"OD":nt>It&&V.low<$e&&wt>ce||nt<It&&V.high>ce&&wt<$e?"OTD":V.high>ce&&wt<It||V.low<$e&&wt>It?"ORR":"OA"},Oe=p.profiles.slice(0,5).filter(V=>V.tpo_profiles).reverse(),Ve=V=>V<26?String.fromCharCode(65+V):String.fromCharCode(65+Math.floor(V/26)-1)+String.fromCharCode(65+V%26),Tt=[];Oe.forEach(V=>{Mt.forEach(ce=>{var Qe,$t,jt,Vt,Qt,kt;const $e=V.tpo_profiles||{},nt=V.price_volumes||{},wt=V.delta_by_price||{},pt={},It={},vt={};let gt=0,Ut=0,nn=0,Ot=999999,Gt=null,Ht=null,ee=0,Ee=999999;Object.entries($e).forEach(([it,Wt])=>{const Ft=parseFloat(it);Wt.filter(gn=>{const Xt=St(gn);return Xt>=ce.start&&Xt<=ce.end}).length>0&&(Ft>ee&&(ee=Ft),Ft<Ee&&(Ee=Ft))});const Re=re?100:5,At=ee+Re,Ce=Ee-Re;Object.entries(nt).forEach(([it,Wt])=>{const Ft=parseFloat(it);if(Ft>=Ce&&Ft<=At){It[Ft]=(It[Ft]||0)+Wt;const Yt=wt[it]||wt[Ft.toFixed(1)]||0;vt[Ft]=(vt[Ft]||0)+Yt}}),Object.entries($e).forEach(([it,Wt])=>{const Ft=parseFloat(it),Yt=Math.floor(Ft/T)*T,gn=Wt.filter(Xt=>{const Ln=St(Xt);return Ln>=ce.start&&Ln<=ce.end});gn.length>0&&(pt[Yt]||(pt[Yt]=new Set),gn.forEach(Xt=>{const mn=St(Xt)-ce.start,Bi=Ve(mn);pt[Yt].add(Bi),mn>Ut&&(Ut=mn)}),Ft>nn&&(nn=Ft),Ft<Ot&&(Ot=Ft)),ce.hasIB&&Wt.filter(Ln=>{const mn=St(Ln);return mn>=ce.ibStart&&mn<=ce.ibEnd}).length>0&&((Gt===null||Ft>Gt)&&(Gt=Ft),(Ht===null||Ft<Ht)&&(Ht=Ft))}),Object.values(pt).forEach(it=>{it.size>gt&&(gt=it.size)});let Ye=0;if(Object.values(It).forEach(it=>{it>Ye&&(Ye=it)}),Object.keys(pt).length>0){let it=0,Wt=0,Ft=null;Object.entries(pt).forEach(([ht,yt])=>{yt.size>Wt&&(Wt=yt.size,it=parseFloat(ht),Ft=ht)});const Yt=Object.keys(pt).map(ht=>parseFloat(ht)).sort((ht,yt)=>yt-ht),gn=Object.values(pt).reduce((ht,yt)=>ht+yt.size,0);let Xt=0,Ln=it,mn=it;const Bi=Yt.indexOf(Math.floor(it/T)*T);if(Bi>=0){Xt=((Qe=pt[Yt[Bi]])==null?void 0:Qe.size)||0;let ht=Bi,yt=Bi;for(;Xt<gn*.7&&(ht>0||yt<Yt.length-1);){const Pt=ht>0&&(($t=pt[Yt[ht-1]])==null?void 0:$t.size)||0,Nn=yt<Yt.length-1&&((jt=pt[Yt[yt+1]])==null?void 0:jt.size)||0;if(Pt>=Nn&&ht>0)ht--,Xt+=Pt;else if(yt<Yt.length-1)yt++,Xt+=Nn;else break}Ln=Yt[ht]||it,mn=Yt[yt]||it}let On=it,$i=0;Object.entries(It).forEach(([ht,yt])=>{yt>$i&&($i=yt,On=parseFloat(ht))});let Po=On,Pn=On;const _n=Object.entries(It).map(([ht,yt])=>({price:parseFloat(ht),vol:yt})).sort((ht,yt)=>ht.price-yt.price),Ii=_n.reduce((ht,yt)=>ht+yt.vol,0)*.7;if(_n.length>0){const ht=_n.findIndex(No=>Math.abs(No.price-On)<b);let yt=((Vt=_n[ht])==null?void 0:Vt.vol)||0,Pt=ht>=0?ht:0,Nn=ht>=0?ht:0;for(;yt<Ii&&(Pt<_n.length-1||Nn>0);){const No=Pt<_n.length-1?_n[Pt+1].vol:0,Wl=Nn>0?_n[Nn-1].vol:0;if(No>=Wl&&Pt<_n.length-1)Pt++,yt+=_n[Pt].vol;else if(Nn>0)Nn--,yt+=_n[Nn].vol;else break}Po=((Qt=_n[Pt])==null?void 0:Qt.price)||On,Pn=((kt=_n[Nn])==null?void 0:kt.price)||On}const Zi=Math.max(gt*se+Se+de+40,120),yo=Math.max((Ut+1)*se+Se+de+40,160);let qi=null,Vi=null,ii=null,Bt=null;const Ct=[],ct=Ve(Ut),xt=[];if(Object.entries(pt).forEach(([ht,yt])=>{const Pt=parseFloat(ht);yt.has("A")&&Ct.push({price:Pt,key:ht}),yt.has(ct)&&xt.push({price:Pt,key:ht})}),Ct.length>0){const ht=(Math.max(...Ct.map(Pt=>Pt.price))+Math.min(...Ct.map(Pt=>Pt.price)))/2;let yt=Ct[0];Ct.forEach(Pt=>{Math.abs(Pt.price-ht)<Math.abs(yt.price-ht)&&(yt=Pt)}),qi=yt.price,ii=yt.key}if(xt.length>0){const ht=(Math.max(...xt.map(Pt=>Pt.price))+Math.min(...xt.map(Pt=>Pt.price)))/2;let yt=xt[0];xt.forEach(Pt=>{Math.abs(Pt.price-ht)<Math.abs(yt.price-ht)&&(yt=Pt)}),Vi=yt.price,Bt=yt.key}let Nt="D";if(nn>Ot&&it>0){const ht=nn-Ot,yt=(it-Ot)/ht,Pt=Ot+ht*.67,Nn=Ot+ht*.33;yt>.6?Nt="P":yt<.4?Nt="b":Nt="D"}let bn=null;const vn=[],Yn=[];if(Object.entries(pt).forEach(([ht,yt])=>{const Pt=parseFloat(ht);yt.has("A")&&vn.push(Pt),yt.has("B")&&Yn.push(Pt)}),vn.length>0&&Yn.length>0){const ht=Math.max(...vn),yt=Math.min(...vn),Pt=Math.max(...Yn),Nn=Math.min(...Yn),No=ht-yt,Wl=Pt-Nn,Bp=Math.min(ht,Pt),Ip=Math.max(yt,Nn),qd=Math.max(0,Bp-Ip),ec=Math.min(No,Wl);ec>0?bn=Math.round(qd/ec*100):qd>0?bn=100:bn=0}Tt.push({date:V.date,weekday:V.weekday,sessKey:ce.key,sessName:ce.name,sessTime:ce.time,color:ce.color,lettersByPrice:pt,volumeByPrice:It,deltaByPrice:vt,maxVol:Ye,poc:it,pocPriceKey:Ft,maxTPOCount:Wt,sessionVPOC:On,vah:Ln,val:mn,volVAH:Po,volVAL:Pn,high:nn,low:Ot,open:qi,close:Vi,openPriceKey:ii,closePriceKey:Bt,ibHigh:Gt,ibLow:Ht,hasIB:ce.hasIB,maxLetters:gt,maxPeriod:Ut,sessStart:0,width:pe==="expanded"?yo:Zi,day_type:V.day_type,open_type:ve(V),profile_shape:Nt,abOverlap:bn})}})});const dt=w?Tt.filter(V=>V.hasIB&&V.ibHigh&&V.ibLow):Tt;if(dt.length===0)return e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:["No session data",w?" with IB":"","..."]});let Rt=0,Lt=999999;dt.forEach(V=>{V.high>Rt&&(Rt=V.high),V.low<Lt&&(Lt=V.low)}),Rt=Math.ceil(Rt/T)*T+T*3,Lt=Math.floor(Lt/T)*T-T*3;const Jt=[];for(let V=Rt;V>=Lt;V-=T)Jt.push(V);let lt=0;const bt=dt.map(V=>{const ce=lt;return lt+=V.width,ce}),en=lt,je=(V,ce)=>{if(!ce)return;const $e=ce.getBoundingClientRect(),nt=ce.scrollLeft,wt=ce.scrollTop,pt=V.clientX-$e.left,It=pt+nt,vt=V.clientY-$e.top,gt=vt-36+wt;let Ut=dt.length-1;for(let Gt=0;Gt<dt.length;Gt++)if(It<bt[Gt]+dt[Gt].width){Ut=Gt;break}const nn=Math.floor(gt/E),Ot=Jt[nn]||0;Fe({show:!0,x:pt,y:vt,clientX:V.clientX,clientY:V.clientY,chartLeft:$e.left,chartTop:$e.top,chartRight:$e.right,chartBottom:$e.bottom,scrollLeft:nt,scrollTop:wt,price:Ot,dayIdx:Ut,day:dt[Ut]})};return e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[I.show&&I.day&&He&&e.jsxs("div",{style:{position:"absolute",left:I.x+65,top:Math.max(10,I.y-140),background:"rgba(20,20,35,0.95)",border:`1px solid ${I.day.color||"rgba(147,112,219,0.5)"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:I.day.color||"#ba68c8",fontWeight:700,marginBottom:4},children:[I.day.sessName," - ",I.day.weekday," ",(_=I.day.date)==null?void 0:_.slice(5)]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:I.day.sessTime||"--"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((W=I.price)==null?void 0:W.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof I.day.poc=="number"?I.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof I.day.vah=="number"?I.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof I.day.val=="number"?I.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof I.day.ibHigh=="number"?I.day.ibHigh.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof I.day.ibLow=="number"?I.day.ibLow.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof I.day.ibHigh=="number"&&typeof I.day.ibLow=="number"&&I.day.high>I.day.low?((I.day.ibHigh-I.day.ibLow)/(I.day.high-I.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof I.day.volVAH=="number"?I.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof I.day.volVAL=="number"?I.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:K[(ue=I.day)==null?void 0:ue.day_type]||"#888",fontWeight:600},children:((ye=(fe=I.day)==null?void 0:fe.day_type)==null?void 0:ye.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((H=(Ue=I.day)==null?void 0:Ue.open_type)==null?void 0:H.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((we=(ae=I.day)==null?void 0:ae.profile_shape)==null?void 0:we.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:((k=I.day)==null?void 0:k.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((q=I.day)==null?void 0:q.abOverlap)=="number"?I.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflow:"hidden",height:"calc(100% - 36px)"},id:"price-scale-1w",children:Jt.map((V,ce)=>{const $e=V%10===0,nt=V%50===0;return e.jsx("div",{style:{height:E,fontSize:nt?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:nt?"rgba(147,112,219,0.9)":$e?"#666":"transparent",fontWeight:nt?600:400,borderBottom:nt?"1px solid rgba(147,112,219,0.1)":"none"},children:$e?V.toFixed(0):""},V)})})]}),e.jsxs("div",{className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:V=>{const ce=document.getElementById("price-scale-1w"),$e=document.getElementById("time-scale-1w");ce&&(ce.scrollTop=V.target.scrollTop),$e&&($e.scrollLeft=V.target.scrollLeft)},onMouseMove:V=>je(V,V.currentTarget),onClick:()=>te(!He),onMouseLeave:()=>{He||Fe({...I,show:!1})},ref:V=>{he.current=V,V&&!_e.current&&en>V.clientWidth&&(V.scrollLeft=en-V.clientWidth,_e.current=!0)},children:[I.show&&I.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:I.chartLeft-58,right:window.innerWidth-I.chartRight,height:1,top:I.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:I.clientX,top:I.chartTop,height:I.chartBottom-I.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:10,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:dt.map((V,ce)=>{var $e;return e.jsxs("div",{style:{width:V.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:V.sessKey==="asia"||L&&V.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:I.dayIdx===ce?`${V.color}15`:"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:V.color,fontWeight:700},children:V.sessName}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[V.weekday," ",($e=V.date)==null?void 0:$e.slice(5)]})]},`${V.date}-${V.sessKey}`)})}),e.jsxs("div",{style:{position:"relative",minHeight:"calc(100% - 36px)"},children:[dt.map((V,ce)=>e.jsx("div",{style:{position:"absolute",left:bt[ce]+V.width-1,top:0,bottom:0,minHeight:Jt.length*E,width:1,background:"rgba(147,112,219,0.06)",pointerEvents:"none",zIndex:1}},`col-line-${ce}`)),dt.map((V,ce)=>V.sessKey==="asia"||L&&V.sessKey==="us_rth"?e.jsx("div",{style:{position:"absolute",left:bt[ce],top:0,bottom:0,minHeight:Jt.length*E,width:2,background:"rgba(255,255,255,0.1)",pointerEvents:"none",zIndex:1}},`day-line-${ce}`):null),Jt.map(V=>e.jsx("div",{style:{display:"flex",height:E,background:I.price===V?"rgba(186,104,200,0.04)":"transparent"},children:dt.map((ce,$e)=>{const nt=ce.lettersByPrice[V]?[...ce.lettersByPrice[V]].sort():[],wt=ce.vah&&ce.val&&V<=ce.vah&&V>=ce.val,pt=ce.hasIB&&ce.ibHigh&&Math.abs(V-ce.ibHigh)<T,It=ce.hasIB&&ce.ibLow&&Math.abs(V-ce.ibLow)<T,vt=ce.openPriceKey&&V.toString()===ce.openPriceKey,gt=ce.maxPeriod>=0?ce.maxPeriod<26?String.fromCharCode(65+ce.maxPeriod):"A"+String.fromCharCode(65+ce.maxPeriod-26):null,Ut=ce.closePriceKey&&V.toString()===ce.closePriceKey,Ot=ce.close&&ce.open&&ce.close>=ce.open?"#00ff88":"#ff4466",Gt=ce.pocPriceKey&&V.toString()===ce.pocPriceKey;return e.jsx("div",{style:{width:ce.width,flexShrink:0,height:E,display:"flex",alignItems:"center",borderRight:"none",borderLeft:ce.sessKey==="asia"||L&&ce.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",position:"relative",paddingLeft:21,paddingRight:de+Se+19,background:pt||It?"rgba(255,255,255,0.05)":"transparent"},children:pe==="expanded"?e.jsx("div",{style:{position:"relative",width:Math.max((ce.maxPeriod-ce.sessStart+1)*se,50),height:E-2,overflow:"visible"},children:nt.map((Ht,ee)=>{const Ee=St(Ht)-ce.sessStart;if(Ee<0)return null;const Re=Ht==="A"&&vt,At=Ht===gt&&Ut&&!Re,Ce=Gt?"#000":Re?"#fff":At?"#000":wt?Ot:"#888",Ye=Gt?"#ffffff":Re?"rgba(100,100,100,0.6)":At?Ot:wt?`${Ot}30`:"rgba(136,136,136,0.25)",Qe=Gt||Re?"1px solid #fff":At?`1px solid ${Ot}`:wt?`1px solid ${Ot}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:Ee*se,width:Ht.length>1?se+4:se-1,height:E-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:Ht.length>1?7:9,fontWeight:700,color:Ce,background:Ye,borderRadius:2,border:Qe},children:Ht},`${Ht}-${ee}`)})}):nt.map((Ht,ee)=>{const Ee=Ht==="A"&&vt,Re=Ht===gt&&Ut&&!Ee,At=Gt?"#000":Ee?"#fff":Re?"#000":wt?Ot:"#888",Ce=Gt?"#ffffff":Ee?"rgba(100,100,100,0.6)":Re?Ot:wt?`${Ot}30`:"rgba(136,136,136,0.25)",Ye=Gt||Ee?"1px solid #fff":Re?`1px solid ${Ot}`:wt?`1px solid ${Ot}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{minWidth:Ht.length>1?se+4:se,height:E-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:Ht.length>1?8:10,fontWeight:700,color:At,background:Ce,borderRadius:2,marginRight:1,border:Ye,padding:Ht.length>1?"0 2px":0},children:Ht},`${Ht}-${ee}`)})},`${ce.date}-${ce.sessKey}-${V}`)})},V)),dt.map((V,ce)=>{const $e=bt[ce],nt=Jt.length*E,wt=(V.high+V.low)/2,pt=gt=>{const Ut=Math.floor(gt/T)*T,nn=(Rt-Ut)/T,Ot=1-(gt-Ut)/T;return(nn+Ot)*E},It=Object.entries(V.volumeByPrice||{}).map(([gt,Ut])=>{var Gt,Ht;const nn=parseFloat(gt),Ot=((Gt=V.deltaByPrice)==null?void 0:Gt[gt])??((Ht=V.deltaByPrice)==null?void 0:Ht[nn]);return{price:nn,vol:Ut,delta:Ot}}).filter(gt=>gt.vol>0).sort((gt,Ut)=>Ut.price-gt.price),vt=Math.max(...It.map(gt=>gt.vol),1);return e.jsx("div",{style:{position:"absolute",left:$e+V.width-de-15,top:0,width:de,height:nt,overflow:"hidden"},children:It.map((gt,Ut)=>{const nn=pt(gt.price),Ot=1,Gt=V.sessionVPOC&&Math.abs(gt.price-V.sessionVPOC)<1,Ht=V.volVAH&&Math.abs(gt.price-V.volVAH)<1,ee=V.volVAL&&Math.abs(gt.price-V.volVAL)<1,Re=gt.delta!==void 0&&gt.delta!==null&&gt.delta!==0?gt.delta>0:gt.price>wt;return e.jsx("div",{style:{position:"absolute",top:nn,left:4,width:`${Math.min(gt.vol/vt*95,95)}%`,height:Ot,background:Gt?"#ff9900":Ht?"#00ff88":ee?"#ff4466":Re?"#00dd77":"#cc3366",opacity:.9}},Ut)})},`vp-sess-${ce}`)}),dt.map((V,ce)=>{const $e=wt=>{const pt=Math.floor(wt/T)*T,It=(Rt-pt)/T,vt=1-(wt-pt)/T;return(It+vt)*E},nt=bt[ce];return e.jsxs(Li.Fragment,{children:[V.hasIB&&V.ibHigh&&V.ibLow&&e.jsx("div",{style:{position:"absolute",left:nt+7,top:$e(V.ibHigh)+E/2,width:2,height:$e(V.ibLow)-$e(V.ibHigh),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),V.vah&&e.jsx("div",{style:{position:"absolute",left:nt+V.width-12,top:$e(V.vah)+E/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),V.val&&e.jsx("div",{style:{position:"absolute",left:nt+V.width-12,top:$e(V.val)+E/2-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${V.date}-${V.sessKey}`)})]})]})]}),e.jsxs("div",{style:{display:"flex",flexShrink:0,background:"rgba(18,18,30,0.98)",borderTop:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{width:58,flexShrink:0,borderRight:"1px solid rgba(147,112,219,0.25)"}}),e.jsx("div",{id:"time-scale-1w",style:{display:"flex",flex:1,overflow:"hidden"},children:dt.map((V,ce)=>e.jsx("div",{style:{width:V.width,flexShrink:0,textAlign:"center",padding:"2px 0",borderRight:"1px solid rgba(147,112,219,0.06)",borderLeft:V.sessKey==="asia"||L&&V.sessKey==="us_rth"?"2px solid rgba(255,255,255,0.1)":"none",background:I.dayIdx===ce?`${V.color}15`:"transparent"},children:e.jsx("div",{style:{fontSize:9,color:"#666"},children:V.sessTime})},`time-${V.date}-${V.sessKey}`))})]})]})}catch(L){return console.error("1-Week chart error:",L),e.jsxs("div",{style:{padding:40,textAlign:"center",color:"#ff4466"},children:["Error rendering 1-Week chart: ",L.message]})}})():(s==="4week"||s==="4week_rth")&&((bi=p==null?void 0:p.profiles)==null?void 0:bi.length)>0?(()=>{var Tt,dt,Rt,Lt,Jt,lt,bt,en,je,V,ce,$e,nt,wt,pt,It,vt,gt,Ut,nn,Ot,Gt,Ht;const _=s==="4week_rth",W=31,ue=45,fe=ee=>ee.length===1?ee.charCodeAt(0)-65:26+(ee.charCodeAt(0)-65)*26+(ee.charCodeAt(1)-65),ye=ee=>_?ee.filter(Ee=>{const Re=fe(Ee);return Re>=W&&Re<=ue}):ee,Ue=new Date().toISOString().split("T")[0],ae=p.profiles.slice(0,20).filter(ee=>ee.tpo_profiles).map(ee=>{let Ee=ee;if(ee.date===Ue&&n&&(Ee={...ee,poc:n.poc||ee.poc,vah:n.vah||ee.vah,val:n.val||ee.val,ib_high:n.ib_high||ee.ib_high,ib_low:n.ib_low||ee.ib_low,high:Math.max(n.high||0,ee.high||0),low:Math.min(n.low||999999,ee.low||999999),tpo_profiles:n.profiles||ee.tpo_profiles,day_type:n.day_type||ee.day_type,open_type:n.open_type||ee.open_type,profile_shape:n.profile_shape||ee.profile_shape}),_&&Ee.tpo_profiles){const Re={};Object.entries(Ee.tpo_profiles).forEach(([Ce,Ye])=>{const Qe=ye(Ye);Qe.length>0&&(Re[Ce]=Qe)}),Ee={...Ee,tpo_profiles:Re};const At=Object.keys(Re).map(Ce=>parseFloat(Ce));At.length>0&&(Ee.high=Math.max(...At),Ee.low=Math.min(...At))}return Ee}).reverse(),we=ae.map(ee=>ee.high||0).filter(ee=>ee>0);ae.map(ee=>ee.low||999999).filter(ee=>ee<999999);const q=Math.max(...we)>1e4,L=q?m?50:100:m?2:4,M=q?m?.1:1:m?.05:.3,xe=Math.max(2,Math.round(L/M)),re=m?14:11,T=m?12:10,b=50,z=16,E=ee=>{const Ee=new Set;return ee.forEach(Re=>{let At;Re.length===1?At=Re.charCodeAt(0)-65:At=26+(Re.charCodeAt(0)-65)*26+(Re.charCodeAt(1)-65);const Ce=Math.floor(At/2);Ce<26?Ee.add(String.fromCharCode(65+Ce)):Ee.add(String.fromCharCode(65+Math.floor((Ce-26)/26))+String.fromCharCode(65+(Ce-26)%26))}),[...Ee].sort()},se=ee=>{if(ee.open_type&&ee.open_type!=="developing")return ee.open_type;const Ee=ee.ib_high,Re=ee.ib_low,At=ee.open,Ce=ee.close||ee.high;if(!Ee||!Re||Re>=999999||!At)return"OA";const Ye=Ee-Re;if(Ye<=0)return"OA";const Qe=(Ee+Re)/2,$t=(At-Re)/Ye*100;return $t<=20&&Ce>Qe||$t>=80&&Ce<Qe?"OD":At>Qe&&ee.low<Re&&Ce>Ee||At<Qe&&ee.high>Ee&&Ce<Re?"OTD":ee.high>Ee&&Ce<Qe||ee.low<Re&&Ce>Qe?"ORR":"OA"},de=ae.map(ee=>{var Vi,ii,Bt;const Ee=ee.tpo_profiles||{};let Re=0,At=0;const Ce={},Ye={},Qe={},$t={},jt=ee.price_volumes&&Object.keys(ee.price_volumes).length>0,Vt=ee.delta_by_price||{};Object.entries(Ee).forEach(([Ct,ct])=>{const xt=parseFloat(Ct),Nt=Math.floor(xt/L)*L;if(Ce[Nt]||(Ce[Nt]=new Set),E(ct).forEach(vn=>{Ce[Nt].add(vn);const Yn=fe(vn);Yn>At&&(At=Yn)}),!jt){const vn=Math.floor(xt/M)*M;Ye[vn]=(Ye[vn]||0)+ct.length,Qe[Nt]=(Qe[Nt]||0)+ct.length}}),jt&&Object.entries(ee.price_volumes).forEach(([Ct,ct])=>{const xt=parseFloat(Ct),Nt=Math.floor(xt/M)*M,bn=Math.floor(xt/L)*L;Ye[Nt]=(Ye[Nt]||0)+ct,Qe[bn]=(Qe[bn]||0)+ct;const vn=Vt[Ct]||Vt[xt.toFixed(1)]||0;$t[Nt]=($t[Nt]||0)+vn});let Qt=0,kt=0,it=null;Object.entries(Ce).forEach(([Ct,ct])=>{ct.size>kt&&(kt=ct.size,Qt=parseFloat(Ct),it=Ct),ct.size>Re&&(Re=ct.size)});let Wt=ee.poc||Qt,Ft=0;Object.entries(Ye).forEach(([Ct,ct])=>{ct>Ft&&(Ft=ct,Wt=parseFloat(Ct))});let Yt=Wt,gn=Wt;const Xt=Object.entries(Ye).map(([Ct,ct])=>({price:parseFloat(Ct),vol:ct})).sort((Ct,ct)=>Ct.price-ct.price),mn=Xt.reduce((Ct,ct)=>Ct+ct.vol,0)*.7;if(Xt.length>0){const Ct=Xt.findIndex(bn=>Math.abs(bn.price-Wt)<M);let ct=((Vi=Xt[Ct])==null?void 0:Vi.vol)||0,xt=Ct,Nt=Ct;for(;ct<mn&&(xt<Xt.length-1||Nt>0);){const bn=xt<Xt.length-1?Xt[xt+1].vol:0,vn=Nt>0?Xt[Nt-1].vol:0;if(bn>=vn&&xt<Xt.length-1)xt++,ct+=Xt[xt].vol;else if(Nt>0)Nt--,ct+=Xt[Nt].vol;else break}Yt=((ii=Xt[xt])==null?void 0:ii.price)||Wt,gn=((Bt=Xt[Nt])==null?void 0:Bt.price)||Wt}const Bi=Math.max(Re*T+z+b+45,130),On=Math.max((At+1)*T+z+b+45,180);let $i=null,Po=null;const Pn=[],_n=At,Br=_n<26?String.fromCharCode(65+_n):"A"+String.fromCharCode(65+_n-26),Ii=[];if(Object.entries(Ce).forEach(([Ct,ct])=>{const xt=parseFloat(Ct);ct.has("A")&&Pn.push({price:xt,key:Ct}),ct.has(Br)&&Ii.push({price:xt,key:Ct})}),Pn.length>0){const Ct=(Math.max(...Pn.map(xt=>xt.price))+Math.min(...Pn.map(xt=>xt.price)))/2;let ct=Pn[0];Pn.forEach(xt=>{Math.abs(xt.price-Ct)<Math.abs(ct.price-Ct)&&(ct=xt)}),$i=ct.key}if(Ii.length>0){const Ct=(Math.max(...Ii.map(xt=>xt.price))+Math.min(...Ii.map(xt=>xt.price)))/2;let ct=Ii[0];Ii.forEach(xt=>{Math.abs(xt.price-Ct)<Math.abs(ct.price-Ct)&&(ct=xt)}),Po=ct.key}let Zi=null;const yo=[],qi=[];if(Object.entries(Ce).forEach(([Ct,ct])=>{const xt=parseFloat(Ct);ct.has("A")&&yo.push(xt),ct.has("B")&&qi.push(xt)}),yo.length>0&&qi.length>0){const Ct=Math.max(...yo),ct=Math.min(...yo),xt=Math.max(...qi),Nt=Math.min(...qi),bn=Ct-ct,vn=xt-Nt,Yn=Math.min(Ct,xt),ht=Math.max(ct,Nt),yt=Math.max(0,Yn-ht),Pt=Math.min(bn,vn);Pt>0?Zi=Math.round(yt/Pt*100):yt>0?Zi=100:Zi=0}return{...ee,lettersByPrice:Ce,volumeByPrice:Ye,volumeByPriceCoarse:Qe,deltaByPrice:$t,maxVol:Ft,dayVPOC:Wt,tpoPOC:Qt,pocPriceKey:it,openPriceKey:$i,closePriceKey:Po,abOverlap:Zi,volVAH:Yt,volVAL:gn,maxLetters:Math.max(Re,1),maxPeriod:At,width:pe==="expanded"?On:Bi,open_type:se(ee)}});let Se=0,be=999999;ae.forEach(ee=>{ee.high>Se&&(Se=ee.high),ee.low<be&&(be=ee.low)}),Se=Math.ceil(Se/L)*L+L*3,be=Math.floor(be/L)*L-L*3;const Xe=[];for(let ee=Se;ee>=be;ee-=L)Xe.push(ee);let Mt=0;const St=de.map(ee=>{const Ee=Mt;return Mt+=ee.width,Ee}),ve=Mt;let Oe=0;const Ve=(ee,Ee)=>{if(!Ee)return;const Re=Ee.getBoundingClientRect();Oe=Ee.scrollLeft;const At=Ee.scrollTop,Ce=ee.clientX-Re.left,Ye=Ce+Oe,Qe=ee.clientY-Re.top,$t=Qe-36+At;let jt=de.length-1;for(let kt=0;kt<de.length;kt++)if(Ye<St[kt]+de[kt].width){jt=kt;break}const Vt=Math.floor($t/re),Qt=Xe[Vt]||0;Fe({show:!0,x:Ce,y:Qe,clientX:ee.clientX,clientY:ee.clientY,chartLeft:Re.left,chartTop:Re.top,chartRight:Re.right,chartBottom:Re.bottom,scrollLeft:Oe,scrollTop:At,price:Qt,dayIdx:jt,day:de[jt]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[I.show&&I.day&&He&&e.jsxs("div",{style:{position:"absolute",left:I.x+65,top:Math.max(10,I.y-140),background:"rgba(20,20,35,0.95)",border:"1px solid rgba(147,112,219,0.5)",borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",backdropFilter:"blur(12px)",pointerEvents:"none",minWidth:180},children:[e.jsxs("div",{style:{fontSize:12,color:"#ba68c8",fontWeight:700,marginBottom:4},children:[(Tt=I.day)==null?void 0:Tt.weekday," ",(dt=I.day)==null?void 0:dt.date]}),e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:6},children:_?"09:30 - 16:15 ET":"18:00 - 17:00 ET"}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:((Rt=I.price)==null?void 0:Rt.toFixed(1))||"--"}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:typeof((Lt=I.day)==null?void 0:Lt.poc)=="number"?I.day.poc.toFixed(1):"--"}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((Jt=I.day)==null?void 0:Jt.vah)=="number"?I.day.vah.toFixed(1):"--"}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((lt=I.day)==null?void 0:lt.val)=="number"?I.day.val.toFixed(1):"--"}),e.jsx("span",{children:"IB H:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((bt=I.day)==null?void 0:bt.ib_high)=="number"?I.day.ib_high.toFixed(1):"--"}),e.jsx("span",{children:"IB L:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:typeof((en=I.day)==null?void 0:en.ib_low)=="number"?I.day.ib_low.toFixed(1):"--"}),e.jsx("span",{children:"IB%:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:typeof((je=I.day)==null?void 0:je.ib_high)=="number"&&typeof((V=I.day)==null?void 0:V.ib_low)=="number"&&((ce=I.day)==null?void 0:ce.high)>(($e=I.day)==null?void 0:$e.low)?((I.day.ib_high-I.day.ib_low)/(I.day.high-I.day.low)*100).toFixed(0)+"%":"--"})]}),e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",margin:"6px 0"}}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 12px"},children:[e.jsx("span",{children:"VP VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:typeof((nt=I.day)==null?void 0:nt.volVAH)=="number"?I.day.volVAH.toFixed(1):"--"}),e.jsx("span",{children:"VP VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:typeof((wt=I.day)==null?void 0:wt.volVAL)=="number"?I.day.volVAL.toFixed(1):"--"}),e.jsx("span",{children:"Day Type:"}),e.jsx("span",{style:{color:K[(pt=I.day)==null?void 0:pt.day_type]||"#888",fontWeight:600},children:((vt=(It=I.day)==null?void 0:It.day_type)==null?void 0:vt.replace("_"," "))||"--"}),e.jsx("span",{children:"Open Type:"}),e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:((Ut=(gt=I.day)==null?void 0:gt.open_type)==null?void 0:Ut.replace("_"," "))||"--"}),e.jsx("span",{children:"Shape:"}),e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:((Ot=(nn=I.day)==null?void 0:nn.profile_shape)==null?void 0:Ot.replace("_"," "))||"--"}),e.jsx("span",{children:"AB Overlap:"}),e.jsx("span",{style:{color:((Gt=I.day)==null?void 0:Gt.abOverlap)>=50?"#00ff88":"#ff4466",fontWeight:600},children:typeof((Ht=I.day)==null?void 0:Ht.abOverlap)=="number"?I.day.abOverlap+"%":"--"})]})]}),e.jsxs("div",{style:{width:58,flexShrink:0,background:"linear-gradient(90deg, rgba(18,18,30,0.98) 0%, rgba(12,12,22,0.95) 100%)",borderRight:"1px solid rgba(147,112,219,0.25)"},children:[e.jsx("div",{style:{height:36,background:"linear-gradient(180deg, rgba(147,112,219,0.12) 0%, rgba(147,112,219,0.05) 100%)",borderBottom:"1px solid rgba(147,112,219,0.25)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("span",{style:{fontSize:8,color:"rgba(147,112,219,0.6)",fontWeight:600,letterSpacing:"0.5px"},children:"PRICE"})}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-4w",children:Xe.map(ee=>{const Ee=ee%20===0,Re=ee%100===0;return e.jsx("div",{style:{height:re,fontSize:Re?10:9,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",color:Re?"rgba(147,112,219,0.9)":Ee?"#666":"transparent",fontWeight:Re?600:400,borderBottom:Re?"1px solid rgba(147,112,219,0.1)":"none"},children:Ee?ee.toFixed(0):""},ee)})})]}),e.jsxs("div",{id:"tpo-chart-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:ee=>{const Ee=document.getElementById("price-scale-4w");Ee&&(Ee.scrollTop=ee.target.scrollTop)},onMouseMove:ee=>Ve(ee,ee.currentTarget),onClick:()=>te(!He),onMouseLeave:()=>{He||Fe({...I,show:!1})},ref:ee=>{le.current=ee,ee&&!v.current&&ve>ee.clientWidth&&(ee.scrollLeft=ve-ee.clientWidth,v.current=!0)},children:[I.show&&I.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:I.chartLeft+50,right:window.innerWidth-I.chartRight,height:1,top:I.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:I.clientX,top:I.chartTop,height:I.chartBottom-I.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:de.map((ee,Ee)=>e.jsxs("div",{style:{width:ee.width,flexShrink:0,textAlign:"center",padding:"6px 2px",borderRight:"1px solid rgba(147,112,219,0.2)",background:I.dayIdx===Ee?"rgba(186,104,200,0.2)":"transparent"},children:[e.jsx("div",{style:{fontSize:10,color:"#ba68c8",fontWeight:700},children:ee.weekday}),e.jsx("div",{style:{fontSize:8,color:"#666"},children:ee.date.slice(5)})]},ee.date))}),e.jsxs("div",{style:{position:"relative"},children:[Xe.map((ee,Ee)=>e.jsx("div",{style:{display:"flex",height:re,borderBottom:ee%20===0?"1px solid rgba(147,112,219,0.12)":"none",background:I.price===ee?"rgba(186,104,200,0.06)":"transparent"},children:de.map((Re,At)=>{const Ce=Re.lettersByPrice[ee]?[...Re.lettersByPrice[ee]].sort():[],Ye=Re.vah&&Re.val&&ee<=Re.vah&&ee>=Re.val;(Re.high+Re.low)/2;const Qe=Re.openPriceKey&&ee.toString()===Re.openPriceKey,$t=Re.maxPeriod>=0?Re.maxPeriod<26?String.fromCharCode(65+Re.maxPeriod):"A"+String.fromCharCode(65+Re.maxPeriod-26):null,jt=Re.closePriceKey&&ee.toString()===Re.closePriceKey,Vt=Re.pocPriceKey&&ee.toString()===Re.pocPriceKey,kt=Re.close&&Re.open&&Re.close>=Re.open?"#00ff88":"#ff4466";for(let it=0;it<xe;it++){const Wt=ee-it*M;Re.volumeByPrice[Wt],Re.dayVPOC&&Math.abs(Wt-Re.dayVPOC)<M,Re.volVAH&&Math.abs(Wt-Re.volVAH)<M,Re.volVAL&&Math.abs(Wt-Re.volVAL)<M}return e.jsx("div",{style:{width:Re.width,flexShrink:0,height:re,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.15)",position:"relative",paddingLeft:14,paddingRight:b+z+14},children:pe==="expanded"?e.jsx("div",{style:{position:"relative",width:(Re.maxPeriod+1)*T,height:re-2},children:Ce.map((it,Wt)=>{const Ft=it.length===1?it.charCodeAt(0)-65:26+(it.charCodeAt(0)-65)*26+(it.charCodeAt(1)-65),Yt=it==="A"&&Qe,gn=it===$t&&jt&&!Yt,Xt=Vt?"#000":Yt?"#fff":gn?"#000":Ye?kt:"#888",Ln=Vt?"#ffffff":Yt?"rgba(100,100,100,0.6)":gn?kt:Ye?`${kt}30`:"rgba(136,136,136,0.25)",mn=Vt||Yt?"1px solid #fff":gn?`1px solid ${kt}`:Ye?`1px solid ${kt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{position:"absolute",left:Ft*T,width:T-1,height:re-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:Xt,background:Ln,borderRadius:2,border:mn},children:it},Wt)})}):Ce.map((it,Wt)=>{const Ft=it==="A"&&Qe,Yt=it===$t&&jt&&!Ft,gn=Vt?"#000":Ft?"#fff":Yt?"#000":Ye?kt:"#888",Xt=Vt?"#ffffff":Ft?"rgba(100,100,100,0.6)":Yt?kt:Ye?`${kt}30`:"rgba(136,136,136,0.25)",Ln=Vt||Ft?"1px solid #fff":Yt?`1px solid ${kt}`:Ye?`1px solid ${kt}50`:"1px solid rgba(136,136,136,0.4)";return e.jsx("span",{style:{width:T,height:re-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:700,color:gn,background:Xt,borderRadius:2,marginRight:1,border:Ln},children:it},Wt)})},`${Re.date}-${ee}`)})},ee)),de.map((ee,Ee)=>{const Re=St[Ee],At=Xe.length*re,Ce=(ee.high+ee.low)/2,Ye=jt=>{const Vt=Math.floor(jt/L)*L,Qt=(Se-Vt)/L,kt=1-(jt-Vt)/L;return(Qt+kt)*re},Qe=Object.entries(ee.volumeByPrice||{}).map(([jt,Vt])=>{var it,Wt;const Qt=parseFloat(jt),kt=((it=ee.deltaByPrice)==null?void 0:it[jt])??((Wt=ee.deltaByPrice)==null?void 0:Wt[Qt]);return{price:Qt,vol:Vt,delta:kt}}).filter(jt=>jt.vol>0).sort((jt,Vt)=>Vt.price-jt.price),$t=Math.max(...Qe.map(jt=>jt.vol),1);return e.jsxs(Li.Fragment,{children:[e.jsx("div",{style:{position:"absolute",left:Re+ee.width-b-10,top:0,width:b,height:At,borderLeft:"1px solid rgba(147,112,219,0.25)",overflow:"hidden"},children:Qe.map((jt,Vt)=>{const Qt=Ye(jt.price),kt=1,it=ee.dayVPOC&&Math.abs(jt.price-ee.dayVPOC)<1,Wt=ee.volVAH&&Math.abs(jt.price-ee.volVAH)<1,Ft=ee.volVAL&&Math.abs(jt.price-ee.volVAL)<1,gn=jt.delta!==void 0&&jt.delta!==null&&jt.delta!==0?jt.delta>0:jt.price>Ce;return e.jsx("div",{style:{position:"absolute",top:Qt,left:4,width:`${Math.min(jt.vol/$t*95,95)}%`,height:kt,background:it?"#ff9900":Wt?"#00ff88":Ft?"#ff4466":gn?"#00dd77":"#cc3366",opacity:.85}},Vt)})}),e.jsx("div",{style:{position:"absolute",left:Re+ee.width-8,top:Ye(ee.close||ee.low)-5,fontSize:8,color:"#666",fontWeight:500,pointerEvents:"none",zIndex:5},children:"4pm"})]},`vp-${Ee}`)}),de.map((ee,Ee)=>{const Re=Ce=>{const Ye=Math.floor(Ce/L)*L,Qe=(Se-Ye)/L,$t=1-(Ce-Ye)/L;return(Qe+$t)*re},At=St[Ee];return(ee.high+ee.low)/2,e.jsxs(Li.Fragment,{children:[ee.ib_high&&ee.ib_low&&e.jsx("div",{style:{position:"absolute",left:At+7,top:Re(ee.ib_high),width:2,height:Re(ee.ib_low)-Re(ee.ib_high),background:"#ffffff",opacity:.8,zIndex:10,pointerEvents:"none"}}),ee.volVAH&&e.jsx("div",{style:{position:"absolute",left:At+ee.width-8,top:Re(ee.volVAH)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""}),ee.volVAL&&e.jsx("div",{style:{position:"absolute",left:At+ee.width-8,top:Re(ee.volVAL)-6,fontSize:9,color:"#ffffff",fontWeight:700,zIndex:15,pointerEvents:"none"},children:""})]},`markers-${ee.date}`)})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Range ",e.jsx("span",{style:{color:"#9370DB",fontWeight:600},children:(Se-be).toFixed(0)})]}),e.jsxs("span",{style:{color:"#666"},children:["Days ",e.jsx("span",{style:{color:"#00aaff",fontWeight:600},children:ae.length})]}),e.jsx("span",{style:{color:"#fff",background:"#fff",padding:"0 4px",borderRadius:2},children:e.jsx("span",{style:{color:"#000"},children:"POC"})}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" IB"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():s==="session_view"&&(n!=null&&n.sessions)?(()=>{var b,z,E,se,de,Se,be,Xe,Mt,St;const _=Object.entries((n==null?void 0:n.sessions)||{}).filter(([ve,Oe])=>Oe.profiles&&Object.keys(Oe.profiles).length>0);if(_.length===0)return e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No session data yet..."});const W=.5,ue=14,fe=11,ye=45,Ue=16,H=11,ae=ve=>ve.length===1?ve.charCodeAt(0)-65:26+(ve.charCodeAt(0)-65)*26+(ve.charCodeAt(1)-65),we=_.map(([ve,Oe])=>{const Ve=Oe.profiles||{};let Tt=0,dt=0;const Rt={},Lt={};Object.entries(Ve).forEach(([je,V])=>{const ce=Math.floor(parseFloat(je)/W)*W;Rt[ce]||(Rt[ce]=new Set),V.forEach($e=>{Rt[ce].add($e);const nt=ae($e);nt>dt&&(dt=nt)}),Lt[ce]=(Lt[ce]||0)+V.length}),Object.values(Rt).forEach(je=>{je.size>Tt&&(Tt=je.size)});let Jt=Oe.poc,lt=0;Object.entries(Lt).forEach(([je,V])=>{V>lt&&(lt=V,Jt=parseFloat(je))});const bt=Math.max(Tt*fe+Ue+ye+16,120),en=Math.max((dt+1)*H+Ue+ye+16,150);return{key:ve,...Oe,lettersByPrice:Rt,volumeByPrice:Lt,maxVol:lt,sessionVPOC:Jt,maxLetters:Math.max(Tt,1),maxPeriod:dt,width:pe==="expanded"?en:bt}});let k=0,q=999999;_.forEach(([ve,Oe])=>{Oe.high>k&&(k=Oe.high),Oe.low<q&&(q=Oe.low)}),k=Math.ceil(k/W)*W+W*5,q=Math.floor(q/W)*W-W*5;const L=[];for(let ve=k;ve>=q;ve-=W)L.push(ve);let M=0;const xe=we.map(ve=>{const Oe=M;return M+=ve.width,Oe});let re=0;const T=(ve,Oe)=>{if(!Oe)return;const Ve=Oe.getBoundingClientRect();re=Oe.scrollLeft;const Tt=Oe.scrollTop,dt=ve.clientX-Ve.left,Rt=dt+re,Lt=ve.clientY-Ve.top,Jt=Lt-36+Tt;let lt=we.length-1;for(let je=0;je<we.length;je++)if(Rt<xe[je]+we[je].width){lt=je;break}const bt=Math.floor(Jt/ue),en=L[bt]||0;Fe({show:!0,x:dt,y:Lt,clientX:ve.clientX,clientY:ve.clientY,chartLeft:Ve.left,chartTop:Ve.top,chartRight:Ve.right,chartBottom:Ve.bottom,scrollLeft:re,scrollTop:Tt,price:en,dayIdx:lt,day:we[lt]})};return e.jsxs("div",{style:{display:"flex",height:"calc(100vh - 340px)",minHeight:300,maxHeight:"calc(100vh - 340px)",background:"linear-gradient(180deg, rgba(12,12,20,0.98) 0%, rgba(8,8,14,0.98) 100%)",borderRadius:12,border:"1px solid rgba(147,112,219,0.2)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",overflow:"hidden",position:"relative"},children:[I.show&&I.day&&He&&e.jsxs("div",{style:{position:"absolute",left:Math.max(60,Math.min(I.x+60,500)),top:Math.max(50,Math.min(I.y,300)),background:"rgba(20,20,35,0.95)",border:`1px solid ${((b=I.day)==null?void 0:b.color)||"#9370DB"}`,borderRadius:8,padding:"10px 14px",zIndex:100,boxShadow:"0 4px 24px rgba(0,0,0,0.6)",pointerEvents:"none"},children:[e.jsx("div",{style:{fontSize:12,color:((z=I.day)==null?void 0:z.color)||"#ba68c8",fontWeight:700,marginBottom:6},children:(E=I.day)==null?void 0:E.display}),e.jsxs("div",{style:{fontSize:10,color:"#888",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"3px 16px"},children:[e.jsx("span",{children:"Price:"}),e.jsx("span",{style:{color:"#fff",fontWeight:600},children:(se=I.price)==null?void 0:se.toFixed(1)}),e.jsx("span",{children:"POC:"}),e.jsx("span",{style:{color:"#ffaa00",fontWeight:600},children:(Se=(de=I.day)==null?void 0:de.poc)==null?void 0:Se.toFixed(1)}),e.jsx("span",{children:"VAH:"}),e.jsx("span",{style:{color:"#00ff88",fontWeight:600},children:(Xe=(be=I.day)==null?void 0:be.vah)==null?void 0:Xe.toFixed(1)}),e.jsx("span",{children:"VAL:"}),e.jsx("span",{style:{color:"#ff4466",fontWeight:600},children:(St=(Mt=I.day)==null?void 0:Mt.val)==null?void 0:St.toFixed(1)})]})]}),e.jsxs("div",{style:{width:50,flexShrink:0,background:"rgba(15,15,25,0.95)",borderRight:"1px solid rgba(147,112,219,0.2)"},children:[e.jsx("div",{style:{height:36,background:"rgba(147,112,219,0.08)",borderBottom:"1px solid rgba(147,112,219,0.2)"}}),e.jsx("div",{style:{overflowY:"hidden",height:"calc(100% - 36px)"},id:"price-scale-sess",children:L.map(ve=>e.jsx("div",{style:{height:ue,fontSize:9,textAlign:"right",paddingRight:4,color:"#555",lineHeight:`${ue}px`},children:ve%10===0?ve.toFixed(0):""},ve))})]}),e.jsxs("div",{id:"tpo-session-main",className:"tpo-scroll-container",style:{flex:1,overflow:"auto",position:"relative",cursor:"crosshair"},onScroll:ve=>{const Oe=document.getElementById("price-scale-sess");Oe&&(Oe.scrollTop=ve.target.scrollTop)},onMouseMove:ve=>T(ve,ve.currentTarget),onClick:()=>te(!He),onMouseLeave:()=>{He||Fe({...I,show:!1})},children:[I.show&&I.clientX&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{position:"fixed",left:I.chartLeft+50,right:window.innerWidth-I.chartRight,height:1,top:I.clientY,background:"repeating-linear-gradient(90deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}}),e.jsx("div",{style:{position:"fixed",left:I.clientX,top:I.chartTop,height:I.chartBottom-I.chartTop,width:1,background:"repeating-linear-gradient(180deg, rgba(186,104,200,0.6) 0px, rgba(186,104,200,0.6) 3px, transparent 3px, transparent 6px)",pointerEvents:"none",zIndex:50}})]}),e.jsx("div",{style:{display:"flex",position:"sticky",top:0,zIndex:20,background:"rgba(18,18,30,0.98)",borderBottom:"1px solid rgba(147,112,219,0.3)"},children:we.map((ve,Oe)=>e.jsxs("div",{style:{width:ve.width,flexShrink:0,textAlign:"center",padding:"8px 4px",borderRight:"1px solid rgba(147,112,219,0.2)",background:I.dayIdx===Oe?`${ve.color}20`:"transparent"},children:[e.jsx("div",{style:{fontSize:11,color:ve.color,fontWeight:700},children:ve.display}),e.jsxs("div",{style:{fontSize:8,color:"#666"},children:[ve.period_count," periods"]})]},ve.key))}),e.jsxs("div",{style:{position:"relative"},children:[L.map((ve,Oe)=>e.jsx("div",{style:{display:"flex",height:ue,borderBottom:ve%10===0?"1px solid rgba(147,112,219,0.12)":"none",background:I.price===ve?"rgba(186,104,200,0.06)":"transparent"},children:we.map((Ve,Tt)=>{var V;const dt=Ve.lettersByPrice[ve]?[...Ve.lettersByPrice[ve]].sort():[],Rt=Ve.volumeByPrice[ve]||0,Lt=Ve.maxVol>0?Rt/Ve.maxVol*100:0,Jt=Ve.sessionVPOC&&Math.abs(ve-Ve.sessionVPOC)<W,lt=Ve.vah&&Ve.val&&ve<=Ve.vah&&ve>=Ve.val,bt=((V=Ve.deltaByPrice)==null?void 0:V[ve])||0,je=Ve.deltaByPrice&&Object.keys(Ve.deltaByPrice).length>0?bt>=0:ve>(Ve.high+Ve.low)/2;return e.jsxs("div",{style:{width:Ve.width,flexShrink:0,height:ue,display:"flex",alignItems:"center",borderRight:"1px solid rgba(147,112,219,0.1)",position:"relative",paddingLeft:14,paddingRight:ye+Ue+14},children:[pe==="expanded"?e.jsx("div",{style:{display:"flex",position:"relative",width:(Ve.maxPeriod+1)*H,height:ue-2},children:dt.map((ce,$e)=>{const nt=ae(ce);return e.jsx("span",{style:{position:"absolute",left:nt*H,width:H-1,height:ue-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:lt?"#00ee88":Ve.color,background:`${Ve.color}30`,borderRadius:2,border:`1px solid ${Ve.color}50`},children:ce},$e)})}):dt.map((ce,$e)=>e.jsx("span",{style:{width:fe,height:ue-2,display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:lt?"#00ee88":Ve.color,background:`${Ve.color}30`,borderRadius:2,marginRight:1,border:`1px solid ${Ve.color}50`},children:ce},$e)),Rt>0&&e.jsx("div",{style:{position:"absolute",right:12,width:ye,height:ue-2,display:"flex",alignItems:"center",paddingLeft:Ue,borderLeft:"1px solid rgba(147,112,219,0.15)"},children:e.jsx("div",{style:{width:`${Lt}%`,height:1,marginBottom:1,opacity:.9,background:Jt?"#ff9900":je?"#00ee88":"#ff2266",borderRadius:0}})})]},`${Ve.key}-${ve}`)})},ve)),we.map((ve,Oe)=>{const Ve=Lt=>{const Jt=Math.floor(Lt/W)*W,lt=(k-Jt)/W,bt=1-(Lt-Jt)/W;return(lt+bt)*ue},Tt=xe[Oe],dt=(ve.high+ve.low)/2,Rt=[];return ve.poc&&Rt.push({price:ve.poc,color:"#ffcc00",label:"",type:"poc"}),Rt.push({price:dt,color:"#00aaff",label:"",type:"mid"}),ve.vah&&Rt.push({price:ve.vah,color:"#00ff88",label:"",type:"vah"}),ve.val&&Rt.push({price:ve.val,color:"#ff4466",label:"",type:"val"}),Rt.map(Lt=>e.jsx("div",{style:{position:"absolute",left:Tt+1,top:Ve(Lt.price)-5,color:Lt.color,fontSize:Lt.type==="mid"?10:8,fontWeight:700,zIndex:10,textShadow:"0 0 3px rgba(0,0,0,0.8)",pointerEvents:"none"},children:Lt.label},`${ve.key}-${Lt.type}`))})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:0,left:50,right:0,height:28,background:"linear-gradient(180deg, rgba(20,20,35,0.95) 0%, rgba(15,15,25,0.98) 100%)",borderTop:"1px solid rgba(147,112,219,0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:20,fontSize:9},children:[e.jsxs("span",{style:{color:"#666"},children:["Sessions ",e.jsx("span",{style:{color:"#ba68c8",fontWeight:600},children:we.length})]}),e.jsx("span",{style:{color:"#ffcc00"},children:" POC"}),e.jsx("span",{style:{color:"#00aaff"},children:" MID"}),e.jsx("span",{style:{color:"#fff"},children:" VAH"}),e.jsx("span",{style:{color:"#fff"},children:" VAL"}),e.jsx("span",{style:{color:"#fff"},children:" Open"}),e.jsx("span",{style:{color:"#00ff88"},children:" Close"}),e.jsx("span",{style:{color:"#ff4466"},children:" Close"})]})]})})():g.length===0?e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No TPO data yet. Waiting for trades..."}):e.jsxs(e.Fragment,{children:[(()=>{const _=Math.max(...g.map(we=>we.letters.length),1),W=Math.max(...g.flatMap(we=>we.letters.map(k=>ft(k))),0),ue=11,fe=et||(n==null?void 0:n.tick_size)||.1,ye=(Y==null?void 0:Y.open_price)||(n==null?void 0:n.open_price),Ue=Math.max(...g.map(we=>we.price)),H=Math.min(...g.map(we=>we.price)),ae=(Ue+H)/2;return g.map(({price:we,letters:k})=>{const q=(Y==null?void 0:Y.poc)&&Math.abs(we-Y.poc)<fe,L=(Y==null?void 0:Y.vah)&&Math.abs(we-Y.vah)<fe,M=(Y==null?void 0:Y.val)&&Math.abs(we-Y.val)<fe,xe=(Y==null?void 0:Y.vah)&&(Y==null?void 0:Y.val)&&we<=Y.vah&&we>=Y.val,re=(Y==null?void 0:Y.ib_high)&&(Y==null?void 0:Y.ib_low)&&we<=Y.ib_high&&we>=Y.ib_low;Y!=null&&Y.ib_high&&Math.abs(we-Y.ib_high)<fe,Y!=null&&Y.ib_low&&Math.abs(we-Y.ib_low)<fe;const T=k.length===1,b=(n==null?void 0:n.current_price)&&Math.abs(we-n.current_price)<fe,z=ye&&Math.abs(we-ye)<fe,E=Math.abs(we-ae)<fe;return e.jsxs("div",{style:{display:"flex",alignItems:"center",height:16,position:"relative",background:re?"rgba(0, 188, 212, 0.08)":"transparent"},children:[e.jsx("div",{style:{width:55,textAlign:"right",paddingRight:6,fontSize:9,color:q?"#fff":b?"#00ff88":"#555",fontWeight:q||b?700:400,flexShrink:0},children:we.toFixed(1)}),e.jsxs("div",{style:{width:40,fontSize:8,display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:4,flexShrink:0,gap:2},children:[L&&!q&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAH"}),M&&!q&&e.jsx("span",{style:{color:"#00aaff",fontSize:7},children:"VAL"}),E&&!q&&e.jsx("span",{style:{color:"#ff9800",fontSize:7},children:"Mid"}),z&&!q&&e.jsx("span",{style:{color:"#888",fontSize:7},children:"Open"}),b&&e.jsx("span",{style:{color:"#00ff88"},children:""})]}),e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",gap:pe==="compact"?1:0,position:"relative",minHeight:14,minWidth:pe==="expanded"?(W+1)*ue:"auto",overflowX:pe==="expanded"?"visible":"hidden"},children:pe==="compact"?k.map((se,de)=>{const Se=se==="A"&&z;return e.jsx("div",{style:{width:13,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:q?"#ffffff":Se?"rgba(100,100,100,0.6)":T?"rgba(255,68,102,0.9)":xe?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:8,fontWeight:600,color:q?"#1a1a2e":"#fff",flexShrink:0,border:q?"none":Se?"1px solid #fff":xe?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:se},`${we}-${se}-${de}`)}):e.jsx("div",{style:{position:"relative",width:(W+1)*ue,height:14},children:k.map((se,de)=>{const Se=ft(se),be=se==="A"&&z;return e.jsx("div",{style:{position:"absolute",left:Se*ue,width:ue-1,height:13,display:"flex",alignItems:"center",justifyContent:"center",background:q?"#ffffff":be?"rgba(100,100,100,0.6)":T?"rgba(255,68,102,0.9)":xe?"rgba(186, 104, 200, 0.85)":"rgba(102,102,102,0.6)",borderRadius:1,fontSize:7,fontWeight:600,color:q?"#1a1a2e":"#fff",border:q?"none":be?"1px solid #fff":xe?"1px solid rgba(156, 39, 176, 0.3)":"1px solid rgba(102,102,102,0.4)"},children:se},`${we}-${se}-${de}`)})})}),e.jsx("div",{style:{width:60,height:12,display:"flex",alignItems:"center",justifyContent:"flex-start",paddingLeft:4,flexShrink:0},children:e.jsx("div",{style:{height:10,width:`${k.length/_*100}%`,background:q?"rgba(255,255,255,0.6)":xe?"rgba(186, 104, 200, 0.5)":"rgba(100,100,120,0.4)",borderRadius:1}})})]},we)})})(),(Y==null?void 0:Y.ib_high)&&(Y==null?void 0:Y.ib_low)&&e.jsxs("div",{style:{marginTop:8,padding:"6px 10px",background:"rgba(0, 188, 212, 0.15)",borderRadius:4,border:"1px solid rgba(0, 188, 212, 0.3)",display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsx("span",{style:{color:"#00bcd4"},children:"IB Range"}),e.jsxs("span",{style:{color:"#fff"},children:[(vi=Y.ib_high)==null?void 0:vi.toFixed(1)," - ",(Ri=Y.ib_low)==null?void 0:Ri.toFixed(1),e.jsxs("span",{style:{color:"#888",marginLeft:8},children:["(",(Y.ib_high-Y.ib_low||0).toFixed(1)," pts)"]})]})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"rgba(20,20,28,0.6)",borderRadius:8,border:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"HL range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:Y!=null&&Y.high&&(Y!=null&&Y.low)?(Y.high-Y.low).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VA range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:Y!=null&&Y.vah&&(Y!=null&&Y.val)?(Y.vah-Y.val).toFixed(1):"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAH"}),e.jsx("div",{style:{color:"#00ff88",fontFamily:"monospace"},children:((Ni=Y==null?void 0:Y.vah)==null?void 0:Ni.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"VAL"}),e.jsx("div",{style:{color:"#ff4466",fontFamily:"monospace"},children:((ti=Y==null?void 0:Y.val)==null?void 0:ti.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"POC"}),e.jsx("div",{style:{color:"#ffaa00",fontFamily:"monospace"},children:((ni=Y==null?void 0:Y.poc)==null?void 0:ni.toFixed(1))||"--"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12,fontSize:11,marginTop:10,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"Total vol"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:Y!=null&&Y.volume?Y.volume>=1e3?(Y.volume/1e3).toFixed(2)+"K":Y.volume:"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB high"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((zi=Y==null?void 0:Y.ib_high)==null?void 0:zi.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB low"}),e.jsx("div",{style:{color:"#00aaff",fontFamily:"monospace"},children:((Qi=Y==null?void 0:Y.ib_low)==null?void 0:Qi.toFixed(1))||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#666",fontSize:9,marginBottom:2},children:"IB range"}),e.jsx("div",{style:{color:"#fff",fontFamily:"monospace"},children:Y!=null&&Y.ib_high&&(Y!=null&&Y.ib_low)?(Y.ib_high-Y.ib_low).toFixed(1):"--"})]})]})]})]})})]}),!B&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Day Type"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[e.jsx("div",{style:{padding:"8px 16px",background:`${K[Z.day_type]||"#888"}20`,border:`1px solid ${K[Z.day_type]||"#888"}`,borderRadius:8,color:K[Z.day_type]||"#888",fontWeight:700,fontSize:14},children:Z.day_type_name||"Developing"}),e.jsxs("div",{style:{color:"#8b8b8b",fontSize:12},children:[Z.day_type_confidence||0,"%"]})]}),Z.day_type_scores&&Object.entries(Z.day_type_scores).map(([_,W])=>e.jsxs("div",{style:{marginBottom:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:11,marginBottom:2},children:[e.jsx("span",{style:{color:"#aaa",textTransform:"capitalize"},children:_.replace("_"," ")}),e.jsxs("span",{style:{color:K[_]||"#888"},children:[W,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min(W,100)}%`,background:K[_]||"#888",borderRadius:2}})})]},_)),Z.trade_setup&&e.jsxs("div",{style:{marginTop:12,padding:10,background:"rgba(0,255,136,0.08)",borderRadius:6,border:"1px solid rgba(0,255,136,0.2)"},children:[e.jsx("div",{style:{fontSize:10,color:"#00ff88",marginBottom:4},children:"TRADE SETUP"}),e.jsx("div",{style:{fontSize:12,color:"#ccc"},children:Z.trade_setup})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Open Type (RTH)"}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:e.jsx("div",{style:{padding:"8px 16px",background:`${$[Z.open_type]||"#888"}20`,border:`1px solid ${$[Z.open_type]||"#888"}`,borderRadius:8,color:$[Z.open_type]||"#888",fontWeight:700,fontSize:14},children:((Di=Z.open_type_info)==null?void 0:Di.name)||"Developing"})}),Z.open_type_info&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:12,color:"#aaa",marginBottom:8},children:Z.open_type_info.description}),e.jsxs("div",{style:{display:"flex",gap:16,fontSize:11},children:[e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Conviction: "}),e.jsx("span",{style:{color:$[Z.open_type]||"#888",fontWeight:600},children:((Hi=Z.open_type_info)==null?void 0:Hi.conviction)||"N/A"})]}),(n==null?void 0:n.open_direction)&&e.jsxs("div",{children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"Direction: "}),e.jsx("span",{style:{color:(n==null?void 0:n.open_direction)==="up"?"#00ff88":"#ff4466",fontWeight:600},children:(Gn=n==null?void 0:n.open_direction)==null?void 0:Gn.toUpperCase()})]})]})]}),(n==null?void 0:n.ab_overlap)!==void 0&&e.jsxs("div",{style:{marginTop:12,fontSize:11},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{color:"#8b8b8b"},children:"AB Overlap"}),e.jsxs("span",{style:{color:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88"},children:[n==null?void 0:n.ab_overlap,"%"]})]}),e.jsx("div",{style:{height:4,background:"rgba(255,255,255,0.1)",borderRadius:2},children:e.jsx("div",{style:{height:"100%",width:`${Math.min((n==null?void 0:n.ab_overlap)||0,100)}%`,background:(n==null?void 0:n.ab_overlap)>50?"#ffaa00":"#00ff88",borderRadius:2}})})]})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Profile Shape"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[e.jsx("div",{style:{width:48,height:48,background:"rgba(255,255,255,0.05)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:800,color:((kn=Z.profile_shape_info)==null?void 0:kn.sentiment)==="Bullish"?"#00ff88":((fo=Z.profile_shape_info)==null?void 0:fo.sentiment)==="Bearish"?"#ff4466":"#888"},children:G[Z.profile_shape]||""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:((po=Z.profile_shape_info)==null?void 0:po.sentiment)==="Bullish"?"#00ff88":((ho=Z.profile_shape_info)==null?void 0:ho.sentiment)==="Bearish"?"#ff4466":"#aaa"},children:((uo=Z.profile_shape_info)==null?void 0:uo.name)||"Developing"}),e.jsx("div",{style:{fontSize:11,color:"#8b8b8b"},children:((go=Z.profile_shape_info)==null?void 0:go.sentiment)||"N/A"})]})]}),((xo=Z.profile_shape_info)==null?void 0:xo.description)&&e.jsx("div",{style:{fontSize:11,color:"#888",lineHeight:1.4},children:Z.profile_shape_info.description})]}),e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",padding:16},children:[e.jsx("div",{style:{fontSize:12,color:"#8b8b8b",marginBottom:12,textTransform:"uppercase",letterSpacing:1},children:"Metrics"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"IB Range %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[n!=null&&n.ib_range?(n.ib_range/n.avg_daily_range*100).toFixed(0):"--","%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b"},children:"Range Ext %"}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:"#fff"},children:[((ie=n==null?void 0:n.range_extension_pct)==null?void 0:ie.toFixed(0))||"--","%"]})]})]}),(n==null?void 0:n.ib_high)&&(n==null?void 0:n.ib_low)&&(n==null?void 0:n.ib_range)&&(()=>{const _=n.ib_range,W=Z.day_type||"normal",ue=W==="trend"?2:W==="normal_var"?1.5:W==="neutral"?.5:1,fe=_*ue,ye=n.high||n.ib_high,Ue=n.low||n.ib_low,H=Math.max(0,ye-n.ib_high),ae=Math.max(0,n.ib_low-Ue),we=Math.max(0,fe-H),k=Math.max(0,fe-ae),q=n.ib_high+fe,L=n.ib_low-fe;return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{height:1,background:"rgba(255,255,255,0.1)",marginBottom:12}}),e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:8,textTransform:"uppercase",letterSpacing:1},children:"Price Targets"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[e.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#00ff88",marginBottom:2},children:"Upside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#00ff88"},children:["$",q.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["+",we.toFixed(1)," pts remaining"]})]}),e.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:6,padding:8},children:[e.jsx("div",{style:{fontSize:9,color:"#ff4466",marginBottom:2},children:"Downside Target"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#ff4466"},children:["$",L.toFixed(1)]}),e.jsxs("div",{style:{fontSize:9,color:"#888"},children:["-",k.toFixed(1)," pts remaining"]})]})]}),e.jsxs("div",{style:{fontSize:9,color:"#666",marginTop:8,textAlign:"center"},children:["Based on ",ue,"x IB (",W.replace("_"," "),")"]})]})})()]})]}),e.jsx("div",{style:{gridColumn:"1 / -1",marginTop:20},children:e.jsxs("div",{style:{background:"rgba(20,20,28,0.9)",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)",overflow:"hidden"},children:[e.jsxs("button",{onClick:()=>O(!D),style:{width:"100%",padding:"16px 20px",background:"transparent",border:"none",borderBottom:D?"1px solid rgba(255,255,255,0.08)":"none",color:"#fff",fontSize:14,fontWeight:600,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("span",{style:{fontSize:18},children:""}),e.jsx("span",{children:"Historic TPO Profiles (Last 8 Weeks)"}),p&&e.jsxs("span",{style:{fontSize:11,color:"#8b8b8b",fontWeight:400},children:[p.days," trading days"]})]}),e.jsx("span",{style:{fontSize:18,transform:D?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"},children:""})]}),D&&e.jsx("div",{style:{padding:20},children:x?e.jsxs("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:[e.jsx("div",{style:{fontSize:24,marginBottom:8},children:""}),"Loading historic TPO data..."]}):((Je=p==null?void 0:p.profiles)==null?void 0:Je.length)>0?e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:12,padding:"8px 12px",background:"rgba(30,30,40,0.6)",borderRadius:8},children:[e.jsxs("button",{onClick:()=>De(!Q),style:{display:"flex",alignItems:"center",gap:8,background:"transparent",border:"none",color:"#aaa",cursor:"pointer",fontSize:12,fontWeight:500},children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,background:Q?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.1)",color:Q?"#00ff88":"#888",fontSize:12,fontWeight:700},children:Q?"":"+"}),e.jsxs("span",{style:{color:Q?"#fff":"#888"},children:[Q?"Hide":"Show"," Data Table"]}),e.jsxs("span",{style:{fontSize:10,color:"#666"},children:["(",p.profiles.length," rows)"]})]}),e.jsxs("button",{onClick:()=>{const _=["Date","Day","Open","High","Low","Close","POC","VAH","VAL","IB_High","IB_Low","IB_Range","Range","Day_Type","Shape"],W=p.profiles.map(H=>{var ae,we,k,q,L,M,xe,re,T,b,z;return[H.date,H.weekday,((ae=H.open)==null?void 0:ae.toFixed(2))||"",((we=H.high)==null?void 0:we.toFixed(2))||"",((k=H.low)==null?void 0:k.toFixed(2))||"",((q=H.close)==null?void 0:q.toFixed(2))||"",((L=H.poc)==null?void 0:L.toFixed(2))||"",((M=H.vah)==null?void 0:M.toFixed(2))||"",((xe=H.val)==null?void 0:xe.toFixed(2))||"",((re=H.ib_high)==null?void 0:re.toFixed(2))||"",((T=H.ib_low)==null?void 0:T.toFixed(2))||"",((b=H.ib_range)==null?void 0:b.toFixed(2))||"",((z=H.range)==null?void 0:z.toFixed(2))||"",H.day_type||"",H.profile_shape||""].join(",")}),ue=[_.join(","),...W].join(`
`),fe=new Blob([ue],{type:"text/csv"}),ye=URL.createObjectURL(fe),Ue=document.createElement("a");Ue.href=ye,Ue.download=`tpo_historic_${new Date().toISOString().slice(0,10)}.csv`,Ue.click(),URL.revokeObjectURL(ye)},style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(0,170,255,0.15)",border:"1px solid rgba(0,170,255,0.3)",borderRadius:6,color:"#00aaff",cursor:"pointer",fontSize:11,fontWeight:600},children:[e.jsx("span",{children:""})," Export CSV"]})]}),Q&&e.jsx("div",{style:{overflowX:"auto",marginBottom:20},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255,255,255,0.15)"},children:[e.jsx("th",{style:{padding:"10px 8px",textAlign:"left",color:"#8b8b8b",fontWeight:500},children:"Date"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b",fontWeight:500},children:"Day"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontWeight:600},children:"POC"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAH"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontWeight:600},children:"VAL"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB H"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontWeight:600},children:"IB L"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"High"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#fff"},children:"Low"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b"},children:"Range"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Type"}),e.jsx("th",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:"Shape"})]})}),e.jsx("tbody",{children:p.profiles.map((_,W)=>{var Ue,H,ae,we,k,q,L,M;const ue={normal:"#00aaff",trend:"#ff6600",normal_var:"#00ff88",neutral:"#9370DB",non_trend:"#888888",double_dist:"#ff4466"},fe={normal:"Normal",trend:"Trend",normal_var:"NV",neutral:"Neutral",non_trend:"Non-Tr",double_dist:"DD"},ye={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"};return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.06)",background:W===0?"rgba(0,255,136,0.05)":"transparent"},children:[e.jsx("td",{style:{padding:"10px 8px",color:"#fff",fontFamily:"monospace"},children:_.date}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center",color:"#8b8b8b"},children:_.weekday}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#ffaa00",fontFamily:"monospace",fontWeight:600},children:((Ue=_.poc)==null?void 0:Ue.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((H=_.vah)==null?void 0:H.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#00aaff",fontFamily:"monospace"},children:((ae=_.val)==null?void 0:ae.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((we=_.ib_high)==null?void 0:we.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#9370DB",fontFamily:"monospace"},children:((k=_.ib_low)==null?void 0:k.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((q=_.high)==null?void 0:q.toFixed(2))||"--"}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"right",color:"#fff",fontFamily:"monospace"},children:((L=_.low)==null?void 0:L.toFixed(2))||"--"}),e.jsxs("td",{style:{padding:"10px 8px",textAlign:"right",color:"#8b8b8b",fontFamily:"monospace"},children:["$",((M=_.range)==null?void 0:M.toFixed(2))||"--"]}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:600,background:`${ue[_.day_type]||"#888"}30`,color:ue[_.day_type]||"#888",border:`1px solid ${ue[_.day_type]||"#888"}50`},children:fe[_.day_type]||_.day_type})}),e.jsx("td",{style:{padding:"10px 8px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",width:22,height:22,lineHeight:"22px",textAlign:"center",borderRadius:4,fontSize:12,fontWeight:700,background:`${ye[_.profile_shape]||"#888"}20`,color:ye[_.profile_shape]||"#888",border:`1px solid ${ye[_.profile_shape]||"#888"}50`},children:_.profile_shape})})]},_.date)})})]})}),(()=>{const _=p.profiles,W=_.reduce((H,ae)=>H+(ae.poc||0),0)/_.length||0,ue=_.reduce((H,ae)=>H+(ae.range||0),0)/_.length||0,fe=_.filter(H=>H.ib_range),ye=fe.reduce((H,ae)=>H+ae.ib_range,0)/fe.length||0,Ue=ue>0?ye/ue*100:0;return e.jsxs("div",{style:{marginTop:20,padding:16,background:"rgba(30,30,40,0.6)",borderRadius:8,display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg POC"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#ffaa00",fontFamily:"monospace"},children:["$",W.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",ue.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB Range"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",ye.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Avg IB %"}),e.jsxs("div",{style:{fontSize:14,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[Ue.toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Trend Days"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#ff6600"},children:_.filter(H=>H.day_type==="trend").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Normal Var"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#00ff88"},children:_.filter(H=>H.day_type==="normal_var").length})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:"Non-Trend"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#888"},children:_.filter(H=>H.day_type==="non_trend").length})]})]})})(),(()=>{const _=p.profiles,W=["Mon","Tue","Wed","Thu","Fri"],ue={normal:"#00aaff",non_trend:"#888888",normal_var:"#00ff88",trend:"#ff6600",double_dist:"#ff4466",neutral:"#9370DB"},fe={D:"#00aaff",P:"#00ff88",b:"#ff6600",B:"#ff4466"},ye={};W.forEach(H=>ye[H]=[]),_.forEach(H=>{ye[H.weekday]&&ye[H.weekday].push(H)});const Ue=W.map(H=>{const ae=ye[H];if(ae.length===0)return{day:H,count:0};const we={},k={};ae.forEach(T=>{we[T.day_type]=(we[T.day_type]||0)+1,k[T.profile_shape]=(k[T.profile_shape]||0)+1});const q=Object.entries(we).sort((T,b)=>b[1]-T[1])[0],L=Object.entries(k).sort((T,b)=>b[1]-T[1])[0],M=ae.reduce((T,b)=>T+(b.range||0),0)/ae.length,xe=ae.filter(T=>T.ib_range).reduce((T,b)=>T+b.ib_range,0)/ae.filter(T=>T.ib_range).length||0,re=M>0?xe/M*100:0;return{day:H,count:ae.length,profiles:ae,mostCommonType:q?q[0]:"N/A",typePercent:q?Math.round(q[1]/ae.length*100):0,mostCommonShape:L?L[0]:"N/A",shapePercent:L?Math.round(L[1]/ae.length*100):0,avgRange:M.toFixed(2),avgIbRange:xe.toFixed(2),ibPct:re.toFixed(1),typeCounts:we,shapeCounts:k}});return e.jsxs("div",{style:{marginTop:24},children:[e.jsxs("div",{style:{fontSize:14,fontWeight:600,marginBottom:16,color:"#fff",display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{children:""})," Day of Week Analysis"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:Ue.map(H=>e.jsxs("div",{style:{background:"rgba(30,30,40,0.8)",borderRadius:8,padding:12,border:"1px solid rgba(255,255,255,0.1)",transition:"all 0.2s"},children:[e.jsx("div",{style:{fontSize:16,fontWeight:700,color:"#fff",marginBottom:8},children:H.day}),e.jsxs("div",{style:{fontSize:10,color:"#8b8b8b",marginBottom:4},children:[H.count," samples"]}),H.count>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginTop:8,marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Most Common Type"}),e.jsxs("div",{style:{display:"inline-block",padding:"2px 8px",borderRadius:4,background:`${ue[H.mostCommonType]||"#666"}22`,border:`1px solid ${ue[H.mostCommonType]||"#666"}`,color:ue[H.mostCommonType]||"#666",fontSize:10,fontWeight:600},children:[H.mostCommonType==="normal_var"?"N-Var":H.mostCommonType==="double_dist"?"Dbl-D":H.mostCommonType==="non_trend"?"Non-T":H.mostCommonType.charAt(0).toUpperCase()+H.mostCommonType.slice(1),e.jsxs("span",{style:{marginLeft:4,opacity:.7},children:[H.typePercent,"%"]})]})]}),e.jsxs("div",{style:{marginBottom:6},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"Shape"}),e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:4,background:`${fe[H.mostCommonShape]||"#666"}22`,border:`1px solid ${fe[H.mostCommonShape]||"#666"}44`,color:fe[H.mostCommonShape]||"#888",fontSize:11,fontWeight:700},children:[H.mostCommonShape,e.jsxs("span",{style:{fontSize:9,fontWeight:400,opacity:.7},children:[H.shapePercent,"%"]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4,marginTop:8},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"Avg Range"}),e.jsxs("div",{style:{fontSize:11,color:"#fff",fontFamily:"monospace"},children:["$",H.avgRange]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:8,color:"#666"},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,color:"#00aaff",fontFamily:"monospace"},children:[H.ibPct,"%"]})]})]})]})]},H.day))}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)",boxShadow:"0 4px 24px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Trading Day Heatmap",e.jsx("span",{style:{fontSize:10,color:"#666",marginLeft:"auto"},children:"Most recent at top"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:20},children:Ue.map(H=>e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#fff",marginBottom:10,textAlign:"center",fontWeight:600,padding:"6px 0",background:"rgba(255,255,255,0.05)",borderRadius:6},children:H.day}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:3,minHeight:90},children:H.profiles.slice(0,12).map((ae,we)=>{var xe;const k=ae.vah&&ae.val?ae.vah-ae.val:0,q=ae.range>0?k/ae.range*100:0,L=ae.range>0&&ae.ib_range?ae.ib_range/ae.range*100:0,M=ue[ae.day_type]||"#666";return e.jsxs("div",{style:{aspectRatio:"1",borderRadius:4,background:`linear-gradient(135deg, ${M} 0%, ${M}99 100%)`,cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 2px 8px ${M}33`,transition:"all 0.2s ease",border:`1px solid ${M}44`},onMouseEnter:re=>{re.currentTarget.style.transform="scale(1.1)",re.currentTarget.style.boxShadow=`0 4px 20px ${M}66`,re.currentTarget.style.zIndex="10"},onMouseMove:re=>{y({...ae,vaRange:k,vaPct:q,ibPct:L,baseColor:M,x:re.clientX,y:re.clientY})},onMouseLeave:re=>{re.currentTarget.style.transform="scale(1)",re.currentTarget.style.boxShadow=`0 2px 8px ${M}33`,re.currentTarget.style.zIndex="1",y(null)},children:[e.jsx("span",{style:{fontSize:9,fontWeight:700,color:"#fff",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:ae.profile_shape}),e.jsx("span",{style:{position:"absolute",bottom:1,right:2,fontSize:7,color:"rgba(255,255,255,0.6)"},children:(xe=ae.date)==null?void 0:xe.slice(8)})]},we)})}),H.count>12&&e.jsxs("div",{style:{fontSize:8,color:"#666",textAlign:"center",marginTop:4},children:["+",H.count-12," more"]})]},H.day))}),e.jsx("div",{style:{display:"flex",gap:20,marginTop:20,paddingTop:16,borderTop:"1px solid rgba(255,255,255,0.08)",flexWrap:"wrap",justifyContent:"center"},children:Object.entries(ue).map(([H,ae])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"4px 10px",background:`${ae}15`,borderRadius:20,border:`1px solid ${ae}33`},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:`linear-gradient(135deg, ${ae} 0%, ${ae}aa 100%)`,boxShadow:`0 0 6px ${ae}66`}}),e.jsx("span",{style:{fontSize:10,color:"#bbb",fontWeight:500},children:H==="normal_var"?"Normal Var":H==="double_dist"?"Double Dist":H==="non_trend"?"Non-Trend":H.charAt(0).toUpperCase()+H.slice(1)})]},H))}),f&&(()=>{var we,k,q,L,M,xe,re,T,b,z,E,se;const H=f.close>f.open,ae=H?"#00ff88":"#ff4466";return e.jsxs("div",{style:{position:"fixed",left:f.x+15,top:f.y+15,transform:f.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:260,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px ${f.baseColor}44, 0 0 20px ${f.baseColor}22`,zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:`linear-gradient(135deg, ${f.baseColor}33 0%, ${f.baseColor}11 100%)`,borderBottom:`1px solid ${f.baseColor}44`,padding:"10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:f.date}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:f.weekday})]})]}),e.jsx("span",{style:{width:26,height:26,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,fontSize:13,fontWeight:800,background:"rgba(255,255,255,0.1)",color:"#fff"},children:f.profile_shape})]}),e.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:`${f.baseColor}33`,color:f.baseColor,border:`1px solid ${f.baseColor}55`,textTransform:"uppercase"},children:(we=f.day_type)==null?void 0:we.replace("_"," ")}),f.open_type&&f.open_type!=="developing"&&e.jsx("span",{style:{padding:"3px 8px",borderRadius:4,fontSize:9,fontWeight:700,background:"rgba(255,170,0,0.2)",color:"#ffaa00",border:"1px solid rgba(255,170,0,0.4)",textTransform:"uppercase"},children:f.open_type})]})]}),e.jsxs("div",{style:{margin:"10px 14px",padding:"10px 12px",borderRadius:8,background:`${ae}15`,border:`1px solid ${ae}30`},children:[e.jsxs("div",{style:{fontSize:10,color:ae,marginBottom:8,fontWeight:600,display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{children:H?"":""}),"PRICE ACTION"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:[{label:"O",value:f.open,color:"#fff"},{label:"H",value:f.high,color:H?"#00ff88":"#fff"},{label:"L",value:f.low,color:H?"#fff":"#ff4466"},{label:"C",value:f.close,color:"#fff"}].map(de=>{var Se;return e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:7,color:"#888",marginBottom:2},children:de.label}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:de.color,fontFamily:"monospace"},children:["$",(Se=de.value)==null?void 0:Se.toFixed(2)]})]},de.label)})})]}),e.jsxs("div",{style:{padding:"0 14px 10px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"HIGH"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00ff88",fontFamily:"monospace"},children:["$",(k=f.high)==null?void 0:k.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"DAY RANGE"}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:"#fff",fontFamily:"monospace"},children:["$",(q=f.range)==null?void 0:q.toFixed(2)]}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:2},children:"100%"})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"LOW"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#ff4466",fontFamily:"monospace"},children:["$",(L=f.low)==null?void 0:L.toFixed(2)]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10,paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB HIGH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((M=f.ib_high)==null?void 0:M.toFixed(2))||"N/A"]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"IB RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#9370DB",fontFamily:"monospace"},children:["$",((xe=f.ib_range)==null?void 0:xe.toFixed(2))||"N/A"]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(re=f.ibPct)==null?void 0:re.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB LOW"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",((T=f.ib_low)==null?void 0:T.toFixed(2))||"N/A"]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:6,borderTop:"1px solid rgba(255,255,255,0.06)"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAH"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(b=f.vah)==null?void 0:b.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"VA RANGE"}),e.jsxs("div",{style:{fontSize:13,fontWeight:700,color:"#00aaff",fontFamily:"monospace"},children:["$",(z=f.vaRange)==null?void 0:z.toFixed(2)]}),e.jsxs("div",{style:{fontSize:8,color:"#666",marginTop:2},children:[(E=f.vaPct)==null?void 0:E.toFixed(0),"%"]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"VAL"}),e.jsxs("div",{style:{fontSize:10,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:["$",(se=f.val)==null?void 0:se.toFixed(2)]})]})]})]})]})})()]}),e.jsxs("div",{style:{marginTop:20,background:"linear-gradient(135deg, rgba(20,20,35,0.9) 0%, rgba(30,25,45,0.9) 100%)",borderRadius:12,padding:20,border:"1px solid rgba(255,255,255,0.08)"},children:[e.jsxs("div",{style:{fontSize:12,color:"#aaa",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),"Day Type Distribution by Weekday"]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:16},children:Ue.map(H=>{var q,L;const ae=H.count;let we=0;const k=Object.entries(H.typeCounts||{}).sort((M,xe)=>xe[1]-M[1]).map(([M,xe])=>{const re=ae>0?xe/ae*100:0,T=we;return we+=re,{type:M,count:xe,percent:re,startPercent:T}});return e.jsxs("div",{style:{textAlign:"center",position:"relative"},children:[e.jsx("div",{style:{fontSize:11,color:"#888",marginBottom:8,fontWeight:600},children:H.day}),e.jsx("div",{style:{width:70,height:70,borderRadius:"50%",margin:"0 auto",background:ae>0?`conic-gradient(${k.map(M=>`${ue[M.type]} ${M.startPercent}% ${M.startPercent+M.percent}%`).join(", ")})`:"rgba(50,50,60,0.5)",position:"relative",boxShadow:"0 2px 12px rgba(0,0,0,0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:M=>{M.currentTarget.style.transform="scale(1.1)",M.currentTarget.style.boxShadow="0 4px 20px rgba(0,0,0,0.5)"},onMouseMove:M=>{c({day:H.day,total:ae,segments:k,avgRange:H.avgRange,avgIbRange:H.avgIbRange,ibPct:H.ibPct,x:M.clientX,y:M.clientY})},onMouseLeave:M=>{M.currentTarget.style.transform="scale(1)",M.currentTarget.style.boxShadow="0 2px 12px rgba(0,0,0,0.3)",c(null)},children:e.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:40,height:40,borderRadius:"50%",background:"linear-gradient(135deg, #1a1a2e 0%, #252540 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,fontWeight:700,color:"#fff"},children:ae})}),k[0]&&e.jsxs("div",{style:{marginTop:8,fontSize:9,color:ue[k[0].type],fontWeight:600},children:[k[0].type==="normal_var"?"N-Var":k[0].type==="double_dist"?"Dbl-D":k[0].type==="non_trend"?"Non-T":((q=k[0].type)==null?void 0:q.charAt(0).toUpperCase())+((L=k[0].type)==null?void 0:L.slice(1)),e.jsxs("span",{style:{color:"#666",marginLeft:4},children:[k[0].percent.toFixed(0),"%"]})]})]},H.day)})}),R&&e.jsxs("div",{style:{position:"fixed",left:R.x+15,top:R.y+15,transform:R.x>window.innerWidth-260?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(20,20,35,0.98) 0%, rgba(35,30,50,0.98) 100%)",borderRadius:12,padding:0,minWidth:200,boxShadow:"0 8px 32px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.1)",zIndex:9999,pointerEvents:"none",overflow:"hidden"},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:"10px 14px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:13,fontWeight:700,color:"#fff"},children:R.day})]}),e.jsxs("span",{style:{fontSize:11,color:"#888",background:"rgba(255,255,255,0.1)",padding:"2px 8px",borderRadius:10},children:[R.total," days"]})]}),e.jsxs("div",{style:{padding:"12px 14px"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:8,fontWeight:600,textTransform:"uppercase"},children:"Day Type Distribution"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:6},children:R.segments.map((H,ae)=>{var k,q;const we=H.type==="normal_var"?"Normal Var":H.type==="double_dist"?"Double Dist":H.type==="non_trend"?"Non-Trend":((k=H.type)==null?void 0:k.charAt(0).toUpperCase())+((q=H.type)==null?void 0:q.slice(1));return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:10,height:10,borderRadius:3,background:ue[H.type],boxShadow:`0 0 6px ${ue[H.type]}66`}}),e.jsx("span",{style:{fontSize:11,color:"#ccc",flex:1},children:we}),e.jsx("span",{style:{fontSize:11,fontWeight:600,color:ue[H.type]},children:H.count}),e.jsx("div",{style:{width:50,height:4,background:"rgba(255,255,255,0.1)",borderRadius:2,overflow:"hidden"},children:e.jsx("div",{style:{width:`${H.percent}%`,height:"100%",background:ue[H.type],borderRadius:2}})}),e.jsxs("span",{style:{fontSize:10,color:"#888",width:32,textAlign:"right"},children:[H.percent.toFixed(0),"%"]})]},ae)})}),e.jsxs("div",{style:{marginTop:12,paddingTop:10,borderTop:"1px solid rgba(255,255,255,0.08)",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG RANGE"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#fff",fontFamily:"monospace"},children:["$",R.avgRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"AVG IB"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#9370DB",fontFamily:"monospace"},children:["$",R.avgIbRange]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:"#666",marginBottom:2},children:"IB %"}),e.jsxs("div",{style:{fontSize:11,fontWeight:600,color:"#00aaff",fontFamily:"monospace"},children:[R.ibPct,"%"]})]})]})]})]})]})]})})()]}):e.jsx("div",{style:{textAlign:"center",color:"#8b8b8b",padding:40},children:"No historic data available"})})]})})]})},Mg=({settings:t,onSettingsChange:n})=>{const[i,o]=A.useState({ticker:"GC1!",current_price:0,delta_5m:0,delta_30m:0,cumulative_delta:0,ib_high:0,ib_low:0,ib_midpoint:0,ib_range:0,pdpoc:0,pd_high:0,pd_low:0,vwap:0,session_high:0,session_low:0,buying_imbalance_pct:0,absorption_ratio:0,stacked_buy_imbalances:0,current_phase:"CONNECTING...",conditions_met:0,entry_signal:!1,last_update:"",market_open:!1,candle_30m_stats:{avg:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},max:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0},min:{range:0,volume:0,buy_vol:0,sell_vol:0,delta:0}}}),[r,s]=A.useState(!1),[l,a]=A.useState(0),[d,p]=A.useState(new Date),[C,x]=A.useState([]),[u,D]=A.useState({gamma_environment:"UNKNOWN",gamma_regime:"UNKNOWN",total_gex:0,zero_gamma:0,max_pain:0,key_levels:[],gex_profile:[],gex_levels:[],call_wall:0,put_wall:0,hvl:0,gamma_flip:0,beta_spx:0,beta_dxy:0,ib_locked:!1,ib_session_name:"",pd_high:0,pd_low:0,pdpoc:0,session_high:0,session_low:0,data_source:"CONNECTING"}),[O,Q]=A.useState({etfs:[],total_flow_1d_mm:0,total_flow_5d_mm:0,timestamp:null}),[De,f]=A.useState({gold:{overall_sentiment:"neutral",signals:[]},bitcoin:{overall_sentiment:"neutral",signals:[],etf_flow_1d:0},timestamp:null}),[y,R]=A.useState({btc_options:{put_call_ratio:0,max_pain:0,call_wall:0,put_wall:0,sentiment:"neutral"}}),[c,N]=A.useState({funding_rates:{average:0,annualized:0,sentiment:"neutral"}}),{isMobile:S}=Oo();A.useEffect(()=>{const U=async()=>{const h=performance.now();try{const w=await fetch(Zt);if(w.ok){const Me=await w.json(),I=performance.now(),Fe=Math.round(I-h);o(Me),D(He=>({...He,...Me})),s(!0),a(Fe),p(new Date)}else throw new Error("Backend error")}catch{s(!1),a(0),o(Me=>({...Me,current_phase:"DISCONNECTED"})),D(Me=>({...Me,data_source:"DISCONNECTED"}))}};U();const m=setInterval(U,300);return()=>clearInterval(m)},[]),A.useEffect(()=>{const U=async()=>{try{if((i==null?void 0:i.contract)==="BTC-SPOT"){const Me=await fetch(`${Zt.replace("?","/etf-flows?")}`);if(Me.ok){const He=await Me.json();Q(He)}const I=await fetch(`${Zt.replace("?","/deribit-options?")}`);if(I.ok){const He=await I.json();R(He)}const Fe=await fetch(`${Zt.replace("?","/funding-rates?")}`);if(Fe.ok){const He=await Fe.json();N(He)}}const w=await fetch(`${Zt.replace("?","/institutional?")}`);if(w.ok){const Me=await w.json();f(Me)}}catch(h){console.error("Error fetching institutional data:",h)}};U();const m=setInterval(U,6e4);return()=>clearInterval(m)},[i==null?void 0:i.contract]);const B=(U,m=5)=>!U||U<=0||!i.current_price||i.current_price<=0?!1:Math.abs(U-i.current_price)<=m,F=(U,m,h=5)=>B(U,h)?{color:"#ffffff",textShadow:"0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(255,255,255,0.5)",fontWeight:700}:{color:m},pe=({active:U,conditionsMet:m})=>e.jsxs("div",{style:{padding:16,borderRadius:12,background:U?"rgba(0,255,136,0.15)":"rgba(255,255,255,0.02)",border:`2px solid ${U?"#00ff88":"rgba(255,255,255,0.1)"}`,textAlign:"center",animation:U?"glow 1s infinite alternate":"none"},children:[e.jsx("div",{style:{fontSize:14,color:"#888",marginBottom:8},children:"ENTRY SIGNAL"}),e.jsx("div",{style:{fontSize:36,fontWeight:700,color:U?"#00ff88":"#444"},children:U?" READY":" WAITING"}),e.jsxs("div",{style:{fontSize:14,color:U?"#00ff88":"#666",marginTop:8},children:[m,"/6 Conditions Met"]})]});return e.jsxs("div",{style:{...J.liveDashboard,maxWidth:S?"100%":"1000px",padding:S?"12px":"0"},children:[e.jsx(gg,{}),e.jsx("div",{style:{marginBottom:S?16:24},children:e.jsx(pe,{active:i.entry_signal,conditionsMet:i.conditions_met})}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:S?12:16,padding:S?12:20,marginBottom:S?12:16},children:[e.jsx("h3",{style:{margin:"0 0 16px 0",color:"#888",fontSize:S?12:14},children:"Initial Balance Sessions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(2, 1fr)",gap:12},children:u.ibs&&["japan","london","us","ny"].map(U=>{const m=u.ibs[U];if(!m)return null;const h=m.status==="ACTIVE",w=m.status==="ENDED",Me=m.high>0&&m.low>0;return e.jsxs("div",{style:{background:h?"rgba(0,255,136,0.05)":"rgba(255,255,255,0.02)",border:`2px solid ${h?"rgba(0,255,136,0.6)":w?"rgba(255,170,0,0.4)":"rgba(136,136,136,0.2)"}`,borderRadius:12,padding:12,position:"relative"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:h?"#00ff88":w?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:m.name}),e.jsxs("div",{style:{fontSize:10,color:"#666",marginTop:2},children:[m.start," - ",m.end," ET"]})]}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:4,fontSize:9,fontWeight:700,letterSpacing:1,background:h?"#001a00":w?"#1a1000":"#111",color:h?"#00ff88":w?"#ffaa00":"#666",border:`1px solid ${h?"#00ff88":w?"#ffaa00":"#333"}`,animation:h?"pulse 1.5s ease-in-out infinite":"none"},children:h?" ACTIVE":w?" ENDED":" WAITING"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:6},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"HIGH"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...F(Me?m.high:0,Me?"#ff4466":"#444")},children:Me?`$${m.high.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"MID"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...F(Me?m.mid:0,Me?"#ffaa00":"#444")},children:Me?`$${m.mid.toFixed(2)}`:"--"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666",marginBottom:2},children:"LOW"}),e.jsx("div",{style:{fontSize:12,fontWeight:600,fontFamily:"monospace",...F(Me?m.low:0,Me?"#00ff88":"#444")},children:Me?`$${m.low.toFixed(2)}`:"--"})]})]})]},U)})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",border:"1px solid rgba(136,136,136,0.3)",borderRadius:16,padding:20,marginBottom:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{margin:0,color:"#888",fontSize:14},children:" Previous Day Levels"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:"rgba(136,136,136,0.15)",color:"#aaa",fontFamily:"monospace"},children:u.pd_date_range||"Loading..."})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:S?"1fr":"repeat(3, 1fr)",gap:S?8:16},children:[e.jsxs("div",{style:J.levelCard,children:[e.jsx("div",{style:J.levelLabel,children:"pd High"}),e.jsxs("div",{style:{...J.levelValue,...F(u.pd_high,"#ff4466")},children:["$",u.pd_high&&u.pd_high>0?u.pd_high.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:J.levelCard,children:[e.jsx("div",{style:J.levelLabel,children:"pdPOC"}),e.jsxs("div",{style:{...J.levelValue,...F(u.pdpoc||i.pdpoc,"#ffaa00")},children:["$",u.pdpoc&&u.pdpoc>0?u.pdpoc.toFixed(2):i.pdpoc&&i.pdpoc>0?i.pdpoc.toFixed(2):"0.00"]})]}),e.jsxs("div",{style:J.levelCard,children:[e.jsx("div",{style:J.levelLabel,children:"pd Low"}),e.jsxs("div",{style:{...J.levelValue,...F(u.pd_low,"#00ff88")},children:["$",u.pd_low&&u.pd_low<999999?u.pd_low.toFixed(2):"0.00"]})]})]})]}),e.jsx(Lg,{metrics:i,settings:t}),(()=>{const U=i.dayHigh||i.day_high||0,m=i.dayLow||i.day_low||0,h=i.current_price||0,w=U-m;if(w<=0||h<=0)return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(249,115,22,0.05) 0%, rgba(255,68,102,0.05) 100%)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:16,padding:20,marginTop:20,textAlign:"center"},children:[e.jsx("h3",{style:{margin:0,color:"#f97316",fontSize:14,marginBottom:8},children:" Fibonacci Levels & Range Analysis"}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:"Awaiting market data..."})]});const Me=(U+m)/2,I=h<Me,Fe=I?[{level:"100%",price:U,color:"#ff4466",desc:"Day High"},{level:"78.6%",price:m+w*.786,color:"#ff6b6b",desc:"Deep Retracement"},{level:"61.8%",price:m+w*.618,color:"#ffd93d",desc:"Golden Ratio"},{level:"50%",price:m+w*.5,color:"#f97316",desc:"Mid Point"},{level:"38.2%",price:m+w*.382,color:"#00bcd4",desc:"Shallow Retracement"},{level:"23.6%",price:m+w*.236,color:"#10B981",desc:"Minor Retracement"},{level:"0%",price:m,color:"#00ff88",desc:"Day Low"},{level:"127%",price:m-w*.27,color:"#ff1744",desc:"Extension"},{level:"162%",price:m-w*.618,color:"#d50000",desc:"Deep Extension"}]:[{level:"0%",price:U,color:"#ff4466",desc:"Day High"},{level:"23.6%",price:U-w*.236,color:"#ff6b6b",desc:"Minor Retracement"},{level:"38.2%",price:U-w*.382,color:"#ffd93d",desc:"Shallow Retracement"},{level:"50%",price:U-w*.5,color:"#f97316",desc:"Mid Point"},{level:"61.8%",price:U-w*.618,color:"#00bcd4",desc:"Golden Ratio"},{level:"78.6%",price:U-w*.786,color:"#10B981",desc:"Deep Retracement"},{level:"100%",price:m,color:"#00ff88",desc:"Day Low"},{level:"-27%",price:U+w*.27,color:"#00e676",desc:"Extension"},{level:"-62%",price:U+w*.618,color:"#00c853",desc:"Deep Extension"}],He=(i==null?void 0:i.swing)||{},te=He.swing_high||0,_e=He.swing_low||0,v=He.swing_direction||"neutral";He.extensions_direction;const he=te-_e,le=(h-m)/w,Ne=Math.min(1,Math.max(0,le)),ot=(Ae,ze=Ae)=>ze>1||ze<0?{zone:"Outside Range",color:"#a855f7",bg:"rgba(168,85,247,0.15)"}:Ae>=.75?{zone:"Highly Premium",color:"#ff4466",bg:"rgba(255,68,102,0.15)"}:Ae>=.5?{zone:"Premium",color:"#f97316",bg:"rgba(249,115,22,0.15)"}:Ae>=.25?{zone:"Discount",color:"#00bcd4",bg:"rgba(0,188,212,0.15)"}:{zone:"Highly Discount",color:"#00ff88",bg:"rgba(0,255,136,0.15)"},_t=ot(Ne,le);i.ib_high,i.ib_low;const Ge=new Date,ft=new Date(Ge.toLocaleString("en-US",{timeZone:"America/New_York"})).getHours(),qe=new Date(Ge.toLocaleString("en-US",{timeZone:"America/New_York"})).getMinutes(),oe=ft*100+qe,Le=oe>=300&&oe<600,Be=oe>=820&&oe<930,P=oe>=930&&oe<1030,ne=oe>=1030&&oe<1130,ke=Fe.reduce((Ae,ze)=>{const Te=Math.abs(h-ze.price);return Te<Ae.dist?{...ze,dist:Te}:Ae},{dist:1/0});return e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(249,115,22,0.05) 0%, rgba(255,68,102,0.05) 100%)",border:"1px solid rgba(249,115,22,0.3)",borderRadius:16,padding:20,marginTop:20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{margin:0,color:"#f97316",fontSize:14},children:" Fibonacci Levels & Range Analysis"}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:20,fontSize:11,fontWeight:600,background:_t.bg,color:_t.color},children:_t.zone})]}),e.jsxs("div",{style:{display:"flex",gap:20},children:[e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:8},children:"Day Range"}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:7,textAlign:"right",color:"#666"},children:[e.jsx("span",{style:{color:"#ff4466"},children:"PREM"}),e.jsx("span",{children:"75%"}),e.jsx("span",{children:"50%"}),e.jsx("span",{children:"25%"}),e.jsx("span",{style:{color:"#00ff88"},children:"DISC"})]}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #f97316 25%, #666 50%, #00bcd4 75%, #00ff88 100%)",opacity:.5}}),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-Ne)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #fff",zIndex:10}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:9},children:[e.jsx("div",{style:{color:"#ff4466"},children:U.toFixed(2)}),e.jsxs("div",{style:{padding:"4px 6px",background:_t.bg,borderRadius:4,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:8,color:_t.color,fontWeight:600},children:_t.zone}),e.jsxs("div",{style:{fontSize:9,color:"#fff"},children:[(le*100).toFixed(0),"%"]})]}),e.jsx("div",{style:{color:"#00ff88"},children:m.toFixed(2)})]})]})]}),e.jsxs("div",{style:{flex:"0 0 auto"},children:[e.jsxs("div",{style:{fontSize:10,color:"#888",marginBottom:8},children:["Day Fibonacci ",I?"(Bearish)":"(Bullish)"]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:8,textAlign:"right",width:28},children:Fe.map((Ae,ze)=>e.jsx("span",{style:{color:Ae.color,fontWeight:500,lineHeight:1},children:Ae.level},ze))}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #ff6b6b 16%, #ffd93d 33%, #f97316 50%, #00bcd4 66%, #10B981 83%, #00ff88 100%)",opacity:.5}}),Fe.map((Ae,ze)=>e.jsx("div",{style:{position:"absolute",top:`${ze/(Fe.length-1)*100}%`,left:0,width:"100%",height:1,background:`${Ae.color}80`,transform:"translateY(-50%)"}},ze)),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-Ne)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #fff",zIndex:10}})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420},children:Fe.map((Ae,ze)=>{const Te=Math.abs(h-Ae.price)<w*.025;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,lineHeight:1},children:[e.jsx("span",{style:{fontSize:10,color:Te?"#fff":"#777",fontWeight:Te?600:400,background:Te?`${Ae.color}30`:"transparent",padding:Te?"1px 3px":0,borderRadius:2},children:Ae.price.toFixed(2)}),e.jsx("span",{style:{fontSize:7,color:"#555"},children:Ae.desc}),Te&&e.jsx("span",{style:{color:Ae.color,fontSize:8},children:""})]},ze)})})]})]}),he>20&&e.jsxs("div",{style:{flex:"0 0 auto",borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:16},children:[e.jsxs("div",{style:{fontSize:10,color:"#A78BFA",marginBottom:8},children:["Swing Fib ",v==="up"?"":v==="down"?"":""]}),e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420,fontSize:8,textAlign:"right",width:28},children:(v==="up"?[{level:"-62%",price:te+he*.618,color:"#00E676"},{level:"-27%",price:te+he*.27,color:"#69F0AE"},{level:"0%",price:te,color:"#A78BFA"},{level:"23.6%",price:te-he*.236,color:"#8B5CF6"},{level:"38.2%",price:te-he*.382,color:"#7C3AED"},{level:"50%",price:te-he*.5,color:"#6D28D9"},{level:"61.8%",price:te-he*.618,color:"#5B21B6"},{level:"78.6%",price:te-he*.786,color:"#4C1D95"},{level:"100%",price:_e,color:"#3B0764"}]:[{level:"100%",price:te,color:"#3B0764"},{level:"78.6%",price:_e+he*.786,color:"#4C1D95"},{level:"61.8%",price:_e+he*.618,color:"#5B21B6"},{level:"50%",price:_e+he*.5,color:"#6D28D9"},{level:"38.2%",price:_e+he*.382,color:"#7C3AED"},{level:"23.6%",price:_e+he*.236,color:"#8B5CF6"},{level:"0%",price:_e,color:"#A78BFA"},{level:"127%",price:_e-he*.27,color:"#E040FB"},{level:"162%",price:_e-he*.618,color:"#AA00FF"}]).map((Ae,ze)=>e.jsx("span",{style:{color:Ae.color,fontWeight:500,lineHeight:1},children:Ae.level},ze))}),e.jsxs("div",{style:{position:"relative",width:12,height:420,borderRadius:6,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #A78BFA 0%, #6D28D9 40%, #3B0764 70%, #E040FB 85%, #AA00FF 100%)",opacity:.5}}),(()=>{const Ae=he>0?(h-_e)/he:.5;return e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-Ae)*100*.78))}%`,left:"50%",transform:"translate(-50%, -50%)",width:18,height:4,background:"#fff",borderRadius:2,boxShadow:"0 0 6px #A78BFA",zIndex:10}})})()]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",height:420},children:(v==="up"?[{level:"-62%",price:te+he*.618,color:"#00E676",desc:"Deep Ext"},{level:"-27%",price:te+he*.27,color:"#69F0AE",desc:"Extension"},{level:"0%",price:te,color:"#A78BFA",desc:"Swing High"},{level:"23.6%",price:te-he*.236,color:"#8B5CF6",desc:""},{level:"38.2%",price:te-he*.382,color:"#7C3AED",desc:""},{level:"50%",price:te-he*.5,color:"#6D28D9",desc:""},{level:"61.8%",price:te-he*.618,color:"#5B21B6",desc:"Golden"},{level:"78.6%",price:te-he*.786,color:"#4C1D95",desc:""},{level:"100%",price:_e,color:"#3B0764",desc:"Swing Low"}]:[{level:"100%",price:te,color:"#3B0764",desc:"Swing High"},{level:"78.6%",price:_e+he*.786,color:"#4C1D95",desc:""},{level:"61.8%",price:_e+he*.618,color:"#5B21B6",desc:"Golden"},{level:"50%",price:_e+he*.5,color:"#6D28D9",desc:""},{level:"38.2%",price:_e+he*.382,color:"#7C3AED",desc:""},{level:"23.6%",price:_e+he*.236,color:"#8B5CF6",desc:""},{level:"0%",price:_e,color:"#A78BFA",desc:"Swing Low"},{level:"127%",price:_e-he*.27,color:"#E040FB",desc:"Extension"},{level:"162%",price:_e-he*.618,color:"#AA00FF",desc:"Deep Ext"}]).map((Ae,ze)=>{const Te=Math.abs(h-Ae.price)<he*.03;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,lineHeight:1},children:[e.jsx("span",{style:{fontSize:10,color:Te?"#fff":"#777",fontWeight:Te?600:400,background:Te?`${Ae.color}30`:"transparent",padding:Te?"1px 3px":0,borderRadius:2},children:Ae.price.toFixed(2)}),e.jsx("span",{style:{fontSize:7,color:"#555"},children:Ae.desc}),Te&&e.jsx("span",{style:{color:Ae.color,fontSize:8},children:""})]},ze)})})]})]}),e.jsxs("div",{style:{flex:1,borderLeft:"1px solid rgba(255,255,255,0.1)",paddingLeft:20},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:10},children:"Session Range Location"}),(()=>{const Ae=({name:an,timeRange:mt,color:qt,isActive:dn,high:rn,low:un,hasData:Sn})=>{const In=rn-un,Mn=In>0?(h-un)/In:null,Un=Mn!==null?Math.min(1,Math.max(0,Mn)):null,wn=Mn!==null?ot(Un,Mn):null,yn=Sn&&rn>0&&un>0&&In>0;return e.jsxs("div",{style:{background:dn?`${qt}12`:"rgba(0,0,0,0.25)",border:`1px solid ${dn?`${qt}60`:"rgba(255,255,255,0.06)"}`,borderRadius:8,padding:"8px 10px",flex:"1 1 0",minWidth:0},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:9,color:qt,fontWeight:600},children:an}),e.jsx("div",{style:{fontSize:7,color:"#555"},children:mt})]}),dn&&e.jsx("span",{style:{fontSize:6,background:qt,color:"#000",padding:"2px 4px",borderRadius:3,fontWeight:700},children:"LIVE"})]}),yn?e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsxs("div",{style:{position:"relative",width:6,height:140,borderRadius:3,overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(to bottom, #ff4466 0%, #f97316 25%, #666 50%, #00bcd4 75%, #00ff88 100%)",opacity:.5}}),e.jsx("div",{style:{position:"absolute",top:`${Math.min(100,Math.max(0,(1-Un)*100))}%`,left:"50%",transform:"translate(-50%, -50%)",width:10,height:3,background:qt,borderRadius:2,boxShadow:`0 0 4px ${qt}`}})]}),e.jsxs("div",{style:{flex:1,fontSize:8,display:"flex",flexDirection:"column",justifyContent:"space-between",height:140},children:[e.jsx("div",{style:{color:"#ff4466",fontWeight:500},children:rn.toFixed(2)}),e.jsxs("div",{children:[e.jsx("div",{style:{color:wn==null?void 0:wn.color,fontWeight:600,fontSize:7},children:wn==null?void 0:wn.zone}),e.jsxs("div",{style:{color:"#888",fontSize:7},children:[(Un*100).toFixed(0),"%"]})]}),e.jsx("div",{style:{color:"#00ff88",fontWeight:500},children:un.toFixed(2)})]})]}):e.jsx("div",{style:{fontSize:8,color:"#444",textAlign:"center",padding:"45px 0"},children:dn?"Building...":Sn?"No data":"Waiting"})]})},ze=i.ended_sessions||i.endedSessions||{},Te=i.ibs||{},Ze=ze.london||{};let Et=Ze.high||0,Y=Ze.low&&Ze.low>0&&Ze.low<999999?Ze.low:0;const Ke=Te.london||{};Ke.high>0&&(Et=Math.max(Et,Ke.high)),Ke.low>0&&Ke.low<999999&&(Y=Y>0?Math.min(Y,Ke.low):Ke.low),Le&&i.sessionHigh>0&&(Et=Math.max(Et,i.sessionHigh)),Le&&i.sessionLow>0&&i.sessionLow<999999&&(Y=Y>0?Math.min(Y,i.sessionLow):i.sessionLow);const rt=ze.ny_1h||{},et=rt.high||(P?i.sessionHigh:0),me=rt.low||(P?i.sessionLow:0),g=ze.ny_2h||{},j=g.high||(ne?i.sessionHigh:0),K=g.low||(ne?i.sessionLow:0),$=Te.us||{},G=ze.us_ib||{},Z=$.high||G.high||0,ge=$.low&&$.low>0&&$.low<999999?$.low:G.low&&G.low>0?G.low:0;let X=0,Ie=999999;["pre_asia","asia_open","asia_close","low_volume","london","pre_us"].forEach(an=>{const mt=ze[an];(mt==null?void 0:mt.high)>0&&(X=Math.max(X,mt.high)),(mt==null?void 0:mt.low)>0&&(mt==null?void 0:mt.low)<999999&&(Ie=Math.min(Ie,mt.low))});const st=oe>=1800||oe<820;st&&i.sessionHigh>0&&(X=Math.max(X,i.sessionHigh)),st&&i.sessionLow>0&&i.sessionLow<999999&&(Ie=Math.min(Ie,i.sessionLow)),Ie===999999&&(Ie=0);let at=0,ut=999999;["ny_1h","ny_2h","lunch","ny_pm","ny_close"].forEach(an=>{const mt=ze[an];(mt==null?void 0:mt.high)>0&&(at=Math.max(at,mt.high)),(mt==null?void 0:mt.low)>0&&(mt==null?void 0:mt.low)<999999&&(ut=Math.min(ut,mt.low))});const zt=oe>=930&&oe<1700;return zt&&i.sessionHigh>0&&(at=Math.max(at,i.sessionHigh)),zt&&i.sessionLow>0&&i.sessionLow<999999&&(ut=Math.min(ut,i.sessionLow)),ut===999999&&(ut=0),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(Ae,{name:"Overnight",timeRange:"18:00-8:20",color:"#8b5cf6",isActive:st,high:X,low:Ie,hasData:X>0}),e.jsx(Ae,{name:"NY Session",timeRange:"9:30-17:00",color:"#f59e0b",isActive:zt,high:at,low:ut,hasData:at>0})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(Ae,{name:"London",timeRange:"3:00-6:00",color:"#a855f7",isActive:Le,high:Et,low:Y,hasData:Et>0}),e.jsx(Ae,{name:"US IB",timeRange:"8:20-9:30",color:"#ffaa00",isActive:Be,high:Z,low:ge,hasData:Z>0}),e.jsx(Ae,{name:"NY 1H",timeRange:"9:30-10:30",color:"#10B981",isActive:P,high:et,low:me,hasData:et>0}),e.jsx(Ae,{name:"NY 2H",timeRange:"10:30-11:30",color:"#06B6D4",isActive:ne,high:j,low:K,hasData:j>0})]})]})})()]})]}),ke.price&&w>0&&e.jsxs("div",{style:{marginTop:16,padding:12,background:`${ke.color}15`,border:`1px solid ${ke.color}50`,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Nearest Fibonacci Level"}),e.jsxs("div",{style:{fontSize:14,color:ke.color,fontWeight:700},children:[ke.level," @ ",ke.price.toFixed(2)]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:10,color:"#888"},children:"Distance"}),e.jsxs("div",{style:{fontSize:14,color:h>ke.price?"#00ff88":"#ff4466",fontWeight:700},children:[h>ke.price?"+":"",(h-ke.price).toFixed(2)]})]})]})]})})(),e.jsx("div",{style:{marginTop:20},children:e.jsx(xg,{gexData:u,currentPrice:i.current_price})}),e.jsx("div",{style:{marginTop:20},children:e.jsx(ug,{gexData:u,currentPrice:i.current_price})}),(()=>{const U=i.rollover||{};return e.jsxs("div",{style:{marginTop:20,padding:16,background:"linear-gradient(135deg, rgba(30,30,35,0.95) 0%, rgba(20,20,25,0.98) 100%)",borderRadius:12,border:`1px solid ${U.roll_signal==="ROLL"?"#ef4444":U.roll_signal==="CONSIDER"?"#f59e0b":"#333"}`},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:16},children:""}),e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff"},children:"CONTRACT ROLLOVER"})]}),e.jsx("div",{style:{padding:"4px 12px",borderRadius:6,fontSize:11,fontWeight:700,background:U.roll_signal==="ROLL"?"rgba(239,68,68,0.2)":U.roll_signal==="CONSIDER"?"rgba(245,158,11,0.2)":"rgba(34,197,94,0.2)",color:U.roll_signal==="ROLL"?"#ef4444":U.roll_signal==="CONSIDER"?"#f59e0b":"#22c55e",border:`1px solid ${U.roll_signal==="ROLL"?"#ef4444":U.roll_signal==="CONSIDER"?"#f59e0b":"#22c55e"}40`},children:U.roll_signal==="ROLL"?" ROLL NOW":U.roll_signal==="CONSIDER"?" CONSIDER ROLLING":" HOLD"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 80px 1fr",gap:16,alignItems:"center"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"CURRENT"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00aaff"},children:U.front_month||i.contract||"GCG26"}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:2},children:U.front_month_name||"Gold Feb 2026"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:U.front_month_oi>0?"#fff":"#555",marginTop:8,fontFamily:"monospace"},children:U.front_month_oi>0?U.front_month_oi.toLocaleString():""}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:U.front_month_oi>0?"Open Interest":"Loading OI..."})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,color:U.oi_ratio>=1?"#ef4444":U.oi_ratio>=.75?"#f59e0b":"#22c55e"},children:U.oi_ratio>=1?"":""}),e.jsxs("div",{style:{fontSize:16,fontWeight:700,color:U.oi_ratio>=1?"#ef4444":U.oi_ratio>=.75?"#f59e0b":"#22c55e",fontFamily:"monospace"},children:[((U.oi_ratio||0)*100).toFixed(0),"%"]}),e.jsx("div",{style:{fontSize:8,color:"#666"},children:"Next/Current"})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:"NEXT"}),e.jsx("div",{style:{fontSize:14,fontWeight:700,color:U.oi_ratio>=1?"#ef4444":"#f59e0b"},children:U.next_month||"GCJ26"}),e.jsx("div",{style:{fontSize:9,color:"#666",marginTop:2},children:U.next_month_name||"Gold Apr 2026"}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:U.next_month_oi>0?"#fff":"#555",marginTop:8,fontFamily:"monospace"},children:U.next_month_oi>0?U.next_month_oi.toLocaleString():""}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:U.next_month_oi>0?"Open Interest":"Loading OI..."})]})]}),e.jsxs("div",{style:{marginTop:16},children:[e.jsxs("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden",position:"relative"},children:[e.jsx("div",{style:{width:`${Math.min((U.oi_ratio||0)*100,100)}%`,height:"100%",background:U.oi_ratio>=1?"linear-gradient(90deg, #ef4444, #dc2626)":U.oi_ratio>=.75?"linear-gradient(90deg, #f59e0b, #d97706)":"linear-gradient(90deg, #22c55e, #16a34a)",transition:"width 0.5s ease"}}),e.jsx("div",{style:{position:"absolute",left:"75%",top:0,bottom:0,width:2,background:"#f59e0b",opacity:.5}}),e.jsx("div",{style:{position:"absolute",left:"100%",top:0,bottom:0,width:2,background:"#ef4444",opacity:.5}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:4},children:[e.jsx("span",{style:{fontSize:8,color:"#666"},children:"0%"}),e.jsx("span",{style:{fontSize:8,color:"#f59e0b"},children:"75% Consider"}),e.jsx("span",{style:{fontSize:8,color:"#ef4444"},children:"100% Roll"})]})]}),U.last_update&&e.jsxs("div",{style:{marginTop:12,textAlign:"center",fontSize:9,color:"#555"},children:["OI Updated: ",U.last_update]})]})})()]})},Og=({data:t,trades:n,dateRange:i,setDateRange:o,extendedData:r})=>{var ze,Te,Ze,Et,Y,Ke,rt,et,me;const[s,l]=A.useState(2025),[a,d]=A.useState(i),[p,C]=A.useState("overview"),[x,u]=A.useState(null),[D,O]=A.useState(null),[Q,De]=A.useState(null),{metadata:f,sessions:y,volumeProfiles:R,bigVolumeDays:c,supportResistance:N,seasonality:S,dailyCandles:B,featureStatistics:F,distributions:pe}=r||{};A.useEffect(()=>{var g;((g=t.yearly_pnl)==null?void 0:g.length)>0&&!t.yearly_pnl.find(j=>j.year===s)&&l(t.yearly_pnl[t.yearly_pnl.length-1].year)},[t.yearly_pnl,s]);const U=()=>o(a),m=()=>{var j,K;const g={start:((j=f==null?void 0:f.data_range)==null?void 0:j.start)||"2021-01-27",end:((K=f==null?void 0:f.data_range)==null?void 0:K.end)||"2026-01-27"};d(g),o(g)},h=(y==null?void 0:y.length)||0,w=(y==null?void 0:y.filter(g=>g.direction==="bullish").length)||0,Me=(y==null?void 0:y.filter(g=>g.direction==="bearish").length)||0;y!=null&&y.length&&(y.reduce((g,j)=>g+(j.range||0),0)/y.length).toFixed(2),y!=null&&y.length&&Math.round(y.reduce((g,j)=>g+(j.volume||0),0)/y.length);const I=A.useMemo(()=>{if(!(n!=null&&n.length))return[];let g=1e5,j=g,K=0;return n.map(($,G)=>{g+=$.pnl||0,j=Math.max(j,g);const Z=j-g,ge=j>0?Z/j*100:0;K=Math.max(K,ge);const X=g-1e5,Ie=X/1e5*100;return{date:$.date,equity:g,peak:j,fromPeak:Z,drawdown:ge,maxDrawdownSoFar:K,totalProfit:X,totalProfitPct:Ie,pnl:$.pnl,trade:$,index:G}})},[n]),Fe=I.length?Math.max(...I.map(g=>g.drawdown)):0,He=I.length?I[I.length-1].equity:1e5,te=(He-1e5)/1e5*100,_e=(n==null?void 0:n.filter(g=>g.pnl>0))||[],v=(n==null?void 0:n.filter(g=>g.pnl<=0))||[],he=_e.length?_e.reduce((g,j)=>g+j.pnl,0)/_e.length:0,le=v.length?Math.abs(v.reduce((g,j)=>g+j.pnl,0)/v.length):0;n!=null&&n.length&&n.reduce((g,j)=>g+Math.abs((j.entry||0)-(j.stop_loss||0)),0)/n.length*100;const Ne=[{id:"overview",label:"Overview",icon:""},{id:"analytics",label:"Deep Analytics",icon:""},{id:"features",label:"Feature Analysis",icon:""},{id:"phase",label:"Phase Detection",icon:""},{id:"matrix",label:"Matrix Analysis",icon:""},{id:"seasonality",label:"Seasonality",icon:""},{id:"trades",label:"Trade Log",icon:""}],ot=({label:g,value:j,color:K,sub:$})=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.4)",borderRadius:8,padding:"10px 12px",borderLeft:`3px solid ${K}`},children:[e.jsx("div",{style:{fontSize:9,color:"#666",textTransform:"uppercase",letterSpacing:.5},children:g}),e.jsx("div",{style:{fontSize:18,fontWeight:700,color:K},children:j}),$&&e.jsx("div",{style:{fontSize:9,color:"#555"},children:$})]}),_t=({type:g,count:j,total:K,setHoveredTpo:$})=>{const Z={"P-shape":{desc:"Rally Day - Close near high. Price spent most time in upper range, indicating buying pressure.",signal:"Bullish",color:"#00ff88",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"40",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("rect",{x:"20",y:"28",width:"10",height:"18",fill:"#8b5cf6",opacity:"0.5",rx:"1"}),e.jsx("rect",{x:"32",y:"12",width:"10",height:"32",fill:"#8b5cf6",opacity:"0.8",rx:"1"}),e.jsx("rect",{x:"44",y:"6",width:"10",height:"22",fill:"#8b5cf6",rx:"1"}),e.jsx("path",{d:"M8 44 Q35 50 58 12",stroke:"#00ff88",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"58",cy:"12",r:"3",fill:"#00ff88"})]})},"b-shape":{desc:"Selloff Day - Close near low. Price spent most time in lower range, indicating selling pressure.",signal:"Bearish",color:"#ff4466",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"6",width:"10",height:"22",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"20",y:"12",width:"10",height:"32",fill:"#8b5cf6",opacity:"0.8",rx:"1"}),e.jsx("rect",{x:"32",y:"28",width:"10",height:"18",fill:"#8b5cf6",opacity:"0.5",rx:"1"}),e.jsx("rect",{x:"44",y:"40",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("path",{d:"M8 12 Q35 6 58 44",stroke:"#ff4466",strokeWidth:"2",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"58",cy:"44",r:"3",fill:"#ff4466"})]})},"D-shape":{desc:"Balanced Day - Normal bell curve distribution. Market in equilibrium, fair value found.",signal:"Neutral",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"35",width:"10",height:"10",fill:"#8b5cf6",opacity:"0.3",rx:"1"}),e.jsx("rect",{x:"20",y:"22",width:"10",height:"22",fill:"#8b5cf6",opacity:"0.6",rx:"1"}),e.jsx("rect",{x:"32",y:"10",width:"10",height:"35",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"44",y:"22",width:"10",height:"22",fill:"#8b5cf6",opacity:"0.6",rx:"1"}),e.jsx("line",{x1:"5",y1:"27",x2:"65",y2:"27",stroke:"#f97316",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:"35",y:"52",fontSize:"8",fill:"#f97316",textAnchor:"middle",children:"POC"})]})},"B-shape":{desc:"Double Distribution - Two value areas formed. Often signals trend change or balance break.",signal:"Reversal",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"8",y:"8",width:"10",height:"16",fill:"#8b5cf6",rx:"1"}),e.jsx("rect",{x:"20",y:"14",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.4",rx:"1"}),e.jsx("rect",{x:"32",y:"22",width:"10",height:"8",fill:"#8b5cf6",opacity:"0.2",rx:"1"}),e.jsx("rect",{x:"44",y:"32",width:"10",height:"16",fill:"#8b5cf6",rx:"1"}),e.jsx("circle",{cx:"13",cy:"16",r:"4",fill:"none",stroke:"#f97316",strokeWidth:"2"}),e.jsx("circle",{cx:"49",cy:"40",r:"4",fill:"none",stroke:"#f97316",strokeWidth:"2"}),e.jsx("text",{x:"35",y:"52",fontSize:"7",fill:"#888",textAnchor:"middle",children:"2 Value Areas"})]})},elongated_up:{desc:"Strong Uptrend - Elongated profile showing sustained buying. Very bullish momentum.",signal:"Very Bullish",color:"#00ff88",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"15",y:"6",width:"40",height:"10",fill:"#00ff88",rx:"2"}),e.jsx("rect",{x:"20",y:"18",width:"30",height:"8",fill:"#00ff88",opacity:"0.7",rx:"1"}),e.jsx("rect",{x:"25",y:"28",width:"20",height:"6",fill:"#00ff88",opacity:"0.4",rx:"1"}),e.jsx("path",{d:"M10 48 L60 8",stroke:"#00ff88",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("polygon",{points:"60,8 52,12 56,16",fill:"#00ff88"})]})},elongated_down:{desc:"Strong Downtrend - Elongated profile showing sustained selling. Very bearish momentum.",signal:"Very Bearish",color:"#ff4466",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"25",y:"6",width:"20",height:"6",fill:"#ff4466",opacity:"0.4",rx:"1"}),e.jsx("rect",{x:"20",y:"14",width:"30",height:"8",fill:"#ff4466",opacity:"0.7",rx:"1"}),e.jsx("rect",{x:"15",y:"24",width:"40",height:"10",fill:"#ff4466",rx:"2"}),e.jsx("path",{d:"M10 8 L60 48",stroke:"#ff4466",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("polygon",{points:"60,48 52,44 56,40",fill:"#ff4466"})]})},single_print:{desc:"Single Print Gap - Low volume area indicating weak support/resistance. Often gets filled.",signal:"Gap Fill",color:"#f97316",svg:e.jsxs("svg",{width:"70",height:"55",viewBox:"0 0 70 55",children:[e.jsx("rect",{x:"20",y:"6",width:"30",height:"14",fill:"#8b5cf6",rx:"2"}),e.jsx("rect",{x:"30",y:"24",width:"4",height:"6",fill:"#f97316",opacity:"0.5"}),e.jsx("rect",{x:"20",y:"34",width:"30",height:"14",fill:"#8b5cf6",rx:"2"}),e.jsx("text",{x:"35",y:"29",fontSize:"9",fill:"#f97316",textAnchor:"middle",fontWeight:"bold",children:"GAP"}),e.jsx("path",{d:"M50 20 L55 27 L50 34",stroke:"#f97316",strokeWidth:"1.5",fill:"none",strokeDasharray:"2"})]})}}[g]||{desc:"Market profile type",signal:"N/A",color:"#888",svg:e.jsx("svg",{width:"70",height:"55",children:e.jsx("text",{x:"35",y:"30",fontSize:"12",fill:"#666",textAnchor:"middle",children:"?"})})},ge=K>0?(j/K*100).toFixed(1):0;return e.jsx("div",{style:{display:"inline-block",cursor:"context-menu"},onContextMenu:X=>{X.preventDefault(),$({type:g,count:j,pct:ge,visual:Z,x:X.clientX,y:X.clientY})},children:e.jsxs("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:8,padding:10,textAlign:"center",border:"1px solid rgba(139,92,246,0.3)"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#8b5cf6"},children:j}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:ft(g)})]})})},Ge=({phase:g,count:j,total:K,setHoveredWyckoff:$})=>{const G={accumulation:{desc:"Smart money buying at lows after downtrend. Price consolidates in range while institutions accumulate positions quietly.",signal:"Bullish Setup",color:"#00ff88",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 8 L20 38",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"32",width:"50",height:"14",fill:"rgba(0,255,136,0.1)",stroke:"#00ff88",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M25 38 L35 35 L45 40 L55 36 L65 42",stroke:"#888",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M65 35 L75 15",stroke:"#00ff88",strokeWidth:"2",strokeDasharray:"4",fill:"none"}),e.jsx("polygon",{points:"75,15 70,22 73,20",fill:"#00ff88"})]})},distribution:{desc:"Smart money selling at highs after uptrend. Price consolidates while institutions distribute positions to retail.",signal:"Bearish Setup",color:"#ff4466",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 42 L20 12",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"20",y:"6",width:"50",height:"14",fill:"rgba(255,68,102,0.1)",stroke:"#ff4466",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M25 12 L35 15 L45 10 L55 14 L65 8",stroke:"#888",strokeWidth:"1.5",fill:"none"}),e.jsx("path",{d:"M65 15 L75 35",stroke:"#ff4466",strokeWidth:"2",strokeDasharray:"4",fill:"none"}),e.jsx("polygon",{points:"75,35 70,28 73,30",fill:"#ff4466"})]})},markup:{desc:"Uptrend phase following accumulation. Strong buying pressure with higher highs and higher lows.",signal:"Buy & Hold",color:"#00ff88",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 45 L20 38 L35 42 L50 30 L65 25 L75 10",stroke:"#00ff88",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M5 48 L75 20",stroke:"#00ff88",strokeWidth:"1",opacity:"0.3",strokeDasharray:"4"}),e.jsx("polygon",{points:"75,10 68,15 70,18",fill:"#00ff88"}),e.jsx("text",{x:"40",y:"48",fontSize:"8",fill:"#00ff88",textAnchor:"middle",fontWeight:"bold",children:"MARKUP "})]})},markdown:{desc:"Downtrend phase following distribution. Strong selling pressure with lower highs and lower lows.",signal:"Sell & Avoid",color:"#ff4466",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 10 L20 15 L35 12 L50 25 L65 30 L75 45",stroke:"#ff4466",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M5 7 L75 35",stroke:"#ff4466",strokeWidth:"1",opacity:"0.3",strokeDasharray:"4"}),e.jsx("polygon",{points:"75,45 68,40 70,37",fill:"#ff4466"}),e.jsx("text",{x:"40",y:"8",fontSize:"8",fill:"#ff4466",textAnchor:"middle",fontWeight:"bold",children:"MARKDOWN "})]})},re_accumulation:{desc:"Pause within uptrend for more accumulation. Institutions adding to long positions before next leg up.",signal:"Continue Long",color:"#00bcd4",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 42 L22 28",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"22",y:"22",width:"30",height:"12",fill:"rgba(0,188,212,0.15)",stroke:"#00bcd4",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M52 25 L75 8",stroke:"#00ff88",strokeWidth:"2",fill:"none"}),e.jsx("polygon",{points:"75,8 68,12 70,15",fill:"#00ff88"})]})},re_distribution:{desc:"Pause within downtrend for more distribution. Institutions adding to short positions before next leg down.",signal:"Continue Short",color:"#f97316",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 8 L22 22",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("rect",{x:"22",y:"18",width:"30",height:"12",fill:"rgba(249,115,22,0.15)",stroke:"#f97316",strokeWidth:"1.5",strokeDasharray:"3",rx:"2"}),e.jsx("path",{d:"M52 25 L75 42",stroke:"#ff4466",strokeWidth:"2",fill:"none"}),e.jsx("polygon",{points:"75,42 68,38 70,35",fill:"#ff4466"})]})},trending:{desc:"Clear directional movement with strong momentum. Follow the trend until signs of exhaustion.",signal:"Follow Trend",color:"#00bcd4",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("path",{d:"M5 40 L75 10",stroke:"#00bcd4",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M5 44 L75 14",stroke:"#00bcd4",strokeWidth:"1",opacity:"0.4"}),e.jsx("path",{d:"M5 36 L75 6",stroke:"#00bcd4",strokeWidth:"1",opacity:"0.4"}),e.jsx("polygon",{points:"75,10 68,14 70,17",fill:"#00bcd4"})]})},consolidation:{desc:"Sideways range-bound price action. Market undecided, wait for breakout direction.",signal:"Wait for Break",color:"#888",svg:e.jsxs("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:[e.jsx("line",{x1:"5",y1:"15",x2:"75",y2:"15",stroke:"#666",strokeWidth:"1.5",strokeDasharray:"4"}),e.jsx("line",{x1:"5",y1:"35",x2:"75",y2:"35",stroke:"#666",strokeWidth:"1.5",strokeDasharray:"4"}),e.jsx("path",{d:"M8 25 L20 20 L32 28 L44 22 L56 30 L68 24 L75 26",stroke:"#f97316",strokeWidth:"2",fill:"none"}),e.jsx("text",{x:"40",y:"46",fontSize:"7",fill:"#888",textAnchor:"middle",children:"RANGE BOUND"})]})},unknown:{desc:"Unclear market structure. Avoid trading until clearer pattern emerges.",signal:"No Trade",color:"#666",svg:e.jsx("svg",{width:"80",height:"50",viewBox:"0 0 80 50",children:e.jsx("text",{x:"40",y:"32",fontSize:"24",fill:"#666",textAnchor:"middle",children:"?"})})}},Z=G[g]||G.unknown,ge=K>0?(j/K*100).toFixed(1):0;return e.jsx("div",{style:{display:"inline-block",cursor:"context-menu"},onContextMenu:X=>{X.preventDefault(),$({phase:g,count:j,pct:ge,visual:Z,x:X.clientX,y:X.clientY})},children:e.jsxs("div",{style:{background:"rgba(0,188,212,0.1)",borderRadius:8,padding:10,textAlign:"center",border:"1px solid rgba(0,188,212,0.3)"},children:[e.jsx("div",{style:{fontSize:18,fontWeight:800,color:"#00bcd4"},children:j}),e.jsx("div",{style:{fontSize:9,color:"#888"},children:g.replace(/_/g," ")})]})})},ft=g=>g?{"P-shape":"P-Shape (Rally)","b-shape":"b-Shape (Selloff)","D-shape":"D-Shape (Balanced)","B-shape":"B-Shape (Double)",elongated_up:"Elongated Up",elongated_down:"Elongated Down",single_print:"Single Print",no_demand:"No Demand",no_supply:"No Supply",climax_bullish:"Bullish Climax",climax_bearish:"Bearish Climax",high_volume:"High Volume",low_volume:"Low Volume",absorption:"Absorption",exhaustion:"Exhaustion",normal:"Normal",trending:"Trending",consolidation:"Consolidation",accumulation:"Accumulation",distribution:"Distribution",markup:"Markup",markdown:"Markdown",re_accumulation:"Re-Accumulation",re_distribution:"Re-Distribution",unknown:"Unknown",vsa_no_effort_result:"VSA: No Effort Result",vsa_effort_no_result:"VSA: Effort No Result",cvd_bearish_divergence:"CVD Bearish Divergence",cvd_bullish_divergence:"CVD Bullish Divergence",big_trade_bullish:"Big Trade (Bullish)",big_trade_bearish:"Big Trade (Bearish)",delta_imbalance_bullish:"Delta Imbalance (Bull)",delta_imbalance_bearish:"Delta Imbalance (Bear)",absorption_bullish:"Absorption (Bullish)",absorption_bearish:"Absorption (Bearish)",institutional_accumulation:"Institutional Activity",stop_hunt:"Stop Hunt",TARGET:"Target Hit",STOP_LOSS:"Stop Loss",TIME_EXIT:"Time Exit"}[g]||g.replace(/_/g," ").replace(/\b\w/g,K=>K.toUpperCase()):"",qe={"P-shape":"Close near high, rally day. Often bullish continuation.","b-shape":"Close near low, selloff day. Often bearish continuation.","D-shape":"Balanced day, close near middle. Market in equilibrium.","B-shape":"Double distribution - two value areas. Trend change signal.",elongated_up:"Strong upward momentum, close in upper range.",elongated_down:"Strong downward momentum, close in lower range.",no_demand:"Low volume on up move - lack of buying interest.",no_supply:"Low volume on down move - lack of selling pressure.",climax_bullish:"Extreme volume on up move - potential exhaustion.",climax_bearish:"Extreme volume on down move - potential exhaustion.",absorption:"High volume, small range - large orders absorbed.",exhaustion:"Decreasing volume on trend - momentum fading.",normal:"Average volume with typical price action.",high_volume:"Above average volume - increased participation.",accumulation:"Smart money buying at lows. Bullish setup forming.",distribution:"Smart money selling at highs. Bearish setup forming.",markup:"Uptrend phase - prices rising with momentum.",markdown:"Downtrend phase - prices falling with momentum.",re_accumulation:"Pause in uptrend for more accumulation.",re_distribution:"Pause in downtrend for more distribution.",vsa_no_effort_result:"Volume Spread Analysis: Price moved without matching volume effort.",cvd_bearish_divergence:"Cumulative Volume Delta diverges bearish from price.",cvd_bullish_divergence:"Cumulative Volume Delta diverges bullish from price.",stop_hunt:"Price spiked to trigger stop losses then reversed.",absorption_bullish:"Large buy orders absorbing selling pressure.",absorption_bearish:"Large sell orders absorbing buying pressure.",institutional_accumulation:"Signs of institutional buying activity.",delta_imbalance_bullish:"Strong buying pressure shown by delta imbalance.",delta_imbalance_bearish:"Strong selling pressure shown by delta imbalance.",big_trade_bullish:"Large institutional buy order detected.",big_trade_bearish:"Large institutional sell order detected.",TARGET:"Trade hit profit target - always a winner.",STOP_LOSS:"Trade hit stop loss - always a loss (risk management).",TIME_EXIT:"Trade closed at max holding period."},[oe,Le]=A.useState(null),Be=({label:g,wins:j,total:K,pnl:$,color:G})=>{const Z=K>0?(j/K*100).toFixed(0):0,ge=ft(g),X=qe[g];return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",cursor:"help"},onMouseMove:Ie=>Le({label:g,formattedLabel:ge,wr:Z,total:K,pnl:$,color:G,tooltip:X,x:Ie.clientX,y:Ie.clientY}),onMouseLeave:()=>Le(null),children:[e.jsx("div",{style:{width:150,fontSize:11,color:"#ccc"},children:ge}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative",overflow:"hidden",minWidth:80},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Z}%`,background:G,borderRadius:4}}),e.jsxs("div",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:600,color:"#fff"},children:[Z,"%"]})]}),e.jsx("div",{style:{width:40,fontSize:10,color:"#888",textAlign:"right"},children:K}),e.jsxs("div",{style:{width:65,fontSize:10,color:$>=0?"#00ff88":"#ff4466",textAlign:"right",fontWeight:600},children:["$",($/1e3).toFixed(1),"K"]})]})},[P,ne]=A.useState(null),ke=({id:g,title:j,content:K,color:$})=>e.jsx("span",{style:{cursor:"pointer",fontSize:12,color:"#666",opacity:.7,marginLeft:8},onMouseMove:G=>ne({id:g,title:j,content:K,color:$,x:G.clientX,y:G.clientY}),onMouseLeave:()=>ne(null),children:""}),Ae={tpo:{title:"TPO Profile Types",content:"Time Price Opportunity (TPO) profiles show where price spent the most time. P-shape = rally day (close near high). b-shape = selloff day (close near low). D-shape = balanced day. B-shape = double distribution with two value areas."},volume:{title:"Volume Patterns",content:"Volume analysis reveals institutional activity. Climax = extreme volume with large range. Absorption = high volume but small range (accumulation). No Demand/Supply = low volume indicating lack of interest. Exhaustion = decreasing volume on trend continuation."},wyckoff:{title:"Wyckoff Phases",content:"Market cycle phases based on Wyckoff methodology. Accumulation = institutional buying at lows. Distribution = institutional selling at highs. Markup = uptrend phase. Markdown = downtrend phase. Re-accumulation/Re-distribution = pauses within trends."},orderflow:{title:"Order Flow Patterns",content:"Order flow detects institutional footprints. Big Trades = large volume spikes indicating institutional activity. CVD Divergence = price vs cumulative delta mismatch. Delta Imbalance = strong directional buying/selling pressure. Stop Hunt = price spikes to trigger stops then reverses."},exit:{title:"Exit Reasons",content:"How trades were closed. TARGET = price hit profit target (best outcome). TIME_EXIT = closed after max holding period. STOP_LOSS = protective stop triggered (controlled loss). Each exit type has different win rate implications."}};return e.jsxs("div",{style:{background:"#0a0a0f",minHeight:"100vh",padding:16},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,flexWrap:"wrap",gap:12},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{fontSize:20,fontWeight:800,color:"#fff",margin:0},children:"Horizon Backtest Analytics"}),e.jsxs("p",{style:{fontSize:11,color:"#666",margin:0},children:[(ze=f==null?void 0:f.data_range)==null?void 0:ze.start," to ",(Te=f==null?void 0:f.data_range)==null?void 0:Te.end," | ",(n==null?void 0:n.length)||0," trades"]})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("input",{type:"date",value:a.start,onChange:g=>d({...a,start:g.target.value}),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"6px 10px",color:"#fff",fontSize:11}}),e.jsx("span",{style:{color:"#666",fontSize:11},children:"to"}),e.jsx("input",{type:"date",value:a.end,onChange:g=>d({...a,end:g.target.value}),style:{background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:6,padding:"6px 10px",color:"#fff",fontSize:11}}),e.jsx("button",{onClick:U,style:{background:"#00ff88",border:"none",borderRadius:6,padding:"6px 12px",color:"#000",fontWeight:600,cursor:"pointer",fontSize:11},children:"Apply"}),e.jsx("button",{onClick:m,style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:6,padding:"6px 12px",color:"#888",cursor:"pointer",fontSize:11},children:"Reset"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(10, 1fr)",gap:8,marginBottom:16},children:[e.jsx(ot,{label:"Trades",value:(n==null?void 0:n.length)||0,color:"#00ff88"}),e.jsx(ot,{label:"Win Rate",value:`${((((Ze=t.summary)==null?void 0:Ze.win_rate)||0)*100).toFixed(1)}%`,color:(((Et=t.summary)==null?void 0:Et.win_rate)||0)>=.5?"#00ff88":"#ff4466",sub:`${_e.length}W / ${v.length}L`}),e.jsx(ot,{label:"Profit Factor",value:(((Y=t.summary)==null?void 0:Y.profit_factor)||0).toFixed(2),color:((Ke=t.summary)==null?void 0:Ke.profit_factor)>=1.5?"#00ff88":"#ffaa00"}),e.jsx(ot,{label:"Total P&L",value:`$${((((rt=t.summary)==null?void 0:rt.total_pnl)||0)/1e3).toFixed(0)}K`,color:((et=t.summary)==null?void 0:et.total_pnl)>=0?"#00ff88":"#ff4466"}),e.jsx(ot,{label:"Max DD",value:`${Fe.toFixed(1)}%`,color:Fe>20?"#ff4466":"#ffaa00"}),e.jsx(ot,{label:"Avg Win",value:`$${(he/1e3).toFixed(1)}K`,color:"#00ff88"}),e.jsx(ot,{label:"Avg Loss",value:`$${(le/1e3).toFixed(1)}K`,color:"#ff4466"}),e.jsx(ot,{label:"Avg R",value:`${(((me=t.summary)==null?void 0:me.avg_r)||0).toFixed(2)}R`,color:"#8b5cf6"}),e.jsx(ot,{label:"Return",value:`${te.toFixed(1)}%`,color:te>=0?"#00ff88":"#ff4466"}),e.jsx(ot,{label:"Final Equity",value:`$${(He/1e3).toFixed(0)}K`,color:"#f97316"})]}),e.jsx("div",{style:{display:"flex",gap:6,marginBottom:16},children:Ne.map(g=>e.jsxs("button",{onClick:()=>C(g.id),style:{background:p===g.id?"#00ff88":"rgba(255,255,255,0.05)",border:"none",borderRadius:6,padding:"8px 16px",color:p===g.id?"#000":"#888",fontWeight:600,cursor:"pointer",fontSize:11},children:[g.icon," ",g.label]},g.id))}),p==="overview"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"linear-gradient(180deg, rgba(0,20,10,0.8) 0%, rgba(0,0,0,0.95) 100%)",borderRadius:16,padding:20,border:"1px solid rgba(0,255,136,0.15)",boxShadow:"0 4px 24px rgba(0,0,0,0.5)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx("h3",{style:{fontSize:14,fontWeight:700,color:"#fff",margin:0,letterSpacing:.5},children:"Equity Curve"}),e.jsxs("div",{style:{fontSize:10,color:"#666"},children:[I.length," trades"]})]}),e.jsx("div",{style:{height:220,position:"relative"},onMouseLeave:()=>u(null),children:I.length>0?(()=>{const g=Math.max(...I.map(X=>X.equity)),j=Math.min(...I.map(X=>X.equity)),K=g-j||1,$=X=>200-(X-j)/K*170,G=X=>20+X/(I.length-1)*560,Z=I.map((X,Ie)=>`${Ie===0?"M":"L"} ${G(Ie)} ${$(X.equity)}`).join(" "),ge=`${Z} L ${G(I.length-1)} 200 L 20 200 Z`;return e.jsxs(e.Fragment,{children:[e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 600 220",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"eqGradPremium",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#00ff88",stopOpacity:"0.25"}),e.jsx("stop",{offset:"50%",stopColor:"#00cc66",stopOpacity:"0.1"}),e.jsx("stop",{offset:"100%",stopColor:"#00ff88",stopOpacity:"0"})]}),e.jsxs("filter",{id:"glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("linearGradient",{id:"lineGrad",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#00cc66"}),e.jsx("stop",{offset:"50%",stopColor:"#00ff88"}),e.jsx("stop",{offset:"100%",stopColor:"#00ffaa"})]})]}),[.25,.5,.75].map(X=>e.jsx("line",{x1:"20",y1:200-X*170,x2:"580",y2:200-X*170,stroke:"rgba(255,255,255,0.05)",strokeWidth:"1"},X)),e.jsx("line",{x1:"20",y1:$(1e5),x2:"580",y2:$(1e5),stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",strokeDasharray:"4,4"}),e.jsx("text",{x:"585",y:$(1e5)+4,fontSize:"8",fill:"#666",children:"$100K"}),e.jsx("path",{d:ge,fill:"url(#eqGradPremium)"}),e.jsx("path",{d:Z,fill:"none",stroke:"url(#lineGrad)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#glow)"}),I.map((X,Ie)=>e.jsx("rect",{x:G(Ie)-5,y:0,width:10,height:220,fill:"transparent",style:{cursor:"crosshair"},onMouseEnter:()=>u(Ie)},Ie)),x!==null&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:G(x),y1:0,x2:G(x),y2:200,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1",strokeDasharray:"2,2"}),e.jsx("circle",{cx:G(x),cy:$(I[x].equity),r:8,fill:"none",stroke:"#00ff88",strokeWidth:"2"}),e.jsx("circle",{cx:G(x),cy:$(I[x].equity),r:4,fill:I[x].pnl>=0?"#00ff88":"#ff4466"})]}),e.jsxs("text",{x:"5",y:"15",fontSize:"9",fill:"#666",children:["$",(g/1e3).toFixed(0),"K"]}),e.jsxs("text",{x:"5",y:"200",fontSize:"9",fill:"#666",children:["$",(j/1e3).toFixed(0),"K"]})]}),x!==null&&I[x]&&(()=>{var Ie;const X=I[x];return e.jsxs("div",{style:{position:"absolute",top:10,right:10,background:"linear-gradient(135deg, rgba(0,30,20,0.98) 0%, rgba(0,0,0,0.98) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,padding:14,fontSize:11,minWidth:180,backdropFilter:"blur(10px)",boxShadow:"0 8px 32px rgba(0,0,0,0.4)"},children:[e.jsx("div",{style:{fontWeight:700,color:"#00ff88",marginBottom:8,fontSize:12,borderBottom:"1px solid rgba(255,255,255,0.1)",paddingBottom:8},children:X.date}),e.jsxs("div",{style:{display:"grid",gap:6},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Equity"}),e.jsxs("span",{style:{color:"#00ff88",fontWeight:700},children:["$",(X.equity/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Trade P&L"}),e.jsxs("span",{style:{color:X.pnl>=0?"#00ff88":"#ff4466",fontWeight:600},children:[X.pnl>=0?"+":"","$",(Ie=X.pnl)==null?void 0:Ie.toFixed(0)]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Total Profit"}),e.jsxs("span",{style:{color:X.totalProfit>=0?"#00ff88":"#ff4466",fontWeight:700},children:[X.totalProfit>=0?"+":"","$",(X.totalProfit/1e3).toFixed(1),"K ",e.jsxs("span",{style:{fontSize:9,opacity:.7},children:["(",X.totalProfitPct>=0?"+":"",X.totalProfitPct.toFixed(0),"%)"]})]})]}),e.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,0.1)",paddingTop:6,marginTop:2},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Peak"}),e.jsxs("span",{style:{color:"#fff"},children:["$",(X.peak/1e3).toFixed(1),"K"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"From Peak"}),e.jsx("span",{style:{color:X.fromPeak>0?"#ff4466":"#00ff88",fontWeight:600},children:X.fromPeak>0?`-$${(X.fromPeak/1e3).toFixed(1)}K (${X.drawdown.toFixed(1)}%)`:"AT HIGH"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#888"},children:"Max DD"}),e.jsxs("span",{style:{color:X.maxDrawdownSoFar>10?"#ff4466":"#ffaa00",fontWeight:600},children:[X.maxDrawdownSoFar.toFixed(1),"%"]})]})]}),e.jsxs("div",{style:{fontSize:9,color:"#555",textAlign:"right",marginTop:2},children:["Trade #",x+1]})]})]})})()]})})():e.jsx("div",{style:{color:"#666",textAlign:"center",paddingTop:100},children:"No data"})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Yearly Performance"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:(t.yearly_pnl||[]).map(g=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:10,textAlign:"center",border:s===g.year?"2px solid #00ff88":"1px solid transparent",cursor:"pointer"},onClick:()=>l(g.year),children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:"#fff"},children:g.year}),e.jsxs("div",{style:{fontSize:14,fontWeight:800,color:g.pnl>=0?"#00ff88":"#ff4466"},children:["$",(g.pnl/1e3).toFixed(0),"K"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:[g.trades," trades | ",((g.win_rate||0)*100).toFixed(1),"%"]})]},g.year))})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Winners vs Losers"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[e.jsxs("div",{style:{background:"rgba(0,255,136,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(0,255,136,0.3)"},children:[e.jsxs("div",{style:{fontSize:10,color:"#00ff88",marginBottom:8},children:["WINNERS (",_e.length,")"]}),e.jsxs("div",{style:{fontSize:9,color:"#888",display:"grid",gap:4},children:[e.jsxs("div",{children:["Avg P&L: ",e.jsxs("span",{style:{color:"#00ff88",fontWeight:600},children:["$",he.toFixed(0)]})]}),e.jsxs("div",{children:["Best: ",e.jsxs("span",{style:{color:"#00ff88"},children:["$",Math.max(..._e.map(g=>g.pnl||0)).toFixed(0)]})]}),e.jsxs("div",{children:["Avg R: ",e.jsxs("span",{style:{color:"#00ff88"},children:[(_e.reduce((g,j)=>g+(j.r||0),0)/_e.length).toFixed(2),"R"]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,68,102,0.1)",borderRadius:8,padding:12,border:"1px solid rgba(255,68,102,0.3)"},children:[e.jsxs("div",{style:{fontSize:10,color:"#ff4466",marginBottom:8},children:["LOSERS (",v.length,")"]}),e.jsxs("div",{style:{fontSize:9,color:"#888",display:"grid",gap:4},children:[e.jsxs("div",{children:["Avg P&L: ",e.jsxs("span",{style:{color:"#ff4466",fontWeight:600},children:["-$",le.toFixed(0)]})]}),e.jsxs("div",{children:["Worst: ",e.jsxs("span",{style:{color:"#ff4466"},children:["$",Math.min(...v.map(g=>g.pnl||0)).toFixed(0)]})]}),e.jsxs("div",{children:["Avg R: ",e.jsxs("span",{style:{color:"#ff4466"},children:[(v.reduce((g,j)=>g+(j.r||0),0)/v.length).toFixed(2),"R"]})]})]})]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Market Direction (5Y)"}),e.jsxs("div",{style:{display:"flex",gap:4,marginBottom:8},children:[e.jsx("div",{style:{flex:w,background:"#00ff88",height:20,borderRadius:4}}),e.jsx("div",{style:{flex:Me,background:"#ff4466",height:20,borderRadius:4}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:10},children:[e.jsxs("span",{style:{color:"#00ff88"},children:[w," Bullish (",(w/h*100).toFixed(1),"%)"]}),e.jsxs("span",{style:{color:"#ff4466"},children:[Me," Bearish (",(Me/h*100).toFixed(1),"%)"]})]})]})]}),p==="analytics"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#8b5cf6",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO Profile Types",e.jsx(ke,{id:"tpo",title:Ae.tpo.title,content:Ae.tpo.content,color:"#8b5cf6"})]}),Object.entries((F==null?void 0:F.by_tpo_type)||{}).sort((g,j)=>j[1].total-g[1].total).map(([g,j])=>e.jsx(Be,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#8b5cf6"},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Volume Patterns",e.jsx(ke,{id:"volume",title:Ae.volume.title,content:Ae.volume.content,color:"#f97316"})]}),Object.entries((F==null?void 0:F.by_volume_pattern)||{}).sort((g,j)=>j[1].total-g[1].total).slice(0,8).map(([g,j])=>e.jsx(Be,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#f97316"},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00bcd4",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phases",e.jsx(ke,{id:"wyckoff",title:Ae.wyckoff.title,content:Ae.wyckoff.content,color:"#00bcd4"})]}),Object.entries((F==null?void 0:F.by_wyckoff_phase)||{}).sort((g,j)=>j[1].total-g[1].total).map(([g,j])=>e.jsx(Be,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#00bcd4"},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Order Flow Patterns",e.jsx(ke,{id:"orderflow",title:Ae.orderflow.title,content:Ae.orderflow.content,color:"#ff4466"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px 32px"},children:Object.entries((F==null?void 0:F.by_order_flow)||{}).sort((g,j)=>j[1].total-g[1].total).map(([g,j])=>e.jsx(Be,{label:g,wins:j.wins,total:j.total,pnl:j.pnl,color:"#ff4466"},g))})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Exit Reasons",e.jsx(ke,{id:"exit",title:Ae.exit.title,content:Ae.exit.content,color:"#00ff88"})]}),(()=>{const g=(F==null?void 0:F.by_exit_reason)||{},j=Object.values(g).reduce((K,$)=>K+$.total,0);return Object.entries(g).sort((K,$)=>$[1].total-K[1].total).map(([K,$])=>{const G=j>0?($.total/j*100).toFixed(0):0,Z=ft(K),ge=K==="TARGET"?"#00ff88":K==="STOP_LOSS"?"#ff4466":"#f97316";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:100,fontSize:11,color:"#ccc"},children:Z}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative",overflow:"hidden",minWidth:100},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${G}%`,background:ge,borderRadius:4}}),e.jsxs("div",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:10,fontWeight:600,color:"#fff"},children:[G,"%"]})]}),e.jsx("div",{style:{width:45,fontSize:10,color:"#888",textAlign:"right"},children:$.total}),e.jsxs("div",{style:{width:70,fontSize:10,color:$.pnl>=0?"#00ff88":"#ff4466",textAlign:"right",fontWeight:600},children:["$",($.pnl/1e3).toFixed(1),"K"]})]},K)})})()]})]}),p==="features"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO Type Distribution (All Sessions)",e.jsx(ke,{id:"tpo_dist",title:"TPO Distribution",content:"Total count of each TPO profile type across all trading sessions. TPO (Time Price Opportunity) profiles show where price spent the most time.",color:"#8b5cf6"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:(()=>{const g=Object.values((pe==null?void 0:pe.tpo_types)||{}).reduce((j,K)=>j+K,0);return Object.entries((pe==null?void 0:pe.tpo_types)||{}).sort((j,K)=>K[1]-j[1]).map(([j,K])=>e.jsx(_t,{type:j,count:K,total:g,setHoveredTpo:O},j))})()})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phase Distribution",e.jsx(ke,{id:"wyckoff_dist",title:"Wyckoff Distribution",content:"Market cycle phases based on Wyckoff methodology. Shows institutional accumulation/distribution patterns.",color:"#00bcd4"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:8},children:(()=>{const g=Object.values((pe==null?void 0:pe.wyckoff_phases)||{}).reduce((j,K)=>j+K,0);return Object.entries((pe==null?void 0:pe.wyckoff_phases)||{}).sort((j,K)=>K[1]-j[1]).map(([j,K])=>e.jsx(Ge,{phase:j,count:K,total:g,setHoveredWyckoff:De},j))})()})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Performing Setups",e.jsx(ke,{id:"best_setups",title:"Best Setups",content:"TPO profile types with the highest win rates (minimum 5 trades). These patterns historically produced the most consistent winning trades. Consider prioritizing entries during these market structures.",color:"#00ff88"})]}),Object.entries((F==null?void 0:F.by_tpo_type)||{}).filter(([,g])=>g.total>=5).sort((g,j)=>j[1].win_rate-g[1].win_rate).slice(0,5).map(([g,j])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:11},children:[e.jsx("span",{style:{color:"#888"},children:g}),e.jsxs("span",{style:{color:"#00ff88",fontWeight:600},children:[j.win_rate,"% WR | $",(j.pnl/1e3).toFixed(1),"K"]})]},g))]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Worst Performing Setups",e.jsx(ke,{id:"worst_setups",title:"Worst Setups",content:"TPO profile types with the lowest win rates (minimum 5 trades). These patterns historically produced more losing trades. Consider avoiding or using tighter stops when trading during these market structures.",color:"#ff4466"})]}),Object.entries((F==null?void 0:F.by_tpo_type)||{}).filter(([,g])=>g.total>=5).sort((g,j)=>g[1].win_rate-j[1].win_rate).slice(0,5).map(([g,j])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)",fontSize:11},children:[e.jsx("span",{style:{color:"#888"},children:g}),e.jsxs("span",{style:{color:"#ff4466",fontWeight:600},children:[j.win_rate,"% WR | $",(j.pnl/1e3).toFixed(1),"K"]})]},g))]})]}),p==="phase"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00bcd4",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Wyckoff Phase Detection",e.jsx(ke,{id:"phase_detect",title:"Phase Detection",content:"Market phases identified using Wyckoff methodology across 5 years of historical data. Shows how price moves through accumulation, markup, distribution, and markdown cycles.",color:"#00bcd4"})]}),(()=>{const g=(pe==null?void 0:pe.wyckoff_phases)||{},j=Object.values(g).reduce(($,G)=>$+G,0),K={accumulation:"#00ff88",markup:"#22c55e",distribution:"#ff4466",markdown:"#ef4444",consolidation:"#f97316",trending:"#a855f7",re_accumulation:"#10b981",re_distribution:"#f43f5e",unknown:"#666"};return Object.entries(g).sort(($,G)=>G[1]-$[1]).map(([$,G])=>{const Z=j>0?(G/j*100).toFixed(1):0,ge=K[$]||"#888";return e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:11,color:"#ccc"},children:ft($)}),e.jsxs("span",{style:{fontSize:11,color:ge,fontWeight:600},children:[G," (",Z,"%)"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:4,height:8,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Z}%`,height:"100%",background:ge,borderRadius:4}})})]},$)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#a855f7",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Phase Performance Analysis",e.jsx(ke,{id:"phase_perf",title:"Phase Performance",content:"Trading performance breakdown by Wyckoff phase. Shows win rate and P&L for each market phase to identify which phases are most profitable to trade.",color:"#a855f7"})]}),(()=>{const g=(F==null?void 0:F.by_wyckoff_phase)||{};return Object.entries(g).sort((j,K)=>K[1].pnl-j[1].pnl).map(([j,K])=>{const $=K.win_rate||0,G=$>=65?"#00ff88":$>=50?"#f97316":"#ff4466";return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"8px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("div",{style:{width:90,fontSize:10,color:"#aaa"},children:ft(j)}),e.jsxs("div",{style:{width:50,fontSize:10,color:G,fontWeight:600},children:[$.toFixed(0),"% WR"]}),e.jsx("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:12,position:"relative"},children:e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${Math.min(100,$)}%`,background:G,borderRadius:4}})}),e.jsxs("div",{style:{width:70,fontSize:10,color:K.pnl>=0?"#00ff88":"#ff4466",fontWeight:600,textAlign:"right"},children:["$",(K.pnl/1e3).toFixed(1),"K"]})]},j)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Order Flow Pattern Detection",e.jsx(ke,{id:"orderflow_detect",title:"Order Flow Detection",content:"Detected order flow patterns: CVD divergences, VSA no-effort results, delta imbalances, and absorption patterns identified across historical sessions.",color:"#ff4466"})]}),(()=>{const g=(F==null?void 0:F.by_order_flow)||{},j=Object.values(g).reduce(($,G)=>$+G.total,0),K={cvd_bullish_divergence:"#00ff88",cvd_bearish_divergence:"#ff4466",vsa_no_effort_result:"#f97316",delta_imbalance:"#a855f7",absorption:"#00bcd4",normal:"#666"};return Object.entries(g).sort(($,G)=>G[1].total-$[1].total).map(([$,G])=>{const Z=j>0?(G.total/j*100).toFixed(1):0,ge=K[$]||"#888";return e.jsxs("div",{style:{marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[e.jsx("span",{style:{fontSize:10,color:"#ccc"},children:ft($)}),e.jsxs("span",{style:{fontSize:10,color:"#888"},children:[G.total," trades (",Z,"%)"]})]}),e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:8,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Z}%`,height:"100%",background:ge,borderRadius:4}})}),e.jsxs("span",{style:{fontSize:9,color:G.win_rate>=60?"#00ff88":"#f97316",fontWeight:600,width:45},children:[G.win_rate.toFixed(0),"% WR"]})]})]},$)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Volume Pattern Detection",e.jsx(ke,{id:"volume_detect",title:"Volume Patterns",content:"Volume patterns detected using VSA (Volume Spread Analysis): climax, exhaustion, absorption, no demand/supply signals across 1,257 trading sessions.",color:"#f97316"})]}),(()=>{const g=(pe==null?void 0:pe.volume_patterns)||{},j=Object.values(g).reduce(($,G)=>$+G,0),K={climax_bullish:"#00ff88",climax_bearish:"#ff4466",exhaustion:"#f97316",absorption:"#a855f7",no_demand:"#ff6b6b",no_supply:"#22c55e",high_volume:"#00bcd4",low_volume:"#888",normal:"#666"};return Object.entries(g).sort(($,G)=>G[1]-$[1]).map(([$,G])=>{const Z=j>0?(G/j*100).toFixed(1):0,ge=K[$]||"#888";return e.jsxs("div",{style:{marginBottom:8},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:3},children:[e.jsx("span",{style:{fontSize:10,color:"#ccc"},children:ft($)}),e.jsxs("span",{style:{fontSize:10,color:ge,fontWeight:600},children:[G," (",Z,"%)"]})]}),e.jsx("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:3,height:6,overflow:"hidden"},children:e.jsx("div",{style:{width:`${Z}%`,height:"100%",background:ge,borderRadius:3}})})]},$)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#22c55e",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Historical GEX Regime Analysis (Simulated from Price Action)",e.jsx(ke,{id:"gex_regime",title:"GEX Regimes",content:"GEX regime classification derived from historical price volatility and range patterns. High GEX (>$5B) correlates with mean-reverting conditions, Low GEX (<$1B) with trending/volatile markets.",color:"#22c55e"})]}),(()=>{const g=(t==null?void 0:t.daily_candles)||[];let j=0,K=0,$=0,G=0;g.forEach(X=>{const Ie=X.high-X.low,st=(X.high+X.low)/2,at=st>0?Ie/st*100:0;at<.5?j++:at<1?K++:at<2?$++:G++});const Z=j+K+$+G||1,ge=[{name:"High GEX (>$5B)",count:j,pct:(j/Z*100).toFixed(1),color:"#00ff88",desc:"Mean-reverting, low volatility"},{name:"Medium GEX ($1-5B)",count:K,pct:(K/Z*100).toFixed(1),color:"#f97316",desc:"Normal conditions"},{name:"Low GEX (<$1B)",count:$,pct:($/Z*100).toFixed(1),color:"#ff4466",desc:"Trending, higher volatility"},{name:"Negative GEX",count:G,pct:(G/Z*100).toFixed(1),color:"#a855f7",desc:"Extreme volatility, dealer short gamma"}];return e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:12},children:ge.map(X=>e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:8,padding:12,textAlign:"center",borderTop:`3px solid ${X.color}`},children:[e.jsx("div",{style:{fontSize:22,fontWeight:800,color:X.color},children:X.count}),e.jsx("div",{style:{fontSize:10,color:"#888",marginBottom:4},children:X.name}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#fff"},children:[X.pct,"%"]}),e.jsx("div",{style:{fontSize:8,color:"#666",marginTop:4},children:X.desc})]},X.name))})})()]})]}),p==="matrix"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#a855f7",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["TPO-Wyckoff Phase Correlation Matrix",e.jsx(ke,{id:"tpo_wyckoff_matrix",title:"Correlation Matrix",content:"Heat map showing which TPO profile types occur during which Wyckoff phases. Helps identify market structure patterns and optimal entry conditions.",color:"#a855f7"})]}),(()=>{const g=["P-shape","b-shape","D-shape","B-shape","elongated_up","elongated_down","single_print"],j=["accumulation","markup","distribution","markdown","consolidation","trending","re_accumulation","re_distribution"],K={};g.forEach(G=>{K[G]={},j.forEach(Z=>{K[G][Z]=0})}),(n||[]).forEach(G=>{const Z=G.tpo_type||"unknown",ge=G.wyckoff_phase||"unknown";K[Z]&&K[Z][ge]!==void 0&&K[Z][ge]++});let $=1;return g.forEach(G=>j.forEach(Z=>{K[G][Z]>$&&($=K[G][Z])})),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:6,textAlign:"left",color:"#888",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"TPO / Phase"}),j.map(G=>e.jsx("th",{style:{padding:6,textAlign:"center",color:"#00bcd4",borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:8},children:ft(G).split(" ")[0]},G))]})}),e.jsx("tbody",{children:g.map(G=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6,color:"#8b5cf6",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:G}),j.map(Z=>{const ge=K[G][Z],X=ge/$,Ie=ge>0?`rgba(168,85,247,${.1+X*.6})`:"transparent";return e.jsx("td",{style:{padding:6,textAlign:"center",background:Ie,color:ge>0?"#fff":"#333",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:ge>0?ge:"-"},Z)})]},G))})]})})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)",gridColumn:"span 2"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#00ff88",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Win Rate Matrix (TPO + Wyckoff Combinations)",e.jsx(ke,{id:"wr_matrix",title:"Win Rate Matrix",content:"Historical win rates for each TPO-Wyckoff combination. Green cells indicate high-probability setups (>65% WR), red cells indicate setups to avoid (<45% WR).",color:"#00ff88"})]}),(()=>{const g=["P-shape","b-shape","D-shape","B-shape","elongated_up","elongated_down"],j=["accumulation","markup","distribution","markdown","consolidation","trending"],K={};return g.forEach($=>{K[$]={},j.forEach(G=>{K[$][G]={wins:0,total:0}})}),(n||[]).forEach($=>{const G=$.tpo_type||"unknown",Z=$.wyckoff_phase||"unknown";K[G]&&K[G][Z]&&(K[G][Z].total++,$.pnl>0&&K[G][Z].wins++)}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:10},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:6,textAlign:"left",color:"#888",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:"TPO / Phase"}),j.map($=>e.jsx("th",{style:{padding:6,textAlign:"center",color:"#00bcd4",borderBottom:"1px solid rgba(255,255,255,0.1)",fontSize:8},children:ft($).split(" ")[0]},$))]})}),e.jsx("tbody",{children:g.map($=>e.jsxs("tr",{children:[e.jsx("td",{style:{padding:6,color:"#8b5cf6",fontWeight:600,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:$}),j.map(G=>{const{wins:Z,total:ge}=K[$][G],X=ge>0?(Z/ge*100).toFixed(0):null,Ie=X===null?"#333":X>=65?"#00ff88":X>=50?"#f97316":"#ff4466",st=X===null?"transparent":X>=65?"rgba(0,255,136,0.15)":X>=50?"rgba(249,115,22,0.1)":"rgba(255,68,102,0.15)";return e.jsxs("td",{style:{padding:6,textAlign:"center",background:st,color:Ie,fontWeight:X!==null?600:400,borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[X!==null?`${X}%`:"-",ge>0&&e.jsxs("div",{style:{fontSize:7,color:"#666"},children:["n=",ge]})]},G)})]},$))})]})})})(),e.jsxs("div",{style:{marginTop:12,display:"flex",gap:16,justifyContent:"center",fontSize:9},children:[e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(0,255,136,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," High WR (65%+)"]}),e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(249,115,22,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," Medium WR (50-65%)"]}),e.jsxs("span",{children:[e.jsx("span",{style:{display:"inline-block",width:12,height:12,background:"rgba(255,68,102,0.3)",borderRadius:2,marginRight:4,verticalAlign:"middle"}})," Low WR (<50%)"]})]})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#ff4466",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Order Flow + TPO Combinations",e.jsx(ke,{id:"of_tpo",title:"Order Flow + TPO",content:"Most profitable combinations of order flow signals with TPO profile types. These combinations showed the highest win rates in backtesting.",color:"#ff4466"})]}),(()=>{const g={};return(n||[]).forEach(j=>{const K=`${j.order_flow||"normal"}|${j.tpo_type||"unknown"}`;g[K]||(g[K]={wins:0,total:0,pnl:0}),g[K].total++,g[K].pnl+=j.pnl||0,j.pnl>0&&g[K].wins++}),Object.entries(g).filter(([,j])=>j.total>=5).map(([j,K])=>({key:j,...K,wr:K.wins/K.total*100})).sort((j,K)=>K.wr-j.wr).slice(0,8).map(j=>{const[K,$]=j.key.split("|");return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{flex:1,fontSize:10,color:"#ccc"},children:[e.jsx("span",{style:{color:"#ff4466"},children:ft(K)})," + ",e.jsx("span",{style:{color:"#8b5cf6"},children:$})]}),e.jsxs("div",{style:{fontSize:10,color:j.wr>=65?"#00ff88":"#f97316",fontWeight:600},children:[j.wr.toFixed(0),"%"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:["n=",j.total]})]},j.key)})})()]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{fontSize:13,fontWeight:700,color:"#f97316",margin:0,marginBottom:12,display:"flex",alignItems:"center"},children:["Best Volume + Wyckoff Combinations",e.jsx(ke,{id:"vol_wyckoff",title:"Volume + Wyckoff",content:"Most profitable combinations of volume patterns with Wyckoff phases. Identifies which volume signals work best in specific market cycles.",color:"#f97316"})]}),(()=>{const g={};return(n||[]).forEach(j=>{const K=`${j.volume_pattern||"normal"}|${j.wyckoff_phase||"unknown"}`;g[K]||(g[K]={wins:0,total:0,pnl:0}),g[K].total++,g[K].pnl+=j.pnl||0,j.pnl>0&&g[K].wins++}),Object.entries(g).filter(([,j])=>j.total>=5).map(([j,K])=>({key:j,...K,wr:K.wins/K.total*100})).sort((j,K)=>K.wr-j.wr).slice(0,8).map(j=>{const[K,$]=j.key.split("|");return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"6px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{flex:1,fontSize:10,color:"#ccc"},children:[e.jsx("span",{style:{color:"#f97316"},children:ft(K)})," + ",e.jsx("span",{style:{color:"#00bcd4"},children:ft($)})]}),e.jsxs("div",{style:{fontSize:10,color:j.wr>=65?"#00ff88":"#f97316",fontWeight:600},children:[j.wr.toFixed(0),"%"]}),e.jsxs("div",{style:{fontSize:9,color:"#666"},children:["n=",j.total]})]},j.key)})})()]})]}),p==="seasonality"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16},children:[e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Monthly Seasonality"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:8},children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(g=>{var K;const j=((K=S==null?void 0:S.monthly)==null?void 0:K[g])||{win_rate:50,avg_return:0};return e.jsxs("div",{style:{background:"rgba(0,0,0,0.3)",borderRadius:6,padding:8,textAlign:"center"},children:[e.jsx("div",{style:{fontSize:9,color:"#666"},children:g.slice(0,3)}),e.jsxs("div",{style:{fontSize:14,fontWeight:700,color:j.avg_return>=0?"#00ff88":"#ff4466"},children:[j.win_rate,"%"]}),e.jsxs("div",{style:{fontSize:8,color:j.avg_return>=0?"#00ff88":"#ff4466"},children:[j.avg_return>=0?"+":"",j.avg_return.toFixed(2),"%"]})]},g)})})]}),e.jsxs("div",{style:{background:"rgba(255,255,255,0.02)",borderRadius:12,padding:16,border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsx("h3",{style:{fontSize:13,fontWeight:700,color:"#fff",margin:0,marginBottom:12},children:"Day of Week"}),["Monday","Tuesday","Wednesday","Thursday","Friday"].map(g=>{var K;const j=((K=S==null?void 0:S.day_of_week)==null?void 0:K[g])||{win_rate:50,avg_return:0};return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx("div",{style:{width:60,fontSize:10,color:"#888"},children:g.slice(0,3)}),e.jsxs("div",{style:{flex:1,background:"rgba(255,255,255,0.05)",borderRadius:4,height:18,position:"relative"},children:[e.jsx("div",{style:{position:"absolute",left:0,top:0,bottom:0,width:`${j.win_rate}%`,background:j.avg_return>=0?"#00ff88":"#ff4466",borderRadius:4}}),e.jsxs("span",{style:{position:"absolute",left:6,top:"50%",transform:"translateY(-50%)",fontSize:9,color:"#fff",fontWeight:600},children:[j.win_rate,"%"]})]})]},g)})]})]}),p==="trades"&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:16},children:[e.jsx(Rp,{trades:n,dateRange:i}),e.jsx(Ag,{trades:n})]}),oe&&e.jsxs("div",{style:{position:"fixed",left:oe.x+15,top:oe.y+15,transform:oe.x>window.innerWidth-340?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(20,20,25,0.98) 0%, rgba(10,10,15,0.98) 100%)",border:`1px solid ${oe.color}44`,borderRadius:10,padding:"12px 14px",minWidth:240,maxWidth:320,boxShadow:`0 12px 32px rgba(0,0,0,0.8), 0 0 15px ${oe.color}22`,zIndex:9999,pointerEvents:"none"},children:[e.jsx("div",{style:{fontWeight:700,color:oe.color,marginBottom:8,fontSize:13},children:oe.formattedLabel}),e.jsx("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.6},children:oe.tooltip||`Win rate: ${oe.wr}% across ${oe.total} trades with ${oe.pnl>=0?"profit":"loss"} of $${(oe.pnl/1e3).toFixed(1)}K`}),e.jsxs("div",{style:{marginTop:10,padding:"6px 8px",background:"rgba(255,255,255,0.05)",borderRadius:6,fontSize:10,display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{style:{color:"#666"},children:"Win Rate"}),e.jsxs("span",{style:{color:oe.color,fontWeight:700},children:[oe.wr,"%"]})]})]}),P&&e.jsxs("div",{style:{position:"fixed",left:P.x+15,top:P.y+15,transform:P.x>window.innerWidth-320?"translateX(-100%)":"none",background:"linear-gradient(135deg, rgba(15,15,20,0.98) 0%, rgba(5,5,10,0.98) 100%)",border:`1px solid ${P.color}40`,borderRadius:12,padding:16,width:280,boxShadow:`0 8px 32px rgba(0,0,0,0.5), 0 0 20px ${P.color}20`,zIndex:9999,pointerEvents:"none"},children:[e.jsx("div",{style:{fontSize:12,fontWeight:700,color:P.color,marginBottom:10,borderBottom:`1px solid ${P.color}30`,paddingBottom:8},children:P.title}),e.jsx("div",{style:{fontSize:11,color:"#aaa",lineHeight:1.6},children:P.content})]}),(D||Q)&&e.jsx("div",{onClick:()=>{O(null),De(null)},style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998,cursor:"default"}}),D&&e.jsxs("div",{onClick:()=>O(null),style:{position:"fixed",left:D.x+15,top:D.y+15,transform:D.x>window.innerWidth-280?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(20,15,30,0.98) 0%, rgba(10,8,20,0.98) 100%)",border:"1px solid rgba(139,92,246,0.4)",borderRadius:14,padding:16,minWidth:240,boxShadow:"0 12px 40px rgba(0,0,0,0.8), 0 0 20px rgba(139,92,246,0.2)",zIndex:9999,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:12},children:[e.jsx("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:10,padding:8,border:"1px solid rgba(139,92,246,0.2)"},children:D.visual.svg}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#8b5cf6",marginBottom:4},children:ft(D.type)}),e.jsx("div",{style:{fontSize:11,color:D.visual.color,fontWeight:600,padding:"2px 8px",background:`${D.visual.color}22`,borderRadius:4,display:"inline-block"},children:D.visual.signal})]})]}),e.jsx("div",{style:{fontSize:11,color:"#bbb",lineHeight:1.6,marginBottom:12},children:D.visual.desc}),e.jsxs("div",{style:{padding:"8px 10px",background:"rgba(139,92,246,0.1)",borderRadius:8,fontSize:10,color:"#888",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Occurrences"}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#8b5cf6",fontWeight:700,fontSize:12},children:D.count})," (",D.pct,"%)"]})]}),e.jsx("div",{style:{fontSize:9,color:"#555",textAlign:"center",marginTop:8},children:"Click anywhere to dismiss"})]}),Q&&e.jsxs("div",{onClick:()=>De(null),style:{position:"fixed",left:Q.x+15,top:Q.y+15,transform:Q.x>window.innerWidth-300?"translateX(-100%)":"none",background:"linear-gradient(180deg, rgba(15,25,30,0.98) 0%, rgba(8,15,20,0.98) 100%)",border:"1px solid rgba(0,188,212,0.4)",borderRadius:14,padding:16,width:260,boxShadow:"0 12px 40px rgba(0,0,0,0.8), 0 0 20px rgba(0,188,212,0.2)",zIndex:9999,cursor:"pointer"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14,marginBottom:12},children:[e.jsx("div",{style:{background:"rgba(0,188,212,0.1)",borderRadius:10,padding:8,border:"1px solid rgba(0,188,212,0.2)"},children:Q.visual.svg}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#00bcd4",marginBottom:4,textTransform:"capitalize"},children:Q.phase.replace(/_/g," ")}),e.jsx("div",{style:{fontSize:11,color:Q.visual.color,fontWeight:600,padding:"2px 8px",background:`${Q.visual.color}22`,borderRadius:4,display:"inline-block"},children:Q.visual.signal})]})]}),e.jsx("div",{style:{fontSize:11,color:"#bbb",lineHeight:1.6,marginBottom:12},children:Q.visual.desc}),e.jsxs("div",{style:{padding:"8px 10px",background:"rgba(0,188,212,0.1)",borderRadius:8,fontSize:10,color:"#888",display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:"Occurrences"}),e.jsxs("span",{children:[e.jsx("span",{style:{color:"#00bcd4",fontWeight:700,fontSize:12},children:Q.count})," (",Q.pct,"%)"]})]}),e.jsx("div",{style:{fontSize:9,color:"#555",textAlign:"center",marginTop:8},children:"Click anywhere to dismiss"})]})]})},Rp=({trades:t,dateRange:n})=>{const i=t.filter(l=>l.date>=n.start&&l.date<=n.end).sort((l,a)=>new Date(a.date)-new Date(l.date)),o=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"],a=i.map(u=>{var D,O,Q,De,f;return[u.date,((D=u.entry)==null?void 0:D.toFixed(2))||"",((O=u.exit)==null?void 0:O.toFixed(2))||"",((Q=u.stop_loss)==null?void 0:Q.toFixed(2))||"",((De=u.pnl)==null?void 0:De.toFixed(2))||"",((f=u.r)==null?void 0:f.toFixed(2))||"",u.grade||"",u.tier||"",u.exitReason||"",u.delta||"",u.contracts||""]}),d=[l.join(","),...a.map(u=>u.join(","))].join(`
`),p=new Blob([d],{type:"text/csv"}),C=URL.createObjectURL(p),x=document.createElement("a");x.href=C,x.download=`trade_log_${n.start}_to_${n.end}.csv`,x.click(),URL.revokeObjectURL(C)},r=()=>{const l=["Date","Entry","Exit","Stop Loss","P&L","R-Multiple","Grade","Tier","Exit Reason","Delta","Contracts"];let a='<?xml version="1.0"?><?mso-application progid="Excel.Sheet"?>';a+='<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">',a+='<Worksheet ss:Name="Trades"><Table>',a+="<Row>"+l.map(x=>`<Cell><Data ss:Type="String">${x}</Data></Cell>`).join("")+"</Row>",i.forEach(x=>{a+="<Row>",a+=`<Cell><Data ss:Type="String">${x.date||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.entry||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.exit||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.stop_loss||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.pnl||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.r||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="String">${x.grade||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.tier||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="String">${x.exitReason||""}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.delta||0}</Data></Cell>`,a+=`<Cell><Data ss:Type="Number">${x.contracts||0}</Data></Cell>`,a+="</Row>"}),a+="</Table></Worksheet></Workbook>";const d=new Blob([a],{type:"application/vnd.ms-excel"}),p=URL.createObjectURL(d),C=document.createElement("a");C.href=p,C.download=`trade_log_${n.start}_to_${n.end}.xls`,C.click(),URL.revokeObjectURL(p)},s=i.slice(0,50);return e.jsxs("div",{style:J.tradeLog,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h2",{style:J.dashboardTitle,children:"Trade Log"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:o,style:{background:"rgba(0,255,136,0.1)",border:"1px solid #00ff88",color:"#00ff88",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" CSV (",i.length,")"]}),e.jsxs("button",{onClick:r,style:{background:"rgba(0,170,255,0.1)",border:"1px solid #00aaff",color:"#00aaff",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:[" Excel (",i.length,")"]})]})]}),e.jsxs("p",{style:J.tradeLogInfo,children:["Showing ",s.length," of ",i.length," filtered trades (most recent first)"]}),e.jsxs("table",{style:J.tradeTable,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:J.th,children:"Date"}),e.jsx("th",{style:J.th,children:"Entry"}),e.jsx("th",{style:J.th,children:"Exit"}),e.jsx("th",{style:J.th,children:"P&L"}),e.jsx("th",{style:J.th,children:"R-Multiple"}),e.jsx("th",{style:J.th,children:"Grade"}),e.jsx("th",{style:J.th,children:"Tier"}),e.jsx("th",{style:J.th,children:"Exit Reason"})]})}),e.jsx("tbody",{children:s.map(l=>{var a;return e.jsxs("tr",{style:J.tr,children:[e.jsx("td",{style:J.td,children:l.date}),e.jsxs("td",{style:J.td,children:["$",l.entry.toFixed(2)]}),e.jsxs("td",{style:J.td,children:["$",l.exit.toFixed(2)]}),e.jsxs("td",{style:{...J.td,color:l.pnl>=0?"#00ff88":"#ff4466"},children:["$",l.pnl.toLocaleString()]}),e.jsxs("td",{style:{...J.td,color:l.r>=0?"#00ff88":"#ff4466"},children:[l.r.toFixed(1),"R"]}),e.jsx("td",{style:J.td,children:e.jsx("span",{style:{...J.gradeBadge,background:l.grade==="A"?"#00ff88":l.grade==="B"?"#ffaa00":"#ff4466"},children:l.grade})}),e.jsx("td",{style:J.td,children:l.tier}),e.jsx("td",{style:J.td,children:e.jsx("span",{style:{fontSize:"11px",color:l.exitReason==="STOP_LOSS"?"#ff4466":"#00ff88"},children:((a=l.exitReason)==null?void 0:a.replace("_"," "))||""})})]},l.id)})})]})]})},Pr={"BTC-SPOT":{symbol:"BTC-SPOT",name:"Bitcoin Spot 24/7",ticker:"BTCUSDT",asset:"BTC-SPOT",icon:"",isSpot:!0},ESH26:{symbol:"ESH26",name:"E-mini S&P Mar 2026",ticker:"ES1!",asset:"ES",icon:""},NQH26:{symbol:"NQH26",name:"Nasdaq Mar 2026",ticker:"NQ1!",asset:"NQ",icon:""},GCJ26:{symbol:"GCJ26",name:"Gold Apr 2026",ticker:"GC1!",asset:"GC",icon:""},BTCG26:{symbol:"BTCG26",name:"Bitcoin CME Feb 2026",ticker:"BTC1!",asset:"BTC",icon:""},CLG26:{symbol:"CLG26",name:"Crude Oil Feb 2026",ticker:"CL1!",asset:"CL",icon:""}},f0=({selectedContract:t,onContractChange:n,contracts:i,isMobile:o})=>{var d;const[r,s]=A.useState(!1),l=A.useRef(null),a=i[t];return A.useEffect(()=>{const p=C=>{l.current&&!l.current.contains(C.target)&&s(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),e.jsxs("div",{ref:l,style:{position:"relative"},children:[e.jsxs("button",{onClick:()=>s(!r),style:{display:"flex",alignItems:"center",gap:o?6:10,padding:o?"6px 10px":"10px 16px",background:"linear-gradient(135deg, rgba(0,255,136,0.15) 0%, rgba(0,170,255,0.1) 100%)",border:"1px solid rgba(0,255,136,0.4)",borderRadius:8,cursor:"pointer",transition:"all 0.2s ease",outline:"none"},children:[e.jsx("span",{style:{fontSize:o?14:18},children:(a==null?void 0:a.icon)||""}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("div",{style:{fontSize:o?12:14,fontWeight:700,color:"#00ff88",fontFamily:"'JetBrains Mono', monospace",letterSpacing:.5},children:(a==null?void 0:a.symbol)||"SELECT"}),!o&&e.jsx("div",{style:{fontSize:9,color:"#888",marginTop:1},children:((d=a==null?void 0:a.name)==null?void 0:d.split(" ").slice(0,2).join(" "))||"Contract"})]}),e.jsx("svg",{width:o?10:12,height:o?10:12,viewBox:"0 0 12 12",fill:"none",style:{marginLeft:o?2:6,transform:r?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:e.jsx("path",{d:"M2 4L6 8L10 4",stroke:"#00ff88",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),r&&e.jsxs("div",{style:{position:"absolute",bottom:"100%",left:0,marginBottom:8,minWidth:o?180:240,background:"linear-gradient(180deg, rgba(20,20,30,0.98) 0%, rgba(10,10,18,0.99) 100%)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:12,overflow:"hidden",boxShadow:"0 -10px 40px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",zIndex:2e3,animation:"slideUp 0.2s ease"},children:[e.jsx("div",{style:{padding:"10px 14px",borderBottom:"1px solid rgba(255,255,255,0.08)",background:"rgba(0,255,136,0.05)"},children:e.jsx("span",{style:{fontSize:10,color:"#888",letterSpacing:1,textTransform:"uppercase"},children:"Select Contract"})}),e.jsx("div",{style:{maxHeight:280,overflowY:"auto"},children:Object.entries(i).map(([p,C])=>{const x=p===t;return e.jsxs("div",{onClick:()=>{n(p),s(!1)},style:{display:"flex",alignItems:"center",gap:12,padding:"12px 14px",cursor:"pointer",background:x?"linear-gradient(90deg, rgba(0,255,136,0.2) 0%, transparent 100%)":"transparent",borderLeft:x?"3px solid #00ff88":"3px solid transparent",transition:"all 0.15s ease"},onMouseEnter:u=>{x||(u.currentTarget.style.background="rgba(255,255,255,0.05)")},onMouseLeave:u=>{x||(u.currentTarget.style.background="transparent")},children:[e.jsx("div",{style:{width:36,height:36,borderRadius:8,background:x?"rgba(0,255,136,0.2)":"rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:C.icon||""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:x?"#00ff88":"#fff",fontFamily:"'JetBrains Mono', monospace",marginBottom:2},children:C.symbol}),e.jsx("div",{style:{fontSize:10,color:"#888"},children:C.name})]}),x&&e.jsx("div",{style:{width:20,height:20,borderRadius:"50%",background:"#00ff88",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e.jsx("path",{d:"M2 6L5 9L10 3",stroke:"#000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},p)})}),e.jsx("div",{style:{padding:"8px 14px",borderTop:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.2)"},children:e.jsx("span",{style:{fontSize:9,color:"#555"},children:"Live data from Databento"})})]}),e.jsx("style",{children:`
        @keyframes slideUp {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbars for Windows users */
        .tpo-scroll-container::-webkit-scrollbar {
          width: 10px;
          height: 10px;
        }

        .tpo-scroll-container::-webkit-scrollbar-track {
          background: rgba(20, 20, 28, 0.8);
          border-radius: 5px;
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb {
          background: linear-gradient(180deg, rgba(100, 100, 120, 0.6) 0%, rgba(70, 70, 90, 0.6) 100%);
          border-radius: 5px;
          border: 2px solid rgba(20, 20, 28, 0.8);
        }

        .tpo-scroll-container::-webkit-scrollbar-thumb:hover {
          background: linear-gradient(180deg, rgba(130, 130, 150, 0.8) 0%, rgba(100, 100, 120, 0.8) 100%);
        }

        .tpo-scroll-container::-webkit-scrollbar-corner {
          background: rgba(20, 20, 28, 0.8);
        }

        /* Firefox scrollbar support */
        .tpo-scroll-container {
          scrollbar-width: thin;
          scrollbar-color: rgba(100, 100, 120, 0.6) rgba(20, 20, 28, 0.8);
        }
      `})]})},Pg=({globalData:t,selectedContract:n,onContractChange:i,contracts:o,isMobile:r})=>{var x,u,D,O;const s=["DISCONNECTED","NO_DATABENTO_LIB","NO_API_KEY","ERROR"],l=["INITIALIZING","SWITCHING...","WAITING_CONNECTION_SLOT","RESETTING..."],a=((x=t==null?void 0:t.data_source)==null?void 0:x.includes("RECONNECTING"))||l.includes(t==null?void 0:t.data_source),d=(t==null?void 0:t.data_source)&&!s.includes(t.data_source)&&!a,p=d?"LIVE":a?"RECONNECTING":"OFFLINE",C=d?"#00ff88":a?"#ffaa00":"#ff4466";return r?e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.98) 0%, rgba(5,5,10,1) 100%)",borderTop:"1px solid rgba(0,255,136,0.3)",padding:"8px 12px",zIndex:1e3,backdropFilter:"blur(10px)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[e.jsx(f0,{selectedContract:n,onContractChange:i,contracts:o,isMobile:!0}),e.jsx("div",{style:{padding:"6px 14px",background:d?"rgba(0,255,136,0.15)":a?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${d?"rgba(0,255,136,0.4)":a?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:8},children:e.jsxs("span",{style:{fontSize:16,fontWeight:700,color:d?"#00ff88":a?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace"},children:["$",((u=t==null?void 0:t.current_price)==null?void 0:u.toFixed(2))||"----.--"]})}),e.jsx("div",{style:{padding:"6px 10px",background:"rgba(255,255,255,0.03)",borderRadius:6},children:e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#fff",fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.current_et_time)||"--:--"})})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,padding:"4px 0",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:C,boxShadow:`0 0 6px ${C}`,animation:d||a?"pulse 2s infinite":"none"}}),e.jsx("span",{style:{fontSize:9,fontWeight:700,color:C},children:p})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsxs("span",{style:{fontSize:9,color:"#666"},children:["LATENCY: ",e.jsx("span",{style:{color:d?"#00ff88":"#666"},children:d?"~10ms":a?"...":"--"})]}),e.jsx("span",{style:{color:"#444",fontSize:9},children:"|"}),e.jsx("span",{style:{fontSize:9,color:d?"#00aaff":a?"#ffaa00":"#666"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]}):e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"linear-gradient(180deg, rgba(10,10,15,0.95) 0%, rgba(5,5,10,0.98) 100%)",borderTop:"1px solid rgba(0,255,136,0.2)",padding:"12px 24px",display:"flex",alignItems:"center",justifyContent:"center",gap:24,zIndex:1e3,backdropFilter:"blur(10px)",boxShadow:"0 -4px 20px rgba(0,0,0,0.5)"},children:[e.jsx(f0,{selectedContract:n,onContractChange:i,contracts:o,isMobile:!1}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:12},children:e.jsxs("div",{style:{padding:"8px 16px",background:"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6,display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666"},children:"ET"}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fff",fontFamily:"'JetBrains Mono', monospace",letterSpacing:1},children:(t==null?void 0:t.current_et_time)||"--:--:--"})]})}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{fontSize:11,color:"#666",textTransform:"uppercase",letterSpacing:1},children:"Price"}),e.jsx("div",{style:{padding:"8px 20px",background:d?"rgba(0,255,136,0.15)":a?"rgba(255,170,0,0.1)":"rgba(255,255,255,0.03)",border:`1px solid ${d?"rgba(0,255,136,0.4)":a?"rgba(255,170,0,0.3)":"rgba(255,255,255,0.1)"}`,borderRadius:6,boxShadow:d?"0 0 20px rgba(0,255,136,0.2)":a?"0 0 15px rgba(255,170,0,0.15)":"none"},children:e.jsxs("span",{style:{fontSize:20,fontWeight:700,color:d?"#00ff88":a?"#ffaa00":"#666",fontFamily:"'JetBrains Mono', monospace",textShadow:d?"0 0 10px rgba(0,255,136,0.5)":"none"},children:["$",((D=t==null?void 0:t.current_price)==null?void 0:D.toFixed(2))||"----.--"]})})]}),e.jsx("div",{style:{padding:"6px 12px",background:"rgba(255,255,255,0.02)",borderRadius:4,fontSize:11,color:"#888"},children:((O=o[n])==null?void 0:O.name)||"Gold Apr 2026"}),e.jsx("div",{style:{width:1,height:30,background:"rgba(255,255,255,0.1)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,padding:"6px 14px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:6},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:C,boxShadow:`0 0 6px ${C}`,animation:d||a?"pulse 2s infinite":"none"}}),e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:C,boxShadow:`0 0 6px ${C}`,animation:d||a?"pulse 2s infinite 0.3s":"none"}}),e.jsx("span",{style:{fontSize:11,fontWeight:700,color:C,marginLeft:4,textTransform:"uppercase",letterSpacing:1},children:p})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"LATENCY:"}),e.jsx("span",{style:{fontSize:11,color:C,fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:d?"~10ms":a?"...":"--"}),d&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(0,255,136,0.2)",border:"1px solid rgba(0,255,136,0.3)",borderRadius:3,color:"#00ff88",fontWeight:600},children:"EXCELLENT"}),a&&e.jsx("span",{style:{fontSize:9,padding:"2px 6px",background:"rgba(255,170,0,0.2)",border:"1px solid rgba(255,170,0,0.3)",borderRadius:3,color:"#ffaa00",fontWeight:600},children:"WAITING"})]}),e.jsx("div",{style:{width:1,height:16,background:"rgba(255,255,255,0.15)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("span",{style:{fontSize:10,color:"#666",letterSpacing:.5},children:"SOURCE:"}),e.jsx("span",{style:{fontSize:11,color:d?"#00aaff":a?"#ffaa00":"#666",fontWeight:600,fontFamily:"'JetBrains Mono', monospace"},children:(t==null?void 0:t.data_source)||"DISCONNECTED"})]})]})]})},Ng=()=>{var Be;const{isMobile:t}=Oo(),[n,i]=ca("horizon_user",null),[o,r]=A.useState("backtest"),[s,l]=ca("horizon_settings",Tp),[a,d]=A.useState({start:"2021-01-01",end:"2026-12-31"}),[p,C]=ca("horizon_contract","GCJ26");A.useEffect(()=>{(async()=>{let ne;p==="BTC-SPOT"?ne="BTC-SPOT":p.startsWith("BTC")?ne="BTC":p.startsWith("GC")?ne="GC":p.startsWith("NQ")?ne="NQ":p.startsWith("ES")?ne="ES":p.startsWith("CL")?ne="CL":ne="GC";try{await fetch(`${Zt}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:ne})}),console.log(`Synced backend to ${p} (${ne})`)}catch(ke){console.error("Failed to sync contract on load:",ke)}})()},[]);const[x,u]=A.useState({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),D=A.useRef(0),[O,Q]=A.useState({contract:"GCJ26",contract_name:"Gold Apr 2026",current_price:0,current_et_time:"--:--:--",current_et_date:""}),[De,f]=A.useState(!1),[y,R]=A.useState([{role:"assistant",content:"Welcome to Horizon AI! I can help you analyze market structure, interpret TPO profiles, and provide trading insights based on live data."}]),[c,N]=A.useState(""),[S,B]=A.useState(!1),F=A.useRef(null);A.useEffect(()=>{var P;(P=F.current)==null||P.scrollIntoView({behavior:"smooth"})},[y]),A.useEffect(()=>{const P=["/live","/tpo","/zones","/market-overview","/historical-sessions?week=current"];console.log("Warming up caches..."),P.forEach(ne=>{fetch(`${Zt}${ne}`).then(()=>console.log(`Warmed up ${ne}`)).catch(()=>{})})},[]),A.useEffect(()=>{const ne={backtest:["/live"],live:["/tpo","/zones"],tpo:["/zones"],zones:["/live"],treemap:[],vsi:[],priceladder:["/tpo"]}[o]||[];o!=="treemap"&&ne.push("/market-overview");const ke=setTimeout(()=>{ne.forEach(Ae=>{fetch(`${Zt}${Ae}`).then(()=>console.log(`Preloaded ${Ae}`)).catch(()=>{})})},500);return()=>clearTimeout(ke)},[o]);const pe=async()=>{if(!c.trim()||S)return;const P=c.trim();N(""),R(ze=>[...ze,{role:"user",content:P}]),B(!0);let ne={};try{const ze=await fetch(`${Zt}/live`);ze.ok&&(ne=await ze.json())}catch{}let ke={};try{const ze=await fetch(`${Zt}/session-ohlc?week=current`);ze.ok&&(ke=await ze.json())}catch{}const Ae={currentPrice:O.current_price,contract:O.contract,contractName:O.contract_name,currentTime:O.current_et_time,liveSession:ne.current_session||null,sessionHigh:ne.session_high||null,sessionLow:ne.session_low||null,dayHigh:ne.day_high||null,dayLow:ne.day_low||null,pdHigh:ne.pd_high||null,pdLow:ne.pd_low||null,pdPOC:ne.pd_poc||null,cumulativeDelta:ne.cumulative_delta||null,buyVolume:ne.buy_volume||null,sellVolume:ne.sell_volume||null,sessionData:ke.days?ke.days.slice(0,2):null};try{const ze=await fetch(`${Zt}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:P,context:Ae,provider:"claude"})});if(ze.ok){const Te=await ze.json();R(Ze=>[...Ze,{role:"assistant",content:Te.response,error:!1}])}else{const Te=await ze.json();R(Ze=>[...Ze,{role:"assistant",content:Te.error||"Sorry, I encountered an error. Please try again.",error:!0}])}}catch{R(Te=>[...Te,{role:"assistant",content:"Connection error. Please check your connection and try again.",error:!0}])}B(!1)};A.useEffect(()=>{let P=0,ne=!1;const ke=3,Ae=1e3,ze=async()=>{if(!ne){ne=!0,console.log(" Auto-reconnecting to backend...");try{(await fetch(`${Zt}/reconnect`,{method:"POST"})).ok&&console.log(" Auto-reconnect triggered successfully")}catch{console.log(" Auto-reconnect request failed, backend may be restarting")}await new Promise(Y=>setTimeout(Y,2e3)),ne=!1}},Te=async()=>{try{const Y=new AbortController,Ke=setTimeout(()=>Y.abort(),3e3),rt=await fetch(Zt,{signal:Y.signal});if(clearTimeout(Ke),rt.ok){const et=await rt.json(),me=["INITIALIZING","SWITCHING...","WAITING_CONNECTION_SLOT","RESETTING...","DISCONNECTED"],g=et.data_source&&!me.includes(et.data_source)&&!et.data_source.includes("RECONNECTING"),j=et.data_source&&(et.data_source.includes("RECONNECTING")||et.data_source==="WAITING_CONNECTION_SLOT"||et.data_source==="INITIALIZING");Q({contract:et.contract||"GCJ26",contract_name:et.contract_name||"Gold Apr 2026",current_price:et.current_price||0,current_et_time:et.current_et_time||"--:--:--",current_et_date:et.current_et_date||"",available_contracts:et.available_contracts||{},data_source:et.data_source||"DISCONNECTED"}),g?(P=0,u(K=>({...K,connected:!0,lastSuccessTime:new Date().toISOString(),reconnectAttempts:0,lastError:null}))):(j||(P++,P>=ke&&!ne&&ze()),u(K=>({...K,connected:j?"reconnecting":!1,lastError:`Data source: ${et.data_source||"DISCONNECTED"}`,reconnectAttempts:j?K.reconnectAttempts:K.reconnectAttempts+1})))}else throw new Error(`HTTP ${rt.status}`)}catch(Y){P++;const Ke=Y.name==="AbortError"?"Request timeout":Y.message||"Unknown error",rt=Ke.includes("ECONNRESET")||Ke.includes("connection reset")||Ke.includes("Failed to fetch")||Ke.includes("NetworkError")||Ke.includes("timeout");u(et=>({...et,connected:!1,lastError:rt?`Network: ${Ke}`:Ke,errorCount:et.errorCount+1,reconnectAttempts:et.reconnectAttempts+1})),P>=ke&&!ne&&ze()}};Te();let Ze=setInterval(Te,Ae);const Et=setInterval(()=>{P>0&&console.log(` Health check: ${P} consecutive failures`)},3e4);return()=>{clearInterval(Ze),clearInterval(Et)}},[D.current]);const U=async P=>{var ke,Ae;let ne;P==="BTC-SPOT"?ne="BTC-SPOT":P.startsWith("BTC")?ne="BTC":P.startsWith("GC")?ne="GC":P.startsWith("NQ")?ne="NQ":P.startsWith("ES")?ne="ES":P.startsWith("CL")?ne="CL":ne=((ke=Pr[P])==null?void 0:ke.asset)||"GC",C(P),Q(ze=>({...ze,data_source:"SWITCHING...",current_price:0}));try{if((await fetch(`${Zt}/switch-contract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract:ne})})).ok){localStorage.removeItem("tpo_historic_cache"),console.log(`Switched to ${P} (${ne})`);const Te=P==="BTC-SPOT"?"BTC-SPOT":((Ae=Pr[P])==null?void 0:Ae.symbol)||P;let Ze=0;const Et=20,Y=async()=>{var Ke;try{const rt=await fetch(Zt);if(rt.ok){const et=await rt.json();if(et.contract===Te||et.asset_class===ne||Ze>=Et){Q({contract:et.contract||P,contract_name:et.contract_name||((Ke=Pr[P])==null?void 0:Ke.name)||P,current_price:et.current_price||0,current_et_time:et.current_et_time||"--:--:--",current_et_date:et.current_et_date||"",available_contracts:et.available_contracts||{},data_source:et.data_source||"SWITCHING..."});return}}}catch{console.log("Polling for new contract data...")}Ze++,Ze<Et&&setTimeout(Y,500)};setTimeout(Y,500)}}catch(ze){console.error("Failed to switch contract:",ze),Q(Te=>({...Te,data_source:"ERROR"}))}},m=async()=>{u({connected:!1,lastError:null,errorCount:0,lastSuccessTime:null,reconnectAttempts:0}),D.current+=1,console.log("Connection reset triggered");try{const P=await fetch(`${Zt}/reconnect`,{method:"POST"});if(P.ok){const ne=await P.json();console.log("Backend reconnect:",ne.message)}}catch(P){console.error("Failed to trigger backend reconnect:",P)}},{trades:h,stats:w,source:Me,metadata:I,sessions:Fe,volumeProfiles:He,bigVolumeDays:te,supportResistance:_e,seasonality:v,dailyCandles:he,hourlyCandles:le,featureStatistics:Ne,distributions:ot}=jg(),_t=A.useMemo(()=>({metadata:I,sessions:Fe,volumeProfiles:He,bigVolumeDays:te,supportResistance:_e,seasonality:v,dailyCandles:he,hourlyCandles:le,featureStatistics:Ne,distributions:ot}),[I,Fe,He,te,_e,v,he,le,Ne,ot]),Ge=A.useMemo(()=>h&&h.length>0?h:vg(),[h,s]);A.useEffect(()=>{if(h&&h.length>0){const P=h.map(ne=>ne.date).sort();d({start:P[0],end:P[P.length-1]})}},[h]);const ft=A.useMemo(()=>Ge.filter(P=>{var ne,ke,Ae;return!(P.date<a.start||P.date>a.end||P.delta!==void 0&&P.delta>s.deltaThreshold||P.pnl>0&&P.buyingImbalance!==void 0&&P.buyingImbalance<s.buyingImbalancePct||(ne=s.filters)!=null&&ne.grades&&P.grade&&s.filters.grades[P.grade]===!1||(ke=s.filters)!=null&&ke.tiers&&P.tier&&!s.filters.tiers[P.tier]||((Ae=s.filters)==null?void 0:Ae.minR)!==void 0&&P.r!==void 0&&P.r<s.filters.minR)}),[Ge,a,s.deltaThreshold,s.buyingImbalancePct,s.filters]),qe=A.useMemo(()=>Sg(ft,s),[ft,s]);new Date().toISOString();const oe=P=>i(P),Le=()=>i(null);return n?e.jsx(_p.Provider,{value:s,children:e.jsx(mg.Provider,{value:n,children:e.jsxs("div",{style:J.app,children:[e.jsx(zg,{activeTab:o,setActiveTab:r,onLogout:Le}),e.jsxs("main",{style:{...J.main,padding:t?"12px":"24px",paddingBottom:t?"85px":"80px"},children:[o==="backtest"&&e.jsx(Og,{data:qe,trades:ft,dateRange:a,setDateRange:d,extendedData:_t}),o==="live"&&e.jsx(Mg,{settings:s,onSettingsChange:l}),o==="tpo"&&e.jsx(Wg,{selectedContract:p}),o==="zones"&&e.jsx(Fg,{}),o==="treemap"&&e.jsx(Cg,{}),o==="vsi"&&e.jsx(Rg,{selectedContract:p}),o==="trades"&&e.jsx(Rp,{trades:Ge,dateRange:a}),o==="priceladder"&&e.jsx(_g,{selectedContract:p}),o==="settings"&&e.jsx(Eg,{settings:s,onSettingsChange:l,trades:ft,dateRange:a,connectionStatus:x,onResetConnection:m}),o==="redfolder"&&e.jsx(Bg,{})]}),e.jsxs("footer",{style:J.footer,children:[e.jsx("span",{children:"Project Horizon v2.0 | Underground Setup Strategy"}),e.jsxs("span",{children:[((Be=Pr[p])==null?void 0:Be.name)||"GC Futures"," | 2025 Market Regime"]})]}),De&&e.jsxs("div",{style:{position:"fixed",bottom:t?70:100,right:t?10:24,left:t?10:"auto",width:t?"auto":380,height:t?"calc(100vh - 150px)":500,maxHeight:t?"70vh":500,background:"linear-gradient(180deg, rgba(12,12,18,0.98) 0%, rgba(8,8,14,1) 100%)",borderRadius:16,border:"1px solid rgba(0,255,136,0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.6), 0 0 20px rgba(0,255,136,0.1)",display:"flex",flexDirection:"column",zIndex:1e3,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"16px 20px",borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(0,255,136,0.05)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:8,background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,fontWeight:700,color:"#000"},children:"H"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,fontSize:14,color:"#fff"},children:"Horizon AI"}),e.jsx("div",{style:{fontSize:10,color:"#00ff88"},children:"Trading Assistant"})]})]}),e.jsx("button",{onClick:()=>f(!1),style:{background:"transparent",border:"none",color:"#666",fontSize:20,cursor:"pointer",padding:4},children:""})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:16,display:"flex",flexDirection:"column",gap:12},children:[y.map((P,ne)=>e.jsx("div",{style:{alignSelf:P.role==="user"?"flex-end":"flex-start",maxWidth:P.role==="user"?"85%":"95%",width:P.role==="user"?"auto":"95%"},children:e.jsx("div",{style:{padding:P.role==="assistant"?"14px 16px":"10px 14px",borderRadius:P.role==="user"?"14px 14px 4px 14px":"14px 14px 14px 4px",background:P.role==="user"?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.06)",border:P.role==="user"?"none":"1px solid rgba(255,255,255,0.1)",color:P.role==="user"?"#000":P.error?"#ff6b6b":"#e8e8e8",fontSize:13,lineHeight:1.6,fontWeight:P.role==="user"?500:400},children:P.role==="assistant"?e.jsx("div",{dangerouslySetInnerHTML:{__html:P.content.replace(/\*\*(.+?)\*\*/g,'<strong style="color:#00ff88">$1</strong>').replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,'<code style="background:rgba(0,255,136,0.15);padding:2px 6px;border-radius:4px;font-family:monospace;font-size:12px">$1</code>').replace(/\n- /g,"<br/> ").replace(/\n\d+\. /g,ke=>"<br/>"+ke.trim()+" ").replace(/\n\n/g,'</p><p style="margin:8px 0">').replace(/\n/g,"<br/>")}}):P.content})},ne)),S&&e.jsx("div",{style:{alignSelf:"flex-start",width:"95%"},children:e.jsxs("div",{style:{padding:"14px 16px",borderRadius:"14px 14px 14px 4px",background:"rgba(255,255,255,0.06)",border:"1px solid rgba(255,255,255,0.1)",color:"#888",fontSize:13,display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{width:6,height:6,borderRadius:"50%",background:"#00ff88",animation:"pulse 1.5s ease-in-out infinite"}}),"Analyzing..."]})}),e.jsx("div",{ref:F})]}),e.jsxs("div",{style:{padding:12,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:8},children:[e.jsx("input",{type:"text",value:c,onChange:P=>N(P.target.value),onKeyPress:P=>P.key==="Enter"&&pe(),placeholder:"Ask about trading...",style:{flex:1,padding:"10px 14px",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(0,0,0,0.3)",color:"#fff",fontSize:13,outline:"none"}}),e.jsx("button",{onClick:pe,disabled:S||!c.trim(),style:{padding:"10px 16px",borderRadius:10,border:"none",background:c.trim()&&!S?"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)":"rgba(255,255,255,0.1)",color:c.trim()&&!S?"#000":"#666",fontWeight:600,fontSize:13,cursor:c.trim()&&!S?"pointer":"not-allowed"},children:"Send"})]})]}),e.jsx("button",{onClick:()=>f(!De),style:{position:"fixed",bottom:t?75:24,right:t?12:24,width:De?48:"auto",height:t?40:48,padding:De?0:t?"0 14px":"0 20px",borderRadius:De?"50%":24,border:"none",background:"linear-gradient(135deg, #00ff88 0%, #00cc6a 100%)",color:"#000",fontWeight:700,fontSize:t?12:14,cursor:"pointer",boxShadow:"0 4px 20px rgba(0,255,136,0.4)",zIndex:1001,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.2s ease"},children:De?"":e.jsxs(e.Fragment,{children:[e.jsx("span",{style:{fontSize:18},children:"H"}),e.jsx("span",{children:"Horizon"})]})}),e.jsx(Pg,{globalData:O,selectedContract:p,onContractChange:U,contracts:Pr,isMobile:t}),e.jsx(hg,{})]})})}):e.jsx(kg,{onLogin:oe})},J={app:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",color:"#e0e0e0",fontFamily:"'JetBrains Mono', 'Fira Code', monospace",overflowX:"hidden",width:"100%",maxWidth:"100vw"},main:{padding:"24px",paddingBottom:"80px",maxWidth:"1600px",margin:"0 auto",overflowX:"hidden"},footer:{display:"flex",justifyContent:"space-between",padding:"16px 24px",paddingBottom:"70px",borderTop:"1px solid rgba(255,255,255,0.05)",fontSize:"12px",color:"#666"},loginContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0a0a0f 0%, #12121a 50%, #0a0a0f 100%)",padding:"20px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginCard:{width:"100%",maxWidth:"420px",background:"rgba(20,20,28,0.95)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",padding:"48px 40px",boxShadow:"0 25px 50px rgba(0,0,0,0.5)",fontFamily:"'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"},loginHeader:{textAlign:"center",marginBottom:"40px"},logo:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"16px"},logoIcon:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center"},logoText:{fontSize:"22px",fontWeight:"700",color:"#fff",letterSpacing:"3px",fontFamily:"'Inter', 'SF Pro Display', -apple-system, sans-serif"},loginSubtitle:{color:"#888",fontSize:"13px",fontFamily:"'Inter', sans-serif",letterSpacing:"0.5px"},loginForm:{display:"flex",flexDirection:"column",gap:"20px"},inputGroup:{display:"flex",flexDirection:"column",gap:"8px"},inputLabel:{fontSize:"11px",color:"#888",textTransform:"uppercase",letterSpacing:"1px",fontFamily:"'Inter', sans-serif"},input:{padding:"14px 16px",background:"rgba(0,0,0,0.4)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"#fff",fontSize:"15px",outline:"none",transition:"border-color 0.2s",fontFamily:"'Inter', sans-serif"},error:{padding:"12px",background:"rgba(255,68,102,0.1)",border:"1px solid rgba(255,68,102,0.3)",borderRadius:"8px",color:"#ff4466",fontSize:"13px",fontFamily:"'Inter', sans-serif"},loginButton:{padding:"16px",background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",border:"none",borderRadius:"8px",color:"#000",fontSize:"13px",fontWeight:"700",cursor:"pointer",textTransform:"uppercase",letterSpacing:"1px",transition:"all 0.2s",fontFamily:"'Inter', sans-serif"},loginFooter:{textAlign:"center",marginTop:"32px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,0.05)"},footerText:{color:"#555",fontSize:"11px",margin:"4px 0",fontFamily:"'Inter', sans-serif"},nav:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",background:"rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.05)"},navBrand:{display:"flex",alignItems:"center",gap:"10px"},navTabs:{display:"flex",gap:"8px"},settingsPanel:{maxWidth:"1200px",margin:"0 auto"},settingsHeader:{marginBottom:"32px"},settingsSubtitle:{color:"#666",fontSize:"14px",marginTop:"8px"},settingsGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px",marginBottom:"32px"},settingsCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"12px"},settingsCardTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",marginBottom:"14px"},sliderGroup:{marginBottom:"16px"},sliderHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},sliderLabel:{fontSize:"11px",color:"#aaa"},sliderValue:{fontSize:"13px",fontWeight:"700",color:"#00ff88"},slider:{width:"100%",height:"6px",borderRadius:"3px",background:"rgba(255,255,255,0.1)",outline:"none",cursor:"pointer",WebkitAppearance:"none"},sliderTicks:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#555",marginTop:"4px"},allocationNote:{fontSize:"12px",color:"#888",marginBottom:"16px"},tierVisual:{display:"flex",height:"8px",borderRadius:"4px",overflow:"hidden",marginTop:"16px"},tierBar:{height:"100%",transition:"width 0.3s"},tierLegend:{display:"flex",justifyContent:"space-around",fontSize:"11px",color:"#888",marginTop:"12px"},settingsActions:{display:"flex",gap:"16px",justifyContent:"center",marginBottom:"32px"},actionButton:{padding:"14px 32px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",border:"none"},resetButton:{background:"transparent",border:"1px solid rgba(255,255,255,0.2)",color:"#888"},applyButton:{background:"linear-gradient(135deg, #00ff88 0%, #00cc66 100%)",color:"#000"},settingsInfo:{padding:"24px",background:"rgba(0,170,255,0.05)",border:"1px solid rgba(0,170,255,0.2)",borderRadius:"12px"},infoTitle:{fontSize:"14px",color:"#00aaff",marginBottom:"16px"},infoList:{listStyle:"none",padding:0,margin:0,fontSize:"13px",color:"#888",lineHeight:"1.8"},statsCard:{padding:"20px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},statsTitle:{fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",marginBottom:"8px"},statsValue:{fontSize:"24px",fontWeight:"700",color:"#fff"},statsSubtitle:{fontSize:"12px",color:"#666",marginTop:"4px"},statsTrend:{fontSize:"12px",marginTop:"8px",fontWeight:"600"},liveDashboard:{maxWidth:"1000px",margin:"0 auto"},levelCard:{padding:"16px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.05)",borderRadius:"12px",textAlign:"center"},levelLabel:{fontSize:"11px",color:"#666",textTransform:"uppercase",marginBottom:"8px"},levelValue:{fontSize:"18px",fontWeight:"600",color:"#fff"},signalMatrix:{padding:"24px",background:"rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"16px",marginBottom:"24px"},signalHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},signalTitle:{fontSize:"14px",fontWeight:"600",color:"#fff",margin:0},signalCount:{fontSize:"14px",fontWeight:"600"},signalGrid:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",marginBottom:"20px"},signalItem:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 16px",borderRadius:"8px",border:"1px solid"},signalIndicator:{width:"10px",height:"10px",borderRadius:"50%"},signalName:{fontSize:"12px",color:"#ddd"},criticalBadge:{marginLeft:"auto",fontSize:"10px",fontWeight:"700",color:"#ffaa00",background:"rgba(255,170,0,0.2)",padding:"2px 6px",borderRadius:"4px"},setupStatus:{display:"flex",alignItems:"center",gap:"12px",paddingTop:"16px",borderTop:"1px solid rgba(255,255,255,0.05)"},phaseLabel:{fontSize:"12px",color:"#666"},phaseValue:{fontSize:"14px",fontWeight:"700"},dashboardTitle:{fontSize:"20px",fontWeight:"700",color:"#fff",margin:0},tradeLog:{maxWidth:"1200px",margin:"0 auto"},tradeLogInfo:{fontSize:"13px",color:"#666",marginTop:"8px",marginBottom:"16px"},tradeTable:{width:"100%",borderCollapse:"collapse",marginTop:"16px"},th:{padding:"14px 16px",textAlign:"left",fontSize:"11px",color:"#666",textTransform:"uppercase",letterSpacing:"1px",borderBottom:"1px solid rgba(255,255,255,0.1)"},tr:{transition:"background 0.2s"},td:{padding:"14px 16px",fontSize:"14px",borderBottom:"1px solid rgba(255,255,255,0.03)"},gradeBadge:{display:"inline-block",padding:"4px 10px",borderRadius:"4px",fontSize:"11px",fontWeight:"700",color:"#000"}},zp=document.createElement("style");zp.textContent=`
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  input:focus {
    border-color: #00ff88 !important;
  }
  button:hover:not(:disabled) {
    transform: translateY(-1px);
  }
  tr:hover {
    background: rgba(255,255,255,0.02);
  }
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    background: rgba(255,255,255,0.1);
    height: 8px;
    border-radius: 4px;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #00ff88;
    cursor: pointer;
    border: none;
    box-shadow: 0 0 10px rgba(0,255,136,0.5);
  }
  input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(1);
    cursor: pointer;
  }
`;document.head.appendChild(zp);fa.createRoot(document.getElementById("root")).render(e.jsx(Li.StrictMode,{children:e.jsx(Ng,{})}));
